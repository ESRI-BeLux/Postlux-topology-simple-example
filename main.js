/*! For license information please see main.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("main",[],t):"object"==typeof exports?exports.main=t():e.main=t()}(self,(()=>(()=>{var e,t,i={74815:(e,t,i)=>{"use strict";i.d(t,{L2:()=>Ct,FK:()=>vr,wt:()=>Fr,xr:()=>Jt,lh:()=>si,$x:()=>Hi,OX:()=>kt,h:()=>Kt,w$:()=>gr,gv:()=>Xr,Qu:()=>Nt});var r={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},n="app",s="r",o="o",a="s",l="t",c="http://www.w3.org/1999/xlink",h={get:(e,t)=>t in e?e[t]:"symbol"==typeof t||isNaN(t)?void 0:e.__items[t]},u=e=>new Proxy(new p(e),h),p=class{constructor(e=!1){this.caseInsensitive=e,this.__items=[]}get length(){return this.__items.length}item(e){return this.__items[e]||null}setNamedItem(e){e.namespaceURI=null,this.setNamedItemNS(e)}setNamedItemNS(e){null!=e&&null!=e.value&&(e.value=String(e.value));const t=this.__items.find((t=>t.name===e.name&&t.namespaceURI===e.namespaceURI));null!=t?t.value=e.value:this.__items.push(e)}getNamedItem(e){return this.caseInsensitive&&(e=e.toLowerCase()),this.getNamedItemNS(null,e)}getNamedItemNS(e,t){return e=d(e),this.__items.find((i=>i.name===t&&d(i.namespaceURI)===e))||null}removeNamedItem(e){this.removeNamedItemNS(e)}removeNamedItemNS(e){for(let t=0,i=this.__items.length;t<i;t++)if(this.__items[t].name===e.name&&this.__items[t].namespaceURI===e.namespaceURI){this.__items.splice(t,1);break}}[Symbol.iterator](){let e=0;return{next:()=>({done:e===this.length,value:this.item(e++)})}}get[Symbol.toStringTag](){return"MockAttributeMap"}};function d(e){return e===c?null:e}function f(e,t=!1){const i=new p(e.caseInsensitive);if(null!=e){const r=e.length;if(t&&r>1){const t=[];for(let i=0;i<r;i++){const r=e.item(i),n=new m(r.name,r.value,r.namespaceURI);t.push(n)}t.sort(y).forEach((e=>{i.setNamedItemNS(e)}))}else for(let t=0;t<r;t++){const r=e.item(t),n=new m(r.name,r.value,r.namespaceURI);i.setNamedItemNS(n)}}return i}function y(e,t){return e.name<t.name?-1:e.name>t.name?1:0}var m=class{constructor(e,t,i=null){this._name=e,this._value=String(t),this._namespaceURI=i}get name(){return this._name}set name(e){this._name=e}get value(){return this._value}set value(e){this._value=String(e)}get nodeName(){return this._name}set nodeName(e){this._name=e}get nodeValue(){return this._value}set nodeValue(e){this._value=String(e)}get namespaceURI(){return this._namespaceURI}set namespaceURI(e){this._namespaceURI=e}},g=(e=>(e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",e[e.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",e[e.ENTITY_NODE=6]="ENTITY_NODE",e[e.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE",e[e.DOCUMENT_NODE=9]="DOCUMENT_NODE",e[e.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",e[e.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE",e[e.NOTATION_NODE=12]="NOTATION_NODE",e))(g||{}),v=class{constructor(e){this.elm=e}add(...e){const t=b(this.elm);let i=!1;e.forEach((e=>{_(e=String(e)),!1===t.includes(e)&&(t.push(e),i=!0)})),i&&this.elm.setAttributeNS(null,"class",t.join(" "))}remove(...e){const t=b(this.elm);let i=!1;e.forEach((e=>{_(e=String(e));const r=t.indexOf(e);r>-1&&(t.splice(r,1),i=!0)})),i&&this.elm.setAttributeNS(null,"class",t.filter((e=>e.length>0)).join(" "))}contains(e){return e=String(e),b(this.elm).includes(e)}toggle(e){e=String(e),!0===this.contains(e)?this.remove(e):this.add(e)}get length(){return b(this.elm).length}item(e){return b(this.elm)[e]}toString(){return b(this.elm).join(" ")}};function _(e){if(""===e)throw new Error("The token provided must not be empty.");if(/\s/.test(e))throw new Error(`The token provided ('${e}') contains HTML space characters, which are not valid in tokens.`)}function b(e){const t=e.getAttribute("class");return"string"==typeof t&&t.length>0?t.trim().split(" ").filter((e=>e.length>0)):[]}var w=class{constructor(){this._styles=new Map}setProperty(e,t){e=S(e),null==t||""===t?this._styles.delete(e):this._styles.set(e,String(t))}getPropertyValue(e){return e=S(e),String(this._styles.get(e)||"")}removeProperty(e){e=S(e),this._styles.delete(e)}get length(){return this._styles.size}get cssText(){const e=[];return this._styles.forEach(((t,i)=>{e.push(`${i}: ${t};`)})),e.join(" ").trim()}set cssText(e){null!=e&&""!==e?e.split(";").forEach((e=>{if((e=e.trim()).length>0){const t=e.split(":");if(t.length>1){const e=t[0].trim(),i=t.slice(1).join(":").trim();""!==e&&""!==i&&this._styles.set(S(e),i)}}})):this._styles.clear()}};function M(){return new Proxy(new w,T)}var T={get:(e,t)=>{return t in e?e[t]:((i=t).length>1&&!0===i.includes("-")&&(i=(i=i.toLowerCase().split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join("")).slice(0,1).toLowerCase()+i.slice(1)),t=i,e.getPropertyValue(t));var i},set:(e,t,i)=>(t in e?e[t]=i:e.setProperty(t,i),!0)};function S(e){return e.length>1&&!1===e.includes("-")&&!0===/[A-Z]/.test(e)&&(e=e.replace(/([A-Z])/g,(e=>" "+e[0])).trim().replace(/ /g,"-").toLowerCase()),e}var A=class{constructor(e){this.win=e}define(e,t,i){if(e.toLowerCase()!==e)throw new Error(`Failed to execute 'define' on 'CustomElementRegistry': "${e}" is not a valid custom element name`);if(null==this.__registry&&(this.__registry=new Map),this.__registry.set(e,{cstr:t,options:i}),null!=this.__whenDefined){const t=this.__whenDefined.get(e);null!=t&&(t.forEach((e=>{e()})),t.length=0,this.__whenDefined.delete(e))}const r=this.win.document;null!=r&&r.querySelectorAll(e).forEach((t=>{if(!1===I.has(t)){R.add(r);const i=E(this,r,e);for(let e=0;e<t.childNodes.length;e++){const r=t.childNodes[e];r.remove(),i.appendChild(r)}R.delete(r),x.has(t)&&x.set(t,i)}k(t)}))}get(e){if(null!=this.__registry){const t=this.__registry.get(e.toLowerCase());if(null!=t)return t.cstr}}getName(e){for(const[t,i]of this.__registry.entries())if(i.cstr===e)return t}upgrade(e){}clear(){null!=this.__registry&&this.__registry.clear(),null!=this.__whenDefined&&this.__whenDefined.clear()}whenDefined(e){return e=e.toLowerCase(),null!=this.__registry&&!0===this.__registry.has(e)?Promise.resolve(this.__registry.get(e).cstr):new Promise((t=>{null==this.__whenDefined&&(this.__whenDefined=new Map);let i=this.__whenDefined.get(e);null==i&&(i=[],this.__whenDefined.set(e,i)),i.push(t)}))}};function E(e,t,i){const r=e.get(i);if(null!=r){const e=new r(t);return e.nodeName=i.toUpperCase(),I.add(e),e}const n=new Proxy({},{get(e,t){const i=x.get(n);return null!=i?i[t]:e[t]},set(e,t,i){const r=x.get(n);return null!=r?r[t]=i:e[t]=i,!0},has:(e,t)=>t in x.get(n)||t in e}),s=new Te(t,i);return x.set(n,s),n}var x=new WeakMap,I=new WeakSet;function C(e,t){if(t.ownerDocument=e,1===t.nodeType){if(null!=e&&t.nodeName.includes("-")){null!=e.defaultView&&"function"==typeof t.connectedCallback&&t.isConnected&&k(t);const i=t.shadowRoot;null!=i&&i.childNodes.forEach((t=>{C(e,t)}))}t.childNodes.forEach((t=>{C(e,t)}))}else t.childNodes.forEach((t=>{t.ownerDocument=e}))}function k(e){if("function"==typeof e.connectedCallback&&!1===R.has(e.ownerDocument))try{e.connectedCallback()}catch(e){console.error(e)}}function N(e){if(1===e.nodeType){if(!0===e.nodeName.includes("-")&&"function"==typeof e.disconnectedCallback&&!1===R.has(e.ownerDocument))try{e.disconnectedCallback()}catch(e){console.error(e)}e.childNodes.forEach(N)}}function L(e,t,i,r){t=t.toLowerCase();const n=e.constructor.observedAttributes;if(!0===Array.isArray(n)&&!0===n.some((e=>e.toLowerCase()===t)))try{e.attributeChangedCallback(t,i,r)}catch(e){console.error(e)}}function O(e){return!0===e.nodeName.includes("-")&&"function"==typeof e.attributeChangedCallback}var R=new Set;var P=class{constructor(e,t){if(this.bubbles=!1,this.cancelBubble=!1,this.cancelable=!1,this.composed=!1,this.currentTarget=null,this.defaultPrevented=!1,this.srcElement=null,this.target=null,"string"!=typeof e)throw new Error("Event type required");this.type=e,this.timeStamp=Date.now(),null!=t&&Object.assign(this,t)}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.cancelBubble=!0}stopImmediatePropagation(){this.cancelBubble=!0}composedPath(){const e=[];let t=this.target;for(;t;){if(e.push(t),!t.parentElement&&"#document"===t.nodeName){e.push(t.defaultView);break}t=null==t.parentElement&&"HTML"===t.tagName?t.ownerDocument:t.parentElement}return e}},D=class extends P{constructor(e,t){super(e),this.detail=null,this.view=null,null!=t&&Object.assign(this,t)}},F=class extends D{constructor(e,t){super(e),this.relatedTarget=null,null!=t&&Object.assign(this,t)}},j=class{constructor(e,t){this.type=e,this.handler=t}};function Z(e,t,i){const r=e;null==r.__listeners&&(r.__listeners=[]),r.__listeners.push(new j(t,i))}function z(e,t,i){const r=e;if(null!=r&&!0===Array.isArray(r.__listeners)){const e=r.__listeners.find((e=>e.type===t&&e.handler===i));if(null!=e){const t=r.__listeners.indexOf(e);r.__listeners.splice(t,1)}}}function U(e){null!=e&&null!=e.__listeners&&(e.__listeners=null)}function V(e,t){if(null==e||!0===t.cancelBubble)return;const i=e;t.currentTarget=e,!0===Array.isArray(i.__listeners)&&i.__listeners.filter((e=>e.type===t.type)).forEach((e=>{try{e.handler.call(i,t)}catch(e){console.error(e)}})),!1!==t.bubbles&&("#document"===e.nodeName?V(e.defaultView,t):null==e.parentElement&&"HTML"===e.tagName?V(e.ownerDocument,t):V(e.parentElement,t))}function G(e,t){return t.target=e,V(e,t),!0}var B=function(e){const t=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),i="�";var r,n;(n=r=r||(r={}))[n.EOF=-1]="EOF",n[n.NULL=0]="NULL",n[n.TABULATION=9]="TABULATION",n[n.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",n[n.LINE_FEED=10]="LINE_FEED",n[n.FORM_FEED=12]="FORM_FEED",n[n.SPACE=32]="SPACE",n[n.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",n[n.QUOTATION_MARK=34]="QUOTATION_MARK",n[n.NUMBER_SIGN=35]="NUMBER_SIGN",n[n.AMPERSAND=38]="AMPERSAND",n[n.APOSTROPHE=39]="APOSTROPHE",n[n.HYPHEN_MINUS=45]="HYPHEN_MINUS",n[n.SOLIDUS=47]="SOLIDUS",n[n.DIGIT_0=48]="DIGIT_0",n[n.DIGIT_9=57]="DIGIT_9",n[n.SEMICOLON=59]="SEMICOLON",n[n.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",n[n.EQUALS_SIGN=61]="EQUALS_SIGN",n[n.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",n[n.QUESTION_MARK=63]="QUESTION_MARK",n[n.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",n[n.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",n[n.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",n[n.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",n[n.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",n[n.GRAVE_ACCENT=96]="GRAVE_ACCENT",n[n.LATIN_SMALL_A=97]="LATIN_SMALL_A",n[n.LATIN_SMALL_F=102]="LATIN_SMALL_F",n[n.LATIN_SMALL_X=120]="LATIN_SMALL_X",n[n.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",n[n.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER";const s="script";function o(e){return e>=55296&&e<=57343}function a(e){return 32!==e&&10!==e&&13!==e&&9!==e&&12!==e&&e>=1&&e<=31||e>=127&&e<=159}function l(e){return e>=64976&&e<=65007||t.has(e)}var c,h;!function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"}(c=c||(c={}));class u{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=65536,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+Number(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e){const{line:t,col:i,offset:r}=this;return{code:e,startLine:t,endLine:t,startCol:i,endCol:i,startOffset:r,endOffset:r}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const i=this.html.charCodeAt(this.pos+1);if((t=i)>=56320&&t<=57343)return this.pos++,this._addGap(),1024*(e-55296)+9216+i}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,r.EOF;var t;return this._err(c.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,t){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=t}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,t){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(t)return this.html.startsWith(e,this.pos);for(let t=0;t<e.length;t++)if((32|this.html.charCodeAt(this.pos+t))!==e.charCodeAt(t))return!1;return!0}peek(e){const t=this.pos+e;if(t>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,r.EOF;const i=this.html.charCodeAt(t);return i===r.CARRIAGE_RETURN?r.LINE_FEED:i}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,r.EOF;let e=this.html.charCodeAt(this.pos);return e===r.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,r.LINE_FEED):e===r.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,o(e)&&(e=this._processSurrogate(e)),null===this.handler.onParseError||e>31&&e<127||e===r.LINE_FEED||e===r.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){a(e)?this._err(c.controlCharacterInInputStream):l(e)&&this._err(c.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}function p(e,t){for(let i=e.attrs.length-1;i>=0;i--)if(e.attrs[i].name===t)return e.attrs[i].value;return null}!function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"}(h=h||(h={}));var d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},f={},y={};Object.defineProperty(y,"__esModule",{value:!0}),y.default=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map((function(e){return e.charCodeAt(0)})));var m={};Object.defineProperty(m,"__esModule",{value:!0}),m.default=new Uint16Array("Ȁaglq\tɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map((function(e){return e.charCodeAt(0)})));var g,v,_,b,w,M={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.replaceCodePoint=e.fromCodePoint=void 0;var i=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function r(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=i.get(e))&&void 0!==t?t:e}e.fromCodePoint=null!==(t=String.fromCodePoint)&&void 0!==t?t:function(e){var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+String.fromCharCode(e)},e.replaceCodePoint=r,e.default=function(t){return(0,e.fromCodePoint)(r(t))}}(M),function(e){var t=d&&d.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),i=d&&d.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=d&&d.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&t(r,e,n);return i(r,e),r},n=d&&d.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXML=e.decodeHTMLStrict=e.decodeHTMLAttribute=e.decodeHTML=e.determineBranch=e.EntityDecoder=e.DecodingMode=e.BinTrieFlags=e.fromCodePoint=e.replaceCodePoint=e.decodeCodePoint=e.xmlDecodeTree=e.htmlDecodeTree=void 0;var s=n(y);e.htmlDecodeTree=s.default;var o=n(m);e.xmlDecodeTree=o.default;var a=r(M);e.decodeCodePoint=a.default;var l,c,h,u,p,f=M;function g(e){return e>=l.ZERO&&e<=l.NINE}Object.defineProperty(e,"replaceCodePoint",{enumerable:!0,get:function(){return f.replaceCodePoint}}),Object.defineProperty(e,"fromCodePoint",{enumerable:!0,get:function(){return f.fromCodePoint}}),(p=l||(l={}))[p.NUM=35]="NUM",p[p.SEMI=59]="SEMI",p[p.EQUALS=61]="EQUALS",p[p.ZERO=48]="ZERO",p[p.NINE=57]="NINE",p[p.LOWER_A=97]="LOWER_A",p[p.LOWER_F=102]="LOWER_F",p[p.LOWER_X=120]="LOWER_X",p[p.LOWER_Z=122]="LOWER_Z",p[p.UPPER_A=65]="UPPER_A",p[p.UPPER_F=70]="UPPER_F",p[p.UPPER_Z=90]="UPPER_Z",function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"}(c=e.BinTrieFlags||(e.BinTrieFlags={})),function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"}(h||(h={})),function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"}(u=e.DecodingMode||(e.DecodingMode={}));var v=function(){function e(e,t,i){this.decodeTree=e,this.emitCodePoint=t,this.errors=i,this.state=h.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=u.Strict}return e.prototype.startEntity=function(e){this.decodeMode=e,this.state=h.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},e.prototype.write=function(e,t){switch(this.state){case h.EntityStart:return e.charCodeAt(t)===l.NUM?(this.state=h.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=h.NamedEntity,this.stateNamedEntity(e,t));case h.NumericStart:return this.stateNumericStart(e,t);case h.NumericDecimal:return this.stateNumericDecimal(e,t);case h.NumericHex:return this.stateNumericHex(e,t);case h.NamedEntity:return this.stateNamedEntity(e,t)}},e.prototype.stateNumericStart=function(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===l.LOWER_X?(this.state=h.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=h.NumericDecimal,this.stateNumericDecimal(e,t))},e.prototype.addToNumericResult=function(e,t,i,r){if(t!==i){var n=i-t;this.result=this.result*Math.pow(r,n)+parseInt(e.substr(t,n),r),this.consumed+=n}},e.prototype.stateNumericHex=function(e,t){for(var i,r=t;t<e.length;){var n=e.charCodeAt(t);if(!(g(n)||(i=n,i>=l.UPPER_A&&i<=l.UPPER_F||i>=l.LOWER_A&&i<=l.LOWER_F)))return this.addToNumericResult(e,r,t,16),this.emitNumericEntity(n,3);t+=1}return this.addToNumericResult(e,r,t,16),-1},e.prototype.stateNumericDecimal=function(e,t){for(var i=t;t<e.length;){var r=e.charCodeAt(t);if(!g(r))return this.addToNumericResult(e,i,t,10),this.emitNumericEntity(r,2);t+=1}return this.addToNumericResult(e,i,t,10),-1},e.prototype.emitNumericEntity=function(e,t){var i;if(this.consumed<=t)return null===(i=this.errors)||void 0===i||i.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===l.SEMI)this.consumed+=1;else if(this.decodeMode===u.Strict)return 0;return this.emitCodePoint((0,a.replaceCodePoint)(this.result),this.consumed),this.errors&&(e!==l.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},e.prototype.stateNamedEntity=function(e,t){for(var i=this.decodeTree,r=i[this.treeIndex],n=(r&c.VALUE_LENGTH)>>14;t<e.length;t++,this.excess++){var s=e.charCodeAt(t);if(this.treeIndex=b(i,r,this.treeIndex+Math.max(1,n),s),this.treeIndex<0)return 0===this.result||this.decodeMode===u.Attribute&&(0===n||(a=s)===l.EQUALS||(o=a)>=l.UPPER_A&&o<=l.UPPER_Z||o>=l.LOWER_A&&o<=l.LOWER_Z||g(o))?0:this.emitNotTerminatedNamedEntity();if(0!=(n=((r=i[this.treeIndex])&c.VALUE_LENGTH)>>14)){if(s===l.SEMI)return this.emitNamedEntityData(this.treeIndex,n,this.consumed+this.excess);this.decodeMode!==u.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}var o,a;return-1},e.prototype.emitNotTerminatedNamedEntity=function(){var e,t=this.result,i=(this.decodeTree[t]&c.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,i,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed},e.prototype.emitNamedEntityData=function(e,t,i){var r=this.decodeTree;return this.emitCodePoint(1===t?r[e]&~c.VALUE_LENGTH:r[e+1],i),3===t&&this.emitCodePoint(r[e+2],i),i},e.prototype.end=function(){var e;switch(this.state){case h.NamedEntity:return 0===this.result||this.decodeMode===u.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case h.NumericDecimal:return this.emitNumericEntity(0,2);case h.NumericHex:return this.emitNumericEntity(0,3);case h.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case h.EntityStart:return 0}},e}();function _(e){var t="",i=new v(e,(function(e){return t+=(0,a.fromCodePoint)(e)}));return function(e,r){for(var n=0,s=0;(s=e.indexOf("&",s))>=0;){t+=e.slice(n,s),i.startEntity(r);var o=i.write(e,s+1);if(o<0){n=s+i.end();break}n=s+o,s=0===o?n+1:n}var a=t+e.slice(n);return t="",a}}function b(e,t,i,r){var n=(t&c.BRANCH_LENGTH)>>7,s=t&c.JUMP_TABLE;if(0===n)return 0!==s&&r===s?i:-1;if(s){var o=r-s;return o<0||o>=n?-1:e[i+o]-1}for(var a=i,l=a+n-1;a<=l;){var h=a+l>>>1,u=e[h];if(u<r)a=h+1;else{if(!(u>r))return e[h+n];l=h-1}}return-1}e.EntityDecoder=v,e.determineBranch=b;var w=_(s.default),T=_(o.default);e.decodeHTML=function(e,t){return void 0===t&&(t=u.Legacy),w(e,t)},e.decodeHTMLAttribute=function(e){return w(e,u.Attribute)},e.decodeHTMLStrict=function(e){return w(e,u.Strict)},e.decodeXML=function(e){return T(e,u.Strict)}}(f),function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"}(g=g||(g={})),function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"}(v=v||(v={})),function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"}(_=_||(_={})),function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"}(b=b||(b={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"}(w=w||(w={}));const T=new Map([[b.A,w.A],[b.ADDRESS,w.ADDRESS],[b.ANNOTATION_XML,w.ANNOTATION_XML],[b.APPLET,w.APPLET],[b.AREA,w.AREA],[b.ARTICLE,w.ARTICLE],[b.ASIDE,w.ASIDE],[b.B,w.B],[b.BASE,w.BASE],[b.BASEFONT,w.BASEFONT],[b.BGSOUND,w.BGSOUND],[b.BIG,w.BIG],[b.BLOCKQUOTE,w.BLOCKQUOTE],[b.BODY,w.BODY],[b.BR,w.BR],[b.BUTTON,w.BUTTON],[b.CAPTION,w.CAPTION],[b.CENTER,w.CENTER],[b.CODE,w.CODE],[b.COL,w.COL],[b.COLGROUP,w.COLGROUP],[b.DD,w.DD],[b.DESC,w.DESC],[b.DETAILS,w.DETAILS],[b.DIALOG,w.DIALOG],[b.DIR,w.DIR],[b.DIV,w.DIV],[b.DL,w.DL],[b.DT,w.DT],[b.EM,w.EM],[b.EMBED,w.EMBED],[b.FIELDSET,w.FIELDSET],[b.FIGCAPTION,w.FIGCAPTION],[b.FIGURE,w.FIGURE],[b.FONT,w.FONT],[b.FOOTER,w.FOOTER],[b.FOREIGN_OBJECT,w.FOREIGN_OBJECT],[b.FORM,w.FORM],[b.FRAME,w.FRAME],[b.FRAMESET,w.FRAMESET],[b.H1,w.H1],[b.H2,w.H2],[b.H3,w.H3],[b.H4,w.H4],[b.H5,w.H5],[b.H6,w.H6],[b.HEAD,w.HEAD],[b.HEADER,w.HEADER],[b.HGROUP,w.HGROUP],[b.HR,w.HR],[b.HTML,w.HTML],[b.I,w.I],[b.IMG,w.IMG],[b.IMAGE,w.IMAGE],[b.INPUT,w.INPUT],[b.IFRAME,w.IFRAME],[b.KEYGEN,w.KEYGEN],[b.LABEL,w.LABEL],[b.LI,w.LI],[b.LINK,w.LINK],[b.LISTING,w.LISTING],[b.MAIN,w.MAIN],[b.MALIGNMARK,w.MALIGNMARK],[b.MARQUEE,w.MARQUEE],[b.MATH,w.MATH],[b.MENU,w.MENU],[b.META,w.META],[b.MGLYPH,w.MGLYPH],[b.MI,w.MI],[b.MO,w.MO],[b.MN,w.MN],[b.MS,w.MS],[b.MTEXT,w.MTEXT],[b.NAV,w.NAV],[b.NOBR,w.NOBR],[b.NOFRAMES,w.NOFRAMES],[b.NOEMBED,w.NOEMBED],[b.NOSCRIPT,w.NOSCRIPT],[b.OBJECT,w.OBJECT],[b.OL,w.OL],[b.OPTGROUP,w.OPTGROUP],[b.OPTION,w.OPTION],[b.P,w.P],[b.PARAM,w.PARAM],[b.PLAINTEXT,w.PLAINTEXT],[b.PRE,w.PRE],[b.RB,w.RB],[b.RP,w.RP],[b.RT,w.RT],[b.RTC,w.RTC],[b.RUBY,w.RUBY],[b.S,w.S],[b.SCRIPT,w.SCRIPT],[b.SECTION,w.SECTION],[b.SELECT,w.SELECT],[b.SOURCE,w.SOURCE],[b.SMALL,w.SMALL],[b.SPAN,w.SPAN],[b.STRIKE,w.STRIKE],[b.STRONG,w.STRONG],[b.STYLE,w.STYLE],[b.SUB,w.SUB],[b.SUMMARY,w.SUMMARY],[b.SUP,w.SUP],[b.TABLE,w.TABLE],[b.TBODY,w.TBODY],[b.TEMPLATE,w.TEMPLATE],[b.TEXTAREA,w.TEXTAREA],[b.TFOOT,w.TFOOT],[b.TD,w.TD],[b.TH,w.TH],[b.THEAD,w.THEAD],[b.TITLE,w.TITLE],[b.TR,w.TR],[b.TRACK,w.TRACK],[b.TT,w.TT],[b.U,w.U],[b.UL,w.UL],[b.SVG,w.SVG],[b.VAR,w.VAR],[b.WBR,w.WBR],[b.XMP,w.XMP]]);function S(e){var t;return null!==(t=T.get(e))&&void 0!==t?t:w.UNKNOWN}const A=w,E={[g.HTML]:new Set([A.ADDRESS,A.APPLET,A.AREA,A.ARTICLE,A.ASIDE,A.BASE,A.BASEFONT,A.BGSOUND,A.BLOCKQUOTE,A.BODY,A.BR,A.BUTTON,A.CAPTION,A.CENTER,A.COL,A.COLGROUP,A.DD,A.DETAILS,A.DIR,A.DIV,A.DL,A.DT,A.EMBED,A.FIELDSET,A.FIGCAPTION,A.FIGURE,A.FOOTER,A.FORM,A.FRAME,A.FRAMESET,A.H1,A.H2,A.H3,A.H4,A.H5,A.H6,A.HEAD,A.HEADER,A.HGROUP,A.HR,A.HTML,A.IFRAME,A.IMG,A.INPUT,A.LI,A.LINK,A.LISTING,A.MAIN,A.MARQUEE,A.MENU,A.META,A.NAV,A.NOEMBED,A.NOFRAMES,A.NOSCRIPT,A.OBJECT,A.OL,A.P,A.PARAM,A.PLAINTEXT,A.PRE,A.SCRIPT,A.SECTION,A.SELECT,A.SOURCE,A.STYLE,A.SUMMARY,A.TABLE,A.TBODY,A.TD,A.TEMPLATE,A.TEXTAREA,A.TFOOT,A.TH,A.THEAD,A.TITLE,A.TR,A.TRACK,A.UL,A.WBR,A.XMP]),[g.MATHML]:new Set([A.MI,A.MO,A.MN,A.MS,A.MTEXT,A.ANNOTATION_XML]),[g.SVG]:new Set([A.TITLE,A.FOREIGN_OBJECT,A.DESC]),[g.XLINK]:new Set,[g.XML]:new Set,[g.XMLNS]:new Set};function x(e){return e===A.H1||e===A.H2||e===A.H3||e===A.H4||e===A.H5||e===A.H6}b.STYLE,b.SCRIPT,b.XMP,b.IFRAME,b.NOEMBED,b.NOFRAMES,b.PLAINTEXT;const I=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var C;!function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"}(C||(C={}));const k={DATA:C.DATA,RCDATA:C.RCDATA,RAWTEXT:C.RAWTEXT,SCRIPT_DATA:C.SCRIPT_DATA,PLAINTEXT:C.PLAINTEXT,CDATA_SECTION:C.CDATA_SECTION};function N(e){return e>=r.DIGIT_0&&e<=r.DIGIT_9}function L(e){return e>=r.LATIN_CAPITAL_A&&e<=r.LATIN_CAPITAL_Z}function O(e){return(t=e)>=r.LATIN_SMALL_A&&t<=r.LATIN_SMALL_Z||L(e);var t}function R(e){return O(e)||N(e)}function P(e){return e>=r.LATIN_CAPITAL_A&&e<=r.LATIN_CAPITAL_F}function D(e){return e>=r.LATIN_SMALL_A&&e<=r.LATIN_SMALL_F}function F(e){return e+32}function j(e){return e===r.SPACE||e===r.LINE_FEED||e===r.TABULATION||e===r.FORM_FEED}function Z(e){return j(e)||e===r.SOLIDUS||e===r.GREATER_THAN_SIGN}class z{constructor(e,t){this.options=e,this.handler=t,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=C.DATA,this.returnState=C.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new u(t),this.currentLocation=this.getCurrentLocation(-1)}_err(e){var t,i;null===(i=(t=this.handler).onParseError)||void 0===i||i.call(t,this.preprocessor.getError(e))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,this.inLoop||(this._runParsingLoop(),this.paused||null==e||e())}write(e,t,i){this.active=!0,this.preprocessor.write(e,t),this._runParsingLoop(),this.paused||null==i||i()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return!!this.preprocessor.endOfChunkHit&&(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0)}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(e){this.consumedAfterSnapshot-=e,this.preprocessor.retreat(e)}_reconsumeInState(e,t){this.state=e,this._callState(t)}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let t=0;t<e;t++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,t){return!!this.preprocessor.startsWith(e,t)&&(this._advanceBy(e.length-1),!0)}_createStartTagToken(){this.currentToken={type:h.START_TAG,tagName:"",tagID:w.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:h.END_TAG,tagName:"",tagID:w.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:h.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:h.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,t){this.currentCharacterToken={type:e,chars:t,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,t;const i=this.currentToken;null===p(i,this.currentAttr.name)?(i.attrs.push(this.currentAttr),i.location&&this.currentLocation&&((null!==(e=(t=i.location).attrs)&&void 0!==e?e:t.attrs=Object.create(null))[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue())):this._err(c.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=S(e.tagName),e.type===h.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(c.endTagWithAttributes),e.selfClosing&&this._err(c.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case h.CHARACTER:this.handler.onCharacter(this.currentCharacterToken);break;case h.NULL_CHARACTER:this.handler.onNullCharacter(this.currentCharacterToken);break;case h.WHITESPACE_CHARACTER:this.handler.onWhitespaceCharacter(this.currentCharacterToken)}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:h.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,t){if(this.currentCharacterToken){if(this.currentCharacterToken.type===e)return void(this.currentCharacterToken.chars+=t);this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk()}this._createCharacterToken(e,t)}_emitCodePoint(e){const t=j(e)?h.WHITESPACE_CHARACTER:e===r.NULL?h.NULL_CHARACTER:h.CHARACTER;this._appendCharToCurrentCharacterToken(t,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(h.CHARACTER,e)}_matchNamedCharacterReference(e){let t=null,i=0,n=!1;for(let o=0,a=f.htmlDecodeTree[0];o>=0&&(o=f.determineBranch(f.htmlDecodeTree,a,o+1,e),!(o<0));e=this._consume()){i+=1,a=f.htmlDecodeTree[o];const l=a&f.BinTrieFlags.VALUE_LENGTH;if(l){const a=(l>>14)-1;if(e!==r.SEMICOLON&&this._isCharacterReferenceInAttribute()&&((s=this.preprocessor.peek(1))===r.EQUALS_SIGN||R(s))?(t=[r.AMPERSAND],o+=a):(t=0===a?[f.htmlDecodeTree[o]&~f.BinTrieFlags.VALUE_LENGTH]:1===a?[f.htmlDecodeTree[++o]]:[f.htmlDecodeTree[++o],f.htmlDecodeTree[++o]],i=0,n=e!==r.SEMICOLON),0===a){this._consume();break}}}var s;return this._unconsume(i),n&&!this.preprocessor.endOfChunkHit&&this._err(c.missingSemicolonAfterCharacterReference),this._unconsume(1),t}_isCharacterReferenceInAttribute(){return this.returnState===C.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===C.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===C.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case C.DATA:this._stateData(e);break;case C.RCDATA:this._stateRcdata(e);break;case C.RAWTEXT:this._stateRawtext(e);break;case C.SCRIPT_DATA:this._stateScriptData(e);break;case C.PLAINTEXT:this._statePlaintext(e);break;case C.TAG_OPEN:this._stateTagOpen(e);break;case C.END_TAG_OPEN:this._stateEndTagOpen(e);break;case C.TAG_NAME:this._stateTagName(e);break;case C.RCDATA_LESS_THAN_SIGN:this._stateRcdataLessThanSign(e);break;case C.RCDATA_END_TAG_OPEN:this._stateRcdataEndTagOpen(e);break;case C.RCDATA_END_TAG_NAME:this._stateRcdataEndTagName(e);break;case C.RAWTEXT_LESS_THAN_SIGN:this._stateRawtextLessThanSign(e);break;case C.RAWTEXT_END_TAG_OPEN:this._stateRawtextEndTagOpen(e);break;case C.RAWTEXT_END_TAG_NAME:this._stateRawtextEndTagName(e);break;case C.SCRIPT_DATA_LESS_THAN_SIGN:this._stateScriptDataLessThanSign(e);break;case C.SCRIPT_DATA_END_TAG_OPEN:this._stateScriptDataEndTagOpen(e);break;case C.SCRIPT_DATA_END_TAG_NAME:this._stateScriptDataEndTagName(e);break;case C.SCRIPT_DATA_ESCAPE_START:this._stateScriptDataEscapeStart(e);break;case C.SCRIPT_DATA_ESCAPE_START_DASH:this._stateScriptDataEscapeStartDash(e);break;case C.SCRIPT_DATA_ESCAPED:this._stateScriptDataEscaped(e);break;case C.SCRIPT_DATA_ESCAPED_DASH:this._stateScriptDataEscapedDash(e);break;case C.SCRIPT_DATA_ESCAPED_DASH_DASH:this._stateScriptDataEscapedDashDash(e);break;case C.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataEscapedLessThanSign(e);break;case C.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:this._stateScriptDataEscapedEndTagOpen(e);break;case C.SCRIPT_DATA_ESCAPED_END_TAG_NAME:this._stateScriptDataEscapedEndTagName(e);break;case C.SCRIPT_DATA_DOUBLE_ESCAPE_START:this._stateScriptDataDoubleEscapeStart(e);break;case C.SCRIPT_DATA_DOUBLE_ESCAPED:this._stateScriptDataDoubleEscaped(e);break;case C.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:this._stateScriptDataDoubleEscapedDash(e);break;case C.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:this._stateScriptDataDoubleEscapedDashDash(e);break;case C.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataDoubleEscapedLessThanSign(e);break;case C.SCRIPT_DATA_DOUBLE_ESCAPE_END:this._stateScriptDataDoubleEscapeEnd(e);break;case C.BEFORE_ATTRIBUTE_NAME:this._stateBeforeAttributeName(e);break;case C.ATTRIBUTE_NAME:this._stateAttributeName(e);break;case C.AFTER_ATTRIBUTE_NAME:this._stateAfterAttributeName(e);break;case C.BEFORE_ATTRIBUTE_VALUE:this._stateBeforeAttributeValue(e);break;case C.ATTRIBUTE_VALUE_DOUBLE_QUOTED:this._stateAttributeValueDoubleQuoted(e);break;case C.ATTRIBUTE_VALUE_SINGLE_QUOTED:this._stateAttributeValueSingleQuoted(e);break;case C.ATTRIBUTE_VALUE_UNQUOTED:this._stateAttributeValueUnquoted(e);break;case C.AFTER_ATTRIBUTE_VALUE_QUOTED:this._stateAfterAttributeValueQuoted(e);break;case C.SELF_CLOSING_START_TAG:this._stateSelfClosingStartTag(e);break;case C.BOGUS_COMMENT:this._stateBogusComment(e);break;case C.MARKUP_DECLARATION_OPEN:this._stateMarkupDeclarationOpen(e);break;case C.COMMENT_START:this._stateCommentStart(e);break;case C.COMMENT_START_DASH:this._stateCommentStartDash(e);break;case C.COMMENT:this._stateComment(e);break;case C.COMMENT_LESS_THAN_SIGN:this._stateCommentLessThanSign(e);break;case C.COMMENT_LESS_THAN_SIGN_BANG:this._stateCommentLessThanSignBang(e);break;case C.COMMENT_LESS_THAN_SIGN_BANG_DASH:this._stateCommentLessThanSignBangDash(e);break;case C.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:this._stateCommentLessThanSignBangDashDash(e);break;case C.COMMENT_END_DASH:this._stateCommentEndDash(e);break;case C.COMMENT_END:this._stateCommentEnd(e);break;case C.COMMENT_END_BANG:this._stateCommentEndBang(e);break;case C.DOCTYPE:this._stateDoctype(e);break;case C.BEFORE_DOCTYPE_NAME:this._stateBeforeDoctypeName(e);break;case C.DOCTYPE_NAME:this._stateDoctypeName(e);break;case C.AFTER_DOCTYPE_NAME:this._stateAfterDoctypeName(e);break;case C.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._stateAfterDoctypePublicKeyword(e);break;case C.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:this._stateBeforeDoctypePublicIdentifier(e);break;case C.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypePublicIdentifierDoubleQuoted(e);break;case C.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypePublicIdentifierSingleQuoted(e);break;case C.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:this._stateAfterDoctypePublicIdentifier(e);break;case C.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break;case C.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._stateAfterDoctypeSystemKeyword(e);break;case C.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:this._stateBeforeDoctypeSystemIdentifier(e);break;case C.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypeSystemIdentifierDoubleQuoted(e);break;case C.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypeSystemIdentifierSingleQuoted(e);break;case C.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:this._stateAfterDoctypeSystemIdentifier(e);break;case C.BOGUS_DOCTYPE:this._stateBogusDoctype(e);break;case C.CDATA_SECTION:this._stateCdataSection(e);break;case C.CDATA_SECTION_BRACKET:this._stateCdataSectionBracket(e);break;case C.CDATA_SECTION_END:this._stateCdataSectionEnd(e);break;case C.CHARACTER_REFERENCE:this._stateCharacterReference(e);break;case C.NAMED_CHARACTER_REFERENCE:this._stateNamedCharacterReference(e);break;case C.AMBIGUOUS_AMPERSAND:this._stateAmbiguousAmpersand(e);break;case C.NUMERIC_CHARACTER_REFERENCE:this._stateNumericCharacterReference(e);break;case C.HEXADEMICAL_CHARACTER_REFERENCE_START:this._stateHexademicalCharacterReferenceStart(e);break;case C.HEXADEMICAL_CHARACTER_REFERENCE:this._stateHexademicalCharacterReference(e);break;case C.DECIMAL_CHARACTER_REFERENCE:this._stateDecimalCharacterReference(e);break;case C.NUMERIC_CHARACTER_REFERENCE_END:this._stateNumericCharacterReferenceEnd(e);break;default:throw new Error("Unknown state")}}_stateData(e){switch(e){case r.LESS_THAN_SIGN:this.state=C.TAG_OPEN;break;case r.AMPERSAND:this.returnState=C.DATA,this.state=C.CHARACTER_REFERENCE;break;case r.NULL:this._err(c.unexpectedNullCharacter),this._emitCodePoint(e);break;case r.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case r.AMPERSAND:this.returnState=C.RCDATA,this.state=C.CHARACTER_REFERENCE;break;case r.LESS_THAN_SIGN:this.state=C.RCDATA_LESS_THAN_SIGN;break;case r.NULL:this._err(c.unexpectedNullCharacter),this._emitChars(i);break;case r.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case r.LESS_THAN_SIGN:this.state=C.RAWTEXT_LESS_THAN_SIGN;break;case r.NULL:this._err(c.unexpectedNullCharacter),this._emitChars(i);break;case r.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case r.LESS_THAN_SIGN:this.state=C.SCRIPT_DATA_LESS_THAN_SIGN;break;case r.NULL:this._err(c.unexpectedNullCharacter),this._emitChars(i);break;case r.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case r.NULL:this._err(c.unexpectedNullCharacter),this._emitChars(i);break;case r.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateTagOpen(e){if(O(e))this._createStartTagToken(),this.state=C.TAG_NAME,this._stateTagName(e);else switch(e){case r.EXCLAMATION_MARK:this.state=C.MARKUP_DECLARATION_OPEN;break;case r.SOLIDUS:this.state=C.END_TAG_OPEN;break;case r.QUESTION_MARK:this._err(c.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=C.BOGUS_COMMENT,this._stateBogusComment(e);break;case r.EOF:this._err(c.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break;default:this._err(c.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=C.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(O(e))this._createEndTagToken(),this.state=C.TAG_NAME,this._stateTagName(e);else switch(e){case r.GREATER_THAN_SIGN:this._err(c.missingEndTagName),this.state=C.DATA;break;case r.EOF:this._err(c.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break;default:this._err(c.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=C.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const t=this.currentToken;switch(e){case r.SPACE:case r.LINE_FEED:case r.TABULATION:case r.FORM_FEED:this.state=C.BEFORE_ATTRIBUTE_NAME;break;case r.SOLIDUS:this.state=C.SELF_CLOSING_START_TAG;break;case r.GREATER_THAN_SIGN:this.state=C.DATA,this.emitCurrentTagToken();break;case r.NULL:this._err(c.unexpectedNullCharacter),t.tagName+=i;break;case r.EOF:this._err(c.eofInTag),this._emitEOFToken();break;default:t.tagName+=String.fromCodePoint(L(e)?F(e):e)}}_stateRcdataLessThanSign(e){e===r.SOLIDUS?this.state=C.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=C.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){O(e)?(this.state=C.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=C.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();switch(this._createEndTagToken(),this.currentToken.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case r.SPACE:case r.LINE_FEED:case r.TABULATION:case r.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=C.BEFORE_ATTRIBUTE_NAME,!1;case r.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=C.SELF_CLOSING_START_TAG,!1;case r.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=C.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=C.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===r.SOLIDUS?this.state=C.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=C.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){O(e)?(this.state=C.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=C.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=C.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case r.SOLIDUS:this.state=C.SCRIPT_DATA_END_TAG_OPEN;break;case r.EXCLAMATION_MARK:this.state=C.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break;default:this._emitChars("<"),this.state=C.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){O(e)?(this.state=C.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=C.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=C.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===r.HYPHEN_MINUS?(this.state=C.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=C.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===r.HYPHEN_MINUS?(this.state=C.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=C.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case r.HYPHEN_MINUS:this.state=C.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break;case r.LESS_THAN_SIGN:this.state=C.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case r.NULL:this._err(c.unexpectedNullCharacter),this._emitChars(i);break;case r.EOF:this._err(c.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case r.HYPHEN_MINUS:this.state=C.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break;case r.LESS_THAN_SIGN:this.state=C.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case r.NULL:this._err(c.unexpectedNullCharacter),this.state=C.SCRIPT_DATA_ESCAPED,this._emitChars(i);break;case r.EOF:this._err(c.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=C.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case r.HYPHEN_MINUS:this._emitChars("-");break;case r.LESS_THAN_SIGN:this.state=C.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case r.GREATER_THAN_SIGN:this.state=C.SCRIPT_DATA,this._emitChars(">");break;case r.NULL:this._err(c.unexpectedNullCharacter),this.state=C.SCRIPT_DATA_ESCAPED,this._emitChars(i);break;case r.EOF:this._err(c.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=C.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===r.SOLIDUS?this.state=C.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:O(e)?(this._emitChars("<"),this.state=C.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=C.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){O(e)?(this.state=C.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=C.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=C.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(s,!1)&&Z(this.preprocessor.peek(6))){this._emitCodePoint(e);for(let e=0;e<6;e++)this._emitCodePoint(this._consume());this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=C.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case r.HYPHEN_MINUS:this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break;case r.LESS_THAN_SIGN:this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case r.NULL:this._err(c.unexpectedNullCharacter),this._emitChars(i);break;case r.EOF:this._err(c.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case r.HYPHEN_MINUS:this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break;case r.LESS_THAN_SIGN:this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case r.NULL:this._err(c.unexpectedNullCharacter),this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(i);break;case r.EOF:this._err(c.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case r.HYPHEN_MINUS:this._emitChars("-");break;case r.LESS_THAN_SIGN:this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case r.GREATER_THAN_SIGN:this.state=C.SCRIPT_DATA,this._emitChars(">");break;case r.NULL:this._err(c.unexpectedNullCharacter),this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(i);break;case r.EOF:this._err(c.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===r.SOLIDUS?(this.state=C.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(s,!1)&&Z(this.preprocessor.peek(6))){this._emitCodePoint(e);for(let e=0;e<6;e++)this._emitCodePoint(this._consume());this.state=C.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=C.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case r.SPACE:case r.LINE_FEED:case r.TABULATION:case r.FORM_FEED:break;case r.SOLIDUS:case r.GREATER_THAN_SIGN:case r.EOF:this.state=C.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case r.EQUALS_SIGN:this._err(c.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=C.ATTRIBUTE_NAME;break;default:this._createAttr(""),this.state=C.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case r.SPACE:case r.LINE_FEED:case r.TABULATION:case r.FORM_FEED:case r.SOLIDUS:case r.GREATER_THAN_SIGN:case r.EOF:this._leaveAttrName(),this.state=C.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case r.EQUALS_SIGN:this._leaveAttrName(),this.state=C.BEFORE_ATTRIBUTE_VALUE;break;case r.QUOTATION_MARK:case r.APOSTROPHE:case r.LESS_THAN_SIGN:this._err(c.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break;case r.NULL:this._err(c.unexpectedNullCharacter),this.currentAttr.name+=i;break;default:this.currentAttr.name+=String.fromCodePoint(L(e)?F(e):e)}}_stateAfterAttributeName(e){switch(e){case r.SPACE:case r.LINE_FEED:case r.TABULATION:case r.FORM_FEED:break;case r.SOLIDUS:this.state=C.SELF_CLOSING_START_TAG;break;case r.EQUALS_SIGN:this.state=C.BEFORE_ATTRIBUTE_VALUE;break;case r.GREATER_THAN_SIGN:this.state=C.DATA,this.emitCurrentTagToken();break;case r.EOF:this._err(c.eofInTag),this._emitEOFToken();break;default:this._createAttr(""),this.state=C.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case r.SPACE:case r.LINE_FEED:case r.TABULATION:case r.FORM_FEED:break;case r.QUOTATION_MARK:this.state=C.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break;case r.APOSTROPHE:this.state=C.ATTRIBUTE_VALUE_SINGLE_QUOTED;break;case r.GREATER_THAN_SIGN:this._err(c.missingAttributeValue),this.state=C.DATA,this.emitCurrentTagToken();break;default:this.state=C.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case r.QUOTATION_MARK:this.state=C.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case r.AMPERSAND:this.returnState=C.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=C.CHARACTER_REFERENCE;break;case r.NULL:this._err(c.unexpectedNullCharacter),this.currentAttr.value+=i;break;case r.EOF:this._err(c.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case r.APOSTROPHE:this.state=C.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case r.AMPERSAND:this.returnState=C.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=C.CHARACTER_REFERENCE;break;case r.NULL:this._err(c.unexpectedNullCharacter),this.currentAttr.value+=i;break;case r.EOF:this._err(c.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case r.SPACE:case r.LINE_FEED:case r.TABULATION:case r.FORM_FEED:this._leaveAttrValue(),this.state=C.BEFORE_ATTRIBUTE_NAME;break;case r.AMPERSAND:this.returnState=C.ATTRIBUTE_VALUE_UNQUOTED,this.state=C.CHARACTER_REFERENCE;break;case r.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=C.DATA,this.emitCurrentTagToken();break;case r.NULL:this._err(c.unexpectedNullCharacter),this.currentAttr.value+=i;break;case r.QUOTATION_MARK:case r.APOSTROPHE:case r.LESS_THAN_SIGN:case r.EQUALS_SIGN:case r.GRAVE_ACCENT:this._err(c.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break;case r.EOF:this._err(c.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case r.SPACE:case r.LINE_FEED:case r.TABULATION:case r.FORM_FEED:this._leaveAttrValue(),this.state=C.BEFORE_ATTRIBUTE_NAME;break;case r.SOLIDUS:this._leaveAttrValue(),this.state=C.SELF_CLOSING_START_TAG;break;case r.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=C.DATA,this.emitCurrentTagToken();break;case r.EOF:this._err(c.eofInTag),this._emitEOFToken();break;default:this._err(c.missingWhitespaceBetweenAttributes),this.state=C.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case r.GREATER_THAN_SIGN:this.currentToken.selfClosing=!0,this.state=C.DATA,this.emitCurrentTagToken();break;case r.EOF:this._err(c.eofInTag),this._emitEOFToken();break;default:this._err(c.unexpectedSolidusInTag),this.state=C.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const t=this.currentToken;switch(e){case r.GREATER_THAN_SIGN:this.state=C.DATA,this.emitCurrentComment(t);break;case r.EOF:this.emitCurrentComment(t),this._emitEOFToken();break;case r.NULL:this._err(c.unexpectedNullCharacter),t.data+=i;break;default:t.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch("--",!0)?(this._createCommentToken(3),this.state=C.COMMENT_START):this._consumeSequenceIfMatch("doctype",!1)?(this.currentLocation=this.getCurrentLocation(8),this.state=C.DOCTYPE):this._consumeSequenceIfMatch("[CDATA[",!0)?this.inForeignNode?this.state=C.CDATA_SECTION:(this._err(c.cdataInHtmlContent),this._createCommentToken(8),this.currentToken.data="[CDATA[",this.state=C.BOGUS_COMMENT):this._ensureHibernation()||(this._err(c.incorrectlyOpenedComment),this._createCommentToken(2),this.state=C.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case r.HYPHEN_MINUS:this.state=C.COMMENT_START_DASH;break;case r.GREATER_THAN_SIGN:{this._err(c.abruptClosingOfEmptyComment),this.state=C.DATA;const e=this.currentToken;this.emitCurrentComment(e);break}default:this.state=C.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const t=this.currentToken;switch(e){case r.HYPHEN_MINUS:this.state=C.COMMENT_END;break;case r.GREATER_THAN_SIGN:this._err(c.abruptClosingOfEmptyComment),this.state=C.DATA,this.emitCurrentComment(t);break;case r.EOF:this._err(c.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="-",this.state=C.COMMENT,this._stateComment(e)}}_stateComment(e){const t=this.currentToken;switch(e){case r.HYPHEN_MINUS:this.state=C.COMMENT_END_DASH;break;case r.LESS_THAN_SIGN:t.data+="<",this.state=C.COMMENT_LESS_THAN_SIGN;break;case r.NULL:this._err(c.unexpectedNullCharacter),t.data+=i;break;case r.EOF:this._err(c.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const t=this.currentToken;switch(e){case r.EXCLAMATION_MARK:t.data+="!",this.state=C.COMMENT_LESS_THAN_SIGN_BANG;break;case r.LESS_THAN_SIGN:t.data+="<";break;default:this.state=C.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===r.HYPHEN_MINUS?this.state=C.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=C.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===r.HYPHEN_MINUS?this.state=C.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=C.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==r.GREATER_THAN_SIGN&&e!==r.EOF&&this._err(c.nestedComment),this.state=C.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const t=this.currentToken;switch(e){case r.HYPHEN_MINUS:this.state=C.COMMENT_END;break;case r.EOF:this._err(c.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="-",this.state=C.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const t=this.currentToken;switch(e){case r.GREATER_THAN_SIGN:this.state=C.DATA,this.emitCurrentComment(t);break;case r.EXCLAMATION_MARK:this.state=C.COMMENT_END_BANG;break;case r.HYPHEN_MINUS:t.data+="-";break;case r.EOF:this._err(c.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="--",this.state=C.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const t=this.currentToken;switch(e){case r.HYPHEN_MINUS:t.data+="--!",this.state=C.COMMENT_END_DASH;break;case r.GREATER_THAN_SIGN:this._err(c.incorrectlyClosedComment),this.state=C.DATA,this.emitCurrentComment(t);break;case r.EOF:this._err(c.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="--!",this.state=C.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case r.SPACE:case r.LINE_FEED:case r.TABULATION:case r.FORM_FEED:this.state=C.BEFORE_DOCTYPE_NAME;break;case r.GREATER_THAN_SIGN:this.state=C.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break;case r.EOF:{this._err(c.eofInDoctype),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._err(c.missingWhitespaceBeforeDoctypeName),this.state=C.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(L(e))this._createDoctypeToken(String.fromCharCode(F(e))),this.state=C.DOCTYPE_NAME;else switch(e){case r.SPACE:case r.LINE_FEED:case r.TABULATION:case r.FORM_FEED:break;case r.NULL:this._err(c.unexpectedNullCharacter),this._createDoctypeToken(i),this.state=C.DOCTYPE_NAME;break;case r.GREATER_THAN_SIGN:{this._err(c.missingDoctypeName),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this.state=C.DATA;break}case r.EOF:{this._err(c.eofInDoctype),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=C.DOCTYPE_NAME}}_stateDoctypeName(e){const t=this.currentToken;switch(e){case r.SPACE:case r.LINE_FEED:case r.TABULATION:case r.FORM_FEED:this.state=C.AFTER_DOCTYPE_NAME;break;case r.GREATER_THAN_SIGN:this.state=C.DATA,this.emitCurrentDoctype(t);break;case r.NULL:this._err(c.unexpectedNullCharacter),t.name+=i;break;case r.EOF:this._err(c.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.name+=String.fromCodePoint(L(e)?F(e):e)}}_stateAfterDoctypeName(e){const t=this.currentToken;switch(e){case r.SPACE:case r.LINE_FEED:case r.TABULATION:case r.FORM_FEED:break;case r.GREATER_THAN_SIGN:this.state=C.DATA,this.emitCurrentDoctype(t);break;case r.EOF:this._err(c.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._consumeSequenceIfMatch("public",!1)?this.state=C.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch("system",!1)?this.state=C.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(c.invalidCharacterSequenceAfterDoctypeName),t.forceQuirks=!0,this.state=C.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const t=this.currentToken;switch(e){case r.SPACE:case r.LINE_FEED:case r.TABULATION:case r.FORM_FEED:this.state=C.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break;case r.QUOTATION_MARK:this._err(c.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=C.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case r.APOSTROPHE:this._err(c.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=C.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case r.GREATER_THAN_SIGN:this._err(c.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=C.DATA,this.emitCurrentDoctype(t);break;case r.EOF:this._err(c.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(c.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=C.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const t=this.currentToken;switch(e){case r.SPACE:case r.LINE_FEED:case r.TABULATION:case r.FORM_FEED:break;case r.QUOTATION_MARK:t.publicId="",this.state=C.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case r.APOSTROPHE:t.publicId="",this.state=C.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case r.GREATER_THAN_SIGN:this._err(c.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=C.DATA,this.emitCurrentDoctype(t);break;case r.EOF:this._err(c.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(c.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=C.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const t=this.currentToken;switch(e){case r.QUOTATION_MARK:this.state=C.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case r.NULL:this._err(c.unexpectedNullCharacter),t.publicId+=i;break;case r.GREATER_THAN_SIGN:this._err(c.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=C.DATA;break;case r.EOF:this._err(c.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const t=this.currentToken;switch(e){case r.APOSTROPHE:this.state=C.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case r.NULL:this._err(c.unexpectedNullCharacter),t.publicId+=i;break;case r.GREATER_THAN_SIGN:this._err(c.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=C.DATA;break;case r.EOF:this._err(c.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const t=this.currentToken;switch(e){case r.SPACE:case r.LINE_FEED:case r.TABULATION:case r.FORM_FEED:this.state=C.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break;case r.GREATER_THAN_SIGN:this.state=C.DATA,this.emitCurrentDoctype(t);break;case r.QUOTATION_MARK:this._err(c.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=C.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case r.APOSTROPHE:this._err(c.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=C.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case r.EOF:this._err(c.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(c.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=C.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const t=this.currentToken;switch(e){case r.SPACE:case r.LINE_FEED:case r.TABULATION:case r.FORM_FEED:break;case r.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=C.DATA;break;case r.QUOTATION_MARK:t.systemId="",this.state=C.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case r.APOSTROPHE:t.systemId="",this.state=C.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case r.EOF:this._err(c.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(c.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=C.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const t=this.currentToken;switch(e){case r.SPACE:case r.LINE_FEED:case r.TABULATION:case r.FORM_FEED:this.state=C.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break;case r.QUOTATION_MARK:this._err(c.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=C.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case r.APOSTROPHE:this._err(c.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=C.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case r.GREATER_THAN_SIGN:this._err(c.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=C.DATA,this.emitCurrentDoctype(t);break;case r.EOF:this._err(c.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(c.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=C.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const t=this.currentToken;switch(e){case r.SPACE:case r.LINE_FEED:case r.TABULATION:case r.FORM_FEED:break;case r.QUOTATION_MARK:t.systemId="",this.state=C.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case r.APOSTROPHE:t.systemId="",this.state=C.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case r.GREATER_THAN_SIGN:this._err(c.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=C.DATA,this.emitCurrentDoctype(t);break;case r.EOF:this._err(c.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(c.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=C.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const t=this.currentToken;switch(e){case r.QUOTATION_MARK:this.state=C.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case r.NULL:this._err(c.unexpectedNullCharacter),t.systemId+=i;break;case r.GREATER_THAN_SIGN:this._err(c.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=C.DATA;break;case r.EOF:this._err(c.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const t=this.currentToken;switch(e){case r.APOSTROPHE:this.state=C.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case r.NULL:this._err(c.unexpectedNullCharacter),t.systemId+=i;break;case r.GREATER_THAN_SIGN:this._err(c.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=C.DATA;break;case r.EOF:this._err(c.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const t=this.currentToken;switch(e){case r.SPACE:case r.LINE_FEED:case r.TABULATION:case r.FORM_FEED:break;case r.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=C.DATA;break;case r.EOF:this._err(c.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(c.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=C.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const t=this.currentToken;switch(e){case r.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=C.DATA;break;case r.NULL:this._err(c.unexpectedNullCharacter);break;case r.EOF:this.emitCurrentDoctype(t),this._emitEOFToken()}}_stateCdataSection(e){switch(e){case r.RIGHT_SQUARE_BRACKET:this.state=C.CDATA_SECTION_BRACKET;break;case r.EOF:this._err(c.eofInCdata),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===r.RIGHT_SQUARE_BRACKET?this.state=C.CDATA_SECTION_END:(this._emitChars("]"),this.state=C.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case r.GREATER_THAN_SIGN:this.state=C.DATA;break;case r.RIGHT_SQUARE_BRACKET:this._emitChars("]");break;default:this._emitChars("]]"),this.state=C.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(e){e===r.NUMBER_SIGN?this.state=C.NUMERIC_CHARACTER_REFERENCE:R(e)?(this.state=C.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(e)):(this._flushCodePointConsumedAsCharacterReference(r.AMPERSAND),this._reconsumeInState(this.returnState,e))}_stateNamedCharacterReference(e){const t=this._matchNamedCharacterReference(e);if(this._ensureHibernation());else if(t){for(let e=0;e<t.length;e++)this._flushCodePointConsumedAsCharacterReference(t[e]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(r.AMPERSAND),this.state=C.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(e){R(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===r.SEMICOLON&&this._err(c.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,e))}_stateNumericCharacterReference(e){this.charRefCode=0,e===r.LATIN_SMALL_X||e===r.LATIN_CAPITAL_X?this.state=C.HEXADEMICAL_CHARACTER_REFERENCE_START:N(e)?(this.state=C.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(e)):(this._err(c.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(r.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(r.NUMBER_SIGN),this._reconsumeInState(this.returnState,e))}_stateHexademicalCharacterReferenceStart(e){var t;N(t=e)||P(t)||D(t)?(this.state=C.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(e)):(this._err(c.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(r.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(r.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(e){P(e)?this.charRefCode=16*this.charRefCode+e-55:D(e)?this.charRefCode=16*this.charRefCode+e-87:N(e)?this.charRefCode=16*this.charRefCode+e-48:e===r.SEMICOLON?this.state=C.NUMERIC_CHARACTER_REFERENCE_END:(this._err(c.missingSemicolonAfterCharacterReference),this.state=C.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(e))}_stateDecimalCharacterReference(e){N(e)?this.charRefCode=10*this.charRefCode+e-48:e===r.SEMICOLON?this.state=C.NUMERIC_CHARACTER_REFERENCE_END:(this._err(c.missingSemicolonAfterCharacterReference),this.state=C.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(e))}_stateNumericCharacterReferenceEnd(e){if(this.charRefCode===r.NULL)this._err(c.nullCharacterReference),this.charRefCode=r.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(c.characterReferenceOutsideUnicodeRange),this.charRefCode=r.REPLACEMENT_CHARACTER;else if(o(this.charRefCode))this._err(c.surrogateCharacterReference),this.charRefCode=r.REPLACEMENT_CHARACTER;else if(l(this.charRefCode))this._err(c.noncharacterCharacterReference);else if(a(this.charRefCode)||this.charRefCode===r.CARRIAGE_RETURN){this._err(c.controlCharacterReference);const e=I.get(this.charRefCode);void 0!==e&&(this.charRefCode=e)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,e)}}const U=new Set([w.DD,w.DT,w.LI,w.OPTGROUP,w.OPTION,w.P,w.RB,w.RP,w.RT,w.RTC]),V=new Set([...U,w.CAPTION,w.COLGROUP,w.TBODY,w.TD,w.TFOOT,w.TH,w.THEAD,w.TR]),G=new Map([[w.APPLET,g.HTML],[w.CAPTION,g.HTML],[w.HTML,g.HTML],[w.MARQUEE,g.HTML],[w.OBJECT,g.HTML],[w.TABLE,g.HTML],[w.TD,g.HTML],[w.TEMPLATE,g.HTML],[w.TH,g.HTML],[w.ANNOTATION_XML,g.MATHML],[w.MI,g.MATHML],[w.MN,g.MATHML],[w.MO,g.MATHML],[w.MS,g.MATHML],[w.MTEXT,g.MATHML],[w.DESC,g.SVG],[w.FOREIGN_OBJECT,g.SVG],[w.TITLE,g.SVG]]),B=[w.H1,w.H2,w.H3,w.H4,w.H5,w.H6],$=[w.TR,w.TEMPLATE,w.HTML],H=[w.TBODY,w.TFOOT,w.THEAD,w.TEMPLATE,w.HTML],q=[w.TABLE,w.TEMPLATE,w.HTML],W=[w.TD,w.TH];class K{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,t,i){this.treeAdapter=t,this.handler=i,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=w.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===w.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===g.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,t){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=t,this.currentTagId=t,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,t,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,t){const i=this._indexOf(e);this.items[i]=t,i===this.stackTop&&(this.current=t)}insertAfter(e,t,i){const r=this._indexOf(e)+1;this.items.splice(r,0,t),this.tagIDs.splice(r,0,i),this.stackTop++,r===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,r===this.stackTop)}popUntilTagNamePopped(e){let t=this.stackTop+1;do{t=this.tagIDs.lastIndexOf(e,t-1)}while(t>0&&this.treeAdapter.getNamespaceURI(this.items[t])!==g.HTML);this.shortenToLength(t<0?0:t)}shortenToLength(e){for(;this.stackTop>=e;){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,this.stackTop<e)}}popUntilElementPopped(e){const t=this._indexOf(e);this.shortenToLength(t<0?0:t)}popUntilPopped(e,t){const i=this._indexOfTagNames(e,t);this.shortenToLength(i<0?0:i)}popUntilNumberedHeaderPopped(){this.popUntilPopped(B,g.HTML)}popUntilTableCellPopped(){this.popUntilPopped(W,g.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,t){for(let i=this.stackTop;i>=0;i--)if(e.includes(this.tagIDs[i])&&this.treeAdapter.getNamespaceURI(this.items[i])===t)return i;return-1}clearBackTo(e,t){const i=this._indexOfTagNames(e,t);this.shortenToLength(i+1)}clearBackToTableContext(){this.clearBackTo(q,g.HTML)}clearBackToTableBodyContext(){this.clearBackTo(H,g.HTML)}clearBackToTableRowContext(){this.clearBackTo($,g.HTML)}remove(e){const t=this._indexOf(e);t>=0&&(t===this.stackTop?this.pop():(this.items.splice(t,1),this.tagIDs.splice(t,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===w.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const t=this._indexOf(e)-1;return t>=0?this.items[t]:null}isRootHtmlElementCurrent(){return 0===this.stackTop&&this.tagIDs[0]===w.HTML}hasInScope(e){for(let t=this.stackTop;t>=0;t--){const i=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(i===e&&r===g.HTML)return!0;if(G.get(i)===r)return!1}return!0}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const t=this.tagIDs[e],i=this.treeAdapter.getNamespaceURI(this.items[e]);if(x(t)&&i===g.HTML)return!0;if(G.get(t)===i)return!1}return!0}hasInListItemScope(e){for(let t=this.stackTop;t>=0;t--){const i=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(i===e&&r===g.HTML)return!0;if((i===w.UL||i===w.OL)&&r===g.HTML||G.get(i)===r)return!1}return!0}hasInButtonScope(e){for(let t=this.stackTop;t>=0;t--){const i=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(i===e&&r===g.HTML)return!0;if(i===w.BUTTON&&r===g.HTML||G.get(i)===r)return!1}return!0}hasInTableScope(e){for(let t=this.stackTop;t>=0;t--){const i=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===g.HTML){if(i===e)return!0;if(i===w.TABLE||i===w.TEMPLATE||i===w.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--){const t=this.tagIDs[e];if(this.treeAdapter.getNamespaceURI(this.items[e])===g.HTML){if(t===w.TBODY||t===w.THEAD||t===w.TFOOT)return!0;if(t===w.TABLE||t===w.HTML)return!1}}return!0}hasInSelectScope(e){for(let t=this.stackTop;t>=0;t--){const i=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===g.HTML){if(i===e)return!0;if(i!==w.OPTION&&i!==w.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;U.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;V.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==e&&V.has(this.currentTagId);)this.pop()}}var Y;!function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"}(Y=Y||(Y={}));const J={type:Y.Marker};class X{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,t){const i=[],r=t.length,n=this.treeAdapter.getTagName(e),s=this.treeAdapter.getNamespaceURI(e);for(let e=0;e<this.entries.length;e++){const t=this.entries[e];if(t.type===Y.Marker)break;const{element:o}=t;if(this.treeAdapter.getTagName(o)===n&&this.treeAdapter.getNamespaceURI(o)===s){const t=this.treeAdapter.getAttrList(o);t.length===r&&i.push({idx:e,attrs:t})}}return i}_ensureNoahArkCondition(e){if(this.entries.length<3)return;const t=this.treeAdapter.getAttrList(e),i=this._getNoahArkConditionCandidates(e,t);if(i.length<3)return;const r=new Map(t.map((e=>[e.name,e.value])));let n=0;for(let e=0;e<i.length;e++){const t=i[e];t.attrs.every((e=>r.get(e.name)===e.value))&&(n+=1,n>=3&&this.entries.splice(t.idx,1))}}insertMarker(){this.entries.unshift(J)}pushElement(e,t){this._ensureNoahArkCondition(e),this.entries.unshift({type:Y.Element,element:e,token:t})}insertElementAfterBookmark(e,t){const i=this.entries.indexOf(this.bookmark);this.entries.splice(i,0,{type:Y.Element,element:e,token:t})}removeEntry(e){const t=this.entries.indexOf(e);t>=0&&this.entries.splice(t,1)}clearToLastMarker(){const e=this.entries.indexOf(J);e>=0?this.entries.splice(0,e+1):this.entries.length=0}getElementEntryInScopeWithTagName(e){const t=this.entries.find((t=>t.type===Y.Marker||this.treeAdapter.getTagName(t.element)===e));return t&&t.type===Y.Element?t:null}getElementEntry(e){return this.entries.find((t=>t.type===Y.Element&&t.element===e))}}function Q(e){return{nodeName:"#text",value:e,parentNode:null}}const ee={createDocument:()=>({nodeName:"#document",mode:_.NO_QUIRKS,childNodes:[]}),createDocumentFragment:()=>({nodeName:"#document-fragment",childNodes:[]}),createElement:(e,t,i)=>({nodeName:e,tagName:e,attrs:i,namespaceURI:t,childNodes:[],parentNode:null}),createCommentNode:e=>({nodeName:"#comment",data:e,parentNode:null}),appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,i){const r=e.childNodes.indexOf(i);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent:e=>e.content,setDocumentType(e,t,i,r){const n=e.childNodes.find((e=>"#documentType"===e.nodeName));if(n)n.name=t,n.publicId=i,n.systemId=r;else{const n={nodeName:"#documentType",name:t,publicId:i,systemId:r,parentNode:null};ee.appendChild(e,n)}},setDocumentMode(e,t){e.mode=t},getDocumentMode:e=>e.mode,detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const i=e.childNodes[e.childNodes.length-1];if(ee.isTextNode(i))return void(i.value+=t)}ee.appendChild(e,Q(t))},insertTextBefore(e,t,i){const r=e.childNodes[e.childNodes.indexOf(i)-1];r&&ee.isTextNode(r)?r.value+=t:ee.insertBefore(e,Q(t),i)},adoptAttributes(e,t){const i=new Set(e.attrs.map((e=>e.name)));for(let r=0;r<t.length;r++)i.has(t[r].name)||e.attrs.push(t[r])},getFirstChild:e=>e.childNodes[0],getChildNodes:e=>e.childNodes,getParentNode:e=>e.parentNode,getAttrList:e=>e.attrs,getTagName:e=>e.tagName,getNamespaceURI:e=>e.namespaceURI,getTextNodeContent:e=>e.value,getCommentNodeContent:e=>e.data,getDocumentTypeNodeName:e=>e.name,getDocumentTypeNodePublicId:e=>e.publicId,getDocumentTypeNodeSystemId:e=>e.systemId,isTextNode:e=>"#text"===e.nodeName,isCommentNode:e=>"#comment"===e.nodeName,isDocumentTypeNode:e=>"#documentType"===e.nodeName,isElementNode:e=>Object.prototype.hasOwnProperty.call(e,"tagName"),setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation:e=>e.sourceCodeLocation,updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},te="html",ie=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],re=[...ie,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],ne=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),se=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],oe=[...se,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function ae(e,t){return t.some((t=>e.startsWith(t)))}const le="definitionurl",ce="definitionURL",he=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map((e=>[e.toLowerCase(),e]))),ue=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:g.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:g.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:g.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:g.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:g.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:g.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:g.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:g.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:g.XML}],["xml:space",{prefix:"xml",name:"space",namespace:g.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:g.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:g.XMLNS}]]),pe=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map((e=>[e.toLowerCase(),e]))),de=new Set([w.B,w.BIG,w.BLOCKQUOTE,w.BODY,w.BR,w.CENTER,w.CODE,w.DD,w.DIV,w.DL,w.DT,w.EM,w.EMBED,w.H1,w.H2,w.H3,w.H4,w.H5,w.H6,w.HEAD,w.HR,w.I,w.IMG,w.LI,w.LISTING,w.MENU,w.META,w.NOBR,w.OL,w.P,w.PRE,w.RUBY,w.S,w.SMALL,w.SPAN,w.STRONG,w.STRIKE,w.SUB,w.SUP,w.TABLE,w.TT,w.U,w.UL,w.VAR]);function fe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===le){e.attrs[t].name=ce;break}}function ye(e){for(let t=0;t<e.attrs.length;t++){const i=he.get(e.attrs[t].name);null!=i&&(e.attrs[t].name=i)}}function me(e){for(let t=0;t<e.attrs.length;t++){const i=ue.get(e.attrs[t].name);i&&(e.attrs[t].prefix=i.prefix,e.attrs[t].name=i.name,e.attrs[t].namespace=i.namespace)}}const ge="hidden",ve=8,_e=3;var be;!function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"}(be||(be={}));const we={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Me=new Set([w.TABLE,w.TBODY,w.TFOOT,w.THEAD,w.TR]),Te={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:ee,onParseError:null};class Se{constructor(e,t,i=null,r=null){this.fragmentContext=i,this.scriptHandler=r,this.currentToken=null,this.stopped=!1,this.insertionMode=be.INITIAL,this.originalInsertionMode=be.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Te,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=null!=t?t:this.treeAdapter.createDocument(),this.tokenizer=new z(this.options,this),this.activeFormattingElements=new X(this.treeAdapter),this.fragmentContextID=i?S(this.treeAdapter.getTagName(i)):w.UNKNOWN,this._setContextModes(null!=i?i:this.document,this.fragmentContextID),this.openElements=new K(this.document,this.treeAdapter,this)}static parse(e,t){const i=new this(t);return i.tokenizer.write(e,!0),i.document}static getFragmentParser(e,t){const i={...Te,...t};null!=e||(e=i.treeAdapter.createElement(b.TEMPLATE,g.HTML,[]));const r=i.treeAdapter.createElement("documentmock",g.HTML,[]),n=new this(i,r,e);return n.fragmentContextID===w.TEMPLATE&&n.tmplInsertionModeStack.unshift(be.IN_TEMPLATE),n._initTokenizerForFragmentParsing(),n._insertFakeRootElement(),n._resetInsertionMode(),n._findFormInFragmentContext(),n}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),t=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,t),t}_err(e,t,i){var r;if(!this.onParseError)return;const n=null!==(r=e.location)&&void 0!==r?r:we,s={code:t,startLine:n.startLine,startCol:n.startCol,startOffset:n.startOffset,endLine:i?n.startLine:n.endLine,endCol:i?n.startCol:n.endCol,endOffset:i?n.startOffset:n.endOffset};this.onParseError(s)}onItemPush(e,t,i){var r,n;null===(n=(r=this.treeAdapter).onItemPush)||void 0===n||n.call(r,e),i&&this.openElements.stackTop>0&&this._setContextModes(e,t)}onItemPop(e,t){var i,r;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),null===(r=(i=this.treeAdapter).onItemPop)||void 0===r||r.call(i,e,this.openElements.current),t){let e,t;0===this.openElements.stackTop&&this.fragmentContext?(e=this.fragmentContext,t=this.fragmentContextID):({current:e,currentTagId:t}=this.openElements),this._setContextModes(e,t)}}_setContextModes(e,t){const i=e===this.document||this.treeAdapter.getNamespaceURI(e)===g.HTML;this.currentNotInHTML=!i,this.tokenizer.inForeignNode=!i&&!this._isIntegrationPoint(t,e)}_switchToTextParsing(e,t){this._insertElement(e,g.HTML),this.tokenizer.state=t,this.originalInsertionMode=this.insertionMode,this.insertionMode=be.TEXT}switchToPlaintextParsing(){this.insertionMode=be.TEXT,this.originalInsertionMode=be.IN_BODY,this.tokenizer.state=k.PLAINTEXT}_getAdjustedCurrentElement(){return 0===this.openElements.stackTop&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===b.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(this.fragmentContext&&this.treeAdapter.getNamespaceURI(this.fragmentContext)===g.HTML)switch(this.fragmentContextID){case w.TITLE:case w.TEXTAREA:this.tokenizer.state=k.RCDATA;break;case w.STYLE:case w.XMP:case w.IFRAME:case w.NOEMBED:case w.NOFRAMES:case w.NOSCRIPT:this.tokenizer.state=k.RAWTEXT;break;case w.SCRIPT:this.tokenizer.state=k.SCRIPT_DATA;break;case w.PLAINTEXT:this.tokenizer.state=k.PLAINTEXT}}_setDocumentType(e){const t=e.name||"",i=e.publicId||"",r=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,t,i,r),e.location){const t=this.treeAdapter.getChildNodes(this.document).find((e=>this.treeAdapter.isDocumentTypeNode(e)));t&&this.treeAdapter.setNodeSourceCodeLocation(t,e.location)}}_attachElementToTree(e,t){if(this.options.sourceCodeLocationInfo){const i=t&&{...t,startTag:t};this.treeAdapter.setNodeSourceCodeLocation(e,i)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const t=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(t,e)}}_appendElement(e,t){const i=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(i,e.location)}_insertElement(e,t){const i=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(i,e.location),this.openElements.push(i,e.tagID)}_insertFakeElement(e,t){const i=this.treeAdapter.createElement(e,g.HTML,[]);this._attachElementToTree(i,null),this.openElements.push(i,t)}_insertTemplate(e){const t=this.treeAdapter.createElement(e.tagName,g.HTML,e.attrs),i=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(t,i),this._attachElementToTree(t,e.location),this.openElements.push(t,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(i,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(b.HTML,g.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,w.HTML)}_appendCommentNode(e,t){const i=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(t,i),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(i,e.location)}_insertCharacters(e){let t,i;if(this._shouldFosterParentOnInsertion()?(({parent:t,beforeElement:i}=this._findFosterParentingLocation()),i?this.treeAdapter.insertTextBefore(t,e.chars,i):this.treeAdapter.insertText(t,e.chars)):(t=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(t,e.chars)),!e.location)return;const r=this.treeAdapter.getChildNodes(t),n=i?r.lastIndexOf(i):r.length,s=r[n-1];if(this.treeAdapter.getNodeSourceCodeLocation(s)){const{endLine:t,endCol:i,endOffset:r}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(s,{endLine:t,endCol:i,endOffset:r})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(s,e.location)}_adoptNodes(e,t){for(let i=this.treeAdapter.getFirstChild(e);i;i=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(i),this.treeAdapter.appendChild(t,i)}_setEndLocation(e,t){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&t.location){const i=t.location,r=this.treeAdapter.getTagName(e),n=t.type===h.END_TAG&&r===t.tagName?{endTag:{...i},endLine:i.endLine,endCol:i.endCol,endOffset:i.endOffset}:{endLine:i.startLine,endCol:i.startCol,endOffset:i.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,n)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let t,i;return 0===this.openElements.stackTop&&this.fragmentContext?(t=this.fragmentContext,i=this.fragmentContextID):({current:t,currentTagId:i}=this.openElements),(e.tagID!==w.SVG||this.treeAdapter.getTagName(t)!==b.ANNOTATION_XML||this.treeAdapter.getNamespaceURI(t)!==g.MATHML)&&(this.tokenizer.inForeignNode||(e.tagID===w.MGLYPH||e.tagID===w.MALIGNMARK)&&!this._isIntegrationPoint(i,t,g.HTML))}_processToken(e){switch(e.type){case h.CHARACTER:this.onCharacter(e);break;case h.NULL_CHARACTER:this.onNullCharacter(e);break;case h.COMMENT:this.onComment(e);break;case h.DOCTYPE:this.onDoctype(e);break;case h.START_TAG:this._processStartTag(e);break;case h.END_TAG:this.onEndTag(e);break;case h.EOF:this.onEof(e);break;case h.WHITESPACE_CHARACTER:this.onWhitespaceCharacter(e)}}_isIntegrationPoint(e,t,i){return r=e,n=this.treeAdapter.getNamespaceURI(t),s=this.treeAdapter.getAttrList(t),(!(o=i)||o===g.HTML)&&function(e,t,i){if(t===g.MATHML&&e===w.ANNOTATION_XML)for(let e=0;e<i.length;e++)if(i[e].name===v.ENCODING){const t=i[e].value.toLowerCase();return"text/html"===t||"application/xhtml+xml"===t}return t===g.SVG&&(e===w.FOREIGN_OBJECT||e===w.DESC||e===w.TITLE)}(r,n,s)||(!o||o===g.MATHML)&&(a=r,n===g.MATHML&&(a===w.MI||a===w.MO||a===w.MN||a===w.MS||a===w.MTEXT));var r,n,s,o,a}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const t=this.activeFormattingElements.entries.findIndex((e=>e.type===Y.Marker||this.openElements.contains(e.element)));for(let i=t<0?e-1:t-1;i>=0;i--){const e=this.activeFormattingElements.entries[i];this._insertElement(e.token,this.treeAdapter.getNamespaceURI(e.element)),e.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=be.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(w.P),this.openElements.popUntilTagNamePopped(w.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(0===e&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case w.TR:return void(this.insertionMode=be.IN_ROW);case w.TBODY:case w.THEAD:case w.TFOOT:return void(this.insertionMode=be.IN_TABLE_BODY);case w.CAPTION:return void(this.insertionMode=be.IN_CAPTION);case w.COLGROUP:return void(this.insertionMode=be.IN_COLUMN_GROUP);case w.TABLE:return void(this.insertionMode=be.IN_TABLE);case w.BODY:return void(this.insertionMode=be.IN_BODY);case w.FRAMESET:return void(this.insertionMode=be.IN_FRAMESET);case w.SELECT:return void this._resetInsertionModeForSelect(e);case w.TEMPLATE:return void(this.insertionMode=this.tmplInsertionModeStack[0]);case w.HTML:return void(this.insertionMode=this.headElement?be.AFTER_HEAD:be.BEFORE_HEAD);case w.TD:case w.TH:if(e>0)return void(this.insertionMode=be.IN_CELL);break;case w.HEAD:if(e>0)return void(this.insertionMode=be.IN_HEAD)}this.insertionMode=be.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let t=e-1;t>0;t--){const e=this.openElements.tagIDs[t];if(e===w.TEMPLATE)break;if(e===w.TABLE)return void(this.insertionMode=be.IN_SELECT_IN_TABLE)}this.insertionMode=be.IN_SELECT}_isElementCausesFosterParenting(e){return Me.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const t=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case w.TEMPLATE:if(this.treeAdapter.getNamespaceURI(t)===g.HTML)return{parent:this.treeAdapter.getTemplateContent(t),beforeElement:null};break;case w.TABLE:{const i=this.treeAdapter.getParentNode(t);return i?{parent:i,beforeElement:t}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertBefore(t.parent,e,t.beforeElement):this.treeAdapter.appendChild(t.parent,e)}_isSpecialElement(e,t){const i=this.treeAdapter.getNamespaceURI(e);return E[i].has(t)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode)i=e,(t=this)._insertCharacters(i),t.framesetOk=!1;else switch(this.insertionMode){case be.INITIAL:Re(this,e);break;case be.BEFORE_HTML:Pe(this,e);break;case be.BEFORE_HEAD:De(this,e);break;case be.IN_HEAD:Ze(this,e);break;case be.IN_HEAD_NO_SCRIPT:ze(this,e);break;case be.AFTER_HEAD:Ue(this,e);break;case be.IN_BODY:case be.IN_CAPTION:case be.IN_CELL:case be.IN_TEMPLATE:Be(this,e);break;case be.TEXT:case be.IN_SELECT:case be.IN_SELECT_IN_TABLE:this._insertCharacters(e);break;case be.IN_TABLE:case be.IN_TABLE_BODY:case be.IN_ROW:Qe(this,e);break;case be.IN_TABLE_TEXT:nt(this,e);break;case be.IN_COLUMN_GROUP:lt(this,e);break;case be.AFTER_BODY:gt(this,e);break;case be.AFTER_AFTER_BODY:vt(this,e)}var t,i}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode)this,(t=e).chars=i,this._insertCharacters(t);else switch(this.insertionMode){case be.INITIAL:Re(this,e);break;case be.BEFORE_HTML:Pe(this,e);break;case be.BEFORE_HEAD:De(this,e);break;case be.IN_HEAD:Ze(this,e);break;case be.IN_HEAD_NO_SCRIPT:ze(this,e);break;case be.AFTER_HEAD:Ue(this,e);break;case be.TEXT:this._insertCharacters(e);break;case be.IN_TABLE:case be.IN_TABLE_BODY:case be.IN_ROW:Qe(this,e);break;case be.IN_COLUMN_GROUP:lt(this,e);break;case be.AFTER_BODY:gt(this,e);break;case be.AFTER_AFTER_BODY:vt(this,e)}var t}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML)Le(this,e);else switch(this.insertionMode){case be.INITIAL:case be.BEFORE_HTML:case be.BEFORE_HEAD:case be.IN_HEAD:case be.IN_HEAD_NO_SCRIPT:case be.AFTER_HEAD:case be.IN_BODY:case be.IN_TABLE:case be.IN_CAPTION:case be.IN_COLUMN_GROUP:case be.IN_TABLE_BODY:case be.IN_ROW:case be.IN_CELL:case be.IN_SELECT:case be.IN_SELECT_IN_TABLE:case be.IN_TEMPLATE:case be.IN_FRAMESET:case be.AFTER_FRAMESET:Le(this,e);break;case be.IN_TABLE_TEXT:st(this,e);break;case be.AFTER_BODY:i=e,(t=this)._appendCommentNode(i,t.openElements.items[0]);break;case be.AFTER_AFTER_BODY:case be.AFTER_AFTER_FRAMESET:!function(e,t){e._appendCommentNode(t,e.document)}(this,e)}var t,i}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case be.INITIAL:!function(e,t){e._setDocumentType(t);const i=t.forceQuirks?_.QUIRKS:function(e){if(e.name!==te)return _.QUIRKS;const{systemId:t}=e;if(t&&"http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd"===t.toLowerCase())return _.QUIRKS;let{publicId:i}=e;if(null!==i){if(i=i.toLowerCase(),ne.has(i))return _.QUIRKS;let e=null===t?re:ie;if(ae(i,e))return _.QUIRKS;if(e=null===t?se:oe,ae(i,e))return _.LIMITED_QUIRKS}return _.NO_QUIRKS}(t);var r;(r=t).name===te&&null===r.publicId&&(null===r.systemId||"about:legacy-compat"===r.systemId)||e._err(t,c.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,i),e.insertionMode=be.BEFORE_HTML}(this,e);break;case be.BEFORE_HEAD:case be.IN_HEAD:case be.IN_HEAD_NO_SCRIPT:case be.AFTER_HEAD:this._err(e,c.misplacedDoctype);break;case be.IN_TABLE_TEXT:st(this,e)}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,c.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?function(e,t){if(function(e){const t=e.tagID;return t===w.FONT&&e.attrs.some((({name:e})=>e===v.COLOR||e===v.SIZE||e===v.FACE))||de.has(t)}(t))_t(e),e._startTagOutsideForeignContent(t);else{const i=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(i);r===g.MATHML?fe(t):r===g.SVG&&(function(e){const t=pe.get(e.tagName);null!=t&&(e.tagName=t,e.tagID=S(e.tagName))}(t),ye(t)),me(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case be.INITIAL:Re(this,e);break;case be.BEFORE_HTML:t=this,(i=e).tagID===w.HTML?(t._insertElement(i,g.HTML),t.insertionMode=be.BEFORE_HEAD):Pe(t,i);break;case be.BEFORE_HEAD:!function(e,t){switch(t.tagID){case w.HTML:Ke(e,t);break;case w.HEAD:e._insertElement(t,g.HTML),e.headElement=e.openElements.current,e.insertionMode=be.IN_HEAD;break;default:De(e,t)}}(this,e);break;case be.IN_HEAD:Fe(this,e);break;case be.IN_HEAD_NO_SCRIPT:!function(e,t){switch(t.tagID){case w.HTML:Ke(e,t);break;case w.BASEFONT:case w.BGSOUND:case w.HEAD:case w.LINK:case w.META:case w.NOFRAMES:case w.STYLE:Fe(e,t);break;case w.NOSCRIPT:e._err(t,c.nestedNoscriptInHead);break;default:ze(e,t)}}(this,e);break;case be.AFTER_HEAD:!function(e,t){switch(t.tagID){case w.HTML:Ke(e,t);break;case w.BODY:e._insertElement(t,g.HTML),e.framesetOk=!1,e.insertionMode=be.IN_BODY;break;case w.FRAMESET:e._insertElement(t,g.HTML),e.insertionMode=be.IN_FRAMESET;break;case w.BASE:case w.BASEFONT:case w.BGSOUND:case w.LINK:case w.META:case w.NOFRAMES:case w.SCRIPT:case w.STYLE:case w.TEMPLATE:case w.TITLE:e._err(t,c.abandonedHeadElementChild),e.openElements.push(e.headElement,w.HEAD),Fe(e,t),e.openElements.remove(e.headElement);break;case w.HEAD:e._err(t,c.misplacedStartTagForHeadElement);break;default:Ue(e,t)}}(this,e);break;case be.IN_BODY:Ke(this,e);break;case be.IN_TABLE:et(this,e);break;case be.IN_TABLE_TEXT:st(this,e);break;case be.IN_CAPTION:!function(e,t){const i=t.tagID;ot.has(i)?e.openElements.hasInTableScope(w.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(w.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=be.IN_TABLE,et(e,t)):Ke(e,t)}(this,e);break;case be.IN_COLUMN_GROUP:at(this,e);break;case be.IN_TABLE_BODY:ct(this,e);break;case be.IN_ROW:ut(this,e);break;case be.IN_CELL:!function(e,t){const i=t.tagID;ot.has(i)?(e.openElements.hasInTableScope(w.TD)||e.openElements.hasInTableScope(w.TH))&&(e._closeTableCell(),ut(e,t)):Ke(e,t)}(this,e);break;case be.IN_SELECT:dt(this,e);break;case be.IN_SELECT_IN_TABLE:!function(e,t){const i=t.tagID;i===w.CAPTION||i===w.TABLE||i===w.TBODY||i===w.TFOOT||i===w.THEAD||i===w.TR||i===w.TD||i===w.TH?(e.openElements.popUntilTagNamePopped(w.SELECT),e._resetInsertionMode(),e._processStartTag(t)):dt(e,t)}(this,e);break;case be.IN_TEMPLATE:!function(e,t){switch(t.tagID){case w.BASE:case w.BASEFONT:case w.BGSOUND:case w.LINK:case w.META:case w.NOFRAMES:case w.SCRIPT:case w.STYLE:case w.TEMPLATE:case w.TITLE:Fe(e,t);break;case w.CAPTION:case w.COLGROUP:case w.TBODY:case w.TFOOT:case w.THEAD:e.tmplInsertionModeStack[0]=be.IN_TABLE,e.insertionMode=be.IN_TABLE,et(e,t);break;case w.COL:e.tmplInsertionModeStack[0]=be.IN_COLUMN_GROUP,e.insertionMode=be.IN_COLUMN_GROUP,at(e,t);break;case w.TR:e.tmplInsertionModeStack[0]=be.IN_TABLE_BODY,e.insertionMode=be.IN_TABLE_BODY,ct(e,t);break;case w.TD:case w.TH:e.tmplInsertionModeStack[0]=be.IN_ROW,e.insertionMode=be.IN_ROW,ut(e,t);break;default:e.tmplInsertionModeStack[0]=be.IN_BODY,e.insertionMode=be.IN_BODY,Ke(e,t)}}(this,e);break;case be.AFTER_BODY:!function(e,t){t.tagID===w.HTML?Ke(e,t):gt(e,t)}(this,e);break;case be.IN_FRAMESET:!function(e,t){switch(t.tagID){case w.HTML:Ke(e,t);break;case w.FRAMESET:e._insertElement(t,g.HTML);break;case w.FRAME:e._appendElement(t,g.HTML),t.ackSelfClosing=!0;break;case w.NOFRAMES:Fe(e,t)}}(this,e);break;case be.AFTER_FRAMESET:!function(e,t){switch(t.tagID){case w.HTML:Ke(e,t);break;case w.NOFRAMES:Fe(e,t)}}(this,e);break;case be.AFTER_AFTER_BODY:!function(e,t){t.tagID===w.HTML?Ke(e,t):vt(e,t)}(this,e);break;case be.AFTER_AFTER_FRAMESET:!function(e,t){switch(t.tagID){case w.HTML:Ke(e,t);break;case w.NOFRAMES:Fe(e,t)}}(this,e)}var t,i}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?function(e,t){if(t.tagID===w.P||t.tagID===w.BR)return _t(e),void e._endTagOutsideForeignContent(t);for(let i=e.openElements.stackTop;i>0;i--){const r=e.openElements.items[i];if(e.treeAdapter.getNamespaceURI(r)===g.HTML){e._endTagOutsideForeignContent(t);break}const n=e.treeAdapter.getTagName(r);if(n.toLowerCase()===t.tagName){t.tagName=n,e.openElements.shortenToLength(i);break}}}(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case be.INITIAL:Re(this,e);break;case be.BEFORE_HTML:!function(e,t){const i=t.tagID;i!==w.HTML&&i!==w.HEAD&&i!==w.BODY&&i!==w.BR||Pe(e,t)}(this,e);break;case be.BEFORE_HEAD:!function(e,t){const i=t.tagID;i===w.HEAD||i===w.BODY||i===w.HTML||i===w.BR?De(e,t):e._err(t,c.endTagWithoutMatchingOpenElement)}(this,e);break;case be.IN_HEAD:!function(e,t){switch(t.tagID){case w.HEAD:e.openElements.pop(),e.insertionMode=be.AFTER_HEAD;break;case w.BODY:case w.BR:case w.HTML:Ze(e,t);break;case w.TEMPLATE:je(e,t);break;default:e._err(t,c.endTagWithoutMatchingOpenElement)}}(this,e);break;case be.IN_HEAD_NO_SCRIPT:!function(e,t){switch(t.tagID){case w.NOSCRIPT:e.openElements.pop(),e.insertionMode=be.IN_HEAD;break;case w.BR:ze(e,t);break;default:e._err(t,c.endTagWithoutMatchingOpenElement)}}(this,e);break;case be.AFTER_HEAD:!function(e,t){switch(t.tagID){case w.BODY:case w.HTML:case w.BR:Ue(e,t);break;case w.TEMPLATE:je(e,t);break;default:e._err(t,c.endTagWithoutMatchingOpenElement)}}(this,e);break;case be.IN_BODY:Je(this,e);break;case be.TEXT:t=this,e.tagID===w.SCRIPT&&(null===(i=t.scriptHandler)||void 0===i||i.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode;break;case be.IN_TABLE:tt(this,e);break;case be.IN_TABLE_TEXT:st(this,e);break;case be.IN_CAPTION:!function(e,t){const i=t.tagID;switch(i){case w.CAPTION:case w.TABLE:e.openElements.hasInTableScope(w.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(w.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=be.IN_TABLE,i===w.TABLE&&tt(e,t));break;case w.BODY:case w.COL:case w.COLGROUP:case w.HTML:case w.TBODY:case w.TD:case w.TFOOT:case w.TH:case w.THEAD:case w.TR:break;default:Je(e,t)}}(this,e);break;case be.IN_COLUMN_GROUP:!function(e,t){switch(t.tagID){case w.COLGROUP:e.openElements.currentTagId===w.COLGROUP&&(e.openElements.pop(),e.insertionMode=be.IN_TABLE);break;case w.TEMPLATE:je(e,t);break;case w.COL:break;default:lt(e,t)}}(this,e);break;case be.IN_TABLE_BODY:ht(this,e);break;case be.IN_ROW:pt(this,e);break;case be.IN_CELL:!function(e,t){const i=t.tagID;switch(i){case w.TD:case w.TH:e.openElements.hasInTableScope(i)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(i),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=be.IN_ROW);break;case w.TABLE:case w.TBODY:case w.TFOOT:case w.THEAD:case w.TR:e.openElements.hasInTableScope(i)&&(e._closeTableCell(),pt(e,t));break;case w.BODY:case w.CAPTION:case w.COL:case w.COLGROUP:case w.HTML:break;default:Je(e,t)}}(this,e);break;case be.IN_SELECT:ft(this,e);break;case be.IN_SELECT_IN_TABLE:!function(e,t){const i=t.tagID;i===w.CAPTION||i===w.TABLE||i===w.TBODY||i===w.TFOOT||i===w.THEAD||i===w.TR||i===w.TD||i===w.TH?e.openElements.hasInTableScope(i)&&(e.openElements.popUntilTagNamePopped(w.SELECT),e._resetInsertionMode(),e.onEndTag(t)):ft(e,t)}(this,e);break;case be.IN_TEMPLATE:!function(e,t){t.tagID===w.TEMPLATE&&je(e,t)}(this,e);break;case be.AFTER_BODY:mt(this,e);break;case be.IN_FRAMESET:!function(e,t){t.tagID!==w.FRAMESET||e.openElements.isRootHtmlElementCurrent()||(e.openElements.pop(),e.fragmentContext||e.openElements.currentTagId===w.FRAMESET||(e.insertionMode=be.AFTER_FRAMESET))}(this,e);break;case be.AFTER_FRAMESET:!function(e,t){t.tagID===w.HTML&&(e.insertionMode=be.AFTER_AFTER_FRAMESET)}(this,e);break;case be.AFTER_AFTER_BODY:vt(this,e)}var t,i}onEof(e){switch(this.insertionMode){case be.INITIAL:Re(this,e);break;case be.BEFORE_HTML:Pe(this,e);break;case be.BEFORE_HEAD:De(this,e);break;case be.IN_HEAD:Ze(this,e);break;case be.IN_HEAD_NO_SCRIPT:ze(this,e);break;case be.AFTER_HEAD:Ue(this,e);break;case be.IN_BODY:case be.IN_TABLE:case be.IN_CAPTION:case be.IN_COLUMN_GROUP:case be.IN_TABLE_BODY:case be.IN_ROW:case be.IN_CELL:case be.IN_SELECT:case be.IN_SELECT_IN_TABLE:Xe(this,e);break;case be.TEXT:i=e,(t=this)._err(i,c.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(i);break;case be.IN_TABLE_TEXT:st(this,e);break;case be.IN_TEMPLATE:yt(this,e);break;case be.AFTER_BODY:case be.IN_FRAMESET:case be.AFTER_FRAMESET:case be.AFTER_AFTER_BODY:case be.AFTER_AFTER_FRAMESET:Oe(this,e)}var t,i}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===r.LINE_FEED)){if(1===e.chars.length)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode)this._insertCharacters(e);else switch(this.insertionMode){case be.IN_HEAD:case be.IN_HEAD_NO_SCRIPT:case be.AFTER_HEAD:case be.TEXT:case be.IN_COLUMN_GROUP:case be.IN_SELECT:case be.IN_SELECT_IN_TABLE:case be.IN_FRAMESET:case be.AFTER_FRAMESET:this._insertCharacters(e);break;case be.IN_BODY:case be.IN_CAPTION:case be.IN_CELL:case be.IN_TEMPLATE:case be.AFTER_BODY:case be.AFTER_AFTER_BODY:case be.AFTER_AFTER_FRAMESET:Ge(this,e);break;case be.IN_TABLE:case be.IN_TABLE_BODY:case be.IN_ROW:Qe(this,e);break;case be.IN_TABLE_TEXT:rt(this,e)}}}function Ae(e,t){let i=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return i?e.openElements.contains(i.element)?e.openElements.hasInScope(t.tagID)||(i=null):(e.activeFormattingElements.removeEntry(i),i=null):Ye(e,t),i}function Ee(e,t){let i=null,r=e.openElements.stackTop;for(;r>=0;r--){const n=e.openElements.items[r];if(n===t.element)break;e._isSpecialElement(n,e.openElements.tagIDs[r])&&(i=n)}return i||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),i}function xe(e,t,i){let r=t,n=e.openElements.getCommonAncestor(t);for(let s=0,o=n;o!==i;s++,o=n){n=e.openElements.getCommonAncestor(o);const i=e.activeFormattingElements.getElementEntry(o),a=i&&s>=_e;!i||a?(a&&e.activeFormattingElements.removeEntry(i),e.openElements.remove(o)):(o=Ie(e,i),r===t&&(e.activeFormattingElements.bookmark=i),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function Ie(e,t){const i=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,i,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function Ce(e,t,i){const r=S(e.treeAdapter.getTagName(t));if(e._isElementCausesFosterParenting(r))e._fosterParentElement(i);else{const n=e.treeAdapter.getNamespaceURI(t);r===w.TEMPLATE&&n===g.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,i)}}function ke(e,t,i){const r=e.treeAdapter.getNamespaceURI(i.element),{token:n}=i,s=e.treeAdapter.createElement(n.tagName,r,n.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,n),e.activeFormattingElements.removeEntry(i),e.openElements.remove(i.element),e.openElements.insertAfter(t,s,n.tagID)}function Ne(e,t){for(let i=0;i<ve;i++){const i=Ae(e,t);if(!i)break;const r=Ee(e,i);if(!r)break;e.activeFormattingElements.bookmark=i;const n=xe(e,r,i.element),s=e.openElements.getCommonAncestor(i.element);e.treeAdapter.detachNode(n),s&&Ce(e,s,n),ke(e,r,i)}}function Le(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Oe(e,t){if(e.stopped=!0,t.location){const i=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=i;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const i=e.openElements.items[0],r=e.treeAdapter.getNodeSourceCodeLocation(i);if(r&&!r.endTag&&(e._setEndLocation(i,t),e.openElements.stackTop>=1)){const i=e.openElements.items[1],r=e.treeAdapter.getNodeSourceCodeLocation(i);r&&!r.endTag&&e._setEndLocation(i,t)}}}}function Re(e,t){e._err(t,c.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,_.QUIRKS),e.insertionMode=be.BEFORE_HTML,e._processToken(t)}function Pe(e,t){e._insertFakeRootElement(),e.insertionMode=be.BEFORE_HEAD,e._processToken(t)}function De(e,t){e._insertFakeElement(b.HEAD,w.HEAD),e.headElement=e.openElements.current,e.insertionMode=be.IN_HEAD,e._processToken(t)}function Fe(e,t){switch(t.tagID){case w.HTML:Ke(e,t);break;case w.BASE:case w.BASEFONT:case w.BGSOUND:case w.LINK:case w.META:e._appendElement(t,g.HTML),t.ackSelfClosing=!0;break;case w.TITLE:e._switchToTextParsing(t,k.RCDATA);break;case w.NOSCRIPT:e.options.scriptingEnabled?e._switchToTextParsing(t,k.RAWTEXT):(e._insertElement(t,g.HTML),e.insertionMode=be.IN_HEAD_NO_SCRIPT);break;case w.NOFRAMES:case w.STYLE:e._switchToTextParsing(t,k.RAWTEXT);break;case w.SCRIPT:e._switchToTextParsing(t,k.SCRIPT_DATA);break;case w.TEMPLATE:e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=be.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(be.IN_TEMPLATE);break;case w.HEAD:e._err(t,c.misplacedStartTagForHeadElement);break;default:Ze(e,t)}}function je(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==w.TEMPLATE&&e._err(t,c.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(w.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,c.endTagWithoutMatchingOpenElement)}function Ze(e,t){e.openElements.pop(),e.insertionMode=be.AFTER_HEAD,e._processToken(t)}function ze(e,t){const i=t.type===h.EOF?c.openElementsLeftAfterEof:c.disallowedContentInNoscriptInHead;e._err(t,i),e.openElements.pop(),e.insertionMode=be.IN_HEAD,e._processToken(t)}function Ue(e,t){e._insertFakeElement(b.BODY,w.BODY),e.insertionMode=be.IN_BODY,Ve(e,t)}function Ve(e,t){switch(t.type){case h.CHARACTER:Be(e,t);break;case h.WHITESPACE_CHARACTER:Ge(e,t);break;case h.COMMENT:Le(e,t);break;case h.START_TAG:Ke(e,t);break;case h.END_TAG:Je(e,t);break;case h.EOF:Xe(e,t)}}function Ge(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function Be(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function $e(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,g.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function He(e){const t=p(e,v.TYPE);return null!=t&&t.toLowerCase()===ge}function qe(e,t){e._switchToTextParsing(t,k.RAWTEXT)}function We(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,g.HTML)}function Ke(e,t){switch(t.tagID){case w.I:case w.S:case w.B:case w.U:case w.EM:case w.TT:case w.BIG:case w.CODE:case w.FONT:case w.SMALL:case w.STRIKE:case w.STRONG:r=t,(i=e)._reconstructActiveFormattingElements(),i._insertElement(r,g.HTML),i.activeFormattingElements.pushElement(i.openElements.current,r);break;case w.A:!function(e,t){const i=e.activeFormattingElements.getElementEntryInScopeWithTagName(b.A);i&&(Ne(e,t),e.openElements.remove(i.element),e.activeFormattingElements.removeEntry(i)),e._reconstructActiveFormattingElements(),e._insertElement(t,g.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case w.H1:case w.H2:case w.H3:case w.H4:case w.H5:case w.H6:!function(e,t){e.openElements.hasInButtonScope(w.P)&&e._closePElement(),x(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,g.HTML)}(e,t);break;case w.P:case w.DL:case w.OL:case w.UL:case w.DIV:case w.DIR:case w.NAV:case w.MAIN:case w.MENU:case w.ASIDE:case w.CENTER:case w.FIGURE:case w.FOOTER:case w.HEADER:case w.HGROUP:case w.DIALOG:case w.DETAILS:case w.ADDRESS:case w.ARTICLE:case w.SECTION:case w.SUMMARY:case w.FIELDSET:case w.BLOCKQUOTE:case w.FIGCAPTION:!function(e,t){e.openElements.hasInButtonScope(w.P)&&e._closePElement(),e._insertElement(t,g.HTML)}(e,t);break;case w.LI:case w.DD:case w.DT:!function(e,t){e.framesetOk=!1;const i=t.tagID;for(let t=e.openElements.stackTop;t>=0;t--){const r=e.openElements.tagIDs[t];if(i===w.LI&&r===w.LI||(i===w.DD||i===w.DT)&&(r===w.DD||r===w.DT)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.popUntilTagNamePopped(r);break}if(r!==w.ADDRESS&&r!==w.DIV&&r!==w.P&&e._isSpecialElement(e.openElements.items[t],r))break}e.openElements.hasInButtonScope(w.P)&&e._closePElement(),e._insertElement(t,g.HTML)}(e,t);break;case w.BR:case w.IMG:case w.WBR:case w.AREA:case w.EMBED:case w.KEYGEN:$e(e,t);break;case w.HR:!function(e,t){e.openElements.hasInButtonScope(w.P)&&e._closePElement(),e._appendElement(t,g.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}(e,t);break;case w.RB:case w.RTC:!function(e,t){e.openElements.hasInScope(w.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,g.HTML)}(e,t);break;case w.RT:case w.RP:!function(e,t){e.openElements.hasInScope(w.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(w.RTC),e._insertElement(t,g.HTML)}(e,t);break;case w.PRE:case w.LISTING:!function(e,t){e.openElements.hasInButtonScope(w.P)&&e._closePElement(),e._insertElement(t,g.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}(e,t);break;case w.XMP:!function(e,t){e.openElements.hasInButtonScope(w.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,k.RAWTEXT)}(e,t);break;case w.SVG:!function(e,t){e._reconstructActiveFormattingElements(),ye(t),me(t),t.selfClosing?e._appendElement(t,g.SVG):e._insertElement(t,g.SVG),t.ackSelfClosing=!0}(e,t);break;case w.HTML:!function(e,t){0===e.openElements.tmplCount&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}(e,t);break;case w.BASE:case w.LINK:case w.META:case w.STYLE:case w.TITLE:case w.SCRIPT:case w.BGSOUND:case w.BASEFONT:case w.TEMPLATE:Fe(e,t);break;case w.BODY:!function(e,t){const i=e.openElements.tryPeekProperlyNestedBodyElement();i&&0===e.openElements.tmplCount&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(i,t.attrs))}(e,t);break;case w.FORM:!function(e,t){const i=e.openElements.tmplCount>0;e.formElement&&!i||(e.openElements.hasInButtonScope(w.P)&&e._closePElement(),e._insertElement(t,g.HTML),i||(e.formElement=e.openElements.current))}(e,t);break;case w.NOBR:!function(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(w.NOBR)&&(Ne(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,g.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case w.MATH:!function(e,t){e._reconstructActiveFormattingElements(),fe(t),me(t),t.selfClosing?e._appendElement(t,g.MATHML):e._insertElement(t,g.MATHML),t.ackSelfClosing=!0}(e,t);break;case w.TABLE:!function(e,t){e.treeAdapter.getDocumentMode(e.document)!==_.QUIRKS&&e.openElements.hasInButtonScope(w.P)&&e._closePElement(),e._insertElement(t,g.HTML),e.framesetOk=!1,e.insertionMode=be.IN_TABLE}(e,t);break;case w.INPUT:!function(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,g.HTML),He(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}(e,t);break;case w.PARAM:case w.TRACK:case w.SOURCE:!function(e,t){e._appendElement(t,g.HTML),t.ackSelfClosing=!0}(e,t);break;case w.IMAGE:!function(e,t){t.tagName=b.IMG,t.tagID=w.IMG,$e(e,t)}(e,t);break;case w.BUTTON:!function(e,t){e.openElements.hasInScope(w.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(w.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,g.HTML),e.framesetOk=!1}(e,t);break;case w.APPLET:case w.OBJECT:case w.MARQUEE:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,g.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}(e,t);break;case w.IFRAME:!function(e,t){e.framesetOk=!1,e._switchToTextParsing(t,k.RAWTEXT)}(e,t);break;case w.SELECT:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,g.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===be.IN_TABLE||e.insertionMode===be.IN_CAPTION||e.insertionMode===be.IN_TABLE_BODY||e.insertionMode===be.IN_ROW||e.insertionMode===be.IN_CELL?be.IN_SELECT_IN_TABLE:be.IN_SELECT}(e,t);break;case w.OPTION:case w.OPTGROUP:!function(e,t){e.openElements.currentTagId===w.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,g.HTML)}(e,t);break;case w.NOEMBED:qe(e,t);break;case w.FRAMESET:!function(e,t){const i=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&i&&(e.treeAdapter.detachNode(i),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,g.HTML),e.insertionMode=be.IN_FRAMESET)}(e,t);break;case w.TEXTAREA:!function(e,t){e._insertElement(t,g.HTML),e.skipNextNewLine=!0,e.tokenizer.state=k.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=be.TEXT}(e,t);break;case w.NOSCRIPT:e.options.scriptingEnabled?qe(e,t):We(e,t);break;case w.PLAINTEXT:!function(e,t){e.openElements.hasInButtonScope(w.P)&&e._closePElement(),e._insertElement(t,g.HTML),e.tokenizer.state=k.PLAINTEXT}(e,t);break;case w.COL:case w.TH:case w.TD:case w.TR:case w.HEAD:case w.FRAME:case w.TBODY:case w.TFOOT:case w.THEAD:case w.CAPTION:case w.COLGROUP:break;default:We(e,t)}var i,r}function Ye(e,t){const i=t.tagName,r=t.tagID;for(let t=e.openElements.stackTop;t>0;t--){const n=e.openElements.items[t],s=e.openElements.tagIDs[t];if(r===s&&(r!==w.UNKNOWN||e.treeAdapter.getTagName(n)===i)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=t&&e.openElements.shortenToLength(t);break}if(e._isSpecialElement(n,s))break}}function Je(e,t){switch(t.tagID){case w.A:case w.B:case w.I:case w.S:case w.U:case w.EM:case w.TT:case w.BIG:case w.CODE:case w.FONT:case w.NOBR:case w.SMALL:case w.STRIKE:case w.STRONG:Ne(e,t);break;case w.P:(i=e).openElements.hasInButtonScope(w.P)||i._insertFakeElement(b.P,w.P),i._closePElement();break;case w.DL:case w.UL:case w.OL:case w.DIR:case w.DIV:case w.NAV:case w.PRE:case w.MAIN:case w.MENU:case w.ASIDE:case w.BUTTON:case w.CENTER:case w.FIGURE:case w.FOOTER:case w.HEADER:case w.HGROUP:case w.DIALOG:case w.ADDRESS:case w.ARTICLE:case w.DETAILS:case w.SECTION:case w.SUMMARY:case w.LISTING:case w.FIELDSET:case w.BLOCKQUOTE:case w.FIGCAPTION:!function(e,t){const i=t.tagID;e.openElements.hasInScope(i)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(i))}(e,t);break;case w.LI:!function(e){e.openElements.hasInListItemScope(w.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(w.LI),e.openElements.popUntilTagNamePopped(w.LI))}(e);break;case w.DD:case w.DT:!function(e,t){const i=t.tagID;e.openElements.hasInScope(i)&&(e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i))}(e,t);break;case w.H1:case w.H2:case w.H3:case w.H4:case w.H5:case w.H6:!function(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}(e);break;case w.BR:!function(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(b.BR,w.BR),e.openElements.pop(),e.framesetOk=!1}(e);break;case w.BODY:!function(e,t){if(e.openElements.hasInScope(w.BODY)&&(e.insertionMode=be.AFTER_BODY,e.options.sourceCodeLocationInfo)){const i=e.openElements.tryPeekProperlyNestedBodyElement();i&&e._setEndLocation(i,t)}}(e,t);break;case w.HTML:!function(e,t){e.openElements.hasInScope(w.BODY)&&(e.insertionMode=be.AFTER_BODY,mt(e,t))}(e,t);break;case w.FORM:!function(e){const t=e.openElements.tmplCount>0,{formElement:i}=e;t||(e.formElement=null),(i||t)&&e.openElements.hasInScope(w.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(w.FORM):i&&e.openElements.remove(i))}(e);break;case w.APPLET:case w.OBJECT:case w.MARQUEE:!function(e,t){const i=t.tagID;e.openElements.hasInScope(i)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(i),e.activeFormattingElements.clearToLastMarker())}(e,t);break;case w.TEMPLATE:je(e,t);break;default:Ye(e,t)}var i}function Xe(e,t){e.tmplInsertionModeStack.length>0?yt(e,t):Oe(e,t)}function Qe(e,t){if(Me.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=be.IN_TABLE_TEXT,t.type){case h.CHARACTER:nt(e,t);break;case h.WHITESPACE_CHARACTER:rt(e,t)}else it(e,t)}function et(e,t){switch(t.tagID){case w.TD:case w.TH:case w.TR:r=t,(i=e).openElements.clearBackToTableContext(),i._insertFakeElement(b.TBODY,w.TBODY),i.insertionMode=be.IN_TABLE_BODY,ct(i,r);break;case w.STYLE:case w.SCRIPT:case w.TEMPLATE:Fe(e,t);break;case w.COL:!function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(b.COLGROUP,w.COLGROUP),e.insertionMode=be.IN_COLUMN_GROUP,at(e,t)}(e,t);break;case w.FORM:!function(e,t){e.formElement||0!==e.openElements.tmplCount||(e._insertElement(t,g.HTML),e.formElement=e.openElements.current,e.openElements.pop())}(e,t);break;case w.TABLE:!function(e,t){e.openElements.hasInTableScope(w.TABLE)&&(e.openElements.popUntilTagNamePopped(w.TABLE),e._resetInsertionMode(),e._processStartTag(t))}(e,t);break;case w.TBODY:case w.TFOOT:case w.THEAD:!function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,g.HTML),e.insertionMode=be.IN_TABLE_BODY}(e,t);break;case w.INPUT:!function(e,t){He(t)?e._appendElement(t,g.HTML):it(e,t),t.ackSelfClosing=!0}(e,t);break;case w.CAPTION:!function(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,g.HTML),e.insertionMode=be.IN_CAPTION}(e,t);break;case w.COLGROUP:!function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,g.HTML),e.insertionMode=be.IN_COLUMN_GROUP}(e,t);break;default:it(e,t)}var i,r}function tt(e,t){switch(t.tagID){case w.TABLE:e.openElements.hasInTableScope(w.TABLE)&&(e.openElements.popUntilTagNamePopped(w.TABLE),e._resetInsertionMode());break;case w.TEMPLATE:je(e,t);break;case w.BODY:case w.CAPTION:case w.COL:case w.COLGROUP:case w.HTML:case w.TBODY:case w.TD:case w.TFOOT:case w.TH:case w.THEAD:case w.TR:break;default:it(e,t)}}function it(e,t){const i=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,Ve(e,t),e.fosterParentingEnabled=i}function rt(e,t){e.pendingCharacterTokens.push(t)}function nt(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function st(e,t){let i=0;if(e.hasNonWhitespacePendingCharacterToken)for(;i<e.pendingCharacterTokens.length;i++)it(e,e.pendingCharacterTokens[i]);else for(;i<e.pendingCharacterTokens.length;i++)e._insertCharacters(e.pendingCharacterTokens[i]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const ot=new Set([w.CAPTION,w.COL,w.COLGROUP,w.TBODY,w.TD,w.TFOOT,w.TH,w.THEAD,w.TR]);function at(e,t){switch(t.tagID){case w.HTML:Ke(e,t);break;case w.COL:e._appendElement(t,g.HTML),t.ackSelfClosing=!0;break;case w.TEMPLATE:Fe(e,t);break;default:lt(e,t)}}function lt(e,t){e.openElements.currentTagId===w.COLGROUP&&(e.openElements.pop(),e.insertionMode=be.IN_TABLE,e._processToken(t))}function ct(e,t){switch(t.tagID){case w.TR:e.openElements.clearBackToTableBodyContext(),e._insertElement(t,g.HTML),e.insertionMode=be.IN_ROW;break;case w.TH:case w.TD:e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(b.TR,w.TR),e.insertionMode=be.IN_ROW,ut(e,t);break;case w.CAPTION:case w.COL:case w.COLGROUP:case w.TBODY:case w.TFOOT:case w.THEAD:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=be.IN_TABLE,et(e,t));break;default:et(e,t)}}function ht(e,t){const i=t.tagID;switch(t.tagID){case w.TBODY:case w.TFOOT:case w.THEAD:e.openElements.hasInTableScope(i)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=be.IN_TABLE);break;case w.TABLE:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=be.IN_TABLE,tt(e,t));break;case w.BODY:case w.CAPTION:case w.COL:case w.COLGROUP:case w.HTML:case w.TD:case w.TH:case w.TR:break;default:tt(e,t)}}function ut(e,t){switch(t.tagID){case w.TH:case w.TD:e.openElements.clearBackToTableRowContext(),e._insertElement(t,g.HTML),e.insertionMode=be.IN_CELL,e.activeFormattingElements.insertMarker();break;case w.CAPTION:case w.COL:case w.COLGROUP:case w.TBODY:case w.TFOOT:case w.THEAD:case w.TR:e.openElements.hasInTableScope(w.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=be.IN_TABLE_BODY,ct(e,t));break;default:et(e,t)}}function pt(e,t){switch(t.tagID){case w.TR:e.openElements.hasInTableScope(w.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=be.IN_TABLE_BODY);break;case w.TABLE:e.openElements.hasInTableScope(w.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=be.IN_TABLE_BODY,ht(e,t));break;case w.TBODY:case w.TFOOT:case w.THEAD:(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(w.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=be.IN_TABLE_BODY,ht(e,t));break;case w.BODY:case w.CAPTION:case w.COL:case w.COLGROUP:case w.HTML:case w.TD:case w.TH:break;default:tt(e,t)}}function dt(e,t){switch(t.tagID){case w.HTML:Ke(e,t);break;case w.OPTION:e.openElements.currentTagId===w.OPTION&&e.openElements.pop(),e._insertElement(t,g.HTML);break;case w.OPTGROUP:e.openElements.currentTagId===w.OPTION&&e.openElements.pop(),e.openElements.currentTagId===w.OPTGROUP&&e.openElements.pop(),e._insertElement(t,g.HTML);break;case w.INPUT:case w.KEYGEN:case w.TEXTAREA:case w.SELECT:e.openElements.hasInSelectScope(w.SELECT)&&(e.openElements.popUntilTagNamePopped(w.SELECT),e._resetInsertionMode(),t.tagID!==w.SELECT&&e._processStartTag(t));break;case w.SCRIPT:case w.TEMPLATE:Fe(e,t)}}function ft(e,t){switch(t.tagID){case w.OPTGROUP:e.openElements.stackTop>0&&e.openElements.currentTagId===w.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===w.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===w.OPTGROUP&&e.openElements.pop();break;case w.OPTION:e.openElements.currentTagId===w.OPTION&&e.openElements.pop();break;case w.SELECT:e.openElements.hasInSelectScope(w.SELECT)&&(e.openElements.popUntilTagNamePopped(w.SELECT),e._resetInsertionMode());break;case w.TEMPLATE:je(e,t)}}function yt(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(w.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):Oe(e,t)}function mt(e,t){var i;if(t.tagID===w.HTML){if(e.fragmentContext||(e.insertionMode=be.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===w.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(null===(i=e.treeAdapter.getNodeSourceCodeLocation(r))||void 0===i?void 0:i.endTag)&&e._setEndLocation(r,t)}}else gt(e,t)}function gt(e,t){e.insertionMode=be.IN_BODY,Ve(e,t)}function vt(e,t){e.insertionMode=be.IN_BODY,Ve(e,t)}function _t(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==g.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}return b.AREA,b.BASE,b.BASEFONT,b.BGSOUND,b.BR,b.COL,b.EMBED,b.FRAME,b.HR,b.IMG,b.INPUT,b.KEYGEN,b.LINK,b.META,b.PARAM,b.SOURCE,b.TRACK,b.WBR,e.parse=function(e,t){return Se.parse(e,t)},e.parseFragment=function(e,t,i){"string"==typeof e&&(i=t,t=e,e=null);const r=Se.getFragmentParser(e,i);return r.tokenizer.write(t,!0),r.getFragment()},Object.defineProperty(e,"__esModule",{value:!0}),e}({}),$=B.parse,H=B.parseFragment,q=new WeakMap;function W(e,t){const i=$(t.trim(),Y(e));return i.documentElement=i.firstElementChild,i.head=i.documentElement.firstElementChild,i.body=i.head.nextElementSibling,i}function K(e,t){return t="string"==typeof t?t.trim():"",H(t,Y(e))}function Y(e){let t=q.get(e);if(null!=t)return t;const i={createDocument(){const t=e.createElement("#document");return t["x-mode"]="no-quirks",t},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation:e=>e.sourceCodeLocation,createDocumentFragment:()=>e.createDocumentFragment(),createElement(t,i,r){const n=e.createElementNS(i,t);for(let e=0;e<r.length;e++){const t=r[e];null==t.namespace||"http://www.w3.org/1999/xhtml"===t.namespace?n.setAttribute(t.name,t.value):n.setAttributeNS(t.namespace,t.name,t.value)}return n},createCommentNode:t=>e.createComment(t),appendChild(e,t){e.appendChild(t)},insertBefore(e,t,i){e.insertBefore(t,i)},setTemplateContent(e,t){e.content=t},getTemplateContent:e=>e.content,setDocumentType(t,i,r,n){let s=t.childNodes.find((e=>10===e.nodeType));null==s&&(s=e.createDocumentTypeNode(),t.insertBefore(s,t.firstChild)),s.nodeValue="!DOCTYPE",s["x-name"]=i,s["x-publicId"]=r,s["x-systemId"]=n},setDocumentMode(e,t){e["x-mode"]=t},getDocumentMode:e=>e["x-mode"],detachNode(e){e.remove()},insertText(t,i){const r=t.lastChild;null!=r&&3===r.nodeType?r.nodeValue+=i:t.appendChild(e.createTextNode(i))},insertTextBefore(t,i,r){const n=t.childNodes[t.childNodes.indexOf(r)-1];null!=n&&3===n.nodeType?n.nodeValue+=i:t.insertBefore(e.createTextNode(i),r)},adoptAttributes(e,t){for(let i=0;i<t.length;i++){const r=t[i];!1===e.hasAttributeNS(r.namespace,r.name)&&e.setAttributeNS(r.namespace,r.name,r.value)}},getFirstChild:e=>e.childNodes[0],getChildNodes:e=>e.childNodes,getParentNode:e=>e.parentNode,getAttrList:e=>e.attributes.__items.map((e=>({name:e.name,value:e.value,namespace:e.namespaceURI,prefix:null}))),getTagName:e=>"http://www.w3.org/1999/xhtml"===e.namespaceURI?e.nodeName.toLowerCase():e.nodeName,getNamespaceURI:e=>e.namespaceURI,getTextNodeContent:e=>e.nodeValue,getCommentNodeContent:e=>e.nodeValue,getDocumentTypeNodeName:e=>e["x-name"],getDocumentTypeNodePublicId:e=>e["x-publicId"],getDocumentTypeNodeSystemId:e=>e["x-systemId"],isTextNode:e=>3===e.nodeType,isCommentNode:e=>8===e.nodeType,isDocumentTypeNode:e=>10===e.nodeType,isElementNode:e=>1===e.nodeType};return t={treeAdapter:i},q.set(e,t),t}var J=function(e,t){if(!e.document)throw new Error("jQuery requires a window with a document");var i=[],r=Object.getPrototypeOf,n=i.slice,s=i.flat?function(e){return i.flat.call(e)}:function(e){return i.concat.apply([],e)},o=i.push,a=i.indexOf,l={},c=l.toString,h=l.hasOwnProperty,u=h.toString,p=u.call(Object),d={};function f(e){var t=!!e&&e.length,i=function(e){return null==e?e+"":"object"==typeof e?l[c.call(e)]||"object":typeof e}(e);return"function"!=typeof e&&!function(e){return null!=e&&e===e.window}(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}var y=e.document,m={type:!0,src:!0,nonce:!0,noModule:!0};const g={};var v="4.0.0-pre+9352011a7.dirty +selector",_=/HTML$/i;function b(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}g.fn=g.prototype={jquery:v,constructor:g,length:0,toArray:function(){return n.call(this)},get:function(e){return null==e?n.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=g.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return g.each(this,e)},map:function(e){return this.pushStack(g.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return this.pushStack(n.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(g.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(g.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()}},g.extend=g.fn.extend=function(){var e,t,i,r,n,s,o=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[a]||{},a++),"object"!=typeof o&&"function"!=typeof o&&(o={}),a===l&&(o=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)r=e[t],"__proto__"!==t&&o!==r&&(c&&r&&(g.isPlainObject(r)||(n=Array.isArray(r)))?(i=o[t],s=n&&!Array.isArray(i)?[]:n||g.isPlainObject(i)?i:{},n=!1,o[t]=g.extend(c,s,r)):void 0!==r&&(o[t]=r));return o},g.extend({expando:"jQuery"+(v+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==c.call(e)||(t=r(e))&&("function"!=typeof(i=h.call(t,"constructor")&&t.constructor)||u.call(i)!==p))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,i){!function(e,t,i){var r,n=(i=i||y).createElement("script");if(n.text=e,t)for(r in m)t[r]&&(n[r]=t[r]);i.head.appendChild(n).parentNode.removeChild(n)}(e,{nonce:t&&t.nonce},i)},each:function(e,t){var i,r=0;if(f(e))for(i=e.length;r<i&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,i="",r=0,n=e.nodeType;if(!n)for(;t=e[r++];)i+=g.text(t);return 1===n||11===n?e.textContent:9===n?e.documentElement.textContent:3===n||4===n?e.nodeValue:i},makeArray:function(e,t){var i=t||[];return null!=e&&(f(Object(e))?g.merge(i,"string"==typeof e?[e]:e):o.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:a.call(t,e,i)},isXMLDoc:function(e){var t=e&&e.namespaceURI,i=e&&(e.ownerDocument||e).documentElement;return!_.test(t||i&&i.nodeName||"HTML")},contains:function(e,t){var i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(e.contains?e.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))},merge:function(e,t){for(var i=+t.length,r=0,n=e.length;r<i;r++)e[n++]=t[r];return e.length=n,e},grep:function(e,t,i){for(var r=[],n=0,s=e.length,o=!i;n<s;n++)!t(e[n],n)!==o&&r.push(e[n]);return r},map:function(e,t,i){var r,n,o=0,a=[];if(f(e))for(r=e.length;o<r;o++)null!=(n=t(e[o],o,i))&&a.push(n);else for(o in e)null!=(n=t(e[o],o,i))&&a.push(n);return s(a)},guid:1,support:d}),"function"==typeof Symbol&&(g.fn[Symbol.iterator]=i[Symbol.iterator]),g.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){l["[object "+t+"]"]=t.toLowerCase()}));var w=i.pop,M="[\\x20\\t\\r\\n\\f]",T=y.documentMode;try{y.querySelector(":has(*,:jqfake)"),d.cssHas=!1}catch(e){d.cssHas=!0}var S=[];T&&S.push(":enabled",":disabled","\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")"),d.cssHas||S.push(":has"),S=S.length&&new RegExp(S.join("|"));var A=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),E="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",x=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),I=(new RegExp(M+"|>"),/[+~]/),C=y.documentElement,k=C.matches||C.msMatchesSelector;function N(){var e=[];return function t(i,r){return e.push(i+" ")>g.expr.cacheLength&&delete t[e.shift()],t[i+" "]=r}}function L(e){return e&&void 0!==e.getElementsByTagName&&e}var O="\\["+M+"*("+E+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+E+"))|)"+M+"*\\]",R=":("+E+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",P={ID:new RegExp("^#("+E+")"),CLASS:new RegExp("^\\.("+E+")"),TAG:new RegExp("^("+E+"|[*])"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i")},D=new RegExp(R),F=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),j=function(e,t){var i="0x"+e.slice(1)-65536;return t||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))};function Z(e){return e.replace(F,j)}function z(e){g.error("Syntax error, unrecognized expression: "+e)}var U=new RegExp("^"+M+"*,"+M+"*"),V=N();function G(e,t){var i,r,n,s,o,a,l,c=V[e+" "];if(c)return t?0:c.slice(0);for(o=e,a=[],l=g.expr.preFilter;o;){for(s in i&&!(r=U.exec(o))||(r&&(o=o.slice(r[0].length)||o),a.push(n=[])),i=!1,(r=x.exec(o))&&(i=r.shift(),n.push({value:i,type:r[0].replace(A," ")}),o=o.slice(i.length)),P)!(r=g.expr.match[s].exec(o))||l[s]&&!(r=l[s](r))||(i=r.shift(),n.push({value:i,type:s,matches:r}),o=o.slice(i.length));if(!i)break}return t?o.length:o?z(e):V(e,a).slice(0)}var B={ATTR:function(e){return e[1]=Z(e[1]),e[3]=Z(e[3]||e[4]||e[5]||""),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||z(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&z(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return P.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&D.test(i)&&(t=G(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}};function $(e){for(var t=0,i=e.length,r="";t<i;t++)r+=e[t].value;return r}var H=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function q(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}g.escapeSelector=function(e){return(e+"").replace(H,q)};var W,K=i.sort,Y=i.splice;function J(e,t){if(e===t)return W=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)?e==y||e.ownerDocument==y&&g.contains(y,e)?-1:t==y||t.ownerDocument==y&&g.contains(y,t)?1:0:4&i?-1:1)}g.uniqueSort=function(e){var t,i=[],r=0,n=0;if(W=!1,K.call(e,J),W){for(;t=e[n++];)t===e[n]&&(r=i.push(n));for(;r--;)Y.call(e,i[r],1)}return e},g.fn.uniqueSort=function(){return this.pushStack(g.uniqueSort(n.apply(this)))};var X,Q,ee,te,ie,re=0,ne=0,se=N(),oe=N(),ae=N(),le=new RegExp(M+"+","g"),ce=new RegExp("^"+E+"$"),he=g.extend({bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},P),ue=/^(?:input|select|textarea|button)$/i,pe=/^h\d$/i,de=function(){we()},fe=Te((function(e){return!0===e.disabled&&b(e,"fieldset")}),{dir:"parentNode",next:"legend"});function ye(e,t,i,r){t&&t.ownerDocument;var n=t?t.nodeType:9;return i=i||[],"string"!=typeof e||!e||1!==n&&9!==n&&11!==n?i:Ce(e.replace(A,"$1"),t,i,r)}function me(e){return e[g.expando]=!0,e}function ge(e){return function(t){return b(t,"input")&&t.type===e}}function ve(e){return function(t){return(b(t,"input")||b(t,"button"))&&t.type===e}}function _e(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&fe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function be(e){return me((function(t){return t=+t,me((function(i,r){for(var n,s=e([],i.length,t),o=s.length;o--;)i[n=s[o]]&&(i[n]=!(r[n]=i[n]))}))}))}function we(e){var t,i=e?e.ownerDocument||e:y;i!=ee&&9===i.nodeType&&(te=(ee=i).documentElement,ie=!g.isXMLDoc(ee),T&&y!=ee&&(t=ee.defaultView)&&t.top!==t&&t.addEventListener("unload",de))}for(X in ye.matches=function(e,t){return ye(e,null,null,t)},ye.matchesSelector=function(e,t){if(we(e),ie&&!ae[t+" "]&&(!S||!S.test(t)))try{return k.call(e,t)}catch(e){ae(t,!0)}return ye(t,ee,null,[e]).length>0},g.expr={cacheLength:50,createPseudo:me,match:he,find:{ID:function(e,t){if(void 0!==t.getElementById&&ie){var i=t.getElementById(e);return i?[i]:[]}},TAG:function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},CLASS:function(e,t){if(void 0!==t.getElementsByClassName&&ie)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:B,filter:{ID:function(e){var t=Z(e);return function(e){return e.getAttribute("id")===t}},TAG:function(e){var t=Z(e).toLowerCase();return"*"===e?function(){return!0}:function(e){return b(e,t)}},CLASS:function(e){var t=se[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&se(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,i){return function(r){var n=r.getAttribute(e);return null==n?"!="===t:!t||(n+="","="===t?n===i:"!="===t?n!==i:"^="===t?i&&0===n.indexOf(i):"*="===t?i&&n.indexOf(i)>-1:"$="===t?i&&n.slice(-i.length)===i:"~="===t?(" "+n.replace(le," ")+" ").indexOf(i)>-1:"|="===t&&(n===i||n.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,r,n){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===n?function(e){return!!e.parentNode}:function(t,i,l){var c,h,u,p,d,f=s!==o?"nextSibling":"previousSibling",y=t.parentNode,m=a&&t.nodeName.toLowerCase(),v=!l&&!a,_=!1;if(y){if(s){for(;f;){for(u=t;u=u[f];)if(a?b(u,m):1===u.nodeType)return!1;d=f="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?y.firstChild:y.lastChild],o&&v){for(_=(p=(c=(h=y[g.expando]||(y[g.expando]={}))[e]||[])[0]===re&&c[1])&&c[2],u=p&&y.childNodes[p];u=++p&&u&&u[f]||(_=p=0)||d.pop();)if(1===u.nodeType&&++_&&u===t){h[e]=[re,p,_];break}}else if(v&&(_=p=(c=(h=t[g.expando]||(t[g.expando]={}))[e]||[])[0]===re&&c[1]),!1===_)for(;(u=++p&&u&&u[f]||(_=p=0)||d.pop())&&(!(a?b(u,m):1===u.nodeType)||!++_||(v&&((h=u[g.expando]||(u[g.expando]={}))[e]=[re,_]),u!==t)););return(_-=n)===r||_%r==0&&_/r>=0}}},PSEUDO:function(e,t){var i=g.expr.pseudos[e]||g.expr.setFilters[e.toLowerCase()]||z("unsupported pseudo: "+e);return i[g.expando]?i(t):i}},pseudos:{not:me((function(e){var t=[],i=[],r=Ie(e.replace(A,"$1"));return r[g.expando]?me((function(e,t,i,n){for(var s,o=r(e,null,n,[]),a=e.length;a--;)(s=o[a])&&(e[a]=!(t[a]=s))})):function(e,n,s){return t[0]=e,r(t,null,s,i),t[0]=null,!i.pop()}})),has:me((function(e){return function(t){return ye(e,t).length>0}})),contains:me((function(e){return e=Z(e),function(t){return(t.textContent||g.text(t)).indexOf(e)>-1}})),lang:me((function(e){return ce.test(e||"")||z("unsupported lang: "+e),e=Z(e).toLowerCase(),function(t){var i;do{if(i=ie?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===te},focus:function(e){return e===ee.activeElement&&ee.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:_e(!1),disabled:_e(!0),checked:function(e){return b(e,"input")&&!!e.checked||b(e,"option")&&!!e.selected},selected:function(e){return T&&e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!g.expr.pseudos.empty(e)},header:function(e){return pe.test(e.nodeName)},input:function(e){return ue.test(e.nodeName)},button:function(e){return b(e,"input")&&"button"===e.type||b(e,"button")},text:function(e){return b(e,"input")&&"text"===e.type},first:be((function(){return[0]})),last:be((function(e,t){return[t-1]})),eq:be((function(e,t,i){return[i<0?i+t:i]})),even:be((function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e})),odd:be((function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e})),lt:be((function(e,t,i){var r;for(r=i<0?i+t:i>t?t:i;--r>=0;)e.push(r);return e})),gt:be((function(e,t,i){for(var r=i<0?i+t:i;++r<t;)e.push(r);return e}))}},g.expr.pseudos.nth=g.expr.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})g.expr.pseudos[X]=ge(X);for(X in{submit:!0,reset:!0})g.expr.pseudos[X]=ve(X);function Me(){}function Te(e,t,i){var r=t.dir,n=t.next,s=n||r,o=i&&"parentNode"===s,a=ne++;return t.first?function(t,i,n){for(;t=t[r];)if(1===t.nodeType||o)return e(t,i,n);return!1}:function(t,i,l){var c,h,u=[re,a];if(l){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,i,l))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(h=t[g.expando]||(t[g.expando]={}),n&&b(t,n))t=t[r]||t;else{if((c=h[s])&&c[0]===re&&c[1]===a)return u[2]=c[2];if(h[s]=u,u[2]=e(t,i,l))return!0}return!1}}function Se(e){return e.length>1?function(t,i,r){for(var n=e.length;n--;)if(!e[n](t,i,r))return!1;return!0}:e[0]}function Ae(e,t,i,r,n){for(var s,o=[],a=0,l=e.length,c=null!=t;a<l;a++)(s=e[a])&&(i&&!i(s,r,n)||(o.push(s),c&&t.push(a)));return o}function Ee(e,t,i,r,n,s){return r&&!r[g.expando]&&(r=Ee(r)),n&&!n[g.expando]&&(n=Ee(n,s)),me((function(s,l,c,h){var u,p,d,f,y=[],m=[],g=l.length,v=s||function(e,t,i){for(var r=0,n=t.length;r<n;r++)ye(e,t[r],i);return i}(t||"*",c.nodeType?[c]:c,[]),_=!e||!s&&t?v:Ae(v,y,e,c,h);if(i?i(_,f=n||(s?e:g||r)?[]:l,c,h):f=_,r)for(u=Ae(f,m),r(u,[],c,h),p=u.length;p--;)(d=u[p])&&(f[m[p]]=!(_[m[p]]=d));if(s){if(n||e){if(n){for(u=[],p=f.length;p--;)(d=f[p])&&u.push(_[p]=d);n(null,f=[],u,h)}for(p=f.length;p--;)(d=f[p])&&(u=n?a.call(s,d):y[p])>-1&&(s[u]=!(l[u]=d))}}else f=Ae(f===l?f.splice(g,f.length):f),n?n(null,l,f,h):o.apply(l,f)}))}function xe(e){for(var t,i,r,n=e.length,s=g.expr.relative[e[0].type],o=s||g.expr.relative[" "],l=s?1:0,c=Te((function(e){return e===t}),o,!0),h=Te((function(e){return a.call(t,e)>-1}),o,!0),u=[function(e,i,r){var n=!s&&(r||i!=Q)||((t=i).nodeType?c(e,i,r):h(e,i,r));return t=null,n}];l<n;l++)if(i=g.expr.relative[e[l].type])u=[Te(Se(u),i)];else{if((i=g.expr.filter[e[l].type].apply(null,e[l].matches))[g.expando]){for(r=++l;r<n&&!g.expr.relative[e[r].type];r++);return Ee(l>1&&Se(u),l>1&&$(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(A,"$1"),i,l<r&&xe(e.slice(l,r)),r<n&&xe(e=e.slice(r)),r<n&&$(e))}u.push(i)}return Se(u)}function Ie(e,t){var i,r=[],n=[],s=oe[e+" "];if(!s){for(t||(t=G(e)),i=t.length;i--;)(s=xe(t[i]))[g.expando]?r.push(s):n.push(s);(s=oe(e,function(e,t){var i=t.length>0,r=e.length>0,n=function(n,s,a,l,c){var h,u,p,d=0,f="0",y=n&&[],m=[],v=Q,_=n||r&&g.expr.find.TAG("*",c),b=re+=null==v?1:Math.random()||.1;for(c&&(Q=s==ee||s||c);null!=(h=_[f]);f++){if(r&&h){for(u=0,s||h.ownerDocument==ee||(we(h),a=!ie);p=e[u++];)if(p(h,s||ee,a)){o.call(l,h);break}c&&(re=b)}i&&((h=!p&&h)&&d--,n&&y.push(h))}if(d+=f,i&&f!==d){for(u=0;p=t[u++];)p(y,m,s,a);if(n){if(d>0)for(;f--;)y[f]||m[f]||(m[f]=w.call(l));m=Ae(m)}o.apply(l,m),c&&!n&&m.length>0&&d+t.length>1&&g.uniqueSort(l)}return c&&(re=b,Q=v),y};return i?me(n):n}(n,r))).selector=e}return s}function Ce(e,t,i,r){var n,s,a,l,c,h="function"==typeof e&&e,u=!r&&G(e=h.selector||e);if(i=i||[],1===u.length){if((s=u[0]=u[0].slice(0)).length>2&&"ID"===(a=s[0]).type&&9===t.nodeType&&ie&&g.expr.relative[s[1].type]){if(!(t=(g.expr.find.ID(Z(a.matches[0]),t)||[])[0]))return i;h&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(n=he.needsContext.test(e)?0:s.length;n--&&(a=s[n],!g.expr.relative[l=a.type]);)if((c=g.expr.find[l])&&(r=c(Z(a.matches[0]),I.test(s[0].type)&&L(t.parentNode)||t))){if(s.splice(n,1),!(e=r.length&&$(s)))return o.apply(i,r),i;break}}return(h||Ie(e,u))(r,t,!ie,i,!t||I.test(e)&&L(t.parentNode)||t),i}return Me.prototype=g.expr.filters=g.expr.pseudos,g.expr.setFilters=new Me,we(),g.find=ye,ye.compile=Ie,ye.select=Ce,ye.setDocument=we,ye.tokenize=G,g}({document:{createElement:()=>({}),nodeType:9,documentElement:{nodeType:1,nodeName:"HTML"}}}),X=[":scope",":where",":is"];function Q(e,t){const i=X.filter((t=>e.includes(t)));var r;i.length>0&&t.message&&(t.message=`At present jQuery does not support the ${r=i,r.length<=1?r.join(""):`${r.slice(0,r.length-1).join(", ")} and ${r[r.length-1]}`} ${1===i.length?"selector":"selectors"}.\nIf you need this in your test, consider writing an end-to-end test instead.\n`+t.message)}function ee(e,t={}){const i={currentLineWidth:0,indent:0,isWithinBody:!1,text:[]};if(t.prettyHtml?("number"!=typeof t.indentSpaces&&(t.indentSpaces=2),"boolean"!=typeof t.newLines&&(t.newLines=!0),t.approximateLineWidth=-1):(t.prettyHtml=!1,"boolean"!=typeof t.newLines&&(t.newLines=!1),"number"!=typeof t.indentSpaces&&(t.indentSpaces=0)),"number"!=typeof t.approximateLineWidth&&(t.approximateLineWidth=-1),"boolean"!=typeof t.removeEmptyAttributes&&(t.removeEmptyAttributes=!0),"boolean"!=typeof t.removeAttributeQuotes&&(t.removeAttributeQuotes=!1),"boolean"!=typeof t.removeBooleanAttributeQuotes&&(t.removeBooleanAttributeQuotes=!1),"boolean"!=typeof t.removeHtmlComments&&(t.removeHtmlComments=!1),"boolean"!=typeof t.serializeShadowRoot&&(t.serializeShadowRoot=!1),t.outerHtml)te(e,t,i,!1);else for(let r=0,n=e.childNodes.length;r<n;r++)te(e.childNodes[r],t,i,!1);return"\n"===i.text[0]&&i.text.shift(),"\n"===i.text[i.text.length-1]&&i.text.pop(),i.text.join("")}function te(e,t,i,r){var n,h,u,p,d,y,m,g,v,_,b,w,M,T,S,A,E;if(1===e.nodeType||r){const s=r?"mock:shadow-root":"http://www.w3.org/1999/xhtml"===(E=e).namespaceURI?E.nodeName.toLowerCase():E.nodeName;"body"===s&&(i.isWithinBody=!0);const o=null!=t.excludeTags&&t.excludeTags.includes(s);if(!1===o){const r=!!(t.newLines||(null!=(n=t.indentSpaces)?n:0)>0)&&ce(e);if(t.newLines&&!r&&(i.text.push("\n"),i.currentLineWidth=0),(null!=(h=t.indentSpaces)?h:0)>0&&!r){for(let e=0;e<i.indent;e++)i.text.push(" ");i.currentLineWidth+=i.indent}i.text.push("<"+s),i.currentLineWidth+=s.length+1;const o=e.attributes.length,a=t.prettyHtml&&o>1?f(e.attributes,!0):e.attributes;for(let e=0;e<o;e++){const r=a.item(e),n=r.name;if("style"===n)continue;let s=r.value;if(t.removeEmptyAttributes&&""===s&&de.has(n))continue;const o=r.namespaceURI;if(null==o?(i.currentLineWidth+=n.length+1,t.approximateLineWidth&&t.approximateLineWidth>0&&i.currentLineWidth>t.approximateLineWidth?(i.text.push("\n"+n),i.currentLineWidth=0):i.text.push(" "+n)):"http://www.w3.org/XML/1998/namespace"===o?(i.text.push(" xml:"+n),i.currentLineWidth+=n.length+5):"http://www.w3.org/2000/xmlns/"===o?"xmlns"!==n?(i.text.push(" xmlns:"+n),i.currentLineWidth+=n.length+7):(i.text.push(" "+n),i.currentLineWidth+=n.length+1):o===c?(i.text.push(" xlink:"+n),i.currentLineWidth+=n.length+7):(i.text.push(" "+o+":"+n),i.currentLineWidth+=o.length+n.length+2),t.prettyHtml&&"class"===n&&(s=r.value=s.split(" ").filter((e=>""!==e)).sort().join(" ").trim()),""===s){if(t.removeBooleanAttributeQuotes&&fe.has(n))continue;if(t.removeEmptyAttributes&&n.startsWith("data-"))continue}t.removeAttributeQuotes&&ae.test(s)?(i.text.push("="+le(s,!0)),i.currentLineWidth+=s.length+1):(i.text.push('="'+le(s,!0)+'"'),i.currentLineWidth+=s.length+3)}if(e.hasAttribute("style")){const r=e.style.cssText;t.approximateLineWidth&&t.approximateLineWidth>0&&i.currentLineWidth+r.length+10>t.approximateLineWidth?(i.text.push(`\nstyle="${r}">`),i.currentLineWidth=0):(i.text.push(` style="${r}">`),i.currentLineWidth+=r.length+10)}else i.text.push(">"),i.currentLineWidth+=1}if(!1===pe.has(s)){if(t.serializeShadowRoot&&null!=e.shadowRoot&&(i.indent=i.indent+(null!=(u=t.indentSpaces)?u:0),te(e.shadowRoot,t,i,!0),i.indent=i.indent-(null!=(p=t.indentSpaces)?p:0),t.newLines&&(0===e.childNodes.length||1===e.childNodes.length&&3===e.childNodes[0].nodeType&&""===(null==(d=e.childNodes[0].nodeValue)?void 0:d.trim())))){i.text.push("\n"),i.currentLineWidth=0;for(let e=0;e<i.indent;e++)i.text.push(" ");i.currentLineWidth+=i.indent}if(null==t.excludeTagContent||!1===t.excludeTagContent.includes(s)){const r="template"===s?e.content.childNodes:e.childNodes,n=r.length;if(n>0&&(1!==n||3!==r[0].nodeType||"string"==typeof r[0].nodeValue&&""!==r[0].nodeValue.trim())){const s=!!(t.newLines||(null!=(y=t.indentSpaces)?y:0)>0)&&ce(e);!s&&(null!=(m=t.indentSpaces)?m:0)>0&&!1===o&&(i.indent=i.indent+(null!=(g=t.indentSpaces)?g:0));for(let e=0;e<n;e++)te(r[e],t,i,!1);if(!1===o&&(t.newLines&&!s&&(i.text.push("\n"),i.currentLineWidth=0),(null!=(v=t.indentSpaces)?v:0)>0&&!s)){i.indent=i.indent-(null!=(_=t.indentSpaces)?_:0);for(let e=0;e<i.indent;e++)i.text.push(" ");i.currentLineWidth+=i.indent}}!1===o&&(i.text.push("</"+s+">"),i.currentLineWidth+=s.length+3)}}(null!=(b=t.approximateLineWidth)?b:0)>0&&ye.has(s)&&(i.text.push("\n"),i.currentLineWidth=0),"body"===s&&(i.isWithinBody=!1)}else if(3===e.nodeType){let r=e.nodeValue;if("string"==typeof r){const n=r.trim();if(""===n)ce(e)?(i.text.push(r),i.currentLineWidth+=r.length):(null!=(w=t.approximateLineWidth)?w:0)>0&&!i.isWithinBody||t.prettyHtml||(i.currentLineWidth+=1,t.approximateLineWidth&&t.approximateLineWidth>0&&i.currentLineWidth>t.approximateLineWidth?(i.text.push("\n"),i.currentLineWidth=0):i.text.push(" "));else{const s=!!(t.newLines||(null!=(M=t.indentSpaces)?M:0)>0||t.prettyHtml)&&ce(e);if(t.newLines&&!s&&(i.text.push("\n"),i.currentLineWidth=0),(null!=(T=t.indentSpaces)?T:0)>0&&!s){for(let e=0;e<i.indent;e++)i.text.push(" ");i.currentLineWidth+=i.indent}let o=r.length;if(o>0){const a=null!=e.parentNode&&1===e.parentNode.nodeType?e.parentNode.nodeName:null;"string"==typeof a&&he.has(a)?(ce(e)?i.text.push(r):(i.text.push(n),o=n.length),i.currentLineWidth+=o):t.prettyHtml&&!s?(i.text.push(le(r.replace(/\s\s+/g," ").trim(),!1)),i.currentLineWidth+=o):(ce(e)||(/\s/.test(r.charAt(0))&&(r=" "+r.trimLeft()),o=r.length,o>1&&/\s/.test(r.charAt(o-1))&&(t.approximateLineWidth&&t.approximateLineWidth>0&&i.currentLineWidth+o>t.approximateLineWidth?(r=r.trimRight()+"\n",i.currentLineWidth=0):r=r.trimRight()+" ")),i.currentLineWidth+=o,i.text.push(le(r,!1)))}}}}else if(8===e.nodeType){const r=e.nodeValue;if(t.removeHtmlComments&&!((null==r?void 0:r.startsWith(s+"."))||(null==r?void 0:r.startsWith(o+"."))||(null==r?void 0:r.startsWith(a+"."))||(null==r?void 0:r.startsWith(l+"."))))return;const n=!!(t.newLines||(null!=(S=t.indentSpaces)?S:0)>0)&&ce(e);if(t.newLines&&!n&&(i.text.push("\n"),i.currentLineWidth=0),(null!=(A=t.indentSpaces)?A:0)>0&&!n){for(let e=0;e<i.indent;e++)i.text.push(" ");i.currentLineWidth+=i.indent}i.text.push("\x3c!--"+r+"--\x3e"),i.currentLineWidth+=r.length+7}else 10===e.nodeType&&i.text.push("<!doctype html>")}var ie=/&/g,re=/\u00a0/g,ne=/"/g,se=/</g,oe=/>/g,ae=/^[^ \t\n\f\r"'`=<>\/\\-]+$/;function le(e,t){return e=e.replace(ie,"&amp;").replace(re,"&nbsp;"),t?e.replace(ne,"&quot;"):e.replace(se,"&lt;").replace(oe,"&gt;")}function ce(e){let t=e;for(;null!=t;){if(ue.has(t.nodeName))return!0;t=t.parentNode}return!1}var he=new Set(["STYLE","SCRIPT","IFRAME","NOSCRIPT","XMP","NOEMBED","NOFRAMES","PLAINTEXT"]),ue=new Set(["CODE","OUTPUT","PLAINTEXT","PRE","SCRIPT","TEMPLATE","TEXTAREA"]),pe=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","meta","param","source","trace","wbr"]),de=new Set(["class","dir","id","lang","name","title"]),fe=new Set(["allowfullscreen","async","autofocus","autoplay","checked","compact","controls","declare","default","defaultchecked","defaultmuted","defaultselected","defer","disabled","enabled","formnovalidate","hidden","indeterminate","inert","ismap","itemscope","loop","multiple","muted","nohref","nomodule","noresize","noshade","novalidate","nowrap","open","pauseonexit","readonly","required","reversed","scoped","seamless","selected","sortable","truespeed","typemustmatch","visible"]),ye=new Set(["html","body","head","iframe","meta","link","base","title","script","style"]),me=class{constructor(e,t,i,r){this.ownerDocument=e,this.nodeType=t,this.nodeName=i,this._nodeValue=r,this.parentNode=null,this.childNodes=[]}appendChild(e){if(11===e.nodeType){const t=e.childNodes.slice();for(const e of t)this.appendChild(e)}else e.remove(),e.parentNode=this,this.childNodes.push(e),C(this.ownerDocument,e);return e}append(...e){e.forEach((e=>{const t="object"==typeof e&&null!==e&&"nodeType"in e;this.appendChild(t?e:this.ownerDocument.createTextNode(String(e)))}))}prepend(...e){const t=this.firstChild;e.forEach((e=>{const i="object"==typeof e&&null!==e&&"nodeType"in e;t&&this.insertBefore(i?e:this.ownerDocument.createTextNode(String(e)),t)}))}cloneNode(e){throw new Error(`invalid node type to clone: ${this.nodeType}, deep: ${e}`)}compareDocumentPosition(e){return-1}get firstChild(){return this.childNodes[0]||null}insertBefore(e,t){if(11===e.nodeType)for(let i=0,r=e.childNodes.length;i<r;i++)Me(this,e.childNodes[i],t);else Me(this,e,t);return e}get isConnected(){let e=this;for(;null!=e;){if(9===e.nodeType)return!0;e=e.parentNode,null!=e&&11===e.nodeType&&(e=e.host)}return!1}isSameNode(e){return this===e}get lastChild(){return this.childNodes[this.childNodes.length-1]||null}get nextSibling(){if(null!=this.parentNode){const e=this.parentNode.childNodes.indexOf(this)+1;return this.parentNode.childNodes[e]||null}return null}get nodeValue(){var e;return null!=(e=this._nodeValue)?e:""}set nodeValue(e){this._nodeValue=e}get parentElement(){return this.parentNode||null}set parentElement(e){this.parentNode=e}get previousSibling(){if(null!=this.parentNode){const e=this.parentNode.childNodes.indexOf(this)-1;return this.parentNode.childNodes[e]||null}return null}contains(e){if(e===this)return!0;const t=Array.from(this.childNodes);return!!t.includes(e)||t.some((t=>this.contains.bind(t)(e)))}removeChild(e){const t=this.childNodes.indexOf(e);if(!(t>-1))throw new Error("node not found within childNodes during removeChild");if(this.childNodes.splice(t,1),1===this.nodeType){const t=this.isConnected;e.parentNode=null,!0===t&&N(e)}else e.parentNode=null;return e}remove(){null!=this.parentNode&&this.parentNode.removeChild(this)}replaceChild(e,t){return t.parentNode===this?(this.insertBefore(e,t),t.remove(),e):null}get textContent(){var e;return null!=(e=this._nodeValue)?e:""}set textContent(e){this._nodeValue=String(e)}};me.ELEMENT_NODE=1,me.TEXT_NODE=3,me.PROCESSING_INSTRUCTION_NODE=7,me.COMMENT_NODE=8,me.DOCUMENT_NODE=9,me.DOCUMENT_TYPE_NODE=10,me.DOCUMENT_FRAGMENT_NODE=11;var ge=class{constructor(e,t,i){this.ownerDocument=e,this.childNodes=t,this.length=i}},ve=class extends me{attachInternals(){return new Proxy({},{get:function(e,t,i){console.error(`NOTE: Property ${String(t)} was accessed on ElementInternals, but this property is not implemented.\nTesting components with ElementInternals is fully supported in e2e tests.`)}})}constructor(e,t,i=null){super(e,1,"string"==typeof t?t:null,null),this.__namespaceURI=i,this.__shadowRoot=null,this.__attributeMap=null}addEventListener(e,t){Z(this,e,t)}attachShadow(e){const t=this.ownerDocument.createDocumentFragment();return this.shadowRoot=t,t}blur(){G(this,new F("blur",{relatedTarget:null,bubbles:!0,cancelable:!0,composed:!0}))}get localName(){if(!this.nodeName)throw new Error("Can't compute elements localName without nodeName");return this.nodeName.toLocaleLowerCase()}get namespaceURI(){return this.__namespaceURI}get shadowRoot(){return this.__shadowRoot||null}set shadowRoot(e){null!=e?(e.host=this,this.__shadowRoot=e):delete this.__shadowRoot}get attributes(){if(null==this.__attributeMap){const e=u(!1);return this.__attributeMap=e,e}return this.__attributeMap}set attributes(e){this.__attributeMap=e}get children(){return this.childNodes.filter((e=>1===e.nodeType))}get childElementCount(){return this.childNodes.filter((e=>1===e.nodeType)).length}get className(){return this.getAttributeNS(null,"class")||""}set className(e){this.setAttributeNS(null,"class",e)}get classList(){return new v(this)}click(){G(this,new P("click",{bubbles:!0,cancelable:!0,composed:!0}))}cloneNode(e){return null}closest(e){let t=this;for(;null!=t;){if(t.matches(e))return t;t=t.parentNode}return null}get dataset(){return function(e){const t={},i=e.attributes,r=i.length;for(let e=0;e<r;e++){const r=i.item(e),s=r.nodeName;s.startsWith("data-")&&(t[(n=s,(n=String(n).slice(5)).split("-").map(((e,t)=>0===t?e.charAt(0).toLowerCase()+e.slice(1):e.charAt(0).toUpperCase()+e.slice(1))).join(""))]=r.nodeValue)}var n;return new Proxy(t,{get:(e,i)=>t[i],set(t,i,r){const n="data-"+String(i).replace(/([A-Z0-9])/g,(e=>" "+e[0])).trim().replace(/ /g,"-").toLowerCase();return e.setAttribute(n,r),!0}})}(this)}get dir(){return this.getAttributeNS(null,"dir")||""}set dir(e){this.setAttributeNS(null,"dir",e)}dispatchEvent(e){return G(this,e)}get firstElementChild(){return this.children[0]||null}focus(e){G(this,new F("focus",{relatedTarget:null,bubbles:!0,cancelable:!0,composed:!0}))}getAttribute(e){if("style"===e)return null!=this.__style&&this.__style.length>0?this.style.cssText:null;const t=this.attributes.getNamedItem(e);return null!=t?t.value:null}getAttributeNS(e,t){const i=this.attributes.getNamedItemNS(e,t);return null!=i?i.value:null}getAttributeNode(e){return this.hasAttribute(e)?new m(e,this.getAttribute(e)):null}getBoundingClientRect(){return{bottom:0,height:0,left:0,right:0,top:0,width:0,x:0,y:0}}getRootNode(e){const t=null!=e&&!0===e.composed;let i=this;for(;null!=i.parentNode;)i=i.parentNode,!0===t&&null==i.parentNode&&null!=i.host&&(i=i.host);return i}get draggable(){return"true"===this.getAttributeNS(null,"draggable")}set draggable(e){this.setAttributeNS(null,"draggable",e)}hasChildNodes(){return this.childNodes.length>0}get id(){return this.getAttributeNS(null,"id")||""}set id(e){this.setAttributeNS(null,"id",e)}get innerHTML(){return 0===this.childNodes.length?"":ee(this,{newLines:!1,indentSpaces:0})}set innerHTML(e){var t;if(!0===he.has(null!=(t=this.nodeName)?t:""))Ee(this,e);else{for(let e=this.childNodes.length-1;e>=0;e--)this.removeChild(this.childNodes[e]);if("string"==typeof e){const t=K(this.ownerDocument,e);for(;t.childNodes.length>0;)this.appendChild(t.childNodes[0])}}}get innerText(){const e=[];return Ae(this.childNodes,e),e.join("")}set innerText(e){Ee(this,e)}insertAdjacentElement(e,t){return"beforebegin"===e?Me(this.parentNode,t,this):"afterbegin"===e?this.prepend(t):"beforeend"===e?this.appendChild(t):"afterend"===e&&Me(this.parentNode,t,this.nextSibling),t}insertAdjacentHTML(e,t){const i=K(this.ownerDocument,t);if("beforebegin"===e)for(;i.childNodes.length>0;)Me(this.parentNode,i.childNodes[0],this);else if("afterbegin"===e)for(;i.childNodes.length>0;)this.prepend(i.childNodes[i.childNodes.length-1]);else if("beforeend"===e)for(;i.childNodes.length>0;)this.appendChild(i.childNodes[0]);else if("afterend"===e)for(;i.childNodes.length>0;)Me(this.parentNode,i.childNodes[i.childNodes.length-1],this.nextSibling)}insertAdjacentText(e,t){const i=this.ownerDocument.createTextNode(t);"beforebegin"===e?Me(this.parentNode,i,this):"afterbegin"===e?this.prepend(i):"beforeend"===e?this.appendChild(i):"afterend"===e&&Me(this.parentNode,i,this.nextSibling)}hasAttribute(e){return"style"===e?null!=this.__style&&this.__style.length>0:null!==this.getAttribute(e)}hasAttributeNS(e,t){return null!==this.getAttributeNS(e,t)}get hidden(){return this.hasAttributeNS(null,"hidden")}set hidden(e){!0===e?this.setAttributeNS(null,"hidden",""):this.removeAttributeNS(null,"hidden")}get lang(){return this.getAttributeNS(null,"lang")||""}set lang(e){this.setAttributeNS(null,"lang",e)}get lastElementChild(){const e=this.children;return e[e.length-1]||null}matches(e){return function(e,t){try{return J.find(e,void 0,void 0,[t]).length>0}catch(t){throw Q(e,t),t}}(e,this)}get nextElementSibling(){const e=this.parentElement;if(null!=e&&(1===e.nodeType||11===e.nodeType||9===e.nodeType)){const t=e.children.indexOf(this)+1;return e.children[t]||null}return null}get outerHTML(){return ee(this,{newLines:!1,outerHtml:!0,indentSpaces:0})}get previousElementSibling(){const e=this.parentElement;if(null!=e&&(1===e.nodeType||11===e.nodeType||9===e.nodeType)){const t=e.children.indexOf(this)-1;return e.children[t]||null}return null}getElementsByClassName(e){const t=[];return _e(this,e.trim().split(" ").filter((e=>e.length>0)),t),t}getElementsByTagName(e){const t=[];return be(this,e.toLowerCase(),t),t}querySelector(e){return function(e,t){try{return J.find(e,t,void 0,void 0)[0]||null}catch(t){throw Q(e,t),t}}(e,this)}querySelectorAll(e){return function(e,t){try{return J.find(e,t,void 0,void 0)}catch(t){throw Q(e,t),t}}(e,this)}removeAttribute(e){if("style"===e)delete this.__style;else{const t=this.attributes.getNamedItem(e);null!=t&&(this.attributes.removeNamedItemNS(t),!0===O(this)&&L(this,e,t.value,null))}}removeAttributeNS(e,t){const i=this.attributes.getNamedItemNS(e,t);null!=i&&(this.attributes.removeNamedItemNS(i),!0===O(this)&&L(this,t,i.value,null))}removeEventListener(e,t){z(this,e,t)}setAttribute(e,t){if("style"===e)this.style=t;else{const i=this.attributes;let r=i.getNamedItem(e);const n=O(this);if(null!=r)if(!0===n){const e=r.value;r.value=t,e!==r.value&&L(this,r.name,e,r.value)}else r.value=t;else i.caseInsensitive&&(e=e.toLowerCase()),r=new m(e,t),i.__items.push(r),!0===n&&L(this,e,null,r.value)}}setAttributeNS(e,t,i){const r=this.attributes;let n=r.getNamedItemNS(e,t);const s=O(this);if(null!=n)if(!0===s){const e=n.value;n.value=i,e!==n.value&&L(this,n.name,e,n.value)}else n.value=i;else n=new m(t,i,e),r.__items.push(n),!0===s&&L(this,t,null,n.value)}get style(){return null==this.__style&&(this.__style=M()),this.__style}set style(e){"string"==typeof e?(null==this.__style&&(this.__style=M()),this.__style.cssText=e):this.__style=e}get tabIndex(){return parseInt(this.getAttributeNS(null,"tabindex")||"-1",10)}set tabIndex(e){this.setAttributeNS(null,"tabindex",e)}get tagName(){var e;return null!=(e=this.nodeName)?e:""}set tagName(e){this.nodeName=e}get textContent(){const e=[];return Ae(this.childNodes,e),e.join("")}set textContent(e){Ee(this,e)}get title(){return this.getAttributeNS(null,"title")||""}set title(e){this.setAttributeNS(null,"title",e)}animate(){}onanimationstart(){}onanimationend(){}onanimationiteration(){}onabort(){}onauxclick(){}onbeforecopy(){}onbeforecut(){}onbeforepaste(){}onblur(){}oncancel(){}oncanplay(){}oncanplaythrough(){}onchange(){}onclick(){}onclose(){}oncontextmenu(){}oncopy(){}oncuechange(){}oncut(){}ondblclick(){}ondrag(){}ondragend(){}ondragenter(){}ondragleave(){}ondragover(){}ondragstart(){}ondrop(){}ondurationchange(){}onemptied(){}onended(){}onerror(){}onfocus(){}onfocusin(){}onfocusout(){}onformdata(){}onfullscreenchange(){}onfullscreenerror(){}ongotpointercapture(){}oninput(){}oninvalid(){}onkeydown(){}onkeypress(){}onkeyup(){}onload(){}onloadeddata(){}onloadedmetadata(){}onloadstart(){}onlostpointercapture(){}onmousedown(){}onmouseenter(){}onmouseleave(){}onmousemove(){}onmouseout(){}onmouseover(){}onmouseup(){}onmousewheel(){}onpaste(){}onpause(){}onplay(){}onplaying(){}onpointercancel(){}onpointerdown(){}onpointerenter(){}onpointerleave(){}onpointermove(){}onpointerout(){}onpointerover(){}onpointerup(){}onprogress(){}onratechange(){}onreset(){}onresize(){}onscroll(){}onsearch(){}onseeked(){}onseeking(){}onselect(){}onselectstart(){}onstalled(){}onsubmit(){}onsuspend(){}ontimeupdate(){}ontoggle(){}onvolumechange(){}onwaiting(){}onwebkitfullscreenchange(){}onwebkitfullscreenerror(){}onwheel(){}requestFullscreen(){}scrollBy(){}scrollTo(){}scrollIntoView(){}toString(e){return ee(this,e)}};function _e(e,t,i){const r=e.children;for(let e=0,n=r.length;e<n;e++){const n=r[e];for(let e=0,r=t.length;e<r;e++)n.classList.contains(t[e])&&i.push(n);_e(n,t,i)}}function be(e,t,i){var r;const n=e.children;for(let e=0,s=n.length;e<s;e++){const s=n[e];"*"!==t&&(null!=(r=s.nodeName)?r:"").toLowerCase()!==t||i.push(s),be(s,t,i)}}function we(e){U(e),delete e.__attributeMap,delete e.__shadowRoot,delete e.__style}function Me(e,t,i){if(t!==i){if(t.remove(),t.parentNode=e,t.ownerDocument=e.ownerDocument,null!=i){const r=e.childNodes.indexOf(i);if(!(r>-1))throw new Error("referenceNode not found in parentNode.childNodes");e.childNodes.splice(r,0,t)}else e.childNodes.push(t);C(e.ownerDocument,t)}return t}var Te=class extends ve{constructor(e,t){super(e,"string"==typeof t?t.toUpperCase():null),this.__namespaceURI="http://www.w3.org/1999/xhtml"}get tagName(){var e;return null!=(e=this.nodeName)?e:""}set tagName(e){this.nodeName=e}get parentElement(){return"HTML"===this.nodeName?null:super.parentElement}get attributes(){if(null==this.__attributeMap){const e=u(!0);return this.__attributeMap=e,e}return this.__attributeMap}set attributes(e){this.__attributeMap=e}},Se=class e extends me{constructor(e,t){super(e,3,"#text",t)}cloneNode(t){return new e(null,this.nodeValue)}get textContent(){return this.nodeValue}set textContent(e){this.nodeValue=e}get data(){return this.nodeValue}set data(e){this.nodeValue=e}get wholeText(){if(null!=this.parentNode){const e=[];for(let t=0,i=this.parentNode.childNodes.length;t<i;t++){const i=this.parentNode.childNodes[t];3===i.nodeType&&e.push(i.nodeValue)}return e.join("")}return this.nodeValue}};function Ae(e,t){for(let i=0,r=e.length;i<r;i++){const r=e[i];3===r.nodeType?t.push(r.nodeValue):1===r.nodeType&&Ae(r.childNodes,t)}}function Ee(e,t){for(let t=e.childNodes.length-1;t>=0;t--)e.removeChild(e.childNodes[t]);const i=new Se(e.ownerDocument,t);e.appendChild(i)}var xe=class e extends me{constructor(e,t){super(e,8,"#comment",t)}cloneNode(t){return new e(null,this.nodeValue)}get textContent(){return this.nodeValue}set textContent(e){this.nodeValue=e}},Ie=class e extends Te{constructor(e){super(e,null),this.nodeName="#document-fragment",this.nodeType=11}getElementById(e){return At(this,e)}cloneNode(t){const i=new e(null);if(t)for(let e=0,t=this.childNodes.length;e<t;e++){const t=this.childNodes[e];if(1===t.nodeType||3===t.nodeType||8===t.nodeType){const t=this.childNodes[e].cloneNode(!0);i.appendChild(t)}}return i}},Ce=class extends Te{constructor(e){super(e,"!DOCTYPE"),this.nodeType=10,this.setAttribute("html","")}},ke=class{constructor(e){this.parentStyleSheet=e,this.cssText="",this.type=0}},Ne=class{constructor(e){this.type="text/css",this.parentStyleSheet=null,this.cssRules=[],this.ownerNode=e}get rules(){return this.cssRules}set rules(e){this.cssRules=e}deleteRule(e){e>=0&&e<this.cssRules.length&&(this.cssRules.splice(e,1),Re(this.ownerNode))}insertRule(e,t=0){"number"!=typeof t&&(t=0),t<0&&(t=0),t>this.cssRules.length&&(t=this.cssRules.length);const i=new ke(this);return i.cssText=e,this.cssRules.splice(t,0,i),Re(this.ownerNode),t}};function Le(e){const t=[];for(let i=0;i<e.childNodes.length;i++)t.push(e.childNodes[i].nodeValue);return t.join("")}function Oe(e,t){const i=e.sheet;i.cssRules.length=0,i.insertRule(t),Re(e)}function Re(e){const t=e.childNodes.length;if(t>1)for(let i=t-1;i>=1;i--)e.removeChild(e.childNodes[i]);else t<1&&e.appendChild(e.ownerDocument.createTextNode(""));e.childNodes[0].nodeValue=e.sheet.cssRules.map((e=>e.cssText)).join("\n")}function Pe(e,t){if("string"!=typeof t||""===t||!/^[a-z0-9-_:]+$/i.test(t))throw new Error(`The tag name provided (${t}) is not a valid name.`);switch(t=t.toLowerCase()){case"a":return new De(e);case"base":return new Qe(e);case"button":return new Fe(e);case"canvas":return new rt(e);case"form":return new ze(e);case"img":return new je(e);case"input":return new Ze(e);case"link":return new Ue(e);case"meta":return new Ve(e);case"script":return new Ge(e);case"style":return new We(e);case"template":return new et(e);case"title":return new tt(e);case"ul":return new it(e)}if(null!=e&&t.includes("-")){const i=e.defaultView;if(null!=i&&null!=i.customElements)return E(i.customElements,e,t)}return new Te(e,t)}var De=class extends Te{constructor(e){super(e,"a")}get href(){return nt(this,"href")}set href(e){this.setAttribute("href",e)}get pathname(){return new URL(this.href).pathname}},Fe=class extends Te{constructor(e){super(e,"button")}};st(Fe.prototype,{type:String},{type:"submit"});var je=class extends Te{constructor(e){super(e,"img")}get draggable(){return"false"!==this.getAttributeNS(null,"draggable")}set draggable(e){this.setAttributeNS(null,"draggable",e)}get src(){return nt(this,"src")}set src(e){this.setAttribute("src",e)}};st(je.prototype,{height:Number,width:Number});var Ze=class extends Te{constructor(e){super(e,"input")}get list(){const e=this.getAttribute("list");return e?this.ownerDocument.getElementById(e):null}};st(Ze.prototype,{accept:String,autocomplete:String,autofocus:Boolean,capture:String,checked:Boolean,disabled:Boolean,form:String,formaction:String,formenctype:String,formmethod:String,formnovalidate:String,formtarget:String,height:Number,inputmode:String,max:String,maxLength:Number,min:String,minLength:Number,multiple:Boolean,name:String,pattern:String,placeholder:String,required:Boolean,readOnly:Boolean,size:Number,spellCheck:Boolean,src:String,step:String,type:String,value:String,width:Number},{type:"text"});var ze=class extends Te{constructor(e){super(e,"form")}};st(ze.prototype,{name:String});var Ue=class extends Te{constructor(e){super(e,"link")}get href(){return nt(this,"href")}set href(e){this.setAttribute("href",e)}};st(Ue.prototype,{crossorigin:String,media:String,rel:String,type:String});var Ve=class extends Te{constructor(e){super(e,"meta")}};st(Ve.prototype,{charset:String,content:String,name:String});var Ge=class extends Te{constructor(e){super(e,"script")}get src(){return nt(this,"src")}set src(e){this.setAttribute("src",e)}};st(Ge.prototype,{type:String});var Be,$e=class e{constructor(){this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this.m11=1,this.m12=0,this.m13=0,this.m14=0,this.m21=0,this.m22=1,this.m23=0,this.m24=0,this.m31=0,this.m32=0,this.m33=1,this.m34=0,this.m41=0,this.m42=0,this.m43=0,this.m44=1,this.is2D=!0,this.isIdentity=!0}static fromMatrix(){return new e}inverse(){return new e}flipX(){return new e}flipY(){return new e}multiply(){return new e}rotate(){return new e}rotateAxisAngle(){return new e}rotateFromVector(){return new e}scale(){return new e}scaleNonUniform(){return new e}skewX(){return new e}skewY(){return new e}toJSON(){}toString(){}transformPoint(){return new He}translate(){return new e}},He=class{constructor(){this.w=1,this.x=0,this.y=0,this.z=0}toJSON(){}matrixTransform(){return new $e}},qe=class{constructor(){this.height=10,this.width=10,this.x=0,this.y=0}},We=class extends Te{constructor(e){super(e,"style"),this.sheet=new Ne(this)}get innerHTML(){return Le(this)}set innerHTML(e){Oe(this,e)}get innerText(){return Le(this)}set innerText(e){Oe(this,e)}get textContent(){return Le(this)}set textContent(e){Oe(this,e)}},Ke=class extends ve{constructor(){super(...arguments),this.__namespaceURI="http://www.w3.org/2000/svg"}get ownerSVGElement(){return null}get viewportElement(){return null}onunload(){}get pathLength(){return 0}isPointInFill(e){return!1}isPointInStroke(e){return!1}getTotalLength(){return 0}},Ye=class extends Ke{getBBox(e){return new qe}getCTM(){return new $e}getScreenCTM(){return new $e}},Je=class extends Ye{createSVGPoint(){return new He}},Xe=class extends Ye{getComputedTextLength(){return 0}},Qe=class extends Te{constructor(e){super(e,"base")}get href(){return nt(this,"href")}set href(e){this.setAttribute("href",e)}},et=class e extends Te{constructor(e){super(e,"template"),this.content=new Ie(e)}get innerHTML(){return this.content.innerHTML}set innerHTML(e){this.content.innerHTML=e}cloneNode(t){const i=new e(null);i.attributes=f(this.attributes);const r=this.getAttribute("style");if(null!=r&&r.length>0&&i.setAttribute("style",r),i.content=this.content.cloneNode(t),t)for(let e=0,t=this.childNodes.length;e<t;e++){const t=this.childNodes[e].cloneNode(!0);i.appendChild(t)}return i}},tt=class extends Te{constructor(e){super(e,"title")}get text(){return this.textContent}set text(e){this.textContent=e}},it=class extends Te{constructor(e){super(e,"ul")}},rt=class extends Te{constructor(e){super(e,"canvas")}getContext(){return{fillRect(){},clearRect(){},getImageData:function(e,t,i,r){return{data:new Array(i*r*4)}},putImageData(){},createImageData:function(){return[]},setTransform(){},drawImage(){},save(){},fillText(){},restore(){},beginPath(){},moveTo(){},lineTo(){},closePath(){},stroke(){},translate(){},scale(){},rotate(){},arc(){},fill(){},measureText:()=>({width:0}),transform(){},rect(){},clip(){}}}};function nt(e,t){const i=e.getAttribute(t)||"";if(null!=e.ownerDocument){const t=e.ownerDocument.defaultView;if(null!=t){const e=t.location;if(null!=e)try{return new URL(i,e.href).href}catch(e){}}}return i.replace(/\'|\"/g,"").trim()}function st(e,t,i={}){Object.keys(t).forEach((r=>{const n=t[r],s=i[r];n===Boolean?Object.defineProperty(e,r,{get(){return this.hasAttribute(r)},set(e){e?this.setAttribute(r,""):this.removeAttribute(r)}}):n===Number?Object.defineProperty(e,r,{get(){const e=this.getAttribute(r);return e?parseInt(e,10):void 0===s?0:s},set(e){this.setAttribute(r,e)}}):Object.defineProperty(e,r,{get(){return this.hasAttribute(r)?this.getAttribute(r):s||""},set(e){this.setAttribute(r,e)}})}))}ve.prototype.cloneNode=function(e){const t=Pe(this.ownerDocument,this.nodeName);t.attributes=f(this.attributes);const i=this.getAttribute("style");if(null!=i&&i.length>0&&t.setAttribute("style",i),e)for(let e=0,i=this.childNodes.length;e<i;e++){const i=this.childNodes[e].cloneNode(!0);t.appendChild(i)}return t};var ot,at=()=>{},lt=class{constructor(e){if(this._values=[],"object"==typeof e)if("function"==typeof e[Symbol.iterator]){const t=[];for(const i of e)"function"==typeof i[Symbol.iterator]&&t.push([...i]);for(const e of t)this.append(e[0],e[1])}else for(const t in e)this.append(t,e[t])}append(e,t){this._values.push([e,t+""])}delete(e){e=e.toLowerCase();for(let t=this._values.length-1;t>=0;t--)this._values[t][0].toLowerCase()===e&&this._values.splice(t,1)}entries(){const e=[];for(const t of this.keys())e.push([t,this.get(t)]);let t=-1;return{next:()=>(t++,{value:e[t],done:!e[t]}),[Symbol.iterator](){return this}}}forEach(e){for(const t of this.entries())e(t[1],t[0])}get(e){const t=[];e=e.toLowerCase();for(const i of this._values)i[0].toLowerCase()===e&&t.push(i[1]);return t.length>0?t.join(", "):null}has(e){e=e.toLowerCase();for(const t of this._values)if(t[0].toLowerCase()===e)return!0;return!1}keys(){const e=[];for(const t of this._values){const i=t[0].toLowerCase();e.includes(i)||e.push(i)}let t=-1;return{next:()=>(t++,{value:e[t],done:!e[t]}),[Symbol.iterator](){return this}}}set(e,t){for(const i of this._values)if(i[0].toLowerCase()===e.toLowerCase())return void(i[1]=t+"");this.append(e,t)}values(){const e=this._values;let t=-1;return{next(){t++;const i=!e[t];return{value:i?void 0:e[t][1],done:i}},[Symbol.iterator](){return this}}}[Symbol.iterator](){return this.entries()}},ct=[["CustomEvent",class extends P{constructor(e,t){super(e),this.detail=null,null!=t&&Object.assign(this,t)}}],["Event",P],["Headers",lt],["FocusEvent",F],["KeyboardEvent",class extends P{constructor(e,t){super(e),this.code="",this.key="",this.altKey=!1,this.ctrlKey=!1,this.metaKey=!1,this.shiftKey=!1,this.location=0,this.repeat=!1,null!=t&&Object.assign(this,t)}}],["MouseEvent",class extends P{constructor(e,t){super(e),this.screenX=0,this.screenY=0,this.clientX=0,this.clientY=0,this.ctrlKey=!1,this.shiftKey=!1,this.altKey=!1,this.metaKey=!1,this.button=0,this.buttons=0,this.relatedTarget=null,null!=t&&Object.assign(this,t)}}],["Request",class e{constructor(e,t={}){this._method="GET",this._url="/",this.bodyUsed=!1,this.cache="default",this.credentials="same-origin",this.integrity="",this.keepalive=!1,this.mode="cors",this.redirect="follow",this.referrer="about:client",this.referrerPolicy="","string"==typeof e?this.url=e:e&&(Object.assign(this,e),this.headers=new lt(e.headers)),Object.assign(this,t),t.headers&&(this.headers=new lt(t.headers)),this.headers||(this.headers=new lt)}get url(){return"string"==typeof this._url?new URL(this._url,location.href).href:new URL("/",location.href).href}set url(e){this._url=e}get method(){return"string"==typeof this._method?this._method.toUpperCase():"GET"}set method(e){this._method=e}clone(){const t={...this};return t.headers=new lt(this.headers),new e(t)}}],["Response",class e{constructor(e,t={}){this.ok=!0,this.status=200,this.statusText="",this.type="default",this.url="",this._body=e,t&&Object.assign(this,t),this.headers=new lt(t.headers)}async json(){return JSON.parse(this._body)}async text(){return this._body}clone(){const t={...this};return t.headers=new lt(this.headers),new e(this._body,t)}}],["DOMParser",class{parseFromString(e,t){return"text/html"!==t&&console.error("XML parsing not implemented yet, continuing as html"),function(e,t=null){return null==t&&(null==Be&&(Be=new Tt),t=Be),W(t,e)}(e)}}],["HTMLAnchorElement",De],["HTMLBaseElement",Qe],["HTMLButtonElement",Fe],["HTMLCanvasElement",rt],["HTMLFormElement",ze],["HTMLImageElement",je],["HTMLInputElement",Ze],["HTMLLinkElement",Ue],["HTMLMetaElement",Ve],["HTMLScriptElement",Ge],["HTMLStyleElement",We],["HTMLTemplateElement",et],["HTMLTitleElement",tt],["HTMLUListElement",it]],ht=class{constructor(){this.items=[]}get length(){return this.items.length}back(){this.go(-1)}forward(){this.go(1)}go(e){}pushState(e,t,i){}replaceState(e,t,i){}},ut=class{constructor(){}disconnect(){}observe(){}takeRecords(){return[]}unobserve(){}},pt=class{constructor(){this.ancestorOrigins=null,this.protocol="",this.host="",this.hostname="",this.port="",this.pathname="",this.search="",this.hash="",this.username="",this.password="",this.origin="",this._href=""}get href(){return this._href}set href(e){const t=new URL(e,"http://mockdoc.stenciljs.com");this._href=t.href,this.protocol=t.protocol,this.host=t.host,this.hostname=t.hostname,this.port=t.port,this.pathname=t.pathname,this.search=t.search,this.hash=t.hash,this.username=t.username,this.password=t.password,this.origin=t.origin}assign(e){}reload(e){}replace(e){}toString(){return this.href}},dt=class{constructor(){this.appCodeName="MockNavigator",this.appName="MockNavigator",this.appVersion="MockNavigator",this.platform="MockNavigator",this.userAgent="MockNavigator"}},ft=class{constructor(){this.timeOrigin=Date.now(),this.eventCounts=new Map}addEventListener(){}clearMarks(){}clearMeasures(){}clearResourceTimings(){}dispatchEvent(){return!0}getEntries(){return[]}getEntriesByName(){return[]}getEntriesByType(){return[]}mark(){}measure(){}get navigation(){return{}}now(){return Date.now()-this.timeOrigin}get onresourcetimingbufferfull(){return null}removeEventListener(){}setResourceTimingBufferSize(){}get timing(){return{}}toJSON(){}},yt=class{constructor(){this.items=new Map}key(e){}getItem(e){return e=String(e),this.items.has(e)?this.items.get(e):null}setItem(e,t){null==t&&(t="null"),this.items.set(String(e),String(t))}removeItem(e){this.items.delete(String(e))}clear(){this.items.clear()}},mt=clearInterval,gt=clearTimeout,vt=setInterval,_t=setTimeout,bt=URL;function wt(e){e.__clearInterval=mt,e.__clearTimeout=gt,e.__setInterval=vt,e.__setTimeout=_t,e.__maxTimeout=3e4,e.__allowInterval=!0,e.URL=bt}function Mt(e){try{e.devicePixelRatio=1,e.innerHeight=768,e.innerWidth=1366,e.pageXOffset=0,e.pageYOffset=0,e.screenLeft=0,e.screenTop=0,e.screenX=0,e.screenY=0,e.scrollX=0,e.scrollY=0,e.screen={availHeight:e.innerHeight,availLeft:0,availTop:0,availWidth:e.innerWidth,colorDepth:24,height:e.innerHeight,keepAwake:!1,orientation:{angle:0,type:"portrait-primary"},pixelDepth:24,width:e.innerWidth}}catch(e){}}ot=class{constructor(e=null){this.document=!1!==e?new Tt(e,this):null,this.performance=new ft,this.customElements=new A(this),this.console={debug:at,error:at,info:at,log:at,warn:at,dir:at,dirxml:at,table:at,trace:at,group:at,groupCollapsed:at,groupEnd:at,clear:at,count:at,countReset:at,assert:at,profile:at,profileEnd:at,time:at,timeLog:at,timeEnd:at,timeStamp:at,context:at,memory:at},wt(this),Mt(this)}addEventListener(e,t){Z(this,e,t)}alert(e){this.console?this.console.debug(e):console.debug(e)}blur(){}cancelAnimationFrame(e){this.__clearTimeout(e)}cancelIdleCallback(e){this.__clearTimeout(e)}get CharacterData(){if(null==this.__charDataCstr){const e=this.document;this.__charDataCstr=class extends me{constructor(){throw super(e,0,"test",""),new Error("Illegal constructor: cannot construct CharacterData")}}}return this.__charDataCstr}set CharacterData(e){this.__charDataCstr=e}clearInterval(e){this.__clearInterval(e)}clearTimeout(e){this.__clearTimeout(e)}close(){!function(e){if(null!=e){e.__timeouts&&(e.__timeouts.forEach((e=>{mt(e),gt(e)})),e.__timeouts.clear()),e.customElements&&e.customElements.clear&&e.customElements.clear(),function(e){if(null!=e){U(e);const t=e.documentElement;if(null!=t){we(t);for(let e=0,i=t.childNodes.length;e<i;e++){const i=t.childNodes[e];we(i),i.childNodes.length=0}}for(const t in e)e.hasOwnProperty(t)&&!St.has(t)&&delete e[t];try{e.nodeName="#document"}catch(e){}try{e.nodeType=9}catch(e){}try{e.cookie=""}catch(e){}try{e.referrer=""}catch(e){}}}(e.document),function(e){if(null!=e)try{e.timeOrigin=Date.now()}catch(e){}}(e.performance);for(const t in e)e.hasOwnProperty(t)&&"document"!==t&&"performance"!==t&&"customElements"!==t&&delete e[t];if(wt(e),Mt(e),U(e),null!=e.document)try{e.document.defaultView=e}catch(e){}e.fetch=null,e.Headers=null,e.Request=null,e.Response=null,e.FetchError=null}}(this)}confirm(){return!1}get CSS(){return{supports:()=>!0}}get Document(){if(null==this.__docCstr){const e=this;this.__docCstr=class extends Tt{constructor(){throw super(!1,e),new Error("Illegal constructor: cannot construct Document")}}}return this.__docCstr}set Document(e){this.__docCstr=e}get DocumentFragment(){if(null==this.__docFragCstr){const e=this.document;this.__docFragCstr=class extends Ie{constructor(){throw super(e),new Error("Illegal constructor: cannot construct DocumentFragment")}}}return this.__docFragCstr}set DocumentFragment(e){this.__docFragCstr=e}get DocumentType(){if(null==this.__docTypeCstr){const e=this.document;this.__docTypeCstr=class extends me{constructor(){throw super(e,0,"test",""),new Error("Illegal constructor: cannot construct DocumentType")}}}return this.__docTypeCstr}set DocumentType(e){this.__docTypeCstr=e}get DOMTokenList(){return null==this.__domTokenListCstr&&(this.__domTokenListCstr=class{}),this.__domTokenListCstr}set DOMTokenList(e){this.__domTokenListCstr=e}dispatchEvent(e){return G(this,e)}get Element(){if(null==this.__elementCstr){const e=this.document;this.__elementCstr=class extends ve{constructor(){throw super(e,""),new Error("Illegal constructor: cannot construct Element")}}}return this.__elementCstr}fetch(e,t){if("function"==typeof fetch)return fetch(e,t);throw new Error("fetch() not implemented")}focus(){}getComputedStyle(e){return{cssText:"",length:0,parentRule:null,getPropertyPriority:()=>null,getPropertyValue:()=>"",item:()=>null,removeProperty:()=>null,setProperty:()=>null}}get globalThis(){return this}get history(){return null==this.__history&&(this.__history=new ht),this.__history}set history(e){this.__history=e}get JSON(){return JSON}get HTMLElement(){if(null==this.__htmlElementCstr){const e=this.document;this.__htmlElementCstr=class extends Te{constructor(){super(e,"");const t=this.constructor.observedAttributes;Array.isArray(t)&&"function"==typeof this.attributeChangedCallback&&t.forEach((e=>{const t=this.getAttribute(e);null!=t&&this.attributeChangedCallback(e,null,t)}))}}}return this.__htmlElementCstr}set HTMLElement(e){this.__htmlElementCstr=e}get IntersectionObserver(){return ut}get localStorage(){return null==this.__localStorage&&(this.__localStorage=new yt),this.__localStorage}set localStorage(e){this.__localStorage=e}get location(){return null==this.__location&&(this.__location=new pt),this.__location}set location(e){"string"==typeof e?(null==this.__location&&(this.__location=new pt),this.__location.href=e):this.__location=e}matchMedia(e){return{media:e,matches:!1,addListener:e=>{},removeListener:e=>{},addEventListener:(e,t)=>{},removeEventListener:(e,t)=>{},dispatchEvent:e=>{},onchange:null}}get Node(){if(null==this.__nodeCstr){const e=this.document;this.__nodeCstr=class extends me{constructor(){throw super(e,0,"test",""),new Error("Illegal constructor: cannot construct Node")}}}return this.__nodeCstr}get NodeList(){if(null==this.__nodeListCstr){const e=this.document;this.__nodeListCstr=class extends ge{constructor(){throw super(e,[],0),new Error("Illegal constructor: cannot construct NodeList")}}}return this.__nodeListCstr}get navigator(){return null==this.__navigator&&(this.__navigator=new dt),this.__navigator}set navigator(e){this.__navigator=e}get parent(){return null}prompt(){return""}open(){return null}get origin(){return this.location.origin}removeEventListener(e,t){z(this,e,t)}requestAnimationFrame(e){return this.setTimeout((()=>{e(Date.now())}),0)}requestIdleCallback(e){return this.setTimeout((()=>{e({didTimeout:!1,timeRemaining:()=>0})}),0)}scroll(e,t){}scrollBy(e,t){}scrollTo(e,t){}get self(){return this}get sessionStorage(){return null==this.__sessionStorage&&(this.__sessionStorage=new yt),this.__sessionStorage}set sessionStorage(e){this.__sessionStorage=e}setInterval(e,t,...i){if(null==this.__timeouts&&(this.__timeouts=new Set),t=Math.min(t,this.__maxTimeout),this.__allowInterval){const r=this.__setInterval((()=>{if(this.__timeouts){this.__timeouts.delete(r);try{e(...i)}catch(e){this.console?this.console.error(e):console.error(e)}}}),t);return this.__timeouts&&this.__timeouts.add(r),r}const r=this.__setTimeout((()=>{if(this.__timeouts){this.__timeouts.delete(r);try{e(...i)}catch(e){this.console?this.console.error(e):console.error(e)}}}),t);return this.__timeouts&&this.__timeouts.add(r),r}setTimeout(e,t,...i){null==this.__timeouts&&(this.__timeouts=new Set),t=Math.min(t,this.__maxTimeout);const r=this.__setTimeout((()=>{if(this.__timeouts){this.__timeouts.delete(r);try{e(...i)}catch(e){this.console?this.console.error(e):console.error(e)}}}),t);return this.__timeouts&&this.__timeouts.add(r),r}get top(){return this}get window(){return this}onanimationstart(){}onanimationend(){}onanimationiteration(){}onabort(){}onauxclick(){}onbeforecopy(){}onbeforecut(){}onbeforepaste(){}onblur(){}oncancel(){}oncanplay(){}oncanplaythrough(){}onchange(){}onclick(){}onclose(){}oncontextmenu(){}oncopy(){}oncuechange(){}oncut(){}ondblclick(){}ondrag(){}ondragend(){}ondragenter(){}ondragleave(){}ondragover(){}ondragstart(){}ondrop(){}ondurationchange(){}onemptied(){}onended(){}onerror(){}onfocus(){}onfocusin(){}onfocusout(){}onformdata(){}onfullscreenchange(){}onfullscreenerror(){}ongotpointercapture(){}oninput(){}oninvalid(){}onkeydown(){}onkeypress(){}onkeyup(){}onload(){}onloadeddata(){}onloadedmetadata(){}onloadstart(){}onlostpointercapture(){}onmousedown(){}onmouseenter(){}onmouseleave(){}onmousemove(){}onmouseout(){}onmouseover(){}onmouseup(){}onmousewheel(){}onpaste(){}onpause(){}onplay(){}onplaying(){}onpointercancel(){}onpointerdown(){}onpointerenter(){}onpointerleave(){}onpointermove(){}onpointerout(){}onpointerover(){}onpointerup(){}onprogress(){}onratechange(){}onreset(){}onresize(){}onscroll(){}onsearch(){}onseeked(){}onseeking(){}onselect(){}onselectstart(){}onstalled(){}onsubmit(){}onsuspend(){}ontimeupdate(){}ontoggle(){}onvolumechange(){}onwaiting(){}onwebkitfullscreenchange(){}onwebkitfullscreenerror(){}onwheel(){}}.prototype,ct.forEach((([e,t])=>{Object.defineProperty(ot,e,{get(){return this["__"+e]||t},set(t){this["__"+e]=t},configurable:!0,enumerable:!0})}));var Tt=class e extends Te{constructor(e=null,t=null){if(super(null,null),this.nodeName="#document",this.nodeType=9,this.defaultView=t,this.cookie="",this.referrer="",this.appendChild(this.createDocumentTypeNode()),"string"==typeof e){const t=W(this,e).children.find((e=>"HTML"===e.nodeName));null!=t&&(this.appendChild(t),xt(t,this))}else if(!1!==e){const e=new Te(this,"html");this.appendChild(e),e.appendChild(new Te(this,"head")),e.appendChild(new Te(this,"body"))}}get dir(){return this.documentElement.dir}set dir(e){this.documentElement.dir=e}get localName(){throw new Error("Unimplemented")}get location(){return null!=this.defaultView?this.defaultView.location:null}set location(e){null!=this.defaultView&&(this.defaultView.location=e)}get baseURI(){const e=this.head.childNodes.find((e=>"BASE"===e.nodeName));return e?e.href:this.URL}get URL(){return this.location.href}get styleSheets(){return this.querySelectorAll("style")}get scripts(){return this.querySelectorAll("script")}get forms(){return this.querySelectorAll("form")}get images(){return this.querySelectorAll("img")}get scrollingElement(){return this.documentElement}get documentElement(){for(let e=this.childNodes.length-1;e>=0;e--)if("HTML"===this.childNodes[e].nodeName)return this.childNodes[e];const e=new Te(this,"html");return this.appendChild(e),e}set documentElement(e){for(let e=this.childNodes.length-1;e>=0;e--)10!==this.childNodes[e].nodeType&&this.childNodes[e].remove();null!=e&&(this.appendChild(e),xt(e,this))}get head(){const e=this.documentElement;for(let t=0;t<e.childNodes.length;t++)if("HEAD"===e.childNodes[t].nodeName)return e.childNodes[t];const t=new Te(this,"head");return e.insertBefore(t,e.firstChild),t}set head(e){const t=this.documentElement;for(let e=t.childNodes.length-1;e>=0;e--)"HEAD"===t.childNodes[e].nodeName&&t.childNodes[e].remove();null!=e&&(t.insertBefore(e,t.firstChild),xt(e,this))}get body(){const e=this.documentElement;for(let t=e.childNodes.length-1;t>=0;t--)if("BODY"===e.childNodes[t].nodeName)return e.childNodes[t];const t=new Te(this,"body");return e.appendChild(t),t}set body(e){const t=this.documentElement;for(let e=t.childNodes.length-1;e>=0;e--)"BODY"===t.childNodes[e].nodeName&&t.childNodes[e].remove();null!=e&&(t.appendChild(e),xt(e,this))}appendChild(e){return e.remove(),e.parentNode=this,this.childNodes.push(e),e}createComment(e){return new xe(this,e)}createAttribute(e){return new m(e.toLowerCase(),"")}createAttributeNS(e,t){return new m(t,"",e)}createElement(t){if("#document"===t){const i=new e(!1);return i.nodeName=t,i.parentNode=null,i}return Pe(this,t)}createElementNS(e,t){const i=function(e,t,i){if("http://www.w3.org/1999/xhtml"===t)return Pe(e,i);if("http://www.w3.org/2000/svg"!==t)return new ve(e,i,t);switch(i.toLowerCase()){case"text":case"tspan":case"tref":case"altglyph":case"textpath":return new Xe(e,i);case"circle":case"ellipse":case"image":case"line":case"path":case"polygon":case"polyline":case"rect":case"use":return new Ye(e,i);case"svg":return new Je(e,i);default:return new Ke(e,i)}}(this,e,t);return i}createTextNode(e){return new Se(this,e)}createDocumentFragment(){return new Ie(this)}createDocumentTypeNode(){return new Ce(this)}getElementById(e){return At(this,e)}getElementsByName(e){return Et(this,e.toLowerCase())}get title(){const e=this.head.childNodes.find((e=>"TITLE"===e.nodeName));return null!=e&&"string"==typeof e.textContent?e.textContent.trim():""}set title(e){const t=this.head;let i=t.childNodes.find((e=>"TITLE"===e.nodeName));null==i&&(i=this.createElement("title"),t.appendChild(i)),i.textContent=e}},St=new Set(["nodeName","nodeType","nodeValue","ownerDocument","parentNode","childNodes","_shadowRoot"]);function At(e,t){const i=e.children;for(let e=0,r=i.length;e<r;e++){const r=i[e];if(r.id===t)return r;const n=At(r,t);if(null!=n)return n}return null}function Et(e,t,i=[]){const r=e.children;for(let e=0,n=r.length;e<n;e++){const n=r[e];n.name&&n.name.toLowerCase()===t&&i.push(n),Et(n,t,i)}return i}function xt(e,t){for(let i=0,r=e.childNodes.length;i<r;i++)e.childNodes[i].ownerDocument=t,1===e.childNodes[i].nodeType&&xt(e.childNodes[i],t)}var It=Object.defineProperty,Ct={isDev:!!r.isDev,isBrowser:!0,isServer:!1,isTesting:!!r.isTesting},kt=e=>{const t=new URL(e,jr.$resourcesUrl$);return t.origin!==Pr.location.origin?t.href:t.pathname},Nt=e=>jr.$resourcesUrl$=e,Lt={},Ot=e=>"object"==(e=typeof e)||"function"===e;((e,t)=>{for(var i in t)It(e,i,{get:t[i],enumerable:!0})})({},{err:()=>Pt,map:()=>Dt,ok:()=>Rt,unwrap:()=>zt,unwrapErr:()=>Ut});var Rt=e=>({isOk:!0,isErr:!1,value:e}),Pt=e=>({isOk:!1,isErr:!0,value:e});function Dt(e,t){if(e.isOk){const i=t(e.value);return i instanceof Promise?i.then((e=>Rt(e))):Rt(i)}if(e.isErr){const t=e.value;return Pt(t)}throw"should never get here"}var Ft,jt,Zt,zt=e=>{if(e.isOk)return e.value;throw e.value},Ut=e=>{if(e.isErr)return e.value;throw e.value},Vt=0,Gt=(e,t="")=>{if(r.profile&&performance.mark){const i=`st:${e}:${t}:${Vt++}`;return performance.mark(i),()=>performance.measure(`[Stencil] ${e}() <${t}>`,i)}return()=>{}},Bt="s-id",$t="sty-id",Ht="c-id",qt="http://www.w3.org/1999/xlink",Wt=["formAssociatedCallback","formResetCallback","formDisabledCallback","formStateRestoreCallback"],Kt=(e,t,...i)=>{let n=null,s=null,o=null,a=!1,l=!1;const c=[],h=t=>{for(let i=0;i<t.length;i++)n=t[i],Array.isArray(n)?h(n):null!=n&&"boolean"!=typeof n&&((a="function"!=typeof e&&!Ot(n))?n=String(n):r.isDev&&"function"!=typeof e&&void 0===n.$flags$&&Cr("vNode passed as children has unexpected type.\nMake sure it's using the correct h() function.\nEmpty objects can also be the cause, look for JSX comments that became objects."),a&&l?c[c.length-1].$text$+=n:c.push(a?Yt(null,n):n),l=a)};if(h(i),t&&(r.isDev&&"input"===e&&ii(t),r.vdomKey&&t.key&&(s=t.key),r.slotRelocation&&t.name&&(o=t.name),r.vdomClass)){const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter((t=>e[t])).join(" "))}if(r.isDev&&c.some(Xt)&&Cr("The <Host> must be the single root component. Make sure:\n- You are NOT using hostData() and <Host> in the same component.\n- <Host> is used once, and it's the single root component of the render() function."),r.vdomFunctional&&"function"==typeof e)return e(null===t?{}:t,c,Qt);const u=Yt(e,null);return u.$attrs$=t,c.length>0&&(u.$children$=c),r.vdomKey&&(u.$key$=s),r.slotRelocation&&(u.$name$=o),u},Yt=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return r.vdomAttribute&&(i.$attrs$=null),r.vdomKey&&(i.$key$=null),r.slotRelocation&&(i.$name$=null),i},Jt={},Xt=e=>e&&e.$tag$===Jt,Qt={forEach:(e,t)=>e.map(ei).forEach(t),map:(e,t)=>e.map(ei).map(t).map(ti)},ei=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),ti=e=>{if("function"==typeof e.vtag){const t={...e.vattrs};return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),Kt(e.vtag,t,...e.vchildren||[])}const t=Yt(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},ii=e=>{const t=Object.keys(e),i=t.indexOf("value");if(-1===i)return;const r=t.indexOf("type"),n=t.indexOf("min"),s=t.indexOf("max"),o=t.indexOf("step");(i<r||i<n||i<s||i<o)&&kr('The "value" prop of <input> should be set after "min", "max", "type" and "step"')},ri=(e,t,i,n,s,o,a)=>{let l,c,h,u;if(1===o.nodeType){for(l=o.getAttribute(Ht),l&&(c=l.split("."),c[0]!==a&&"0"!==c[0]||(h={$flags$:0,$hostId$:c[0],$nodeId$:c[1],$depth$:c[2],$index$:c[3],$tag$:o.tagName.toLowerCase(),$elm$:o,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},t.push(h),o.removeAttribute(Ht),e.$children$||(e.$children$=[]),e.$children$[h.$index$]=h,e=h,n&&"0"===h.$depth$&&(n[h.$index$]=h.$elm$))),u=o.childNodes.length-1;u>=0;u--)ri(e,t,i,n,s,o.childNodes[u],a);if(o.shadowRoot)for(u=o.shadowRoot.childNodes.length-1;u>=0;u--)ri(e,t,i,n,s,o.shadowRoot.childNodes[u],a)}else if(8===o.nodeType)c=o.nodeValue.split("."),c[1]!==a&&"0"!==c[1]||(l=c[0],h={$flags$:0,$hostId$:c[1],$nodeId$:c[2],$depth$:c[3],$index$:c[4],$elm$:o,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===l?(h.$elm$=o.nextSibling,h.$elm$&&3===h.$elm$.nodeType&&(h.$text$=h.$elm$.textContent,t.push(h),o.remove(),e.$children$||(e.$children$=[]),e.$children$[h.$index$]=h,n&&"0"===h.$depth$&&(n[h.$index$]=h.$elm$))):h.$hostId$===a&&("s"===l?(h.$tag$="slot",c[5]?o["s-sn"]=h.$name$=c[5]:o["s-sn"]="",o["s-sr"]=!0,r.shadowDom&&n&&(h.$elm$=Dr.createElement(h.$tag$),h.$name$&&h.$elm$.setAttribute("name",h.$name$),o.parentNode.insertBefore(h.$elm$,o),o.remove(),"0"===h.$depth$&&(n[h.$index$]=h.$elm$)),i.push(h),e.$children$||(e.$children$=[]),e.$children$[h.$index$]=h):"r"===l&&(r.shadowDom&&n?o.remove():r.slotRelocation&&(s["s-cr"]=o,o["s-cn"]=!0))));else if(e&&"style"===e.$tag$){const t=Yt(null,o.textContent);t.$elm$=o,t.$index$="0",e.$children$=[t]}},ni=(e,t)=>{if(1===e.nodeType){let i=0;for(;i<e.childNodes.length;i++)ni(e.childNodes[i],t);if(e.shadowRoot)for(i=0;i<e.shadowRoot.childNodes.length;i++)ni(e.shadowRoot.childNodes[i],t)}else if(8===e.nodeType){const i=e.nodeValue.split(".");"o"===i[0]&&(t.set(i[1]+"."+i[2],e),e.nodeValue="",e["s-en"]=i[3])}},si=(e,t,i)=>{const n=(e=>r.lazyLoad?Sr(e).$hostElement$:e)(e);return{emit:e=>(r.isDev&&!n.isConnected&&kr(`The "${t}" event was emitted, but the dispatcher node is no longer connected to the dom.`),oi(n,t,{bubbles:!!(4&i),composed:!!(2&i),cancelable:!!(1&i),detail:e}))}},oi=(e,t,i)=>{const r=jr.ce(t,i);return e.dispatchEvent(r),r},ai=new WeakMap,li=(e,t,i)=>{var n;const s=ci(t,i),o=Or.get(s);if(!r.attachStyles)return s;if(e=11===e.nodeType?e:Dr,o)if("string"==typeof o){e=e.head||e;let i,a=ai.get(e);if(a||ai.set(e,a=new Set),!a.has(s)){if(r.hydrateClientSide&&e.host&&(i=e.querySelector(`[${$t}="${s}"]`)))i.innerHTML=o;else{i=Dr.createElement("style"),i.innerHTML=o;const t=null!=(n=jr.$nonce$)?n:function(e){var t,i,r;return null!=(r=null==(i=null==(t=e.head)?void 0:t.querySelector('meta[name="csp-nonce"]'))?void 0:i.getAttribute("content"))?r:void 0}(Dr);null!=t&&i.setAttribute("nonce",t),(r.hydrateServerSide||r.hotModuleReplacement)&&i.setAttribute($t,s),e.insertBefore(i,e.querySelector("link"))}4&t.$flags$&&(i.innerHTML+="slot-fb{display:contents}slot-fb[hidden]{display:none}"),a&&a.add(s)}}else r.constructableCSS&&!e.adoptedStyleSheets.includes(o)&&(e.adoptedStyleSheets=[...e.adoptedStyleSheets,o]);return s},ci=(e,t)=>"sc-"+(r.mode&&t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$),hi=(e,t,i,n,s,o)=>{if(i!==n){let a=Er(e,t),l=t.toLowerCase();if(r.vdomClass&&"class"===t){const t=e.classList,r=pi(i),s=pi(n);t.remove(...r.filter((e=>e&&!s.includes(e)))),t.add(...s.filter((e=>e&&!r.includes(e))))}else if(r.vdomStyle&&"style"===t){if(r.updatable)for(const t in i)n&&null!=n[t]||(!r.hydrateServerSide&&t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in n)i&&n[t]===i[t]||(!r.hydrateServerSide&&t.includes("-")?e.style.setProperty(t,n[t]):e.style[t]=n[t])}else if(r.vdomKey&&"key"===t);else if(r.vdomRef&&"ref"===t)n&&n(e);else if(!r.vdomListener||(r.lazyLoad?a:e.__lookupSetter__(t))||"o"!==t[0]||"n"!==t[1]){if(r.vdomPropOrAttr){const c=Ot(n);if((a||c&&null!==n)&&!s)try{if(e.tagName.includes("-"))e[t]=n;else{const r=null==n?"":n;"list"===t?a=!1:null!=i&&e[t]==r||(e[t]=r)}}catch(e){}let h=!1;r.vdomXlink&&l!==(l=l.replace(/^xlink\:?/,""))&&(t=l,h=!0),null==n||!1===n?!1===n&&""!==e.getAttribute(t)||(r.vdomXlink&&h?e.removeAttributeNS(qt,t):e.removeAttribute(t)):(!a||4&o||s)&&!c&&(n=!0===n?"":n,r.vdomXlink&&h?e.setAttributeNS(qt,t,n):e.setAttribute(t,n))}}else if(t="-"===t[2]?t.slice(3):Er(Pr,l)?l.slice(2):l[2]+t.slice(3),i||n){const r=t.endsWith(di);t=t.replace(fi,""),i&&jr.rel(e,t,i,r),n&&jr.ael(e,t,n,r)}}},ui=/\s/,pi=e=>e?e.split(ui):[],di="Capture",fi=new RegExp(di+"$"),yi=(e,t,i,n)=>{const s=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,o=e&&e.$attrs$||Lt,a=t.$attrs$||Lt;if(r.updatable)for(n of mi(Object.keys(o)))n in a||hi(s,n,o[n],void 0,i,t.$flags$);for(n of mi(Object.keys(a)))hi(s,n,o[n],a[n],i,t.$flags$)};function mi(e){return e.includes("ref")?[...e.filter((e=>"ref"!==e)),"ref"]:e}var gi=!1,vi=!1,_i=!1,bi=!1,wi=(e,t,i,n)=>{var s;const o=t.$children$[i];let a,l,c,h=0;if(r.slotRelocation&&!gi&&(_i=!0,"slot"===o.$tag$&&(Ft&&n.classList.add(Ft+"-s"),o.$flags$|=o.$children$?2:1)),r.isDev&&o.$elm$&&Cr(`The JSX ${null!==o.$text$?`"${o.$text$}" text`:`"${o.$tag$}" element`} node should not be shared within the same renderer. The renderer caches element lookups in order to improve performance. However, a side effect from this is that the exact same JSX node should not be reused. For more information please see https://stenciljs.com/docs/templating-jsx#avoid-shared-jsx-nodes`),r.vdomText&&null!==o.$text$)a=o.$elm$=Dr.createTextNode(o.$text$);else if(r.slotRelocation&&1&o.$flags$)a=o.$elm$=r.isDebug||r.hydrateServerSide?Di(o):Dr.createTextNode("");else{if(r.svg&&!bi&&(bi="svg"===o.$tag$),a=o.$elm$=r.svg?Dr.createElementNS(bi?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",r.slotRelocation&&2&o.$flags$?"slot-fb":o.$tag$):Dr.createElement(r.slotRelocation&&2&o.$flags$?"slot-fb":o.$tag$),r.svg&&bi&&"foreignObject"===o.$tag$&&(bi=!1),r.vdomAttribute&&yi(null,o,bi),(r.shadowDom||r.scoped)&&null!=Ft&&a["s-si"]!==Ft&&a.classList.add(a["s-si"]=Ft),o.$children$)for(h=0;h<o.$children$.length;++h)l=wi(e,o,h,a),l&&a.appendChild(l);r.svg&&("svg"===o.$tag$?bi=!1:"foreignObject"===a.tagName&&(bi=!0))}return a["s-hn"]=Zt,r.slotRelocation&&3&o.$flags$&&(a["s-sr"]=!0,a["s-cr"]=jt,a["s-sn"]=o.$name$||"",a["s-rf"]=null==(s=o.$attrs$)?void 0:s.ref,c=e&&e.$children$&&e.$children$[i],c&&c.$tag$===o.$tag$&&e.$elm$&&(r.experimentalSlotFixes?Mi(e.$elm$):Ti(e.$elm$,!1))),a},Mi=e=>{jr.$flags$|=1;const t=e.closest(Zt.toLowerCase());if(null!=t){const i=Array.from(t.childNodes).find((e=>e["s-cr"])),r=Array.from(e.childNodes);for(const e of i?r.reverse():r)null!=e["s-sh"]&&(t.insertBefore(e,null!=i?i:null),e["s-sh"]=void 0,_i=!0)}jr.$flags$&=-2},Ti=(e,t)=>{jr.$flags$|=1;const i=Array.from(e.childNodes);if(e["s-sr"]&&r.experimentalSlotFixes){let t=e;for(;t=t.nextSibling;)t&&t["s-sn"]===e["s-sn"]&&t["s-sh"]===Zt&&i.push(t)}for(let e=i.length-1;e>=0;e--){const r=i[e];r["s-hn"]!==Zt&&r["s-ol"]&&(Ii(r).insertBefore(r,xi(r)),r["s-ol"].remove(),r["s-ol"]=void 0,r["s-sh"]=void 0,_i=!0),t&&Ti(r,t)}jr.$flags$&=-2},Si=(e,t,i,n,s,o)=>{let a,l=r.slotRelocation&&e["s-cr"]&&e["s-cr"].parentNode||e;for(r.shadowDom&&l.shadowRoot&&l.tagName===Zt&&(l=l.shadowRoot);s<=o;++s)n[s]&&(a=wi(null,i,s,e),a&&(n[s].$elm$=a,l.insertBefore(a,r.slotRelocation?xi(t):t)))},Ai=(e,t,i)=>{for(let n=t;n<=i;++n){const t=e[n];if(t){const e=t.$elm$;Ri(t),e&&(r.slotRelocation&&(vi=!0,e["s-ol"]?e["s-ol"].remove():Ti(e,!0)),e.remove())}}},Ei=(e,t,i=!1)=>e.$tag$===t.$tag$&&(r.slotRelocation&&"slot"===e.$tag$?e.$name$===t.$name$:!(r.vdomKey&&!i)||e.$key$===t.$key$),xi=e=>e&&e["s-ol"]||e,Ii=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,Ci=(e,t,i=!1)=>{const n=t.$elm$=e.$elm$,s=e.$children$,o=t.$children$,a=t.$tag$,l=t.$text$;let c;r.vdomText&&null!==l?r.vdomText&&r.slotRelocation&&(c=n["s-cr"])?c.parentNode.textContent=l:r.vdomText&&e.$text$!==l&&(n.data=l):(r.svg&&(bi="svg"===a||"foreignObject"!==a&&bi),(r.vdomAttribute||r.reflect)&&(r.slot&&"slot"===a&&!gi?r.experimentalSlotFixes&&e.$name$!==t.$name$&&(t.$elm$["s-sn"]=t.$name$||"",Mi(t.$elm$.parentElement)):yi(e,t,bi)),r.updatable&&null!==s&&null!==o?((e,t,i,n,s=!1)=>{let o,a,l=0,c=0,h=0,u=0,p=t.length-1,d=t[0],f=t[p],y=n.length-1,m=n[0],g=n[y];for(;l<=p&&c<=y;)if(null==d)d=t[++l];else if(null==f)f=t[--p];else if(null==m)m=n[++c];else if(null==g)g=n[--y];else if(Ei(d,m,s))Ci(d,m,s),d=t[++l],m=n[++c];else if(Ei(f,g,s))Ci(f,g,s),f=t[--p],g=n[--y];else if(Ei(d,g,s))!r.slotRelocation||"slot"!==d.$tag$&&"slot"!==g.$tag$||Ti(d.$elm$.parentNode,!1),Ci(d,g,s),e.insertBefore(d.$elm$,f.$elm$.nextSibling),d=t[++l],g=n[--y];else if(Ei(f,m,s))!r.slotRelocation||"slot"!==d.$tag$&&"slot"!==g.$tag$||Ti(f.$elm$.parentNode,!1),Ci(f,m,s),e.insertBefore(f.$elm$,d.$elm$),f=t[--p],m=n[++c];else{if(h=-1,r.vdomKey)for(u=l;u<=p;++u)if(t[u]&&null!==t[u].$key$&&t[u].$key$===m.$key$){h=u;break}r.vdomKey&&h>=0?(a=t[h],a.$tag$!==m.$tag$?o=wi(t&&t[c],i,h,e):(Ci(a,m,s),t[h]=void 0,o=a.$elm$),m=n[++c]):(o=wi(t&&t[c],i,c,e),m=n[++c]),o&&(r.slotRelocation?Ii(d.$elm$).insertBefore(o,xi(d.$elm$)):d.$elm$.parentNode.insertBefore(o,d.$elm$))}l>p?Si(e,null==n[y+1]?null:n[y+1].$elm$,i,n,c,y):r.updatable&&c>y&&Ai(t,l,p)})(n,s,t,o,i):null!==o?(r.updatable&&r.vdomText&&null!==e.$text$&&(n.textContent=""),Si(n,null,t,o,0,o.length-1)):r.updatable&&null!==s&&Ai(s,0,s.length-1),r.svg&&bi&&"svg"===a&&(bi=!1))},ki=e=>{const t=e.childNodes;for(const e of t)if(1===e.nodeType){if(e["s-sr"]){const i=e["s-sn"];e.hidden=!1;for(const r of t)if(r!==e)if(r["s-hn"]!==e["s-hn"]||""!==i){if(1===r.nodeType&&(i===r.getAttribute("slot")||i===r["s-sn"])||3===r.nodeType&&i===r["s-sn"]){e.hidden=!0;break}}else if(1===r.nodeType||3===r.nodeType&&""!==r.textContent.trim()){e.hidden=!0;break}}ki(e)}},Ni=[],Li=e=>{let t,i,n;for(const s of e.childNodes){if(s["s-sr"]&&(t=s["s-cr"])&&t.parentNode){i=t.parentNode.childNodes;const e=s["s-sn"];for(n=i.length-1;n>=0;n--)if(t=i[n],!(t["s-cn"]||t["s-nr"]||t["s-hn"]===s["s-hn"]||r.experimentalSlotFixes&&t["s-sh"]&&t["s-sh"]===s["s-hn"]))if(Oi(t,e)){let i=Ni.find((e=>e.$nodeToRelocate$===t));vi=!0,t["s-sn"]=t["s-sn"]||e,i?(i.$nodeToRelocate$["s-sh"]=s["s-hn"],i.$slotRefNode$=s):(t["s-sh"]=s["s-hn"],Ni.push({$slotRefNode$:s,$nodeToRelocate$:t})),t["s-sr"]&&Ni.map((e=>{Oi(e.$nodeToRelocate$,t["s-sn"])&&(i=Ni.find((e=>e.$nodeToRelocate$===t)),i&&!e.$slotRefNode$&&(e.$slotRefNode$=i.$slotRefNode$))}))}else Ni.some((e=>e.$nodeToRelocate$===t))||Ni.push({$nodeToRelocate$:t})}1===s.nodeType&&Li(s)}},Oi=(e,t)=>1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t,Ri=e=>{r.vdomRef&&(e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(Ri))},Pi=(e,t,i=!1)=>{var n,s,o,a,l;const c=e.$hostElement$,h=e.$cmpMeta$,u=e.$vnode$||Yt(null,null),p=Xt(t)?t:Kt(null,null,t);if(Zt=c.tagName,r.isDev&&Array.isArray(t)&&t.some(Xt))throw new Error(`The <Host> must be the single root component.\nLooks like the render() function of "${Zt.toLowerCase()}" is returning an array that contains the <Host>.\n\nThe render() function should look like this instead:\n\nrender() {\n  // Do not return an array\n  return (\n    <Host>{content}</Host>\n  );\n}\n  `);if(r.reflect&&h.$attrsToReflect$&&(p.$attrs$=p.$attrs$||{},h.$attrsToReflect$.map((([e,t])=>p.$attrs$[t]=c[e]))),i&&p.$attrs$)for(const e of Object.keys(p.$attrs$))c.hasAttribute(e)&&!["key","ref","style","class"].includes(e)&&(p.$attrs$[e]=c[e]);if(p.$tag$=null,p.$flags$|=4,e.$vnode$=p,p.$elm$=u.$elm$=r.shadowDom&&c.shadowRoot||c,(r.scoped||r.shadowDom)&&(Ft=c["s-sc"]),gi=Zr&&!!(1&h.$flags$),r.slotRelocation&&(jt=c["s-cr"],vi=!1),Ci(u,p,i),r.slotRelocation){if(jr.$flags$|=1,_i){Li(p.$elm$);for(const e of Ni){const t=e.$nodeToRelocate$;if(!t["s-ol"]){const e=r.isDebug||r.hydrateServerSide?Fi(t):Dr.createTextNode("");e["s-nr"]=t,t.parentNode.insertBefore(t["s-ol"]=e,t)}}for(const e of Ni){const t=e.$nodeToRelocate$,l=e.$slotRefNode$;if(l){const e=l.parentNode;let i=l.nextSibling;if(!r.experimentalSlotFixes||i&&1===i.nodeType){let r=null==(n=t["s-ol"])?void 0:n.previousSibling;for(;r;){let n=null!=(s=r["s-nr"])?s:null;if(n&&n["s-sn"]===t["s-sn"]&&e===n.parentNode){for(n=n.nextSibling;n===t||(null==n?void 0:n["s-sr"]);)n=null==n?void 0:n.nextSibling;if(!n||!n["s-nr"]){i=n;break}}r=r.previousSibling}}(!i&&e!==t.parentNode||t.nextSibling!==i)&&t!==i&&(r.experimentalSlotFixes||t["s-hn"]||!t["s-ol"]||(t["s-hn"]=t["s-ol"].parentNode.nodeName),e.insertBefore(t,i),1===t.nodeType&&(t.hidden=null!=(o=t["s-ih"])&&o)),t&&"function"==typeof l["s-rf"]&&l["s-rf"](t)}else 1===t.nodeType&&(i&&(t["s-ih"]=null!=(a=t.hidden)&&a),t.hidden=!0)}}vi&&ki(p.$elm$),jr.$flags$&=-2,Ni.length=0}if(r.experimentalScopedSlotChanges&&2&h.$flags$)for(const e of p.$elm$.childNodes)e["s-hn"]===Zt||e["s-sh"]||(i&&null==e["s-ih"]&&(e["s-ih"]=null!=(l=e.hidden)&&l),e.hidden=!0);jt=void 0},Di=e=>Dr.createComment(`<slot${e.$name$?' name="'+e.$name$+'"':""}> (host=${Zt.toLowerCase()})`),Fi=e=>Dr.createComment("org-location for "+(e.localName?`<${e.localName}> (host=${e["s-hn"]})`:`[${e.textContent}]`)),ji=(e,t)=>{r.asyncLoading&&t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise((t=>e.$onRenderResolve$=t)))},Zi=(e,t)=>{if(r.taskQueue&&r.updatable&&(e.$flags$|=16),r.asyncLoading&&4&e.$flags$)return void(e.$flags$|=512);ji(e,e.$ancestorComponent$);const i=()=>zi(e,t);return r.taskQueue?Qr(i):i()},zi=(e,t)=>{const i=e.$hostElement$,n=Gt("scheduleUpdate",e.$cmpMeta$.$tagName$),s=r.lazyLoad?e.$lazyInstance$:i;let o;return t?(r.lazyLoad&&r.hostListener&&(e.$flags$|=256,e.$queuedListeners$&&(e.$queuedListeners$.map((([e,t])=>Wi(s,e,t))),e.$queuedListeners$=void 0)),Ki(i,"componentWillLoad"),r.cmpWillLoad&&(o=Wi(s,"componentWillLoad"))):(Ki(i,"componentWillUpdate"),r.cmpWillUpdate&&(o=Wi(s,"componentWillUpdate"))),Ki(i,"componentWillRender"),r.cmpWillRender&&(o=Ui(o,(()=>Wi(s,"componentWillRender")))),n(),Ui(o,(()=>Gi(e,s,t)))},Ui=(e,t)=>Vi(e)?e.then(t):t(),Vi=e=>e instanceof Promise||e&&e.then&&"function"==typeof e.then,Gi=async(e,t,i)=>{var n;const s=e.$hostElement$,o=Gt("update",e.$cmpMeta$.$tagName$),a=s["s-rc"];r.style&&i&&(e=>{const t=e.$cmpMeta$,i=e.$hostElement$,n=t.$flags$,s=Gt("attachStyles",t.$tagName$),o=li(r.shadowDom&&Zr&&i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);(r.shadowDom||r.scoped)&&r.cssAnnotations&&10&n&&(i["s-sc"]=o,i.classList.add(o+"-h"),r.scoped&&2&n&&i.classList.add(o+"-s")),s()})(e);const l=Gt("render",e.$cmpMeta$.$tagName$);if(r.isDev&&(e.$flags$|=1024),r.hydrateServerSide?await Bi(e,t,s,i):Bi(e,t,s,i),r.isDev&&(e.$renderCount$=void 0===e.$renderCount$?1:e.$renderCount$+1,e.$flags$&=-1025),r.hydrateServerSide)try{Ji(s),i&&(1&e.$cmpMeta$.$flags$?s["s-en"]="":2&e.$cmpMeta$.$flags$&&(s["s-en"]="c"))}catch(e){xr(e,s)}if(r.asyncLoading&&a&&(a.map((e=>e())),s["s-rc"]=void 0),l(),o(),r.asyncLoading){const t=null!=(n=s["s-p"])?n:[],i=()=>$i(e);0===t.length?i():(Promise.all(t).then(i),e.$flags$|=4,t.length=0)}else $i(e)},Bi=(e,t,i,n)=>{const s=!!r.allRenderFn,o=!!r.lazyLoad,a=!!r.taskQueue,l=!!r.updatable;try{if(t=(s||t.render)&&t.render(),l&&a&&(e.$flags$&=-17),(l||o)&&(e.$flags$|=2),r.hasRenderFn||r.reflect)if(r.vdomRender||r.reflect){if(r.hydrateServerSide)return Promise.resolve(t).then((t=>Pi(e,t,n)));Pi(e,t,n)}else{const r=i.shadowRoot;1&e.$cmpMeta$.$flags$?r.textContent=t:i.textContent=t}}catch(t){xr(t,e.$hostElement$)}return null},$i=e=>{const t=e.$cmpMeta$.$tagName$,i=e.$hostElement$,n=Gt("postUpdate",t),s=r.lazyLoad?e.$lazyInstance$:i,o=e.$ancestorComponent$;r.cmpDidRender&&(r.isDev&&(e.$flags$|=1024),Wi(s,"componentDidRender"),r.isDev&&(e.$flags$&=-1025)),Ki(i,"componentDidRender"),64&e.$flags$?(r.cmpDidUpdate&&(r.isDev&&(e.$flags$|=1024),Wi(s,"componentDidUpdate"),r.isDev&&(e.$flags$&=-1025)),Ki(i,"componentDidUpdate"),n()):(e.$flags$|=64,r.asyncLoading&&r.cssAnnotations&&Yi(i),r.cmpDidLoad&&(r.isDev&&(e.$flags$|=2048),Wi(s,"componentDidLoad"),r.isDev&&(e.$flags$&=-2049)),Ki(i,"componentDidLoad"),n(),r.asyncLoading&&(e.$onReadyResolve$(i),o||qi(t))),r.method&&r.lazyLoad&&e.$onInstanceResolve$(i),r.asyncLoading&&(e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),512&e.$flags$&&Jr((()=>Zi(e,!1))),e.$flags$&=-517)},Hi=e=>{if(r.updatable&&(Ct.isBrowser||Ct.isTesting)){const t=Sr(e),i=t.$hostElement$.isConnected;return i&&2==(18&t.$flags$)&&Zi(t,!1),i}return!1},qi=e=>{r.cssAnnotations&&Yi(Dr.documentElement),r.asyncQueue&&(jr.$flags$|=2),Jr((()=>oi(Pr,"appload",{detail:{namespace:n}}))),r.profile&&performance.measure&&performance.measure(`[Stencil] ${n} initial load (by ${e})`,"st:app:start")},Wi=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(e){xr(e)}},Ki=(e,t)=>{r.lifecycleDOMEvents&&oi(e,"stencil_"+t,{bubbles:!0,composed:!0,detail:{namespace:n}})},Yi=e=>r.hydratedClass?e.classList.add("hydrated"):r.hydratedAttribute?e.setAttribute("hydrated",""):void 0,Ji=e=>{const t=e.children;if(null!=t)for(let e=0,i=t.length;e<i;e++){const i=t[e];"function"==typeof i.connectedCallback&&i.connectedCallback(),Ji(i)}},Xi=(e,t,i)=>{var n;const s=e.prototype;if(r.formAssociated&&64&t.$flags$&&1&i&&Wt.forEach((e=>Object.defineProperty(s,e,{value(...t){const i=Sr(this),n=r.lazyLoad?i.$hostElement$:this,s=r.lazyLoad?i.$lazyInstance$:n;if(s){const i=s[e];"function"==typeof i&&i.call(s,...t)}else i.$onReadyPromise$.then((i=>{const r=i[e];"function"==typeof r&&r.call(i,...t)}))}}))),r.member&&t.$members$){r.watchCallback&&e.watchers&&(t.$watchers$=e.watchers);const o=Object.entries(t.$members$);if(o.map((([e,[n]])=>{(r.prop||r.state)&&(31&n||(!r.lazyLoad||2&i)&&32&n)?Object.defineProperty(s,e,{get(){return t=e,Sr(this).$instanceValues$.get(t);var t},set(s){if(r.isDev){const r=Sr(this);1&i||0!==(r&&8&r.$flags$)||!(31&n)||1024&n||kr(`@Prop() "${e}" on <${t.$tagName$}> is immutable but was modified from within the component.\nMore information: https://stenciljs.com/docs/properties#prop-mutability`)}((e,t,i,n)=>{const s=Sr(e),o=r.lazyLoad?s.$hostElement$:e,a=s.$instanceValues$.get(t),l=s.$flags$,c=r.lazyLoad?s.$lazyInstance$:o;var h,u;h=i,u=n.$members$[t][0],i=null==h||Ot(h)?h:r.propBoolean&&4&u?"false"!==h&&(""===h||!!h):r.propNumber&&2&u?parseFloat(h):r.propString&&1&u?String(h):h;const p=Number.isNaN(a)&&Number.isNaN(i);if((!r.lazyLoad||!(8&l)||void 0===a)&&i!==a&&!p&&(s.$instanceValues$.set(t,i),r.isDev&&(1024&s.$flags$?kr(`The state/prop "${t}" changed during rendering. This can potentially lead to infinite-loops and other bugs.`,"\nElement",o,"\nNew value",i,"\nOld value",a):2048&s.$flags$&&kr(`The state/prop "${t}" changed during "componentDidLoad()", this triggers extra re-renders, try to setup on "componentWillLoad()"`,"\nElement",o,"\nNew value",i,"\nOld value",a)),!r.lazyLoad||c)){if(r.watchCallback&&n.$watchers$&&128&l){const e=n.$watchers$[t];e&&e.map((e=>{try{c[e](i,a,t)}catch(e){xr(e,o)}}))}if(r.updatable&&2==(18&l)){if(r.cmpShouldUpdate&&c.componentShouldUpdate&&!1===c.componentShouldUpdate(i,a,t))return;Zi(s,!1)}}})(this,e,s,t)},configurable:!0,enumerable:!0}):r.lazyLoad&&r.method&&1&i&&64&n&&Object.defineProperty(s,e,{value(...t){var i;const r=Sr(this);return null==(i=null==r?void 0:r.$onInstancePromise$)?void 0:i.then((()=>{var i;return null==(i=r.$lazyInstance$)?void 0:i[e](...t)}))}})})),r.observeAttribute&&(!r.lazyLoad||1&i)){const i=new Map;s.attributeChangedCallback=function(e,n,o){jr.jmp((()=>{var a;const l=i.get(e);if(this.hasOwnProperty(l))o=this[l],delete this[l];else{if(s.hasOwnProperty(l)&&"number"==typeof this[l]&&this[l]==o)return;if(null==l){const i=Sr(this),s=null==i?void 0:i.$flags$;if(s&&!(8&s)&&128&s&&o!==n){const s=r.lazyLoad?i.$hostElement$:this,l=r.lazyLoad?i.$lazyInstance$:s,c=null==(a=t.$watchers$)?void 0:a[e];null==c||c.forEach((t=>{null!=l[t]&&l[t].call(l,o,n,e)}))}return}}this[l]=(null!==o||"boolean"!=typeof this[l])&&o}))},e.observedAttributes=Array.from(new Set([...Object.keys(null!=(n=t.$watchers$)?n:{}),...o.filter((([e,t])=>15&t[0])).map((([e,n])=>{var s;const o=n[1]||e;return i.set(o,e),r.reflect&&512&n[0]&&(null==(s=t.$attrsToReflect$)||s.push([e,o])),o}))]))}}return e},Qi=async(e,t,n,s)=>{let o;if(!(32&t.$flags$)){t.$flags$|=32;const c=n.$lazyBundleId$;if((r.lazyLoad||r.hydrateClientSide)&&c){if(o=Lr(n,t,s),o.then){const e=(a=`st:load:${n.$tagName$}:${t.$modeName$}`,l=`[Stencil] Load module for <${n.$tagName$}>`,r.profile&&performance.mark?(0===performance.getEntriesByName(a,"mark").length&&performance.mark(a),()=>{0===performance.getEntriesByName(l,"measure").length&&performance.measure(l,a)}):()=>{});o=await o,e()}if((r.isDev||r.isDebug)&&!o)throw new Error(`Constructor for "${n.$tagName$}#${t.$modeName$}" was not found`);r.member&&!o.isProxied&&(r.watchCallback&&(n.$watchers$=o.watchers),Xi(o,n,2),o.isProxied=!0);const e=Gt("createInstance",n.$tagName$);r.member&&(t.$flags$|=8);try{new o(t)}catch(e){xr(e)}r.member&&(t.$flags$&=-9),r.watchCallback&&(t.$flags$|=128),e(),er(t.$lazyInstance$)}else o=e.constructor,customElements.whenDefined(n.$tagName$).then((()=>t.$flags$|=128));if(r.style&&o.style){let s=o.style;r.mode&&"string"!=typeof s&&(s=s[t.$modeName$=(e=>Rr.map((t=>t(e))).find((e=>!!e)))(e)],r.hydrateServerSide&&t.$modeName$&&e.setAttribute("s-mode",t.$modeName$));const a=ci(n,t.$modeName$);if(!Or.has(a)){const e=Gt("registerStyles",n.$tagName$);!r.hydrateServerSide&&r.shadowDom&&r.shadowDomShim&&8&n.$flags$&&(s=await i.e(2169).then(i.bind(i,92169)).then((e=>e.scopeCss(s,a,!1)))),((e,t,i)=>{let r=Or.get(e);Ur&&i?(r=r||new CSSStyleSheet,"string"==typeof r?r=t:r.replaceSync(t)):r=t,Or.set(e,r)})(a,s,!!(1&n.$flags$)),e()}}}var a,l;const c=t.$ancestorComponent$,h=()=>Zi(t,!0);r.asyncLoading&&c&&c["s-rc"]?c["s-rc"].push(h):h()},er=e=>{r.lazyLoad&&r.connectedCallback&&Wi(e,"connectedCallback")},tr=e=>{const t=e["s-cr"]=Dr.createComment(r.isDebug?`content-ref (host=${e.localName})`:"");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},ir=e=>{r.lazyLoad&&r.disconnectedCallback&&Wi(e,"disconnectedCallback"),r.cmpDidUnload&&Wi(e,"componentDidUnload")},rr=e=>{const t=e.cloneNode;e.cloneNode=function(e){const i=this,n=!!r.shadowDom&&i.shadowRoot&&Zr,s=t.call(i,!!n&&e);if(r.slot&&!n&&e){let e,t,n=0;const o=["s-id","s-cr","s-lr","s-rc","s-sc","s-p","s-cn","s-sr","s-sn","s-hn","s-ol","s-nr","s-si","s-rf"];for(;n<i.childNodes.length;n++)e=i.childNodes[n]["s-nr"],t=o.every((e=>!i.childNodes[n][e])),e&&(r.appendChildSlotFix&&s.__appendChild?s.__appendChild(e.cloneNode(!0)):s.appendChild(e.cloneNode(!0))),t&&s.appendChild(i.childNodes[n].cloneNode(!0))}return s}},nr=e=>{e.__appendChild=e.appendChild,e.appendChild=function(e){const t=e["s-sn"]=fr(e),i=yr(this.childNodes,t,this.tagName);if(i){const r=mr(i,t),n=r[r.length-1],s=n.parentNode.insertBefore(e,n.nextSibling);return ki(this),s}return this.__appendChild(e)}},sr=e=>{e.__removeChild=e.removeChild,e.removeChild=function(e){if(e&&void 0!==e["s-sn"]){const t=yr(this.childNodes,e["s-sn"],this.tagName);if(t){const i=mr(t,e["s-sn"]).find((t=>t===e));if(i)return i.remove(),void ki(this)}}return this.__removeChild(e)}},or=e=>{const t=e.prepend;e.prepend=function(...e){e.forEach((e=>{"string"==typeof e&&(e=this.ownerDocument.createTextNode(e));const i=e["s-sn"]=fr(e),r=yr(this.childNodes,i,this.tagName);if(r){const t=document.createTextNode("");t["s-nr"]=e,r["s-cr"].parentNode.__appendChild(t),e["s-ol"]=t;const n=mr(r,i)[0];return n.parentNode.insertBefore(e,n.nextSibling)}return 1===e.nodeType&&e.getAttribute("slot")&&(e.hidden=!0),t.call(this,e)}))}},ar=e=>{e.append=function(...e){e.forEach((e=>{"string"==typeof e&&(e=this.ownerDocument.createTextNode(e)),this.appendChild(e)}))}},lr=e=>{const t=e.insertAdjacentHTML;e.insertAdjacentHTML=function(e,i){if("afterbegin"!==e&&"beforeend"!==e)return t.call(this,e,i);const r=this.ownerDocument.createElement("_");let n;if(r.innerHTML=i,"afterbegin"===e)for(;n=r.firstChild;)this.prepend(n);else if("beforeend"===e)for(;n=r.firstChild;)this.append(n)}},cr=e=>{e.insertAdjacentText=function(e,t){this.insertAdjacentHTML(e,t)}},hr=e=>{const t=e.insertAdjacentElement;e.insertAdjacentElement=function(e,i){return"afterbegin"!==e&&"beforeend"!==e?t.call(this,e,i):"afterbegin"===e?(this.prepend(i),i):"beforeend"===e?(this.append(i),i):i}},ur=e=>{const t=Object.getOwnPropertyDescriptor(Node.prototype,"textContent");Object.defineProperty(e,"__textContent",t),r.experimentalScopedSlotChanges?Object.defineProperty(e,"textContent",{get(){return" "+dr(this.childNodes).map((e=>{var t,i;const r=[];let n=e.nextSibling;for(;n&&n["s-sn"]===e["s-sn"];)n.nodeType!==g.TEXT_NODE&&n.nodeType!==g.ELEMENT_NODE||r.push(null!=(i=null==(t=n.textContent)?void 0:t.trim())?i:""),n=n.nextSibling;return r.filter((e=>""!==e)).join(" ")})).filter((e=>""!==e)).join(" ")+" "},set(e){dr(this.childNodes).forEach((t=>{let i=t.nextSibling;for(;i&&i["s-sn"]===t["s-sn"];){const e=i;i=i.nextSibling,e.remove()}if(""===t["s-sn"]){const i=this.ownerDocument.createTextNode(e);i["s-sn"]="",t.parentElement.insertBefore(i,t.nextSibling)}else t.remove()}))}}):Object.defineProperty(e,"textContent",{get(){var e;const t=yr(this.childNodes,"",this.tagName);return(null==(e=null==t?void 0:t.nextSibling)?void 0:e.nodeType)===g.TEXT_NODE?t.nextSibling.textContent:t?t.textContent:this.__textContent},set(e){var t;const i=yr(this.childNodes,"",this.tagName);if((null==(t=null==i?void 0:i.nextSibling)?void 0:t.nodeType)===g.TEXT_NODE)i.nextSibling.textContent=e;else if(i)i.textContent=e;else{this.__textContent=e;const t=this["s-cr"];t&&this.insertBefore(t,this.firstChild)}}})},pr=(e,t)=>{class i extends Array{item(e){return this[e]}}if(8&t.$flags$){const t=e.__lookupGetter__("childNodes");Object.defineProperty(e,"children",{get(){return this.childNodes.map((e=>1===e.nodeType))}}),Object.defineProperty(e,"childElementCount",{get:()=>e.children.length}),Object.defineProperty(e,"childNodes",{get(){const e=t.call(this);if(!(1&jr.$flags$)&&2&Sr(this).$flags$){const t=new i;for(let i=0;i<e.length;i++){const r=e[i]["s-nr"];r&&t.push(r)}return t}return i.from(e)}})}},dr=e=>{const t=[];for(const i of Array.from(e))i["s-sr"]&&t.push(i),t.push(...dr(i.childNodes));return t},fr=e=>e["s-sn"]||1===e.nodeType&&e.getAttribute("slot")||"",yr=(e,t,i)=>{let r,n=0;for(;n<e.length;n++){if(r=e[n],r["s-sr"]&&r["s-sn"]===t&&r["s-hn"]===i)return r;if(r=yr(r.childNodes,t,i),r)return r}return null},mr=(e,t)=>{const i=[e];for(;(e=e.nextSibling)&&e["s-sn"]===t;)i.push(e);return i},gr=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};var n,s;r.member&&(i.$members$=t[2]),r.hostListener&&(i.$listeners$=t[3]),r.watchCallback&&(i.$watchers$=e.$watchers$),r.reflect&&(i.$attrsToReflect$=[]),r.shadowDom&&!Zr&&1&i.$flags$&&(i.$flags$|=8),r.experimentalSlotFixes?r.scoped&&2&i.$flags$&&(n=e.prototype,s=i,rr(n),nr(n),ar(n),or(n),hr(n),lr(n),cr(n),ur(n),pr(n,s),sr(n)):(r.slotChildNodesFix&&pr(e.prototype,i),r.cloneNodeFix&&rr(e.prototype),r.appendChildSlotFix&&nr(e.prototype),r.scopedSlotTextContentFix&&2&i.$flags$&&ur(e.prototype));const o=e.prototype.connectedCallback,a=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){Ar(this,i)},connectedCallback(){(e=>{if(!(1&jr.$flags$)){const t=Sr(e),i=t.$cmpMeta$,n=Gt("connectedCallback",i.$tagName$);if(r.hostListenerTargetParent&&_r(e,t,i.$listeners$,!0),1&t.$flags$)_r(e,t,i.$listeners$,!1),(null==t?void 0:t.$lazyInstance$)?er(t.$lazyInstance$):(null==t?void 0:t.$onReadyPromise$)&&t.$onReadyPromise$.then((()=>er(t.$lazyInstance$)));else{let n;if(t.$flags$|=1,r.hydrateClientSide&&(n=e.getAttribute(Bt),n)){if(r.shadowDom&&Zr&&1&i.$flags$){const t=r.mode?li(e.shadowRoot,i,e.getAttribute("s-mode")):li(e.shadowRoot,i);e.classList.remove(t+"-h",t+"-s")}((e,t,i,n)=>{const s=Gt("hydrateClient",t),o=e.shadowRoot,a=[],l=r.shadowDom&&o?[]:null,c=n.$vnode$=Yt(t,null);jr.$orgLocNodes$||ni(Dr.body,jr.$orgLocNodes$=new Map),e[Bt]=i,e.removeAttribute(Bt),ri(c,a,[],l,e,e,i),a.map((e=>{const i=e.$hostId$+"."+e.$nodeId$,r=jr.$orgLocNodes$.get(i),n=e.$elm$;r&&Zr&&""===r["s-en"]&&r.parentNode.insertBefore(n,r.nextSibling),o||(n["s-hn"]=t,r&&(n["s-ol"]=r,n["s-ol"]["s-nr"]=n)),jr.$orgLocNodes$.delete(i)})),r.shadowDom&&o&&l.map((e=>{e&&o.appendChild(e)})),s()})(e,i.$tagName$,n,t)}if(r.slotRelocation&&!n&&(r.hydrateServerSide||(r.slot||r.shadowDom)&&12&i.$flags$)&&tr(e),r.asyncLoading){let i=e;for(;i=i.parentNode||i.host;)if(r.hydrateClientSide&&1===i.nodeType&&i.hasAttribute("s-id")&&i["s-p"]||i["s-p"]){ji(t,t.$ancestorComponent$=i);break}}r.prop&&!r.hydrateServerSide&&i.$members$&&Object.entries(i.$members$).map((([t,[i]])=>{if(31&i&&e.hasOwnProperty(t)){const i=e[t];delete e[t],e[t]=i}})),r.initializeNextTick?Jr((()=>Qi(e,t,i))):Qi(e,t,i)}n()}})(this),r.connectedCallback&&o&&o.call(this)},disconnectedCallback(){(async e=>{if(!(1&jr.$flags$)){const t=Sr(e);r.hostListener&&t.$rmListeners$&&(t.$rmListeners$.map((e=>e())),t.$rmListeners$=void 0),r.lazyLoad?(null==t?void 0:t.$lazyInstance$)?ir(t.$lazyInstance$):(null==t?void 0:t.$onReadyPromise$)&&t.$onReadyPromise$.then((()=>ir(t.$lazyInstance$))):ir(e)}})(this),r.disconnectedCallback&&a&&a.call(this)},__attachShadow(){Zr?r.shadowDelegatesFocus?this.attachShadow({mode:"open",delegatesFocus:!!(16&i.$flags$)}):this.attachShadow({mode:"open"}):this.shadowRoot=this}}),e.is=i.$tagName$,Xi(e,i,3)},vr=(e,t)=>t,_r=(e,t,i,n)=>{r.hostListener&&i&&(r.hostListenerTargetParent&&(i=n?i.filter((([e])=>32&e)):i.filter((([e])=>!(32&e)))),i.map((([i,n,s])=>{const o=r.hostListenerTarget?wr(e,i):e,a=br(t,s),l=Mr(i);jr.ael(o,n,a,l),(t.$rmListeners$=t.$rmListeners$||[]).push((()=>jr.rel(o,n,a,l)))})))},br=(e,t)=>i=>{try{r.lazyLoad?256&e.$flags$?e.$lazyInstance$[t](i):(e.$queuedListeners$=e.$queuedListeners$||[]).push([t,i]):e.$hostElement$[t](i)}catch(e){xr(e)}},wr=(e,t)=>r.hostListenerTargetDocument&&4&t?Dr:r.hostListenerTargetWindow&&8&t?Pr:r.hostListenerTargetBody&&16&t?Dr.body:r.hostListenerTargetParent&&32&t?e.parentElement:e,Mr=e=>zr?{passive:!!(1&e),capture:!!(2&e)}:!!(2&e),Tr=r.hotModuleReplacement?window.__STENCIL_HOSTREFS__||(window.__STENCIL_HOSTREFS__=new WeakMap):new WeakMap,Sr=e=>Tr.get(e),Ar=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return r.isDev&&(i.$renderCount$=0),r.method&&r.lazyLoad&&(i.$onInstancePromise$=new Promise((e=>i.$onInstanceResolve$=e))),r.asyncLoading&&(i.$onReadyPromise$=new Promise((e=>i.$onReadyResolve$=e)),e["s-p"]=[],e["s-rc"]=[]),_r(e,i,t.$listeners$,!1),Tr.set(e,i)},Er=(e,t)=>t in e,xr=(e,t)=>(0,console.error)(e,t),Ir=r.isTesting?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],Cr=(...e)=>console.error(...Ir,...e),kr=(...e)=>console.warn(...Ir,...e),Nr=new Map,Lr=(e,t,n)=>{const s=e.$tagName$.replace(/-/g,"_"),o=e.$lazyBundleId$;if(r.isDev&&"string"!=typeof o)return void Cr(`Trying to lazily load component <${e.$tagName$}> with style mode "${t.$modeName$}", but it does not exist.`);const a=!r.hotModuleReplacement&&Nr.get(o);return a?a[s]:i(3199)(`./${o}.entry.js${r.hotModuleReplacement&&n?"?s-hmr="+n:""}`).then((e=>(r.hotModuleReplacement||Nr.set(o,e),e[s])),xr)},Or=new Map,Rr=[],Pr="undefined"!=typeof window?window:{},Dr=Pr.document||{head:{}},Fr=Pr.HTMLElement||class{},jr={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,r)=>e.addEventListener(t,i,r),rel:(e,t,i,r)=>e.removeEventListener(t,i,r),ce:(e,t)=>new CustomEvent(e,t)},Zr=!r.shadowDomShim||!r.shadowDom||(()=>(Dr.head.attachShadow+"").indexOf("[native")>-1)(),zr=(()=>{let e=!1;try{Dr.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch(e){}return e})(),Ur=!!r.constructableCSS&&(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(e){}return!1})(),Vr=0,Gr=!1,Br=[],$r=[],Hr=[],qr=(e,t)=>i=>{e.push(i),Gr||(Gr=!0,t&&4&jr.$flags$?Jr(Yr):jr.raf(Yr))},Wr=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(e){xr(e)}e.length=0},Kr=(e,t)=>{let i=0,r=0;for(;i<e.length&&(r=performance.now())<t;)try{e[i++](r)}catch(e){xr(e)}i===e.length?e.length=0:0!==i&&e.splice(0,i)},Yr=()=>{if(r.asyncQueue&&Vr++,Wr(Br),r.asyncQueue){const e=2==(6&jr.$flags$)?performance.now()+14*Math.ceil(.1*Vr):1/0;Kr($r,e),Kr(Hr,e),$r.length>0&&(Hr.push(...$r),$r.length=0),(Gr=Br.length+$r.length+Hr.length>0)?jr.raf(Yr):Vr=0}else Wr($r),(Gr=Br.length>0)&&jr.raf(Yr)},Jr=e=>Promise.resolve(undefined).then(e),Xr=qr(Br,!1),Qr=qr($r,!0)},3199:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=3199,e.exports=t},94622:(e,t,i)=>{"use strict";i.d(t,{config:()=>r});var r={portalUrl:"https://ns3171475.esribelux.eu/portal",webmapId:"c2e2f9af04af4d13b54e6adc38f2b05d"}},66801:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>O});var r=i(82392),n=i(38116),s=i(58842),o=i(48),a=i(84977),l=i(15565),c=i(11965),h=i(52686),u=i(80861),p=i(57725),d=i(37623),f=i(19759),y=i(81482),m=(i(6273),i(26325)),g=i(48524),v=i(44153),_=i(83382),b=i(43305),w=i(49112),M=i(73783),T=(i(67498),i(4631));const S=new Set(["ar","bs","ca","hr","cs","da","nl","en","et","fi","fr","de","el","he","hu","id","it","ja","ko","lv","lt","nb","pl","ro","ru","sr","es","sv","th","tr","uk","vi"]);let A=class extends M.A{constructor(e){super(e),this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps",this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;const e=(0,T.JK)().toLowerCase();switch(e){case"pt-br":return"pt-BR";case"pt-pt":return"pt-PT";case"zh-cn":return"zh-CN";case"zh-hk":return"zh-HK";case"zh-tw":return"zh-TW"}const t=(0,T.Z0)(e);return"pt"===t?"pt-BR":t&&S.has(t)?t:"global"}};(0,r._)([(0,y.MZ)()],A.prototype,"id",void 0),(0,r._)([(0,y.MZ)()],A.prototype,"language",void 0),(0,r._)([(0,y.MZ)()],A.prototype,"places",void 0),(0,r._)([(0,y.MZ)()],A.prototype,"serviceUrl",void 0),(0,r._)([(0,y.MZ)()],A.prototype,"worldview",void 0),A=(0,r._)([(0,m.$)("esri.support.BasemapStyle")],A);const E=A;var x,I=i(52380);let C=0,k=x=class extends((0,a.Te)(c.A)){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+C++,this.baseLayers=new s.A,this.referenceLayers=new s.A;const t=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"===e.type&&u.A.getLogger(this).error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=e=>{e.parent=null};this.addHandles([this.baseLayers.on("after-add",(e=>t(e.item))),this.referenceLayers.on("after-add",(e=>t(e.item))),this.baseLayers.on("after-remove",(e=>i(e.item))),this.referenceLayers.on("after-remove",(e=>i(e.item)))])}initialize(){this.when().catch((e=>{u.A.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const t of e)t.destroy();const t=this.referenceLayers.toArray();for(const e of t)e.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=(0,p.pR)(this.portalItem)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",(0,o.V)(e,this._get("baseLayers")))}_writeBaseLayers(e,t,i){const r=[];e?(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach((e=>{const t=(0,I.CJ)(e,i.webmap?i.webmap.getLayerJSONFromResourceInfo(e):null,i);null!=t&&r.push(t)})),this.referenceLayers.forEach((e=>{const t=(0,I.CJ)(e,i.webmap?i.webmap.getLayerJSONFromResourceInfo(e):null,i);null!=t&&("scene"!==e.type&&(t.isReference=!0),r.push(t))})),t.baseMapLayers=r):t.baseMapLayers=r}set referenceLayers(e){this._set("referenceLayers",(0,o.V)(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return(0,h.g)(this,(e=>{e(this.baseLayers,this.referenceLayers)}))}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map((e=>(0,l.Nb)(e)?e.clone():e)),referenceLayers:this.referenceLayers.map((e=>(0,l.Nb)(e)?e.clone():e))};return this.loaded&&(e.loadStatus="loaded"),new x({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t?.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map((e=>{const t=(0,l.o8)(e);return t.url&&(0,f.BQ)(t.url)&&(t.url=`https:${t.url}`),t.templateUrl&&(0,f.BQ)(t.templateUrl)&&(t.templateUrl=`https:${t.templateUrl}`),t}))),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:i,style:r}=this;(0,d.Te)(e);const n=[];if(t){const i=t.context?t.context.url:null;if(n.push(this._loadLayersFromJSON(t.data,i,e)),t.data.id&&!t.data.title){const e=t.data.id;n.push((0,w.q)(e).then((e=>{e&&this.read({title:e},t.context)})))}}else i?n.push(this._loadFromItem(i,e)):r&&n.push(this._loadFromStylesService(r,e));await Promise.all(n)}async _loadLayersFromJSON(e,t,r){const n=this.resourceInfo?.context,s=this.portalItem?.portal||n?.portal||null,o=L[n?.origin||""]??"web-map",{populateOperationalLayers:a}=await i.e(2387).then(i.bind(i,12387)),l=[];if((0,d.Te)(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const i={context:{...n,origin:o,url:t,portal:s,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},r=e=>"web-scene"===o&&"ArcGISSceneServiceLayer"===e.layerType||e.isReference,c=a(this.baseLayers,e.baseMapLayers.filter((e=>!r(e))),i);l.push(c);const h=a(this.referenceLayers,e.baseMapLayers.filter(r),i);l.push(h)}await Promise.allSettled(l)}async _loadFromItem(e,t){const i=await e.load(t),r=await i.fetchData("json",t),n=(0,f.An)(e.itemUrl??"");return this._set("resourceInfo",{data:r.baseMap??{},context:{origin:N[e.type||""]??"web-map",portal:e.portal||_.A.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||_.A.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,t)}async _loadFromStylesService(e,t){const i=`${e.serviceUrl}/${e.id}`,r=(await(0,n.A)(i,{query:{language:e.getLanguageParamValue(),places:e.places,worldview:e.worldview},signal:t?.signal})).data,s=(0,f.An)(i);return this._set("resourceInfo",{data:r.baseMap??{},context:{origin:"web-map",url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this._loadLayersFromJSON(this.resourceInfo.data,s,t)}static fromId(e){const t=w.H[e];return t?t.itemId?new x({portalItem:{id:t.itemId,portal:{url:"https://www.arcgis.com"}}}):x.fromJSON(t,{origin:t.is3d?"web-scene":"web-map"}):null}};(0,r._)([(0,y.MZ)({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,i,r){this._writeBaseLayers(e,t,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:s.A}},writer(e,t,i,r){this._writeBaseLayers(e,t,r)}}}}}})],k.prototype,"baseLayers",null),(0,r._)([(0,y.MZ)({type:String,json:{origins:{"web-scene":{write:!0}}}})],k.prototype,"id",void 0),(0,r._)([(0,y.MZ)({type:b.default})],k.prototype,"portalItem",void 0),(0,r._)([(0,y.MZ)()],k.prototype,"referenceLayers",null),(0,r._)([(0,y.MZ)({readOnly:!0})],k.prototype,"resourceInfo",void 0),(0,r._)([(0,y.MZ)({type:v.A})],k.prototype,"spatialReference",void 0),(0,r._)([(0,y.MZ)({type:E})],k.prototype,"style",void 0),(0,r._)([(0,y.MZ)()],k.prototype,"thumbnailUrl",void 0),(0,r._)([(0,y.MZ)({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],k.prototype,"title",void 0),(0,r._)([(0,g.K)("title")],k.prototype,"writeTitle",null),k=x=(0,r._)([(0,m.$)("esri.Basemap")],k);const N={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},L={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},O=k},93814:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var r,n,s=i(36137),o=i(4506),a=i(8636);function l(e){return(0,o.qE)((0,a.Vr)(e),0,255)}function c(e,t,i){return e=Number(e),isNaN(e)?i:e<t?t:e>i?i:e}function h(e,t){const i=e.toString(16).padStart(2,"0");return t?i.substring(0,1):i}class u{static blendColors(e,t,i,r=new u){return r.r=Math.round(e.r+(t.r-e.r)*i),r.g=Math.round(e.g+(t.g-e.g)*i),r.b=Math.round(e.b+(t.b-e.b)*i),r.a=e.a+(t.a-e.a)*i,r._sanitize()}static fromRgb(e,t){const i=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(i){const e=i[2].split(/\s*,\s*/),r=i[1];if("rgb"===r&&3===e.length||"rgba"===r&&4===e.length){const i=e[0];if("%"===i.charAt(i.length-1)){const i=e.map((e=>2.56*parseFloat(e)));return 4===e.length&&(i[3]=parseFloat(e[3])),u.fromArray(i,t)}return u.fromArray(e.map((e=>parseFloat(e))),t)}if("hsl"===r&&3===e.length||"hsla"===r&&4===e.length)return u.fromArray((0,s.z$)(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100,parseFloat(e[3])),t)}return null}static fromHex(e,t=new u){if("#"!==e[0]||isNaN(Number(`0x${e.substring(1)}`)))return null;switch(e.length){case 4:case 5:{const i=parseInt(e.substring(1,2),16),r=parseInt(e.substring(2,3),16),n=parseInt(e.substring(3,4),16),s=5===e.length?15:parseInt(e.substring(4),16);return u.fromArray([i+16*i,r+16*r,n+16*n,(s+16*s)/255],t)}case 7:case 9:{const i=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16),s=7===e.length?255:parseInt(e.substring(7),16);return u.fromArray([i,r,n,s/255],t)}default:return null}}static fromArray(e,t=new u){return t._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(t.a)&&(t.a=1),t._sanitize()}static fromString(e,t){const i=(0,s.V6)(e)?(0,s.TS)(e):null;return i&&u.fromArray(i,t)||u.fromRgb(e,t)||u.fromHex(e,t)}static fromJSON(e){return null!=e?new u([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return null!=e?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return null!=e?[e.r/255,e.g/255,e.b/255,null!=e.a?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return.299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return"string"==typeof e?u.fromString(e,this):Array.isArray(e)?u.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof u||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const t=e?.capitalize??!1,i=e?.digits??6,r=3===i||4===i,n=4===i||8===i,s=`#${h(this.r,r)}${h(this.g,r)}${h(this.b,r)}${n?h(Math.round(255*this.a),r):""}`;return t?s.toUpperCase():s}toCss(e=!1){const t=this.r+", "+this.g+", "+this.b;return e?`rgba(${t}, ${this.a})`:`rgb(${t})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=u.AlphaMode.ALWAYS){const t=l(this.r),i=l(this.g),r=l(this.b);return e===u.AlphaMode.ALWAYS||1!==this.a?[t,i,r,l(255*this.a)]:[t,i,r]}clone(){return new u(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return null!=e&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Math.round(c(this.r,0,255)),this.g=Math.round(c(this.g,0,255)),this.b=Math.round(c(this.b,0,255)),this.a=c(this.a,0,1),this}_set(e,t,i,r){this.r=e,this.g=t,this.b=i,this.a=r}}u.prototype.declaredClass="esri.Color",r=u||(u={}),(n=r.AlphaMode||(r.AlphaMode={}))[n.ALWAYS=0]="ALWAYS",n[n.UNLESS_OPAQUE=1]="UNLESS_OPAQUE";const p=u},20857:(e,t,i)=>{"use strict";i.d(t,{A:()=>m});var r,n=i(82392),s=i(3313),o=i(20879),a=i(3438),l=i(14755),c=i(84977),h=i(78851),u=i(81482),p=(i(6273),i(80861),i(67498),i(26325)),d=i(56053);function f(e){if(null==e)return null;const t={};for(const i in e){const r=e[i];r&&(t[i]=r.toJSON())}return 0!==Object.keys(t).length?t:null}let y=r=class extends((0,l.O)(c.oY)){constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:(0,h.c)(),configurable:!0})}normalizeCtorArgs(e,t,i,r){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:i,popupTemplate:r}}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new r({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const i of[t,this.sourceLayer,this.layer])if(i){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(e&&"defaultPopupTemplate"in i&&null!=i.defaultPopupTemplate)return i.defaultPopupTemplate}return null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,t){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:f(this.aggregateGeometries),geometry:null!=this.geometry?this.geometry.toJSON():null,symbol:null!=this.symbol?this.symbol.toJSON():null,attributes:(0,c.Wj)(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:this.popupTemplate?.toJSON()??null}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if("mesh"===t?.type){const i={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",i,i,e.action)}}_notifyLayer(e,t,i,r){if(!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:t,newValue:i};"origin-transform"===e&&(n.action=r),"attributes"===e&&(n.attributeName=r),this.layer.graphicChanged(n)}};(0,n._)([(0,u.MZ)({value:null,json:{read:function(e){if(!e)return null;const t={};for(const i in e){const r=(0,d.rS)(e[i]);r&&(t[i]=r)}return 0!==Object.keys(t).length?t:null}}})],y.prototype,"aggregateGeometries",null),(0,n._)([(0,u.MZ)({value:null})],y.prototype,"attributes",null),(0,n._)([(0,u.MZ)({value:null,types:s.yR,json:{read:d.rS}})],y.prototype,"geometry",null),(0,n._)([(0,u.MZ)({type:Boolean})],y.prototype,"isAggregate",void 0),(0,n._)([(0,u.MZ)({clonable:"reference"})],y.prototype,"layer",void 0),(0,n._)([(0,u.MZ)({clonable:"reference"})],y.prototype,"origin",void 0),(0,n._)([(0,u.MZ)({type:o.A})],y.prototype,"popupTemplate",void 0),(0,n._)([(0,u.MZ)({clonable:"reference"})],y.prototype,"sourceLayer",void 0),(0,n._)([(0,u.MZ)({value:null,types:a.Es})],y.prototype,"symbol",null),(0,n._)([(0,u.MZ)({type:Boolean,value:!0})],y.prototype,"visible",null),y=r=(0,n._)([(0,p.$)("esri.Graphic")],y),(y||(y={})).generateUID=h.c;const m=y},20879:(e,t,i)=>{"use strict";i.d(t,{A:()=>$});var r=i(82392),n=i(14755),s=i(58842),o=i(84977),a=i(15565),l=i(80861),c=i(37623),h=i(81482),u=i(77380),p=i(25376),d=i(26325),f=i(48524),y=i(8636),m=i(46227),g=i(6135),v=i(23547),_=i(60854),b=i(70261),w=i(79640),M=i(54213),T=i(57705),S=i(834);const A={base:null,key:"type",typeMap:{attachment:g.A,media:M.A,text:S.A,expression:b.A,field:w.A,relationship:T.A}};var E,x=i(47096),I=i(22980);i(6273),i(67498);let C=E=class extends o.oY{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new E({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};(0,r._)([(0,h.MZ)({type:Boolean,json:{write:!0}})],C.prototype,"returnTopmostRaster",void 0),(0,r._)([(0,h.MZ)({type:Boolean,json:{write:!0}})],C.prototype,"showNoDataRecords",void 0),C=E=(0,r._)([(0,d.$)("esri.popup.LayerOptions")],C);const k=C;var N,L=i(10357);let O=N=class extends o.oY{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new N({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?(0,a.o8)(this.orderByFields):null})}};(0,r._)([(0,h.MZ)({type:Boolean,json:{write:!0}})],O.prototype,"showRelatedRecords",void 0),(0,r._)([(0,h.MZ)({type:[L.A],json:{write:!0}})],O.prototype,"orderByFields",void 0),O=N=(0,r._)([(0,d.$)("esri.popup.RelatedRecordsInfo")],O);const R=O;var P=i(71973),D=i(33262),F=i(56851),j=i(46883);const Z="relationships/",z="expression/",U=s.A.ofType({key:"type",defaultKeyValue:"button",base:D.A,typeMap:{button:F.A,toggle:j.A}}),V={base:v.A,key:"type",typeMap:{media:M.A,custom:_.A,text:S.A,attachments:g.A,fields:w.A,expression:b.A,relationship:T.A}},G=new Set(["attachments","fields","media","text","expression","relationship"]);let B=class extends((0,n.O)(o.oY)){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map((e=>(0,y.aq)(V,e))):"string"==typeof e||"function"==typeof e||e instanceof HTMLElement||(0,c.$X)(e)?e:(l.A.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,t){const{popupElements:i}=t;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(t.description,t.mediaInfos,i):this._readPopupInfo(t)}writeContent(e,t,i,r){"string"!=typeof e?Array.isArray(e)&&(t.popupElements=e.filter((e=>G.has(e.type))).map((e=>e?.toJSON(r))),t.popupElements.forEach((e=>{"attachments"===e.type?this._writeAttachmentContent(t):"media"===e.type?this._writeMediaContent(e,t):"text"===e.type?this._writeTextContent(e,t):"relationship"===e.type&&this._writeRelationshipContent(e,t)}))):t.description=e}writeFieldInfos(e,t,i,r){const{content:n}=this,s=Array.isArray(n)?n:null;if(e){const i=s?s.filter((e=>"fields"===e.type)):[],n=i.length&&i.every((e=>e.fieldInfos?.length));t.fieldInfos=e.filter(Boolean).map((e=>{const t=e.toJSON(r);return n&&(t.visible=!1),t}))}if(s)for(const e of s)"fields"===e.type&&this._writeFieldsContent(e,t)}writeLayerOptions(e,t,i,r){t[i]=!e||null===e.showNoDataRecords&&null===e.returnTopmostRaster?null:e.toJSON(r)}writeTitle(e,t){t.title=e||""}async collectRequiredFields(e,t){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(e,t,[...i,...this._getContentExpressionInfos(this.content,i)]),(0,m._w)(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const t=new Set;return await this.collectRequiredFields(t,e),[...t].sort()}_writeFieldsContent(e,t){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const i=(0,a.o8)(e.fieldInfos);Array.isArray(t.fieldInfos)?i.forEach((e=>{const i=t.fieldInfos.find((t=>t.fieldName.toLowerCase()===e.fieldName.toLowerCase()));i?i.visible=!0:t.fieldInfos.push(e)})):t.fieldInfos=i}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,t){const i=e.orderByFields?.map((t=>this._toFieldOrderJSON(t,e.relationshipId)))||[],r=[...t.relatedRecordsInfo?.orderByFields||[],...i];t.relatedRecordsInfo={showRelatedRecords:!0,...r?.length&&{orderByFields:r}}}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const i=(0,a.o8)(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...i]:t.mediaInfos=i}_readPopupInfoElements(e,t,i){const r={description:!1,mediaInfos:!1};return i.map((i=>"media"===i.type?(i.mediaInfos||!t||r.mediaInfos||(i.mediaInfos=t,r.mediaInfos=!0),M.A.fromJSON(i)):"text"===i.type?(i.text||!e||r.description||(i.text=e,r.description=!0),S.A.fromJSON(i)):"attachments"===i.type?g.A.fromJSON(i):"fields"===i.type?w.A.fromJSON(i):"expression"===i.type?b.A.fromJSON(i):"relationship"===i.type?T.A.fromJSON(i):void 0)).filter(Boolean)}_toRelationshipContent(e){const{field:t,order:i}=e;if(!t?.startsWith(Z))return null;const r=t.replace(Z,"").split("/");if(2!==r.length)return null;const n=parseInt(r[0],10),s=r[1];return"number"==typeof n&&s?T.A.fromJSON({relationshipId:n,orderByFields:[{field:s,order:i}]}):null}_toFieldOrderJSON(e,t){const{order:i,field:r}=e;return{field:`${Z}${t}/${r}`,order:i}}_readPopupInfo({description:e,mediaInfos:t,showAttachments:i,relatedRecordsInfo:r={showRelatedRecords:!1}}){const n=[];e?n.push(new S.A({text:e})):n.push(new w.A),Array.isArray(t)&&t.length&&n.push(M.A.fromJSON({mediaInfos:t})),i&&n.push(g.A.fromJSON({displayType:"auto"}));const{showRelatedRecords:s,orderByFields:o}=r;return s&&o?.length&&o.forEach((e=>{const t=this._toRelationshipContent(e);t&&n.push(t)})),n.length?n:e}_getContentElementFields(e){const t=e?.type;if("attachments"===t)return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if("custom"===t)return e.outFields||[];if("fields"===t)return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if("media"===t){const t=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...t.reduce(((e,t)=>[...e,...this._getMediaInfoFields(t)]),[])]}return"text"===t?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:t,title:i,value:r}=e,n=r||{},{fields:s,normalizeField:o,tooltipField:a,sourceURL:l,linkURL:c}=n,h=[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(l),...this._extractFieldNames(c),...s??[]];return o&&h.push(o),a&&h.push(a),h}_getContentExpressionInfos(e,t){return Array.isArray(e)?e.reduce(((e,t)=>[...e,..."expression"===t.type&&t.expressionInfo?[t.expressionInfo]:[]]),t):[]}_getContentFields(e){return"string"==typeof e?this._extractFieldNames(e):Array.isArray(e)?e.reduce(((e,t)=>[...e,...this._getContentElementFields(t)]),[]):[]}async _collectExpressionInfoFields(e,t,i){i&&await Promise.all(i.map((i=>(0,m.Dx)(e,t,i.expression))))}_getFieldInfoFields(e){return e?e.filter((e=>void 0===e.visible||!!e.visible)).map((e=>e.fieldName)).filter((e=>!e.startsWith(Z)&&!e.startsWith(z))):[]}_getActionsFields(e){return e?e.toArray().reduce(((e,t)=>[...e,...this._getActionFields(t)]),[]):[]}_getActionFields(e){const{className:t,title:i,type:r}=e,n="button"===r||"toggle"===r?e.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(n)]}_getTitleFields(e){return"string"==typeof e?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||"string"!=typeof e)return[];const t=e.match(/{[^}]*}/g);if(!t)return[];const i=/\{(\w+):.+\}/,r=t.filter((e=>!(0===e.indexOf(`{${Z}`)||0===e.indexOf(`{${z}`)))).map((e=>e.replace(i,"{$1}")));return r?r.map((e=>e.slice(1,-1))):[]}};(0,r._)([(0,h.MZ)({type:U})],B.prototype,"actions",void 0),(0,r._)([(0,h.MZ)()],B.prototype,"content",void 0),(0,r._)([(0,u.w)("content")],B.prototype,"castContent",null),(0,r._)([(0,p.w)("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],B.prototype,"readContent",null),(0,r._)([(0,f.K)("content",{popupElements:{type:s.A.ofType(A)},showAttachments:{type:Boolean},mediaInfos:{type:s.A.ofType(P.g)},description:{type:String},relatedRecordsInfo:{type:R}})],B.prototype,"writeContent",null),(0,r._)([(0,h.MZ)({type:[x.A],json:{write:!0}})],B.prototype,"expressionInfos",void 0),(0,r._)([(0,h.MZ)({type:[I.A]})],B.prototype,"fieldInfos",void 0),(0,r._)([(0,f.K)("fieldInfos")],B.prototype,"writeFieldInfos",null),(0,r._)([(0,h.MZ)({type:k})],B.prototype,"layerOptions",void 0),(0,r._)([(0,f.K)("layerOptions")],B.prototype,"writeLayerOptions",null),(0,r._)([(0,h.MZ)({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],B.prototype,"lastEditInfoEnabled",void 0),(0,r._)([(0,h.MZ)()],B.prototype,"outFields",void 0),(0,r._)([(0,h.MZ)()],B.prototype,"overwriteActions",void 0),(0,r._)([(0,h.MZ)()],B.prototype,"returnGeometry",void 0),(0,r._)([(0,h.MZ)({json:{type:String}})],B.prototype,"title",void 0),(0,r._)([(0,f.K)("title")],B.prototype,"writeTitle",null),B=(0,r._)([(0,d.$)("esri.PopupTemplate")],B);const $=B},54736:(e,t,i)=>{"use strict";i.d(t,{A:()=>y});var r,n=i(82392),s=i(84977),o=i(11895),a=i(81482),l=(i(6273),i(80861),i(67498),i(25376)),c=i(26325),h=i(48524),u=i(23375);let p=r=class extends s.oY{static get allTime(){return d}static get empty(){return f}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?.getTime()??null}get isAllTime(){return this.equals(r.allTime)}get isEmpty(){return this.equals(r.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?.getTime()??null}clone(){return new r({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=this.start?.getTime()??this.start,i=this.end?.getTime()??this.end,r=e.start?.getTime()??e.start,n=e.end?.getTime()??e.end;return t===r&&i===n}expandTo(e,t=u.qU){if(this.isEmpty||this.isAllTime)return this.clone();let i=this.start;i&&(i=(0,o.lL)(i,e,t));let n=this.end;if(n){const i=(0,o.lL)(n,e,t);n=n.getTime()===i.getTime()?i:(0,o.S1)(i,1,e,t)}return new r({start:i,end:n})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return r.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=this.start?.getTime()??-1/0,i=this.end?.getTime()??1/0,n=e.start?.getTime()??-1/0,s=e.end?.getTime()??1/0;let o,a;if(n>=t&&n<=i?o=n:t>=n&&t<=s&&(o=t),i>=n&&i<=s?a=i:s>=t&&s<=i&&(a=s),null!=o&&null!=a&&!isNaN(o)&&!isNaN(a)){const e=new r;return e.start=o===-1/0?null:new Date(o),e.end=a===1/0?null:new Date(a),e}return r.empty}offset(e,t,i=u.qU){if(this.isEmpty||this.isAllTime)return this.clone();const n=new r,{start:s,end:a}=this;return null!=s&&(n.start=(0,o.S1)(s,e,t,i)),null!=a&&(n.end=(0,o.S1)(a,e,t,i)),n}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return d.clone();const t=null!=this.start&&null!=e.start?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=null!=this.end&&null!=e.end?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new r({start:t,end:i})}};(0,n._)([(0,a.MZ)({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"end",void 0),(0,n._)([(0,l.w)("end")],p.prototype,"readEnd",null),(0,n._)([(0,h.K)("end")],p.prototype,"writeEnd",null),(0,n._)([(0,a.MZ)({readOnly:!0,json:{read:!1}})],p.prototype,"isAllTime",null),(0,n._)([(0,a.MZ)({readOnly:!0,json:{read:!1}})],p.prototype,"isEmpty",null),(0,n._)([(0,a.MZ)({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"start",void 0),(0,n._)([(0,l.w)("start")],p.prototype,"readStart",null),(0,n._)([(0,h.K)("start")],p.prototype,"writeStart",null),p=r=(0,n._)([(0,c.$)("esri.TimeExtent")],p);const d=new p,f=new p({start:void 0,end:void 0}),y=p},85101:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var r=i(82392),n=i(14755),s=i(84977),o=i(11895),a=i(81482),l=(i(6273),i(80861),i(67498),i(85716)),c=i(26325),h=i(95752);let u=class extends((0,n.O)(s.oY)){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return(0,o.t)(this.value,this.unit,"milliseconds")}};(0,r._)([(0,l.e)(h.j,{nonNullable:!0})],u.prototype,"unit",void 0),(0,r._)([(0,a.MZ)({type:Number,json:{write:!0},nonNullable:!0})],u.prototype,"value",void 0),u=(0,r._)([(0,c.$)("esri.TimeInterval")],u);const p=u},39702:(e,t,i)=>{"use strict";i.d(t,{A:()=>S});var r=i(82392),n=i(14755),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325));let a=class extends n.P{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return null!=e&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};(0,r._)([(0,s.MZ)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],a.prototype,"row",void 0),(0,r._)([(0,s.MZ)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],a.prototype,"column",void 0),(0,r._)([(0,s.MZ)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],a.prototype,"rows",void 0),(0,r._)([(0,s.MZ)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],a.prototype,"columns",void 0),a=(0,r._)([(0,o.$)("esri.CameraLayout")],a);const l=a;var c=i(80575),h=i(84977),u=i(4506),p=i(77380),d=i(25376),f=i(48524),y=i(8636),m=i(8977);let g=class extends((0,n.O)(h.oY)){constructor(...e){super(...e),this.position=new m.A([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new l}normalizeCtorArgs(e,t,i,r){if(e&&"object"==typeof e&&("x"in e||Array.isArray(e))){const n={position:e};return null!=t&&(n.heading=t),null!=i&&(n.tilt=i),null!=r&&(n.fov=r),n}return e}writePosition(e,t,i,r){const n=e.clone();n.x=(0,y.GB)(e.x||0),n.y=(0,y.GB)(e.y||0),n.z=e.hasZ?(0,y.GB)(e.z||0):e.z,t[i]=n.write({},r)}readPosition(e,t){const i=new m.A;return i.read(e,t),i.x=(0,y.GB)(i.x||0),i.y=(0,y.GB)(i.y||0),i.z=i.hasZ?(0,y.GB)(i.z||0):i.z,i}equals(e){return null!=e&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};(0,r._)([(0,s.MZ)({type:m.A,json:{write:{isRequired:!0}}})],g.prototype,"position",void 0),(0,r._)([(0,f.K)("position")],g.prototype,"writePosition",null),(0,r._)([(0,d.w)("position")],g.prototype,"readPosition",null),(0,r._)([(0,s.MZ)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,p.w)((e=>c.ie.normalize((0,y.GB)(e))))],g.prototype,"heading",void 0),(0,r._)([(0,s.MZ)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,p.w)((e=>(0,u.qE)((0,y.GB)(e),-180,180)))],g.prototype,"tilt",void 0),(0,r._)([(0,s.MZ)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],g.prototype,"fov",void 0),(0,r._)([(0,s.MZ)({type:l,nonNullable:!0,json:{read:!1,write:!1}})],g.prototype,"layout",void 0),g=(0,r._)([(0,o.$)("esri.Camera")],g);const v=g;var _,b=i(3313),w=i(56053);let M=_=class extends h.oY{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new _({rotation:this.rotation,scale:this.scale,targetGeometry:null!=this.targetGeometry?this.targetGeometry.clone():null,camera:null!=this.camera?this.camera.clone():null})}};function T(){return{enabled:!this.camera}}(0,r._)([(0,s.MZ)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:T}}}}})],M.prototype,"rotation",void 0),(0,r._)([(0,p.w)("rotation")],M.prototype,"castRotation",null),(0,r._)([(0,s.MZ)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:T}}}}})],M.prototype,"scale",void 0),(0,r._)([(0,s.MZ)({types:b.yR,json:{read:w.rS,write:!0,origins:{"web-scene":{read:w.rS,write:{overridePolicy:T}}}}})],M.prototype,"targetGeometry",void 0),(0,r._)([(0,s.MZ)({type:v,json:{write:!0}})],M.prototype,"camera",void 0),M=_=(0,r._)([(0,o.$)("esri.Viewpoint")],M);const S=M},44764:(e,t,i)=>{"use strict";i.d(t,{s:()=>a});var r=i(32083),n=(i(38116),i(62991)),s=i(80861),o=i(19759);function a(e){if(!r.A.assetsPath)throw s.A.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new n.A("assets:path-not-set","config.assetsPath is not set");return(0,o.fj)(r.A.assetsPath,e)}},90618:(e,t,i)=>{"use strict";i.d(t,{c:()=>r,g:()=>n});var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},47313:(e,t,i)=>{"use strict";i.r(t),i.d(t,{G:()=>o,g:()=>a});var r=i(90618),n={exports:{}};!function(e,t){var i=function(){function e(e){if("number"==typeof e)return Y.Tc.Zg(e);if(null==e)return null;if(null!=se[e])return Y.Tc.Zg(se[e]);throw Error("Unrecognised Unit Type")}function t(e){if("number"==typeof e)return Y.Tc.Zg(e);if(null==e)return null;if(null!=oe[e])return Y.Tc.Zg(oe[e]);throw Error("Unrecognised Unit Type")}function i(e){if(e)switch(e){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function r(e,t,i,r){if(null==i||i.B())return null;switch(i.getType()){case Y.qn.Point:return e.exportPoint(t,i,r);case Y.qn.Polygon:return e.exportPolygon(t,i,r);case Y.qn.Polyline:return e.exportPolyline(t,i,r);case Y.qn.MultiPoint:return e.exportMultipoint(t,i,r);case Y.qn.Envelope:return e.exportExtent(t,i,r)}return null}function n(e,t,i,r){if(i.getType()!==Y.qn.Point)throw Error("Geometry not Point");return e.exportPoint(t,i,r)}function s(e,t,i){return e.convertToGEGeometry(t,i)}function o(e){var t=e.wkid;e=e.wkt2||e.wkt;var i=ae.get(t||e);return null==i&&(-1!==t&&null!=t?(i=Y.Eg.create(t),ae.set(t,i)):e&&(i=Y.Eg.qP(e),ae.set(e,i)),ce.has(t||e)&&i.VW(ce.get(t||e))),i}function a(e){var t,i,r;if(null==e)return null;var n=o(e);return e=n.Hd(),n=n.Kn(),(t={}).tolerance=n,t.unitType=null==e?-1:e.od,t.unitID=null==e?-1:e.Ec(),t.unitBaseFactor=null==e?0:e.ai,t.unitSquareDerivative=null==e?0:null!==(r=null===(i=Y.Tc.aG(e))||void 0===i?void 0:i.Ec())&&void 0!==r?r:0,t}function l(e,t,i,n){return null==i?null:(i=Y.$b.clip(s(e,le,i),s(e,le,n),o(t)),r(e,le,i,t))}function c(e,t,i,n){i=Y.$b.dl(s(e,le,i),s(e,le,n),o(t)),n=[];for(var a=0;a<i.length;a++)n.push(r(e,le,i[a],t));return n}function h(e,t,i,r){if(null==i||null==r)throw Error("Illegal Argument Exception");return Y.$b.contains(s(e,le,i),s(e,le,r),o(t))}function u(e,t,i,r){if(null==i||null==r)throw Error("Illegal Argument Exception");return Y.$b.BP(s(e,le,i),s(e,le,r),o(t))}function p(t,i,r,n,a){if(null==r||null==n)throw Error("Illegal Argument Exception");return Y.$b.tb(s(t,le,r),s(t,le,n),o(i),e(a))}function d(e,t,i,r){return!(null==i&&null!=r||null==r&&null!=i)&&Y.$b.Nb(s(e,le,i),s(e,le,r),o(t))}function f(e,t,i,r){if(null==i||null==r)throw Error("Illegal Argument Exception");return Y.$b.TS(s(e,le,i),s(e,le,r),o(t))}function y(e,t,i,r){if(null==i||null==r)throw Error("Illegal Argument Exception");return Y.$b.touches(s(e,le,i),s(e,le,r),o(t))}function m(e,t,i,r){if(null==i||null==r)throw Error("Illegal Argument Exception");return Y.$b.qY(s(e,le,i),s(e,le,r),o(t))}function g(e,t,i,r){if(null==i||null==r)throw Error("Illegal Argument Exception");return Y.$b.TP(s(e,le,i),s(e,le,r),o(t))}function v(e,t,i,r){if(null==i||null==r)throw Error("Illegal Argument Exception");return Y.$b.DU(s(e,le,i),s(e,le,r),o(t))}function _(e,t,i,r,n){if(null==i||null==r)throw Error("Illegal Argument Exception");return Y.$b.yB(s(e,le,i),s(e,le,r),o(t),n)}function b(e,t,i){if(null==i)throw Error("Illegal Argument Exception");return Y.$b.dT(s(e,le,i),o(t))}function w(e,t,i){if(null==i)throw Error("Illegal Argument Exception");return i=Y.$b.eC(s(e,le,i),o(t)),r(e,le,i,t)}function M(e,t,i,n){if(void 0===n&&(n=!1),null==i)throw Error("Illegal Argument Exception");if(Array.isArray(i)){var a=n,l=[];for(n=0;n<i.length;n++)l.push(s(e,le,i[n]));for(i=Y.$b.jP(l,a),a=Array(i.length),n=0;n<i.length;n++)a[n]=r(e,le,i[n],t);return a}return n=Y.$b.iP(s(e,le,i),o(t)),r(e,le,n,t)}function T(e,t,i,n){if(null==i||null==n)throw Error("Illegal Argument Exception");if(Array.isArray(i)){for(var a=[],l=0;l<i.length;l++)a.push(s(e,le,i[l]));for(i=Y.$b.QP(a,s(e,le,n),o(t)),n=Array(i.length),l=0;l<i.length;l++)n[l]=r(e,le,i[l],t);return n}return l=Y.$b.im(s(e,le,i),s(e,le,n),o(t)),r(e,le,l,t)}function S(e,t,i,n){if(null==i||null==n)throw Error("Illegal Argument Exception");if(Array.isArray(i)){for(var a=[],l=0;l<i.length;l++)a.push(s(e,le,i[l]));for(i=Y.$b.VX(a,s(e,le,n),o(t)),n=Array(i.length),l=0;l<i.length;l++)n[l]=r(e,le,i[l],t);return n}return l=Y.$b.ep(s(e,le,i),s(e,le,n),o(t)),r(e,le,l,t)}function A(e,t,i,n){if(null==i||null==n)throw Error("Illegal Argument Exception");if(Array.isArray(i)){for(var a=[],l=0;l<i.length;l++)a.push(s(e,le,i[l]));for(i=Y.$b.RS(a,s(e,le,n),o(t)),n=Array(i.length),l=0;l<i.length;l++)n[l]=r(e,le,i[l],t);return n}return l=Y.$b.Ea(s(e,le,i),s(e,le,n),o(t)),r(e,le,l,t)}function E(e,t,i,n){if(null==i)return null;var a=[];if(Array.isArray(i)){if(0===i.length)return null;for(n=0;n<i.length;n++)a.push(s(e,le,i[n]))}else a.push(s(e,le,i)),null!=n&&a.push(s(e,le,n));return r(e,le,Y.$b.jY(a,o(t)),t)}function x(t,i,n,a,l,c,h,u){var p=0;if(null!=c)switch(c){case"round":p=0;break;case"bevel":p=1;break;case"miter":p=2;break;case"square":p=3}if(Array.isArray(n)){if(null==n)t=null;else if(0===n.length)t=[];else{var d=[];for(c=0;c<n.length;c++)d.push(s(t,le,n[c]));for(n=Y.$b.BU(d,o(i),a,p,h,u,e(l)),a=Array(n.length),c=0;c<n.length;c++)a[c]=r(t,le,n[c],i);t=a}return t}return n=Y.$b.offset(s(t,le,n),o(i),a,p,h,u,e(l)),r(t,le,n,i)}function I(t,i,n,a,l,c){if(void 0===c&&(c=!1),Array.isArray(n)){if(!Array.isArray(a)){for(var h=[],u=0;u<n.length;u++)h.push(a);a=h}if(a.length!=n.length){if(0==a.length)throw Error("Illegal Argument Exception");h=[];var p=0;for(u=0;u<n.length;u++)void 0===a[u]?h.push(p):(h.push(a[u]),p=a[u]);a=h}return k(t,i,n,a,l,!1,c,"geodesic",NaN)}return n=Y.$b.buffer(s(t,le,n),o(i),a,e(l),!1,0,NaN),r(t,le,n,i)}function C(t,n,a,l,c,h,u,p){if(Array.isArray(a)){if(!Array.isArray(l)){for(var d=[],f=0;f<a.length;f++)d.push(l);l=d}if(l.length!==a.length){if(0===l.length)throw Error("Illegal Argument Exception");d=[];var y=0;for(f=0;f<a.length;f++)void 0===l[f]?d.push(y):(d.push(l[f]),y=l[f]);l=d}return k(t,n,a,l,c,!0,h,u,p)}return void 0===u&&(u=NaN),a=Y.$b.buffer(s(t,le,a),o(n),l,e(c),!0,i(h),u),r(t,le,a,n)}function k(t,n,a,l,c,h,u,p,d){if(void 0===d&&(d=NaN),null==a)return null;if(0===a.length)return[];for(var f=[],y=0;y<a.length;y++)f.push(s(t,le,a[y]));for(a=Y.$b.MN(f,o(n),l,e(c),h,u,i(p),d),l=Array(a.length),y=0;y<a.length;y++)l[y]=r(t,le,a[y],n);return l}function N(e,t,i,r,o){var a;return void 0===o&&(o=!0),i=Y.$b.nz(s(e,le,i),s(e,le,r),o),(a={}).coordinate=n(e,le,i.fz(),t),a.distance=i.hz(),a.isRightSide=i.Sz(),a.vertexIndex=i.Ua(),a.isEmpty=i.B(),a}function L(e,t,i,r){var o;return i=Y.$b.oz(s(e,le,i),s(e,le,r)),(o={}).coordinate=n(e,le,i.fz(),t),o.distance=i.hz(),o.isRightSide=i.Sz(),o.vertexIndex=i.Ua(),o.isEmpty=i.B(),o}function O(e,t,i,r,o,a){var l;for(i=Y.$b.pz(s(e,le,i),s(e,le,r),o,a),r=[],o=0;o<i.length;o++)!1===i[o].B()&&r.push(((l={}).coordinate=n(e,le,i[o].fz(),t),l.distance=i[o].hz(),l.isRightSide=i[o].Sz(),l.vertexIndex=i[o].Ua(),l.isEmpty=i[o].B(),l));return r}function R(t,i,n,a,l,c){return n=Y.$b.QQ(s(t,le,n),o(i),a,l,e(c)),r(t,le,n,i)}function P(t,i,n,a,l){return n=Y.$b.Qr(s(t,le,n),o(i),a,e(l)),r(t,le,n,i)}function D(t,i,n,a,l,c){return void 0===c&&(c=0),n=Y.$b.Wy(s(t,le,n),o(i),a,e(l),c),r(t,le,n,i)}function F(e,i,r,n){if(null==r)throw Error("Illegal Argument Exception");return Y.$b.JU(s(e,le,r),o(i),t(n))}function j(t,i,r,n){if(null==r)throw Error("Illegal Argument Exception");return Y.$b.KU(s(t,le,r),o(i),e(n))}function Z(e,r,n,a,l){if(null==n)throw Error("Illegal Argument Exception");return Y.$b.WQ(s(e,le,n),o(r),t(a),i(l))}function z(t,r,n,a,l){if(null==n)throw Error("Illegal Argument Exception");return Y.$b.ZQ(s(t,le,n),o(r),e(a),i(l))}function U(e){Y.NL.bind(e)}function V(e,t,i,r,n){var a=null,l=null;if(r){if(!n)throw Y.i.N("AOI missing Spatial Reference");a=s(e,le,r),l=o(n).fh()}return null!==(e=Y.gu.XR(o(t).fh(),o(i).fh(),a,l))?e:null}function G(e,t,i,r,n){var a=null,l=null;if(r){if(!n)throw Y.i.N("AOI missing Spatial Reference");a=s(e,le,r),l=o(n).fh()}return Y.gu.YR(o(t).fh(),o(i).fh(),a,l)}function B(e,t,i,r,n,s){if(void 0===n&&(n=null),void 0===s&&(s=null),s){var a=new Y.yC;a.Vu=s.densificationStep,a.Jr=s.centralMeridianOfOutputGCS,s.clipWithInputHorizon&&a.PW(s.clipWithInputHorizon),s.clipWithOutputHorizon&&a.QW(s.clipWithOutputHorizon)}if(!1===this.KY)throw Error("Projection Engine must be enabled using enableProjection");if(0===t.length)return[];if(n){if(!(s=n.getCachedGeTransformation(i,r)))e:{if(s=n,n=null,s){var l=s.getGTListEntry();if(null!==l){n=new Y.wC(null);for(var c=0,h=l.steps;c<h.length;c++){l=h[c];var u=new Y.Dx(l.geogtran);l.isInverse&&u.Qz(),n.add(u)}a=Y.vr.Nr(o(i).fh(),o(r).fh(),n,a),s.assignCachedGe(i,r,a),s=a;break e}}if(null===n&&s&&s.steps&&0<s.steps.length){for(n=new Y.wC(null),c=0,h=s.steps;c<h.length;c++)-1!=(l=h[c]).wkid&&null!=l.wkid?n.add(Y.Dx.create(l.wkid,l.isInverse)):n.add(Y.Dx.uP(l.wkt,l.isInverse));a=Y.vr.Nr(o(i).fh(),o(r).fh(),n,a),s.assignCachedGe(i,r,a),s=a}else s=Y.vr.Nr(o(i).fh(),o(r).fh(),n,a)}for(i=[],n=0;n<t.length;n++)a=t[n],i.push($(e,a,r,s))}else for(s=Y.vr.Nr(o(i).fh(),o(r).fh(),null),i=[],n=0;n<t.length;n++)a=t[n],i.push($(e,a,r,s));return i}function $(e,t,i,n){return t=Y.$b.zh(s(e,le,t),n),r(e,le,t,i)}function H(e,t){null!=e&&(e=e.wkid||e.wkt2||e.wkt,ce.has(e),ce.set(e,t),ae.has(e)&&ae.delete(e))}function q(e){null!=e&&(e=e.wkid||e.wkt2||e.wkt,ce.has(e)&&(ce.delete(e),ae.has(e)&&ae.delete(e)))}function W(e,t,i,n){if(null==i||null==n)return[];var a=[],l=0;for(i=Y.$b.QS(s(e,le,i),s(e,le,n),o(t))||[];l<i.length;l++)a.push(r(e,le,i[l],t));return a}var K,Y,J,X,Q=this&&this.__extends||function(){function e(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)}return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();!function(e){var t;(t=e.qn||(e.qn={}))[t.Unknown=0]="Unknown",t[t.Point=33]="Point",t[t.Line=322]="Line",t[t.Envelope=197]="Envelope",t[t.MultiPoint=550]="MultiPoint",t[t.Polyline=1607]="Polyline",t[t.Polygon=1736]="Polygon",function(e){e[e.enumMild=0]="enumMild",e[e.enumMedium=1]="enumMedium",e[e.enumHot=2]="enumHot"}(e.YK||(e.YK={}));var i=function(){function t(){this.description=null,this.VA=0}return t.prototype.getType=function(){return 0},t.prototype.Db=function(){return-1},t.prototype.Nf=function(e){this.vc(),e!=this.description&&this.sn(e)},t.prototype.sn=function(){},t.prototype.Jl=function(t){this.vc(),t!=this.description&&(t=e.ee.CR(this.description,t))!=this.description&&this.sn(t)},t.prototype.hasAttribute=function(e){return this.description.hasAttribute(e)},t.prototype.re=function(t){this.vc(),this.description.hasAttribute(t)||(t=e.ee.BR(this.description,t),this.sn(t))},t.prototype.Tg=function(){return null},t.prototype.bn=function(){},t.prototype.A=function(){},t.prototype.Qo=function(){},t.prototype.xc=function(e){this.A(e)},t.prototype.B=function(){return!0},t.prototype.Oa=function(){},t.prototype.Oc=function(){},t.prototype.Ia=function(){return null},t.prototype.copyTo=function(){},t.prototype.Ke=function(){return 0},t.prototype.Qb=function(){return 0},t.prototype.iG=function(){return this.hasAttribute(1)},t.tf=function(e){return 1+((192&e)>>6)>>1},t.Rn=function(e){return!!(32&e)},t.US=function(e){return!!(128&e)},t.yd=function(e){return!!(256&e)},t.xj=function(e){return!!(512&e)},t.Hc=function(e){return!!(1024&e)},t.prototype.Of=function(){var e=this.Ia();return this.copyTo(e),e},t.prototype.mg=function(){return null},t.jg=function(e){var t=e.Ia();return e.copyTo(t),t},t.prototype.vc=function(){0<=this.VA&&(this.VA+=2147483649)},t.Ax=function(i){var r=i.getType();if(t.xj(r))return i.I();if(i.B())return 0;if(197==r)return 4;if(33==r)return 1;if(t.yd(r))return 2;throw e.i.fa("missing type")},t}();e.aa=i}(Y||(Y={})),J=Y||(Y={}),X=function(){function e(){this.y=this.x=0}return e.construct=function(t,i){var r=new e;return r.x=t,r.y=i,r},e.al=function(t){var i=new e;return i.x=t.x,i.y=t.y,i},e.prototype.ma=function(e,t){this.x=e,this.y=t},e.prototype.L=function(e){this.x=e.x,this.y=e.y},e.prototype.fq=function(e,t){return this.x===e&&this.y===t},e.prototype.Rz=function(e){return 2220446049250313e-31>=Math.abs(this.x-e.x)&&2220446049250313e-31>=Math.abs(this.y-e.y)},e.prototype.qb=function(e){return this.x===e.x&&this.y===e.y},e.prototype.Nb=function(t){return t==this||t instanceof e&&this.x==t.x&&this.y==t.y},e.prototype.sub=function(e){this.x-=e.x,this.y-=e.y},e.prototype.uc=function(e,t){this.x=e.x-t.x,this.y=e.y-t.y},e.prototype.add=function(e,t){void 0!==t?(this.x=e.x+t.x,this.y=e.y+t.y):(this.x+=e.x,this.y+=e.y)},e.prototype.Sq=function(){this.x=-this.x,this.y=-this.y},e.prototype.mt=function(e){this.x=-e.x,this.y=-e.y},e.prototype.NS=function(e,t,i){this.x=e.x*(1-i)+t.x*i,this.y=e.y*(1-i)+t.y*i},e.prototype.Ct=function(e,t){this.x=this.x*e+t.x,this.y=this.y*e+t.y},e.prototype.HW=function(e,t,i){this.x=t.x*e+i.x,this.y=t.y*e+i.y},e.prototype.scale=function(e){this.x*=e,this.y*=e},e.prototype.compare=function(e){return this.y<e.y?-1:this.y>e.y?1:this.x<e.x?-1:this.x>e.x?1:0},e.prototype.normalize=function(){var e=this.length();0==e&&(this.x=1,this.y=0),this.x/=e,this.y/=e},e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.Sk=function(){return this.x*this.x+this.y*this.y},e.tb=function(e,t){return Math.sqrt(this.yc(e,t))},e.Oy=function(e,t,i,r){return e-=i,t-=r,Math.sqrt(e*e+t*t)},e.prototype.Qh=function(e){return this.x*e.x+this.y*e.y},e.prototype.fD=function(e){return Math.abs(this.x*e.x)+Math.abs(this.y*e.y)},e.prototype.wi=function(e){return this.x*e.y-this.y*e.x},e.prototype.Bt=function(e,t){var i=-this.x*t+this.y*e;this.x=this.x*e+this.y*t,this.y=i},e.prototype.Hv=function(){var e=this.x;this.x=-this.y,this.y=e},e.prototype.MG=function(e){this.x=-e.y,this.y=e.x},e.prototype.ar=function(){var e=this.x;this.x=this.y,this.y=-e},e.prototype.qu=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:0==this.x?4:3},e.nu=function(e,t){var i=e.qu(),r=t.qu();return r==i?0>(e=e.wi(t))?1:0<e?-1:0:i<r?-1:1},e.yc=function(e,t){var i=e.x-t.x;return i*i+(e=e.y-t.y)*e},e.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},e.prototype.Rc=function(){this.y=this.x=NaN},e.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},e.prototype.offset=function(t,i){var r=e.tb(t,i),n=e.construct(this.x,this.y);if(0==r)return e.tb(n,t);var s=new e;return s.L(i),s.sub(t),n.sub(t),n.wi(s)/r},e.Uq=function(e,t,i){var r=new J.Wb;r.set(t.x),r.sub(e.x);var n=new J.Wb;n.set(i.y),n.sub(e.y);var s=new J.Wb;s.set(t.y),s.sub(e.y);var o=new J.Wb;return o.set(i.x),o.sub(e.x),r.Ag(n),s.Ag(o),r.sub(s),r.ps()?(r=new J.hp(t.x),n=new J.hp(e.x),s=new J.hp(e.y),r=r.jt(n),e=(e=new J.hp(i.y)).jt(s),t=(t=new J.hp(t.y)).jt(s),i=(i=new J.hp(i.x)).jt(n),r=r.lr(e),t=t.lr(i),(r=r.lr(t)).nT()?-1:r.fS()?1:0):0>(i=r.value())?-1:0<i?1:0},e.prototype.cc=function(){return J.O.uj(J.O.uj())},e}(),J.h=X,function(e){var t=function(){function e(e){this.Fy=this.Mt=0,this.OX=e}return e.prototype.reset=function(){this.Fy=this.Mt=0},e.prototype.add=function(e){e-=this.Fy;var t=this.Mt+e;this.Fy=t-this.Mt-e,this.Mt=t},e.prototype.sub=function(e){this.add(-e)},e.prototype.rm=function(){return this.OX+this.Mt},e}();e.Fx=t,e.lc=function(){function e(){}return e.Cn=function(e,t){return 0<=t?Math.abs(e):-Math.abs(e)},e.sign=function(e){return 0>e?-1:0<e?1:0},e.RK=function(e){return e-360*Math.floor(e/360)},e.round=function(e){return Math.floor(e+.5)},e.ox=function(e){return e*e},e.hq=function(e,t,i){return.5>=i?e+(t-e)*i:t-(t-e)*(1-i)},e.OG=function(e,t,i,r){.5>=i?(r.x=e.x+(t.x-e.x)*i,r.y=e.y+(t.y-e.y)*i):(r.x=t.x-(t.x-e.x)*(1-i),r.y=t.y-(t.y-e.y)*(1-i))},e.lT=function(e,t,i,r,n,s){.5>=n?(s.x=e+(i-e)*n,s.y=t+(r-t)*n):(s.x=i-(i-e)*(1-n),s.y=r-(r-t)*(1-n))},e}()}(Y||(Y={})),function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.sa=0,e.na=0,e.pa=0,e.la=0,e.ka=null,e}return Q(i,t),i.prototype.ac=function(){return e.h.construct(this.sa,this.na)},i.prototype.Yp=function(e){e.x=this.sa,e.y=this.na},i.prototype.Dc=function(e){this.em(0,e)},i.prototype.ZB=function(t,i){this.em(0,e.h.construct(t,i))},i.prototype.To=function(e){this.hD(0,e)},i.prototype.setStart=function(e){this.uD(0,e)},i.prototype.wv=function(e,t){return this.Od(0,e,t)},i.prototype.YB=function(e,t,i){this.tn(0,e,t,i)},i.prototype.wc=function(){return e.h.construct(this.pa,this.la)},i.prototype.Tr=function(e){e.x=this.pa,e.y=this.la},i.prototype.Qc=function(e){this.em(1,e)},i.prototype.Ql=function(t,i){this.em(1,e.h.construct(t,i))},i.prototype.Po=function(e){this.hD(1,e)},i.prototype.setEnd=function(e){this.uD(1,e)},i.prototype.gv=function(e,t){return this.Od(1,e,t)},i.prototype.OB=function(e,t,i){this.tn(1,e,t,i)},i.prototype.Db=function(){return 1},i.prototype.B=function(){return this.Ac()},i.prototype.Oa=function(){},i.prototype.Ke=function(){return 0},i.prototype.Ea=function(e,t,i,r,n){return this.KM(e,t,i,r,n)},i.prototype.isIntersecting=function(e,t){return 0!=this.zr(e,t,!1)},i.prototype.qs=function(e,t){return this.ru(e,t,!1)},i.prototype.ru=function(){return null},i.prototype.Ac=function(){return!1},i.prototype.ay=function(t){if(this.vc(),null==this.ka&&0<t)this.ka=e.O.lg(2*t);else if(null!=this.ka&&this.ka.length<2*t){for(var i=this.ka.slice(0),r=this.ka.length;r<2*t;r++)i[r]=0;this.ka=i}},i.gM=function(e,t,i){if(0<i)var r=0;for(var n=0;n<i;n++)t[0+r]=e[0],r++},i.prototype.em=function(e,t){0!=e?(this.pa=t.x,this.la=t.y):(this.sa=t.x,this.na=t.y)},i.prototype.sn=function(t){if(null!=this.ka){for(var r=e.ee.Iw(t,this.description),n=[],s=i.Gg(this.description,0),o=i.Gg(this.description,1),a=i.Gg(t,0),l=i.Gg(t,1),c=0,h=1,u=t.Aa;h<u;h++){var p=t.kd(h),d=e.ra.Va(p);if(-1==r[h]){var f=e.ra.se(p);for(p=0;p<d;p++)n[a+c]=f,n[l+c]=f,c++}else for(f=this.description.$j(r[h])-2,p=0;p<d;p++)n[a+c]=this.ka[s+f],n[l+c]=this.ka[o+f],c++,f++}this.ka=n}this.description=t},i.prototype.hD=function(t,i){if(this.Ac())throw e.i.fa("empty geometry");i.Nf(this.description),i.Ac()&&i.un();for(var r=0;r<this.description.Aa;r++)for(var n=this.description.Ed(r),s=0,o=e.ra.Va(n);s<o;s++){var a=this.Od(t,n,s);i.setAttribute(n,s,a)}},i.prototype.uD=function(t,i){if(this.vc(),i.Ac())throw e.i.fa("empty geometry");for(var r=i.description,n=0,s=r.Aa;n<s;n++)for(var o=r.Ed(n),a=e.ra.Va(o),l=0;l<a;l++){var c=i.Uc(o,l);this.tn(t,o,l,c)}},i.prototype.Od=function(t,r,n){if(this.Ac())throw e.i.fa("This operation was performed on an Empty Geometry.");if(0==r)return 0!=t?0!=n?this.la:this.pa:0!=n?this.na:this.sa;if(n>=e.ra.Va(r))throw e.i.ce();var s=this.description.Pf(r);return 0<=s?(null!=this.ka&&this.ay(this.description.Ae.length-2),this.ka[i.Gg(this.description,t)+this.description.$j(s)-2+n]):e.ra.se(r)},i.prototype.tn=function(t,r,n,s){if(this.vc(),n>=e.ra.Va(r))throw e.i.ce();var o=this.description.Pf(r);0>o&&(this.re(r),o=this.description.Pf(r)),0==r?0!=t?0!=n?this.la=s:this.pa=s:0!=n?this.na=s:this.sa=s:(null==this.ka&&this.ay(this.description.Ae.length-2),this.ka[i.Gg(this.description,t)+this.description.$j(o)-2+n]=s)},i.prototype.copyTo=function(t){if(t.getType()!=this.getType())throw e.i.N();t.description=this.description,t.ay(this.description.Ae.length-2),i.gM(this.ka,t.ka,2*(this.description.Ae.length-2)),t.sa=this.sa,t.na=this.na,t.pa=this.pa,t.la=this.la,t.vc(),this.op(t)},i.prototype.Tg=function(t,i){var r=new e.Nc;return this.Ac()?(r.Oa(),r):(r.oa=this.Od(0,t,i),r.va=r.oa,r.Lk(this.Od(1,t,i)),r)},i.prototype.ZI=function(e){this.Ac()?e.Oa():(e.oa=this.Od(0,0,0),e.va=e.oa,e.Lk(this.Od(1,0,0)))},i.prototype.Tw=function(t,i){i.Nf(this.description),i.Cb(this.hc(t));for(var r=1,n=this.description.Aa;r<n;r++)for(var s=this.description.Ed(r),o=e.ra.Va(s),a=0;a<o;a++){var l=this.Uc(t,s,a);i.setAttribute(s,a,l)}},i.prototype.FM=function(e){if(this.description!=e.description||this.sa!=e.sa||this.pa!=e.pa||this.na!=e.na||this.la!=e.la)return!1;for(var t=0;t<2*(this.description.Ae.length-2);t++)if(this.ka[t]!=e.ka[t])return!1;return!0},i.prototype.BG=function(){return this.sa==this.pa&&this.na==this.la},i.prototype.reverse=function(){var t=this.sa;this.sa=this.pa,this.pa=t,t=this.na,this.na=this.la,this.la=t,t=1;for(var i=this.description.Aa;t<i;t++)for(var r=this.description.kd(t),n=0,s=e.ra.Va(r);n<s;n++){var o=this.Od(0,r,n),a=this.Od(1,r,n);this.tn(0,r,n,a),this.tn(1,r,n,o)}},i.prototype.zr=function(t,i,r){var n=this.getType(),s=t.getType();if(322===n){if(322==s)return e.yb.OM(this,t,i,r);throw e.i.Qa()}throw e.i.Qa()},i.prototype.KM=function(t,i,r,n,s){var o=this.getType(),a=t.getType();if(322===o){if(322==a)return e.yb.Zx(this,t,i,r,n,s);throw e.i.Qa()}throw e.i.Qa()},i.prototype.Tx=function(){return null},i.Gg=function(e,t){return t*(e.Ae.length-2)},i.prototype.hc=function(t,i){if(void 0===i)return i=new e.h,this.hc(t,i),i;e.lc.lT(this.sa,this.na,this.pa,this.la,t,i)},i.prototype.fe=function(){return null},i.prototype.eG=function(){return null},i.prototype.cq=function(){return null},i.prototype.Bi=function(){return null},i.prototype.Pn=function(){return null},i.prototype.kg=function(){return null},i.prototype.Ux=function(e,t){return void 0!==t?this.vx(t)-this.vx(e):this.vx(e)},i.prototype.op=function(){},i.prototype.dl=function(){return null},i.prototype.ah=function(){},i.prototype.Uc=function(){return null},i.prototype.Pe=function(){return null},i.prototype.vx=function(){return null},i.prototype.NG=function(){return null},i.prototype.tb=function(e,t){if(!t&&0!=this.zr(e,0,!1))return 0;t=17976931348623157e292;var i=this.ac(),r=e.fe(i,!1);return i.sub(e.hc(r)),(i=i.length())<t&&(t=i),i=this.wc(),r=e.fe(i,!1),i.sub(e.hc(r)),(i=i.length())<t&&(t=i),i=e.ac(),r=this.fe(i,!1),i.sub(this.hc(r)),(i=i.length())<t&&(t=i),i=e.wc(),r=this.fe(i,!1),i.sub(this.hc(r)),(i=i.length())<t&&(t=i),t},i.prototype.mg=function(){return e.pi.gm(this,null)},i}(e.aa);e.SC=t}(Y||(Y={})),new Y.h,function(e){var t;(t=e.$K||(e.$K={}))[t.Unknown=-1]="Unknown",t[t.Not=0]="Not",t[t.Weak=1]="Weak",t[t.Strong=2]="Strong",function(e){e[e.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",e[e.IsWeakSimple=2]="IsWeakSimple",e[e.IsStrongSimple=4]="IsStrongSimple",e[e.DirtyOGCFlags=8]="DirtyOGCFlags",e[e.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",e[e.DirtyExactIntervals=64]="DirtyExactIntervals",e[e.DirtyLooseIntervals=128]="DirtyLooseIntervals",e[e.DirtyIntervals=192]="DirtyIntervals",e[e.DirtyIsEnvelope=256]="DirtyIsEnvelope",e[e.DirtyLength2D=512]="DirtyLength2D",e[e.DirtyRingAreas2D=1024]="DirtyRingAreas2D",e[e.DirtyCoordinates=1993]="DirtyCoordinates",e[e.DirtyAllInternal=65535]="DirtyAllInternal",e[e.DirtyAll=16777215]="DirtyAll"}(e.MK||(e.MK={}));var i=function(t){function i(){var e=t.call(this)||this;return e.Hm=65535,e.wa=0,e.Pg=-1,e.Bb=null,e}return Q(i,t),i.prototype.op=function(){},i.prototype.$x=function(){},i.prototype.iy=function(){},i.prototype.I=function(){return this.wa},i.prototype.B=function(){return this.Ac()},i.prototype.Ac=function(){return 0==this.wa},i.prototype.ak=function(e){return!!(this.Hm&e)},i.prototype.Lf=function(e,t){this.Hm=t?this.Hm|e:this.Hm&~e},i.prototype.mc=function(){this.ak(32)&&this.bN()},i.prototype.wx=function(){if(this.Ac())throw e.i.fa("This operation was performed on an Empty Geometry.")},i.prototype.ve=function(t,i){if(0>t||t>=this.wa)throw e.i.fa("index out of bounds");this.mc(),i.Nf(this.description),i.B()&&i.un();for(var r=0;r<this.description.Aa;r++)for(var n=this.description.Ed(r),s=0,o=e.ra.Va(n);s<o;s++){var a=this.za[r].eg(o*t+s);i.setAttribute(n,s,a)}},i.prototype.Ht=function(t,i){this.mc();for(var r=i.description,n=0;n<r.Aa;n++)for(var s=r.Ed(n),o=e.ra.Va(s),a=0;a<o;a++){var l=i.Uc(s,a);this.setAttribute(s,t,a,l)}},i.prototype.D=function(t,i){if(0>t||t>=this.I())throw e.i.ce();this.mc(),this.za[0].tc(2*t,i)},i.prototype.Na=function(t){var i=new e.h;return this.D(t,i),i},i.prototype.Gc=function(e,t){this.za[0].tc(2*e,t)},i.prototype.Cb=function(t,i,r){if(0>t||t>=this.wa)throw e.i.ce();this.mc();var n=this.za[0];void 0!==r?(n.write(2*t,i),n.write(2*t+1,r)):n.Tt(2*t,i),this.Pc(1993)},i.prototype.Cz=function(){if(void 0>=this.I())throw e.i.ce();this.mc();var t=this.za[0],i=new e.Nd;return i.x=t.read(NaN),i.y=t.read(NaN),i.z=this.hasAttribute(1)?this.za[1].eg():e.ra.se(1),i},i.prototype.dC=function(t){if(0>t||t>=this.I())throw e.i.ce();this.re(1),this.mc(),this.Pc(1993);var i=this.za[0];i.write(2*t,(void 0).x),i.write(2*t+1,(void 0).y),this.za[1].pr(t,(void 0).z)},i.prototype.Uc=function(t,i,r){if(0>i||i>=this.wa)throw e.i.ce();var n=e.ra.Va(t);if(r>=n)throw e.i.ce();this.mc();var s=this.description.Pf(t);return 0<=s?this.za[s].eg(i*n+r):e.ra.se(t)},i.prototype.yF=function(e,t){return this.Uc(e,t)},i.prototype.setAttribute=function(t,i,r,n){if(0>i||i>=this.wa)throw e.i.ce();var s=e.ra.Va(t);if(r>=s)throw e.i.ce();this.re(t),this.mc(),t=this.description.Pf(t),this.Pc(1993),this.za[t].pr(i*s+r,n)},i.prototype.ub=function(e){return this.wx(),this.re(e),this.mc(),this.za[this.description.Pf(e)]},i.prototype.hn=function(t,i){if(null!=i&&e.ra.Tp(t)!=i.Tp())throw e.i.N();this.re(t),t=this.description.Pf(t),null==this.za&&(this.za=e.Yc.qI(this.description.Aa)),this.za[t]=i,this.Pc(16777215)},i.prototype.sn=function(t){var i=null;if(null!=this.za){var r=e.ee.Iw(t,this.description);i=[];for(var n=0,s=t.Aa;n<s;n++)-1!=r[n]&&(i[n]=this.za[r[n]])}this.description=t,this.za=i,this.Pg=-1,this.Pc(16777215)},i.prototype.AD=function(t){this.wu(!0),t instanceof e.l?this.$.A(t):this.$.Qo(t)},i.prototype.aN=function(t){this.wu(!1),t instanceof e.l?this.$.A(t):this.$.Qo(t)},i.prototype.bn=function(e){this.wu(!0),this.$.copyTo(e)},i.prototype.A=function(e){this.AD(e)},i.prototype.Qo=function(e){this.AD(e)},i.prototype.xc=function(e){this.aN(e)},i.prototype.Tg=function(t,i){var r=new e.Nc;return this.Ac()?(r.Oa(),r):(this.wu(!0),this.$.Tg(t,i))},i.prototype.cc=function(){var t=this.description.cc();if(!this.Ac())for(var i=this.I(),r=0,n=this.description.Aa;r<n;r++)t=this.za[r].An(t,0,i*e.ra.Va(this.description.Ed(r)));return t},i.prototype.Nb=function(t){if(t==this)return!0;if(!(t instanceof i&&this.description.Nb(t.description))||this.Ac()!=t.Ac())return!1;if(this.Ac())return!0;var r=this.I();if(r!=t.I())return!1;for(var n=0;n<this.description.Aa;n++){var s=this.description.kd(n),o=this.ub(s),a=t.ub(s);if(!o.Nb(a,0,r*e.ra.Va(s)))return!1}return!0},i.prototype.copyTo=function(t){if(t.getType()!=this.getType())throw e.i.N();this.dD(t)},i.prototype.dD=function(t){this.mc(),t.description=this.description,t.za=null;var i=this.description.Aa,r=null;if(null!=this.za){r=[];for(var n=0;n<i;n++)null!=this.za[n]&&(r[n]=this.za[n].GB(this.I()*e.ra.Va(this.description.Ed(n))))}null!=this.$?(t.$=this.$.Ia(),this.$.copyTo(t.$)):t.$=null,t.wa=this.wa,t.Hm=this.Hm,t.za=r;try{this.op(t)}catch(i){throw t.Oa(),e.i.fu()}},i.prototype.wD=function(){this.wa=0,this.Pg=-1,this.za=null,this.Pc(16777215)},i.prototype.Pc=function(e){16777215==e&&(this.Pg=-1,this.$x()),this.Hm|=e,this.lM(),this.vc()},i.prototype.wu=function(t){if(this.mc(),this.ak(192))if(null==this.$?this.$=new e.Fh(this.description):this.$.Nf(this.description),this.B())this.$.Oa();else{this.hy(t);for(var i=1;i<this.description.Aa;i++)for(var r=this.description.Ed(i),n=e.ra.Va(r),s=this.za[i],o=0;o<n;o++){var a=new e.Nc;a.Oa();for(var l=0;l<this.wa;l++){var c=s.eg(l*n+o);a.Zb(c)}this.$.setInterval(r,o,a)}t&&this.Lf(192,!1)}},i.prototype.hy=function(){this.$.Oa();for(var t=this.za[0],i=new e.h,r=0;r<this.wa;r++)t.tc(2*r,i),this.$.Zb(i)},i.prototype.yp=function(t){t.Oa();for(var i=this.za[0],r=new e.h,n=0;n<this.wa;n++)i.tc(2*n,r),t.Zb(r)},i.prototype.bN=function(){if(this.Pg<this.wa){null==this.za&&(this.za=e.Yc.qI(this.description.Aa)),this.Pg=2147483647;for(var t=0;t<this.description.Aa;t++){var i=this.description.Ed(t);if(null!=this.za[t]){var r=e.ra.Va(i),n=e.O.truncate(this.za[t].size/r);n<this.wa&&(n=e.O.truncate(this.Pg>this.wa+5?(5*this.wa+3)/4:this.wa),this.za[t].resize(n*r,e.ra.se(i))),n<this.Pg&&(this.Pg=n)}else this.za[t]=e.Yc.YE(i,this.wa),this.Pg=this.wa}}this.iy(),this.Lf(32,!1)},i.prototype.dm=function(t){if(0>t)throw e.i.N();t!=this.wa&&(this.wa=t,this.Pc(65535))},i.prototype.om=function(e){if(!this.ak(1)){if(!this.ak(2))return 0;if(this.QT>=e)return this.ak(8)?1:2}return-1},i.prototype.Ch=function(t,i){if(this.QT=i,-1==t)this.Lf(1,!0),this.Lf(8,!0);else if(this.Lf(1,!1),this.Lf(8,!0),0==t)this.Lf(2,!1),this.Lf(4,!1);else if(1==t)this.Lf(2,!0),this.Lf(4,!1);else{if(2!=t)throw e.i.fa("internal error.");this.Lf(2,!0),this.Lf(4,!0)}},i.prototype.lM=function(){null!=this.Bb&&(this.Bb=null)},i.prototype.kD=function(t,i,r,n){if(0>t||t>=this.wa)throw e.i.fa("index out of bounds");if(0>i||i>=this.wa)throw e.i.fa("index out of bounds");this.mc(),n.Nf(this.description),n.B()&&n.un();for(var s=0;s<this.description.Aa;s++)for(var o=this.description.Ed(s),a=0,l=e.ra.Va(o);a<l;a++){var c=this.za[s].eg(l*t+a),h=this.za[s].eg(l*i+a);n.setAttribute(o,a,e.lc.hq(c,h,r))}},i.prototype.yr=function(e,t){var i=this.za[0].o,r=i[2*e]-i[2*t];return e=i[2*e+1]-i[2*t+1],Math.sqrt(r*r+e*e)},i.prototype.KR=function(t){if(0>t||t>=this.wa)throw e.i.ce();this.mc();var i=new e.Sa;i.Nf(this.description),i.B()&&i.un();for(var r=0;r<this.description.Aa;r++)for(var n=this.description.kd(r),s=0,o=e.ra.Va(n);s<o;s++){var a=this.za[r].eg(o*t+s);i.setAttribute(n,s,a)}return i},i.prototype.Dh=function(t,i){if(0>t||t>=this.wa)throw e.i.ce();if(i.B())throw e.i.N();this.mc();for(var r=i.description,n=0;n<r.Aa;n++)for(var s=r.kd(n),o=e.ra.Va(s),a=0;a<o;a++){var l=i.Uc(s,a);this.setAttribute(s,t,a,l)}},i.prototype.lu=function(){return null},i.prototype.fj=function(){return null},i}(e.aa);e.Gx=i}(Y||(Y={})),function(e){var t=function(){function t(){this.ob=this.Zn=null,this.Tm=124234251,this.Rv=!0,this.Qe=-1,this.ob=new e.$c(7),this.Zn=null}return t.prototype.Vo=function(e){this.Zn=e},t.prototype.RP=function(){this.Rv=!1},t.prototype.De=function(e){this.ob.De(e)},t.prototype.Pr=function(e){var t=this.ob.Ce();return this.rX(t),this.uX(e,t),t},t.prototype.MP=function(e){this.ob.jd(e)},t.prototype.addElement=function(e,t){return-1==t&&(-1==this.Qe&&(this.Qe=this.Pr(-1)),t=this.Qe),this.FD(e,0,t)},t.prototype.KD=function(e){return-1==this.Qe&&(this.Qe=this.Pr(-1)),this.FD(e,1,this.Qe)},t.prototype.xn=function(e){-1==this.Qe&&(this.Qe=this.Pr(-1));var t=this.Qe,i=this.ob.o;if(-1==t||-1==i[7*t])return e=this.ob.Ll([-1,-1,-1,e,this.gl(),-1,-1]),(i=this.ob.o)[7*t]=e,this.vp(-1,e,t,i),e;var r=-1==t?-1:i[7*t+2];return e=this.ob.Ll([-1,-1,r,e,this.gl(),-1,-1]),(i=this.ob.o)[7*r+1]=e,this.oy(e,i),-1===i[7*e+2]&&(i[7*t]=e),this.vp(-1,e,t,i),e},t.prototype.zu=function(t,i,r,n){var s=-1;-1==s&&(-1==this.Qe&&(this.Qe=this.Pr(-1)),s=this.Qe);var o=this.ob.o;if(-1==s||-1==o[7*s])return r=this.ob.Ll([-1,-1,-1,r,this.gl(),-1,-1]),(o=this.ob.o)[7*s]=r,this.vp(-1,r,s,o),r;if(n){n=-1!=i?this.Zn.compare(this,r,i):-1;var a=-1!=t?this.Zn.compare(this,r,t):1}else n=-1,a=1;if(0==n||0==a)return o[7*s+3]=0==n?i:t,-1;for((-1!=i&&-1!=t?this.Tm>e.O.bB(this.Tm)>>1:-1!=i)?t=i:n=a,i=!0;;){if(0>n){if(-1==(a=o[7*t])){n=t,r=this.ob.Ll([-1,-1,t,r,this.gl(),-1,-1]),(o=this.ob.o)[7*t]=r;break}t=a}else{if(-1==(a=o[7*t+1])){n=o[7*t+6],r=this.ob.Ll([-1,-1,t,r,this.gl(),-1,-1]),(o=this.ob.o)[7*t+1]=r;break}t=a}i&&(n*=-1,i=!1)}return this.oy(r,o),-1===o[7*r+2]&&(o[7*s]=r),this.vp(n,r,s,o),r},t.prototype.FF=function(){return this.iR(this.Qe)},t.prototype.vd=function(e,t){t=-1==t?this.Qe:t,this.Rv?this.LP(e,t):this.iY(e,t)},t.prototype.search=function(e,t){for(t=this.sv(t);-1!=t;){var i=this.Zn.compare(this,e,t);if(0==i)return t;t=0>i?this.ll(t):this.Xp(t)}return-1},t.prototype.IW=function(e){for(var t=this.sv(-1),i=-1;-1!=t;){var r=e.compare(this,t);if(0==r)return t;0>r?t=this.ll(t):(i=t,t=this.Xp(t))}return i},t.prototype.uJ=function(e){for(var t=this.sv(-1),i=-1;-1!=t;){var r=e.compare(this,t);if(0==r)return t;0>r?(i=t,t=this.ll(t)):t=this.Xp(t)}return i},t.prototype.ja=function(e){return this.ob.T(e,3)},t.prototype.ll=function(e){return this.ob.T(e,0)},t.prototype.Xp=function(e){return this.ob.T(e,1)},t.prototype.getParent=function(e){return this.ob.T(e,2)},t.prototype.lb=function(e){return this.ob.T(e,6)},t.prototype.we=function(e){return this.ob.T(e,5)},t.prototype.rc=function(e){return-1==e?this.kl(this.Qe):this.kl(e)},t.prototype.Fc=function(e){return-1==e?this.Zr(this.Qe):this.Zr(e)},t.prototype.ZR=function(e){return-1==e?this.bG(this.Qe):this.bG(e)},t.prototype.Sj=function(e,t){this.NB(e,t)},t.prototype.sv=function(e){return-1==e?this.YF(this.Qe):this.YF(e)},t.prototype.clear=function(){this.ob.mj(!1),this.Qe=-1},t.prototype.size=function(e){return-1==e?this.$F(this.Qe):this.$F(e)},t.prototype.KN=function(e,t){for(var i=t[7*e],r=t[7*e+1],n=t[7*e+4];-1!=i||-1!=r;){var s=-1!=i?t[7*i+4]:2147483647;if(r=-1!=r?t[7*r+4]:2147483647,n<=Math.min(s,r))break;s<=r?this.sJ(i,t):this.rJ(e,t),i=t[7*e],r=t[7*e+1]}},t.prototype.oy=function(e,t){if(this.Rv)for(var i=t[7*e+4],r=t[7*e+2];-1!=r&&t[7*r+4]>i;)t[7*r]==e?this.sJ(e,t):this.rJ(r,t),r=t[7*e+2]},t.prototype.rJ=function(e,t){var i=t[7*e+1];t[7*i+2]=t[7*e+2],t[7*e+2]=i;var r=t[7*i];t[7*e+1]=r,-1!=r&&(t[7*r+2]=e),t[7*i]=e,-1!=(r=t[7*i+2])&&(t[7*r]==e?t[7*r]=i:t[7*r+1]=i)},t.prototype.sJ=function(e,t){var i=t[7*e+2];t[7*e+2]=t[7*i+2],t[7*i+2]=e;var r=t[7*e+1];t[7*i]=r,-1!=r&&(t[7*r+2]=i),t[7*e+1]=i,-1!=(r=t[7*e+2])&&(t[7*r]===i?t[7*r]=e:t[7*r+1]=e)},t.prototype.Pk=function(e,t){this.ob.S(e,2,t)},t.prototype.TB=function(e,t){this.ob.S(e,0,t)},t.prototype.XB=function(e,t){this.ob.S(e,1,t)},t.prototype.WB=function(e,t){this.ob.S(e,5,t)},t.prototype.ex=function(e,t){this.ob.S(e,6,t)},t.prototype.XJ=function(e,t){this.ob.S(t,0,e)},t.prototype.rX=function(e){this.ob.S(e,4,0)},t.prototype.uX=function(e,t){this.ob.S(t,5,e)},t.prototype.YF=function(e){return-1==e?-1:this.ob.T(e,0)},t.prototype.kl=function(e){return-1==e?-1:this.ob.T(e,1)},t.prototype.Zr=function(e){return-1==e?-1:this.ob.T(e,2)},t.prototype.iR=function(e){return-1==e?-1:this.ob.T(e,3)},t.prototype.$F=function(e){return-1==e?0:this.ob.T(e,4)},t.prototype.bG=function(e){return this.ob.T(e,5)},t.prototype.Pw=function(){return this.ob.Ll([-1,-1,-1,void 0,this.gl(),-1,-1])},t.prototype.fl=function(e){-1!=e&&this.ob.jd(e)},t.prototype.gl=function(){return this.Tm=e.O.bB(this.Tm),1073741823&this.Tm},t.prototype.FD=function(e,t,i){var r=this.ob.o;if(-1==i||-1==r[7*i])return e=this.ob.Ll([-1,-1,-1,e,this.gl(),-1,-1]),(r=this.ob.o)[7*i]=e,this.vp(-1,e,i,r),e;for(var n=-1==i?-1:r[7*i];;){var s=-1==t?1:this.Zn.compare(this,e,n);if(0>s){if(-1==(s=this.ll(n))){t=n,e=this.ob.Ll([-1,-1,n,e,this.gl(),-1,-1]),(r=this.ob.o)[7*n]=e;break}n=s}else{if(1==t&&0==s)return r[7*i+3]=n,-1;if(-1==(s=r[7*n+1])){t=r[7*n+6],e=this.ob.Ll([-1,-1,n,e,this.gl(),-1,-1]),(r=this.ob.o)[7*n+1]=e;break}n=s}}return this.oy(e,r),-1===r[7*e+2]&&(r[7*i]=e),this.vp(t,e,i,r),e},t.prototype.vp=function(e,t,i,r){if(-1!=e){var n=r[7*e+5];r[7*e+5]=t}else n=-1==i?-1:r[7*i+2];r[7*t+5]=n,-1!=n&&(r[7*n+6]=t),r[7*t+6]=e,e==(-1==i?-1:r[7*i+1])&&(r[7*i+1]=t),-1==e&&(r[7*i+2]=t),r[7*i+4]=(-1==i?0:r[7*i+4])+1},t.prototype.AB=function(e,t){var i=this.ob.o,r=i[7*e+5];e=i[7*e+6],-1!=r?i[7*r+6]=e:i[7*t+1]=e,-1!=e?i[7*e+5]=r:i[7*t+2]=r,i[7*t+4]=-1===t?-1:i[7*t+4]-1},t.prototype.iY=function(t,i){this.AB(t,i);var r=this.ll(t),n=this.Xp(t),s=this.getParent(t),o=t;if(-1!=r&&-1!=n){this.Tm=e.O.bB(this.Tm);var a=1073741823<this.Tm?this.lb(t):this.we(t),l=this.getParent(a)==t;this.ob.gC(t,a,0),this.ob.gC(t,a,1),this.ob.gC(t,a,2),-1!=s?this.ll(s)==t?this.TB(s,a):this.XB(s,a):this.XJ(a,i),l?(r==a?(this.TB(a,t),this.Pk(n,a)):n==a&&(this.XB(a,t),this.Pk(r,a)),this.Pk(t,a),s=a):(this.Pk(r,a),this.Pk(n,a),s=this.getParent(t),o=a),r=this.ll(t),n=this.Xp(t),-1!=r&&this.Pk(r,t),-1!=n&&this.Pk(n,t)}r=-1!=r?r:n,-1==s?this.XJ(r,i):this.ll(s)==o?this.TB(s,r):this.XB(s,r),-1!=r&&this.Pk(r,s),this.fl(t)},t.prototype.LP=function(e,t){var i=this.ob.o;i[7*e+4]=2147483647;var r=-1,n=-1,s=-1===t?-1:i[7*t],o=s==e;if(o&&(r=i[7*s],n=i[7*s+1],-1==r&&-1==n))return this.AB(s,t),this.fl(s),void(i[7*t]=-1);this.KN(e,i),-1!=(s=i[7*e+2])&&(i[7*s]==e?i[7*s]=-1:i[7*s+1]=-1),this.AB(e,t),this.fl(e),o&&(i[7*t]=-1==r||-1!=i[7*r+2]?n:r)},t.prototype.NB=function(e,t){this.ob.S(e,3,t)},t}();e.Yj=t}(Y||(Y={})),function(e){var t=function(){function t(e,t){void 0!==e&&this.K(e,t)}return t.prototype.K=function(e,t){this.oa=e,this.va=t,this.normalize()},t.prototype.isIntersecting=function(e){return this.oa<=e.oa?this.va>=e.oa:e.va>=this.oa},t.prototype.move=function(e){this.B()||(this.oa+=e,this.va+=e)},t.prototype.normalize=function(){if(!isNaN(this.oa)){if(this.oa>this.va){var e=this.oa;this.oa=this.va,this.va=e}isNaN(this.va)&&this.Oa()}},t.prototype.Oa=function(){this.va=this.oa=NaN},t.prototype.B=function(){return isNaN(this.oa)},t.prototype.Zb=function(e){"number"==typeof e?this.B()?this.va=this.oa=e:this.Lk(e):e.B()||(this.B()?(this.oa=e.oa,this.va=e.va):(this.oa>e.oa&&(this.oa=e.oa),this.va<e.va&&(this.va=e.va),this.oa>this.va&&this.Oa()))},t.prototype.Lk=function(e){e<this.oa?this.oa=e:e>this.va&&(this.va=e)},t.prototype.contains=function(e){return"number"==typeof e?e>=this.oa&&e<=this.va:e.oa>=this.oa&&e.va<=this.va},t.prototype.Ea=function(e){this.B()||e.B()?this.Oa():(this.oa<e.oa&&(this.oa=e.oa),this.va>e.va&&(this.va=e.va),this.oa>this.va&&this.Oa())},t.prototype.W=function(e){this.B()||(this.oa-=e,this.va+=e,this.va<this.oa&&this.Oa())},t.prototype.xr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.oa)+Math.abs(this.va)+1)},t.prototype.KB=function(e,t){e>t?(this.oa=t,this.va=e):(this.oa=e,this.va=t)},t.prototype.It=function(t){return e.O.Rk(t,this.oa,this.va)},t.prototype.R=function(){return this.va-this.oa},t.prototype.sf=function(){return.5*(this.oa+this.va)},t.prototype.Nb=function(e){return e==this||e instanceof t&&(!(!this.B()||!e.B())||this.oa==e.oa&&this.va==e.va)},t.prototype.cc=function(){return e.O.uj(e.O.uj())},t}();e.Nc=t}(Y||(Y={})),function(e){var t=new e.Nc,i=new e.Nc,r=function(){this.ne=null,this.pb=-1,this.sb=new e.yb,this.qA=55555555,this.Tv=this.Vv=!1,this.Uf=new e.Nc,this.Uf.KB(0,0)};e.IY=r;var n=function(){function n(t,i,n){this.g=t,this.Hk=NaN,this.NH=this.Kq=0,this.OH=NaN,this.qa=i,this.Nq=10*i,this.PH=this.QH=NaN,this.rg=!1,this.Dm=this.gt=this.Lo=this.Xs=this.Ws=-1,this.gA=n,this.TA=new r,this.YH=new r,e.O.truncate(3*t.fd/2)}return n.prototype.mG=function(e,t,i,r){e.ne=null===r?null:r[i[5*t]],e.Tv=null!=e.ne,e.Tv||(-1!==(r=i[5*t+2])&&this.g.mW(i[5*t],i[5*r],e.sb),e.ne=e.sb,e.Uf.KB(e.sb.sa,e.sb.pa),e.Uf.va+=this.qa,e.sb.rI(),e.Vv=e.sb.la==e.sb.na,e.Vv||(e.qA=(e.sb.pa-e.sb.sa)/(e.sb.la-e.sb.na)))},n.prototype.OO=function(e,t){var i=e.zr(t,this.qa,!0);return 0!=i?2==i?this.Qy():this.xi():(e.Yp(te),e.Tr(ie),t.Yp(re),t.Tr(ne),ee.ma(this.Kq,this.Hk),te.qb(re)&&this.Hk==te.y?0>ie.compare(ne)?ee.L(ie):ee.L(ne):te.qb(ne)&&this.Hk==te.y?0>ie.compare(re)?ee.L(ie):ee.L(re):re.qb(ie)&&this.Hk==re.y?0>te.compare(ne)?ee.L(te):ee.L(ne):ie.qb(ne)&&this.Hk==ie.y&&(0>te.compare(re)?ee.L(te):ee.L(re)),e.Pe(ee.y,ee.x)<t.Pe(ee.y,ee.x)?-1:1)},n.prototype.MO=function(e,t){if(e.sb.na==t.sb.na&&e.sb.sa==t.sb.sa)return e.sb.la==t.sb.la&&e.sb.pa==t.sb.pa?this.gA?this.Qy():0:this.PE(e,t);if(e.sb.la==t.sb.la&&e.sb.pa==t.sb.pa)return this.OE(e,t);var i=this.OE(e,t);return e=this.PE(e,t),0>i&&0>e?-1:0<i&&0<e?1:this.xi()},n.prototype.IO=function(e,t){if(e.pa>t.pa){if(t.pa>t.sa&&t.la-t.na<2*this.qa&&e.vi(t.pa,t.la,this.qa))return this.xi()}else if((t.la-t.na)/(t.pa-t.sa)*(e.pa-e.sa)<this.Nq&&t.vi(e.pa,e.la,this.qa))return this.xi();return 1},n.prototype.JO=function(e,t){if(e.sa<t.sa){if(t.pa>t.sa&&t.la-t.na<2*this.qa&&e.vi(t.pa,t.la,this.qa))return this.xi()}else if((t.la-t.na)/(t.pa-t.sa)*(e.sa-e.pa)<this.Nq&&t.vi(e.sa,e.na,this.qa))return this.xi();return-1},n.prototype.KO=function(t,i){var r=new e.h;r.uc(i.wc(),i.ac()),r.ar(),r.normalize();var n=new e.h;n.uc(t.ac(),i.ac());var s=new e.h;s.uc(t.wc(),i.ac()),n=n.Qh(r),r=s.Qh(r),s=Math.abs(n);var o=Math.abs(r);if(s<o){if(s<this.Nq&&i.vi(t.sa,t.na,this.qa))return this.xi()}else if(o<this.Nq&&i.vi(t.pa,t.la,this.qa))return this.xi();return 0>n&&0>r?-1:0<n&&0<r?1:this.xi()},n.prototype.NE=function(e,t){return e.na==t.na&&e.sa==t.sa?this.IO(e,t):e.la==t.la&&e.pa==t.pa?this.JO(e,t):this.KO(e,t)},n.prototype.LO=function(e,t){return e.la==t.la&&e.pa==t.pa&&e.na==t.na&&e.sa==t.sa?this.gA?this.Qy():0:this.xi()},n.prototype.OE=function(e,t){var i=1;if(e.sb.na<t.sb.na){i=-1;var r=e;e=t,t=r}e=e.sb,r=t.sb;var n=e.sa-r.sa;t=t.qA*(e.na-r.na);var s=this.Nq;return n<t-s?-i:n>t+s?i:r.vi(e.sa,e.na,this.qa)?this.xi():n<t?-i:i},n.prototype.PE=function(e,t){var i=1;if(t.sb.la<e.sb.la){i=-1;var r=e;e=t,t=r}e=e.sb,r=t.sb;var n=e.pa-r.sa;t=t.qA*(e.la-r.na);var s=this.Nq;return n<t-s?-i:n>t+s?i:r.vi(e.pa,e.la,this.qa)?this.xi():n<t?-i:i},n.prototype.Qy=function(){return this.rg=!0,this.Ni=new e.Md(5,this.Lo,this.gt),-1},n.prototype.xi=function(){return this.rg=!0,this.gA?this.Ni=new e.Md(4,this.Lo,this.gt):this.gt=this.Lo=this.Xs=this.Ws=-1,-1},n.prototype.NO=function(e,r,n,s){if(this.rg)return-1;var o=this.OH==this.Hk&&this.NH==this.Kq;if(o&&e==this.Ws)var a=this.PH;else a=NaN,this.Ws=-1;return o&&r==this.Xs?o=this.QH:(o=NaN,this.Xs=-1),n.ne.ZI(t),s.ne.ZI(i),t.va<i.oa?-1:i.va<t.oa?1:(this.OH=this.Hk,this.NH=this.Kq,isNaN(a)&&(this.Ws=e,this.PH=a=e=n.ne.Pe(this.Hk,this.Kq)),isNaN(o)&&(this.Xs=r,this.QH=o=e=s.ne.Pe(this.Hk,this.Kq)),Math.abs(a-o)<=this.qa?this.OO(n.ne,s.ne):a<o?-1:a>o?1:0)},n.prototype.Kr=function(){this.rg=!1},n.prototype.rm=function(){return this.Ni},n.prototype.$J=function(e,t){this.Hk=e,this.Kq=t,this.gt=this.Lo=this.Xs=this.Ws=-1},n.prototype.compare=function(e,t,i){return this.rg?-1:(e=e.ja(i),this.Dm=i,this.RE(t,t,e,e))},n.prototype.RE=function(e,t,i,r){if(this.Lo==t)var n=this.TA;else this.Lo=t,n=this.TA,this.TA.pb=e,this.mG(n,t,this.g.td.o,this.g.We);if(null==s){this.gt=r;var s=this.YH;this.YH.pb=i,this.mG(s,r,this.g.td.o,this.g.We)}return n.Tv||s.Tv?this.NO(t,r,n,s):n.Uf.va<s.Uf.oa?-1:s.Uf.va<n.Uf.oa?1:(e=n.Vv?1:0,0==(e|=s.Vv?2:0)?this.MO(n,s):1==e?this.NE(n.sb,s.sb):2==e?-1*this.NE(s.sb,n.sb):this.LO(n.sb,s.sb))},n}();e.UC=n}(Y||(Y={})),function(e){var t=function(){function t(t,i){this.g=t,this.qa=i,this.rg=!1,this.Lo=-1,this.Uf=new e.Nc,this.Gq=new e.h,this.Gq.Rc(),this.ie=new e.yb,this.Dm=-1,this.BA=17976931348623157e292}return t.prototype.Kr=function(){this.rg=!1,this.BA=17976931348623157e292},t.prototype.Dh=function(e){this.Gq.L(e)},t.prototype.compare=function(e,t){return this.SE(t,e.ja(t))},t.prototype.SE=function(t,i){var r=null!=this.g.bc(i);if(r||(this.g.ed(i,this.ie),this.Uf.KB(this.ie.sa,this.ie.pa)),r)throw e.i.fa("not implemented");if(this.Gq.x+this.qa<this.Uf.oa)return-1;if(this.Gq.x-this.qa>this.Uf.va)return 1;if(this.ie.na==this.ie.la)return this.Dm=t,this.rg=!0,0;this.ie.rI(),r=this.ie.ac(),(i=new e.h).uc(this.ie.wc(),r),i.ar();var n=new e.h;return n.uc(this.Gq,r),r=i.Qh(n),(r/=i.length())<10*-this.qa?-1:r>10*this.qa?1:this.ie.qs(this.Gq,this.qa)&&((i=Math.abs(r))<this.BA&&(this.Dm=t,this.BA=i),this.rg=!0,i<.25*this.qa)?0:0>r?-1:1},t}();e.aM=t}(Y||(Y={})),function(e){function t(e,t,i,r){i=new Float64Array(e.subarray(i,r)),e.set(i,t)}var i=function(){function i(e){this.Pb=this.pk=!1,this.o=null;var t=e;2>t&&(t=2),this.o=new Float64Array(t),this.size=e}return i.prototype.rotate=function(t,i,r){if(this.Pb)throw e.i.fa("invalid_call");if(i<t||i>r||t>r)throw e.i.N();t!=i&&r!=i&&(this.ni(t,i-t,1),this.ni(i,r-i,1),this.ni(t,r-t,1))},i.qf=function(e,t){var r=new i(e),n=r.o;if(2>e&&(e=2),0!==t)for(var s=0;s<e;s++)n[s]=t;return r},i.Bn=function(e){var t=new i(0);return t.o=new Float64Array(e.o),t.size=e.size,t},i.Lr=function(e,t){var r=new i(0);return r.size=e.size,r.size>t&&(r.size=t),2>(t=r.size)&&(t=2),r.o=new Float64Array(t),r.o.set(e.o.length<=t?e.o:e.o.subarray(0,t),0),r},i.prototype.Jb=function(e){0>=e||(null==this.o?this.o=new Float64Array(e):e<=this.o.length||(0<this.o.length?((e=new Float64Array(e)).set(this.o),this.o=e):this.o=new Float64Array(e)))},i.prototype.read=function(e){return this.o[e]},i.prototype.tc=function(e,t){t.x=this.o[e],t.y=this.o[e+1]},i.prototype.get=function(e){return this.o[e]},i.prototype.write=function(t,i){if(this.Pb)throw e.i.Hb();this.o[t]=i},i.prototype.set=function(t,i){if(this.Pb)throw e.i.Hb();this.o[t]=i},i.prototype.Tt=function(t,i){if(this.Pb)throw e.i.Hb();this.o[t]=i.x,this.o[t+1]=i.y},i.prototype.add=function(e){this.resize(this.size+1),this.o[this.size-1]=e},i.prototype.GB=function(e){return i.Lr(this,e)},i.prototype.eg=function(e){return this.read(e)},i.prototype.resize=function(t,i){if(void 0===i&&(i=0),this.pk)throw e.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(t<=this.size){if(30<this.o.length&&5*t/4<this.o.length){var r=new Float64Array(this.o,0,t);this.o=r}}else{t>this.o.length&&(r=e.O.truncate(64>t?Math.max(2*t,4):5*t/4),(r=new Float64Array(r)).set(this.o),this.o=r),r=this.o;for(var n=this.size;n<t;n++)r[n]=i}this.size=t},i.prototype.Bh=function(t){if((null==this.o||t>this.o.length)&&this.resize(t),this.pk)throw e.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=t},i.prototype.pr=function(e,t){this.write(e,t)},i.prototype.An=function(t,i,r){for(var n=this.size;i<n&&i<r;i++)t=e.O.uj(this.read(i));return t},i.prototype.Nb=function(e,t,r){if(null==e||!(e instanceof i))return!1;var n=this.size,s=e.size;if(r>n||r>s&&n!=s)return!1;for(r>n&&(r=n);t<r;t++)if(this.read(t)!=e.read(t))return!1;return!0},i.prototype.addRange=function(t,i,r,n,s){if(this.Pb)throw e.i.Hb();if(!n&&(1>s||0!=r%s))throw e.i.N();var o=this.size;if(this.resize(o+r),n)this.o.set(t.o.subarray(i,i+r),o);else{n=r;for(var a=0;a<r;a+=s){n-=s;for(var l=0;l<s;l++)this.o[o+a+l]=t.o[i+n+l]}}},i.prototype.Mn=function(i,r,n,s,o,a,l){if(this.Pb)throw e.i.Hb();if(!o&&(1>a||0!=s%a))throw e.i.N();var c=this.size-l;if(c<s&&this.resize(this.size+s-c),t(this.o,i+s,i,i+(l-i)),this.o==r.o&&i<n&&(n+=s),o)this.o.set(r.o.subarray(n,n+s),i);else for(o=s,l=0;l<s;l+=a)for(o-=a,c=0;c<a;c++)this.o[i+l+c]=r.o[n+o+c]},i.prototype.Iz=function(i,r,n,s,o,a){if(this.Pb)throw e.i.Hb();if(0>a&&(a=this.size),this.size+2*s>this.o.length?this.resize(this.size+2*s):this.size+=2*s,t(this.o,i+2*s,i,i+(a-i)),o)for(o=0;o<s;o++)a=r[n++],this.o[i++]=a.x,this.o[i++]=a.y;else{o=0;for(var l=s-1;o<s;++o)a=r[n+l],this.o[i++]=a.x,this.o[i++]=a.y,l--}},i.prototype.Ln=function(i,r,n,s){if(this.Pb)throw e.i.Hb();for(s-=i,t(this.o,i+s,i,i+s),s=0;s<n;s++)this.o[i+s]=r},i.prototype.vj=function(i,r,n){if(this.Pb)throw e.i.Hb();t(this.o,i+2,i,i+(n-i)),this.o[i]=r.x,this.o[i+1]=r.y},i.prototype.Ut=function(t,i,r,n,s,o){if(0>t||0>i||0>n)throw e.i.N();if(!s&&(0>=o||0!=i%o))throw e.i.N();if(r.size<n+i)throw e.i.N();if(0!=i)if(this.size<i+t&&this.resize(i+t),r==this)this.Ar(t,i,n,s,o);else if(s)for(s=0;s<i;s++)this.o[t]=r.o[n],t++,n++;else if(n=n+i-o,1==o)for(s=0;s<i;s++)this.o[t]=r.o[n],t++,n--;else for(s=0,i=e.O.truncate(i/o);s<i;s++){for(var a=0;a<o;a++)this.o[t+a]=r.o[n+a];t+=o,n-=o}},i.prototype.En=function(i,r,n){if(this.Pb)throw e.i.Hb();if(i+r>this.size)throw e.i.Hb();0<n-(i+r)&&t(this.o,i,i+r,i+(n-(i+r))+r),this.size-=r},i.prototype.ni=function(t,i,r){if(this.Pb)throw e.i.Hb();if(1>r||0!=i%r)throw e.i.Hb();for(var n=i>>1,s=0;s<n;s+=r){i-=r;for(var o=0;o<r;o++){var a=this.o[t+s+o];this.o[t+s+o]=this.o[t+i+o],this.o[t+i+o]=a}}},i.prototype.Wj=function(t,i,r){if(0>i||0>r||0>i||r+i>this.size)throw e.i.N();for(var n=i;n<i+r;n++)this.o[n]=t},i.prototype.Ar=function(t,i,r,n,s){if(!(n&&t==r||(this.o.set(this.o.subarray(r,r+i),t),n)))for(r=t,t=t+i-s,n=0,i=e.O.truncate(i/2);n<i;n++){for(var o=0;o<s;o++){var a=this.o[r+o];this.o[r+o]=this.o[t+o],this.o[t+o]=a}r+=s,t-=s}},i.prototype.vC=function(t,i,r,n,s){if(0>t||0>i||0>n)throw e.i.N();if(0!=i)for(this.size<(i<<1)+t&&this.resize((i<<1)+t),s||(t+=i-1<<1),s=s?2:-2,i+=n;n<i;n++)this.o[t]=r[n].x,this.o[t+1]=r[n].y,t+=s},i.prototype.uC=function(t,i,r){if(0>t||0>i)throw e.i.N();if(0!=i){this.size<(i<<1)+t&&this.resize((i<<1)+t),i+=0;for(var n=0;n<i;n++)this.o[t]=r[n][0],this.o[t+1]=r[n][1],t+=2}},i.prototype.Vw=function(t,i,r,n,s){if(0>t||0>i||0>n||this.size<i+t)throw e.i.N();if(s)for(s=0;s<i;s++)r[n+s]=this.o[t+s];else for(n=n+i-1;t<i;t++)r[n]=this.o[t],n--},i.prototype.uB=function(t,i,r){if(0>t||0>i||this.size<(i>>1)+t)throw e.i.N();if(0!=i){i=0+i;for(var n=0;n<i;n++)r[n][0]=this.o[t],r[n][1]=this.o[t+1],t+=2}},i.prototype.clear=function(e){e?this.resize(0):this.Bh(0)},i.prototype.ix=function(){this.pk=this.Pb=!0},i.prototype.Vd=function(e,t,i){Array.prototype.sort.call(this.o.subarray(e,t),i)},i.prototype.Tp=function(){return 1},i}();e.be=i}(Y||(Y={})),function(e){function t(e,t,i,r){i=new Int32Array(e.subarray(i,r)),e.set(i,t)}e.rY=function(){this.random=1973};var i=function(){function i(e){this.Pb=this.pk=!1,this.o=null;var t=e;2>t&&(t=2),this.o=new Int32Array(t),this.size=e}return i.prototype.rotate=function(t,i,r){if(this.Pb)throw e.i.fa("invalid_call");if(i<t||i>r||t>r)throw e.i.N();t!=i&&r!=i&&(this.ni(t,i-t,1),this.ni(i,r-i,1),this.ni(t,r-t,1))},i.qf=function(e,t){var r=new i(e),n=r.o;if(2>e&&(e=2),0!==t)for(var s=0;s<e;s++)n[s]=t;return r},i.Bn=function(e){var t=new i(0);return t.o=new Int32Array(e.o),t.size=e.size,t},i.Lr=function(e,t){var r=new i(0);return r.size=e.size,r.size>t&&(r.size=t),2>(t=r.size)&&(t=2),r.o=new Int32Array(t),r.o.set(e.o.length<=t?e.o:e.o.subarray(0,t),0),r},i.prototype.Jb=function(e){0>=e||(null==this.o?this.o=new Int32Array(e):e<=this.o.length||(0<this.o.length?((e=new Int32Array(e)).set(this.o),this.o=e):this.o=new Int32Array(e)))},i.prototype.read=function(e){return this.o[e]},i.prototype.tc=function(e,t){t.x=this.o[e],t.y=this.o[e+1]},i.prototype.get=function(e){return this.o[e]},i.prototype.write=function(t,i){if(this.Pb)throw e.i.Hb();this.o[t]=i},i.prototype.set=function(t,i){if(this.Pb)throw e.i.Hb();this.o[t]=i},i.prototype.Tt=function(t,i){if(this.Pb)throw e.i.Hb();this.o[t]=i.x,this.o[t+1]=i.y},i.prototype.add=function(e){this.resize(this.size+1),this.o[this.size-1]=e},i.prototype.GB=function(e){return i.Lr(this,e)},i.prototype.eg=function(e){return this.read(e)},i.prototype.resize=function(t,i){if(void 0===i&&(i=0),this.pk)throw e.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(t<=this.size){if(30<this.o.length&&5*t/4<this.o.length){var r=new Int32Array(this.o,0,t);this.o=r}}else{t>this.o.length&&(r=e.O.truncate(64>t?Math.max(2*t,4):5*t/4),(r=new Int32Array(r)).set(this.o),this.o=r),r=this.o;for(var n=this.size;n<t;n++)r[n]=i}this.size=t},i.prototype.Bh=function(t){if((null==this.o||t>this.o.length)&&this.resize(t),this.pk)throw e.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=t},i.prototype.pr=function(e,t){this.write(e,t)},i.prototype.An=function(t,i,r){for(var n=this.size;i<n&&i<r;i++)t=e.O.Th(this.read(i),t);return t},i.prototype.Nb=function(e,t,r){if(null==e||!(e instanceof i))return!1;var n=this.size,s=e.size;if(r>n||r>s&&n!=s)return!1;for(r>n&&(r=n);t<r;t++)if(this.read(t)!=e.read(t))return!1;return!0},i.prototype.addRange=function(t,i,r,n,s){if(this.Pb)throw e.i.Hb();if(!n&&(1>s||0!=r%s))throw e.i.N();var o=this.size;if(this.resize(o+r),n)this.o.set(t.o.subarray(i,i+r),o);else{n=r;for(var a=0;a<r;a+=s){n-=s;for(var l=0;l<s;l++)this.o[o+a+l]=t.o[i+n+l]}}},i.prototype.Mn=function(i,r,n,s,o,a,l){if(this.Pb)throw e.i.Hb();if(!o&&(1>a||0!=s%a))throw e.i.N();if(t(this.o,i+s,i,i+(l-i)),this.o==r.o&&i<n&&(n+=s),o)this.o.set(r.o.subarray(n,n+s),i);else for(o=s,l=0;l<s;l+=a){o-=a;for(var c=0;c<a;c++)this.o[i+l+c]=r.o[n+o+c]}},i.prototype.Iz=function(i,r,n,s,o,a){if(this.Pb)throw e.i.Hb();if(0>a&&(a=this.size),this.size+2*s>this.o.length?this.resize(this.size+2*s):this.size+=2*s,t(this.o,i+2*s,i,i+(a-i)),o)for(o=0;o<s;o++)a=r[n++],this.o[i++]=a.x,this.o[i++]=a.y;else{o=0;for(var l=s-1;o<s;++o)a=r[n+l],this.o[i++]=a.x,this.o[i++]=a.y,l--}},i.prototype.Ln=function(i,r,n,s){if(this.Pb)throw e.i.Hb();for(s-=i,t(this.o,i+s,i,i+s),s=0;s<n;s++)this.o[i+s]=r},i.prototype.vj=function(i,r,n){if(this.Pb)throw e.i.Hb();t(this.o,i+2,i,i+(n-i)),this.o[i]=r.x,this.o[i+1]=r.y},i.prototype.Ut=function(t,i,r,n,s,o){if(0>t||0>i||0>n)throw e.i.N();if(!s&&(0>=o||0!=i%o))throw e.i.N();if(r.size<n+i)throw e.i.N();if(0!=i)if(this.size<i+t&&this.resize(i+t),r==this)this.Ar(t,i,n,s,o);else if(s)for(s=0;s<i;s++)this.o[t]=r.o[n],t++,n++;else if(n=n+i-o,1==o)for(s=0;s<i;s++)this.o[t]=r.o[n],t++,n--;else for(s=0,i=e.O.truncate(i/o);s<i;s++){for(var a=0;a<o;a++)this.o[t+a]=r.o[n+a];t+=o,n-=o}},i.prototype.En=function(i,r,n){if(this.Pb)throw e.i.Hb();if(i+r>this.size)throw e.i.Hb();0<n-(i+r)&&t(this.o,i,i+r,i+(n-(i+r))+r),this.size-=r},i.prototype.ni=function(t,i,r){if(this.Pb)throw e.i.Hb();if(1>r||0!=i%r)throw e.i.Hb();for(var n=i>>1,s=0;s<n;s+=r){i-=r;for(var o=0;o<r;o++){var a=this.o[t+s+o];this.o[t+s+o]=this.o[t+i+o],this.o[t+i+o]=a}}},i.prototype.Wj=function(t,i,r){if(0>i||0>r||0>i||r+i>this.size)throw e.i.N();for(var n=i;n<i+r;n++)this.o[n]=t},i.prototype.Ar=function(t,i,r,n,s){if(!(n&&t==r||(this.o.set(this.o.subarray(r,r+i),t),n)))for(r=t,t=t+i-s,n=0,i=e.O.truncate(i/2);n<i;n++){for(var o=0;o<s;o++){var a=this.o[r+o];this.o[r+o]=this.o[t+o],this.o[t+o]=a}r+=s,t-=s}},i.prototype.vC=function(t,i,r,n,s){if(0>t||0>i||0>n)throw e.i.N();if(0!=i)for(this.size<(i<<1)+t&&this.resize((i<<1)+t),s||(t+=i-1<<1),s=s?2:-2,i+=n;n<i;n++)this.o[t]=r[n].x,this.o[t+1]=r[n].y,t+=s},i.prototype.Vw=function(t,i,r,n,s){if(0>t||0>i||0>n||this.size<i+t)throw e.i.N();if(s)for(s=0;s<i;s++)r[n+s]=this.o[t+s];else for(n=n+i-1;t<i;t++)r[n]=this.o[t],n--},i.prototype.clear=function(e){e?this.resize(0):this.Bh(0)},i.prototype.ix=function(){this.pk=this.Pb=!0},i.prototype.Vd=function(e,t,r){10>t-e?i.rG(this.o,e,t,r):i.qB(this.o,e,t-1,r)},i.prototype.Tp=function(){return 2},i.prototype.Fc=function(){return this.o[this.size-1]},i.prototype.If=function(){this.resize(this.size-1)},i.prototype.bX=function(e){this.o[this.size-1]=e},i.prototype.SV=function(e){e<this.size-1&&(this.o[e]=this.o[this.size-1]),this.resize(this.size-1)},i.prototype.lF=function(e){for(var t=0,i=this.size;t<i;t++)if(this.o[t]==e)return t;return-1},i.prototype.hG=function(e){return 0<=this.lF(e)},i.rG=function(e,t,i,r){for(var n=t;n<i;n++){for(var s=e[n],o=n-1;o>=t&&0<r(e[o],s);)e[o+1]=e[o],o--;e[o+1]=s}},i.tx=function(e,t,i){var r=e[i];e[i]=e[t],e[t]=r},i.qB=function(e,t,r,n){if(!(t>=r))for(;;){if(9>r-t){i.rG(e,t,r+1,n);break}var s=e[t];i.tx(e,t,r);for(var o=t,a=t;a<r;a++)0>=n(e[a],s)&&(i.tx(e,o,a),o+=1);i.tx(e,o,r),o-t<r-o?(i.qB(e,t,o-1,n),t=o+1):(i.qB(e,o+1,r,n),r=o-1)}},i}();e.ia=i}(Y||(Y={})),function(e){function t(e,t,i,r){i=new Int8Array(e.subarray(i,r)),e.set(i,t)}var i=function(){function i(e){this.o=null;var t=e;2>t&&(t=2),this.o=new Int8Array(t),this.size=e}return i.prototype.rotate=function(t,i,r){if(this.Pb)throw e.i.fa("invalid_call");if(i<t||i>r||t>r)throw e.i.N();t!=i&&r!=i&&(this.ni(t,i-t,1),this.ni(i,r-i,1),this.ni(t,r-t,1))},i.qf=function(e,t){var r=new i(e),n=r.o;if(2>e&&(e=2),0!==t)for(var s=0;s<e;s++)n[s]=t;return r},i.Bn=function(e){var t=new i(0);return t.o=new Int8Array(e.o),t.size=e.size,t},i.Lr=function(e,t){var r=new i(0);return r.size=e.size,r.size>t&&(r.size=t),2>(t=r.size)&&(t=2),r.o=new Int8Array(t),r.o.set(e.o.length<=t?e.o:e.o.subarray(0,t),0),r},i.prototype.Jb=function(e){0>=e||(null==this.o?this.o=new Int8Array(e):e<=this.o.length||(0<this.o.length?((e=new Int8Array(e)).set(this.o),this.o=e):this.o=new Int8Array(e)))},i.prototype.read=function(e){return this.o[e]},i.prototype.tc=function(e,t){t.x=this.o[e],t.y=this.o[e+1]},i.prototype.get=function(e){return this.o[e]},i.prototype.write=function(t,i){if(this.Pb)throw e.i.Hb();this.o[t]=i},i.prototype.set=function(t,i){if(this.Pb)throw e.i.Hb();this.o[t]=i},i.prototype.Tt=function(t,i){if(this.Pb)throw e.i.Hb();this.o[t]=i.x,this.o[t+1]=i.y},i.prototype.add=function(e){this.resize(this.size+1),this.o[this.size-1]=e},i.prototype.GB=function(e){return i.Lr(this,e)},i.prototype.eg=function(e){return this.read(e)},i.prototype.resize=function(t,i){if(void 0===i&&(i=0),this.pk)throw e.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(t<=this.size){if(30<this.o.length&&5*t/4<this.o.length){var r=new Int8Array(this.o,0,t);this.o=r}}else{t>this.o.length&&(r=e.O.truncate(64>t?Math.max(2*t,4):5*t/4),(r=new Int8Array(r)).set(this.o),this.o=r),r=this.o;for(var n=this.size;n<t;n++)r[n]=i}this.size=t},i.prototype.Bh=function(t){if((null==this.o||t>this.o.length)&&this.resize(t),this.pk)throw e.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=t},i.prototype.pr=function(e,t){this.write(e,t)},i.prototype.An=function(t,i,r){for(var n=this.size;i<n&&i<r;i++)t=e.O.Th(this.read(i),t);return t},i.prototype.Nb=function(e,t,r){if(null==e||!(e instanceof i))return!1;var n=this.size,s=e.size;if(r>n||r>s&&n!=s)return!1;for(r>n&&(r=n);t<r;t++)if(this.read(t)!=e.read(t))return!1;return!0},i.prototype.addRange=function(t,i,r,n,s){if(this.Pb)throw e.i.Hb();if(!n&&(1>s||0!=r%s))throw e.i.N();var o=this.size;if(this.resize(o+r),n)this.o.set(t.o.subarray(i,i+r),o);else{n=r;for(var a=0;a<r;a+=s){n-=s;for(var l=0;l<s;l++)this.o[o+a+l]=t.o[i+n+l]}}},i.prototype.Mn=function(i,r,n,s,o,a,l){if(this.Pb)throw e.i.Hb();if(!o&&(1>a||0!=s%a))throw e.i.N();if(t(this.o,i+s,i,i+(l-i)),this.o==r.o&&i<n&&(n+=s),o)this.o.set(r.o.subarray(n,n+s),i);else for(o=s,l=0;l<s;l+=a){o-=a;for(var c=0;c<a;c++)this.o[i+l+c]=r.o[n+o+c]}},i.prototype.Ln=function(i,r,n,s){if(this.Pb)throw e.i.Hb();for(s-=i,t(this.o,i+s,i,i+s),s=0;s<n;s++)this.o[i+s]=r},i.prototype.Iz=function(i,r,n,s,o,a){if(this.Pb)throw e.i.Hb();if(0>a&&(a=this.size),this.size+2*s>this.o.length?this.resize(this.size+2*s):this.size+=2*s,t(this.o,i+2*s,i,i+(a-i)),o)for(o=0;o<s;o++)a=r[n++],this.o[i++]=a.x,this.o[i++]=a.y;else{o=0;for(var l=s-1;o<s;++o)a=r[n+l],this.o[i++]=a.x,this.o[i++]=a.y,l--}},i.prototype.vj=function(i,r,n){if(this.Pb)throw e.i.Hb();t(this.o,i+2,i,i+(n-i)),this.o[i]=r.x,this.o[i+1]=r.y},i.prototype.Ut=function(t,i,r,n,s,o){if(0>t||0>i||0>n)throw e.i.N();if(!s&&(0>=o||0!=i%o))throw e.i.N();if(r.size<n+i)throw e.i.N();if(0!=i)if(this.size<i+t&&this.resize(i+t),r==this)this.Ar(t,i,n,s,o);else if(s)for(s=0;s<i;s++)this.o[t]=r.o[n],t++,n++;else if(n=n+i-o,1==o)for(s=0;s<i;s++)this.o[t]=r.o[n],t++,n--;else for(s=0,i=e.O.truncate(i/o);s<i;s++){for(var a=0;a<o;a++)this.o[t+a]=r.o[n+a];t+=o,n-=o}},i.prototype.En=function(i,r,n){if(this.Pb)throw e.i.Hb();if(i+r>this.size)throw e.i.Hb();0<n-(i+r)&&t(this.o,i,i+r,i+(n-(i+r))+r),this.size-=r},i.prototype.ni=function(t,i,r){if(this.Pb)throw e.i.Hb();if(1>r||0!=i%r)throw e.i.Hb();for(var n=i>>1,s=0;s<n;s+=r){i-=r;for(var o=0;o<r;o++){var a=this.o[t+s+o];this.o[t+s+o]=this.o[t+i+o],this.o[t+i+o]=a}}},i.prototype.Wj=function(t,i,r){if(0>i||0>r||0>i||r+i>this.size)throw e.i.N();for(var n=i;n<i+r;n++)this.o[n]=t},i.prototype.Ar=function(t,i,r,n,s){if(!(n&&t==r||(this.o.set(this.o.subarray(r,r+i),t),n)))for(r=t,t=t+i-s,n=0,i=e.O.truncate(i/2);n<i;n++){for(var o=0;o<s;o++){var a=this.o[r+o];this.o[r+o]=this.o[t+o],this.o[t+o]=a}r+=s,t-=s}},i.prototype.vC=function(t,i,r,n,s){if(0>t||0>i||0>n)throw e.i.N();if(0!=i)for(this.size<(i<<1)+t&&this.resize((i<<1)+t),s||(t+=i-1<<1),s=s?2:-2,i+=n;n<i;n++)this.o[t]=r[n].x,this.o[t+1]=r[n].y,t+=s},i.prototype.Vw=function(t,i,r,n,s){if(0>t||0>i||0>n||this.size<i+t)throw e.i.N();if(s)for(s=0;s<i;s++)r[n+s]=this.o[t+s];else for(n=n+i-1;t<i;t++)r[n]=this.o[t],n--},i.prototype.clear=function(e){e?this.resize(0):this.Bh(0)},i.prototype.ix=function(){this.pk=this.Pb=!0},i.prototype.Vd=function(e,t,i){t=this.o.subarray(e,t),Array.prototype.sort.call(t,i),this.o.set(t,e)},i.prototype.zJ=function(t,i){if(this.Pb)throw e.i.fa("invalid call. Attribute Stream is read only.");this.o[t]|=i},i.prototype.KE=function(t,i){if(this.Pb)throw e.i.fa("invalid call. Attribute Stream is read only.");this.o[t]&=~i},i.prototype.Tp=function(){return 1},i}();e.pn=i}(Y||(Y={})),function(e){e.Yc=function(){function t(){}return t.Mr=function(t,i){return e.pn.qf(t,i)},t.Dn=function(t,i){return e.be.qf(t,i)},t.pP=function(t,i,r){switch(t){case 1:t=e.be.qf(i,r);break;case 2:t=e.ia.qf(i,r);break;case 4:t=e.pn.qf(i,r);break;default:throw e.i.Qa()}return t},t.YE=function(i,r){return t.pP(e.ra.Tp(i),r*e.ra.Va(i),e.ra.se(i))},t.Oh=function(t,i){return e.ia.qf(t,i)},t.qI=function(e){var t,i=[];for(t=0;t<e;t++)i.push(null);return i},t}()}(Y||(Y={})),function(e){e.ga=function(e){void 0===e&&(e=0),this.u=e}}(Y||(Y={})),function(e){e.NL=function(){function t(){}return t.bind=function(t){e.Sc=t.PeDefs,e.pf=t.PeFactory,e.NC=t.PeVertcs,e.ej=t.PeCSTransformations,e.MC=t.PeGTTransformations,e.LL=t.PeGeogtran,e.KL=t.PeFactoryCodechange,e.LC=t.PeGCSExtent,e.Cg=t.PePCSInfo,e.ML=t.PeHorizon,e.JL=t.PeCoordsys,e.lp=t.PeGTlistExtended,e.lp.PE_GTLIST_OPTS_USE_DEFAULT=128,e.pf.initialize(null),e.Mx=t.PeGTlistExtendedEntry,e.pf.fromString(e.Sc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},t}(),e.pf=null,e.NC=null,e.JL=null,e.ML=null,e.Cg=null,e.lp=null,e.Mx=null,e.LC=null,e.KL=null,e.LL=null,e.Sc=null,e.MC=null,e.ej=null}(Y||(Y={})),function(e){var t=function(){function e(){}return e.Mb=function(t,i){return 0<=i?e.P(t):-e.P(t)},e.P=function(e){return 0>e?-e:e},e.ti=function(e){return 3552713678800501e-30>e},e.KC=function(t,i,r){return e.P(t-i)<=r*(1+(e.P(t)+e.P(i))/2)},e.Y=function(t,i){return e.KC(t,i,3552713678800501e-30)},e.FL=function(t){return 3552713678800501e-30>=e.P(t)},e.Cd=function(t){return e.FL(t)},e}();e.s=t,e.F=function(){function i(){}return i.gp=function(e,i){var r=0;return 0!=(e=t.P(e))+(i=t.P(i))&&(e>i?(r=i/e,r=e*Math.sqrt(1+r*r)):(r=e/i,r=i*Math.sqrt(1+r*r))),r},i.Wq=function(e,r,n,s,o){for(var a=[0,0,0],l=[0,0,0],c=0;2>=c;c++)r[c]-=e[c],n[c]-=r[c];n=a[1]*l[2]-a[2]*l[1],r=a[2]*l[0]-a[0]*l[2],a=a[0]*l[1]-a[1]*l[0],e=-1*(n*e[0]+r*e[1]+a*e[2]),s[0]=n,s[1]=r,s[2]=a,s[3]=e,l=i.on(s),s[0]/=l,s[1]/=l,s[2]/=l,s[3]/=l,0!=o&&(l=t.Cd(a)?t.Cd(e)?t.Mb(1,r):-t.Mb(1,e):t.Mb(1,a),l*=t.Mb(1,o),s[0]*=l,s[1]*=l,s[2]*=l,s[3]*=l)},i.zx=function(e,t,i){i[0]=e[1]*t[2]-t[1]*e[2],i[1]=e[2]*t[0]-t[2]*e[0],i[2]=e[0]*t[1]-t[0]*e[1]},i.St=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},i.on=function(e){return i.gp(i.gp(e[0],e[1]),e[2])},i.cl=function(e,t,r,n,s,o,a,l){e=i.n(e,t,r);var c=Math.cos(r);o.u=(e+s)*c*Math.cos(n),a.u=(e+s)*c*Math.sin(n),l.u=(e*(1-t)+s)*Math.sin(r)},i.jO=function(e,r,n,s,o,a,l){var c=i.gp(r,n),h=1*Math.sqrt(1-e),u=h/1;if(t.Y(c,0))a.u=0,o.u=t.Mb(1.570796326794897,s),l.u=t.P(s)-h;else{a.u=Math.atan2(n,r),n=Math.atan2(1*s,h*c),a=Math.cos(n);var p=Math.sin(n);r=h*e/(1-e),e*=1,n=Math.atan2(s+r*p*p*p,c-e*a*a*a),3.141592653589793<t.P(n)&&(n=t.Mb(3.141592653589793,n)-n),n=Math.atan(u*Math.tan(n)),p=Math.sin(n),a=Math.cos(n),o.u=Math.atan2(s+r*p*p*p,c-e*a*a*a),1.570796326794897<t.P(o.u)&&(o.u=t.Mb(3.141592653589793,o.u)-o.u),n=Math.atan(u*Math.tan(o.u)),p=Math.sin(n),a=Math.cos(n),l.u=(s-h*p)*Math.sin(o.u)+(c-1*a)*Math.cos(o.u)}},i.n=function(e,t,i){return i=Math.sin(i),e/Math.sqrt(1-t*i*i)},i.ot=function(e,t){return Math.atan2(Math.sin(t)*(1-e),Math.cos(t))},i.Qj=function(e,t){return Math.atan2(Math.sin(t),Math.cos(t)*(1-e))},i.Rq=function(e,r){if(t.ti(e)||0==r||t.Y(t.P(r),1.570796326794897))return r;if(.006884661117170036>e){var n=Math.sqrt(1-e),s=(1-n)/(1+n),o=s*s,a=s*o,l=s*a,c=s*l,h=s*c,u=s*h,p=1.572916666666667*a-3.2578125*c+4.295068359375*u;e=2.142578125*l-6.071484375*h,n=3.129296875*c-11.249837239583334*u;var d=4.775276692708333*h,f=7.958636765252976*u,y=Math.cos(2*r);return r+Math.sin(2*r)*(1.5*s-.84375*a+.525390625*c-.2688395182291667*u-p+n-f+y*(2*(1.3125*o-1.71875*l+1.650146484375*h)-4*e+6*d+y*(4*p-12*n+24*f+y*(8*e-32*d+y*(16*n-80*f+y*(32*d+64*y*f))))))}for(n=1-e,s=e/2,a=(o=t.P(r))*i.Zu(e)/(1.570796326794897*n),l=9999,h=o,o=0;1e-16<l&&50>o;o++)u=i.w(e,h),c=h-(p=(c=(i.kG(h,e)-s*Math.sin(2*h)/u)/n-a)/(u=1/(u*u*u))),l=t.P(p),h=c;return 0<=r?h:-h},i.qW=function(e,r){return t.ti(r)?e:e*i.Zu(r)/1.570796326794897},i.ba=function(e){return 0>(e=i.pF(e,6.283185307179586))?e+6.283185307179586:3.141592653589793>t.P(e)||t.Y(t.P(e),3.141592653589793)?e:e-6.283185307179586},i.pF=function(e,t){return e-Math.floor(e/t)*t},i.Ah=function(e,t){if(.006884661117170036>t){var r=(t=(1-(t=Math.sqrt(1-t)))/(1+t))*t,n=r*r;return e/(1+t)*(1+.25*r+.015625*n+.00390625*r*n)*1.570796326794897}return e*i.Zu(t)},i.Vq=function(e,r){var n=t.Mb(1,Math.sin(r));return r=1.570796326794897>=(r=t.P(i.pF(r,3.141592653589793)))?r:3.141592653589793-r,(t.Y(r,1.570796326794897)?r:Math.atan(Math.sqrt(1-e)*Math.tan(r)))*n},i.q=function(e,t,r){if(.006884661117170036>t){var n=(t=(1-(t=Math.sqrt(1-t)))/(1+t))*t,s=t*n,o=t*s,a=t*o,l=t*a,c=t*l,h=-.7291666666666666*s+.2278645833333333*a+.03987630208333334*c,u=.615234375*o-.21533203125*l,p=-.54140625*a+.20302734375*c,d=.48876953125*l,f=-.4488699776785715*c,y=Math.cos(2*r);return e/(1+t)*((1+.25*n+.015625*o+.00390625*l)*r+Math.sin(2*r)*(-1.5*t+.1875*s+.0234375*a+.00732421875*c-h+p-f+y*(2*(.9375*n-.234375*o-.03662109375*l)-4*u+6*d+y*(4*h-12*p+24*f+y*(8*u-32*d+y*(16*p-80*f+y*(32*d+64*y*f)))))))}return e*(i.kG(r,t)-.5*t*Math.sin(2*r)/i.w(t,r))},i.w=function(e,t){return t=Math.sin(t),Math.sqrt(1-e*t*t)},i.Zu=function(e){return t.KC(e,1,2220446049250313e-31)?1:1>e?i.Xw(0,1-e)-e/3*i.Uw(0,1-e):NaN},i.kG=function(r,n){var s=t.Mb(1,r);r=t.P(r);var o=Math.floor(r/1.570796326794897);if(1<n)n=0==r?0:NaN;else if(t.Cd(o))n=(r=i.sin(r))*i.Xw(1-r*r,1-n*r*r)-n/3*r*r*r*i.Uw(1-r*r,1-n*r*r);else{var a=e.O.truncate(o%2),l=i.Zu(n);0<a?(r=1.570796326794897*(o+1)-r,n=l*(o+1)-(n=(r=Math.sin(r))*i.Xw(1-r*r,1-n*r*r)-n/3*r*r*r*i.Uw(1-r*r,1-n*r*r))):(r-=1.570796326794897*o,n=l*o+(n=(r=Math.sin(r))*i.Xw(1-r*r,1-n*r*r)-n/3*r*r*r*i.Uw(1-r*r,1-n*r*r)))}return n*s},i.sin=function(e){e=i.ba(e);var r=t.Mb(1,e);return e=t.P(e),t.Y(e,3.141592653589793)?0:t.Y(e,1.570796326794897)?1*r:Math.sin(e)*r},i.Uw=function(e,i){var r,n,s,o,a=e,l=i,c=1;for(i=0,e=1;n=((r=.2*(a+l+3*c))-a)/r,s=(r-l)/r,o=(r-c)/r,!(1e-4>t.P(n)&&1e-4>t.P(s)&&1e-4>t.P(o));)o=Math.sqrt(l),i+=e/((r=Math.sqrt(c))*(c+(o=Math.sqrt(a)*(o+r)+o*r))),e*=.25,a=.25*(a+o),l=.25*(l+o),c=.25*(c+o);return l=(a=n*s)-(c=o*o),3*i+e*(1+(c=a-6*c)*(.10227272727272728*c-.2142857142857143-.1730769230769231*o*(n=c+l+l))+o*(.1666666666666667*n+o*(-.4090909090909091*l+.1153846153846154*o*a)))/(r*Math.sqrt(r))},i.Xw=function(e,i){for(var r,n,s,o,a=1;n=2-((r=(e+i+a)/3)+e)/r,s=2-(r+i)/r,o=2-(r+a)/r,!(1e-4>t.P(n)&&1e-4>t.P(s)&&1e-4>t.P(o));a=.25*(a+r))r=Math.sqrt(i),n=Math.sqrt(a),e=.25*(e+(r=Math.sqrt(e)*(r+n)+r*n)),i=.25*(i+r);return(1+(.04166666666666666*(e=n*s-o*o)-.1-.06818181818181818*(i=n*s*o))*e+.07142857142857142*i)/Math.sqrt(r)},i.Qw=function(e,i){if(t.ti(e)||0==i||t.Y(t.P(i),1.570796326794897))return i;if(.006884661117170036>e){var r=e*e,n=e*r,s=e*n,o=e*s,a=e*o,l=e*a,c=-(.02708333333333333*n+.03430059523809524*s+.03149181547619048*o+.02634359154541446*a+.02156896735835538*l),h=.007669890873015873*s+.01299603174603175*o+.0148051353064374*a+.01454454953803912*l,u=-(.002275545634920635*o+.004830845032667949*a+.006558395368616723*l),p=.0006957236677288761*a+.001775193002406544*l,d=-.000217324089394402*l,f=Math.cos(2*i);return i+Math.sin(2*i)*(-(.5*e+.2083333333333333*r+.09375*n+.04878472222222222*s+.02916666666666667*o+.01938905423280423*a+.01388255931712963*l)-c+u-d+f*(2*(.1041666666666667*r+.0875*n+.06050347222222222*s+.04151785714285714*o+.02958958540013228*a+.02203667534722222*l)-4*h+6*p+f*(4*c-12*u+24*d+f*(8*h-32*p+f*(16*u-80*d+f*(32*p+64*f*d))))))}return 0==i||t.Y(t.P(i),1.570796326794897)?r=i:(s=(n=Math.sqrt(e))*Math.sin(i),r=Math.tan(.7853981633974483+i/2)*Math.pow((1-s)/(1+s),n/2),r=2*Math.atan(r)-1.570796326794897),r},i.yO=function(e,i){if(t.ti(e)||0==i||t.Y(t.P(i),1.570796326794897))return i;if(.006884661117170036>e){var r=e*(p=e*(u=e*(f=e*e))),n=e*(d=e*r),s=.05833333333333333*u+.07232142857142858*p+.05634300595238095*r+.0355325796406526*d+.020235546186067*n,o=.02653149801587302*p+.04379960317460317*r+.0429211791776896*d+.03255384637546096*n,a=.01294022817460318*r+.02668104344536636*d+.03155651254609588*n,l=.00659454790965208*d+.0163075268674227*n,c=.003463473736911237*n,h=Math.cos(2*i);return i+Math.sin(2*i)*(.5*e+.2083333333333333*f+.08333333333333333*u+.03611111111111111*p+.01875*r+.01195601851851852*d+.008863673941798942*n-s+a-c+h*(2*(.1458333333333333*f+.1208333333333333*u+.07039930555555556*p+.03616071428571429*r+.01839451058201058*d+.01017113095238095*n)-4*o+6*l+h*(4*s-12*a+24*c+h*(8*o-32*l+h*(16*a-80*c+h*(32*l+64*h*c))))))}var u=Math.sqrt(e),p=u/2,d=Math.tan(.7853981633974483+i/2);e=0,s=1;for(var f=i;0!=s;f=n)r=u*Math.sin(f),n=d*Math.pow((1+r)/(1-r),p),n=2*Math.atan(n)-1.570796326794897,e++,(t.Y(n,f)||3e4<e)&&(s=0);return f},i}()}(Y||(Y={})),function(e){var t=function(){function t(t){this.ul=this.Us=null,this.Iv=!1,this.GA=this.HA=0,this.HH=new e.h,this.XH=new e.h,this.KA=!1,this.vq=new e.l,this.wH=this.sw=0,this.tw=null,this.zl=!1,this.Eo=null,this.bA=0,this.Ue=t,this.As=e.zb.xv(this.Ue,0,!0),this.HH.Rc(),this.XH.Rc(),this.RH=NaN;var i=t.getCode();0<i?(this.Kk=i,e.pf.getCode(t)):this.Kk=e.pf.getCode(t),0>this.Kk&&(this.Kk=0);var r=this.Ue.getType();if(this.jH=r==e.Sc.PE_TYPE_PROJCS?2:1,r==e.Sc.PE_TYPE_PROJCS&&!t.loadConstants())throw e.i.N("PeProjcs.loadConstants failed");i=r==e.Sc.PE_TYPE_GEOGCS?this.Ue:this.Ue.getGeogcs(),r!=e.Sc.PE_TYPE_GEOGCS&&e.pf.getCode(i),this.Eo=t.getUnit(),this.RH=i.getPrimem().getLongitude(),this.wH=t=i.getUnit().getUnitFactor(),t=Math.PI/(180*t),1e-10>Math.abs(t-1)&&(t=1),this.GA=t,r&e.Sc.PE_TYPE_PROJCS?(i=this.Ue,this.HA=1/i.getUnit().getUnitFactor(),this.sw=.001/this.Ue.getUnit().getUnitFactor(),this.tw=e.Cg.generate(i,e.Cg.PE_PCSINFO_OPTION_NONE),this.zl=this.tw.isPannableRectangle(),this.bA=e.zb.qN(this.tw.getCentralMeridian(),this.GA)):(this.KA=this.zl=!0,this.HA=0,r=1/i.getUnit().getUnitFactor(),this.sw=.001/i.getDatum().getSpheroid().getAxis()*r,this.bA=0),this.zl&&(this.xx(),this.DK(),this.nY(),this.CK(),this.lY(),this.mY())}return t.prototype.$r=function(){return this.Kk},t.prototype.kk=function(){return this.tw},t.Py=function(e,t){return e==t||null!=e&&null!=t&&0==e.Kk&&0==t.Kk&&e.As===t.As},t.prototype.Wc=function(){return this.zl},t.prototype.gh=function(e){e.K(this.so)},t.prototype.pv=function(){return this.so.v},t.prototype.ov=function(){return this.so.C},t.prototype.GR=function(e){e.K(this.uw)},t.prototype.lY=function(){var t=this.Ue.getType();if(t==e.Sc.PE_TYPE_PROJCS){t=this.Ue;var i=this.kk().getCentralMeridian(),r=t.getGeogcs();if(null==r)throw e.i.fa("internal error");i=[[i+(r=1/r.getUnit().getUnitFactor()*Math.PI),0]],e.ej.geogToProj(t,1,i),i=i[0][0],r=t.getParameters()[e.Sc.PE_PARM_X0].getValue();var n=this.ml();t=new e.l,n.A(t),i=(n=Math.abs(i-r))+r,r=-1*n+r,n=t.H,t=t.G;var s=new e.l;s.K(r,t,i,n),null==this.so&&(this.so=s)}else{if(t!=e.Sc.PE_TYPE_GEOGCS)throw e.i.fa("internal error");r=1/this.Ue.getUnit().getUnitFactor()*Math.PI,(t=new e.l).K(-r,-r/2,r,r/2),null==this.so&&(this.so=t)}},t.prototype.mY=function(){var t=this.Ue.getType();if(t==e.Sc.PE_TYPE_PROJCS){var i=this.Ue;if(t=this.kk().getCentralMeridian(),null==(i=i.getGeogcs()))throw e.i.fa("internal error");i=1/i.getUnit().getUnitFactor()*Math.PI;var r=this.Vr(),n=new e.l;r.A(n),(r=new e.l).K(t-i,n.G,t+i,n.H),null==this.uw&&(this.uw=r)}else{if(t!=e.Sc.PE_TYPE_GEOGCS)throw e.i.fa("internal error");i=1/this.Ue.getUnit().getUnitFactor()*Math.PI,(t=new e.l).K(-i,-i/2,i,i/2),null==this.uw&&(this.uw=t)}},t.prototype.bf=function(){return this.GA},t.prototype.pm=function(){return this.HA},t.prototype.Vr=function(){if(this.zl)return this.ul;var e=this.ul;return null!=e?e:(this.xx(),this.ul)},t.prototype.Wr=function(){return this.zl?null:(null!=this.ul||this.xx(),this.YG)},t.prototype.xx=function(){if(this.Ue.getType()==e.Sc.PE_TYPE_PROJCS){var t=this.Ue,i=t.getGeogcs(),r=t.horizonGcsGenerate();if(null!=r){var n=r[0].getNump(),s=r[0].getKind();t=0<r[0].getInclusive();var o=this.bf(),a=90*o,l=360*o,c=370*o,h=180*o*e.Sc.PE_HORIZON_DELTA/Math.PI,u=new e.l,p=null;if(1<n)for(var d=1;d<n;d++)if(r[d].getKind()==e.Sc.PE_HORIZON_LINE){null==p&&(p=new e.Ta);var f=r[d].getCoord();p.sx(f[0][0],f[0][1]),p.yj(f[1][0],f[1][1])}if(s==e.Sc.PE_HORIZON_RECT)r=r[0].getCoord(),u.K(r[0][0],r[0][1]),u.Zb(r[1][0],r[1][1]),Math.abs(u.H-a)<1e-7*h&&(u.H=a),Math.abs(u.G+a)<1e-7*h&&(u.G=-a),u.R()>c&&(r=-400*o,u.K(r,u.G,r+5*l,u.H)),r=new e.Fh(u),null==this.ul&&(this.ul=r,this.Iv=t);else{if(c=new e.Da,l=this.kk().isGcsHorizonMultiOverlap(),u=e.gu.bF(i,e.hu.Integer64),l){for(c=new e.gL,h=e.Gh.local().V(c,u,null),d=0;d<n;d++)if(r[d].getKind()==e.Sc.PE_HORIZON_POLY){for(i=r[d].getSize(),o=r[d].getCoord(),s=[],a=0;a<i;a++)s[a]=e.h.construct(o[a][0],o[a][1]);r[d].getInclusive(),l&&((o=new e.Da).Yk(s,i-1),c.ZX(o),h.qe())}c=h.next()}else for(d=0;d<n;d++)if(r[d].getKind()==e.Sc.PE_HORIZON_POLY){for(i=r[d].getSize(),o=r[d].getCoord(),l=[],a=0;a<i;a++)l[a]=e.h.construct(o[a][0],o[a][1]);r[d].getInclusive(),c.Yk(l,i-1)}t?e.Xj.local().wn(c,u,1):e.kp.local().wn(c,u,1),e.dj.local().wn(c,u,1),null==this.ul&&(this.ul=c,this.Iv=t,this.YG=p)}}}},t.prototype.hv=function(){return this.zl||null==this.ul&&this.xx(),this.Iv},t.prototype.DK=function(){if(2==this.jH){var t=this.Ue.horizonPcsGenerate();if(null!=t){var i=t[0].getKind();t[0].getInclusive();var r=t[0].getNump(),n=!1;if(i==e.Sc.PE_HORIZON_RECT)t=t[0].getCoord(),(r=new e.l).K(t[0][0],t[0][1]),r.Zb(t[1][0],t[1][1]),t=new e.Fh(r);else{for(i=-1,n=0;n<r;n++)t[n].getKind()==e.Sc.PE_HORIZON_POLY&&(i=n);for(n=t[i].getSize()-1,t=t[i].getCoord(),r=[],i=0;i<n;i++)r[i]=e.h.construct(t[i][0],t[i][1]);t=i=new e.Da,i.Yk(r,n),n=!0}this.kk().isDensificationNeeded()&&(r=1e5*this.pm(),t=e.Xl.local().V(t,r,null)),n&&(n=new e.Fh,t.bn(n),t.Ke(),t.Qb(),t.qR(),e.Xj.local().wn(t,null,1)),null==this.Us&&(this.Us=t)}}},t.prototype.ml=function(){if(this.zl)return this.Us;var e=this.Us;return null!=e?e:(this.DK(),this.Us)},t.prototype.nY=function(){if(this.Ue.getType()==e.Sc.PE_TYPE_PROJCS){var t=90*this.bf();t=[[0,t],[0,-t]],e.ej.geogToProj(this.Ue,2,t);var i=this.kk(),r=i.getNorthPoleLocation()!=e.Cg.PE_POLE_OUTSIDE_BOUNDARY;i=i.getSouthPoleLocation()!=e.Cg.PE_POLE_OUTSIDE_BOUNDARY,this.KA||(r&&this.HH.ma(t[0][0],t[0][1]),i&&this.XH.ma(t[1][0],t[1][1]))}this.KA=!0},t.prototype.CK=function(){if(1==this.jH){var t=400*this.bf();this.vq.K(-t,-t,t,t)}else t=e.Cg.generate(this.Ue,e.Cg.PE_PCSINFO_OPTION_DOMAIN),t=e.l.construct(t.getDomainMinx(),t.getDomainMiny(),t.getDomainMaxx(),t.getDomainMaxy()),this.vq.B()&&this.vq.K(t)},t.prototype.hR=function(e){this.zl&&e.K(this.vq),this.vq.B()&&this.CK(),e.K(this.vq)},t.prototype.Up=function(){return this.RH},t.prototype.zi=function(){return this.bA},t.prototype.Hd=function(){return this.Eo},t.prototype.Xr=function(){return this.wH},t}();e.OC=t}(Y||(Y={})),function(e){var t=function(){function t(t){this.KT=t,this.As=e.zb.xv(t,0,!0);var i=t.getCode();this.ss=0<i?i:e.pf.getCode(t),0>this.ss&&(this.ss=0),this.Eo=i=this.KT.getUnit(),this.IH=1/i.getUnitFactor(),e.pf.getCode(t)}return t.Py=function(e,t){return e==t||null!=e&&null!=t&&0==e.ss&&0==t.ss&&e.As===t.As},t.prototype.$r=function(){return this.ss},t}();e.PL=t}(Y||(Y={})),function(e){e.Yg=function(){function t(){}return t.tb=function(t,i,r,n,s,o,a,l){if(null!=o||null!=a||null!=l){n=e.F.ba(n),i=e.F.ba(i),r=e.F.ba(r),s=e.F.ba(s),1.570796326794897<e.s.P(r)&&(r=e.s.Mb(3.141592653589793,r)-r,i=e.F.ba(i+3.141592653589793)),1.570796326794897<e.s.P(s)&&(s=e.s.Mb(3.141592653589793,s)-s,n=e.F.ba(n+3.141592653589793));var c=e.F.ba(n-i);if(e.s.Y(r,s)&&(e.s.Y(i,n)||e.s.Y(e.s.P(r),1.570796326794897)))null!=o&&(o.u=0),null!=a&&(a.u=0),null!=l&&(l.u=0);else{if(e.s.Y(r,-s)){if(e.s.Y(e.s.P(r),1.570796326794897))return null!=o&&(o.u=3.141592653589793*t),null!=a&&(a.u=0<r?e.F.ba(3.141592653589793-e.F.ba(n)):e.F.ba(n)),void(null!=l&&(l.u=0<r?e.F.ba(n):e.F.ba(3.141592653589793-e.F.ba(n))));if(e.s.Y(e.s.P(c),3.141592653589793))return null!=o&&(o.u=3.141592653589793*t),null!=a&&(a.u=0),void(null!=l&&(l.u=0))}var h=1.570796326794897==e.s.P(r)?0:Math.cos(r),u=Math.sin(r),p=1.570796326794897==e.s.P(s)?0:Math.cos(s),d=Math.sin(s),f=1.570796326794897==e.s.P(c)?0:Math.cos(c),y=3.141592653589793==e.s.P(c)?0:Math.sin(c);if(null!=o){var m=Math.sin((s-r)/2);c=Math.sin(c/2),o.u=2*Math.asin(Math.sqrt(m*m+h*p*c*c))*t}null!=a&&(a.u=e.s.Y(e.s.P(r),1.570796326794897)?0>r?n:e.F.ba(3.141592653589793-n):Math.atan2(p*y,h*d-u*p*f)),null!=l&&(e.s.Y(e.s.P(s),1.570796326794897)?l.u=0>s?i:e.F.ba(3.141592653589793-i):(l.u=Math.atan2(h*y,d*h*f-p*u),l.u=e.F.ba(l.u+3.141592653589793)))}}},t.rf=function(t,i,r,n,s,o,a){if(null!=o||null!=a){i=e.F.ba(i),r=e.F.ba(r),1.570796326794897<e.s.P(r)&&(r=e.s.Mb(3.141592653589793,r)-r,i=e.F.ba(i+3.141592653589793)),e.s.Y(e.s.P(r),1.570796326794897)&&(i=0),s=e.F.ba(s);var l=e.s.Y(e.s.P(s),1.570796326794897)?0:Math.cos(s),c=e.s.Y(e.s.P(s),3.141592653589793)?0:Math.sin(s),h=e.s.Y(e.s.P(r),1.570796326794897)?0:Math.cos(r),u=Math.sin(r);t=n/t,n=e.s.Y(e.s.P(t),1.570796326794897)?0:Math.cos(t);var p=e.s.Y(e.s.P(t),3.141592653589793)?0:Math.sin(t),d=Math.asin(u*n+h*p*l);null!=a&&(a.u=d),null!=o&&(o.u=e.s.Y(e.s.P(d),1.570796326794897)?e.s.Y(r,-d)?0>d?s:e.F.ba(3.141592653589793-s):i:e.s.Y(e.s.P(r),1.570796326794897)&&e.s.Y(t,3.141592653589793)?0>r?s:e.F.ba(3.141592653589793-s):e.F.ba(i+Math.atan2(p*c,h*n-u*p*l)))}},t}()}(Y||(Y={})),function(e){e.Wk=function(){function t(){}return t.tb=function(t,i,r,n,s,o,a,l,c){var h=new e.ga(0),u=new e.ga(0),p=[0,0,0],d=[0,0,0],f=[0,0,0],y=new e.ga(0),m=new e.ga(0),g=new e.ga(0),v=new e.ga(0),_=new e.ga(0);if(null!=a||null!=l||null!=c)if(e.s.ti(i))e.Yg.tb(t,r,n,s,o,a,l,c);else{s=e.F.ba(s),r=e.F.ba(r);var b=e.F.ba(s-r);if(e.s.Y(n,o)&&(e.s.Y(r,s)||e.s.Y(e.s.P(n),1.570796326794897)))null!=a&&(a.u=0),null!=l&&(l.u=0),null!=c&&(c.u=0);else{if(e.s.Y(n,-o)){if(e.s.Y(e.s.P(n),1.570796326794897))return null!=a&&(a.u=2*e.F.Ah(t,i)),null!=l&&(l.u=0<n?e.F.ba(3.141592653589793-e.F.ba(s)):e.F.ba(s)),void(null!=c&&(c.u=0<n?e.F.ba(s):e.F.ba(3.141592653589793-e.F.ba(s))));e.s.Y(e.s.P(b),3.141592653589793)&&(null!=a&&(a.u=2*e.F.Ah(t,i)),null!=l&&(l.u=0),null!=c&&(c.u=0))}else(e.s.Y(e.s.P(n),1.570796326794897)||e.s.Y(e.s.P(o),1.570796326794897))&&(e.s.Y(e.s.P(n),1.570796326794897)?r=s:s=r);var w=0;if(0>b){w=1;var M=r;r=s,s=M,M=n,n=o,o=M}b=e.F.ot(i,n);var T=e.F.ot(i,o);null==l&&null==c||(e.Yg.tb(t,r,b,s,T,null,h,u),h=Math.atan2(Math.sin(h.u)*Math.cos(n-b),Math.cos(h.u)),u=Math.atan2(Math.sin(u.u)*Math.cos(o-T),Math.cos(u.u)),0!=w&&(M=h,h=u,u=M),null!=l&&(l.u=h),null!=c&&(c.u=u)),null!=a&&(e.F.cl(1,i,n,r,0,g,v,_),p[0]=g.u,p[1]=v.u,p[2]=_.u,e.F.cl(1,i,o,s,0,g,v,_),d[0]=g.u,d[1]=v.u,d[2]=_.u,f[0]=p[1]*d[2]-d[1]*p[2],f[1]=-(p[0]*d[2]-d[0]*p[2]),f[2]=p[0]*d[1]-d[0]*p[1],i=1-e.F.w(i,e.F.Vq(i,e.F.Qj(i,Math.acos(f[2]/Math.sqrt(f[0]*f[0]+f[1]*f[1]+f[2]*f[2]))))),i*=2-i,l=Math.atan2(-f[1],-f[0]),f=e.F.ba(l-1.570796326794897),l=e.F.ba(l+1.570796326794897),f=e.s.P(e.F.ba(r-f))<=e.s.P(e.F.ba(r-l))?f:l,e.Yg.tb(1,f,0,r,b,y,null,null),e.Yg.tb(1,f,0,s,T,m,null,null),3.141592653589793<y.u+m.u&&(f=e.F.ba(f+3.141592653589793),e.Yg.tb(1,f,0,r,b,y,null,null),e.Yg.tb(1,f,0,s,T,m,null,null)),y.u*=e.s.Mb(1,n),m.u*=e.s.Mb(1,o),y.u=e.F.Qj(i,y.u),m.u=e.F.Qj(i,m.u),r=e.F.q(t,i,y.u),t=e.F.q(t,i,m.u),a.u=e.s.P(t-r))}}},t.rf=function(t,i,r,n,s,o,a,l){var c=0,h=new e.ga(0),u=new e.ga(0),p=[0,0,0],d=[0,0,0],f=new e.ga(0),y=new e.ga(0),m=new e.ga(0);if(null!=a||null!=l)if(e.s.ti(i))e.Yg.rf(t,r,n,s,o,a,l);else if(e.s.Cd(s))null!=a&&(a.u=r),null!=l&&(l.u=n);else if(o=e.F.ba(o),0>s&&(s=e.s.P(s),o=e.F.ba(o+3.141592653589793)),r=e.F.ba(r),n=e.F.ba(n),1.570796326794897<e.s.P(n)&&(r=e.F.ba(r+3.141592653589793),n=e.s.Mb(3.141592653589793,n)-n),e.s.Y(e.s.P(n),1.570796326794897)&&(r=0),e.s.Cd(n)){var g=e.s.P(1.570796326794897-e.s.P(o));g=e.F.Qj(i,g),g=1-e.F.w(i,e.F.Vq(i,g)),g*=2-g,t=s/e.F.Ah(t,g)*1.570796326794897,t=e.F.Rq(g,t),t=e.F.ot(g,t),e.Yg.rf(1,r,n,t,o,a,h),null!=l&&(c=h.u),null!=l&&(l.u=e.F.Qj(i,c))}else if(e.s.Y(e.s.P(n),1.570796326794897))h=2*(c=e.F.Ah(t,i)),o=0<(t=e.s.Mb(1.570796326794897,n))?e.F.ba(3.141592653589793-o):o,n=c-s,e.s.P(n)<=c?null!=a&&(a.u=o):(n=Math.floor(s/h),0==e.O.truncate(n%2)?(null!=a&&(a.u=o),s-=n*h):(null!=a&&(a.u=e.F.ba(o+3.141592653589793)),s=(n+1)*h-s),n=c-s),null!=l&&(l.u=e.F.Rq(i,n/c*t));else{g=e.F.ot(i,n),o=Math.atan2(Math.sin(o),Math.cos(o)*Math.cos(n-g));var v=e.O.truncate(e.s.Mb(1,g))*(1.570796326794897>=e.s.P(o)?1:-1);o=e.F.ba(r+Math.atan(Math.tan(o)*-Math.sin(g))),e.Yg.tb(t,o,0,r,g,null,u,null),g=e.s.P(1.570796326794897-e.s.P(u.u)),g=e.F.Qj(i,g),g=1-e.F.w(i,e.F.Vq(i,g)),g*=2-g,e.F.cl(1,i,0,o,0,f,y,m),p[0]=f.u,p[1]=y.u,p[2]=m.u,e.F.cl(1,i,n,r,0,f,y,m),d[0]=f.u,d[1]=y.u,d[2]=m.u,n=Math.acos((p[0]*d[0]+p[1]*d[1]+p[2]*d[2])/Math.sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2])),n=e.F.Qj(g,n),s=0<(n=e.F.q(t,g,n)+s*v)?u.u:e.F.ba(u.u+3.141592653589793),t=e.s.P(n)/e.F.Ah(t,g)*1.570796326794897,t=e.F.Rq(g,t),t=e.F.ot(g,t),e.Yg.rf(1,o,0,t,s,a,h),null!=l&&(c=h.u),null!=l&&(l.u=e.F.Qj(i,c))}},t}()}(Y||(Y={})),function(e){e.cu=function(){function t(){}return t.tb=function(t,i,r,n,s,o,a,l,c){var h=0,u=0,p=0;if(null!=a||null!=l||null!=c)if(e.s.ti(i))e.Yg.tb(t,r,n,s,o,a,l,c);else{var d=e.F.ba(s-r);if(e.s.Y(n,o)&&(e.s.Cd(d)||e.s.Y(e.s.P(n),1.570796326794897)))null!=a&&(a.u=0),null!=l&&(l.u=0),null!=c&&(c.u=0);else{if(e.s.Y(n,-o)){if(e.s.Y(e.s.P(n),1.570796326794897))return null!=a&&(a.u=2*e.F.Ah(t,i)),null!=l&&(l.u=0<n?e.F.ba(3.141592653589793-e.F.ba(s)):e.F.ba(s)),void(null!=c&&(c.u=0<n?e.F.ba(s):e.F.ba(3.141592653589793-e.F.ba(s))));e.s.Y(e.s.P(d),3.141592653589793)&&(null!=a&&(a.u=2*e.F.Ah(t,i)),null!=l&&(l.u=0),null!=c&&(c.u=0))}else{if(e.s.Y(e.s.P(n),1.570796326794897)||e.s.Y(e.s.P(o),1.570796326794897))return void e.Wk.tb(t,i,r,n,s,o,a,l,c);if(e.s.Cd(d)||e.s.Y(e.s.P(d),3.141592653589793))return void e.Wk.tb(t,i,r,n,s,o,a,l,c)}var f=1-Math.sqrt(1-i),y=i/(1-i),m=t*(1-f);t=e.F.Vq(i,n);var g=e.F.Vq(i,o);i=1.570796326794897==e.s.P(t)?0:Math.cos(t);var v=Math.sin(t),_=1.570796326794897==e.s.P(g)?0:Math.cos(g),b=Math.sin(g),w=d,M=Math.cos(w),T=Math.sin(w),S=1,A=0;do{var E=w,x=Math.sqrt(Math.pow(_*T,2)+Math.pow(i*b-v*_*M,2)),I=v*b+i*_*M,C=Math.atan2(x,I);if(0==x){S=0;break}var k=i*_*T/x;if(h=Math.cos(Math.asin(k)),u=I-2*v*b/(h*=h),1<e.s.P(u)&&(u=e.s.Mb(1,u)),w=d+(1-(w=f/16*h*(4+f*(4-3*h))))*f*k*(C+w*x*(u+w*I*(2*(p=u*u)-1))),M=Math.cos(w),T=Math.sin(w),A++,3.141592653589793<e.s.P(w)&&30<A){S=0;break}}while(5e3>=A&&!e.s.Y(E,w));if(0!=S)f=(y*=h)*(256+y*(y*(74-47*y)-128))/1024,null!=a&&(a.u=m*(1+y*(4096+y*(y*(320-175*y)-768))/16384)*(C-f*x*(u+f/4*(I*(2*p-1)-f/6*u*(4*x*x-3)*(4*p-3))))),null!=l&&(l.u=e.s.Y(e.s.P(n),1.570796326794897)?0>n?s:e.F.ba(3.141592653589793-s):Math.atan2(_*T,i*b-v*_*M)),null!=c&&(e.s.Y(e.s.P(o),1.570796326794897)?c.u=0>o?r:e.F.ba(3.141592653589793-r):(c.u=Math.atan2(i*T,i*b*M-v*_),c.u=e.F.ba(c.u+3.141592653589793)));else{w=e.s.Mb(3.141592653589793,d),I=v*b-i*_,C=Math.acos(I),x=Math.sin(C),h=1,A=k=0;do{p=k,M=1-.25*(k=f*(h*=h)*(1+f+f*f))+.1875*(u=f*f*(M=h*h)*(1+2.25*f))-.1953125*(S=f*f*f*M*h),k=.25*k-.25*u+.29296875*S,T=.03125*u-.05859375*S,S*=.00651041666666667,u=I-2*v*b/h,1<e.s.P(u)&&(u=e.s.Mb(1,u)),h=Math.acos(u),I=Math.cos(2*h),E=Math.cos(3*h),T=(k=e.s.Y(n,-o)?e.F.ba(3.141592653589793-d)/(3.141592653589793*f*M):e.F.ba(w-d)/(f*(M*C+k*x*u+T*Math.sin(2*C)*I+S*Math.sin(3*C)*E)))*x/(i*_),w=1.570796326794897<e.s.P(d)?e.s.Mb(3.141592653589793,T)-Math.asin(T):Math.asin(T),M=Math.cos(w),x=Math.sqrt(Math.pow(_*T,2)+Math.pow(i*b-v*_*M,2)),C=3.141592653589793-Math.asin(e.s.P(x)),I=Math.cos(C),h=Math.cos(Math.asin(k)),A++}while(70>=A&&!e.s.Y(p,k));null!=a&&(M=1+(y*=h*=h)*(4096+y*(y*(320-175*y)-768))/16384,e.s.Y(n,-o)?a.u=3.141592653589793*m*M:(u=I-2*v*b/h,h=Math.acos(u),I=Math.cos(2*h),E=Math.cos(3*h),a.u=m*(M*C+y*(y*(128+y*(35*y-60))-512)/2048*x*u+y*(5*y-4)/6144*y*y*Math.sin(2*C)*I+S*Math.sin(3*C)*E+-762939453125e-16*y*y*y*y*Math.sin(4*C)*Math.cos(4*h)))),null!=l&&(e.s.Cd(n)&&e.s.Cd(o)?(h=Math.sqrt(1-k*k),l.u=Math.acos(h),0>d&&(l.u*=-1)):e.s.Y(e.s.P(n),1.570796326794897)?l.u=0>n?s:e.F.ba(3.141592653589793-s):(a=k/i,m=Math.sqrt(1-a*a),0>i*b-v*_*Math.cos(w)&&(m*=-1),l.u=Math.atan2(a,m),e.s.Y(n,-o)&&e.s.P(e.F.ba(r-s))>3.141592653589793*(1-f*Math.cos(n))&&(0<n&&1.570796326794897>e.s.P(l.u)||0>n&&1.570796326794897<e.s.P(l.u))&&(l.u=e.s.Mb(3.141592653589793,l.u)-l.u))),null!=c&&(e.s.Cd(n)&&e.s.Cd(o)?(h=Math.sqrt(1-k*k),c.u=Math.acos(h),0<=d&&(c.u*=-1)):e.s.Y(e.s.P(o),1.570796326794897)?c.u=0>o?r:e.F.ba(3.141592653589793-r):(d=k/_,a=Math.sqrt(1-d*d),m=Math.sin(w/2),0>Math.sin(g-t)-2*i*b*m*m&&(a*=-1),c.u=Math.atan2(d,a),c.u=e.F.ba(c.u+3.141592653589793),e.s.Y(n,-o)&&!e.s.Cd(n)&&!e.s.Y(e.s.P(n),1.570796326794897)&&e.s.P(e.F.ba(r-s))>3.141592653589793*(1-f*Math.cos(n))&&(null!=l?m=l.u:(a=k/i,m=Math.sqrt(1-a*a),0>i*b-v*_*Math.cos(w)&&(m*=-1),m=Math.atan2(a,m),e.s.Y(n,-o)&&e.s.P(e.F.ba(r-s))>3.141592653589793*(1-f*Math.cos(n))&&(0<n&&1.570796326794897>e.s.P(m)||0>n&&1.570796326794897<e.s.P(m))&&(m=e.s.Mb(3.141592653589793,m)-m)),1.570796326794897>=e.s.P(m)&&1.570796326794897<e.s.P(c.u)||1.570796326794897<=e.s.P(m)&&1.570796326794897>e.s.P(c.u))&&(c.u=-1*e.F.ba(c.u+3.141592653589793))))}}}},t.rf=function(t,i,r,n,s,o,a,l){if(null!=a||null!=l)if(e.s.ti(i))e.Yg.rf(t,r,n,s,o,a,l);else if(o=e.F.ba(o),e.s.Y(e.s.P(n),1.570796326794897)||e.s.Cd(o)||e.s.Y(e.s.P(o),3.141592653589793))e.Wk.rf(t,i,r,n,s,o,a,l);else{var c=1.570796326794897==e.s.P(o)?0:Math.cos(o),h=3.141592653589793==e.s.P(o)?0:Math.sin(o);e.s.Y(e.s.P(n),1.570796326794897)&&(r=0),o=1-Math.sqrt(1-i);var u=e.F.Vq(i,n);n=1.570796326794897==e.s.P(u)?0:Math.cos(u);var p=Math.sin(u);u=Math.atan2(Math.tan(u),c);var d=n*h,f=d*d,y=1-f,m=i/(1-i)*y,g=(i=m*(256+m*(m*(74-47*m)-128))/1024)/4,v=i/6,_=s/(t*(1-o)*(1+m*(4096+m*(m*(320-175*m)-768))/16384)),b=_;do{var w=b;s=1.570796326794897==e.s.P(b)?0:Math.cos(b);var M=(m=3.141592653589793==e.s.P(b)?0:Math.sin(b))*m;b=i*m*((t=Math.cos(2*u+b))+g*(s*(2*(b=t*t)-1)-v*t*(4*M-3)*(4*b-3)))+_}while(!e.s.Y(w,b));s=1.570796326794897==e.s.P(b)?0:Math.cos(b),m=3.141592653589793==e.s.P(b)?0:Math.sin(b),null!=a&&(h=Math.atan2(m*h,n*s-p*m*c),y=o/16*y*(4+o*(4-3*y)),t=Math.cos(2*u+b),a.u=e.F.ba(r+(h-(1-y)*o*d*(b+y*m*(t+y*s*(2*t*t-1)))))),null!=l&&(y=p*m-n*s*c,y=(1-o)*Math.sqrt(f+y*y),l.u=Math.atan2(p*s+n*m*c,y))}},t}()}(Y||(Y={})),function(e){e.PC=function(){function t(){}return t.tb=function(t,i,r,n,s,o,a,l,c){var h=e.F.ba(s-r),u=e.s.Y(e.s.P(n),1.570796326794897),p=e.s.Y(e.s.P(o),1.570796326794897);if(e.s.Y(n,o)&&(e.s.Cd(h)||u))null!=a&&(a.u=0),null!=l&&(l.u=0),null!=c&&(c.u=0);else{if(e.s.ti(i)){var d=Math.sin(n),f=Math.sin(o);d=Math.sqrt((1+d)/(1-d)),f=Math.sqrt((1+f)/(1-f)),d=Math.log(f)-Math.log(d),d=Math.atan2(h,d),null!=a&&(a.u=e.s.Y(n,o)?e.s.P(t*Math.cos(n)*h):e.s.P((t*o-t*n)/Math.cos(d)))}else f=e.F.Qw(i,o),d=Math.sin(e.F.Qw(i,n)),f=Math.sin(f),d=Math.sqrt((1+d)/(1-d)),f=Math.sqrt((1+f)/(1-f)),d=Math.log(f)-Math.log(d),d=Math.atan2(h,d),null!=a&&(e.s.Y(n,o)?a.u=e.s.P(t*h*Math.cos(n)/e.F.w(i,n)):(h=e.F.q(t,i,n),t=e.F.q(t,i,o),a.u=e.s.P((t-h)/Math.cos(d))));null==l&&null==c||(a=e.F.ba(d+3.141592653589793),u&&p||!u&&!p||(u?d=0>n?s:e.F.ba(3.141592653589793-s):p&&(a=0>o?r:e.F.ba(3.141592653589793-r))),null!=l&&(l.u=d),null!=c&&(c.u=a))}},t.rf=function(t,i,r,n,s,o,a,l){o=e.F.ba(o),0>s&&(s=e.s.P(s),o=e.F.ba(o+3.141592653589793)),e.s.ti(i)?e.s.Y(e.s.P(n),1.570796326794897)?(r=0>n?o:e.F.ba(3.141592653589793-o),3.141592653589793>=(o=s/t%6.283185307179586)?t=n-e.s.Mb(o,n):(r=e.F.ba(r+3.141592653589793),t=-n+e.s.Mb(o-3.141592653589793,n))):e.s.Y(e.s.P(o),1.570796326794897)?(r=e.F.ba(r+e.s.Mb(s,o)/(t*Math.cos(n))),t=n):(t=n+s*Math.cos(o)/t,1.570796326794897<e.s.P(t)&&(t=1.570796326794897),e.s.Y(e.s.P(t),1.570796326794897)&&(e.s.Cd(o)||e.s.Y(e.s.P(o),3.141592653589793))||(1.570796316258184<e.s.P(t)&&(t=e.s.Mb(1.570796316258184,t)),i=Math.sin(n),n=Math.sin(t),i=Math.sqrt((1+i)/(1-i)),n=Math.sqrt((1+n)/(1-n)),i=Math.log(n)-Math.log(i),r=e.F.ba(r+Math.tan(o)*i))):e.s.Y(e.s.P(n),1.570796326794897)?(r=0>n?o:e.F.ba(3.141592653589793-o),o=s/e.F.qW(t,i),3.141592653589793>=(o%=6.283185307179586)?t=n-e.s.Mb(o,n):(r=e.F.ba(r+3.141592653589793),t=-n+e.s.Mb(o-3.141592653589793,n)),t=e.F.Rq(i,t)):e.s.Y(e.s.P(o),1.570796326794897)?(r=e.F.ba(r+e.s.Mb(s,o)*e.F.w(i,n)/(t*Math.cos(n))),t=n):(t=1.570796326794897*(s*Math.cos(o)+e.F.q(t,i,n))/e.F.Ah(t,i),1.570796326794897<e.s.P(t)&&(t=e.s.Mb(1.570796326794897,t)),t=e.F.Rq(i,t),e.s.Y(e.s.P(t),1.570796326794897)&&(e.s.Cd(o)||e.s.Y(e.s.P(o),3.141592653589793))||(s=e.F.Qw(i,n),n=e.F.Qw(i,t),1.570796316258184<e.s.P(n)&&(n=e.s.Mb(1.570796316258184,t),t=e.F.yO(i,n)),i=Math.sin(s),n=Math.sin(n),i=Math.sqrt((1+i)/(1-i)),n=Math.sqrt((1+n)/(1-n)),i=Math.log(n)-Math.log(i),r=e.F.ba(r+Math.tan(o)*i))),null!=a&&(a.u=r),null!=l&&(l.u=t)},t}()}(Y||(Y={})),function(e){e.kb=function(){function t(){}return t.Xy=function(t,i,r,n,s,o,a){e.cu.tb(t,i,r,n,s,o,null,a,null)},t.yi=function(t,i,r,n,s,o,a,l){e.cu.rf(t,i,r,n,s,o,a,l)},t.wd=function(t,i,r,n,s,o,a,l,c,h){switch(h){case 2:e.Wk.tb(t,i,r,n,s,o,a,l,c);break;case 3:e.QC.tb(t,i,r,n,s,o,a,l,c);break;case 1:e.PC.tb(t,i,r,n,s,o,a,l,c);break;default:e.cu.tb(t,i,r,n,s,o,a,l,c)}},t.oj=function(t,i,r,n,s,o,a,l,c){switch(c){case 2:e.Wk.rf(t,i,r,n,s,o,a,l);break;case 3:e.QC.rf(t,i,r,n,s,o,a,l);break;case 1:e.PC.rf(t,i,r,n,s,o,a,l);break;default:e.cu.rf(t,i,r,n,s,o,a,l)}},t}()}(Y||(Y={})),function(e){var t=function(){function t(){this.y=this.x=null}return t.construct=function(i){var r=new t;return r.x=new e.Wb,r.x.set(i.x),r.y=new e.Wb,r.y.set(i.y),r},t.VE=function(i,r){var n=new t;return n.x=new e.Wb,n.x.set(i),n.y=new e.Wb,n.y.set(r),n},t.prototype.qg=function(){return this.x.qg()&&this.y.qg()},t.prototype.value=function(){return e.h.construct(this.x.value(),this.y.value())},t}();e.vY=t;var i=function(){function t(){this.z=this.y=this.x=null}return t.construct=function(i){var r=new t;return r.x=new e.Wb,r.x.set(i.x),r.y=new e.Wb,r.y.set(i.y),r.z=new e.Wb,r.z.set(i.z),r},t.VE=function(i,r,n){var s=new t;return s.x=new e.Wb,s.x.set(i),s.y=new e.Wb,s.y.set(r),s.z=new e.Wb,s.z.set(n),s},t.prototype.qg=function(){return this.x.qg()&&this.y.qg()&&this.z.qg()},t.prototype.value=function(){return new e.Nd(this.x.value(),this.y.value(),this.z.value())},t.prototype.Qh=function(t){var i=new e.Wb,r=new e.Wb,n=new e.Wb;return i.Kl(this.x,t.x),r.Kl(this.y,t.y),n.Kl(this.z,t.z),(t=new e.Wb).dN(i,r),t.add(n),t},t.prototype.cF=function(i){var r=new t;r.x.Kl(this.y,i.z),r.y.Kl(this.z,i.x),r.z.Kl(this.x,i.y);var n=new e.Wb,s=new e.Wb,o=new e.Wb;return n.Kl(this.z,i.y),s.Kl(this.x,i.z),o.Kl(this.y,i.x),r.x.sub(n),r.y.sub(s),r.z.sub(o),r},t}();e.wY=i,e.Ox=function(){function r(){}return r.EP=function(e,t,i){var n=t.x;t=t.y,r.cl(1,e,Math.cos(n),Math.sin(n),Math.cos(t),Math.sin(t),i)},r.DP=function(t,i){var n=new e.Nd;return r.EP(t,i,n),n},r.cl=function(e,t,i,r,n,s,o){e/=Math.sqrt(1-t*s*s),o.K(e*n*i,e*n*r,e*(1-t)*s)},r.Yu=function(t,r){var n=new e.Wb,s=new e.Wb,o=new e.Wb,a=new e.Wb;n.cos(r.x),s.sin(r.x),o.cos(r.y),a.sin(r.y);var l=new e.Wb;return l.set(a),l.Ag(a),l.No(t),l.No(-1),l.kN(),l.sqrt(),(r=new e.Wb).set(1),r.jm(l),(l=new e.Wb).set(r),l.Ag(o),l.Ag(n),(n=new e.Wb).set(r),n.Ag(o),n.Ag(s),(s=new e.Wb).set(r),s.No(1-t),s.Ag(a),i.VE(l,n,s)},r.SS=function(i,n,s,o){if(Math.abs(n.x-s.x)>Math.PI||Math.abs(n.y)>.5*Math.PI||Math.abs(s.y)>.5*Math.PI||(Math.abs(n.y)==.5*Math.PI||Math.abs(s.y)==.5*Math.PI)&&n.x!=s.x)return NaN;if(o=r.cB(o,Math.min(n.x,s.x),Math.max(n.x,s.x)),!new e.Nc(n.x,s.x).contains(o))return NaN;var a=t.construct(n);if(s=t.construct(s),a=r.Yu(i,a),s=r.Yu(i,s),(s=a.cF(s)).z.qg())return n.y;var l=new e.Wb;l.set(s.x),l.jm(s.z),l.No(-1);var c=new e.Wb;c.set(s.y),c.jm(s.z),c.No(-1);var h=new e.Wb;return h.set(c),h.Ag(c),(a=new e.Wb).set(l),a.Ag(l),a.add(h),a.sqrt(),a.qg()||l.qg()&&c.qg()?n.y:(n=Math.atan2(c.value(),l.value()),n=Math.atan2(a.value()*Math.cos(n-o),1-i),o=r.DP(i,e.h.construct(o,n)),i=new e.Nd(o.x,o.y,-o.z),o=s.value().Qh(o),i=s.value().Qh(i),Math.abs(i)<Math.abs(o)&&(n=-n),n)},r.Oz=function(i,n,s,o,a){if(a[0]=NaN,a[1]=NaN,Math.abs(n.x-s.x)>Math.PI||Math.abs(n.y)>.5*Math.PI||Math.abs(s.y)>.5*Math.PI||(Math.abs(n.y)==.5*Math.PI||Math.abs(s.y)==.5*Math.PI)&&n.x!=s.x||Math.abs(o)>=.5*Math.PI||0<n.y&&0<s.y&&n.y>o&&s.y>o||0>n.y&&0>s.y&&n.y<o&&s.y<o)return 0;var l=t.construct(n),c=t.construct(s);l=r.Yu(i,l),c=r.Yu(i,c);var h=l.cF(c);if(h.z.qg())return new e.Nc(n.y,s.y).contains(o)?(a[0]=n.x,1):0;(c=new e.Wb).set(h.x),c.jm(h.z),c.No(-1),(l=new e.Wb).set(h.y),l.jm(h.z),l.No(-1),(h=new e.Wb).set(l),h.Ag(l);var u=new e.Wb;return u.set(c),u.Ag(c),u.add(h),u.sqrt(),u.qg()||c.qg()&&l.qg()?0==o?(a[0]=n.x,a[1]=s.x,2):0:(i=(1-i)*Math.tan(o)/u.value(),1<Math.abs(i)?0:(i=Math.acos(i),h=Math.atan2(l.value(),c.value()),c=Math.min(n.x,s.x),l=Math.max(n.x,s.x),s=r.cB(h-i,c,l),i=0!=o?r.cB(h+i,c,l):s,o=0,c<=s&&s<=l&&(a[o]=s,o++),i!=s&&c<=i&&i<=l&&(a[o]=i,2==++o&&Math.abs(a[0]-n.x)>Math.abs(a[1]-n.x)&&(n=a[0],a[0]=a[1],a[1]=n)),o))},r.cB=function(e,t,i){return e>i?e-=2*(t=Math.ceil((e-i)/(2*Math.PI)))*Math.PI:e<t&&(e+=2*(t=Math.ceil((t-e)/(2*Math.PI)))*Math.PI),e},r}()}(Y||(Y={})),function(e){e.XK=function(){function t(){}return t.$X=function(i,r){var n=[0,0,0,0],s=new e.h;s.L(r),s.scale(9102==e.cb.sc(i).Hd().Ec()?1:e.cb.sc(i).Hd().ai/3.141592653589793*180),-180>s.x?(s.x-=s.x%360,-180>s.x&&(s.x+=360)):180<s.x&&(s.x-=s.x%360,180<s.x&&(s.x-=360)),90<s.y&&(s.y=90),-90>s.y&&(s.y=-90);for(var o=-180,a=180,l=(i=40)-1,c=(r=(i+31)/32)-1;0<=c;c--)for(var h=l-32*c,u=Math.min(32,i-32*c),p=1;p<u;p+=2){var d=.5*(a+o);s.x>=d?(n[c]|=1<<h,o=d):a=d,h-=2,l-=2}for(o=-90,a=90,l=i-2,c=r-1;0<=c;c--)for(h=l-32*c,u=Math.min(32,i-32*c),p=0;p<u;p+=2)d=.5*(a+o),s.y>=d?(n[c]|=1<<h,o=d):a=d,h-=2,l-=2;return t.$P(n,8,8)},t.$P=function(e,t,i){for(var r=[],n=0;n<t;n++)r[n]="";for(var s=n=0,o=0;o<t;o++){var a=e[n]>>s&31;if(31<(s+=5)){var l=37-s;a&=(1<<l)-1,s-=32,a|=(e[++n]&(1<<s)-1)<<l}r[t-1-o]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[a]}if(i>t)for(o=0;o<i-t;o++)r.push("0");else i<t&&(r.length=i);return r.join("")},t}()}(Y||(Y={})),function(e){var t={gcstol:[0,2e-9,1,2.241706620489156e-9,2,2.313672246530541e-9,3,8.98240164660333e-9,4,8.982433838020134e-9,5,8.982439417325895e-9,6,8.982466029667677e-9,7,8.982476760268133e-9,8,8.982492642167149e-9,9,8.98251968292634e-9,10,8.98253685210448e-9,11,8.982546725256576e-9,12,8.982557456049832e-9,13,8.98257333682596e-9,14,8.982575482995276e-9,15,8.982578488197342e-9,16,8.982579775336987e-9,17,8.9825840676828e-9,18,8.982599090925448e-9,19,8.982605529473397e-9,20,8.982609220517402e-9,21,8.982611968030573e-9,22,8.982616260407152e-9,23,8.982620552787834e-9,24,8.982633429954492e-9,25,8.982637722351582e-9,26,8.98264416095491e-9,27,8.982646307158072e-9,28,8.982654891980968e-9,29,8.982667769246082e-9,30,8.982674207892485e-9,31,8.982680646548117e-9,32,8.982682792768713e-9,33,8.982685798042582e-9,34,8.982689231436652e-9,35,8.98269137766135e-9,36,8.98269266624163e-9,37,8.982705114087017e-9,38,8.982706830791106e-9,39,8.982711958374661e-9,40,8.982712839964735e-9,41,8.982717991496125e-9,42,8.982721424914803e-9,43,8.982723571154887e-9,44,8.982727863638127e-9,45,8.982730868942154e-9,46,8.982734302370678e-9,47,8.982745033612112e-9,48,8.982751472369276e-9,49,8.982755764879183e-9,50,8.982762203651733e-9,51,8.982764776628385e-9,52,8.982766496171896e-9,53,8.98277722749025e-9,54,8.98278152002477e-9,55,8.98279933943848e-9,56,8.9829143024805e-9,57,8.982922161948598e-9,58,8.98292327314211e-9,59,8.982925667349601e-9,60,8.982932222965576e-9,61,8.982961298941316e-9,62,8.982965524049989e-9,63,8.982994818246099e-9,64,8.982994895706967e-9,65,8.98299489597736e-9,66,8.983000733443498e-9,67,8.983055097289157e-9,68,8.983064111047368e-9,69,8.983111996941178e-9,70,8.983120447446023e-9,71,8.98312748954554e-9,72,8.983134531656096e-9,73,8.983141573777694e-9,74,8.983148615910332e-9,75,8.983152841195215e-9,76,8.983153545409748e-9,77,8.983153827095593e-9,78,8.98315396793852e-9,79,8.983154249624393e-9,80,8.983155658054012e-9,81,8.983960794340072e-9,82,8.984061344391998e-9,83,8.984072829255685e-9,84,8.984194981201908e-9,85,8.984275233099427e-9,86,8.984326127007554e-9,87,8.984330099816539e-9,88,8.98433275258421e-9,89,8.984333047023206e-9,90,8.984333885258723e-9,91,8.984337959508212e-9,92,8.984365176209457e-9,93,8.984727360418079e-9,94,8.984901041679577e-9,95,8.98542662091587e-9,96,8.98610024130669e-9,97,8.992894229037531e-9,98,8.993203677616635e-9,99,8.993206178094346e-9,100,8.993216059187305e-9,101,8.99322029394808e-9,102,8.994627867045891e-9,103,9.467559984315793e-9,104,9.46881168618118e-9,105,9.980888154931644e-9,106,9.981105353606775e-9,107,9.983807356573187e-9,108,1.687060485811522e-8,109,1.688447560354875e-8,110,2.176606011487185e-8,111,2.225078816042032e-8,112,2.348476432064694e-8,113,2.348765250187846e-8,114,2.378108974103778e-8,115,3.14559636297708e-8,116,3.297788621680806e-8,117,3.667892343788279e-8,118,4.235973644320739e-8,119,4.794625900676345e-8,120,7.262742998235812e-8,121,7.499447580246377e-8,122,7.525056410964318e-8,123,7.979913581209237e-8,124,9.662020153976783e-8,125,9.799175562353741e-8,126,9.897353517547472e-8,127,1.02313891987647e-7,128,1.081460541960784e-7,129,1.21905913857622e-7,130,2.246893314238523e-7,131,2.297344808062643e-7,132,2.42984645941825e-7,133,2.754604784282804e-7,134,2.884548130346993e-7,135,3.370339971357784e-7,136,4.307953346848296e-7,137,5.208707228462029e-7,138,5.509209568565608e-7,139,6.452227422644406e-7,140,6.740679942715567e-7,141,6.861770001566745e-7,142,7.252630318111686e-7,143,7.441010326374328e-7,144,7.742672907173287e-7,145,9.629542775307953e-7,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6.666666666666667e-9,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},i={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};e.wr=function(){function e(){}return e.Sy=function(t){!1===e.xp&&e.yt();var i=e.FQ(t);if(-1==i){var r=e.Bx(t);r!=t&&(i=e.Sy(r))}return-1==i&&(r=e.FK(t))!=t&&(i=e.Sy(r)),i},e.FQ=function(t){return void 0!==e.Fw[t]?e.Fw[t]:-1},e.CQ=function(t){!1===e.xp&&e.yt();var i=e.nF(t);if(1e38==i){var r=e.Bx(t);if(r!=t&&(i=e.nF(r)),1e38==i)return 1e-10}return i},e.ZS=function(t){if(void 0!==e.Is[t])return!0;var i=e.Bx(t);return i!=t&&void 0!==e.Is[i]},e.aT=function(t){if(void 0!==e.xo[t])return!0;var i=e.Bx(t);return i!=t&&void 0!==e.xo[i]},e.nF=function(t){return!1===e.xp&&e.yt(),void 0!==e.Is[t]?e.Is[t]:void 0!==e.xo[t]?e.xo[t]:1e38},e.FK=function(t){return!1===e.xp&&e.yt(),void 0!==e.WA[t]?e.WA[t]:t},e.Bx=function(t){return!1===e.xp&&e.yt(),void 0!==e.XA[t]?e.XA[t]:t},e.yt=function(){for(var r,n=t,s=0;s<n.pcsid.length;s+=2)e.xo[n.pcsid[s]]=n.pcstol[2*n.pcsid[s+1]+1];for(s=0;s<n.pcsidc.length;s+=1)for(var o=(r=n.pcsidc[s])[0];o<=r[1];o++)e.xo[o]=n.pcstol[2*r[2]+1];for(s=0;s<n.gcsid.length;s+=2)e.Is[n.gcsid[s]]=n.gcstol[2*n.gcsid[s+1]+1];for(s=0;s<n.gcsidc.length;s+=1)for(o=(r=n.gcsidc[s])[0];o<=r[1];o++)e.xo[o]=n.gcstol[2*r[2]+1];for(s=0;s<i.c.length;s+=1)for(o=(r=i.c[s])[0];o<=r[1];o++)e.Fw[o]=r[2];for(s=0;s<i.nc.length;s+=2)e.Fw[i.nc[s]]=i.nc[s+1];for(i=null,s=0;s<n.newtoold.length;s+=2)e.WA[n.newtoold[s+1]]=n.newtoold[s],e.XA[n.newtoold[s]]=n.newtoold[s+1];t=null,e.xp=!0},e.xp=!1,e.Is=[],e.xo=[],e.WA=[],e.XA=[],e.Fw=[],e}()}(Y||(Y={})),function(e){function t(e){return 0===e.length?'""':'"'==e[0]||"."==e[0]||"0"<=e[0]&&"9">=e[0]?e:'"'+e.trim()+'"'}var i=[];e.XC=function(){function r(){}return r.EQ=function(n){try{for(var s=0;s<i.length;s++)if(i[s].wkttext===n)return i[s].unit;for(var o,a=s="",l=!1,c=0;c<n.length;c++){var h=n[c];!0===l?'"'==h?'"'==n[c+1]?s+=h:l=l=!1:s+=h:/[\s]/.test(h)||(","==h?(a=""!==s?a+(t(s)+","):a+",",s=""):")"==h||"]"==h?(a=""!==s?a+(t(s)+"]}"):a+"]}",s=""):"("==h||"["==h?(a+='{ "entity": "'+s.toUpperCase().trim()+'", "values":[',s=""):'"'==h?(l=!0,s=""):s+=h)}o=JSON.parse(a);var u=r.mF(o);if(null===u)return null;for(o=null,h=0;h<u.values.length;h++)if("object"==typeof u.values[h]&&("UNIT"===u.values[h].entity||"ANGLEUNIT"===u.values[h].entity||"LENGTHUNIT"===u.values[h].entity)){o=u.values[h];break}if(null===o)return null;var p=e.Tc.ZO("GEOGCS"===u.entity||"GEOGCRS"===u.entity?1:0,o.values[1],o.values[2]);return i.push({wkttext:n,unit:p}),10<i.length&&i.shift(),p}catch(e){return null}},r.mF=function(e){if(null===e)return null;switch(e.entity){case"GEOGCRS":case"GEOGCS":case"PROJCRS":case"PROJCS":return e}for(var t=[],i=0;i<e.values.length;i++)if("object"==typeof e.values[i]&&void 0!==e.values[i].entity)switch(e.values[i].entity){case"GEOGCRS":case"GEOGCS":case"PROJCRS":case"PROJCS":return e.values[i];default:t.push(e.values[i])}for(e=0;e<t.length;e++)if(null!==(i=r.mF(t[e])))return i;return null},r.DQ=function(e){var t=-1;if(null!=e&&0<e.length){var i=e.search(/PROJCR?S/);if(0<=i){var r=0;if(0<=(i=e.lastIndexOf("UNIT"))&&0<(i=e.indexOf(",",i+4))){i++;var n=e.indexOf("]",i+1);if(0<n)try{r=parseFloat(e.substring(i,n))}catch(e){r=0}}0<r&&(t=.001/r)}else if(0<=(i=e.search(/GEOGCR?S/))){var s=0;if(r=0,-1===(i=e.indexOf("SPHEROID",i+6))&&(i=e.indexOf("ELLIPSOID",i+7)),0<i&&0<(i=e.indexOf(",",i+8))){if(i++,0<(n=e.indexOf(",",i+1)))try{s=parseFloat(e.substring(i,n))}catch(e){s=0}if(0<s&&(-1===(i=e.lastIndexOf("ANGLEUNIT",n+1))&&(i=e.lastIndexOf("UNIT",n+1)),0<=i&&0<(i=e.indexOf(",",i+4))&&(i++,0<(n=e.indexOf("]",i+1)))))try{r=parseFloat(e.substring(i,n))}catch(e){r=0}}0<s&&0<r&&(t=.001/(s*r))}}return t},r}()}(Y||(Y={})),function(e){var t;(t=e.eL||(e.eL={}))[t.NONE=0]="NONE",t[t.LINEAR=1]="LINEAR",t[t.ANGULAR=2]="ANGULAR",function(e){e[e.enumFloat=0]="enumFloat",e[e.enumDouble=1]="enumDouble",e[e.enumInt32=2]="enumInt32",e[e.enumInt64=3]="enumInt64",e[e.enumInt8=4]="enumInt8",e[e.enumInt16=5]="enumInt16"}(e.QL||(e.QL={})),function(e){e[e.POSITION=0]="POSITION",e[e.Z=1]="Z",e[e.M=2]="M",e[e.ID=3]="ID",e[e.NORMAL=4]="NORMAL",e[e.TEXTURE1D=5]="TEXTURE1D",e[e.TEXTURE2D=6]="TEXTURE2D",e[e.TEXTURE3D=7]="TEXTURE3D",e[e.ID2=8]="ID2",e[e.MAXSEMANTICS=10]="MAXSEMANTICS"}(e.Ih||(e.Ih={}));var i=function(){function t(e,i){if(this.Vs=this.Ae=null,this.Oq=this.Aa=0,this.uh=this.bg=null,this.wl=0,void 0!==i){for(this.Aa=i.Aa,this.Oq=i.Oq,this.bg=i.bg.slice(0),this.uh=i.uh.slice(0),this.wl=i.wl,this.Vs=[],e=i=0;e<this.Aa;e++)this.Vs[e]=i,i+=t.Va(this.bg[e]);for(this.Oq=i,this.Ae=[],e=0;e<this.Aa;e++){i=t.Va(this.kd(e));for(var r=t.se(this.kd(e)),n=0;n<i;n++)this.Ae[this.Vs[e]+n]=r}}else this.Oq=this.Aa=0}return t.prototype.kd=function(t){if(0>t||t>this.Aa)throw e.i.N();return this.bg[t]},t.prototype.Pf=function(e){return this.uh[e]},t.lz=function(e){return t.JM[e]},t.Tp=function(e){return t.SM[e]},t.Va=function(e){return t.rM[e]},t.prototype.hasAttribute=function(e){return 0<=this.uh[e]},t.prototype.iG=function(){return this.hasAttribute(1)},t.se=function(e){return t.eD[e]},t.prototype.LR=function(e){return this.Vs[e]},t.DG=function(e,i){return t.eD[e]===i},t.prototype.Nb=function(e){return this===e},t.prototype.An=function(){for(var t=e.O.Th(this.bg[0]),i=1;i<this.Aa;i++)t=e.O.Th(this.bg[i],t);return t},t.prototype.$j=function(e){return this.Vs[e]},t.prototype.cc=function(){return this.wl},t.prototype.Ed=function(e){return this.bg[e]},t.eD=[0,0,NaN,0,0,0,0,0,0],t.JM=[1,1,1,0,2,1,1,1,0],t.SM=[1,1,1,2,0,0,0,0,2],t.rM=[2,1,1,1,3,1,2,3,2],t}();e.ra=i}(Y||(Y={})),function(e){function t(e,t,r){var s=t-(e=new a(e)).e,o=e.c;for(o.length>++t&&i(e,s,a.eu),o[0]?r?s=t:(o=e.c,s=e.e+s+1):++s;o.length<s;o.push(0));return s=e.e,1===r||r&&(t<=s||s<=n)?(0>e.Bd&&o[0]?"-":"")+(1<o.length?o[0]+"."+o.join("").slice(1):o[0])+(0>s?"e":"e+")+s:e.toString()}function i(e,t,i,n){var s=e.c,o=e.e+t+1;if(1===i?n=5<=s[o]:2===i?n=5<s[o]||5==s[o]&&(n||0>o||void 0!==s[o+1]||1&s[o-1]):3===i?n=n||void 0!==s[o]||0>o:(n=!1,0!==i&&r("!Big.RM!")),1>o||!s[0])n?(e.e=-t,e.c=[1]):e.c=[e.e=0];else{if(s.length=o--,n)for(;9<++s[o];)s[o]=0,o--||(++e.e,s.unshift(1));for(o=s.length;!s[--o];s.pop());}return e}function r(e){throw(e=Error(e)).name="BigError",e}var n=-7,s=21,o=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,a=function(){function e(t){if(t instanceof e)this.Bd=t.Bd,this.e=t.e,this.c=t.c.slice();else{var i,n,s;for(0===t&&0>1/t?t="-0":o.test(t+="")||r(NaN),this.Bd="-"==t.charAt(0)?(t=t.slice(1),-1):1,-1<(i=t.indexOf("."))&&(t=t.replace(".","")),0<(n=t.search(/e/i))?(0>i&&(i=n),i+=+t.slice(n+1),t=t.substring(0,n)):0>i&&(i=t.length),n=0;"0"==t.charAt(n);n++);if(n==(s=t.length))this.c=[this.e=0];else{for(;"0"==t.charAt(--s););for(this.e=i-n-1,this.c=[],i=0;n<=s;this.c[i++]=+t.charAt(n++));}}}return e.prototype.abs=function(){var t=new e(this);return t.Bd=1,t},e.prototype.cmp=function(t){var i=this.c,r=(t=new e(t)).c,n=this.Bd,s=t.Bd,o=this.e,a=t.e;if(!i[0]||!r[0])return i[0]?n:r[0]?-s:0;if(n!=s)return n;if(t=0>n,o!=a)return o>(a^t)?1:-1;for(n=-1,s=(o=i.length)<(a=r.length)?o:a;++n<s;)if(i[n]!=r[n])return i[n]>(r[n]^t)?1:-1;return o==a?0:o>(a^t)?1:-1},e.prototype.jm=function(t){var n=this.c,s=(t=new e(t)).c,o=this.Bd==t.Bd?1:-1,a=e.rr;if((a!==~~a||0>a||1e6<a)&&r("!Big.DP!"),!n[0]||!s[0])return n[0]==s[0]&&r(NaN),s[0]||r(o/0),new e(0*o);var l,c,h=s.slice(),u=l=s.length,p=n.length,d=n.slice(0,l),f=d.length,y=t,m=y.c=[],g=0,v=a+(y.e=this.e-t.e)+1;for(y.Bd=o,o=0>v?0:v,h.unshift(0);f++<l;d.push(0));do{for(c=0;10>c;c++){if(l!=(f=d.length))var _=l>f?1:-1;else{var b=-1;for(_=0;++b<l;)if(s[b]!=d[b]){_=s[b]>d[b]?1:-1;break}}if(!(0>_))break;for(t=f==l?s:h;f;){if(d[--f]<t[f]){for(b=f;b&&!d[--b];d[b]=9);--d[b],d[f]+=10}d[f]-=t[f]}for(;!d[0];d.shift());}m[g++]=_?c:++c,d[0]&&_?d[f]=n[u]||0:d=[n[u]]}while((u++<p||void 0!==d[0])&&o--);return m[0]||1==g||(m.shift(),y.e--),g>v&&i(y,a,e.eu,void 0!==d[0]),y},e.prototype.fS=function(){return 0<this.cmp(0)},e.prototype.nT=function(){return 0>this.cmp(0)},e.prototype.jt=function(t){var i,r=this.Bd,n=(t=new e(t)).Bd;if(r!=n)return t.Bd=-n,this.tI(t);var s=this.c.slice(),o=this.e,a=t.c,l=t.e;if(!s[0]||!a[0])return a[0]?(t.Bd=-n,t):new e(s[0]?this:0);if(r=o-l){for((i=0>r)?(r=-r,o=s):(l=o,o=a),o.reverse(),n=r;n--;o.push(0));o.reverse()}else for(o=((i=s.length<a.length)?s:a).length,r=n=0;n<o;n++)if(s[n]!=a[n]){i=s[n]<a[n];break}if(i&&(o=s,s=a,a=o,t.Bd=-t.Bd),0<(n=(o=a.length)-(i=s.length)))for(;n--;s[i++]=0);for(n=i;o>r;){if(s[--o]<a[o]){for(i=o;i&&!s[--i];s[i]=9);--s[i],s[o]+=10}s[o]-=a[o]}for(;0==s[--n];s.pop());for(;0==s[0];)s.shift(),--l;return s[0]||(t.Bd=1,s=[l=0]),t.c=s,t.e=l,t},e.prototype.tI=function(t){var i=this.Bd,r=(t=new e(t)).Bd;if(i!=r)return t.Bd=-r,this.jt(t);r=this.e;var n=this.c,s=t.e,o=t.c;if(!n[0]||!o[0])return o[0]?t:new e(n[0]?this:0*i);if(n=n.slice(),i=r-s){for(0<i?(s=r,r=o):(i=-i,r=n),r.reverse();i--;r.push(0));r.reverse()}for(0>n.length-o.length&&(r=o,o=n,n=r),i=o.length,r=0;i;)r=(n[--i]=n[i]+o[i]+r)/10|0,n[i]%=10;for(r&&(n.unshift(r),++s),i=n.length;0==n[--i];n.pop());return t.c=n,t.e=s,t},e.prototype.pow=function(t){var i=this,n=new e(1),s=n,o=0>t;for((t!==~~t||-1e6>t||1e6<t)&&r("!pow!"),t=o?-t:t;1&t&&(s=s.lr(i)),t>>=1;)i=i.lr(i);return o?n.jm(s):s},e.prototype.round=function(t,n){var s=this;return null==t?t=0:(t!==~~t||0>t||1e6<t)&&r("!round!"),i(s=new e(s),t,n??e.eu),s},e.prototype.sqrt=function(){var t=this.c,n=this.Bd,s=this.e,o=new e("0.5");if(!t[0])return new e(this);0>n&&r(NaN),0==(n=Math.sqrt(this.toString()))||n==1/0?((n=t.join("")).length+s&1||(n+="0"),(t=new e(Math.sqrt(n).toString())).e=((s+1)/2|0)-(0>s||1&s)):t=new e(n.toString()),n=t.e+(e.rr+=4);do{s=t,t=o.lr(s.tI(this.jm(s)))}while(s.c.slice(0,n).join("")!==t.c.slice(0,n).join(""));return i(t,e.rr-=4,e.eu),t},e.prototype.lr=function(t){var i=this.c,r=(t=new e(t)).c,n=i.length,s=r.length,o=this.e,a=t.e;if(t.Bd=this.Bd==t.Bd?1:-1,!i[0]||!r[0])return new e(0*t.Bd);if(t.e=o+a,n<s){var l=i;i=r,r=l,a=n,n=s,s=a}for(l=Array(a=n+s);a--;l[a]=0);for(o=s;o--;){for(s=0,a=n+o;a>o;)s=l[a]+r[o]*i[a-o-1]+s,l[a--]=s%10,s=s/10|0;l[a]=(l[a]+s)%10}for(s&&++t.e,l[0]||l.shift(),o=l.length;!l[--o];l.pop());return t.c=l,t},e.prototype.toString=function(){var e=this.e,t=this.c.join(""),i=t.length;if(e<=n||e>=s)t=t.charAt(0)+(1<i?"."+t.slice(1):"")+(0>e?"e":"e+")+e;else if(0>e){for(;++e;t="0"+t);t="0."+t}else if(0<e)if(++e>i)for(e-=i;e--;t+="0");else e<i&&(t=t.slice(0,e)+"."+t.slice(e));else 1<i&&(t=t.charAt(0)+"."+t.slice(1));return 0>this.Bd&&this.c[0]?"-"+t:t},e.prototype.toExponential=function(e){return null==e?e=this.c.length-1:(e!==~~e||0>e||1e6<e)&&r("!toExp!"),t(this,e,1)},e.prototype.toFixed=function(e){var i=n,o=s;if(n=-(s=1/0),null==e)var a=this.toString();else e===~~e&&0<=e&&1e6>=e&&(a=t(this,this.e+e),0>this.Bd&&this.c[0]&&0>a.indexOf("-")&&(a="-"+a));return n=i,s=o,a||r("!toFix!"),a},e.prototype.toPrecision=function(e){return null==e?this.toString():((e!==~~e||1>e||1e6<e)&&r("!toPre!"),t(this,e-1,2))},e.rr=20,e.eu=1,e}();e.hp=a}(Y||(Y={})),function(e){var t=function(){function t(e){this.lf=e}return t.prototype.nr=function(t,i,r){var n=new e.h,s=new e.h,o=this.lf;r.Vd(t,i,(function(e,t){return o.tc(2*e,n),o.tc(2*t,s),n.compare(s)}))},t.prototype.$p=function(e){return this.lf.read(2*e+1)},t}();e.pi=function(){function i(){}return i.aq=function(t){if(t.B())return!1;var r=t.getType();return 1736==r?0!=t.Ke():1607==r?(r=[!1],i.sE(t,!0,r),r[0]):!(197!=r&&(!e.aa.yd(r)||t.BG()))},i.gm=function(t){var r=t.getType();if(1736==r)return r=new e.Ta(t.description),t.B()||t.dD(r),r;if(1607==r)return i.sE(t,!1,null);if(197==r)return r=new e.Ta(t.description),t.B()||r.ad(t,!1),r;if(e.aa.yd(r)){if(r=new e.de(t.description),!t.B()&&!t.BG()){var n=new e.Sa;t.To(n),r.add(n),t.Po(n),r.add(n)}return r}if(e.aa.Rn(r))return null;throw e.i.N()},i.sE=function(i,r,n){null!=n&&(n[0]=!1);var s=null;if(r||(s=new e.de(i.description)),!i.B()){var o=new e.ia(0);o.Jb(2*i.da());for(var a=0,l=i.da();a<l;a++)if(0<i.Ja(a)&&!i.Nn(a)){var c=i.Ba(a);o.add(c),c=i.Vc(a)-1,o.add(c)}if(0<o.size){l=new e.Xt,a=i.ub(0),l.sort(o,0,o.size,new t(a)),l=new e.h,a.tc(2*o.get(0),l),c=0;for(var h=1,u=new e.Sa,p=new e.h,d=1,f=o.size;d<f;d++)if(a.tc(2*o.get(d),p),p.qb(l))o.get(c)>o.get(d)?(o.set(c,2147483647),c=d):o.set(d,2147483647),h++;else{if(1&h){if(r)return null!=n&&(n[0]=!0),null}else o.set(c,2147483647);l.L(p),c=d,h=1}if(1&h){if(r)return null!=n&&(n[0]=!0),null}else o.set(c,2147483647);if(!r)for(o.Vd(0,o.size,(function(e,t){return e-t})),d=0,f=o.size;d<f&&2147483647!=o.get(d);d++)i.ve(o.get(d),u),s.add(u)}}return r?null:s},i}()}(Y||(Y={})),function(e){var t=function(){function t(){this.yf=new e.ia(0),this.ys=new e.ia(0),this.EH=1,this.Es=NaN}return t.prototype.sort=function(e,t,i,r){if(32>i-t)r.nr(t,i,e);else{var n=!0;try{for(var s=1/0,o=-1/0,a=t;a<i;a++){var l=r.$p(e.get(a));l<s&&(s=l),l>o&&(o=l)}if(this.reset(i-t,s,o,i-t)){for(a=t;a<i;a++){var c=e.get(a);l=r.$p(c);var h=this.zF(l);this.yf.set(h,this.yf.get(h)+1),this.ys.write(a-t,c)}var u=this.yf.get(0);this.yf.set(0,0),a=1;for(var p=this.yf.size;a<p;a++){var d=this.yf.get(a);this.yf.set(a,u),u+=d}for(a=t;a<i;a++){c=this.ys.read(a-t),l=r.$p(c),h=this.zF(l);var f=this.yf.get(h);e.set(f+t,c),this.yf.set(h,f+1)}n=!1}}catch(e){this.yf.resize(0),this.ys.resize(0)}if(n)r.nr(t,i,e);else{for(a=i=0,p=this.yf.size;a<p;a++)n=i,(i=this.yf.get(a))>n&&r.nr(t+n,t+i,e);100<this.yf.size&&(this.yf.resize(0),this.ys.resize(0))}}},t.prototype.reset=function(e,i,r,n){return!(2>e||r==i||(e=Math.min(t.hL,e),this.yf.Jb(e),this.yf.resize(e),this.yf.Wj(0,0,this.yf.size),this.EH=i,this.ys.resize(n),this.Es=(r-i)/(e-1),0))},t.prototype.zF=function(t){return e.O.truncate((t-this.EH)/this.Es)},t.hL=65536,t}();e.Xt=t}(Y||(Y={})),function(e){var t,i;(i=t||(t={}))[i.enum_line=1]="enum_line",i[i.enum_arc=2]="enum_arc",i[i.enum_dummy=4]="enum_dummy",i[i.enum_concave_dip=8]="enum_concave_dip",i[i.enum_connection=3]="enum_connection";var r=function(){function t(){}return t.Qu=function(i,r,n,s,o,a){var l=new t;return l.Im=new e.h,l.Vm=new e.h,l.aw=new e.h,l.Im.L(i),l.Vm.L(r),l.aw.L(n),l.Co=s,l.qh=o,l.sh=a,l},t.construct=function(i,r,n,s){var o=new t;return o.Im=new e.h,o.Vm=new e.h,o.aw=new e.h,o.Im.L(i),o.Vm.L(r),o.aw.Rc(),o.Co=4,o.qh=n,o.sh=s,o},t}(),n=function(){function t(e,t,i,r,n,s){this.Yv=null,this.ya=0,this.EA=e,this.bI=this.$H=0,this.Ka=t,this.Mj=i,this.vk=r,this.Dq=n,this.Ub=s}return t.prototype.next=function(){for(var t=new e.Sa;;){if(this.ya==this.EA.I())return null;if(this.EA.ve(this.ya,t),this.ya++,!t.B())break}var i=!1;if(null==this.Yv&&(this.$H=t.Lg(),this.bI=t.ih(),this.Yv=a.buffer(t,this.Ka,this.Mj,this.vk,this.Dq,this.Ub),i=!0),this.ya<this.EA.I()){var r=new e.Da;this.Yv.copyTo(r)}else r=this.Yv;if(!i){i=new e.Dd;var n=t.Lg()-this.$H;t=t.ih()-this.bI,i.gg(n,t),r.Oc(i)}return r},t.prototype.La=function(){return 0},t.prototype.qe=function(){},t}(),s=function(){function t(e,t){this.Wa=e,this.ya=0,this.oq=t}return t.prototype.next=function(){var t=this.Wa.X;if(this.ya<t.da()){var i=this.ya;if(this.ya++,!t.Nn(i))for(var r=t.Na(t.Vc(i)-1);this.ya<t.da();){var n=t.Na(t.Ba(this.ya));if(t.Nn(this.ya))break;if(n!=r)break;r=t.Na(t.Vc(this.ya)-1),this.ya++}if(1==this.ya-i)return this.Wa.kE(this.Wa.X,i,this.oq);for((r=new e.Ta(this.Wa.X.description)).addPath(this.Wa.X,i,!0),i+=1;i<this.ya;i++)r.Dr(this.Wa.X,i,0,t.rv(i),!1);return this.Wa.kE(r,0,this.oq)}return null},t.prototype.La=function(){return 0},t.prototype.qe=function(){},t}(),o=function(){function e(e){this.Wa=e,this.ya=0}return e.prototype.next=function(){var e=this.Wa.X;if(this.ya<e.da()){var t=this.ya;for(e.Ir(this.ya),this.ya++;this.ya<e.da()&&!(0<e.Ir(this.ya));)this.ya++;return 0==t&&this.ya==e.da()?this.Wa.py(e,0,e.da()):this.Wa.py(e,t,this.ya)}return null},e.prototype.La=function(){return 0},e.prototype.qe=function(){},e}(),a=function(){function t(e){this.Ks=this.lw=this.Ls=this.Id=null,this.Zd=[],this.Ub=e,this.rb=this.Kv=this.JT=this.Ka=this.tA=this.ct=this.qa=0,this.oA=this.vk=-1,this.oq=!0}return t.buffer=function(i,r,n,s,o,a){if(null==i)throw e.i.N();if(0>s)throw e.i.N();if(i.B())return new e.Da(i.description);var l=new e.l;return i.xc(l),0<r&&l.W(r,r),(a=new t(a)).Mj=n,a.X=i,a.qa=e.ta.Wd(n,l,!0),a.ct=e.ta.Wd(null,l,!0),a.Ka=r,a.JT=i.getType(),0>=o&&(o=96),a.rb=Math.abs(a.Ka),a.Kv=0!=a.rb?1/a.rb:0,isNaN(s)||0==s?s=1e-5*a.rb:s>.5*a.rb&&(s=.5*a.rb),12>o&&(o=12),(i=Math.abs(r)*(1-Math.cos(Math.PI/o)))>s?s=i:(i=Math.PI/Math.acos(1-s/Math.abs(r)))<o-1&&12>(o=e.O.truncate(i))&&(o=12,s=Math.abs(r)*(1-Math.cos(Math.PI/o))),a.vk=s,a.Dq=o,a.tA=Math.min(a.ct,.25*s),a.lE()},t.prototype.cv=function(){if(null==this.Id)this.Id=[];else if(0!==this.Id.length)return;var t=this.qE();t=e.O.truncate((t+3)/4);var i=.5*Math.PI/t;this.oA=i;for(var r=0;r<4*t;r++)this.Id.push(null);var n=Math.cos(i);i=Math.sin(i);var s=e.h.construct(0,1);for(r=0;r<t;r++)this.Id[r+0*t]=e.h.construct(s.y,-s.x),this.Id[r+1*t]=e.h.construct(-s.x,-s.y),this.Id[r+2*t]=e.h.construct(-s.y,s.x),this.Id[r+3*t]=s,(s=e.h.construct(s.x,s.y)).Bt(n,i)},t.prototype.lE=function(){var t=this.X.getType();if(e.aa.yd(t))return(t=new e.Ta(this.X.description)).oc(this.X,!0),this.X=t,this.lE();if(this.Ka<=this.qa){if(!e.aa.US(t))return new e.Da(this.X.description);if(0>=this.Ka&&(t=new e.l,this.X.A(t),t.R()<=2*-this.Ka||t.ca()<=2*this.Ka))return new e.Da(this.X.description)}switch(this.X.getType()){case 33:return this.PN();case 550:return this.ON();case 1607:return this.RN();case 1736:return this.QN();case 197:return this.LN();default:throw e.i.Qa()}},t.prototype.RN=function(){if(this.EG(this.X)){var t=new e.Sa;this.X.ve(0,t);var i=new e.l;return this.X.A(i),t.Cb(i.sf()),this.Gu(t)}return this.X=this.WV(this.X),t=new s(this,this.oq),e.Gh.local().V(t,this.Mj,this.Ub).next()},t.prototype.QN=function(){if(0==this.Ka)return this.X;var t=e.Yl.local();if(this.cv(),this.X=t.V(this.X,null,!1,this.Ub),0>this.Ka){var i=this.X;return i=this.py(i,0,i.da()),t.V(i,this.Mj,!1,this.Ub)}return this.EG(this.X)?(t=new e.Sa,this.X.ve(0,t),i=new e.l,this.X.A(i),t.Cb(i.sf()),this.Gu(t)):(t=new o(this),e.Gh.local().V(t,this.Mj,this.Ub).next())},t.prototype.py=function(i,r,n){for(var s=new e.Da(i.description);r<n;r++)if(!(1>i.Ja(r))){var o=i.Ir(r),a=new e.l;if(i.Rj(r,a),0<this.Ka){if(0<o)if(this.FG(i,r))o=new e.Sa,i.ve(i.Ba(r),o),o.Cb(a.sf()),this.yu(s,o);else{var l=o=new e.Ta(i.description);l=e.Zt.JG(this.X,r)||2==this.zn(this.X,r,l,!0,1)?this.jE(i,r):this.yn(o),s.add(l,!1)}else if(!(a.R()+this.qa<=2*this.rb||a.ca()+this.qa<=2*this.rb||(l=o=new e.Ta(i.description),this.zn(this.X,r,l,!0,1),o.B()))){var c=new e.l;for(c.K(a),c.W(this.rb,this.rb),l.tp(c),a=1,o=(l=this.yn(o)).da();a<o;a++)s.addPath(l,a,!0)}}else if(0<o){if(!(a.R()+this.qa<=2*this.rb||a.ca()+this.qa<=2*this.rb||(l=o=new e.Ta(i.description),this.zn(this.X,r,l,!0,-1),o.B())))for(c=new e.l,l.xc(c),c.W(this.rb,this.rb),l.tp(c),a=1,o=(l=this.yn(o)).da();a<o;a++)s.addPath(l,a,!0)}else for(l=o=new e.Ta(i.description),this.zn(this.X,r,l,!0,-1),a=0,o=(l=this.yn(o)).da();a<o;a++)s.addPath(l,a,!0)}if(0<this.Ka)return 1<s.da()?s=this.yn(s):t.kx(s);if(i=new e.l,s.xc(i),s.B())return t.kx(s);for(i.W(this.rb,this.rb),s.tp(i),s=this.yn(s),i=new e.Da(s.description),a=1,o=s.da();a<o;a++)i.addPath(s,a,!1);return t.kx(i)},t.prototype.PN=function(){return this.Gu(this.X)},t.prototype.Gu=function(t){var i=new e.Da(this.X.description);return this.yu(i,t),this.sX(i)},t.prototype.ON=function(){var t=new n(this.X,this.Ka,this.Mj,this.vk,this.Dq,this.Ub);return e.Gh.local().V(t,this.Mj,this.Ub).next()},t.prototype.LN=function(){var t=new e.Da(this.X.description);if(0>=this.Ka){if(0==this.Ka)t.ad(this.X,!1);else{var i=new e.Fh;this.X.bn(i),i.W(this.Ka,this.Ka),t.ad(i,!1)}return t}return t.ad(this.X,!1),this.X=t,this.jE(t,0)},t.prototype.jE=function(i,r){this.cv();var n=new e.Da(i.description),s=new e.h,o=new e.h,a=new e.h,l=new e.h,c=new e.h,h=new e.h,u=new e.h,p=new e.h,d=i.Ja(r),f=i.Ba(r),y=0;for(r=i.Ja(r);y<r;y++){if(i.D(f+y,o),i.D(f+(y+1)%d,l),i.D(f+(y+2)%d,h),u.uc(l,o),0==u.length())throw e.i.Qa();if(u.Hv(),u.normalize(),u.scale(this.rb),s.add(u,o),a.add(u,l),0==y?n.Lt(s):n.Ci(s),n.Ci(a),p.uc(h,l),0==p.length())throw e.i.Qa();p.Hv(),p.normalize(),p.scale(this.rb),c.add(p,l),this.GD(n,l,a,c,!1)}return t.kx(n)},t.prototype.kE=function(t,i,r){if(this.cv(),1>t.Ja(i))return null;if(this.FG(t,i)&&0<this.Ka){r=new e.Sa,t.ve(t.Ba(i),r);var n=new e.l;return t.Rj(i,n),r.Cb(n.sf()),this.Gu(r)}if(n=new e.Ta(t.description),t.Nn(i))this.zn(t,i,n,r,1),this.zn(t,i,n,r,-1);else{var s=new e.Ta(t.description);s.addPath(t,i,!1),s.Dr(t,i,0,t.rv(i),!1),this.zn(s,0,n,r,1)}return this.yn(n)},t.prototype.Xq=function(){if(this.Ys++,0==this.Ys%1024&&null!=this.Ub&&!this.Ub.progress(-1,-1))throw e.i.fu("user_canceled")},t.prototype.yn=function(t){return e.Fg.Mk(t,this.ct,!0,!0,this.Ub)},t.prototype.qE=function(){if(0==this.vk)return this.Dq;var t=1-this.vk*Math.abs(this.Kv);return 4>(t=-1>t?4:2*Math.PI/Math.acos(t)+.5)?t=4:t>this.Dq&&(t=this.Dq),e.O.truncate(t)},t.prototype.GD=function(t,i,r,n,s){this.cv();var o=new e.h;o.uc(r,i),o.scale(this.Kv);var a=new e.h;a.uc(n,i),a.scale(this.Kv),0>(o=Math.atan2(o.y,o.x)/this.oA)&&(o=this.Id.length+o),o=this.Id.length-o,0>(a=Math.atan2(a.y,a.x)/this.oA)&&(a=this.Id.length+a),(a=this.Id.length-a)<o&&(a+=this.Id.length);var l=e.O.truncate(a);a=e.O.truncate(Math.ceil(o)),(o=new e.h).L(this.Id[a%this.Id.length]),o.Ct(this.rb,i);var c=10*this.qa;for(o.sub(r),o.length()<c&&(a+=1),o.L(this.Id[l%this.Id.length]),o.Ct(this.rb,i),o.sub(n),o.length()<c&&--l,r=l-a,r++,l=0,a%=this.Id.length;l<r;l++,a=(a+1)%this.Id.length)o.L(this.Id[a]),o.Ct(this.rb,i),t.Ci(o),this.Xq();s&&t.Ci(n)},t.prototype.zn=function(t,i,n,s,o){var a=new e.gd,l=a.mN(t,i);if(a.Gp(this.tA,!1,!1),2>a.I(l))return 0>o||(o=t,a=new e.Sa,o.ve(o.Ba(i),a),this.yu(n,a)),1;var c=a.Na(a.Xa(a.Ob(l))),h=new e.Dd;if(h.gg(-c.x,-c.y),a.Oc(h),s&&(this.tQ(a,l,o),2>a.I(l)))return 0>o||(o=t,a=new e.Sa,o.ve(o.Ba(i),a),this.yu(n,a)),1;this.Zd.length=0;var u=a.Ob(l);i=a.Xa(u);var p=1==o?a.Ma(i):a.U(i);t=1==o?a.U(i):a.Ma(i);var d=!0;s=new e.h,l=new e.h;var f=new e.h,y=new e.h,m=new e.h,g=new e.h,v=new e.h,_=new e.h,b=new e.h,w=new e.h,M=this.rb;u=a.Ja(u);for(var T=0;T<u;T++)a.D(t,l),d&&(a.D(i,s),a.D(p,f),_.uc(s,f),_.normalize(),w.MG(_),w.scale(M),y.add(w,s)),v.uc(l,s),v.normalize(),b.MG(v),b.scale(M),m.add(s,b),p=_.wi(v),d=_.Qh(v),0>p||0>d&&0==p?this.Zd.push(r.Qu(y,m,s,2,this.Zd.length+1,this.Zd.length-1)):y.qb(m)||(this.Zd.push(r.construct(y,s,this.Zd.length+1,this.Zd.length-1,"dummy")),this.Zd.push(r.construct(s,m,this.Zd.length+1,this.Zd.length-1,"dummy"))),g.add(l,b),this.Zd.push(r.Qu(m,g,s,1,this.Zd.length+1,this.Zd.length-1)),y.L(g),w.L(b),f.L(s),s.L(l),_.L(v),p=i,i=t,d=!1,t=1==o?a.U(i):a.Ma(i);return this.Zd[this.Zd.length-1].qh=0,this.Zd[0].sh=this.Zd.length-1,this.YV(n),h.gg(c.x,c.y),n.YD(h,n.da()-1),1},t.prototype.YV=function(e){for(var t=this.zO(),i=!0,r=t+1,n=t;r!=t;n=r){var s=this.Zd[n];r=-1!=s.qh?s.qh:(n+1)%this.Zd.length,0!=s.Co&&(i&&e.Lt(s.Im),2==s.Co?this.GD(e,s.aw,s.Im,s.Vm,!0):e.Ci(s.Vm),i=!1)}},t.prototype.zO=function(){null==this.Ks&&(this.Ks=[null,null,null,null,null,null,null,null,null]);for(var t=0,i=0,r=this.Zd.length;i<r;){var n=this.Zd[i];if(3&n.Co){t=i;break}i=n.qh}for(r=t+1,i=t;r!=t;i=r){r=(n=this.Zd[i]).qh;for(var s=1,o=null;r!=i&&!(3&(o=this.Zd[r]).Co);)r=o.qh,s++;1!=s&&1==(n.Co&o.Co)&&(null==this.Ls&&(this.Ls=new e.yb,this.lw=new e.yb),this.Ls.Dc(n.Im),this.Ls.Qc(n.Vm),this.lw.Dc(o.Im),this.lw.Qc(o.Vm),1==this.Ls.Ea(this.lw,this.Ks,null,null,this.ct)&&(n.Vm.L(this.Ks[0]),o.Im.L(this.Ks[0]),n.qh=r,o.sh=i))}return t},t.prototype.Fv=function(t,i,r){var n=new e.h;if(n.uc(r,t),r=n.length(),0<(r=this.rb*this.rb-r*r*.25)){r=Math.sqrt(r),n.normalize(),n.ar();var s=new e.h;if(s.uc(i,t),s.Qh(n)+r>=this.rb)return!0}return!1},t.prototype.tQ=function(t,i,r){for(var n=0;1>n;n++){var s=!1,o=t.Ob(i),a=t.Ja(o);if(0==a)break;var l=a;if(3>a)break;!t.dc(o)&&(l=a-1),o=t.Xa(o),a=0<r?t.Ma(o):t.U(o);for(var c=0<r?t.U(o):t.Ma(o),h=a,u=!0,p=new e.h,d=new e.h,f=new e.h,y=new e.h,m=new e.h,g=e.h.construct(0,0),v=new e.h,_=new e.h,b=new e.h,w=new e.h,M=this.rb,T=0,S=0;S<l&&(t.D(c,d),u&&(t.D(o,p),t.D(a,f),h=a),_.uc(p,f),_.normalize(),v.uc(d,p),v.normalize(),h!=c);){var A=_.wi(v),E=_.Qh(v),x=!0;if(0>A||0>E&&0==A||!this.Fv(f,p,d)||(g.L(d),x=!1,++T,s=!0),x){if(0<T)for(;(A=0<r?t.Ma(h):t.U(h))!=o;){if(t.D(A,y),!this.Fv(y,f,g)){A!=c&&this.Fv(y,f,d)&&this.Fv(y,p,d)&&(f.L(y),h=A,x=!1,++T);break}f.L(y),h=A,x=!1,++T}if(!x)continue;if(0<T){for(h=0<r?t.Ma(a):t.U(a),u=1;u<T;u++)x=0<r?t.Ma(h):t.U(h),t.pd(h,!0),h=x;b.uc(p,f),T=M*M-(T=b.length())*T*.25,M-(T=Math.sqrt(T))>.5*this.vk?(m.add(f,p),m.scale(.5),b.normalize(),b.ar(),w.L(b),w.scale(M-T),m.add(w),t.mf(a,m)):t.pd(a,!0),T=0}f.L(p),h=o}p.L(d),a=o,o=c,c=0<r?t.U(o):t.Ma(o),S++,u=!1}if(0<T){for(h=0<r?t.Ma(a):t.U(a),u=1;u<T;u++)x=0<r?t.Ma(h):t.U(h),t.pd(h,!0),h=x;m.add(f,p),m.scale(.5),b.uc(p,f),T=M*M-(T=b.length())*T*.25,T=Math.sqrt(T),b.normalize(),b.ar(),w.L(b),w.scale(M-T),m.add(w),t.mf(a,m)}if(t.Gp(this.tA,!1,!1),!s)break}},t.prototype.FG=function(t,i){if(1==t.Ja(i))return!0;var r=new e.l;return t.Rj(i,r),Math.max(r.R(),r.ca())<.5*this.vk},t.prototype.EG=function(t){var i=new e.l;return t.A(i),Math.max(i.R(),i.ca())<.5*this.vk},t.prototype.WV=function(t){for(var i=0,r=0,n=(t=e.EC.local().V(t,.25*this.vk,!1,this.Ub)).da();r<n;r++)i=Math.max(t.Ja(r),i);return 32>i?(this.oq=!1,t):(this.oq=!0,e.Fg.Mk(t,this.ct,!1,!0,this.Ub))},t.prototype.yu=function(t,i){if(i=i.D(),null!=this.Id&&0!==this.Id.length){var r=new e.h;r.L(this.Id[0]),r.Ct(this.rb,i),t.Lt(r);for(var n=1,s=this.Id.length;n<s;n++)r.L(this.Id[n]),r.Ct(this.rb,i),t.Ci(r)}else{n=this.qE(),r=e.O.truncate((n+3)/4),n=.5*Math.PI/r,s=Math.cos(n);for(var o=Math.sin(n),a=new e.h,l=3;0<=l;l--){switch(a.ma(0,this.rb),l){case 0:for(n=0;n<r;n++)t.yj(a.x+i.x,a.y+i.y),a.Bt(s,o);break;case 1:for(n=0;n<r;n++)t.yj(-a.y+i.x,a.x+i.y),a.Bt(s,o);break;case 2:for(n=0;n<r;n++)t.yj(-a.x+i.x,-a.y+i.y),a.Bt(s,o);break;default:for(t.sx(a.y+i.x,-a.x+i.y),n=1;n<r;n++)a.Bt(s,o),t.yj(a.y+i.x,-a.x+i.y)}this.Xq()}}},t.kx=function(e){return e.Ch(1,0),e},t.prototype.sX=function(e){return e.Ch(2,this.qa),e.fm(),e},t}();e.HK=a}(Y||(Y={})),function(e){var t=function(){function t(t){this.Ca=t,this.g=new e.gd,this.dd=new e.ia(0)}return t.prototype.Lh=function(e,t,i){switch(t){case 0:if(e.v<i&&e.C<=i)break;return e.v>=i?1:-1;case 1:if(e.G<i&&e.H<=i)break;return e.G>=i?1:-1;case 2:if(e.v>=i&&e.C>i)break;return e.C<=i?1:-1;case 3:if(!(e.G>=i&&e.H>i))return e.H<=i?1:-1}return 0},t.prototype.Ay=function(e,t){return 1736==e.getType()?this.Cy(e,t):this.Dy(e)},t.prototype.Cy=function(t,i){if(0==this.Ca.R()||0==this.Ca.ca())return t.Ia();var r=new e.l;t.xc(r),this.X=this.g.Ib(t);var n=new e.l,s=new e.l,o=new e.h,a=new e.h,l=[0,0,0,0,0,0,0,0,0],c=[0,0,0,0,0,0,0,0,0];new e.ig;var h=new e.yb,u=new e.ia(0);u.Jb(Math.min(100,t.I()));for(var p=!1,d=0;!p&&4>d;d++){var f=!1,y=!!(1&d),m=0;switch(d){case 0:m=this.Ca.v,f=r.v<=m&&r.C>=m;break;case 1:m=this.Ca.G,f=r.G<=m&&r.H>=m;break;case 2:m=this.Ca.C,f=r.v<=m&&r.C>=m;break;case 3:m=this.Ca.H,f=r.G<=m&&r.H>=m}if(f)for(p=!0,f=this.g.Ob(this.X);-1!=f;){var g=-1,v=-1,_=this.g.Xa(f),b=_;do{var w=this.g.bc(b);null==w&&(w=h,this.g.D(b,o),w.Dc(o),this.g.D(this.g.U(b),a),w.Qc(a)),w.A(n);var M=this.Lh(n,d,m),T=0,S=-1;if(-1==M){T=0<(w=w.cq(y,m,l,c))?this.g.Ul(b,c,w):0,T+=1;var A=b,E=this.g.U(A);for(w=0;w<T;w++){if(this.g.D(A,o),this.g.D(E,a),null==(S=this.g.bc(A))&&((S=h).Dc(o),S.Qc(a)),S.A(s),-1==(S=this.Lh(s,d,m))){if(y)(S=Math.abs(o.y-m))<(x=Math.abs(a.y-m))?(o.y=m,this.g.mf(A,o)):(a.y=m,this.g.mf(E,a));else{S=Math.abs(o.x-m);var x=Math.abs(a.x-m);S<x?(o.x=m,this.g.mf(A,o)):(a.x=m,this.g.mf(E,a))}null==(S=this.g.bc(A))&&((S=h).Dc(o),S.Qc(a)),S.A(s),S=this.Lh(s,d,m)}x=g,g=S,-1==v&&(v=g),0==x&&1==g||1==x&&0==g||0!=x||0!=g||u.add(A),1==g&&(p=!1),S=A=E,E=this.g.U(E)}}0==T&&(x=g,g=M,-1==v&&(v=g),0==x&&1==g||1==x&&0==g||0!=x||0!=g||u.add(b),1==g&&(p=!1),S=this.g.U(b)),b=S}while(b!=_);for(0==v&&0==g&&u.add(_),w=0,g=u.size;w<g;w++)v=u.get(w),this.g.pd(v,!1);u.clear(!1),f=3>this.g.Ja(f)?this.g.Zq(f):this.g.Rb(f)}}return p?t.Ia():(this.FB(),0<i&&this.My(i),this.g.Ne(this.X))},t.prototype.Dy=function(t){var i=new e.l,r=new e.l,n=[0,0,0,0,0,0,0,0,0],s=[0,0,0,0,0,0,0,0,0],o=new e.ig,a=t,l=new e.l;t.xc(l);for(var c=0;4>c;c++){var h=!1,u=!!(1&c),p=0;switch(c){case 0:p=this.Ca.v,h=l.v<=p&&l.C>=p;break;case 1:p=this.Ca.G,h=l.G<=p&&l.H>=p;break;case 2:p=this.Ca.C,h=l.v<=p&&l.C>=p;break;case 3:p=this.Ca.H,h=l.G<=p&&l.H>=p}if(h){h=a,a=t.Ia(),(h=h.Ga()).Zi();for(var d,f=new e.h;h.$a();)for(var y,m=!0;h.Ha();){var g=h.ha();g.A(i);var v=this.Lh(i,c,p);if(-1==v){if(0<(v=g.cq(u,p,n,s))){var _=0;d=g.ac();for(var b=0;b<=v;b++)if(_!=(y=b<v?s[b]:1)){g.ah(_,y,o);var w=o.get();w.Dc(d),b<v&&(u?(f.x=n[b],f.y=p):(f.x=p,f.y=n[b]),w.Qc(f)),w.A(r);var M=this.Lh(r,c,p);if(-1==M){if(d=w.ac(),_=w.wc(),u)(M=Math.abs(d.y-p))<(T=Math.abs(_.y-p))?(d.y=p,w.Dc(d)):(_.y=p,w.Qc(_));else{M=Math.abs(d.x-p);var T=Math.abs(_.x-p);M<T?(d.x=p,w.Dc(d)):(_.x=p,w.Qc(_))}w.A(r),M=this.Lh(r,c,p)}d=w.wc(),_=y,1==(y=M)?(a.oc(w,m),m=!1):m=!0}}}else 1==(y=v)?(a.oc(g,m),m=!1):m=!0}}}return a},t.prototype.FB=function(){this.ji=-1,this.Vl(!1,this.Ca.v),this.Vl(!1,this.Ca.C),this.Vl(!0,this.Ca.G),this.Vl(!0,this.Ca.H),this.dd.resize(0),this.dd.Jb(100),this.ji=this.g.Gd();for(var t=new e.h,i=this.g.Ob(this.X);-1!=i;i=this.g.Rb(i))for(var r=this.g.Xa(i),n=0,s=this.g.Ja(i);n<s;n++,r=this.g.U(r))this.g.D(r,t),(this.Ca.v==t.x||this.Ca.C==t.x||this.Ca.G==t.y||this.Ca.H==t.y)&&(this.g.Ra(r,this.ji,this.dd.size),this.dd.add(r));this.Nl(!1,this.Ca.v),this.Nl(!1,this.Ca.C),this.Nl(!0,this.Ca.G),this.Nl(!0,this.Ca.H),this.Ty()},t.prototype.My=function(t){for(var i=new e.h,r=new e.h,n=e.O.lg(2048,0),s=this.g.Ob(this.X);-1!=s;s=this.g.Rb(s)){var o=this.g.Xa(s),a=o;do{var l=this.g.U(a);this.g.D(a,i);var c=-1;if(i.x==this.Ca.v?(this.g.D(l,r),r.x==this.Ca.v&&(c=1)):i.x==this.Ca.C&&(this.g.D(l,r),r.x==this.Ca.C&&(c=1)),i.y==this.Ca.G?(this.g.D(l,r),r.y==this.Ca.G&&(c=0)):i.y==this.Ca.H&&(this.g.D(l,r),r.y==this.Ca.H&&(c=0)),-1!=c&&(c=e.h.tb(i,r),!(1>=(c=e.O.truncate(Math.min(Math.ceil(c/t),2048)))))){for(var h=1;h<c;h++)n[h-1]=1*h/c;this.g.Ul(a,n,c-1)}a=l}while(a!=o)}},t.prototype.Vl=function(t,i){var r=this.g.Gd(),n=new e.h,s=new e.ia(0);s.Jb(100);for(var o=this.g.Ob(this.X);-1!=o;o=this.g.Rb(o))for(var a=this.g.Xa(o),l=0,c=this.g.Ja(o);l<c;l++){var h=this.g.U(a);this.g.D(a,n),(t?n.y==i:n.x==i)&&(this.g.D(h,n),(t?n.y==i:n.x==i)&&(1!=this.g.Pa(a,r)&&(s.add(a),this.g.Ra(a,r,1)),1!=this.g.Pa(h,r)&&(s.add(h),this.g.Ra(h,r,1)))),a=h}if(this.g.Td(r),!(3>s.size)){var u=this;s.Vd(0,s.size,(function(e,t){return u.Mh(e,t)})),r=new e.h,o=new e.h,a=new e.h,o.Rc();var p=-1;l=new e.ia(0),c=new e.ia(0),h=this.g.Gd();for(var d=this.g.Gd(),f=0,y=s.size;f<y;f++){var m=s.get(f);if(this.g.D(m,n),!n.qb(o)){if(-1!=p){for(var g=p;g<f;g++){p=s.get(g);var v=this.g.U(p);m=this.g.Ma(p);var _=!1;0>this.Mh(p,v)&&(this.g.D(v,r),t?r.y==i:r.x==i)&&(l.add(p),_=!0,this.g.Ra(p,d,1)),0>this.Mh(p,m)&&(this.g.D(m,r),t?r.y==i:r.x==i)&&(_||l.add(p),this.g.Ra(p,h,1))}for(g=0,_=l.size;g<_;g++){if(p=l.get(g),m=this.g.Pa(p,h),v=this.g.Pa(p,d),1==m){m=this.g.Ma(p),this.g.D(m,a);var b=[0];if(b[0]=0,!a.qb(n)){var w=e.h.tb(o,a);b[0]=e.h.tb(a,n)/w,0==b[0]?b[0]=2220446049250313e-31:1==b[0]&&(b[0]=.9999999999999998),this.g.Ul(m,b,1),m=this.g.Ma(p),this.g.mf(m,n),c.add(m),this.g.Ra(m,h,1),this.g.Ra(m,d,-1)}}1==v&&(v=this.g.U(p),this.g.D(v,a),(b=[0])[0]=0,a.qb(n)||(w=e.h.tb(o,a),b[0]=e.h.tb(o,n)/w,0==b[0]?b[0]=2220446049250313e-31:1==b[0]&&(b[0]=.9999999999999998),this.g.Ul(p,b,1),m=this.g.U(p),this.g.mf(m,n),c.add(m),this.g.Ra(m,h,-1),this.g.Ra(m,d,1)))}p=l,l=c,(c=p).clear(!1)}p=f,o.L(n)}}this.g.Td(h),this.g.Td(d)}},t.prototype.Nl=function(t,i){var r=new e.h,n=new e.ia(0);n.Jb(100);for(var s=this.g.Gd(),o=0,a=this.dd.size;o<a;o++){var l=this.dd.get(o);if(-1!=l){var c=this.g.U(l);this.g.D(l,r),(t?r.y==i:r.x==i)&&(this.g.D(c,r),(t?r.y==i:r.x==i)&&(-2!=this.g.Pa(l,s)&&(n.add(l),this.g.Ra(l,s,-2)),-2!=this.g.Pa(c,s)&&(n.add(c),this.g.Ra(c,s,-2))))}}if(0!=n.size){var h=this;for(n.Vd(0,n.size,(function(e,t){return h.Mh(e,t)})),o=0,a=n.size;o<a;o++){var u=n.get(o);this.g.Ra(u,s,o)}l=new e.h,(c=new e.h).Rc();var p=-1;for(o=0,a=n.size;o<a;o++)if(-1!=(u=n.get(o))&&(this.g.D(u,r),!r.qb(c))){if(-1!=p)for(;;){u=!1;for(var d=1<o-p?o-1:o,f=p;f<d;f++){var y=n.get(f);if(-1!=y){var m=-1,g=this.g.U(y);0>this.Mh(y,g)&&(this.g.D(g,l),t?l.y==i:l.x==i)&&(m=g),g=-1;var v=this.g.Ma(y);if(0>this.Mh(y,v)&&(this.g.D(v,l),t?l.y==i:l.x==i)&&(g=v),-1!=m&&-1!=g)this.Kh(y,n,s),this.g.pd(y,!1),this.Kh(m,n,s),this.g.pd(m,!1),u=!0;else if(-1!=m||-1!=g){for(v=f+1;v<o;v++){var _=n.get(v);if(-1!=_){var b=this.g.U(_),w=-1;0>this.Mh(_,b)&&(this.g.D(b,l),t?l.y==i:l.x==i)&&(w=b),b=this.g.Ma(_);var M=-1;if(0>this.Mh(_,b)&&(this.g.D(b,l),t?l.y==i:l.x==i)&&(M=b),-1!=w&&-1!=M){this.Kh(_,n,s),this.g.pd(_,!1),this.Kh(w,n,s),this.g.pd(w,!1),u=!0;break}if(-1!=m&&-1!=M){this.zt(n,y,m,_,M,s),u=!0;break}if(-1!=g&&-1!=w){this.zt(n,_,w,y,g,s),u=!0;break}}}if(u)break}}}if(!u)break}p=o,c.L(r)}}this.g.Td(s)},t.prototype.Kh=function(e,t,i){i=this.g.Pa(e,i),t.set(i,-1),i=this.g.Pa(e,this.ji),this.dd.set(i,-1),-1!=(t=this.g.bd(e))&&this.g.Xa(t)==e&&(this.g.Jf(t,-1),this.g.Wg(t,-1))},t.prototype.zt=function(e,t,i,r,n,s){this.g.Bc(t,r),this.g.Cc(r,t),this.g.Cc(i,n),this.g.Bc(n,i),this.Kh(r,e,s),this.g.mi(r,!1),this.Kh(n,e,s),this.g.mi(n,!0)},t.prototype.Ty=function(){for(var e=0,t=this.dd.size;e<t;e++){var i=this.dd.get(e);-1!=i&&this.g.aj(i,-1)}for(var r=0,n=0,s=this.g.Ob(this.X);-1!=s;){var o=this.g.Xa(s);if(-1==o||s!=this.g.bd(o)){var a=s;s=this.g.Rb(s),this.g.Jf(a,-1),this.g.$q(a)}else{i=o,a=0;do{this.g.aj(i,s),a++,i=this.g.U(i)}while(i!=o);2>=a?(i=this.g.Pa(o,this.ji),this.dd.set(i,-1),o=this.g.pd(o,!1),2==a&&(i=this.g.Pa(o,this.ji),this.dd.set(i,-1),this.g.pd(o,!1)),a=s,s=this.g.Rb(s),this.g.Jf(a,-1),this.g.$q(a)):(this.g.cp(s,!1),this.g.Wg(s,this.g.Ma(o)),this.g.Vj(s,a),n+=a,r++,s=this.g.Rb(s))}}for(e=0,t=this.dd.size;e<t;e++)if(-1!=(i=this.dd.get(e))&&-1==(s=this.g.bd(i))){s=this.g.vf(this.X,-1),a=0,o=i;do{this.g.aj(i,s),a++,i=this.g.U(i)}while(i!=o);2>=a?(i=this.g.Pa(o,this.ji),this.dd.set(i,-1),o=this.g.pd(o,!1),2==a&&(0<=(i=this.g.Pa(o,this.ji))&&this.dd.set(i,-1),this.g.pd(o,!1)),a=s,this.g.Jf(a,-1),this.g.$q(a)):(this.g.kn(s,!0),this.g.Vj(s,a),this.g.Jf(s,o),this.g.Wg(s,this.g.Ma(o)),this.g.cp(s,!1),n+=a,r++)}for(this.g.Rl(this.X,r),this.g.Tj(this.X,n),e=0,t=this.g.ld;-1!=t;t=this.g.ue(t))e+=this.g.I(t);this.g.bC(e)},t.By=function(e,i,r){return new t(i).Ay(e,r)},t.clip=function(i,r,n,s){if(i.B())return i;if(r.B())return i.Ia();if(33==(n=i.getType()))return s=i.D(),r.contains(s)?i:i.Ia();if(197==n)return s=new e.l,i.A(s),s.Ea(r)?(r=new e.Fh,i.copyTo(r),r.Xo(s),r):i.Ia();var o=new e.l;if(i.xc(o),r.contains(o))return i;if(!r.isIntersecting(o))return i.Ia();if(null!=(o=i.Bb)&&null!=(o=o.Fk)){if(1==(o=o.Ro(r))){if(1736!=n)throw e.i.Qa();return(i=new e.Da(i.description)).tp(r),i}if(0==o)return i.Ia()}switch(n){case 550:n=null,o=i.I();for(var a=i.ub(0),l=0,c=0;c<o;c++)s=new e.h,a.tc(2*c,s),r.contains(s)||(0==l&&(n=i.Ia()),l<c&&n.Fd(i,l,c),l=c+1);return 0<l&&n.Fd(i,l,o),0==l?i:n;case 1736:case 1607:return t.By(i,r,s);default:throw e.i.Qa()}},t.prototype.Mh=function(t,i){var r=new e.h;return this.g.D(t,r),t=new e.h,this.g.D(i,t),r.compare(t)},t}();e.Ud=t}(Y||(Y={})),function(e){var t=function(){function t(t,i){this.Ca=t,this.g=new e.gd,this.dd=new e.ia(0),this.nd=i}return t.prototype.Lh=function(e,t,i){switch(t){case 0:if(e.v<i&&e.C<=i)break;return e.v>=i?1:-1;case 1:if(e.G<i&&e.H<=i)break;return e.G>=i?1:-1;case 2:if(e.v>=i&&e.C>i)break;return e.C<=i?1:-1;case 3:if(!(e.G>=i&&e.H>i))return e.H<=i?1:-1}return 0},t.prototype.Ay=function(e,t){return 1736==e.getType()?this.Cy(e,t):this.Dy(e)},t.prototype.Cy=function(t,i){if(0==this.Ca.R()||0==this.Ca.ca())return t.Ia();var r=new e.l;t.xc(r),this.X=this.g.Ib(t);var n=new e.l,s=new e.l,o=new e.h,a=new e.h,l=[0,0,0,0,0,0,0,0,0],c=[0,0,0,0,0,0,0,0,0],h=new e.yb,u=new e.ia(0);u.Jb(256);for(var p=!1,d=0;!p&&4>d;d++){var f=!1,y=!!(1&d),m=0;switch(d){case 0:m=this.Ca.v,f=r.v<=m&&r.C>=m;break;case 1:m=this.Ca.G,f=r.G<=m&&r.H>=m;break;case 2:m=this.Ca.C,f=r.v<=m&&r.C>=m;break;case 3:m=this.Ca.H,f=r.G<=m&&r.H>=m}if(f)for(p=!0,f=this.g.Ob(this.X);-1!=f;){var g=!0,v=-1,_=-1,b=this.g.Xa(f),w=b;do{var M=this.g.bc(w);null==M&&(M=h,this.g.D(w,o),M.Dc(o),this.g.D(this.g.U(w),a),M.Qc(a)),M.A(n);var T=this.Lh(n,d,m),S=0,A=-1;if(-1==T){S=0<(M=M.cq(y,m,l,c))?this.g.LX(w,c,M):0,S+=1;var E=w,x=this.g.U(E);for(M=0;M<S;M++){if(this.g.D(E,o),this.g.D(x,a),null==(A=this.g.bc(E))&&((A=h).Dc(o),A.Qc(a)),A.A(s),-1==(A=this.Lh(s,d,m))){if(y)(A=Math.abs(o.y-m))<(I=Math.abs(a.y-m))?(o.y=m,this.g.mf(E,o)):(a.y=m,this.g.mf(x,a));else{A=Math.abs(o.x-m);var I=Math.abs(a.x-m);A<I?(o.x=m,this.g.mf(E,o)):(a.x=m,this.g.mf(x,a))}null==(A=this.g.bc(E))&&((A=h).Dc(o),A.Qc(a)),A.A(s),A=this.Lh(s,d,m)}I=v,v=A,-1==_&&(_=v),0==I&&1==v||1==I&&0==v||0!=I||0!=v||u.add(E),1==v&&(g=p=!1),A=E=x,x=this.g.U(x)}}if(0==S&&(I=v,v=T,-1==_&&(_=v),0==I&&1==v||1==I&&0==v||0!=I||0!=v||u.add(w),1==v&&(g=p=!1),A=this.g.U(w)),w=A,256<=u.size){for(M=1,T=u.size-1;M<T;M++)S=u.get(M),this.g.pd(S,!1);u.set(1,u.Fc()),u.Bh(2)}}while(w!=b);if(!g)for(0==_&&0==v&&u.add(b),M=0,T=u.size;M<T;M++)S=u.get(M),this.g.pd(S,!1);u.clear(!1),f=g||0==this.g.Ja(f)?this.g.Zq(f):this.g.Rb(f)}}return p?t.Ia():(this.FB(),0<i&&this.My(i),this.g.Ne(this.X))},t.prototype.Dy=function(t){var i=new e.l,r=new e.l,n=[0,0,0,0,0,0,0,0,0],s=[0,0,0,0,0,0,0,0,0],o=new e.ig,a=t,l=new e.l;t.xc(l);for(var c=new e.h,h=new e.h,u=null,p=null,d=0;4>d;d++){var f=!1,y=!!(1&d),m=0;switch(d){case 0:m=this.Ca.v,f=l.v<=m&&l.C>=m;break;case 1:m=this.Ca.G,f=l.G<=m&&l.H>=m;break;case 2:m=this.Ca.C,f=l.v<=m&&l.C>=m;break;case 3:m=this.Ca.H,f=l.G<=m&&l.H>=m}if(f)for(f=a,a=t.Ia(),(f=f.Ga()).Zi();f.$a();)for(var g,v=!0;f.Ha();){var _=f.ha();_.A(i);var b=this.Lh(i,d,m);if(-1==b){if(0<(b=_.cq(y,m,n,s))){var w=0;_.Yp(c);for(var M=0;M<=b;M++)if(w!=(g=M<b?s[M]:1)){_.ah(w,g,o);var T=o.get();T.Dc(c),M<b&&(y?(h.x=n[M],h.y=m):(h.x=m,h.y=n[M]),T.Qc(h)),T.A(r);var S=this.Lh(r,d,m);-1==S&&(null==u&&(u=new e.h),null==p&&(p=new e.h),T.Yp(u),T.Tr(p),y?(w=Math.abs(u.y-m))<(S=Math.abs(p.y-m))?(u.y=m,T.Dc(u)):(p.y=m,T.Qc(p)):(w=Math.abs(u.x-m))<(S=Math.abs(p.x-m))?(u.x=m,T.Dc(u)):(p.x=m,T.Qc(p)),T.A(r),S=this.Lh(r,d,m)),T.Tr(c),w=g,1==(g=S)?(a.oc(T,v),v=!1):v=!0}}}else 1==(g=b)?(a.oc(_,v),v=!1):v=!0}}return a},t.prototype.FB=function(){this.ji=-1,this.Vl(!1,this.Ca.v),this.Vl(!1,this.Ca.C),this.Vl(!0,this.Ca.G),this.Vl(!0,this.Ca.H),this.dd.resize(0),this.dd.Jb(100),this.ji=this.g.Gd();for(var t=new e.h,i=this.g.Ob(this.X);-1!=i;i=this.g.Rb(i))for(var r=this.g.Xa(i),n=0,s=this.g.Ja(i);n<s;n++,r=this.g.U(r))this.g.D(r,t),(this.Ca.v==t.x||this.Ca.C==t.x||this.Ca.G==t.y||this.Ca.H==t.y)&&(this.g.Ra(r,this.ji,this.dd.size),this.dd.add(r));this.Nl(!1,this.Ca.v),this.Nl(!1,this.Ca.C),this.Nl(!0,this.Ca.G),this.Nl(!0,this.Ca.H),this.Ty()},t.prototype.My=function(t){for(var i=new e.h,r=new e.h,n=null,s=null,o=e.O.lg(2048,0),a=this.g.Ob(this.X);-1!=a;a=this.g.Rb(a)){var l=this.g.Xa(a),c=l;do{var h=this.g.U(c);this.g.D(c,i);var u=-1;if(i.x==this.Ca.v?(this.g.D(h,r),r.x==this.Ca.v&&(u=1)):i.x==this.Ca.C&&(this.g.D(h,r),r.x==this.Ca.C&&(u=1)),i.y==this.Ca.G?(this.g.D(h,r),r.y==this.Ca.G&&(u=0)):i.y==this.Ca.H&&(this.g.D(h,r),r.y==this.Ca.H&&(u=0)),-1!=u){if(null==n&&(n=new e.h),null==s&&(s=new e.h),n.L(i),s.ma(0,0),0==u){var p=i.x-this.Ca.v;s.x=e.lc.sign(r.x-i.x),n.x=t*e.lc.Cn(Math.floor(Math.abs(p/t)),p)+this.Ca.v,0>n.x&&(n.x+=t)}else p=i.y-this.Ca.G,s.y=e.lc.sign(r.y-i.y),n.y=t*e.lc.Cn(Math.floor(Math.abs(p/t)),p)+this.Ca.G,0>n.y&&(n.y+=t);p=0!=u?r.y-i.y:r.x-i.x;var d=Math.abs(p);if(65536<d/t)throw e.i.fa("internal error");if(0<d){d=e.O.truncate(d/t)+2,o.length<d&&(o=e.O.lg(d));for(var f=d=0;;f++){var y=new e.h;if(y.x=n.x+s.x*f*t,y.y=n.y+s.y*f*t,1<=(y=(0!=u?y.y-i.y:y.x-i.x)/p))break;0>=y||(o[d]=y,d++)}0!=d&&this.g.Ul(c,o,d)}}c=h}while(c!=l)}},t.prototype.Vl=function(t,i){for(var r=-1,n=new e.h,s=null,o=this.g.Ob(this.X);-1!=o;o=this.g.Rb(o))for(var a=this.g.Xa(o),l=0,c=this.g.Ja(o);l<c;l++){var h=this.g.U(a);this.g.D(a,n),(t?n.y==i:n.x==i)&&(this.g.D(h,n),(t?n.y==i:n.x==i)&&(-1==r&&(r=this.g.Gd()),null==s&&(s=new e.ia(0)).Jb(100),1!=this.g.Pa(a,r)&&(s.add(a),this.g.Ra(a,r,1)),1!=this.g.Pa(h,r)&&(s.add(h),this.g.Ra(h,r,1)))),a=h}if(-1!=r&&this.g.Td(r),!(null==s||3>s.size)){var u=this;s.Vd(0,s.size,(function(e,t){return u.Mh(e,t)})),r=new e.h,o=new e.h,a=new e.h,o.Rc();var p=-1;l=new e.ia(0),c=new e.ia(0),h=null;for(var d=this.g.Gd(),f=this.g.Gd(),y=0,m=s.size;y<m;y++){var g=s.get(y);if(this.g.D(g,n),!n.qb(o)){if(-1!=p){for(var v=p;v<y;v++){p=s.get(v);var _=this.g.U(p);g=this.g.Ma(p);var b=!1;this.g.D(_,r),0>o.compare(r)&&(t?r.y==i:r.x==i)&&(l.add(p),b=!0,this.g.Ra(p,f,1)),this.g.D(g,r),0>o.compare(r)&&(t?r.y==i:r.x==i)&&(b||l.add(p),this.g.Ra(p,d,1))}for(v=0,b=l.size;v<b;v++){if(p=l.get(v),g=this.g.Pa(p,d),_=this.g.Pa(p,f),1==g&&(g=this.g.Ma(p),this.g.D(g,a),!a.qb(n))){null==h&&(h=[]);var w=e.h.tb(o,a);h[0]=e.h.tb(a,n)/w,0==h[0]?h[0]=2220446049250313e-31:1==h[0]&&(h[0]=.9999999999999998),this.g.Ul(g,h,1),g=this.g.Ma(p),this.g.mf(g,n),c.add(g),this.g.Ra(g,d,1),this.g.Ra(g,f,-1)}1==_&&(_=this.g.U(p),this.g.D(_,a),a.qb(n)||(null==h&&(h=[]),w=e.h.tb(o,a),h[0]=e.h.tb(o,n)/w,0==h[0]?h[0]=2220446049250313e-31:1==h[0]&&(h[0]=.9999999999999998),this.g.Ul(p,h,1),g=this.g.U(p),this.g.mf(g,n),c.add(g),this.g.Ra(g,d,-1),this.g.Ra(g,f,1)))}p=l,l=c,(c=p).clear(!1)}p=y,o.L(n)}}this.g.Td(d),this.g.Td(f)}},t.prototype.Nl=function(t,i){for(var r=new e.h,n=null,s=-1,o=0,a=this.dd.size;o<a;o++){var l=this.dd.get(o);if(-1!=l){var c=this.g.U(l);this.g.D(l,r),(t?r.y==i:r.x==i)&&(this.g.D(c,r),(t?r.y==i:r.x==i)&&(-1==s&&(s=this.g.Gd()),null==n&&(n=new e.ia(0)).Jb(100),-2!=this.g.Pa(l,s)&&(n.add(l),this.g.Ra(l,s,-2)),-2!=this.g.Pa(c,s)&&(n.add(c),this.g.Ra(c,s,-2))))}}if(null==n)-1!=s&&this.g.Td(s);else{var h=this;for(n.Vd(0,n.size,(function(e,t){return h.Mh(e,t)})),o=0,a=n.size;o<a;o++){var u=n.get(o);this.g.Ra(u,s,o)}l=new e.h,(c=new e.h).Rc();var p=-1;for(o=0,a=n.size;o<a;o++)if(-1!=(u=n.get(o))&&(this.g.D(u,r),!r.qb(c))){if(-1!=p)for(;;){u=!1;for(var d=1<o-p?o-1:o,f=p;f<d;f++){var y=n.get(f);if(-1!=y){var m=-1,g=this.g.U(y);this.g.D(g,l),0>c.compare(l)&&(t?l.y==i:l.x==i)&&(m=g),g=-1;var v=this.g.Ma(y);if(this.g.D(v,l),0>c.compare(l)&&(t?l.y==i:l.x==i)&&(g=v),-1!=m&&-1!=g)this.Kh(y,n,s),this.g.pd(y,!1),this.Kh(m,n,s),this.g.pd(m,!1),u=!0;else if(-1!=m||-1!=g){for(v=f+1;v<o;v++){var _=n.get(v);if(-1!=_){var b=this.g.U(_),w=-1;this.g.D(b,l),0>c.compare(l)&&(t?l.y==i:l.x==i)&&(w=b),b=this.g.Ma(_);var M=-1;if(this.g.D(b,l),0>c.compare(l)&&(t?l.y==i:l.x==i)&&(M=b),-1!=w&&-1!=M){this.Kh(_,n,s),this.g.pd(_,!1),this.Kh(w,n,s),this.g.pd(w,!1),u=!0;break}if(-1!=m&&-1!=M){this.zt(n,y,m,_,M,s),u=!0;break}if(-1!=g&&-1!=w){this.zt(n,_,w,y,g,s),u=!0;break}}}if(u)break}}}if(!u)break}p=o,c.L(r)}this.g.Td(s)}},t.prototype.Kh=function(e,t,i){i=this.g.Pa(e,i),t.set(i,-1),i=this.g.Pa(e,this.ji),this.dd.set(i,-1),-1!=(t=this.g.bd(e))&&this.g.Xa(t)==e&&(this.g.Jf(t,-1),this.g.Wg(t,-1))},t.prototype.zt=function(e,t,i,r,n,s){this.g.Bc(t,r),this.g.Cc(r,t),this.g.Cc(i,n),this.g.Bc(n,i),this.Kh(r,e,s),this.g.mi(r,!1),this.Kh(n,e,s),this.g.mi(n,!0)},t.prototype.Ty=function(){for(var e=0,t=this.dd.size;e<t;e++){var i=this.dd.get(e);-1!=i&&this.g.aj(i,-1)}for(var r=0,n=0,s=this.g.Ob(this.X);-1!=s;){var o=this.g.Xa(s);if(-1==o||s!=this.g.bd(o)){var a=s;s=this.g.Rb(s),this.g.Jf(a,-1),this.g.$q(a)}else{i=o,a=0;do{this.g.aj(i,s),a++,i=this.g.U(i)}while(i!=o);this.g.cp(s,!1),this.g.Wg(s,this.g.Ma(o)),this.g.Vj(s,a),n+=a,r++,s=this.g.Rb(s)}}for(e=0,t=this.dd.size;e<t;e++)if(-1!=(i=this.dd.get(e))&&-1==(s=this.g.bd(i))){s=this.g.vf(this.X,-1),a=0,o=i;do{this.g.aj(i,s),a++,i=this.g.U(i)}while(i!=o);2>=a?(i=this.g.Pa(o,this.ji),this.dd.set(i,-1),o=this.g.pd(o,!1),2==a&&(0<=(i=this.g.Pa(o,this.ji))&&this.dd.set(i,-1),this.g.pd(o,!1)),a=s,this.g.Jf(a,-1),this.g.$q(a)):(this.g.kn(s,!0),this.g.Vj(s,a),this.g.Jf(s,o),this.g.Wg(s,this.g.Ma(o)),this.g.cp(s,!1),n+=a,r++)}for(this.g.Rl(this.X,r),this.g.Tj(this.X,n),e=0,t=this.g.ld;-1!=t;t=this.g.ue(t))e+=this.g.I(t);this.g.bC(e)},t.By=function(e,i,r,n){return new t(i,n).Ay(e,r)},t.clip=function(e,i,r,n,s){return t.Nu(e,i,null,r,n,s)},t.Nu=function(i,r,n,s,o,a){var l=i.getType();if(33==l)return o=i.D(),r.contains(o)?i:i.Ia();if(197==l)return o=new e.l,i.A(o),o.Ea(r)?(r=new e.Fh,i.copyTo(r),r.Xo(o),r):i.Ia();if(i.B())return i;if(r.B())return i.Ia();var c=new e.l;if(i.xc(c),r.contains(c))return i;if(!r.isIntersecting(c))return i.Ia();if((null!=n||isNaN(s))&&e.ta.ty(n,r,!1),!e.aa.xj(l))throw e.i.N();if(null!=(n=i.Bb)&&null!=(n=n.Fk)){if(1==(n=n.Ro(r))){if(1736!=l)throw e.i.fa("internal error");return(i=new e.Da(i.description)).tp(r),i}if(0==n)return i.Ia()}switch(l){case 550:for(a=null,l=i.I(),n=i.ub(0),s=0,o=new e.h,c=0;c<l;c++)n.tc(2*c,o),r.contains(o)||(0==s&&(a=i.Ia()),s<c&&a.Fd(i,s,c),s=c+1);return 0<s&&a.Fd(i,s,l),0==s?i:a;case 1736:case 1607:return t.By(i,r,o,a);default:throw e.i.fa("internal error")}},t.prototype.Mh=function(t,i){var r=new e.h;return this.g.D(t,r),t=new e.h,this.g.D(i,t),r.compare(t)},t}();e.ri=t}(Y||(Y={})),function(e){var t=new e.h,i=function(){function t(t,i,r,n,s){this.Pm=new e.h,this.Dk=new e.h,this.Pi=new e.h,this.g=t,this.Aw=r,this.no=n,this.Pm=i,this.yl=s,this.Dk.Rc(),this.Pi.Rc()}return t.prototype.xE=function(t){this.g.D(t,this.Dk),t=e.O.truncate((this.Dk.x-this.Pm.x)*this.no+.5);var i=e.O.truncate((this.Dk.y-this.Pm.y)*this.no+.5);return r.jG(t,i)},t.prototype.jz=function(e){return this.g.Pa(e,this.yl)},t.prototype.Py=function(e,t){return this.g.D(e,this.Dk),this.g.D(t,this.Pi),r.Cv(this.Dk.x,this.Dk.y,this.Pi.x,this.Pi.y,this.Aw)},t}();e.sY=function(){};var r=function(){function r(){this.Pm=new e.h,this.pq=[0,0,0,0],this.xs=[0,0,0,0],this.qo=this.yl=-1}return r.iQ=function(e,t){var i=new r;return i.g=e,i.qa=t,i.Aw=t*t,i.$v=2*t,i.no=1/i.$v,i.BO()},r.Cv=function(e,t,i,r,n){return(e-=i)*e+(t-=r)*t<=n},r.jG=function(t,i){return e.O.Th(i,e.O.Th(t))},r.prototype.DO=function(i,n){this.g.Gc(i,t);for(var s=(t.y-this.Pm.y)*this.no,o=e.O.truncate((t.x-this.Pm.x)*this.no),a=e.O.truncate(s),l=s=0;1>=l;l+=1)for(var c=0;1>=c;c+=1){var h=r.jG(o+l,a+c),u=this.xl.rR(h);-1!=u&&(this.pq[s]=u,this.xs[s]=h,s++)}for(o=s-1;1<=o;o--)for(u=this.pq[o],a=o-1;0<=a;a--)if(u==this.pq[a]){this.xs[a]=-1,o!=--s&&(this.xs[o]=this.xs[s],this.pq[o]=this.pq[s]);break}for(a=0;a<s;a++)this.EO(i,this.xs[a],t,this.pq[a],n)},r.prototype.EO=function(t,i,n,s,o){for(var a=new e.h;-1!=s;s=this.xl.ER(s)){var l=this.xl.ja(s);t==l||-1!=i&&this.g.Pa(l,this.yl)!=i||(this.g.Gc(l,a),r.Cv(n.x,n.y,a.x,a.y,this.Aw)&&o.add(s))}},r.prototype.Xm=function(e,t,i){var r=this.g.Pa(e,this.qo),n=this.g.Pa(t,this.qo);return-1==r&&(r=this.zd.Ph(),this.zd.addElement(r,e),this.g.Ra(e,this.qo,r)),-1==n?this.zd.addElement(r,t):this.zd.Hy(r,n),this.g.Ra(t,this.qo,-2),t=this.YT(e,t),i&&(i=this.kw.xE(e),this.g.Ra(e,this.yl,i)),t},r.WT=function(t,i,n){t.Nb(i),n=t;var s=new e.h;r.XT(t.D(),i.D(),s),n.Cb(s)},r.XT=function(e,t,i){var r=e.x;e.x!=t.x&&(r=(1*e.x+1*t.x)/2);var n=e.y;e.y!=t.y&&(n=(1*e.y+1*t.y)/2),i.ma(r,n)},r.prototype.YT=function(t,i){var r=new e.h;this.g.D(t,r);var n=new e.h;this.g.D(i,n);var s=this.g.cG(t),o=s+(i=this.g.cG(i)),a=0,l=r.x;r.x!=n.x&&(l=(r.x*s+n.x*i)/o,a++);var c=r.y;return r.y!=n.y&&(c=(r.y*s+n.y*i)/o,a++),0<a&&this.g.Cb(t,l,c),this.g.vX(t,o),0!=a},r.prototype.BO=function(){var t=this.g.fd,r=this.g.IF();for(this.Pm=r.mz(),r=Math.max(r.ca(),r.R())/2147483646,this.$v<r&&(this.$v=r,this.no=1/this.$v),this.zd=new e.au,this.zd.At(e.O.truncate(this.g.fd/3+1)),this.zd.fn(e.O.truncate(this.g.fd/3+1)),this.yl=this.g.Gd(),this.qo=this.g.Gd(),this.kw=new i(this.g,this.Pm,this.Aw,this.no,this.yl),this.xl=new e.dL(e.O.truncate(4*t/3),this.kw),this.xl.AW(this.g.fd),t=!1,r=this.g.ld;-1!=r;r=this.g.ue(r))for(var n=this.g.Ob(r);-1!=n;n=this.g.Rb(n))for(var s=this.g.Xa(n),o=0,a=this.g.Ja(n);o<a;o++){var l=this.kw.xE(s);this.g.Ra(s,this.yl,l),this.xl.addElement(s,l),s=this.g.U(s)}var c=new e.ia(0);for(c.Jb(10),r=this.g.ld;-1!=r;r=this.g.ue(r))for(n=this.g.Ob(r);-1!=n;n=this.g.Rb(n))for(s=this.g.Xa(n),o=0,a=this.g.Ja(n);o<a;o++){if(-2!=this.g.Pa(s,this.qo))for(l=this.g.Pa(s,this.yl),this.xl.jd(s,l);this.DO(s,c),0!=c.size;){l=!1;for(var h=0,u=c.size;h<u;h++){var p=c.get(h),d=this.xl.ja(p);this.xl.vd(p),l=this.Xm(s,d,h+1==u)||l}if(t=t||l,c.clear(!1),!l)break}s=this.g.U(s)}return t&&this.vN(),this.kw=this.xl=null,this.g.Td(this.yl),this.g.Td(this.qo),t},r.prototype.vN=function(){for(var t=new e.h,i=this.zd.je;-1!=i;i=this.zd.qz(i)){var r=this.zd.rc(i);for(this.g.D(this.zd.ja(r),t),r=this.zd.lb(r);-1!=r;r=this.zd.lb(r))this.g.mf(this.zd.ja(r),t)}},r}();e.Yt=r}(Y||(Y={})),function(e){var t=function(){function t(e){void 0===e&&(e=null),this.yg=null,this.Pb=!1,this.yg=null===e?[]:e}return t.prototype.copyTo=function(t){if(t.Pb)throw e.i.fa("CompositeGeographicTransformation is read-only");for(var i=0;i<this.yg.length;i++)t.yg.push(this.yg[i].Of())},t.prototype.count=function(){return this.yg.length},t.prototype.add=function(t){if(this.Pb)throw e.i.fa("CompositeGeographicTransformation is read-only");this.yg.push(t.Of())},t.prototype.clear=function(){if(this.Pb)throw e.i.fa("CompositeGeographicTransformation is read-only");this.yg.length=0},t.prototype.remove=function(t){if(this.Pb)throw e.i.fa("CompositeGeographicTransformation is read-only");this.yg.splice(t,1)},t.prototype.jg=function(){var e=new t;return this.copyTo(e),e},t.prototype.Of=function(){return this.jg()},t.prototype.transform=function(t,i,r,n){if(t.length<i)throw e.i.fa("invalid Argument");var s=r;for(r=0;r<this.yg.length;r++){var o=this.yg[r];if(null!=o.qm()){var a=o.Un,l=a?1:0,c=a?o.qm().getGeogcs2():o.qm().getGeogcs1();if(c=s/(c=c.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(c-1))for(s=0;s<i;s++)t[s][0]*=c,t[s][1]*=c;e.MC.geogToGeog(o.qm(),i,t,null,l),s=(a?o.qm().getGeogcs1():o.qm().getGeogcs2()).getUnit().getUnitFactor()}}if(c=s/n,3552713678800501e-30<Math.abs(c-1))for(s=0;s<i;s++)t[s][0]*=c,t[s][1]*=c;return i},t.prototype.Nb=function(e){if(e==this)return!0;if(!(e instanceof t)||this.yg.length!=e.yg.length)return!1;for(var i=0;i<this.yg.length;i++)if(!this.yg[i].Nb(e.yg[i]))return!1;return!0},t.prototype.ix=function(){this.Pb=!0},t.prototype.toString=function(){for(var e="CGT ("+this.count()+") ",t=0,i=this.count();t<i;++t)e+=this.yg[t].toString()+", ";return 200<e.length?e.substring(0,197)+"... ("+e.length.toString()+" characters)":e},t.create=function(){return new t},t}();e.wC=t}(Y||(Y={})),function(e){var t,i=Math.PI,r=2*Math.PI,n=Math.PI/2,s=function(){function e(){}return e.TO=function(t,i){var r=new e;return r.x=t,r.y=i,r.type=0,r.Uh=0,r},e.al=function(t){var i=new e;return i.x=t.x,i.y=t.y,i.type=0,i.Uh=0,i},e.SO=function(t){var i=new e;return i.x=t.x,i.y=t.y,i.type=t.type,i.Uh=t.Uh,i},e.Pd=function(t,i,r){var n=new e;return n.x=t.x+i*Math.cos(r),n.y=t.y+i*Math.sin(r),n.type=t.type,n.Uh=t.Uh,n},e.Pu=function(t,i){var r=new e;return r.x=.5*(t.x+i.x),r.y=.5*(t.y+i.y),r.type=t.type,r.Uh=t.Uh,r},e.TE=function(t,i){var r=new e;return r.x=t.x+.001*(i.x-t.x),r.y=t.y+.001*(i.y-t.y),r.type=t.type,r.Uh=t.Uh,r},e}(),o=function(){};(t=e.fL||(e.fL={}))[t.Round=0]="Round",t[t.Bevel=1]="Bevel",t[t.Miter=2]="Miter",t[t.Square=3]="Square";var a=function(){function t(e){this.NA=this.Yb=this.wg=null,this.nd=e}return t.V=function(i,r,n,s,o,a){if(null==i)throw e.i.N();if(1>i.Db())throw e.i.N();return 0==r||i.B()?i:((a=new t(a)).ko=i,a.Ka=r,a.qa=o,a.Ki=n,a.CA=s,a.Rx())},t.prototype.eM=function(){var t=this.ko,i=t.ac(),r=t.wc(),n=new e.h;return n.uc(r,i),n.normalize(),n.Hv(),n.scale(this.Ka),i.add(n),r.add(n),n=t.Ia(),t.Dc(i),t.Qc(r),n},t.prototype.dM=function(){var t=this.ko;if(0<this.Ka&&2!=this.Ki){var i=new e.Da;return i.ad(t,!1),this.ko=i,this.Rx()}return(t=new e.Fh(t.$)).W(this.Ka,this.Ka),t},t.prototype.tJ=function(e,t,i,r){return(t.x-e.x)*(r.x-i.x)+(t.y-e.y)*(r.y-i.y)},t.prototype.fc=function(e,t){if(void 0===t)this.Yb.push(e),this.gf++;else if(0==this.gf)this.fc(e);else{var i=this.Bw,r=this.wg[0==t?i-1:t-1],o=this.wg[t],a=this.tJ(r,o,this.Yb[this.gf-1],e);0<a?this.fc(e):0>a&&(0<this.tJ(r,o,o,this.Yb[this.gf-1])?(o=this.wg[0==t?i-2:1==t?i-1:t-2],i=s.Pd(r,this.Ka,Math.atan2(r.y-o.y,r.x-o.x)-n),this.Yb[this.gf-1]=i,1==this.Ki||2==this.Ki?(i=s.Pu(i,r),this.fc(i),i=s.Pd(r,this.Ka,this.Jv+n),(r=s.Pu(i,r)).type|=256,this.fc(r)):(i=s.Pd(r,this.Ka,this.Jv+n)).type|=256,this.fc(i),this.fc(e,t)):(i=s.Pd(o,this.Ka,this.Jv+n),this.fc(i),1==this.Ki||2==this.Ki?(i=s.Pu(i,o),this.fc(i),i=s.Pd(o,this.Ka,this.aA-n),(r=s.Pu(i,o)).type|=256,this.fc(r)):(i=s.Pd(o,this.Ka,this.aA-n)).type|=256,this.fc(i)))}},t.prototype.mE=function(){var t,o=this.Bw;this.gf=0;var a=.5*this.qa,l=0,c=0;for(t=0;t<o;t++){var h=this.wg[t],u=0==t?this.wg[o-1]:this.wg[t-1],p=t==o-1?this.wg[0]:this.wg[t+1],d=u.x-h.x,f=u.y-h.y,y=p.x-h.x,m=p.y-h.y,g=Math.atan2(f,d),v=Math.atan2(m,y);if(this.Jv=g,this.aA=v,0==t&&(l=g,c=v),d=d*m-y*f,f=v,v<g&&(v+=r),0<d*this.Ka)1==this.Ki||2==this.Ki?(g=s.Pd(h,this.Ka,g+n),this.fc(g),g=s.TE(h,g),this.fc(g),g=s.Pd(h,this.Ka,v-n),(h=s.TE(h,g)).type|=256,this.fc(h),this.fc(g)):(d=.5*(v-g),d=this.Ka/Math.abs(Math.sin(d)),g=s.Pd(h,d,.5*(g+v)),this.fc(g,t));else if(512&h.type){for(d=1-a/Math.abs(this.Ka),u=1,p=0>this.Ka?-i:i,-1<d&&1>d&&(.017453292519943295>(f=2*Math.acos(d))&&(f=.017453292519943295),1<(u=e.O.truncate(i/f+1.5))&&(p/=u)),f=g+n,g=s.Pd(h,this.Ka,f),0==t&&(g.type|=1024),this.fc(g,t),d=this.Ka/Math.cos(p/2),f+=p/2,(g=s.Pd(h,d,f)).type|=1024,this.fc(g);0<--u;)f+=p,(g=s.Pd(h,d,f)).type|=1024,this.fc(g);(g=s.Pd(h,this.Ka,v-n)).type|=1024,this.fc(g)}else if(1==this.Ki)g=s.Pd(h,this.Ka,g+n),this.fc(g,t),g=s.Pd(h,this.Ka,v-n),this.fc(g);else if(0==this.Ki)for(d=1-a/Math.abs(this.Ka),u=1,p=v-n-(g+n),-1<d&&1>d&&(.017453292519943295>(f=2*Math.acos(d))&&(f=.017453292519943295),1<(u=e.O.truncate(Math.abs(p)/f+1.5))&&(p/=u)),d=this.Ka/Math.cos(.5*p),f=g+n+.5*p,g=s.Pd(h,d,f),this.fc(g,t);0<--u;)f+=p,g=s.Pd(h,d,f),this.fc(g);else 2==this.Ki?(d=u.x-h.x,f=u.y-h.y,.99999999<(u=(d*(y=p.x-h.x)+f*(m=p.y-h.y))/Math.sqrt(d*d+f*f)/Math.sqrt(y*y+m*m))?(g=s.Pd(h,1.4142135623730951*this.Ka,v-.25*i),this.fc(g,t),g=s.Pd(h,1.4142135623730951*this.Ka,v+.25*i),this.fc(g)):(u=Math.abs(this.Ka/Math.sin(.5*Math.acos(u))))>(p=Math.abs(this.CA*this.Ka))?(d=.5*(v-g),d=this.Ka/Math.abs(Math.sin(d)),g=s.Pd(h,d,.5*(g+v)),v=e.h.construct(g.x,g.y),g=e.h.construct(h.x,h.y),(h=new e.h).uc(v,g),(v=new e.h).HW(p/h.length(),h,g),g=(u-p)*Math.abs(this.Ka)/Math.sqrt(u*u-this.Ka*this.Ka),0<this.Ka?h.Hv():h.ar(),h.scale(g/h.length()),(g=new e.h).add(v,h),(u=new e.h).uc(v,h),g=s.al(g),this.fc(g,t),g=s.al(u),this.fc(g)):(d=.5*(v-g),d=this.Ka/Math.abs(Math.sin(d)),g=s.Pd(h,d,.5*(g+v)),this.fc(g,t))):(v=f,0<this.Ka?(v>g&&(v-=r),u=g-v<n):(v<g&&(v+=r),u=v-g<n),u?(f=0>(d=1.4142135623730951*this.Ka)?g+.25*i:g+.75*i,g=s.Pd(h,d,f),this.fc(g,t),f=0>d?v-.25*i:v-.75*i,g=s.Pd(h,d,f),this.fc(g)):(d=.5*(v-g),d=this.Ka/Math.abs(Math.sin(d)),v<g&&(v+=r),g=s.Pd(h,d,(g+v)/2),this.fc(g,t)))}return this.Jv=l,this.aA=c,this.fc(this.Yb[0],0),h=s.SO(this.Yb[this.gf-1]),this.Yb[0]=h,this.wW()},t.prototype.Au=function(t,i){if(!(2>i))for(var r=0;r<i;r++){var n=this.Yb[t+r];0!=r?this.NA.Ci(e.h.construct(n.x,n.y)):this.NA.Lt(e.h.construct(n.x,n.y))}},t.prototype.fM=function(e,t,i){var r=e.Ba(t),n=e.Vc(t);if(this.Yb=[],this.NA=i,e.dc(t)){for(t=e.Na(r);e.Na(n-1).qb(t);)n--;if(2<=n-r){for(this.Bw=n-r,this.wg=[],t=r;t<n;t++)this.wg.push(s.al(e.Na(t)));this.mE()&&this.Au(0,this.gf-1)}}else{for(t=e.Na(r);r<n&&e.Na(r+1).qb(t);)r++;for(t=e.Na(n-1);r<n&&e.Na(n-2).qb(t);)n--;if(2<=n-r){for(this.Bw=2*(n-r)-2,this.wg=[],(i=s.al(e.Na(r))).type|=1536,this.wg.push(i),t=r+1;t<n-1;t++)i=s.al(e.Na(t)),this.wg.push(i);for((i=s.al(e.Na(n-1))).type|=512,this.wg.push(i),t=n-2;t>=r+1;t--)(i=s.al(e.Na(t))).type|=1024,this.wg.push(i);if(this.mE())if(2<=this.Yb.length){for(e=-1,(n=!!(1024&this.Yb[this.gf-1].type))||(e=0),t=1;t<this.gf;t++)(r=!!(1024&this.Yb[t].type))?n||1<(n=t-1)-e+1&&this.Au(e,n-e+1):n&&(e=t-1),n=r;n||1<(n=this.gf-1)-e+1&&this.Au(e,n-e+1)}else e=0,n=this.gf-1,0<=e&&1<=n-e&&this.Au(e,n-e+1)}}this.wg=null,this.Bw=0,this.Yb=null,this.gf=0},t.prototype.wW=function(){for(var e=!1,t=0;t<this.gf;t++){var i=this.Yb[t];i.qh=t+1,i.sh=t-1,this.Yb[t]=i}for((i=this.Yb[0]).sh=this.gf-2,this.Yb[0]=i,(i=this.Yb[this.gf-2]).qh=0,this.Yb[this.gf-2]=i,t=i=0;t<this.gf;t++)if(256&this.Yb[i].type){var r=this.GP(i);if(-1==r){e=!0;break}i=r}else i=this.Yb[i].qh;return!e&&(this.QO(i),!0)},t.prototype.GP=function(e){for(var t,i,r=this.gf-1,n=e,s=1;s<=r-2;s++){t=n=this.Yb[n].qh,i=e;for(var o=1;o<=s;o++){if(i=this.Yb[i].sh,!(256&this.Yb[i].type||256&this.Yb[t].type)){var a=this.gS(i,t);if(-1!=a)return a}t=this.Yb[t].sh}}return-1},t.prototype.gS=function(t,i){var r=this.Yb[this.Yb[t].sh],n=this.Yb[t],s=this.Yb[this.Yb[i].sh],a=this.Yb[i];if(!this.JW(r,n,s,a))return-1;var l=new o;return this.xQ(r,n,s,a,l)&&!l.bE&&e.O.bK((n.x-r.x)*(a.y-s.y)-(n.y-r.y)*(a.x-s.x))!=e.O.bK(this.Ka)?(r=this.Yb[t].sh,l.an.type=n.type,l.an.qh=i,l.an.sh=r,this.Yb[t]=l.an,l.an=this.Yb[i],l.an.sh=t,this.Yb[i]=l.an,i):-1},t.prototype.JW=function(e,t,i,r){return Math.max(e.x,t.x)>=Math.min(i.x,r.x)&&Math.max(i.x,r.x)>=Math.min(e.x,t.x)&&Math.max(e.y,t.y)>=Math.min(i.y,r.y)&&Math.max(i.y,r.y)>=Math.min(e.y,t.y)},t.prototype.xQ=function(e,t,i,r,n){n.bE=!1;var o=(t.y-e.y)*(r.x-i.x)-(t.x-e.x)*(r.y-i.y),a=(i.y-e.y)*(t.x-e.x)-(i.x-e.x)*(t.y-e.y);if(0<=(o=0==o?2:a/o)&&1>=o){var l=o;if(o=(r.y-i.y)*(t.x-e.x)-(r.x-i.x)*(t.y-e.y),a=(e.y-i.y)*(r.x-i.x)-(e.x-i.x)*(r.y-i.y),0<=(o=0==o?2:a/o)&&1>=o)return n.an=s.TO(e.x+o*(t.x-e.x),e.y+o*(t.y-e.y)),n.an.Uh=i.Uh+l*(r.Uh-i.Uh),0!=l&&1!=l||0!=o&&1!=o||(n.bE=!0),n.VY=o,n.WY=l,!((0==l||1==l)&&0<o&&1>o||(0==o||1==o)&&0<l&&1>l)}return!1},t.prototype.QO=function(e){for(;this.Yb[e].sh<e;)e=this.Yb[e].sh;var t=0,i=e;do{i=this.Yb[i],this.Yb[t]=i,i=i.qh,t++}while(i!=e);this.Yb[t]=this.Yb[0],this.gf=t+1},t.prototype.$C=function(e){var t=this.ko,i=t.Ga();if(null!=i){i.Zi();for(var r=-1;i.$a();)r++,this.fM(t,r,e)}},t.prototype.Rx=function(){var t=this.ko.getType();return 322==t?this.eM():197==t?this.dM():e.aa.yd(t)?((t=new e.Ta).oc(this.ko,!0),this.ko=t,this.Rx()):1607==t?(t=new e.Ta,this.$C(t),t):1736==t?(t=new e.Da,this.$C(t),t):null},t}();e.IK=a}(Y||(Y={})),function(e){var t=function(){function e(e){this.qk=e}return e.prototype.D=function(e,t){this.qk.g.D(e,t)},e.prototype.vd=function(e){var t=this.qk.Fa.ja(e);this.qk.Fa.vd(e,-1),this.qk.g.pd(t,!1)},e}(),i=function(){function e(e){this.qk=e}return e.prototype.D=function(e,t){this.qk.IT.D(e,t)},e.prototype.vd=function(e){this.qk.Fa.vd(e,-1)},e}(),r=function(){function e(e){this.qk=e}return e.prototype.D=function(e,t){t.L(this.qk.LT[e])},e.prototype.vd=function(e){this.qk.Fa.vd(e,-1)},e}(),n=function(){function n(n){void 0===n?(this.Fa=new e.Yj,this.Fa.De(20),this.g=new e.gd,this.xT=this.g.Ig(550),this.Ss=this.g.vf(this.xT,-1),this.Xh=new t(this)):n instanceof Array?(this.Fa=new e.Yj,this.Fa.De(20),this.LT=n,this.Xh=new r(this)):(this.Fa=new e.Yj,this.Fa.De(20),this.IT=n,this.Xh=new i(this))}return n.prototype.Ib=function(t){var i=t.getType();if(e.Gx.xj(i))this.jN(t);else if(e.Vk.yd(i))this.oN(t);else if(197==i)this.gN(t);else{if(33!=i)throw e.i.N("invalid shape type");this.nN(t)}},n.prototype.cR=function(){var t=new e.Sa,i=this.Fa.rc(-1),r=new e.Da(this.g.ht);for(this.g.Vi(this.Fa.ja(i),t),r.nf(t),i=this.Fa.lb(i);-1!=i;i=this.Fa.lb(i))this.g.Vi(this.Fa.ja(i),t),r.lineTo(t);return r},n.RO=function(t){var i=new n(t),r=t.I(),s=1,o=new e.h,a=new e.h,l=new e.h;for(t.D(0,o);t.D(s,a),a.Rz(o)&&s<r-1;)s++;for(i.Fa.addElement(0,-1),i.Fa.xn(s),r=s+1;r<t.I();r++)t.D(r,l),-1!=(s=i.pC(l))&&i.Fa.Sj(s,r);for(l=new e.Sa,s=i.Fa.rc(-1),r=new e.Da(t.description),t.ve(i.Fa.ja(s),l),r.nf(l),s=i.Fa.lb(s);-1!=s;s=i.Fa.lb(s))t.ve(i.Fa.ja(s),l),r.lineTo(l);return r},n.construct=function(e,t,i){for(var r=new n(e),s=1,o=e[0];e[s].Rz(o)&&s<t-1;)s++;for(r.Fa.addElement(0,-1),r.Fa.xn(s),s+=1;s<t;s++)-1!=(o=r.pC(e[s]))&&r.Fa.Sj(o,s);for(e=0,t=r.Fa.rc(-1);-1!=t;t=r.Fa.lb(t))i[e++]=r.Fa.ja(t);return e},n.JG=function(t,i){var r=t.Ba(i),s=t.Vc(i);if(i=!t.dc(i)&&t.Nn(i),t=t.ub(0),s*=2,i&&(s-=2),6>s-(r*=2))return!0;i=new e.h;var o=new e.h,a=new e.h;t.tc(r,i),t.tc(r+2,o),t.tc(r+4,a);var l=n.Wu(o,a,i);if(l.ps()||!n.um(l.value()))return!1;var c=e.h.construct(o.x,o.y),h=new e.h;for(r+=6;r<s;r+=2){if(h.L(o),o.L(a),t.tc(r,a),(l=n.Wu(o,a,i)).ps()||!n.um(l.value()))return!1;if((l=n.Wu(c,a,i)).ps()||!n.um(l.value()))return!1;if((l=n.Wu(o,a,h)).ps()||!n.um(l.value()))return!1}return!0},n.prototype.jN=function(t){for(var i=new e.Sa,r=new e.h,n=0;n<t.I();n++){t.D(n,r);var s=this.Cr(r);if(-1!=s){t.ve(n,i);var o=this.g.fc(this.Ss,i);this.Fa.Sj(s,o)}}},n.prototype.gN=function(t){for(var i=new e.Sa,r=new e.h,n=0;4>n;n++){t.mB(n,r);var s=this.Cr(r);if(-1!=s){t.Hf(n,i);var o=this.g.fc(this.Ss,i);this.Fa.Sj(s,o)}}},n.prototype.oN=function(t){var i=new e.Sa,r=t.ac();if(-1!=(r=this.Cr(r))){t.To(i);var n=this.g.fc(this.Ss,i);this.Fa.Sj(r,n)}r=t.wc(),-1!=(r=this.Cr(r))&&(t.Po(i),t=this.g.fc(this.Ss,i),this.Fa.Sj(r,t))},n.prototype.nN=function(e){var t=e.D();-1!=(t=this.Cr(t))&&(e=this.g.fc(this.Ss,e),this.Fa.Sj(t,e))},n.prototype.Cr=function(e){var t=-1;if(0==this.Fa.size(-1))return this.Fa.addElement(-4,-1);if(1==this.Fa.size(-1)){var i=this.g.Na(this.Fa.ja(this.Fa.rc(-1)));return e.Rz(i)||(t=this.Fa.xn(-5)),t}return this.pC(e)},n.prototype.pC=function(t){var i=-1;do{var r=this.Fa.rc(-1),s=this.Fa.Fc(-1),o=this.Fa.ja(r),a=this.Fa.ja(s),l=new e.h,c=new e.h;if(this.Xh.D(o,l),this.Xh.D(a,c),o=e.h.Uq(c,t,l),n.um(o))i=this.Fa.xn(-1),(l=this.nC(t,s,r))!=r&&this.oC(t,r,this.Fa.we(l));else if(n.CG(o)){c=this.Fa.sv(-1);var h=this.Fa.rc(-1),u=this.Fa.Fc(-1);for(o=new e.h,a=new e.h;h!=this.Fa.we(u);){var p=this.Fa.ja(c);this.Xh.D(p,o),p=e.h.Uq(o,t,l),n.CG(p)?(u=c,c=this.Fa.ll(c)):(h=c,c=this.Fa.Xp(c))}if(c=u,l=h,p=this.Fa.ja(c),h=this.Fa.ja(l),this.Xh.D(p,o),this.Xh.D(h,a),l!=r&&(o=e.h.Uq(a,t,o),!n.um(o)))continue;i=this.Fa.zu(l,c,-2,!1),this.oC(t,c,s),this.nC(t,l,r)}else null==this.sb&&(this.sb=new e.yb),this.sb.Dc(c),this.sb.Qc(l),0>(l=this.sb.fe(t,!0))?(l=this.Fa.we(s),this.Fa.vd(s,-1),i=this.Fa.xn(-3),this.nC(t,l,r)):1<l&&(l=this.Fa.lb(r),this.Fa.vd(r,-1),i=this.Fa.zu(-1,l,-3,!1),this.oC(t,l,s))}while(0);return i},n.prototype.oC=function(t,i,r){if(i!=r){var s=this.Fa.ja(i),o=this.Fa.lb(i),a=new e.h,l=new e.h;for(this.Xh.D(s,a);i!=r&&2<this.Fa.size(-1)&&(this.Xh.D(this.Fa.ja(o),l),s=e.h.Uq(l,t,a),!n.um(s));)s=i,i=o,a.L(l),o=this.Fa.lb(i),this.Xh.vd(s)}},n.prototype.nC=function(t,i,r){if(i==r)return r;var s=this.Fa.ja(i),o=this.Fa.we(i),a=new e.h,l=new e.h;for(this.Xh.D(s,a);i!=r&&2<this.Fa.size(-1)&&(this.Xh.D(this.Fa.ja(o),l),s=e.h.Uq(a,t,l),!n.um(s));)s=i,i=o,a.L(l),o=this.Fa.we(i),this.Xh.vd(s);return i},n.Wu=function(t,i,r){var n=new e.Wb;n.set(i.x),n.sub(t.x);var s=new e.Wb;s.set(r.y),s.sub(t.y);var o=new e.Wb;return o.set(i.y),o.sub(t.y),(i=new e.Wb).set(r.x),i.sub(t.x),n.Ag(s),o.Ag(i),n.sub(o),n},n.um=function(e){return 0>e},n.CG=function(e){return 0<e},n}();e.Zt=n}(Y||(Y={})),function(e){var t=function(){function t(e){this.g=null,this.tH=!0,this.nd=e}return t.zU=function(t,i,r){return t=e.ta.Er(t),e.Yt.Cv(i.Lg(),i.ih(),r.Lg(),r.ih(),e.lc.ox(t))},t.CO=function(t,i){var r=new e.Sa;return e.Yt.WT(t,i,r),r},t.V=function(e,i,r,n){return(r=new t(r)).g=e,r.qa=i,r.tH=n,r.EM()},t.prototype.nM=function(t){return e.Yt.iQ(this.g,t)},t.prototype.sM=function(t){return e.$t.V(this.g,t,this.nd)},t.prototype.EM=function(){var t=this.qa,i=e.ta.Er(t),r=1.00001*(t=e.ta.rN(t));t*=1.000001;for(var n=!1,s=30<this.g.fd+10?1e3:(this.g.fd+10)*(this.g.fd+10),o=0,a=this.g.jS();;o++){if(o>s)throw e.i.fa("Internal Error: max number of iterations exceeded");var l=this.nM(i);if(n=n||l,this.tH&&(l=0!=this.g.Gp(i,!0,!1),n=n||l),l=!1,(0==o||a||e.$t.kI(!0,this.g,t,null,this.nd))&&(l=this.sM(r),n=n||l),!l)break;e.mp.zp(this.nd)}return n},t}();e.Tk=t}(Y||(Y={})),function(e){var t=function(){function t(e){this.$d=this.Mc=null,this.Ys=0,this.Ub=e,this.cA=!0}return t.prototype.uv=function(e,t){var i=this.g.bc(e);if(null==i){if(!this.g.ed(e,t))return null;i=t}return i},t.prototype.Xq=function(){var t;void 0===t&&(t=!1),this.Ys++,(t||!(4095&this.Ys))&&(this.Ys=0,e.mp.zp(this.Ub))},t.prototype.nP=function(){var t=this.g.Yq(!1),i=!1,r=new e.yb,n=new e.yb,s=new e.l;s.Oa();var o=new e.l;o.Oa();for(var a=new e.Sa,l=new e.TC,c=t.next();-1!=c;c=t.next()){e.mp.zp(this.Ub);var h=null,u=!1;if(!e.aa.Rn(this.g.ic(t.ck))){if(null==(h=this.uv(c,r)))continue;if(h.A(s),s.W(this.qa,this.qa),h.Bi(this.qa)){if(!h.Bi(0))continue;u=!0,h=null}}var p=this.g.Yq(t),d=p.next();for(-1!=d&&(d=p.next());-1!=d;d=p.next()){var f=null,y=!1;if(!e.aa.Rn(this.g.ic(p.ck))){if(null==(f=this.uv(d,n)))continue;if(f.A(o),f.Bi(this.qa)){if(!f.Bi(0))continue;y=!0,f=null}}var m=0,g=0;if(null!=h&&null!=f)s.HG(o)&&(l.Oo(h),l.Oo(f),l.Ea(this.qa,!1),0<(m=l.ol(0))+(g=l.ol(1))&&(this.g.jr(c,l,0,!0),this.g.jr(d,l,1,!0)),l.clear());else if(null!=h){var v=new e.h;if(this.g.D(d,v),s.contains(v)){if(l.Oo(h),this.g.Vi(d,a),l.Kz(this.qa,a,!1),0<(m=l.ol(0)))if(this.g.jr(c,l,0,!0),y){for(y=-1,v=this.g.U(d);-1!=v&&v!=d&&(y=v,null!=(f=this.uv(v,n))&&f.Bi(0));v=this.g.U(v));for(v=d;-1!=v&&(this.g.Dh(v,l.Bf),v!=y);v=this.g.U(v));}else this.g.Dh(d,l.Bf);l.clear()}}else{if(null==f)continue;if(v=new e.h,this.g.D(c,v),o.W(this.qa,this.qa),o.contains(v)){if(l.Oo(f),this.g.Vi(c,a),l.Kz(this.qa,a,!1),0<(g=l.ol(0)))if(this.g.jr(d,l,0,!0),u){for(y=-1,v=this.g.U(c);-1!=v&&v!=c&&(y=v,null!=(f=this.uv(v,n))&&f.Bi(0));v=this.g.U(v));for(v=c;-1!=v&&(this.g.Dh(v,l.Bf),v!=y);v=this.g.U(v));}else this.g.Dh(c,l.Bf);l.clear()}}if(0!=m+g){if(0!=m){if(null==(h=this.g.bc(c))){if(!this.g.ed(c,r))continue;h=r,r.A(s)}else h.A(s);if(h.Bi(this.qa))break}i=!0}}}return i},t.prototype.oP=function(){return this.QU()},t.prototype.QU=function(){return(new e.RC).PX(this.g,this.qa)},t.prototype.lI=function(){var t=!1;null==this.Mc&&(this.Mc=new e.Yj);var i=new e.ia(0);i.Jb(this.g.fd+1);for(var r=this.g.Yq(),n=r.next();-1!=n;n=r.next())i.add(n);this.g.nx(i,i.size),i.add(-1),r=this.g.Gd(),n=this.g.Gd(),this.$d=new e.UC(this.g,this.qa,!this.cA),this.Mc.Vo(this.$d);var s=new e.ia(0),o=new e.ia(0),a=0;new e.h;var l=this.g.td;this.g.vb.mc();for(var c,h,u=this.g.vb.za[0].o,p=i.get(a++);-1!=p;){var d=c=u[2*(h=l.T(p,0))],f=h=u[2*h+1];do{var y=l.T(p,2),m=l.T(p,1);if(-1!=y){var g=l.T(y,0),v=u[2*g];0>(f<(g=u[2*g+1])?-1:f>g?1:d<v?-1:d>v?1:0)&&(o.add(p),o.add(y))}-1!=m&&(v=u[2*(g=l.T(m,0))],0>(f<(g=u[2*g+1])?-1:f>g?1:d<v?-1:d>v?1:0)&&(o.add(m),o.add(m))),-1!=(v=this.g.Pa(p,r))&&(s.add(v),this.g.Ra(p,r,-1)),-1!=(v=this.g.Pa(p,n))&&(s.add(v),this.g.Ra(p,n,-1)),-1!==(p=i.get(a++))&&(d=u[2*(f=l.T(p,0))],f=u[2*f+1])}while(-1!=p&&d===c&&f===h);for(d=1==s.size&&2==o.size,v=f=-1,y=0,m=s.size;y<m;y++){g=s.get(y);var _=this.Mc.we(g);if(-1==_||s.hG(_)||(f=_),-1==(g=this.Mc.lb(g))||s.hG(g)||(v=g),-1!=f&&-1!=v)break}for(this.$d.$J(h,c),y=0,m=s.size;y<m;y++)g=s.get(y),this.Mc.vd(g,-1);if(s.clear(!1),!d&&-1!=f&&-1!=v&&this.qO(f,v)){t=!0,this.Ni=this.$d.rm();break}for(y=0,m=o.size;y<m;y+=2){if(h=o.get(y),c=o.get(y+1),d?(h=this.Mc.zu(f,v,h,!0),d=!1):h=this.Mc.addElement(h,-1),this.$d.rg){this.Ni=this.$d.rm(),t=!0;break}-1==this.g.Pa(c,r)?this.g.Ra(c,r,h):this.g.Ra(c,n,h)}if(t)break;o.Bh(0)}return this.g.Td(r),this.g.Td(n),t},t.prototype.qO=function(e,t){return this.$d.compare(this.Mc,this.Mc.ja(e),t),e=this.$d.rg,this.$d.Kr(),e},t.yE=function(t){for(var i=t.ld;-1!=i;i=t.ue(i))if(e.aa.Hc(t.ic(i)))return!0;return!1},t.fQ=function(e,i,r,n){return!!t.yE(e)&&((i=new t(n)).g=e,i.qa=r,15>e.fd?e=i.nP():i.oP())},t.V=function(e,i,r){return t.fQ(e,e.IF(),i,r)},t.kI=function(i,r,n,s,o){if(!t.yE(r))return!1;var a=new t(o);if(a.g=r,a.qa=n,a.cA=i,a.lI())return null!=s&&s.Wt(a.Ni),!0;var l=new e.Dd;return l.$B(),r.Oc(l),(a=new t(o)).g=r,a.qa=n,a.cA=i,i=a.lI(),l.$B(),r.Oc(l),!!i&&(null!=s&&s.Wt(a.Ni),!0)},t.Ml=function(e,t){return!(16>(e=e.I()))&&2*e+Math.log(e)*Math.LOG10E/Math.log(2)*t<1*e*t},t.lP=function(i,r,n,s){var o=r.getType();if(e.aa.Hc(o))return new t(s).mP(i,r,n);throw e.i.fa("crack_A_with_B")},t.prototype.mP=function(r,n,s){var o=new e.l;r.xc(o);var a=new e.l;if(n.xc(a),a.W(s,s),!a.isIntersecting(o))return r;var l=r.Bb,c=null;null!=l&&(c=l.Fb),t.Ml(r,r.I())&&(c=e.ta.jj(r,a));var h=null!=c?c.getIterator():null,u=n.Ga();n=r.Ga();var p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(a=[];u.$a();)for(;u.Ha();){var d=u.ha();if(null!=c){for(h.Uo(d,s),l=h.next();-1!=l;l=h.next())if(this.Xq(),n.Vb(c.ja(l),-1),n.Ha()){var f=(l=n.ha()).Ea(d,null,p,null,s);for(l=0;l<f;++l){var y=p[l];if(0!=y&&1!=y){var m=n.wb(),g=new i;g.t=y,g.index=m,a.push(g)}}}}else{var v=new e.l;if(d.xc(v),v.W(s,s),o.isIntersecting(v))for(n.Zi();n.$a();)for(;n.Ha();)if(this.Xq(),l=n.ha(),y=new e.l,l.xc(y),y.isIntersecting(v))for(f=l.Ea(d,null,p,null,s),l=0;l<f;++l)0!=(y=p[l])&&1!=y&&(m=n.wb(),(g=new i).t=y,g.index=m,a.push(g))}}if(0==a.length)return r;for(a=a.sort(i.Ey),r=r.Ia(),n.Zi();n.$a()&&!n.Ha(););for(s=n.ha(),o=new e.ig,c=-1,l=0,h=a.length;l<h;){for(p=a[l].index,u=l+1;u<h&&a[u].index==p;)++u;for(;n.wb()<p;){if(this.Xq(),d=n.Ha(),y=n.gb,(v=d||!n.On()||n.Pn())&&r.oc(s,c!=y),c=y,!d)for(;n.$a()&&!n.Ha(););s=n.ha()}for(p=0;l<u;l++)(y=a[l].t)!=p&&(s.ah(p,y,o),p=y,y=n.gb,r.oc(o.get(),c!=y),c=y);if((v=(d=n.Ha())||!n.On()||n.Pn())&&(s.ah(p,1,o),r.oc(o.get(),!1)),d)s=n.ha();else{for(;n.$a()&&!n.Ha(););s=n.Ha()?n.ha():null}l=u}for(null!=s&&(y=n.gb,(v=(d=n.Ha())||!n.On()||n.Pn())&&r.oc(s,c!=y),c=y),d=n.Ha();;){if(!d){for(;n.$a()&&!(d=n.Ha()););if(!d)break}s=n.ha(),y=n.gb,(v=(d=n.Ha())||!n.On()||n.Pn())&&r.oc(s,c!=y),c=y}return r},t}();e.$t=t;var i=function(){function e(){}return e.Ey=function(e,t){return e.index==t.index?e.t>t.t?1:e.t<t.t?-1:0:e.index>t.index?1:-1},e}()}(Y||(Y={})),function(e){var t;(t=e.KK||(e.KK={}))[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Coincident=2]="Coincident",t[t.Undefined=3]="Undefined",t[t.Uncut=4]="Uncut";var i=function(e,t,i,r,n,s,o,a,l,c,h){this.X=e,this.bt=t,this.Ns=i,this.tg=r,this.Lm=c,this.Al=h};e.uY=i;var r=function(){function t(e,t){this.JH=e,this.Hi=t}return t.prototype.qM=function(t,i){var r=new e.h;this.Hi.D(t,r);var n=new e.h;return this.Hi.D(i,n),0!=(r=r.compare(n))?r:(t=this.Hi.Pa(t,this.JH))<(i=this.Hi.Pa(i,this.JH))?-1:t==i?0:1},t}(),n=function(e,t,i,r,n,s,o,a,l){this.tg=e,this.Ns=t,this.OA=i,this.UH=r,this.Ei=n,this.Al=s,this.Lm=o,this.VH=a,this.OT=l};e.tY=n,e.LK=function(){function t(){}return t.JK=function(r,n,s,o,a,l){if(n.B())r=new i(n,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),a.push(r);else if(s.B())r=new i(n,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),a.push(r);else{var c=new e.gd;if(c.Ib(n),c.Ib(s),e.Tk.V(c,o,l,!0),0==c.fd)r=new i(n.Ia(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),a.push(r);else{for(n=0,s=c.Gd(),o=c.ld;-1!=o;o=c.ue(o))for(l=c.Ob(o);-1!=l;l=c.Rb(l))for(var h=c.Xa(l),u=0,p=c.Ja(l);u<p;h=c.U(h),u++)c.Ra(h,s,n++);n=t.HM(s,c),t.cM(r,n,c,a)}}},t.HM=function(i,n){for(var s=n.fd,o=new e.ia(0),a=n.ld;-1!=a;a=n.ue(a))for(var l=n.Ob(a);-1!=l;l=n.Rb(l))for(var c=n.Xa(l),h=0,u=n.Ja(l);h<u;c=n.U(c),h++)o.add(c);var p=new r(i,n);o.Vd(0,s,(function(e,t){return p.qM(e,t)})),i=[];var d=[],f=n.Gd(),y=n.Gd();a=n.ld,l=n.ue(a),u=new e.h;var m=new e.h,g=o.get(0),v=n.bd(g),_=n.Qf(v);n.D(g,u);var b=1;for(c=0;b<s-1;){var w=!1;for(h=b;h<s;h++)if(h!=c){var M=o.get(h),T=n.bd(M),S=n.Qf(T);if(n.D(M,m),!u.qb(m))break;_==a&&S==l&&(w=t.uM(f,y,n,i,d,v,g,T,M))}if(w||c==b-1){if(w&&c==b-1&&b--,++c==s)break;g=o.get(c),v=n.bd(g),_=n.Qf(v),n.D(g,u)}w||(b=c+1)}for(s=[],a=n.ld;-1!=a;a=n.ue(a))for(l=n.Ob(a);-1!=l;l=n.Rb(l))for(o=n.Xa(l),h=0,u=n.Ja(l);h<u;o=n.U(o),h++){if(0<=(c=n.Pa(o,y)))for(;c<d.length&&d[c].tg==o;)s.push(d[c++]);if(0<=(c=n.Pa(o,f)))for(;c<i.length&&i[c].tg==o;)s.push(i[c++])}return n.Td(f),n.Td(y),s},t.uM=function(e,i,r,n,s,o,a,l,c){var h=r.rj(o),u=r.rj(l),p=r.Xa(o),d=r.Xa(l),f=r.Ma(a),y=r.Ma(c),m=!1,g=!1,v=!1,_=!1;return a!=p&&(c!=d&&(m=t.vM(e,r,n,o,f,l,y)),c!=u&&(g=t.wM(e,r,n,o,f,l,c))),a!=h&&(c!=d&&(v=t.xM(i,r,s,o,a,l,y,p)),c!=u&&(_=t.yM(i,r,s,o,a,l,c,p))),m&&g&&v?(e=n.length-1,2==s[_?s.length-2:s.length-1].Ei&&(n[e-1]=n[e],--n.length)):m&&g&&_&&2==s[s.length-1].Ei&&(s=n[n.length-1],--n.length,r.Pa(s.tg,e)==n.length&&r.Ra(s.tg,e,-1)),m||g||v||_},t.vM=function(t,i,r,s,o,a,l){var c=new e.yb,h=new e.yb,u=[0,0],p=[0,0],d=i.bc(o);return null==d&&(i.ed(o,c),d=c),null==(c=i.bc(l))&&(i.ed(l,h),c=h),2>(d=d.Ea(c,null,u,p,0))&&(s=new n(o,s,u[0],NaN,d,l,a,p[0],NaN),r.push(s),0>(s=i.Pa(o,t))&&i.Ra(o,t,r.length-1)),!0},t.wM=function(t,i,r,s,o,a,l){var c=new e.yb,h=new e.yb,u=[0,0],p=[0,0],d=i.bc(o);return null==d&&(i.ed(o,c),d=c),null==(c=i.bc(l))&&(i.ed(l,h),c=h),2>(d=d.Ea(c,null,u,p,0))&&(s=new n(o,s,u[0],NaN,d,l,a,p[0],NaN),r.push(s),0>(s=i.Pa(o,t))&&i.Ra(o,t,r.length-1),!0)},t.xM=function(t,i,r,s,o,a,l,c){var h=new e.yb,u=new e.yb,p=[0,0],d=[0,0],f=i.bc(o);return null==f&&(i.ed(o,h),f=h),null==(h=i.bc(l))&&(i.ed(l,u),h=u),2==(f=f.Ea(h,null,p,d,0))?(s=new n(o,s,p[0],p[1],f,l,a,d[0],d[1]),r.push(s),0>(s=i.Pa(o,t))&&i.Ra(o,t,r.length-1),!0):(u=!1,o==c&&(s=new n(o,s,p[0],NaN,f,l,a,d[0],NaN),r.push(s),0>(s=i.Pa(o,t))&&i.Ra(o,t,r.length-1),u=!0),u)},t.yM=function(t,i,r,s,o,a,l,c){var h=new e.yb,u=new e.yb,p=[0,0],d=[0,0],f=i.bc(o);return null==f&&(i.ed(o,h),f=h),null==(h=i.bc(l))&&(i.ed(l,u),h=u),2==(f=f.Ea(h,null,p,d,0))?(s=new n(o,s,p[0],p[1],f,l,a,d[0],d[1]),r.push(s),0>(s=i.Pa(o,t))&&i.Ra(o,t,r.length-1),!0):(u=!1,o==c&&(s=new n(o,s,p[0],NaN,f,l,a,d[0],NaN),r.push(s),0>(s=i.Pa(o,t))&&i.Ra(o,t,r.length-1),u=!0),u)},t.cM=function(r,n,s,o){var a=[];a[0]=new e.h,a[1]=new e.h,a[2]=new e.h,a[3]=new e.h;var l=new e.h,c=new e.h,h=new e.h,u=new e.h,p=null;null!=o&&(p=new e.ig).Or();var d=0,f=null,y=new e.yb;new e.yb;for(var m=s.Ob(s.ld);-1!=m;m=s.Rb(m)){for(var g=4,v=-1,_=-1,b=-1,w=-1,M=NaN,T=!0,S=!1,A=!0,E=!0,x=!0,I=0,C=m,k=0,N=s.Xa(m),L=s.Ja(m),O=0;O<L;N=s.U(N),O++){var R=s.bc(N);if(null==R){if(!s.ed(N,y))continue;R=y}-1==_&&(_=N);for(var P=0;d<n.length&&N==n[d].tg;){v=n[d].Ns;var D=n[d].tg,F=n[d].OA,j=n[d].Lm,Z=n[d].Al,z=n[d].VH;if(2==n[d].Ei){if(S||(C=v,_=D,k=F,b=j,w=Z,M=z,g=2,null!=o?f=new e.Ta:I=0,x=!1,E=!0),F=n[d].UH,z=n[d].OT,null!=o?(R.ah(P,n[d].UH,p),f.oc(p.get(),E)):I++,P=F,S=!0,E=T=!1,d+1==n.length||2!=n[d+1].Ei||n[d+1].tg==D&&n[d+1].OA!=P){if(null!=o){var U=new i(f,2,v,D,F,g,C,_,k,j,Z,z,b,w,M);o.push(U)}else null.add(I);C=v,_=D,k=F,b=j,w=Z,M=z,g=2,S=T=!1,E=x=!0}}else{var V=s.U(D);if(d<n.length-1&&n[d+1].tg==V&&n[d+1].Al==Z&&2==n[d+1].Ei)F!=P&&(x&&(null!=o?f=new e.Ta:I=0),T=0<d&&n[d-1].Ns==v?1==g?0:0==g?1:3:3,null!=o?(R.ah(P,F,p),f.oc(p.get(),E),U=new i(f,T,v,D,F,g,C,_,k,j,Z,z,b,w,M),o.push(U)):(I++,null.add(I)),P=F,C=v,_=D,k=F,b=j,w=Z,M=z,g=T,T=A=!1,E=x=!0);else if(!t.CM(r,s,n,d,l,c)){t.zM(s,n,d,m,N,h,u);var G=!1;if(V=!1,U=!0,!(l.qb(h)||c.qb(h)||l.qb(u)||c.qb(u))){a[0].L(l),a[1].L(c),a[2].L(h),a[3].L(u),a.sort(e.h.nu);var B=a[0],$=a[1],H=a[2],q=a[3];B.qb(l)?$.qb(c)?r?(V=G=!0,U=!1):G=!1:q.qb(c)?r?U=V=G=!0:G=!1:(G=!0,U=$.qb(h)):$.qb(l)?H.qb(c)?r?(V=G=!0,U=!1):G=!1:B.qb(c)?r?U=V=G=!0:G=!1:(G=!0,U=H.qb(h)):H.qb(l)?q.qb(c)?r?(V=G=!0,U=!1):G=!1:$.qb(c)?r?U=V=G=!0:G=!1:(G=!0,U=q.qb(h)):B.qb(c)?r?(V=G=!0,U=!1):G=!1:H.qb(c)?r?U=V=G=!0:G=!1:(G=!0,U=B.qb(h))}G&&(G=N==D,(F!=P||G&&0==P)&&(x&&(null!=o?f=new e.Ta:I=0),null!=o?(R.ah(P,F,p),f.oc(p.get(),E)):I++),U?1!=g?((F!=P||G&&0==P)&&(null!=o?(U=new i(f,1,v,D,F,g,C,_,k,j,Z,z,b,w,M),o.push(U)):null.add(I)),V?(d>=n.length-2||n[d+2].Ns!=v)&&(g=0):g=1):((F!=P||G&&0==P)&&(null!=o?(U=new i(f,3,v,D,F,g,C,_,k,j,Z,z,b,w,M),o.push(U)):null.add(I)),g=1):0!=g?((F!=P||G&&0==P)&&(null!=o?(U=new i(f,0,v,D,F,g,C,_,k,j,Z,z,b,w,M),o.push(U)):null.add(I)),V?(d>=n.length-2||n[d+2].Ns!=v)&&(g=1):g=0):((F!=P||G&&0==P)&&(null!=o?(U=new i(f,3,v,D,F,g,C,_,k,j,Z,z,b,w,M),o.push(U)):null.add(I)),g=0),(F!=P||G&&0==P)&&(P=F,C=v,_=D,k=F,b=j,w=Z,M=z,T=A=!1,E=x=!0))}}d++}1!=P&&(x&&(null!=o?f=new e.Ta:I=0),null!=o?(R.ah(P,1,p),f.oc(p.get(),E)):I++,E=x=!1,A=!0)}A&&(F=1,D=s.rj(m),D=s.Ma(D),Z=j=-1,z=NaN,T?null!=o?(U=new i(f,4,v,D,F,g,C,_,k,j,Z,z,b,w,M),o.push(U)):null.add(I):(T=1==g?0:0==g?1:3,null!=o?(U=new i(f,T,v,D,F,g,C,_,k,j,Z,z,b,w,M),o.push(U)):null.add(I)))}},t.CM=function(i,r,n,s,o,a){var l=n[s].VH;if(1==l)return t.AM(i,r,n,s,o,a);if(0==l)return t.BM(i,r,n,s,o,a);throw e.i.Qa()},t.AM=function(t,i,r,n,s,o){var a=new e.yb,l=r[n].tg,c=r[n].Lm,h=r[n].Al,u=-1,p=-1,d=-1,f=-1;if(!t&&0<n){var y=r[n-1];u=y.tg,p=y.Lm,d=y.Al,f=y.Ei}var m=-1,g=-1,v=-1,_=-1;n<r.length-1&&(m=(y=r[n+1]).tg,g=y.Lm,v=y.Al,_=y.Ei);var b=i.U(l);return y=i.U(h),t?n==r.length-1||m!=l||g!=c||v!=y||2==_?(null==(t=i.bc(h))&&(i.ed(h,a),t=a),o.L(t.kg()),s.mt(o),o.normalize(),s.normalize(),!1):(null==(t=i.bc(h))&&(i.ed(h,a),t=a),s.L(t.kg()),null==(t=i.bc(y))&&(i.ed(y,a),t=a),o.L(t.kg()),s.Sq(),o.normalize(),s.normalize(),!1):0<n&&u==l&&p==c&&d==y&&2==f||n<r.length-1&&m==b&&g==c&&v==y&&2==_?(null==(t=i.bc(h))&&(i.ed(h,a),t=a),o.L(t.kg()),s.mt(o),o.normalize(),s.normalize(),!1):!(n<r.length-1&&m==l&&g==c&&v==y&&(null==(t=i.bc(h))&&(i.ed(h,a),t=a),s.L(t.kg()),null==(t=i.bc(y))&&(i.ed(y,a),t=a),o.L(t.kg()),s.Sq(),o.normalize(),s.normalize(),1))},t.BM=function(t,i,r,n,s,o){var a=new e.yb,l=r[n].tg,c=r[n].Lm,h=r[n].Al,u=-1,p=-1,d=-1,f=-1;if(!t&&n<r.length-1){var y=r[n+1];u=y.tg,p=y.Lm,d=y.Al,f=y.Ei}var m=-1,g=-1,v=-1;y=-1,0<n&&(m=(y=r[n-1]).tg,g=y.Lm,v=y.Al,y=y.Ei);var _=i.U(l),b=i.Ma(h);return t?0!=n&&m==l&&g==c&&v==b&&2!=y||(null==(t=i.bc(h))&&(i.ed(h,a),t=a),o.L(t.kg()),s.mt(o),o.normalize(),s.normalize(),!1):!(0<n&&m==l&&g==c&&v==b&&2==y||n<r.length-1&&u==_&&p==c&&d==b&&2==f)||(null==(t=i.bc(h))&&(i.ed(h,a),t=a),o.L(t.kg()),s.mt(o),o.normalize(),s.normalize(),!1)},t.zM=function(t,i,r,n,s,o,a){var l=new e.yb,c=t.bc(s);if(null==c&&(t.ed(s,l),c=l),i=(r=i[r]).tg,r=r.OA,s=t.U(i),1==r)o.L(c.kg()),-1!=s&&s!=t.rj(n)?(null==(c=t.bc(s))&&(t.ed(s,l),c=l),a.L(c.kg()),null==(c=t.bc(i))&&t.ed(i,l)):a.L(o),o.Sq(),a.normalize(),o.normalize();else{if(0!=r)throw e.i.Qa();a.L(c.kg()),o.mt(a),a.normalize(),o.normalize()}},t}()}(Y||(Y={})),function(e){var t;(t=e.bM||(e.bM={}))[t.Linear=0]="Linear",t[t.Angular=1]="Angular",t[t.Area=2]="Area";var i=function(){function t(e,t,i){this.od=t,this.ai=i,this.vA=e}return t.prototype.Nb=function(e){return e instanceof t&&this.ai===e.ai},t.aG=function(e){return 0!==e.od?null:-1===e.vA?new t(-1,2,e.ai*e.ai):t.Zg(a[e.vA])},t.Zg=function(e){return void 0===(e=o[e])?null:e},t.ZO=function(e,i,r){var n=null;if(null!=r)try{"EPSG"===r.values[0]&&(n=t.Zg(parseInt(r.values[1])))}catch(e){}return null===n&&(n=new t(-1,e,i)),n},t.prototype.Ec=function(){return this.vA},t.prototype.CF=function(t){if(t.od!=this.od)throw e.i.Hb();return this.ai/t.ai},t.Nh=function(e,t,i){return t.CF(i)*e},t.XE=function(e,t,i,r,n){for(i=i.CF(r),r=0;r<t;r++)n[r]=e[r]*i},t}();e.Tc=i;for(var r=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2589998.4703195216,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988.110336,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3434528.1495040003,109458,3434290.937856,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1.244521604938272e-7,109465,1e-12,109466,1e-18],n=[1031,4.84813681109536e-9,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],s=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],o=[],a=[],l=0;l<r.length;l+=2)o[r[l]]=new i(r[l],2,r[l+1]);for(r=null,l=0;l<n.length;l+=2)o[n[l]]=new i(n[l],1,n[l+1]);for(n=null,l=0;l<s.length;l+=3)o[s[l]]=new i(s[l],0,s[l+1]),a[s[l]]=s[l+2];s=null}(Y||(Y={})),function(e){var t=function(){function e(){this.xb=this.pb=0}return e.prototype.set=function(e,t){void 0!==t?(this.pb=e,this.xb=t):"number"==typeof e?(this.pb=e,this.xb=0):(this.pb=e.pb,this.xb=e.xb)},e.prototype.value=function(){return this.pb},e.prototype.add=function(e){var t=this.pb+e.pb;e=this.xb+e.xb+2220446049250313e-31*Math.abs(t),this.pb=t,this.xb=e},e.prototype.kN=function(){var e=this.pb+1,t=this.xb+2220446049250313e-31*Math.abs(e);this.pb=e,this.xb=t},e.prototype.dN=function(e,t){this.pb=e.pb+t.pb,this.xb=e.xb+t.xb+2220446049250313e-31*Math.abs(this.pb)},e.prototype.sub=function(e){if("number"==typeof e){var t=this.pb-e;e=this.xb+2220446049250313e-31*Math.abs(t)}else t=this.pb-e.pb,e=this.xb+e.xb+2220446049250313e-31*Math.abs(t);this.pb=t,this.xb=e},e.prototype.Ag=function(e){var t=this.pb*e.pb;this.xb=this.xb*Math.abs(e.pb)+e.xb*Math.abs(this.pb)+this.xb*e.xb+2220446049250313e-31*Math.abs(t),this.pb=t},e.prototype.No=function(e){var t=this.pb*e;this.xb=this.xb*Math.abs(e)+2220446049250313e-31*Math.abs(t),this.pb=t},e.prototype.Kl=function(e,t){var i=Math.abs(e.pb)*Math.abs(t.pb);this.xb=e.xb*Math.abs(t.pb)+t.xb*Math.abs(e.pb)+e.xb*t.xb+2220446049250313e-31*Math.abs(i),this.pb=i},e.prototype.jm=function(e){var t=Math.abs(e.pb),i=this.pb/e.pb,r=(this.xb+Math.abs(i)*e.xb)/t;e.xb>.01*t&&(r*=1+(1+(e=e.xb/t))*e),this.pb=i,this.xb=r+2220446049250313e-31*Math.abs(i)},e.prototype.sqrt=function(){if(0<=this.pb){var e=Math.sqrt(this.pb),t=this.pb>10*this.xb?.5*this.xb/e:this.pb>this.xb?e-Math.sqrt(this.pb-this.xb):Math.max(e,Math.sqrt(this.pb+this.xb)-e);t+=2220446049250313e-31*Math.abs(e)}else this.pb<-1*this.xb?t=e=NaN:(e=0,t=Math.sqrt(this.xb));this.pb=e,this.xb=t},e.prototype.sin=function(e){var t=Math.sin(e.pb),i=Math.cos(e.pb);this.pb=t,t=Math.abs(t),this.xb=(Math.abs(i)+.5*t*e.xb)*e.xb+2220446049250313e-31*t},e.prototype.cos=function(e){var t=Math.sin(e.pb),i=Math.cos(e.pb);this.pb=i,i=Math.abs(i),this.xb=(Math.abs(t)+.5*i*e.xb)*e.xb+2220446049250313e-31*i},e.prototype.qg=function(){return Math.abs(this.pb)<=this.xb},e.prototype.ps=function(){return this.qg()&&0!=this.xb},e}();e.Wb=t}(Y||(Y={}));var ee=new Y.h,te=new Y.h,ie=new Y.h,re=new Y.h,ne=new Y.h;!function(e){var t,i;(i=t||(t={}))[i.closedPath=1]="closedPath",i[i.exteriorPath=2]="exteriorPath",i[i.ringAreaValid=4]="ringAreaValid";var r=function(){function t(e,t,i,r,n,s,o){void 0!==t?(this.ib=e,this.ck=t,this.bl=i,this.ii=r,this.ya=s,this.hA=o,this.ew=n):(this.ib=e.ib,this.ck=e.ck,this.bl=e.bl,this.ii=e.ii,this.ya=e.ya,this.hA=e.hA,this.ew=e.ew),this.bH=!0}return t.prototype.next=function(){return this.bH?(this.bH=!1,this.ii):-1!=this.ii?(this.ii=this.ib.U(this.ii),this.ya++,-1!=this.ii&&this.ii!=this.ew?this.ii:this.$T()):-1},t.prototype.$T=function(){for(this.bl=this.ib.Rb(this.bl),this.ya=0;-1!=this.ck;){for(;-1!=this.bl;this.bl=this.ib.Rb(this.bl))if(this.ew=this.ii=this.ib.Xa(this.bl),-1!=this.ii)return this.ii;if(this.ck=this.ib.ue(this.ck),-1==this.ck)break;this.hA&&!e.aa.Hc(this.ib.ic(this.ck))||(this.bl=this.ib.Ob(this.ck))}return-1},t.AP=function(e,i,r,n,s,o,a){return new t(e,i,r,n,s,o,a)},t}();e.zY=r,t=function(){function t(){this.jo=this.Am=this.wk=this.cd=this.Ck=this.vo=this.Oi=this.md=this.bi=this.Sg=this.We=this.Il=null,this.qw=this.ld=-1,this.fd=0,this.fA=!1,this.ht=this.it=this.vb=null}return t.prototype.Sh=function(e){return null!=this.We?this.We[e]:null},t.prototype.Xg=function(e,t){if(null==this.We){if(null==t)return;this.We=[];for(var i=0,r=this.vb.I();i<r;i++)this.We.push(null)}this.We[e]=t},t.prototype.bp=function(e,t){this.md.S(e,1,t)},t.prototype.ap=function(e,t){this.md.S(e,2,t)},t.prototype.VB=function(e,t){this.md.S(e,6,t)},t.prototype.Sp=function(e){return this.md.T(e,6)},t.prototype.gx=function(e,t){this.md.S(e,7,t)},t.prototype.qv=function(e){return this.md.T(e,0)},t.prototype.OJ=function(e,t){this.cd.S(e,1,t)},t.prototype.SJ=function(e,t){this.cd.S(e,0,t)},t.prototype.JF=function(e){return this.cd.T(e,7)},t.prototype.Zo=function(e,t){this.cd.S(e,3,t)},t.prototype.$o=function(e,t){this.cd.S(e,4,t)},t.prototype.uU=function(t){null==this.cd&&(this.cd=new e.$c(8));var i=this.cd.Ce();return this.cd.S(i,2,t),this.cd.S(i,5,0),this.cd.S(i,6,0),this.cd.S(i,7,i),i},t.prototype.OQ=function(e){this.cd.jd(e)},t.prototype.wU=function(t){null==this.md&&(this.md=new e.$c(8),this.td=new e.$c(5),this.Oi=new e.be(0),this.vo=new e.be(0));var i=this.md.Ce();return this.md.S(i,0,i),this.md.S(i,3,0),this.md.S(i,6,0),this.gx(i,t),i>=this.Oi.size&&(t=16>i?16:e.O.truncate(3*i/2),this.Oi.resize(t),this.vo.resize(t)),this.Oi.set(i,0),this.vo.set(i,0),i},t.prototype.sF=function(e){this.md.jd(e)},t.prototype.Vy=function(e){this.td.jd(e),this.fd--},t.prototype.oI=function(t){null==this.md&&(this.md=new e.$c(8),this.td=new e.$c(5),this.Oi=new e.be(0),this.vo=new e.be(0));var i=this.td.Ce(),r=0<=t?t:i;if(this.td.S(i,0,r),0>t){if(r>=this.vb.I()){if(t=16>r?16:e.O.truncate(3*r/2),this.vb.resize(t),null!=this.We)for(var n=0;n<t;n++)this.We.push(null);null!=this.Sg&&this.Sg.resize(t),this.it=this.vb.ub(0)}this.vb.Cb(r,-1e38,-1e38),null!=this.We&&(this.We[r]=null),null!=this.Sg&&this.Sg.write(r,1)}return this.td.S(i,4,2*r),this.fd++,i},t.prototype.wj=function(e,t,i){var r=-1!=t?this.Ma(t):this.rj(e),n=-1!=r?this.U(r):-1,s=this.oI(null==i?this.fd:-1),o=this.Ua(s);return null!=i&&this.vb.Ht(o,i),this.aj(s,e),this.Bc(s,n),this.Cc(s,r),-1!=n&&this.Cc(n,s),-1!=r&&this.Bc(r,s),i=this.dc(e),r=this.Xa(e),-1==t&&this.Wg(e,s),t==r&&this.Jf(e,s),i&&-1==n&&(this.Bc(s,s),this.Cc(s,s)),this.Vj(e,this.Ja(e)+1),e=this.Qf(e),this.Tj(e,this.I(e)+1),s},t.prototype.nm=function(){return null==this.jo&&(this.jo=new e.Sa(this.vb.description)),this.jo},t.prototype.Yo=function(e,t){this.cd.S(e,2,-134217729&this.cd.T(e,2)||(1==t?134217728:0))},t.prototype.In=function(e){return 134217728&this.cd.T(e,2)?1:0},t.prototype.hN=function(e){var t=this.Ig(e.getType(),e.description);return 1736==e.getType()&&this.Yo(t,e.In()),this.UD(t,e),t},t.prototype.iN=function(e){var t=this.Ig(e.getType(),e.description);return this.VD(t,e),t},t.prototype.XV=function(t,i){null==this.md&&(this.md=new e.$c(8),this.td=new e.$c(5),this.Oi=new e.be(0),this.vo=new e.be(0)),this.md.De(this.md.Hg+t),this.td.De(this.td.Hg+i),this.Oi.Jb(this.Oi.size+t),this.vo.Jb(this.vo.size+t)},t.prototype.UD=function(t,i){this.XV(i.da(),i.I()),this.Il.Fd(i,0,i.I()),this.it=this.vb.ub(0);for(var r=null!=this.We&&null!=i.Ve,n=0,s=i.da();n<s;n++)if(!(2>i.Ja(n))){var o=this.vf(t,-1);this.kn(o,i.dc(n));for(var a=i.Ba(n),l=i.Vc(n);a<l;a++){var c=this.wj(o,-1,null);if(r)if(c=this.Ua(c),1&i.ZF(a))this.Xg(c,null);else{var h=new e.ig;i.bc(a,h,!0),this.Xg(c,h.get())}}}},t.prototype.VD=function(e,t){this.Il.Fd(t,0,t.I()),this.it=this.vb.ub(0),e=this.vf(e,-1);var i=0;for(t=t.I();i<t;i++)this.wj(e,-1,null)},t.prototype.NX=function(t,i,r){var n=this.U(t);if(-1==n)throw e.i.Qa();for(var s=this.nm(),o=this.bd(t),a=0,l=i.ol(r);a<l;a++){var c=this.Ua(t),h=this.U(t),u=i.Vp(r,a);0==a&&(u.To(s),this.Dh(t,s)),322==u.getType()?this.Xg(c,null):this.Xg(c,e.aa.jg(u)),u.Po(s),a<l-1?t=this.wj(o,h,s):this.Dh(n,s)}},t.prototype.MX=function(t,i,r){var n=this.U(t);if(-1==n)throw e.i.Qa();for(var s=this.nm(),o=this.bd(t),a=0,l=i.ol(r);a<l;a++){var c=this.Ua(t),h=this.U(t),u=i.Vp(r,l-a-1);0==a&&(u.Po(s),this.Dh(t,s)),322==u.getType()?this.Xg(c,null):this.Xg(c,e.aa.jg(u)),u.To(s),a<l-1?t=this.wj(o,h,s):this.Dh(n,s)}},t.prototype.IF=function(){var t=new e.l;t.Oa();for(var i=this.Yq(),r=new e.h,n=!0,s=i.next();-1!=s;s=i.next())this.D(s,r),n?t.Zb(r.x,r.y):t.Lk(r.x,r.y),n=!1;return t},t.prototype.Ib=function(t){var i=t.getType();if(e.aa.Hc(i))return this.hN(t);if(550==i)return this.iN(t);throw e.i.Qa()},t.prototype.uN=function(t,i){var r=i.getType();if(e.aa.Hc(r))this.UD(t,i);else{if(550!=r)throw e.i.Qa();this.VD(t,i)}},t.prototype.mN=function(t,i){var r=this.Ig(1736,t.description);if(2>t.Ja(i))return r;this.Il.Fd(t,t.Ba(i),t.Vc(i)),this.it=this.vb.ub(0);var n=this.vf(r,-1);this.kn(n,t.dc(i)||!0);var s=null!=this.We&&null!=t.Ve,o=t.Ba(i);for(i=t.Vc(i);o<i;o++){var a=this.wj(n,-1,null);if(s)if(a=this.Ua(a),1&t.ZF(o))this.Xg(a,null);else{var l=new e.ig;t.bc(o,l,!0),this.Xg(a,l.get())}}return r},t.prototype.Ne=function(t){var i=this.ic(t),r=e.ZK.Ig(i,this.Il.description),n=this.I(t);if(0==n)return r;if(e.aa.Hc(i)){i=this.da(t);for(var s=e.Yc.Oh(i+1),o=e.Yc.Mr(i+1,0),a=r.description,l=0,c=a.Aa;l<c;l++){for(var h=a.kd(l),u=e.ra.Va(h),p=e.Yc.YE(h,n),d=this.vb.ub(h),f=0,y=0,m=0,g=this.Ob(t);-1!=g;g=this.Rb(g)){var v=0;this.dc(g)&&(v|=1),this.YS(g)&&(v|=4),0!=v&&o.zJ(y,v);var _=this.Ja(g);if(s.write(y++,m),m+=_,0==h){_=d;var b=p,w=new e.h;for(v=this.Xa(g);f<m;v=this.U(v),f++){var M=this.Ua(v);_.tc(2*M,w),b.Tt(2*f,w)}}else for(v=this.Xa(g);f<m;v=this.U(v),f++)for(M=this.Ua(v),b=0;b<u;b++)w=d.eg(M*u+b),p.pr(f*u+b,w)}r.hn(h,p),s.write(i,n)}r.PJ(o),r.QJ(s),r.Pc(16777215)}else if(550==i){for(a=r.description,r.resize(n),l=0,c=a.Aa;l<c;l++){for(h=a.kd(l),u=e.ra.Va(h),p=r.ub(h),d=this.vb.ub(h),f=0,g=this.Ob(t),_=this.Ja(g),v=this.Xa(g);f<_;v=this.U(v),f++)for(M=this.Ua(v),b=0;b<u;b++)w=d.eg(M*u+b),p.pr(f*u+b,w);r.hn(h,p)}r.Pc(16777215)}return r},t.prototype.BB=function(e){for(var t=this.Ob(e);-1!=t;t=this.Zq(t));t=this.PR(e);var i=this.ue(e);-1!=t?this.OJ(t,i):this.ld=i,-1!=i?this.SJ(i,t):this.qw=t,this.OQ(e)},t.prototype.Ig=function(t,i){return void 0===i?this.$E(t,e.ee.og()):this.$E(t,i)},t.prototype.$E=function(t,i){return t=this.uU(t),null==this.vb?this.vb=this.Il=new e.de(i):this.Il.Jl(i),this.ht=this.Il.description,this.fA=1<this.ht.Aa,-1==this.ld?this.ld=t:(this.SJ(t,this.qw),this.OJ(this.qw,t)),this.qw=t},t.prototype.ue=function(e){return this.cd.T(e,1)},t.prototype.PR=function(e){return this.cd.T(e,0)},t.prototype.ic=function(e){return 2147483647&this.cd.T(e,2)},t.prototype.HJ=function(t,i,r){i=this.wk[i],(t=this.JF(t))>=i.size&&i.resize(Math.max(e.O.truncate(1.25*t),16),-1),i.write(t,r)},t.prototype.KF=function(e,t){return(e=this.JF(e))<(t=this.wk[t]).size?t.read(e):-1},t.prototype.aF=function(){null==this.wk&&(this.wk=[]);for(var t=0;t<this.wk.length;t++)if(null==this.wk[t])return this.wk[t]=e.Yc.Oh(0),t;return this.wk.push(e.Yc.Oh(0)),this.wk.length-1},t.prototype.xW=function(e){this.wk[e]=null},t.prototype.Ob=function(e){return this.cd.T(e,3)},t.prototype.kv=function(e){return this.cd.T(e,4)},t.prototype.I=function(e){return this.cd.T(e,5)},t.prototype.da=function(e){return this.cd.T(e,6)},t.prototype.Gp=function(t,i,r){for(var n=0,s=this.ld;-1!=s;s=this.ue(s)){var o=this.ic(s);if(e.aa.Hc(o)&&(!r||1736==o)){o=1736==this.ic(s);for(var a=this.Ob(s);-1!=a;){for(var l=0,c=this.Xa(a);l<e.O.truncate(this.Ja(a)/2);){var h=this.U(c);if(-1==h)break;var u=this.Ua(c),p=this.Sh(u);null!=p?u=p.Qb():(p=this.Ua(h),u=this.vb.yr(u,p)),u<=t?(0==u?0==n&&(n=-1):n=1,h!=this.rj(a)&&(this.lC(h,c),this.pd(h,!0))):c=this.U(c),l++}for(l=this.Xa(a),c=this.dc(a)?l:this.rj(a);0<this.Ja(a);){if(-1==(h=this.Ma(c))){this.pd(c,!0),0==n&&(n=-1);break}var d=this.Ua(h);if(null!=(p=this.Sh(d))?u=p.Qb():(u=this.Ua(c),u=this.vb.yr(u,d)),u<=t)0==u?0==n&&(n=-1):n=1,this.lC(h,c),this.pd(h,!1),l==h&&(l=this.Xa(a));else if((c=this.Ma(c))==l)break}c=this.Ja(a),i&&(o?3>c:2>c)?(a=this.Zq(a),n=0<c?1:0==n?-1:n):a=this.Rb(a)}}}return n},t.prototype.lC=function(e,t){var i=this.Ua(e),r=this.Ua(t);if(null!=this.Sg&&(i=this.Sg.read(i),this.Sg.write(r,i)),null!=this.bi)for(r=0,i=this.bi.length;r<i;r++)if(null!=this.bi[r]){var n=this.Pa(e,r);-1!=n&&this.Ra(t,r,n)}},t.prototype.Ul=function(t,i,r){var n=0,s=this.U(t);if(-1==s)throw e.i.Qa();for(var o=this.Ua(t),a=this.Ua(s),l=this.Sh(o),c=null==l?this.vb.yr(o,a):l.Qb(),h=0;h<r;h++){var u=i[h];if(0<u&&1>u){var p=u;null!=l&&(p=0<c?l.Ux(u)/c:0),this.vb.kD(o,a,p,this.nm());var d=this.wj(this.bd(t),s,this.nm());if(n++,null!=l){var f=l.dl(0,u);p=this.Ua(this.Ma(d)),this.Xg(p,f),this.mf(d,f.wc()),h!=r-1&&1!=i[h+1]||(u=l.dl(u,1),this.Xg(p,u))}}}return n},t.prototype.LX=function(t,i,r){var n=0,s=this.U(t);if(-1==s)throw e.i.fa("internal error");var o=this.Ua(t),a=this.Ua(s),l=this.Sh(o),c=null==l?this.vb.yr(o,a):l.Qb(),h=0;t=this.bd(t);for(var u=0;u<r;u++){var p=i[u];if(h<p&&1>p){var d=p;if(null!=l&&(d=0<c?l.Ux(p)/c:0),this.vb.kD(o,a,d,this.nm()),d=this.yS(t,s,this.nm()),n++,null!=l){h=l.dl(h,p);var f=this.Ua(this.Ma(d));this.Xg(f,h),this.Cb(d,h.pa,h.la),u!=r-1&&1!=i[u+1]||(h=l.dl(p,1),d=this.Ua(d),this.Xg(d,h))}}h=p}return n},t.prototype.yS=function(e,t,i){var r=-1!=t?this.Ma(t):this.rj(e),n=-1!=r?this.U(r):-1,s=this.oI(null==i?this.fd:-1),o=this.Ua(s);return null!=i&&this.vb.Ht(o,i),this.aj(s,e),this.Bc(s,n),this.Cc(s,r),-1!=n&&this.Cc(n,s),-1!=r&&this.Bc(r,s),i=this.dc(e),r=this.Xa(e),-1==t&&this.Wg(e,s),t==r&&(i&&-1!=r||this.Jf(e,s)),i&&-1==n&&(this.Bc(s,s),this.Cc(s,s)),this.Vj(e,this.Ja(e)+1),e=this.Qf(e),this.Tj(e,this.I(e)+1),s},t.prototype.uE=function(t,i,r){var n=this.Ua(i),s=this.Ua(r);if(0>n||s>this.fd-1)throw e.i.N("invalid call");if(n>s&&!this.dc(t))throw e.i.N("cannot iterate across an open path");for(t=0;i!=r;i=this.U(i))n=this.Ua(i),null!=(s=this.Sh(n))?t+=s.Qb():(s=this.Ua(this.U(i)),t+=this.vb.yr(n,s));return t},t.prototype.Dh=function(e,t){var i=this.Ua(e);this.vb.Ht(i,t),null!=(i=this.Sh(i))&&i.setStart(t),-1!=(e=this.Ma(e))&&(e=this.Ua(e),null!=this.Sh(e)&&i.setEnd(t))},t.prototype.Vi=function(e,t){e=this.Ua(e),this.vb.ve(e,t)},t.prototype.mf=function(e,t){this.Cb(e,t.x,t.y)},t.prototype.Cb=function(e,t,i){var r=this.Ua(e);this.vb.Cb(r,t,i),null!=(r=this.Sh(r))&&r.ZB(t,i),-1!=(e=this.Ma(e))&&(e=this.Ua(e),null!=this.Sh(e)&&r.Ql(t,i))},t.prototype.D=function(e,t){this.vb.D(this.td.T(e,0),t)},t.prototype.Gc=function(e,t){this.vb.za[0].tc(2*this.td.T(e,0),t)},t.prototype.Na=function(t){var i=new e.h;return this.vb.D(this.td.T(t,0),i),i},t.prototype.dG=function(e,t){this.it.tc(2*e,t)},t.prototype.Uc=function(e,t,i){return this.vb.Uc(e,this.Ua(t),i)},t.prototype.setAttribute=function(e,t,i,r){this.vb.setAttribute(e,this.Ua(t),i,r)},t.prototype.Ua=function(e){return this.td.T(e,0)},t.prototype.ih=function(){var t=new e.h;return this.D(void 0,t),t.y},t.prototype.fq=function(e,t){e=this.Ua(e),t=this.Ua(t);var i=this.vb.za[0].o;return i[2*e]===i[2*t]&&i[2*e+1]===i[2*t+1]},t.prototype.Dv=function(e,t){e=this.Ua(e);var i=this.vb.za[0].o;return i[2*e]===t.x&&i[2*e+1]===t.y},t.prototype.vX=function(t,i){if(1>i&&(i=1),null==this.Sg){if(1==i)return;this.Sg=e.Yc.Dn(this.vb.I(),1)}(t=this.Ua(t))>=this.Sg.size&&this.Sg.resize(t+1,1),this.Sg.write(t,i)},t.prototype.cG=function(e){return e=this.Ua(e),null==this.Sg||e>=this.Sg.size?1:this.Sg.read(e)},t.prototype.Ra=function(e,t,i){t=this.bi[t],e=this.Ua(e),t.size<this.vb.I()&&t.resize(this.vb.I(),-1),t.write(e,i)},t.prototype.Pa=function(e,t){return(e=this.Ua(e))<(t=this.bi[t]).size?t.read(e):-1},t.prototype.Gd=function(){null==this.bi&&(this.bi=[]);for(var t=0;t<this.bi.length;t++)if(null==this.bi[t])return this.bi[t]=e.Yc.Oh(0,-1),t;return this.bi.push(e.Yc.Oh(0,-1)),this.bi.length-1},t.prototype.Td=function(e){this.bi[e]=null},t.prototype.bc=function(e){return null!=this.We?(e=this.Ua(e),this.We[e]):null},t.prototype.ed=function(t,i){var r=this.td.T(t,2);if(-1==r)return!1;if(this.fA){var n=new e.Sa;this.Vi(t,n),i.setStart(n),this.Vi(r,n),i.setEnd(n)}else this.vb.Gc(this.td.T(t,0),ee),i.em(0,ee),this.vb.Gc(this.td.T(r,0),ee),i.em(1,ee);return!0},t.prototype.mW=function(t,i,r){if(this.fA){var n=new e.Sa;this.Vi(t,n),r.setStart(n),this.Vi(i,n),r.setEnd(n)}else this.vb.Gc(t,ee),r.em(0,ee),this.vb.Gc(i,ee),r.em(1,ee)},t.prototype.vf=function(t,i){if(-1!=i){if(t!=this.Qf(i))throw e.i.Qa();var r=this.cs(i)}else r=this.kv(t);var n=this.wU(t);return-1!=i&&this.bp(i,n),this.ap(n,i),this.bp(n,r),-1!=r?this.ap(r,n):this.Zo(t,n),-1==i&&this.$o(t,n),this.Rl(t,this.da(t)+1),n},t.prototype.nG=function(e,t,i,r){e=this.vf(e,-1);for(var n=0,s=t,o=!1;s==i&&(o=!0),this.aj(s,e),n++,(s=this.U(s))!=t;);return this.kn(e,!0),this.Vj(e,n),o&&(t=i),this.Jf(e,t),this.Wg(e,this.Ma(t)),this.cp(e,!1),null!=r&&(r[0]=o),e},t.prototype.Zq=function(e){var t=this.cs(e),i=this.Rb(e),r=this.Qf(e);return-1!=t?this.ap(t,i):this.Zo(r,i),-1!=i?this.bp(i,t):this.$o(r,t),this.AO(e),this.Rl(r,this.da(r)-1),this.sF(e),i},t.prototype.AO=function(e){var t=this.Xa(e);if(-1!=t){for(var i=0,r=this.Ja(e);i<r;i++){var n=t;t=this.U(t),this.Vy(n)}t=this.Qf(e),this.Tj(t,this.I(t)-this.Ja(e))}this.Vj(e,0)},t.prototype.Rb=function(e){return this.md.T(e,2)},t.prototype.cs=function(e){return this.md.T(e,1)},t.prototype.Ja=function(e){return this.md.T(e,3)},t.prototype.dc=function(e){return!!(1&this.Sp(e))},t.prototype.kn=function(e,t){if(this.dc(e)!=t){if(0<this.Ja(e)){var i=this.Xa(e),r=this.rj(e);t?(this.Bc(r,i),this.Cc(i,r),i=this.Ua(r)):(this.Bc(r,-1),this.Cc(i,-1),i=this.Ua(r)),this.Xg(i,null)}this.VB(e,(1|this.Sp(e))-1|(t?1:0))}},t.prototype.Qf=function(e){return this.md.T(e,7)},t.prototype.YS=function(e){return!!(2&this.Sp(e))},t.prototype.PB=function(e,t){this.VB(e,(2|this.Sp(e))-2|(t?2:0))},t.prototype.wz=function(t){if(this.cT(t))return this.Oi.get(this.qv(t));var i=new e.yb,r=this.Xa(t);if(-1==r)return 0;var n=new e.h;this.D(r,n);for(var s=0,o=0,a=this.Ja(t);o<a;o++,r=this.U(r)){var l=this.bc(r);if(null==l){if(!this.ed(r,i))continue;l=i}s+=l.Tx(n.x,n.y)}return this.cp(t,!0),this.Oi.set(this.qv(t),s),s},t.prototype.gr=function(e,t,i){t=this.Ck[t],e=this.qv(e),t.size<this.Oi.size&&t.resize(this.Oi.size,-1),t.write(e,i)},t.prototype.sj=function(e,t){return(e=this.qv(e))<(t=this.Ck[t]).size?t.read(e):-1},t.prototype.Ky=function(){null==this.Ck&&(this.Ck=[]);for(var t=0;t<this.Ck.length;t++)if(null==this.Ck[t])return this.Ck[t]=e.Yc.Oh(0),t;return this.Ck.push(e.Yc.Oh(0)),this.Ck.length-1},t.prototype.CB=function(e){this.Ck[e]=null},t.prototype.ZT=function(t,i,r){if(-1==r)throw e.i.N();if(i!=r){var n=this.Rb(r),s=this.cs(r),o=this.Qf(r);-1==s?this.Zo(o,n):this.ap(s,n),-1==n?this.$o(o,s):this.bp(n,s),this.Tj(o,this.I(o)-this.Ja(r)),this.Rl(o,this.da(o)-1),s=-1==i?this.kv(t):this.cs(i),this.bp(r,s),this.ap(r,i),-1==i?this.$o(t,r):this.bp(i,r),-1==s?this.Zo(t,r):this.ap(s,r),this.Tj(t,this.I(t)+this.Ja(r)),this.Rl(t,this.da(t)+1),this.gx(r,t)}},t.prototype.ij=function(e,t){this.vb.ve(this.Ua(t),this.nm()),this.wj(e,-1,this.nm())},t.prototype.pd=function(t,i){var r=this.bd(t),n=this.Ma(t),s=this.U(t);-1!=n&&this.Bc(n,s);var o=this.Ja(r);if(t==this.Xa(r)&&this.Jf(r,1<o?s:-1),-1!=s&&this.Cc(s,n),t==this.rj(r)&&this.Wg(r,1<o?n:-1),-1!=n&&-1!=s){n=this.Ua(n);var a=this.Ua(s);i?null!=(i=this.Sh(n))&&(n=new e.h,this.vb.D(a,n),i.Qc(n)):(a=this.Ua(t),i=this.Sh(a),this.Xg(n,i),null!=i&&(n=this.vb.Na(n),i.Dc(n)))}return this.Vj(r,o-1),r=this.Qf(r),this.Tj(r,this.I(r)-1),this.Vy(t),s},t.prototype.Xa=function(e){return this.md.T(e,4)},t.prototype.rj=function(e){return this.md.T(e,5)},t.prototype.U=function(e){return this.td.T(e,2)},t.prototype.Ma=function(e){return this.td.T(e,1)},t.prototype.bd=function(e){return this.td.T(e,3)},t.prototype.fc=function(e,t){return this.wj(e,-1,t)},t.prototype.Yq=function(t){if(void 0===t)return this.Yq(!1);if(t instanceof r)return new r(t);var i,n=-1,s=-1,o=-1,a=0,l=!1;for(i=this.ld;-1!=i;i=this.ue(i))if(!t||e.aa.Hc(this.ic(i))){for(n=this.Ob(i);-1!=n;n=this.Rb(n))if(o=s=this.Xa(n),a=0,-1!=s){l=!0;break}if(l)break}return r.AP(this,i,n,s,o,a,t)},t.prototype.Oc=function(e){if(this.Il.Oc(e),null!=this.We)for(var t=0,i=this.We.length;t<i;t++)null!=this.We[t]&&this.We[t].Oc(e)},t.prototype.jr=function(e,t,i,r){r?this.NX(e,t,i):this.MX(e,t,i)},t.prototype.Cc=function(e,t){this.td.S(e,1,t)},t.prototype.Bc=function(e,t){this.td.S(e,2,t)},t.prototype.aj=function(e,t){this.td.S(e,3,t)},t.prototype.Vj=function(e,t){this.md.S(e,3,t)},t.prototype.Jf=function(e,t){this.md.S(e,4,t)},t.prototype.Wg=function(e,t){this.md.S(e,5,t)},t.prototype.Rl=function(e,t){this.cd.S(e,6,t)},t.prototype.Tj=function(e,t){this.cd.S(e,5,t)},t.prototype.pJ=function(e){var t=e;do{var i=this.U(t);this.Bc(t,this.Ma(t)),this.Cc(t,i),t=i}while(t!=e)},t.prototype.bC=function(e){this.fd=e},t.prototype.$q=function(e){var t=this.cs(e),i=this.Rb(e),r=this.Qf(e);-1!=t?this.ap(t,i):this.Zo(r,i),-1!=i?this.bp(i,t):this.$o(r,t),this.Jf(e,-1),this.Wg(e,-1),this.sF(e)},t.prototype.mi=function(t,i){var r=this.Ma(t),n=this.U(t);if(-1!=r&&this.Bc(r,n),-1!=n&&this.Cc(n,r),-1!=r&&-1!=n)if(r=this.Ua(r),n=this.Ua(n),i){if(null!=(i=this.Sh(r))){var s=new e.h;this.vb.D(n,s),i.Qc(s)}}else i=this.Ua(t),i=this.Sh(i),this.Xg(r,i),null!=i&&(s=new e.h,this.vb.D(r,s),i.Dc(s));this.Vy(t)},t.prototype.cT=function(e){return!!(4&this.Sp(e))},t.prototype.cp=function(e,t){this.VB(e,(4|this.Sp(e))-4|(t?4:0))},t.prototype.nx=function(e,t){var i=this.td.o;this.vb.mc();var r=this.vb.za[0].o;e.Vd(0,t,(function(e,t){var n=i[5*e];e=i[5*t],t=r[2*n],n=r[2*n+1];var s=r[2*e];return n<(e=r[2*e+1])?-1:n>e?1:t<s?-1:t>s?1:0}))},t.prototype.jS=function(){for(var t=this.ld;-1!=t;t=this.ue(t))if(!e.aa.Hc(this.ic(t)))return!0;return!1},t.prototype.hC=function(e,t){for(var i=this.Ob(e),r=this.Ob(t),n=this.kv(e),s=this.kv(t),o=this.Ob(e);-1!=o;o=this.Rb(o))this.gx(o,t);for(o=this.Ob(t);-1!=o;o=this.Rb(o))this.gx(o,e);this.Zo(e,r),this.Zo(t,i),this.$o(e,s),this.$o(t,n),i=this.I(e),r=this.da(e),n=this.da(t),this.Tj(e,this.I(t)),this.Tj(t,i),this.Rl(e,n),this.Rl(t,r),i=this.cd.T(e,2),this.cd.S(e,2,this.cd.T(t,2)),this.cd.S(t,2,i)},t}(),e.gd=t}(Y||(Y={})),function(e){var t=function(t){function i(i,r,n,s){var o=t.call(this)||this;return o.$=new e.l,void 0===i?o.UE():"number"==typeof i?o.VO(i,r,n,s):i instanceof e.Sa?void 0!==r?o.Qu(i,r,n):o.WO(i):i instanceof e.ra?void 0!==r?o.YO(i,r):o.XO(i):i instanceof e.l?o.UO(i):o.UE(),o}return Q(i,t),i.prototype.Qu=function(t,i,r){this.description=e.ee.og(),this.$.Oa(),t.B()||this.tu(t,i,r)},i.prototype.UO=function(t){this.description=e.ee.og(),this.$.K(t),this.$.normalize()},i.prototype.XO=function(t){if(null==t)throw e.i.N();this.description=t,this.$.Oa()},i.prototype.YO=function(t,i){if(null==t)throw e.i.N();this.description=t,this.$.K(i),this.$.normalize()},i.prototype.UE=function(){this.description=e.ee.og(),this.$.Oa()},i.prototype.WO=function(t){this.description=e.ee.og(),this.$.Oa(),t.B()||this.tu(t)},i.prototype.VO=function(t,i,r,n){this.description=e.ee.og(),this.K(t,i,r,n)},i.prototype.K=function(e,t,i,r){if(this.vc(),"number"==typeof e)this.$.K(e,t,i,r);else for(this.Oa(),t=0,i=e.length;t<i;t++)this.Zb(e[t])},i.prototype.Xo=function(t){if(this.vc(),!t.fT())throw e.i.N();this.$.K(t)},i.prototype.Oa=function(){this.vc(),this.$.Oa()},i.prototype.B=function(){return this.$.B()},i.prototype.R=function(){return this.$.R()},i.prototype.ca=function(){return this.$.ca()},i.prototype.gk=function(){return this.$.gk()},i.prototype.Jp=function(){return this.$.Jp()},i.prototype.Ip=function(){return this.$.sf()},i.prototype.Zb=function(t){if(t instanceof e.h)this.vc(),this.$.Zb(t);else if(t instanceof e.l)this.vc(),this.$.Zb(t);else if(t instanceof e.Sa){if(this.vc(),!t.Ac()){var r=t.description;if(this.description!=r&&this.Jl(r),this.B())this.tu(t);else{this.$.Zb(t.D());for(var n=1,s=r.Aa;n<s;n++)for(var o=r.Ed(n),a=e.ra.Va(o),l=0;l<a;l++){var c=t.Uc(o,l),h=this.Tg(o,l);h.Zb(c),this.setInterval(o,l,h)}}}}else if(t instanceof i&&!t.B())for((r=t.description)!=this.description&&this.Jl(r),this.$.Zb(t.$),n=1,s=r.Aa;n<s;n++)for(o=r.kd(n),a=e.ra.Va(o),l=0;l<a;l++)c=t.Tg(o,l),(h=this.Tg(o,l)).Zb(c),this.setInterval(o,l,h)},i.prototype.tu=function(t,i,r){if(void 0!==i){this.$.K(t.D(),i,r),r=1;for(var n=(i=t.description).Aa;r<n;r++)for(var s=i.Ed(r),o=e.ra.Va(s),a=0;a<o;a++){var l=t.Uc(s,a);this.setInterval(s,a,l,l)}}else for(this.$.K(t.ka[0],t.ka[1]),r=1,n=(i=t.description).Aa;r<n;r++)for(s=i.Ed(r),o=e.ra.Va(s),a=0;a<o;a++)l=t.Uc(s,a),this.setInterval(s,a,l,l)},i.prototype.setInterval=function(t,i,r,n){if(r="number"==typeof r?new e.Nc(r,n):r,this.vc(),0==t)if(0==i)this.$.v=r.oa,this.$.C=r.va;else{if(1!=i)throw e.i.ce();this.$.G=r.oa,this.$.H=r.va}else this.vD(0,t,i,r.oa),this.vD(1,t,i,r.va)},i.prototype.W=function(e,t){this.vc(),this.$.W(e,t)},i.prototype.Oc=function(t){if(t instanceof e.Dd)this.vc(),t.mC(this.$);else if(this.vc(),!this.$.B()){var i=new e.OK;this.Qo(i),i.XS()?i.Oa():t.mC(i)}},i.prototype.copyTo=function(t){if(t.getType()!=this.getType())throw e.i.N();if(t.vc(),t.description=this.description,t.$.K(this.$),t.ka=null,null!=this.ka){t.ou();for(var i=0;i<2*(this.description.Ae.length-2);i++)t.ka[i]=this.ka[i]}},i.prototype.Ia=function(){return new i(this.description)},i.prototype.Ke=function(){return this.$.wF()},i.prototype.Qb=function(){return this.$.yR()},i.prototype.getType=function(){return 197},i.prototype.Db=function(){return 2},i.prototype.bn=function(e){this.copyTo(e)},i.prototype.A=function(e){e.v=this.$.v,e.G=this.$.G,e.C=this.$.C,e.H=this.$.H},i.prototype.Qo=function(e){e.v=this.$.v,e.G=this.$.G,e.C=this.$.C,e.H=this.$.H,e.K(this.$.v,this.$.G,this.Od(0,1,0),this.$.C,this.$.H,this.Od(1,1,0))},i.prototype.Tg=function(t,i){var r=new e.Nc;return r.K(this.Od(0,t,i),this.Od(1,t,i)),r},i.prototype.Hf=function(t,i){i.Nf(this.description);var r=this.description.Aa-1;switch(t){case 0:for(t=0;t<r;t++)for(var n=this.description.kd(t),s=e.ra.Va(n),o=0;o<s;o++)i.setAttribute(n,o,this.Od(0,n,o));i.Cb(this.$.v,this.$.G);break;case 1:for(t=0;t<r;t++)for(n=this.description.kd(t),s=e.ra.Va(n),o=0;o<s;o++)i.setAttribute(n,o,this.Od(1,n,o));i.Cb(this.$.v,this.$.H);break;case 2:for(t=0;t<r;t++)for(n=this.description.kd(t),s=e.ra.Va(n),o=0;o<s;o++)i.setAttribute(n,o,this.Od(0,n,o));i.Cb(this.$.C,this.$.H);break;case 3:for(t=0;t<r;t++)for(n=this.description.kd(t),s=e.ra.Va(n),o=0;o<s;o++)i.setAttribute(n,o,this.Od(1,n,o));i.Cb(this.$.C,this.$.G);break;default:throw e.i.ce()}},i.prototype.mB=function(e,t){e=this.$.mB(e),t.ma(e.x,e.y)},i.prototype.kR=function(e,t){return t*(e.Oq-2)},i.prototype.xF=function(t,i,r){if(this.$.B())throw e.i.fa("empty geometry");if(0==i)return 0!=t?0!=r?this.$.H:this.$.C:0!=r?this.$.G:this.$.v;if(r>=e.ra.Va(i))throw e.i.N();var n=this.description.Pf(i);return this.ou(),0<=n?this.ka[this.kR(this.description,t)+this.description.LR(n)-2+r]:e.ra.se(i)},i.prototype.ou=function(){if(this.vc(),null==this.ka&&2<this.description.Ae.length){this.ka=[];for(var t=i.Gg(this.description,0),r=i.Gg(this.description,1),n=0,s=1,o=this.description.Aa;s<o;s++){var a=this.description.kd(s),l=e.ra.Va(a);a=e.ra.se(a);for(var c=0;c<l;c++)this.ka[t+n]=a,this.ka[r+n]=a,n++}}},i.prototype.sn=function(t){if(null!=this.ka)if(2<t.Ae.length){for(var r=e.ee.Iw(t,this.description),n=[],s=i.Gg(this.description,0),o=i.Gg(this.description,1),a=i.Gg(t,0),l=i.Gg(t,1),c=0,h=1,u=t.Aa;h<u;h++){var p=t.kd(h),d=e.ra.Va(p);if(-1==r[h]){var f=e.ra.se(p);for(p=0;p<d;p++)n[a+c]=f,n[l+c]=f,c++}else for(f=this.description.$j(r[h])-2,p=0;p<d;p++)n[a+c]=this.ka[s+f],n[l+c]=this.ka[o+f],c++,f++}this.ka=n}else this.ka=null;this.description=t},i.prototype.Od=function(t,r,n){if(this.$.B())throw e.i.fa("This operation was performed on an Empty Geometry.");if(0==r)return 0!=t?0!=n?this.$.H:this.$.C:0!=n?this.$.G:this.$.v;if(n>=e.ra.Va(r))throw e.i.ce();var s=this.description.Pf(r);return 0<=s?(this.ou(),this.ka[i.Gg(this.description,t)+this.description.$j(s)-2+n]):e.ra.se(r)},i.prototype.vD=function(t,r,n,s){if(this.vc(),0==r)0!=t?0!=n?this.$.H=s:this.$.C=s:0!=n?this.$.G=s:this.$.v=s;else{if(n>=e.ra.Va(r))throw e.i.ce();if(!this.hasAttribute(r)){if(e.ra.DG(r,s))return;this.re(r)}r=this.description.Pf(r),this.ou(),this.ka[i.Gg(this.description,t)+this.description.$j(r)-2+n]=s}},i.Gg=function(e,t){return t*(e.Ae.length-2)},i.prototype.Ea=function(t){this.vc();var i=new e.l;return t.A(i),this.$.Ea(i)},i.prototype.isIntersecting=function(t){return t instanceof e.l?this.$.isIntersecting(t):this.$.isIntersecting(t.$)},i.prototype.Ju=function(e,t){this.vc(),e.B()?this.Oa():void 0!==t?this.tu(e,t):this.$.Ju(e.Lg(),e.ih())},i.prototype.offset=function(e,t){this.vc(),this.$.offset(e,t)},i.prototype.normalize=function(){this.vc(),this.$.normalize()},i.prototype.sf=function(t){if(void 0===t){if(t=new e.Sa(this.description),this.B())return t;for(i=this.description.Aa,r=1;r<i;r++)for(n=this.description.Ed(r),s=e.ra.Va(n),o=0;o<s;o++)a=.5*(this.Od(0,n,o)+this.Od(1,n,o)),t.setAttribute(n,o,a);return t.Cb(this.$.gk(),this.$.Jp()),t}if(t.Nf(this.description),this.B())t.Oa();else{for(var i=this.description.Aa,r=1;r<i;r++)for(var n=this.description.kd(r),s=e.ra.Va(n),o=0;o<s;o++){var a=.5*(this.xF(0,n,o)+this.xF(1,n,o));t.setAttribute(n,o,a)}t.Cb(this.$.sf())}},i.prototype.mz=function(){return new e.Sa(this.$.mz())},i.prototype.contains=function(t){return t instanceof e.Sa?!t.B()&&this.$.contains(t.Lg(),t.ih()):this.$.contains(t.$)},i.prototype.dP=function(e){return this.$.contains(e)},i.prototype.Nb=function(e){if(e==this)return!0;if(!(e instanceof i)||this.description!=e.description)return!1;if(this.B())return!!e.B();if(!this.$.Nb(e.$))return!1;for(var t=0,r=2*(this.description.Ae.length-2);t<r;t++)if(this.ka[t]!=e.ka[t])return!1;return!0},i.prototype.cc=function(){var t=this.description.cc();if(t=e.O.Th(t,this.$.cc()),!this.B()&&null!=this.ka)for(var i=0,r=2*(this.description.Ae.length-2);i<r;i++)t=e.O.Th(t,this.ka[i]);return t},i.prototype.es=function(){return this.$.v},i.prototype.gs=function(){return this.$.G},i.prototype.ds=function(){return this.$.C},i.prototype.fs=function(){return this.$.H},i.prototype.mg=function(){return e.pi.gm(this,null)},i.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.$.v+", "+this.$.G+", "+this.$.C+", "+this.$.H+"]"},i}(e.aa);e.Fh=t}(Y||(Y={})),function(e){var t=function(){function t(e,t,i,r){void 0===e?this.Oa():(this.v=e,this.G=t,this.C=i,this.H=r)}return t.construct=function(e,i,r,n){var s=new t;return s.v=e,s.G=i,s.C=r,s.H=n,s},t.prototype.K=function(i,r,n,s){"number"==typeof i?void 0!==n?(this.v=i,this.G=r,this.C=n,this.H=s,this.normalize()):(this.v=i,this.G=r,this.C=i,this.H=r):i instanceof e.h?void 0!==r?(this.v=i.x-.5*r,this.C=this.v+r,this.G=i.y-.5*n,this.H=this.G+n,this.normalize()):(this.v=i.x,this.G=i.y,this.C=i.x,this.H=i.y):i instanceof t?this.K(i.v,i.G,i.C,i.H):i instanceof e.Nc&&(i.B()||r.B()?this.Oa():(this.v=i.oa,this.C=i.va,this.G=r.oa,this.H=r.va))},t.prototype.Zw=function(e,t){if(void 0!==t)if(0==t)this.Oa();else{this.v=e[0].x,this.G=e[0].y,this.C=this.v,this.H=this.G;for(var i=1;i<t;i++){var r=e[i];r.x<this.v?this.v=r.x:r.x>this.C&&(this.C=r.x),r.y<this.G?this.G=r.y:r.y>this.H&&(this.H=r.y)}}else if(null==e||0==e.length)this.Oa();else for(r=e[0],this.K(r.x,r.y),i=1;i<e.length;i++)t=e[i],this.Lk(t.x,t.y)},t.prototype.Oa=function(){this.H=this.C=this.G=this.v=NaN},t.prototype.B=function(){return isNaN(this.v)},t.prototype.Zb=function(i,r){"number"==typeof i?this.B()?(this.v=i,this.G=r,this.C=i,this.H=r):(this.v>i?this.v=i:this.C<i&&(this.C=i),this.G>r?this.G=r:this.H<r&&(this.H=r)):i instanceof e.h||i instanceof e.Nd?this.Zb(i.x,i.y):i instanceof t&&!i.B()&&(this.Zb(i.v,i.G),this.Zb(i.C,i.H))},t.prototype.Lk=function(e,t){this.v>e?this.v=e:this.C<e&&(this.C=e),this.G>t?this.G=t:this.H<t&&(this.H=t)},t.prototype.W=function(e,t){this.B()||(this.v-=e,this.C+=e,this.G-=t,this.H+=t,(this.v>this.C||this.G>this.H)&&this.Oa())},t.prototype.scale=function(e){0>e&&this.Oa(),this.B()||(this.v*=e,this.C*=e,this.G*=e,this.H*=e)},t.prototype.zoom=function(e,t){this.B()||this.K(this.sf(),e*this.R(),t*this.ca())},t.prototype.isIntersecting=function(e){return!this.B()&&!e.B()&&(this.v<=e.v?this.C>=e.v:e.C>=this.v)&&(this.G<=e.G?this.H>=e.G:e.H>=this.G)},t.prototype.HG=function(e){return(this.v<=e.v?this.C>=e.v:e.C>=this.v)&&(this.G<=e.G?this.H>=e.G:e.H>=this.G)},t.prototype.Ea=function(e){return!this.B()&&!e.B()&&(e.v>this.v&&(this.v=e.v),e.C<this.C&&(this.C=e.C),e.G>this.G&&(this.G=e.G),e.H<this.H&&(this.H=e.H),(e=this.v<=this.C&&this.G<=this.H)||this.Oa(),e)},t.prototype.mB=function(t){switch(t){case 0:return e.h.construct(this.v,this.G);case 1:return e.h.construct(this.v,this.H);case 2:return e.h.construct(this.C,this.H);case 3:return e.h.construct(this.C,this.G);default:throw e.i.ce()}},t.prototype.nB=function(t){if(null==t||4>t.length)throw e.i.N();null!=t[0]?t[0].ma(this.v,this.G):t[0]=e.h.construct(this.v,this.G),null!=t[1]?t[1].ma(this.v,this.H):t[1]=e.h.construct(this.v,this.H),null!=t[2]?t[2].ma(this.C,this.H):t[2]=e.h.construct(this.C,this.H),null!=t[3]?t[3].ma(this.C,this.G):t[3]=e.h.construct(this.C,this.G)},t.prototype.wF=function(){return this.B()?0:this.R()*this.ca()},t.prototype.yR=function(){return this.B()?0:2*(this.R()+this.ca())},t.prototype.gk=function(){return(this.C+this.v)/2},t.prototype.Jp=function(){return(this.H+this.G)/2},t.prototype.R=function(){return this.C-this.v},t.prototype.ca=function(){return this.H-this.G},t.prototype.move=function(e,t){this.B()||(this.v+=e,this.G+=t,this.C+=e,this.H+=t)},t.prototype.Ju=function(t,i){if(void 0!==i)this.move(t-this.gk(),i-this.Jp());else if(t instanceof e.h)this.Ju(t.x,t.y);else{if(!(t instanceof e.Sa))throw e.i.N();i=(this.C-this.v)/2;var r=(this.H-this.G)/2;this.v=t.Lg()-i,this.C=t.Lg()+i,this.G=t.ih()-r,this.H=t.ih()+r}},t.prototype.offset=function(e,t){this.v+=e,this.C+=e,this.G+=t,this.H+=t},t.prototype.normalize=function(){if(!this.B()){var e=Math.min(this.v,this.C),t=Math.max(this.v,this.C);this.v=e,this.C=t,e=Math.min(this.G,this.H),t=Math.max(this.G,this.H),this.G=e,this.H=t}},t.prototype.dn=function(e){e.ma(this.v,this.G)},t.prototype.$I=function(e){e.ma(this.C,this.G)},t.prototype.cJ=function(e){e.ma(this.v,this.H)},t.prototype.en=function(e){e.ma(this.C,this.H)},t.prototype.fT=function(){return this.B()||this.v<=this.C&&this.G<=this.H},t.prototype.sf=function(){return e.h.construct((this.C+this.v)/2,(this.H+this.G)/2)},t.prototype.mz=function(){return e.h.construct(this.v,this.G)},t.prototype.contains=function(i,r){if(void 0!==r)return i>=this.v&&i<=this.C&&r>=this.G&&r<=this.H;if(i instanceof e.Sa)return this.contains(i.Lg(),i.ih());if(i instanceof e.h)return this.contains(i.x,i.y);if(i instanceof t)return i.v>=this.v&&i.C<=this.C&&i.G>=this.G&&i.H<=this.H;throw e.i.N()},t.prototype.hm=function(i,r){if(void 0!==r)return i>this.v&&i<this.C&&r>this.G&&r<this.H;if(i instanceof e.h)return this.hm(i.x,i.y);if(i instanceof t)return i.v>this.v&&i.C<this.C&&i.G>this.G&&i.H<this.H;throw e.i.N()},t.prototype.Nb=function(e){return e==this||e instanceof t&&(!(!this.B()||!e.B())||this.v==e.v&&this.G==e.G&&this.C==e.C&&this.H==e.H)},t.prototype.cc=function(){var t=this.v;t=e.O.truncate(t^t>>>32);var i=e.O.Th(t);return t=this.C,t=e.O.truncate(t^t>>>32),i=e.O.Th(t,i),t=this.G,t=e.O.truncate(t^t>>>32),i=e.O.Th(t,i),t=this.H,t=e.O.truncate(t^t>>>32),e.O.Th(t,i)},t.prototype.xr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)},t.prototype.zy=function(e,i){var r=this.Zj(e),n=this.Zj(i);if(r&n)return 0;if(!(r|n))return 4;var s=(0!=r?1:0)|(0!=n?2:0);do{var o=i.x-e.x,a=i.y-e.y;if(o>a?r&t.YC?(r&t.ju?(e.y+=a*(this.v-e.x)/o,e.x=this.v):(e.y+=a*(this.C-e.x)/o,e.x=this.C),r=this.Zj(e)):n&t.YC?(n&t.ju?(i.y+=a*(this.v-i.x)/o,i.x=this.v):(i.y+=a*(this.C-i.x)/o,i.x=this.C),n=this.Zj(i)):0!=r?(r&t.ku?(e.x+=o*(this.G-e.y)/a,e.y=this.G):(e.x+=o*(this.H-e.y)/a,e.y=this.H),r=this.Zj(e)):(n&t.ku?(i.x+=o*(this.G-i.y)/a,i.y=this.G):(i.x+=o*(this.H-i.y)/a,i.y=this.H),n=this.Zj(i)):r&t.ZC?(r&t.ku?(e.x+=o*(this.G-e.y)/a,e.y=this.G):(e.x+=o*(this.H-e.y)/a,e.y=this.H),r=this.Zj(e)):n&t.ZC?(n&t.ku?(i.x+=o*(this.G-i.y)/a,i.y=this.G):(i.x+=o*(this.H-i.y)/a,i.y=this.H),n=this.Zj(i)):0!=r?(r&t.ju?(e.y+=a*(this.v-e.x)/o,e.x=this.v):(e.y+=a*(this.C-e.x)/o,e.x=this.C),r=this.Zj(e)):(n&t.ju?(i.y+=a*(this.v-i.x)/o,i.x=this.v):(i.y+=a*(this.C-i.x)/o,i.x=this.C),n=this.Zj(i)),r&n)return 0}while(r|n);return s},t.prototype.Zj=function(e){return(e.x<this.v?1:0)|(e.x>this.C?1:0)<<1|(e.y<this.G?1:0)<<2|(e.y>this.H?1:0)<<3},t.prototype.Bi=function(e){return!this.B()&&(this.R()<=e||this.ca()<=e)},t.prototype.tb=function(t){return t instanceof e.h?Math.sqrt(this.iK(t)):Math.sqrt(this.px(t))},t.prototype.px=function(e){var t=0,i=0,r=this.v-e.C;return r>t&&(t=r),(r=this.G-e.H)>i&&(i=r),(r=e.v-this.C)>t&&(t=r),(r=e.G-this.H)>i&&(i=r),t*t+i*i},t.prototype.iK=function(e){var t=0,i=0,r=this.v-e.x;return r>t&&(t=r),(r=this.G-e.y)>i&&(i=r),(r=e.x-this.C)>t&&(t=r),(r=e.y-this.H)>i&&(i=r),t*t+i*i},t.prototype.cn=function(e){this.B()?e.Oa():e.K(this.v,this.C)},t.ju=1,t.ku=4,t.YC=3,t.ZC=12,t}();e.l=t}(Y||(Y={})),function(e){var t,i;(i=t||(t={}))[i.initialize=0]="initialize",i[i.initializeRed=1]="initializeRed",i[i.initializeBlue=2]="initializeBlue",i[i.initializeRedBlue=3]="initializeRedBlue",i[i.sweep=4]="sweep",i[i.sweepBruteForce=5]="sweepBruteForce",i[i.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",i[i.sweepRedBlue=7]="sweepRedBlue",i[i.sweepRed=8]="sweepRed",i[i.sweepBlue=9]="sweepBlue",i[i.iterate=10]="iterate",i[i.iterateRed=11]="iterateRed",i[i.iterateBlue=12]="iterateBlue",i[i.iterateBruteForce=13]="iterateBruteForce",i[i.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",i[i.resetRed=15]="resetRed",i[i.resetBlue=16]="resetBlue";var r=function(){function e(e,t){this.ci=e,this.dH=t}return e.prototype.nr=function(e,t,i){this.ci.JX(i,e,t,this.dH)},e.prototype.$p=function(e){return this.ci.Rr(e,this.dH)},e}();t=function(){function t(){this.ow=this.oo=this.ff=this.rd=null,this.wq=new e.l,this.Am=this.Hj=this.Ij=this.Ad=this.Ef=this.Ld=this.cw=this.fo=this.qd=this.Eb=null,this.Xb=-1,this.qa=0,this.Nk()}return t.prototype.kr=function(){this.Nk(),this.Pv=!0,null==this.Eb?(this.fo=new e.ia(0),this.Eb=[]):(this.fo.Bh(0),this.Eb.length=0)},t.prototype.ad=function(t,i){if(!this.Pv)throw e.i.Hb();var r=new e.l;r.K(i),this.fo.add(t),this.Eb.push(r)},t.prototype.Fp=function(){if(!this.Pv)throw e.i.Hb();this.Pv=!1,null!=this.Eb&&0<this.Eb.length&&(this.Xb=0,this.Ic=!1)},t.prototype.pK=function(){this.Nk(),this.Ov=!0,null==this.Eb?(this.fo=new e.ia(0),this.Eb=[]):(this.fo.Bh(0),this.Eb.length=0)},t.prototype.JD=function(t,i){if(!this.Ov)throw e.i.Hb();var r=new e.l;r.K(i),this.fo.add(t),this.Eb.push(r)},t.prototype.iF=function(){if(!this.Ov)throw e.i.Hb();this.Ov=!1,null!=this.Eb&&0<this.Eb.length&&null!=this.qd&&0<this.qd.length&&(-1==this.Xb||2==this.Xb?this.Xb=3:3!=this.Xb&&(this.Xb=1),this.Ic=!1)},t.prototype.oK=function(){this.Nk(),this.Nv=!0,null==this.qd?(this.cw=new e.ia(0),this.qd=[]):(this.cw.Bh(0),this.qd.length=0)},t.prototype.ED=function(t,i){if(!this.Nv)throw e.i.Hb();var r=new e.l;r.K(i),this.cw.add(t),this.qd.push(r)},t.prototype.hF=function(){if(!this.Nv)throw e.i.Hb();this.Nv=!1,null!=this.Eb&&0<this.Eb.length&&null!=this.qd&&0<this.qd.length&&(-1==this.Xb||1==this.Xb?this.Xb=3:3!=this.Xb&&(this.Xb=2),this.Ic=!1)},t.prototype.next=function(){if(this.Ic)return!1;for(var t=!0;t;)switch(this.Xb){case 0:t=this.Gz();break;case 1:t=this.rS();break;case 2:t=this.oS();break;case 3:t=this.qS();break;case 4:t=this.UX();break;case 5:t=this.QX();break;case 6:t=this.RX();break;case 7:t=this.SX();break;case 8:t=this.ux();break;case 9:t=this.iC();break;case 10:t=this.Uz();break;case 11:t=this.jT();break;case 12:t=this.gT();break;case 13:t=this.hT();break;case 14:t=this.iT();break;case 15:t=this.kJ();break;case 16:t=this.jJ();break;default:throw e.i.Qa()}return!this.Ic},t.prototype.aC=function(e){this.qa=e},t.prototype.uz=function(e){return this.Eb[e]},t.prototype.az=function(e){return this.qd[e]},t.prototype.nl=function(e){return this.fo.read(e)},t.prototype.hl=function(e){return this.cw.read(e)},t.Tz=function(e){return!(1&~e)},t.eq=function(e){return!(1&e)},t.prototype.Nk=function(){this.Pv=this.Nv=this.Ov=!1,this.Cf=this.Df=this.Rg=this.pe=-1,this.Ic=!0},t.prototype.Gz=function(){if(this.Af=this.Vf=-1,10>this.Eb.length)return this.pe=this.Eb.length,this.Xb=5,!0;null==this.rd&&(this.rd=new e.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new e.ia(0)),this.rd.kr();for(var t=0;t<this.Eb.length;t++){var i=this.Eb[t];this.rd.Br(i.v,i.C)}for(this.rd.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ld.resize(0),t=0;t<2*this.Eb.length;t++)this.Ld.add(t);return this.Kt(this.Ld,2*this.Eb.length,!0),this.pe=2*this.Eb.length,this.Xb=4,!0},t.prototype.rS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;null==this.rd&&(this.rd=new e.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new e.ia(0)),this.rd.kr();for(var t=0;t<this.Eb.length;t++){var i=this.Eb[t];this.rd.Br(i.v,i.C)}for(this.rd.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ld.resize(0),t=0;t<2*this.Eb.length;t++)this.Ld.add(t);return this.Kt(this.Ld,this.Ld.size,!0),this.pe=this.Ld.size,-1!=this.Df&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Xb=7,this.jJ()},t.prototype.oS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;null==this.ff&&(this.ff=new e.sr(!0),this.ow=this.ff.getIterator(),this.Ef=new e.ia(0)),this.ff.kr();for(var t=0;t<this.qd.length;t++){var i=this.qd[t];this.ff.Br(i.v,i.C)}for(this.ff.Fp(),this.Ef.Jb(2*this.qd.length),this.Ef.resize(0),t=0;t<2*this.qd.length;t++)this.Ef.add(t);return this.Kt(this.Ef,this.Ef.size,!1),this.Rg=this.Ef.size,-1!=this.Cf&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Xb=7,this.kJ()},t.prototype.qS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;null==this.rd&&(this.rd=new e.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new e.ia(0)),null==this.ff&&(this.ff=new e.sr(!0),this.ow=this.ff.getIterator(),this.Ef=new e.ia(0)),this.rd.kr();for(var t=0;t<this.Eb.length;t++){var i=this.Eb[t];this.rd.Br(i.v,i.C)}for(this.rd.Fp(),this.ff.kr(),t=0;t<this.qd.length;t++)i=this.qd[t],this.ff.Br(i.v,i.C);for(this.ff.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ef.Jb(2*this.qd.length),this.Ld.resize(0),this.Ef.resize(0),t=0;t<2*this.Eb.length;t++)this.Ld.add(t);for(t=0;t<2*this.qd.length;t++)this.Ef.add(t);return this.Kt(this.Ld,this.Ld.size,!0),this.Kt(this.Ef,this.Ef.size,!1),this.pe=this.Ld.size,this.Rg=this.Ef.size,-1!=this.Df&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),-1!=this.Cf&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Xb=7,!0},t.prototype.UX=function(){var e=this.Ld.get(--this.pe),i=e>>1;return t.eq(e)?(this.rd.remove(i),0!=this.pe||(this.Af=this.Vf=-1,this.Ic=!0,!1)):(this.oo.EB(this.Eb[i].v,this.Eb[i].C,this.qa),this.Vf=i,this.Xb=10,!0)},t.prototype.QX=function(){return-1==--this.pe?(this.Af=this.Vf=-1,this.Ic=!0,!1):(this.Rg=this.Vf=this.pe,this.Xb=13,!0)},t.prototype.RX=function(){return-1==--this.pe?(this.Af=this.Vf=-1,this.Ic=!0,!1):(this.Vf=this.pe,this.Rg=this.qd.length,this.Xb=14,!0)},t.prototype.SX=function(){var e=this.Ld.get(this.pe-1),i=this.Ef.get(this.Rg-1),r=this.Rr(e,!0),n=this.Rr(i,!1);return r>n?this.ux():r<n?this.iC():t.Tz(e)?this.ux():t.Tz(i)?this.iC():this.ux()},t.prototype.ux=function(){var i=this.Ld.get(--this.pe),r=i>>1;if(t.eq(i))return-1!=this.Df&&-1!=this.Ij.get(r)?(this.Ad.jd(this.Df,this.Ij.get(r)),this.Ij.set(r,-1)):this.rd.remove(r),0!=this.pe||(this.Af=this.Vf=-1,this.Ic=!0,!1);if(-1!=this.Cf&&0<this.Ad.bs(this.Cf))for(i=this.Ad.rc(this.Cf);-1!=i;){var n=this.Ad.getData(i);this.ff.vj(n),this.Hj.set(n,-1),n=this.Ad.lb(i),this.Ad.jd(this.Cf,i),i=n}return 0<this.ff.size()?(this.ow.EB(this.Eb[r].v,this.Eb[r].C,this.qa),this.Vf=r,this.Xb=12):(-1==this.Df&&(null==this.Ad&&(this.Ad=new e.jp),this.Ij=new e.ia(0),this.Ij.resize(this.Eb.length,-1),this.Ij.Wj(-1,0,this.Eb.length),this.Df=this.Ad.Ph(1)),this.Ij.set(r,this.Ad.addElement(this.Df,r)),this.Xb=7),!0},t.prototype.iC=function(){var i=this.Ef.get(--this.Rg),r=i>>1;if(t.eq(i))return-1!=this.Cf&&-1!=this.Hj.get(r)?(this.Ad.jd(this.Cf,this.Hj.get(r)),this.Hj.set(r,-1)):this.ff.remove(r),0!=this.Rg||(this.Af=this.Vf=-1,this.Ic=!0,!1);if(-1!=this.Df&&0<this.Ad.bs(this.Df))for(i=this.Ad.rc(this.Df);-1!=i;){var n=this.Ad.getData(i);this.rd.vj(n),this.Ij.set(n,-1),n=this.Ad.lb(i),this.Ad.jd(this.Df,i),i=n}return 0<this.rd.size()?(this.oo.EB(this.qd[r].v,this.qd[r].C,this.qa),this.Af=r,this.Xb=11):(-1==this.Cf&&(null==this.Ad&&(this.Ad=new e.jp),this.Hj=new e.ia(0),this.Hj.resize(this.qd.length,-1),this.Hj.Wj(-1,0,this.qd.length),this.Cf=this.Ad.Ph(0)),this.Hj.set(r,this.Ad.addElement(this.Cf,r)),this.Xb=7),!0},t.prototype.Uz=function(){if(this.Af=this.oo.next(),-1!=this.Af)return!1;var e=this.Ld.get(this.pe)>>1;return this.rd.vj(e),this.Xb=4,!0},t.prototype.jT=function(){if(this.Vf=this.oo.next(),-1!=this.Vf)return!1;this.Af=this.Vf=-1;var e=this.Ef.get(this.Rg)>>1;return this.ff.vj(e),this.Xb=7,!0},t.prototype.gT=function(){if(this.Af=this.ow.next(),-1!=this.Af)return!1;var e=this.Ld.get(this.pe)>>1;return this.rd.vj(e),this.Xb=7,!0},t.prototype.hT=function(){if(-1==--this.Rg)return this.Xb=5,!0;this.wq.K(this.Eb[this.pe]);var e=this.Eb[this.Rg];return this.wq.W(this.qa,this.qa),!this.wq.isIntersecting(e)||(this.Af=this.Rg,!1)},t.prototype.iT=function(){if(-1==--this.Rg)return this.Xb=6,!0;this.wq.K(this.Eb[this.pe]);var e=this.qd[this.Rg];return this.wq.W(this.qa,this.qa),!this.wq.isIntersecting(e)||(this.Af=this.Rg,!1)},t.prototype.kJ=function(){return null==this.rd?(this.Ic=!0,!1):(this.pe=this.Ld.size,0<this.rd.size()&&this.rd.reset(),-1!=this.Df&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Ic=!1,!0)},t.prototype.jJ=function(){return null==this.ff?(this.Ic=!0,!1):(this.Rg=this.Ef.size,0<this.ff.size()&&this.ff.reset(),-1!=this.Cf&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Ic=!1,!0)},t.prototype.Kt=function(t,i,n){null==this.Am&&(this.Am=new e.Xt),n=new r(this,n),this.Am.sort(t,0,i,n)},t.prototype.JX=function(e,i,r,n){var s=this;e.Vd(i,r,(function(e,i){var r=s.Rr(e,n),o=s.Rr(i,n);return r<o||r==o&&t.eq(e)&&t.Tz(i)?-1:1}))},t.prototype.Rr=function(e,i){var r=.5*this.qa;return i?(i=this.Eb[e>>1],t.eq(e)?i.G-r:i.H+r):(i=this.qd[e>>1],t.eq(e)?i.G-r:i.H+r)},t}(),e.xC=t}(Y||(Y={})),function(e){var t=function(){function t(){}return t.construct=function(e,i,r,n,s,o){var a=new t;return a.v=e,a.G=i,a.Ye=r,a.C=n,a.H=s,a.Bg=o,a},t.prototype.Oa=function(){this.Ye=this.v=NaN},t.prototype.B=function(){return isNaN(this.v)},t.prototype.XS=function(){return isNaN(this.Ye)},t.prototype.K=function(e,t,i,r,n,s){void 0!==r?"number"==typeof e?(this.v=e,this.G=t,this.Ye=i,this.C=r,this.H=n,this.Bg=s):(this.v=e.x-.5*t,this.C=this.v+t,this.G=e.y-.5*i,this.H=this.G+i,this.Ye=e.z-.5*r,this.Bg=this.Ye+r):(this.v=e,this.G=t,this.Ye=i,this.C=e,this.H=t,this.Bg=i)},t.prototype.move=function(e){this.v+=e.x,this.G+=e.y,this.Ye+=e.z,this.C+=e.x,this.H+=e.y,this.Bg+=e.z},t.prototype.copyTo=function(e){e.v=this.v,e.G=this.G,e.C=this.C,e.H=this.H},t.prototype.Lk=function(e,t,i){this.v>e?this.v=e:this.C<e&&(this.C=e),this.G>t?this.G=t:this.H<t&&(this.H=t),0==isNaN(this.Ye)?this.Ye>i?this.Ye=i:this.Bg<i&&(this.Bg=i):this.Bg=this.Ye=i},t.prototype.Zb=function(i,r,n){if("number"==typeof i)this.B()?(this.v=i,this.G=r,this.Ye=n,this.C=i,this.H=r,this.Bg=n):this.Lk(i,r,n);else if(i instanceof e.Nd)this.Zb(i.x,i.y,i.z);else{if(!(i instanceof t))throw e.i.N();i.B()||(this.Zb(i.v,i.G,i.Ye),this.Zb(i.C,i.H,i.Bg))}},t.prototype.construct=function(e,t,i){e.B()||t.B()?this.Oa():(this.v=e.oa,this.C=e.va,this.G=t.oa,this.H=t.va,this.Ye=i.oa,this.Bg=i.va)},t.prototype.nB=function(t){if(null==t||8>t.length)throw e.i.N();t[0]=new e.Nd(this.v,this.G,this.Ye),t[1]=new e.Nd(this.v,this.H,this.Ye),t[2]=new e.Nd(this.C,this.H,this.Ye),t[3]=new e.Nd(this.C,this.G,this.Ye),t[4]=new e.Nd(this.v,this.G,this.Bg),t[5]=new e.Nd(this.v,this.H,this.Bg),t[6]=new e.Nd(this.C,this.H,this.Bg),t[7]=new e.Nd(this.C,this.G,this.Bg)},t.prototype.Zw=function(e){if(null==e||0==e.length)this.Oa();else{var t=e[0];for(this.K(t.x,t.y,t.z),t=1;t<e.length;t++){var i=e[t];this.Lk(i.x,i.y,i.z)}}},t}();e.OK=t}(Y||(Y={})),function(e){!function(e){e.Qa=function(){var e=Error();return e.message="Internal Error",e},e.Ie=function(){var e=Error();return e.message="Not Implemented",e},e.Xk=function(){var e=Error();return e.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",e},e.Hb=function(){var e=Error();return e.message="Invalid Call",e},e.N=function(e){var t=Error();return t.message="Illegal Argument Exception",void 0!==e&&(t.message+=": "+e),t},e.fu=function(e){var t=Error();return t.message=void 0!==e?"Runtime Exception: "+e:"Runtime Exception.",t},e.fa=function(e){var t=Error();return t.message="Geometry Exception: "+e,t},e.GK=function(){var e=Error();return e.message="Assert Failed Exception",e},e.ce=function(){var e=Error();return e.message="IndexOutOfBoundsException",e},e.WC=function(){var e=Error();return e.message="UserCancelException",e}}(e.i||(e.i={}))}(Y||(Y={})),function(e){(e=e.bm||(e.bm={}))[e.forward=0]="forward",e[e.reverse=1]="reverse"}(Y||(Y={})),function(e){var t=function(){function t(e,t){this.Wa=e,this.FH=t,this.LH=-1,this.sl=!1}return t.prototype.qe=function(){},t.prototype.next=function(){if(++this.LH==this.FH.I())return null;var t=this.FH.Na(this.LH);t.scale(this.Wa.ec);var i=new e.Da;return this.Wa.sy(t,this.sl,i),i},t.prototype.La=function(){return 0},t}(),i=function(){function t(t,i,r){this.Wa=t,this.rw=i,this.Xn=!1,this.co=r,this.bw=[0],this.sk=[0],this.Nj=[0],this.Gs=[0],this.sl=!1,this.qq=new e.Da,this.uk=[]}return t.prototype.qe=function(){},t.prototype.next=function(){if(this.Xn){this.Xn=!1,this.sd.ha();var t=e.aa.jg(this.qq);return e.Fg.Mk(t,this.Wa.Aq,!0,!0,this.Wa.Ub)}if(null==this.sd&&(this.sd=this.rw.Ga(),this.sd.$a(),null!=this.co&&this.co.Yk(null,0)),!this.sd.Ha()){if(!this.sd.$a())return null;null!=this.co&&this.co.Yk(null,0)}t=null,this.sk[0]=0,this.FA=this.bw[0]=0,this.di=NaN,this.Xn=!1;for(var i=this.uk.length=0,n=new e.h,s=new e.h,o=[0];this.sd.Ha()&&8>this.FA;){var a=this.sd.ha();if(n.L(a.ac()),s.L(a.wc()),n.scale(this.Wa.ec),s.scale(this.Wa.ec),e.cj.Mu(n,s)?n.x=s.x:e.cj.Ku(n,s)&&(s.x=n.x),this.uk.length=0,e.cj.tF(this.Wa.Tb,this.Wa.kc,this.Wa.ze,n,s,this.Wa.QA,this.Wa.Zs,o,this.Nj,this.Gs,this.uk,this.bw),null!=this.co&&(a=this.uk.slice(0),this.co.qG(this.co.da()-1,a,a.length-1)),e.cj.Lu(n,s)?(this.qq.Oa(),this.Wa.sy(n,this.sl,this.qq),this.Xn=!0):(this.qq.Oa(),this.Xn=this.xy(o[0],this.qq)),this.Xn){if(this.sd.li(),this.sd.Ez()){this.sd.li(),this.sd.ha();break}this.sd.DW();break}null==t&&(t=new e.Da).Yk(null,0),this.OD(t),i++}if(this.bw[0]=0,0<i){for(o=this.sd.wb();0<i;)this.sd.li(),n.L(this.rw.Na(this.sd.wb())),s.L(this.rw.Na(this.sd.ik())),n.scale(this.Wa.ec),s.scale(this.Wa.ec),this.sl&&(e.cj.Mu(n,s)?n.x=s.x:e.cj.Ku(n,s)&&(s.x=n.x)),this.uk.length=0,e.cj.tF(this.Wa.Tb,this.Wa.kc,this.Wa.ze,s,n,this.Wa.QA,this.Wa.Zs,null,this.Nj,this.Gs,this.uk,this.bw),this.OD(t),i--;return n.L(this.rw.Na(this.sd.wb())),n.scale(this.Wa.ec),r.Hr(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,n,this.di+1.570796326794897,this.di+4.71238898038469,this.Wa.ao,this.sl,this.sk,t,NaN,NaN),this.sd.Vb(o),this.sd.ha(),i=e.ta.kj(null,t,!0),e.Fg.Mk(t,i,!0,!0,this.Wa.Ub)}return this.Xn=!1,this.sd.ha(),t=e.aa.jg(this.qq),e.Fg.Mk(t,this.Wa.Aq,!0,!0,this.Wa.Ub)},t.prototype.OD=function(t){var i=this.uk[0],n=this.Nj[0]-1.570796326794897,s=this.Gs[0]+1.570796326794897;if(!isNaN(this.di)){if(this.di>=this.Nj[0]){var o=this.di+1.570796326794897;n=o+3.141592653589793-(this.di-this.Nj[0])}else n=(o=this.di+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Nj[0]-this.di));var a=!(this.di>=this.Nj[0]&&3.141592653589793>=this.di-this.Nj[0]||this.di<this.Nj[0]&&3.141592653589793<=this.Nj[0]-this.di),l=!1;if(Math.abs(n-o)<=.5*this.Wa.ao)if(a){var c=t.Na(t.I()-2);c.scale(this.Wa.ec);var h=new e.ga(0);for(e.kb.Xy(this.Wa.Tb,this.Wa.kc,i.x,i.y,c.x,c.y,h),c=h.u;c<=o;)c+=6.283185307179586;for(;c>o;)c-=6.283185307179586;c<n&&(l=!0)}else l=!0;l?(t.DB(0,t.I()-1),this.sl||((i=new e.h).L(t.Na(t.I()-1)),i.scale(this.Wa.ec),-3.141592653589793>i.x-this.sk[0]?this.sk[0]-=6.283185307179586:3.141592653589793<i.x-this.sk[0]&&(this.sk[0]+=6.283185307179586)),a||(n=.5*(n+o))):(a?((o=new e.h).L(i),o.scale(1/this.Wa.ec),t.wf(0,-1,o)):r.Hr(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,this.uk[0],o,n,this.Wa.ao,this.sl,this.sk,t,NaN,NaN),this.FA+=1)}r.qy(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,this.Wa.ze,this.uk,n,s,this.sl,this.sk,t),this.di=this.Gs[0]},t.prototype.xy=function(e,t){return this.Wa.xy(this.uk,e,this.Nj[0],this.Gs[0],this.sl,t)},t.prototype.La=function(){return 0},t}(),r=function(){function r(){}return r.buffer=function(t,i,n,s,o,a){if(null==t)throw e.i.N("Geometry::Geodesic_bufferer::buffer");if(t.B())return new e.Da(t.description);var l=new r;l.Qg=i,l.Jc=e.cb.sc(i);var c=e.cb.vv(l.Jc);if(l.Ub=a,l.Tb=e.cb.ev(l.Jc),l.kc=c*(2-c),l.ec=l.Jc.Hd().ai,l.qa=l.Qg.Kn(),l.Aq=l.Jc.Kn(),l.Zs=l.Aq*l.ec,l.zq=1.570796326794897/l.ec,l.OY=3.141592653589793/l.ec,l.Js=6.283185307179586/l.ec,l.PY=l.Js/6,l.LA=0,l.NY=1.5707963267948966*l.Tb/l.LA,4==n?(l.ze=2,l.Wv=!0):(l.ze=n,l.Wv=!1),l.Ka=s,l.rb=Math.abs(s),isNaN(o)||.001>o?l.xX():l.$n=o,n=t.getType(),e.aa.yd(n)?((n=new e.Ta(t.description)).oc(t,!0),t=n,n=1607):197==n&&(n=new e.l,t.A(n),n.R()<=l.qa||n.ca()<=l.qa?((n=new e.Ta(t.description)).ad(t,!1),t=n,n=1607):((n=new e.Da(t.description)).ad(t,!1),t=n,n=1736)),l.yX(),e.aa.Rn(n)||l.zX(),l.rb<=.5*l.$n)return 1736!=n?new e.Da(t.description):l.Wv?t:e.cj.Qr(t,l.Qg,l.ze,l.QA,-1,a);if(0>l.Ka&&1736!=n)return new e.Da(t.description);if(l.Wv&&e.aa.Hc(n)?(i=e.cj.Qr(t,i,4,NaN,l.$n,a),t=e.cb.zh(i,l.Qg,l.Jc)):t=e.cb.zh(t,l.Qg,l.Jc),(t=e.Hh.lj(t,l.Jc)).B())return new e.Da(t.description);switch(!l.Wv&&e.aa.Hc(n)&&(t=e.cj.pI(l.ec,t)),t=r.KX(t,l.Jc),n){case 1736:i=l.UN(t);break;case 1607:i=l.VN(t);break;case 550:i=l.SN(t);break;case 33:i=l.TN(t);break;default:throw e.i.fa("corrupted_geometry")}return(l=e.cb.zh(i,l.Jc,l.Qg)).Jl(t.description),l},r.prototype.UN=function(t){var r=new e.Da;t=new i(this,t,r),t=e.Gh.local().V(t,this.Jc,this.Ub).next(),t=e.ip.nj(t,this.Jc,2);var n=new e.Dd;return n.scale(1/this.ec,1/this.ec),r.Oc(n),r=e.ip.nj(r,this.Jc,2),0<=this.Ka?e.Gh.local().V(r,t,this.Jc,this.Ub):e.kp.local().V(r,t,this.Jc,this.Ub)},r.prototype.VN=function(t){return t=new i(this,t,null),t=e.Gh.local().V(t,this.Jc,this.Ub).next(),e.ip.nj(t,this.Jc,2)},r.prototype.SN=function(i){return i=new t(this,i),i=e.Gh.local().V(i,this.Jc,this.Ub).next(),e.ip.nj(i,this.Jc,2)},r.prototype.TN=function(t){(t=t.D()).scale(this.ec);var i=new e.Da;return this.sy(t,!1,i),e.ip.nj(i,this.Jc,2)},r.prototype.xy=function(t,i,n,s,o,a){var l=t[0],c=t[t.length-1],h=l.y>c.y?l.y:c.y,u=e.F.q(this.Tb,this.kc,l.y<c.y?l.y:c.y);if(h=e.F.q(this.Tb,this.kc,h),.001<this.LA-(u+i+this.rb)&&.001<this.LA+(h-i-this.rb))return!1;u=(i=n-1.570796326794897)-3.141592653589793,h=i+3.141592653589793;var p=(n=s+1.570796326794897)+3.141592653589793,d=[NaN],f=[NaN],y=[NaN],m=[NaN];if(s=!1,r.dJ(this.Tb,this.kc,this.rb,l,i,u,c,n,d,f),r.dJ(this.Tb,this.kc,this.rb,c,p,n,l,u,y,m),(n<d[0]&&d[0]<p||n<f[0]&&f[0]<p)&&(s=!0),s||(u<y[0]&&y[0]<i||u<m[0]&&m[0]<i)&&(s=!0),!s&&o)return!1;for(var g=[],v=t.length-1;0<=v;v--)g.push(t[v]);return a.Oa(),a.Yk(null,0),v=[0],r.qy(this.Tb,this.kc,this.ec,this.rb,this.ze,t,i,n,o,v,a),r.Hr(this.Tb,this.kc,this.ec,this.rb,c,n,p,this.ao,o,v,a,d[0],f[0]),r.qy(this.Tb,this.kc,this.ec,this.rb,this.ze,g,p,h,o,v,a),r.Hr(this.Tb,this.kc,this.ec,this.rb,l,u,i,this.ao,o,v,a,y[0],m[0]),t=!1,o||(t=this.IE(this.ec,a)),s||t},r.prototype.sy=function(e,t,i){i.Oa(),i.Yk(null,0),r.Hr(this.Tb,this.kc,this.ec,this.rb,e,-this.ao,6.283185307179586,this.ao,t,[0],i,NaN,NaN),t||this.IE(this.ec,i)},r.prototype.IE=function(e,t){var i=this.vO(e,t);return e=this.wO(e,t),i||e},r.prototype.vO=function(t,i){var r=i.I(),n=!1,s=new e.l;if(i.A(s),!e.s.Y(s.H*t,1.570796326794897)&&!e.s.Y(s.G*t,-1.570796326794897))return!1;var o=new e.h;for(--r;0<=r;r--)i.D(r,o),(o.y==s.H&&e.s.Y(o.y*t,1.570796326794897)||o.y==s.G&&e.s.Y(o.y*t,-1.570796326794897))&&(n=!0,this.OI(o,r,i));return n},r.prototype.wO=function(e,t){var i=t.Na(0),r=t.Na(t.I()-1);return 3.141592653589793<Math.abs(i.x-r.x)*e?(this.VV(t),!0):this.uO(t)},r.prototype.uO=function(e){return 0>e.Ke()&&(this.UV(e),!0)},r.prototype.OI=function(t,i,r){var n=r.I(),s=0<i?i-1:n-1;if(n=r.Na(i<n-1?i+1:0),s=r.Na(s),!e.s.Y(n.y,t.y)&&!e.s.Y(n.x,t.x)){var o=new e.h;o.ma(n.x,t.y),r.Cb(i,o)}e.s.Y(s.y,t.y)||e.s.Y(s.x,t.x)||((n=new e.h).ma(s.x,t.y),r.wf(0,i,n))},r.prototype.VV=function(t){var i=new e.Da,r=new e.Da,n=new e.Dd,s=t.Na(0),o=t.Na(t.I()-1),a=new e.h;s.x>o.x?(o=this.zq,n.gg(-this.Js,0)):(o=-this.zq,n.gg(this.Js,0)),i.add(t,!1),t.Oa(),r.add(i,!1),r.Oc(n),s=new e.l,r.A(s),s.W((this.Js-s.R())/2,0),s.G=-this.zq,s.H=this.zq;for(var l=0;l<r.I();l++)r.D(l,a),i.wf(0,-1,a);for(r.Oc(n),l=0;l<r.I();l++)r.D(l,a),i.wf(0,-1,a);r=i.Na(0),n=i.Na(i.I()-1),a.ma(n.x,o),i.wf(0,-1,a),a.ma(.5*(n.x+r.x),o),i.wf(0,-1,a),a.ma(r.x,o),i.wf(0,-1,a),i=e.Hh.ks(i,this.Jc,2,!0,s.v),i=e.Hh.ks(i,this.Jc,2,!0,s.C),i=e.Ud.clip(i,s,this.Aq,NaN),t.add(i,!1)},r.prototype.UV=function(t){var i=new e.l;t.A(i),i.W((this.Js-i.R())/2,0),i.G=-this.zq,i.H=this.zq,t.Yk(null,0);var r=new e.h;r.ma(i.v,i.G),t.wf(1,-1,r),r.ma(i.v,i.H),t.wf(1,-1,r),r.ma(.5*(i.v+i.C),i.H),t.wf(1,-1,r),r.ma(i.C,i.H),t.wf(1,-1,r),r.ma(i.C,i.G),t.wf(1,-1,r),r.ma(.5*(i.v+i.C),i.G),t.wf(1,-1,r)},r.qy=function(t,i,n,s,o,a,l,c,h,u,p){var d=null;h||((d=new e.h).Rc(),0<p.I()&&(d.L(p.Na(p.I()-1)),d.scale(n)));var f=new e.ga(0),y=new e.ga(0),m=new e.ga(0),g=new e.h,v=new e.h,_=a[a.length-1];n=1/n;for(var b=0;b<a.length;b++){var w=a[b];if(0==b)var M=l;else b==a.length-1?M=c:(e.kb.wd(t,i,_.x,_.y,w.x,w.y,null,null,f,o),M=f.u-1.570796326794897);e.kb.yi(t,i,w.x,w.y,s,M,y,m),h?v.ma(y.u,m.u):(g.ma(y.u,m.u),r.gJ(w.x,g.x,d.x,u),v.ma(u[0]+g.x,g.y),d.L(v)),v.scale(n),p.wf(0,-1,v)}},r.Hr=function(t,i,n,s,o,a,l,c,h,u,p,d,f){if(!(l-a<c)){var y=new e.ga(0),m=new e.ga(0),g=new e.h,v=new e.h,_=null;h||((_=new e.h).Rc(),0<p.I()&&(_.L(p.Na(p.I()-1)),_.scale(n)));var b=e.O.truncate(Math.ceil(a/c)),w=b++*c;for(w==a&&(w=b++*c),n=1/n;w<l+c&&(a<d&&d<w?(w=d,b--):a<f&&f<w&&(w=f,b--),!(w>=l));)e.kb.yi(t,i,o.x,o.y,s,w,y,m),h?v.ma(y.u,m.u):(g.ma(y.u,m.u),r.gJ(o.x,g.x,_.x,u),v.ma(u[0]+g.x,g.y),_.L(v)),v.scale(n),p.wf(0,-1,v),a=w,w=b++*c}},r.dJ=function(t,i,r,n,s,o,a,l,c,h){var u=new e.h,p=new e.h,d=new e.ga(0),f=new e.ga(0);for(e.kb.yi(t,i,n.x,n.y,r,s,d,f),u.ma(d.u,f.u),e.kb.yi(t,i,n.x,n.y,r,o,d,f),p.ma(d.u,f.u),r=new e.ga(0),e.kb.Xy(t,i,a.x,a.y,u.x,u.y,r),c[0]=r.u,e.kb.Xy(t,i,a.x,a.y,p.x,p.y,r),h[0]=r.u;c[0]<=h[0];)c[0]+=6.283185307179586;for(;c[0]>h[0];)c[0]-=6.283185307179586;for(;c[0]>=l;)c[0]-=6.283185307179586,h[0]-=6.283185307179586;for(;c[0]<l;)c[0]+=6.283185307179586,h[0]+=6.283185307179586},r.gJ=function(e,t,i,r){if(isNaN(i)){for(;3.141592653589793<r[0]+t-e;)r[0]-=6.283185307179586;for(;3.141592653589793<e-(r[0]+t);)r[0]+=6.283185307179586}else 3.141592653589793<r[0]+t-i?r[0]-=6.283185307179586:3.141592653589793<i-(r[0]+t)&&(r[0]+=6.283185307179586)},r.KX=function(t,i){var r=t.getType(),n=e.aa.Hc(r)?t.da():550==r?t.I():1;if(1==n)return t;var s=new e.ia(0);s.resize(n);for(var o=[],a=new e.l,l=0;l<n;l++){if(s.write(l,l),e.aa.Hc(r)){t.Rj(l,a);var c=a.sf()}else c=t.Na(l);c=e.XK.$X(i,c),o[l]=c}for(s.Vd(0,s.size,(function(e,t){return o[e]<o[t]?-1:o[e]>o[t]?1:0})),i=t.Ia(),l=0;l<n;l++)a=s.read(l),e.aa.Hc(r)?i.addPath(t,a,!0):i.Fd(t,a,a+1);return i},r.prototype.yX=function(){var t=Math.min(3.141592653589793*this.Tb-this.rb,this.rb);t=Math.min(t,.39269908169872414*this.Tb);var i=new e.h;i.ma(0,10*this.ec);var r=45*this.ec,n=new e.ga(0),s=new e.ga(0),o=new e.ga(0),a=new e.ga(0),l=new e.ga(0),c=new e.ga(0),h=new e.ga(0),u=new e.ga(0),p=new e.h,d=new e.h,f=new e.h,y=new e.h;e.kb.yi(this.Tb,this.kc,i.x,i.y,t,0,n,s),p.ma(n.u,s.u),e.kb.yi(this.Tb,this.kc,i.x,i.y,t,r,o,a),d.ma(o.u,a.u),n=new e.ga(0),s=new e.ga(0);for(var m=new e.ga(0);e.kb.yi(this.Tb,this.kc,i.x,i.y,t,.5*(0+r),l,c),f.ma(l.u,c.u),e.kb.wd(this.Tb,this.kc,p.x,p.y,d.x,d.y,n,s,null,2),e.kb.oj(this.Tb,this.kc,p.x,p.y,.5*n.u,s.u,h,u,2),y.ma(h.u,u.u),e.kb.wd(this.Tb,this.kc,f.x,f.y,y.x,y.y,m,null,null,2),!(m.u<=this.$n);)r*=.9,e.kb.yi(this.Tb,this.kc,i.x,i.y,t,r,o,a),d.ma(o.u,a.u);this.ao=6.283185307179586/Math.ceil(6.283185307179586/(r-0))},r.prototype.zX=function(){var t=Math.min(3.141592653589793*this.Tb-this.rb,this.rb);t=Math.min(t,.39269908169872414*this.Tb);var i=new e.h,r=new e.h;i.ma(0,10*this.ec),r.ma(10*this.ec,10*this.ec);var n=new e.ga(0),s=new e.ga(0),o=new e.ga(0);e.kb.wd(this.Tb,this.kc,i.x,i.y,r.x,r.y,o,n,s,this.ze);var a=new e.ga(0),l=new e.ga(0),c=new e.ga(0),h=new e.ga(0),u=new e.h,p=new e.ga(0),d=new e.ga(0),f=new e.ga(0),y=new e.ga(0),m=new e.ga(0),g=new e.ga(0),v=new e.ga(0),_=new e.ga(0),b=new e.ga(0),w=new e.h,M=new e.h,T=new e.h,S=new e.h,A=1;n=n.u,s=s.u+1.570796326794897,o=o.u,e.kb.yi(this.Tb,this.kc,i.x,i.y,t,n-1.570796326794897,d,f),w.ma(d.u,f.u),e.kb.yi(this.Tb,this.kc,r.x,r.y,t,s,y,m),M.ma(y.u,m.u),d=new e.ga(0),f=new e.ga(0),s=new e.ga(0);for(var E=new e.ga(0);e.kb.oj(this.Tb,this.kc,i.x,i.y,.5*(0+A)*o,n,a,l,this.ze),u.ma(a.u,l.u),e.kb.wd(this.Tb,this.kc,i.x,i.y,u.x,u.y,null,null,p,this.ze),e.kb.yi(this.Tb,this.kc,u.x,u.y,t,p.u+1.570796326794897,g,v),T.ma(g.u,v.u),e.kb.wd(this.Tb,this.kc,w.x,w.y,M.x,M.y,d,f,null,2),e.kb.oj(this.Tb,this.kc,w.x,w.y,.5*d.u,f.u,_,b,2),S.ma(_.u,b.u),e.kb.wd(this.Tb,this.kc,T.x,T.y,S.x,S.y,s,null,null,2),!(s.u<=this.$n);)A*=.9,e.kb.oj(this.Tb,this.kc,i.x,i.y,A*o,n,c,h,this.ze),r.ma(c.u,h.u),e.kb.wd(this.Tb,this.kc,i.x,i.y,r.x,r.y,null,null,E,this.ze),e.kb.yi(this.Tb,this.kc,r.x,r.y,t,E.u+1.570796326794897,y,m),M.ma(y.u,m.u);1e5<(t=A*o)&&(t=1e5),this.QA=t},r.prototype.xX=function(){var e=5e4<this.rb?100:1e4<this.rb?10:1;500>this.rb/e&&(e=this.rb/500),.01>e&&(e=.01),this.$n=e},r}();e.VK=r}(Y||(Y={})),function(e){var t=function(){function t(){}return t.Mf=function(t,i){var r=new e.h;r.L(i),t.push(r)},t.up=function(e,t){e.add(t.x),e.add(t.y)},t.hB=function(e){e.Bh(e.size-2)},t.oB=function(e,t){t.ma(e.get(e.size-2),e.get(e.size-1))},t.Qr=function(i,r,n,s,o,a){if(null==i)throw e.i.N();var l=i.getType();if(i.B()||e.aa.Rn(l))return i;var c=new t;c.Qg=r,c.Jc=e.cb.sc(r);var h=e.cb.vv(c.Jc);if(c.Ub=a,c.Tb=e.cb.ev(c.Jc),c.kc=h*(2-h),c.ec=c.Jc.Hd().ai,c.Aq=c.Jc.Kn(),c.Zs=c.Aq*c.ec,c.AA=s,c.zA=o,c.ze=n,197==l?(n=new e.Da(i.description)).ad(i,!1):e.aa.yd(l)?(n=new e.Ta(i.description)).oc(i,!0):n=i,4!=c.ze){if((r=0==c.Qg.Nb(c.Jc)?e.cb.zh(n,c.Qg,c.Jc):e.Hh.lj(n,c.Jc)).B())return r;r=t.pI(c.ec,r),r=c.Zy(r),r=e.ip.nj(r,c.Jc,c.ze),c=e.cb.zh(r,c.Jc,c.Qg)}else{if(2==e.Eg.Sb(r)?(i=e.cb.ml(),(r=e.Xj.local().V(n,i,r,a))==i&&(r=new e.Da,i.copyTo(r))):r=e.Hh.lj(n,c.Jc),r.B())return r;c=c.CX(r)}return c},t.pI=function(i,r){var n=new e.l;if(r.xc(n),3.141592653589793>n.R()*i)return r;var s=!1;n=r.Ga();for(var o=new e.h,a=new e.h;n.$a();)for(;n.Ha();){var l=n.ha();if(o.L(l.ac()),a.L(l.wc()),o.scale(i),a.scale(i),3.141592653589793<Math.abs(o.x-a.x)){var c=t.Lu(o,a);if(!c){s=!0;break}if(6.283185307179586<Math.abs(o.x-a.x)){s=!0;break}}}if(!s)return r;s=r.Ia();var h=1<r.description.Aa,u=new e.h,p=new e.h,d=new e.h,f=new e.h,y=new e.Sa;for(n.Zi();n.$a();)for(var m=NaN,g=[0];n.Ha();){if(l=n.ha(),o.L(l.ac()),a.L(l.wc()),o.scale(i),a.scale(i),isNaN(m)?(t.Wi(o.x,NaN,g),p.L(o)):p.L(d),m=p.x,c=t.Lu(o,a)){if(6.283185307179586<a.x-o.x)for(;6.283185307179586<a.x-o.x;)a.x-=6.283185307179586;if(-6.283185307179586>a.x-o.x)for(;-6.283185307179586>a.x-o.x;)a.x+=6.283185307179586;t.Wi(a.x,NaN,g),d.L(a)}else u.L(a),t.AU(u),t.Wi(u.x,m,g),d.ma(g[0]+u.x,u.y);.5>Math.abs(d.x-a.x)&&d.L(a),h?(l.Tw(0,y),f.L(p),f.scale(1/i),y.Cb(f),(c=n.vm())?s.nf(y):s.lineTo(y),n.Qn()&&!r.dc(n.gb)&&(l.Tw(1,y),f.L(d),f.scale(1/i),y.Cb(f),s.lineTo(y))):((c=n.vm())&&s.Hz(null,0),l=s.da()-1,f.L(p),f.scale(1/i),s.wf(l,-1,f),n.Qn()&&!r.dc(n.gb)&&(f.L(d),f.scale(1/i),s.wf(l,-1,f)))}return s},t.tF=function(i,r,n,s,o,a,l,c,h,u,p,d){var f=new e.h,y=new e.h,m=0<s.compare(o);t.fJ(m,s,o,f,y),t.uF(i,r,n,f,y,a,NaN,l,c,h,u,null,p,d),m&&t.fC(h,u,null,p)},t.prototype.Zy=function(i){var r=i.Ia(),n=i.Ga(),s=[],o=null,a=null,l=1<i.description.Aa;l&&(o=new e.be(0),a=new e.ig);for(var c=[0],h=new e.h,u=new e.h,p=new e.h,d=new e.h;n.$a();)for(c[0]=0;n.Ha();){var f=n.ha();h.L(f.ac()),u.L(f.wc()),h.scale(this.ec),u.scale(this.ec);var y=0<h.compare(u);t.fJ(y,h,u,p,d),s.length=0,null!=o&&o.Bh(0),0<this.AA?t.uF(this.Tb,this.kc,this.ze,p,d,this.AA,this.zA,this.Zs,null,null,null,l?o:null,s,c):t.aR(this.Tb,this.kc,this.ze,p,d,this.zA,this.Zs,l?o:null,s,c),y&&t.fC(null,null,l?o:null,s),s[0].L(f.ac()),s[s.length-1].L(f.wc());for(var m=1;m<s.length-1;m++)s[m].scale(1/this.ec);l?(y=t.eJ(y,f,a),t.TD(n.vm(),n.Qn()&&!i.dc(n.gb),f,y,o,s,r)):t.SD(n.vm(),n.Qn()&&!i.dc(n.gb),s,r)}return r},t.prototype.CX=function(i){var r=i.Ia(),n=i.Ga(),s=[],o=null,a=new e.ig,l=1<i.description.Aa;for(l&&(o=new e.be(0));n.$a();)for(;n.Ha();){var c=n.ha(),h=c.ac(),u=c.wc();h=0<h.compare(u),u=t.eJ(h,c,a),s.length=0,null!=o&&o.Bh(0),t.BX(this.Tb,this.kc,this.ec,u,this.Qg,this.AA,this.zA,l?o:null,s),h&&t.fC(null,null,l?o:null,s),l?t.TD(n.vm(),n.Qn()&&!i.dc(n.gb),c,u,o,s,r):t.SD(n.vm(),n.Qn()&&!i.dc(n.gb),s,r)}return r},t.SD=function(e,t,i,r){e&&r.Hz(null,0),e=r.da()-1;var n=i.slice(0);r.qG(e,n,n.length-1),t&&r.wf(e,-1,i[i.length-1])},t.TD=function(t,i,r,n,s,o,a){var l=new e.Sa;if(r.To(l),t?a.nf(l):a.lineTo(l),2<o.length){t=n.Qb();for(var c=1;c<o.length-1;c++){var h=n.NG(s.get(c)*t);n.Tw(h,l),l.Cb(o[c]),a.lineTo(l)}}i&&(r.Po(l),a.lineTo(l))},t.uF=function(i,r,n,s,o,a,l,c,h,u,p,d,f,y){var m=new e.ga(0),g=new e.ga(0),v=new e.ga(0);e.kb.wd(i,r,s.x,s.y,o.x,o.y,v,m,g,n),v=v.u;var _=m=m.u;0>_&&(_+=6.283185307179586),0>(g=g.u)&&(g+=6.283185307179586),null!=h&&(h[0]=v),null!=u&&(u[0]=_),null!=p&&(p[0]=g),u=h=NaN,null!=d&&(h=((u=e.F.Ah(i,r))-(p=e.F.q(i,r,s.y)))/v,u=(u+p)/v),p=t.Mu(s,o),g=t.Ku(s,o),_=p||g;var b=t.FE(s,o,c),w=new e.ga(0),M=new e.ga(0),T=new e.h,S=new e.h,A=new e.h;t.Wi(s.x,NaN,y);var E=[y[0]];if(v<=a)t.Mf(f,s),t.Wi(o.x,NaN,y),null!=d&&d.add(0),_?(p&&t.kB(s,o,d,f),g&&t.iB(s,o,d,f)):b?t.jB(s,o,m,h,u,d,f):0<l&&(S.ma(s.x-E[0],s.y),T.ma(o.x-y[0],o.y),t.Yy(i,r,n,s,v,m,S,T,0,1,l,d,f,E)),t.Mf(f,o);else{var x=v/((a=1+e.O.truncate(Math.ceil(v/a)))-1),I=new e.h,C=0;t.Mf(f,s),I.L(s),S.ma(s.x-y[0],s.y),null!=d&&d.add(0);for(var k=1;k<a;k++){if(k<a-1){e.kb.oj(i,r,s.x,s.y,k*x,m,w,M,n),T.ma(w.u,M.u),t.Wi(T.x,I.x,y),A.ma(y[0]+T.x,T.y);var N=k/(a-1)}else t.Wi(o.x,NaN,y),T.ma(o.x-y[0],o.y),A.L(o),N=1;_?(1==k&&p&&t.kB(s,A,d,f),k==a-1&&g&&t.iB(I,o,d,f)):b?t.EE(I,A,c)&&(s.x<o.x?I.x>A.x&&(y[0]+=6.283185307179586,A.ma(y[0]+T.x,T.y)):I.x<A.x&&(y[0]-=6.283185307179586,A.ma(y[0]+T.x,T.y)),t.jB(I,A,m,h,u,d,f)):0<l&&t.Yy(i,r,n,s,v,m,S,T,C,N,l,d,f,E),t.Mf(f,A),null!=d&&d.add(N),I.L(A),S.L(T),E[0]=y[0],C=N}}},t.aR=function(i,r,n,s,o,a,l,c,h,u){var p=new e.ga(0),d=new e.ga(0),f=new e.ga(0);e.kb.wd(i,r,s.x,s.y,o.x,o.y,f,p,d,n),d=f.u,p=p.u;var y=f=NaN;if(null!=c){y=e.F.Ah(i,r);var m=e.F.q(i,r,s.y);f=(y-m)/d,y=(y+m)/d}m=t.Mu(s,o);var g=t.Ku(s,o),v=m||g;l=t.FE(s,o,l);var _=t.Lu(s,o);_=v||l||_,t.Wi(s.x,NaN,u);var b=new e.h;t.Mf(h,s),b.L(s),null!=c&&c.add(0),_?(v?(m&&t.kB(s,o,c,h),g&&t.iB(s,o,c,h)):l&&t.jB(s,o,p,f,y,c,h),t.Wi(o.x,NaN,u),t.Mf(h,o)):d<=a?(t.Wi(o.x,NaN,u),t.Mf(h,o)):(f=new e.h,l=new e.h,f.L(s),l.L(o),f.x-=u[0],l.x-=u[0],-3.141592653589793>l.x?l.x+=6.283185307179586:3.141592653589793<l.x&&(l.x-=6.283185307179586),t.Yy(i,r,n,s,d,p,f,l,0,1,a,c,h,u),t.Mf(h,o),t.Wi(o.x,NaN,u)),null!=c&&c.add(1)},t.Yy=function(i,r,n,s,o,a,l,c,h,u,p,d,f,y){var m=new e.h,g=new e.h;m.ma(l.x+y[0],l.y),new e.ga(0),new e.ga(0),new e.ga(0),new e.ga(0);var v=new e.ga(0),_=new e.ga(0),b=new e.ga(0),w=new e.h,M=new e.h,T=new e.h,S=new e.h;w.L(l),M.L(c),l=new e.be(0),c=new e.be(0),t.up(l,M),c.add(u);var A=new e.h,E=new e.yb,x=[];for(t.YJ(4,x);0<l.size;){for(var I,C=!1,k=NaN,N=0;3>N;N++)if(I=x[N]*u+(1-x[N])*h,e.kb.oj(i,r,s.x,s.y,I*o,a,v,_,n),T.ma(v.u,_.u),0==N&&(k=I,S.L(T)),t.WW(w,T,M,E),E.hc(E.fe(T,!0),A),e.kb.wd(i,r,T.x,T.y,A.x,A.y,b,null,null,2),b.u>p){C=!0;break}C?(M.L(S),u=k,t.up(l,M),c.add(u)):(t.hB(l),c.En(c.size-1,1,c.size-1),0<l.size&&(t.Wi(M.x,m.x,y),g.ma(y[0]+M.x,M.y),t.Mf(f,g),m.L(g),null!=d&&d.add(u),w.L(M),h=u,t.oB(l,M),u=c.get(c.size-1)))}},t.BX=function(i,r,n,s,o,a,l,c,h){var u=new e.h,p=new e.h,d=new e.h,f=new e.h,y=new e.h,m=new e.h,g=new e.h,v=new e.h,_=new e.h,b=new e.h,w=new e.ga(0),M=new e.ga(0),T=new e.h,S=[[],[]],A=1==e.Eg.Sb(o);o=o.Xd(0);var E=s.ac(),x=s.wc();A?(m.ma(E.x*n,E.y*n),g.ma(x.x*n,x.y*n)):(S[0][0]=E.x,S[0][1]=E.y,S[1][0]=x.x,S[1][1]=x.y,e.cb.vt(),m.x=S[0][0]*n,m.y=S[0][1]*n,g.x=S[1][0]*n,g.y=S[1][1]*n);var I=0,C=0,k=1,N=s.Pn();u.L(E),p.L(x),x=new e.be(0);var L=new e.be(0),O=new e.be(0);t.up(x,p),t.up(L,g),O.add(k),t.Mf(h,u),null!=c&&c.add(C);var R=[],P=0<l?N?5:3:N?5:1;t.YJ(P,R);for(var D=new e.ga(0),F=new e.ga(0),j=new e.ga(0),Z=new e.ga(0),z=new e.ga(0),U=new e.ga(0),V=new e.ga(0);0<L.size;){var G=!1,B=NaN;for(e.kb.wd(i,r,m.x,m.y,g.x,g.y,D,F,null,2),E=0;E<P;E++){if(0==E){if(!N&&0>=l&&D.u<=a&&3.141592653589793>Math.abs(m.x-g.x))break;if(s.Ux(C,k)<=o)break}var $=R[E]*k+(1-R[E])*C;if(s.hc($,d),A?v.ma(d.x*n,d.y*n):(S[0][0]=d.x,S[0][1]=d.y,e.cb.vt(),v.x=S[0][0]*n,v.y=S[0][1]*n),0==E&&(B=$,y.L(d),b.L(v),0<a&&(D.u>a||3.141592653589793<=Math.abs(m.x-g.x)))){G=!0;break}if(N&&0<a){if(e.kb.wd(i,r,m.x,m.y,v.x,v.y,j,null,null,2),j.u>a||3.141592653589793<=Math.abs(m.x-v.x)){G=!0;break}}else if(0<l){if(N?(f.NS(u,p,R[E]),A?_.ma(f.x*n,f.y*n):(S[0][0]=f.x,S[0][1]=f.y,e.cb.vt(),_.x=S[0][0]*n,_.y=S[0][1]*n)):(f.L(d),_.L(v)),e.kb.wd(i,r,m.x,m.y,_.x,_.y,Z,null,null,2),!(Z.u<=D.u)){G=!0;break}if(e.kb.oj(i,r,m.x,m.y,Z.u,F.u,w,M,2),T.ma(w.u,M.u),e.kb.wd(i,r,T.x,T.y,v.x,v.y,z,null,null,2),z.u>l){G=!0;break}if(N){if(e.kb.wd(i,r,T.x,T.y,_.x,_.y,U,null,null,2),U.u>l){G=!0;break}if(e.kb.wd(i,r,_.x,_.y,v.x,v.y,V,null,null,2),V.u>l){G=!0;break}}}}G?(p.L(y),g.L(b),k=B,t.up(x,p),t.up(L,g),O.add(k)):(t.hB(x),t.hB(L),O.En(O.size-1,1,O.size-1),t.Mf(h,p),I+=D.u,null!=c&&c.add(I),0<L.size&&(u.L(p),m.L(g),C=k,t.oB(x,p),t.oB(L,g),k=O.get(O.size-1)))}if(null!=c)for(i=1/I,E=0;E<c.size;E++)c.write(E,c.read(E)*i)},t.fC=function(e,t,i,r){r.reverse(),null!=i&&i.ni(0,i.size,1),i=null!=e?e[0]:NaN,r=null!=t?t[0]:NaN,null!=e&&(e[0]=r),null!=t&&(t[0]=i)},t.fJ=function(e,t,i,r,n){e?(r.L(i),n.L(t)):(r.L(t),n.L(i))},t.eJ=function(e,t,i){return e?(i.create(t.getType()),t.copyTo(i.get()),i.get().reverse(),i.get()):t},t.Wi=function(e,t,i){if(isNaN(t)){for(;3.141592653589793<i[0]-e;)i[0]-=6.283185307179586;for(;3.141592653589793<e-i[0];)i[0]+=6.283185307179586}else 3.141592653589793<i[0]+e-t?i[0]-=6.283185307179586:3.141592653589793<t-(i[0]+e)&&(i[0]+=6.283185307179586)},t.WW=function(e,t,i,r){3.141592653589793>Math.abs(t.x-e.x)?(r.Dc(e),3.141592653589793<=i.x-e.x?r.Ql(i.x-6.283185307179586,i.y):3.141592653589793<=e.x-i.x?r.Ql(i.x+6.283185307179586,i.y):r.Ql(i.x,i.y)):(r.Dc(i),3.141592653589793<=e.x-i.x?r.Ql(e.x-6.283185307179586,e.y):3.141592653589793<=i.x-e.x?r.Ql(e.x+6.283185307179586,e.y):r.Ql(e.x,e.y))},t.YJ=function(e,t){for(var i=0;i<e;i++){var r=Math.ceil(i/2)/(e+1);0!=i%2&&(r=-r),t[i]=.5+r}},t.Mu=function(t,i){return!!(e.s.Y(t.y,1.570796326794897)&&!e.s.Y(i.y,1.570796326794897)||e.s.Y(t.y,-1.570796326794897)&&!e.s.Y(i.y,-1.570796326794897))},t.Ku=function(t,i){return!!(e.s.Y(i.y,1.570796326794897)&&!e.s.Y(t.y,1.570796326794897)||e.s.Y(i.y,-1.570796326794897)&&!e.s.Y(t.y,-1.570796326794897))},t.FE=function(i,r,n){return!(!t.EE(i,r,n)||e.s.Y(i.y,1.570796326794897)||e.s.Y(i.y,-1.570796326794897)||e.s.Y(r.y,1.570796326794897)||e.s.Y(r.y,-1.570796326794897))},t.EE=function(e,t,i){return Math.abs(Math.abs(e.x-t.x)-3.141592653589793)<=i},t.Lu=function(t,i){return!!(e.s.Y(t.y,1.570796326794897)&&e.s.Y(i.y,1.570796326794897)||e.s.Y(t.y,-1.570796326794897)&&e.s.Y(i.y,-1.570796326794897))},t.kB=function(i,r,n,s){if(0<i.y){var o=new e.h;o.ma(r.x,1.570796326794897)}else(o=new e.h).ma(r.x,-1.570796326794897);e.s.Y(i.x,o.x)||e.s.Y(r.y,o.y)||(t.Mf(s,o),null!=n&&n.add(0))},t.iB=function(i,r,n,s){if(0<r.y){var o=new e.h;o.ma(i.x,1.570796326794897)}else(o=new e.h).ma(i.x,-1.570796326794897);e.s.Y(r.x,o.x)||e.s.Y(i.y,o.y)||(t.Mf(s,o),null!=n&&n.add(1))},t.jB=function(i,r,n,s,o,a,l){e.s.Cd(n)?(0<1.570796326794897-i.y&&((n=new e.h).ma(i.x,1.570796326794897),t.Mf(l,n),null!=a&&a.add(s)),0<1.570796326794897-r.y&&((n=new e.h).ma(r.x,1.570796326794897),t.Mf(l,n),null!=a&&a.add(s))):(0<1.570796326794897+i.y&&((n=new e.h).ma(i.x,-1.570796326794897),t.Mf(l,n),null!=a&&a.add(o)),0<1.570796326794897+r.y&&((n=new e.h).ma(r.x,-1.570796326794897),t.Mf(l,n),null!=a&&a.add(o)))},t.AU=function(e){if(-3.141592653589793>e.x)for(;-3.141592653589793>e.x;)e.x+=6.283185307179586;if(3.141592653589793<e.x)for(;3.141592653589793<e.x;)e.x-=6.283185307179586},t}();e.cj=t}(Y||(Y={})),function(e){e.ip=function(){function t(){}return t.nj=function(i,r,n){if(null==i||null==r||!e.cb.Wc(r))throw e.i.N();if(i.B())return i;var s=i,o=s.getType();if(e.aa.Hc(o)){s=e.Hh.lj(i,r),i=new e.l,s.A(i),o=e.ta.Wd(r,i,!1);for(var a=e.cb.gh(r),l=Math.floor((i.v-a.v)/a.R())*a.R()+a.v;l<i.C;)l>i.v+o&&l<i.C-o&&(s=e.Hh.ks(s,r,n,!0,l)),l+=a.R()}else{if(197==o)return(i=new e.Da(s.description)).ad(s,!1),t.nj(i,r,n);if(e.aa.yd(o))return(i=new e.Ta(s.description)).oc(s,!0),t.nj(i,r,n)}return t.Uy(s,r)},t.Uy=function(i,r){if(null==i||null==r||!e.cb.Wc(r))throw e.i.N();if(i.B())return i;var n=i.getType();return 197==n?(n=new e.Da(i.description)).ad(i,!1):e.aa.yd(n)?(n=new e.Ta(i.description)).oc(i,!0):n=i,(n=e.Hh.lj(n,r)).B()?n:1==e.Eg.Sb(r)?e.Hh.Fn(n,r,0,n!=i,0):t.NQ(n,r,n!=i)},t.NQ=function(t,i,r){if(!e.cb.Wc(i))throw e.i.N();if(t.B())return t;var n=e.cb.bf(i),s=-180*n;return n*=360,2==e.Eg.Sb(i)&&(n=(s=e.cb.gh(i)).C,n-=s=s.v),e.Hh.Hp(t,s,n,i,r,0,!0)},t}()}(Y||(Y={})),function(e){e.BY=function(){function e(){}return e.P=function(e){return 0>e?-e:e},e.Mb=function(t,i){return 0<=i?e.P(t):-e.P(t)},e.Y=function(t,i){return t==i||e.P(t-i)<=e.JC*(1+(e.P(t)+e.P(i))/2)},e.Cd=function(t){return 0==t||e.P(t)<=e.JC},e.Ah=function(t,i){var r=(i=(1-(i=Math.sqrt(1-i)))/(1+i))*i;return t/(1+i)*(1+r*(.25+r*(.015625+1/256*r)))*e.EL},e.EL=1.5707963267948966,e.JC=3552713678800501e-30,e}()}(Y||(Y={})),function(e){var t=function(e){this.Wf=e,this.Kk=this.Wf.getCode(),0>this.Kk&&(this.Kk=0)};e.DY=t;var i=function(){function i(e){void 0===e&&(e=null),this.Cj=null,this.Un=!1,null!==e&&(this.Cj=new t(e))}return i.prototype.Ec=function(){return null!=this.Cj?this.Cj.Kk:0},i.prototype.Of=function(){var e=new i;return this.copyTo(e),e},i.prototype.copyTo=function(e){e.Cj=this.Cj,e.Un=this.Un},i.prototype.Qz=function(){this.Un=!this.Un},i.prototype.qm=function(){return null!=this.Cj?this.Cj.Wf:null},i.prototype.LJ=function(i){if(0>=i)throw e.i.N();if(i!=this.Ec()){if(null==(i=e.pf.geogtran(i)))throw e.i.N("Geogtran not found.");this.Cj=new t(i)}},i.prototype.Bz=function(){return null==this.Cj?null:this.Cj.Wf.toString()},i.prototype.tX=function(i){if(null==i)throw e.i.N();var r=null;try{r=e.pf.fromString(e.Sc.PE_TYPE_GEOGTRAN,i)}catch(t){throw e.i.N()}this.Cj=new t(r)},i.prototype.Nb=function(e){return e==this||!(!(e instanceof i)||(0>=this.Ec()||this.Ec()!=e.Ec())&&!this.qm().isEqual(e.qm()))&&this.Un==e.Un},i.prototype.toString=function(){var e="GeographicTransformation: "+this.Bz();return 200<e.length?e.substring(0,197)+"... ("+e.length.toString()+" characters)":e},i.create=function(e,t){var r=new i;return r.LJ(e),t&&r.Qz(),r},i.uP=function(e,t){var r=new i;return r.tX(e),t&&r.Qz(),r},i}();e.Dx=i}(Y||(Y={})),function(e){var t=function(){function e(){}return e.construct=function(t,i,r,n){var s=new e;return s.hw=t,s.iw=i,s.QY=r,s.RY=n,s},e.Ey=function(e,t){return e.hw==t.hw?e.iw==t.iw?0:e.iw<t.iw?-1:1:e.hw<t.hw?-1:1},e}(),i=function(){function e(){this.yT=[],this.zT=[],this.qp()}return e.kz=function(){return null==e.jK&&(e.jK=new e),e.jK},e.prototype.qp=function(){this.iD(this.yT),this.iD(this.zT)},e.prototype.iD=function(e){try{var i=[];i=i.sort(t.Ey);for(var r=0;r<i.length;r++)e.push(i[r])}catch(e){}},e}();e.CY=i}(Y||(Y={})),function(e){var t=function(){function e(){}return e.prototype.yD=function(e){this.Fk=e},e.prototype.WM=function(e){this.Fb=e},e.prototype.xD=function(e){this.zo=e},e.CE=function(e){return!(e.B()||1607!=e.getType()&&1736!=e.getType())},e.AE=function(e){return!(e.B()||1607!=e.getType()&&1736!=e.getType()||20>e.I())},e.BE=function(e){return!(e.B()||1607!=e.getType()&&1736!=e.getType()||20>e.I())},e}();e.Uk=t}(Y||(Y={})),function(e){e.$b=function(){function t(){}return t.TT=function(t){var i=new e.Da;return i.sx(t.es(),t.gs()),i.yj(t.es(),t.fs()),i.yj(t.ds(),t.fs()),i.yj(t.ds(),t.gs()),i},t.zh=function(t,i){return null===t?null:e.Hx.local().V(t,i,null)},t.jY=function(t,i){var r=e.Gh.local();return t=new e.Zc(t),r.V(t,i,null).next()},t.im=function(t,i,r){return e.kp.local().V(t,i,r,null)},t.ep=function(t,i,r){return e.Kx.local().V(t,i,r,null)},t.VX=function(t,i,r){var n=e.Kx.local();for(t=new e.Zc(t),i=new e.Zc(i),r=n.V(t,i,r,null),n=[];null!=(i=r.next());)n.push(i);return n},t.Nb=function(t,i,r){return e.dj.local().V(3,t,i,r,null)},t.TP=function(t,i,r){return e.dj.local().V(4,t,i,r,null)},t.RS=function(t,i,r){var n=e.Xj.local();for(t=new e.Zc(t),i=new e.Zc(i),r=n.V(t,i,r,null),n=[];null!=(i=r.next());)n.push(i);return n},t.QP=function(t,i,r){var n=e.kp.local();for(t=new e.Zc(t),i=new e.Zc(i),r=n.V(t,i,r,null),n=[];null!=(i=r.next());)n.push(i);return n},t.Ea=function(t,i,r){return e.Xj.local().V(t,i,r,null)},t.QS=function(t,i,r){if(null===(t=e.Xj.local().V(t,i,r,null,1)))return[];if(550===t.getType()){for(i=[],r=0;r<t.wa;r++)i.push(t.KR(r));return i}return 33===t.getType()?[t]:[]},t.qY=function(t,i,r){return e.dj.local().V(2,t,i,r,null)},t.contains=function(t,i,r){return e.dj.local().V(1,t,i,r,null)},t.BP=function(t,i,r){return e.dj.local().V(16,t,i,r,null)},t.touches=function(t,i,r){return e.dj.local().V(8,t,i,r,null)},t.DU=function(t,i,r){return e.dj.local().V(32,t,i,r,null)},t.TS=function(t,i,r){return e.dj.local().V(1073741824,t,i,r,null)},t.yB=function(t,i,r,n){return e.zL.local().V(t,i,r,n,null)},t.tb=function(t,i,r,n){var s=null;if(null!=r){if(s=r.Hd(),null!=n&&s.Ec()!=n.Ec()&&s.od!=n.od)throw e.i.Xk()}else if(null!=n)throw e.i.N();return t=e.rL.local().V(t,i,null),null!==s&&null!==n&&(t=e.Tc.Nh(t,s,n)),t},t.clip=function(t,i,r){return e.kL.local().V(t,e.l.construct(i.es(),i.gs(),i.ds(),i.fs()),r,null)},t.dl=function(t,i,r){if(null==t||null==i)return null;for(t=e.mL.local().V(!0,t,i,r,null),i=[];null!=(r=t.next());)r.B()||i.push(r);return i.slice(0)},t.MN=function(i,r,n,s,o,a,l,c){if(!0===o)return t.NN(i,r,n,s,a,l,c);if(o=n,null!=r){if(l=r.Hd(),null!=s&&l.Ec()!=s.Ec()){if(l.od!=s.od)throw e.i.Xk();o=[],e.Tc.XE(n,n.length,s,l,o)}}else if(null!=s)throw e.i.N();if(n=e.AC.local(),a){for(i=new e.Zc(i),r=n.V(i,r,o,a,null),i=[];null!=(a=r.next());)i.push(a);a=i.slice(0)}else for(a=[],s=0;s<i.length;s++)a[s]=n.V(i[s],r,o[s],null);return a},t.NN=function(t,i,r,n,s,o,a){if(null===i)throw e.i.N();if(null==n&&(n=4326!==i.Ec()?i.Hd():e.Tc.Zg(9001)),0!==n.od)throw e.i.N();if(e.Tc.XE(r,r.length,n,e.Tc.Zg(9001),r),n=e.FC.local(),s){for(t=new e.Zc(t),i=n.V(t,i,o,r,a,!1,s,null),r=[];null!=(o=i.next());)r.push(o);s=r.slice(0)}else{s=[];for(var l=0;l<t.length;l++)s[l]=n.V(t[l],i,o,r[l],a,!1,null)}return s},t.buffer=function(t,i,r,n,s,o,a){var l=r;if(!1===s){if(null!=i){if(s=i.Hd(),null!=n&&s.Ec()!=n.Ec()){if(s.od!=n.od)throw e.i.Xk();l=e.Tc.Nh(r,n,s)}}else if(null!=n)throw e.i.N();t=e.AC.local().V(t,i,l,null)}else{if(null===i)throw e.i.N();if(null==n&&(n=4326!==i.Ec()?i.Hd():e.Tc.Zg(9001)),0!==n.od)throw e.i.N();l=e.Tc.Nh(r,n,e.Tc.Zg(9001)),t=e.FC.local().V(t,i,o,l,a,!1,null)}return t},t.BU=function(t,i,r,n,s,o,a){if(null!=i){var l=i.Hd();if(null!=a&&l.Ec()!=a.Ec()){if(l.od!=a.od)throw e.i.Xk();r=e.Tc.Nh(r,a,l)}}else if(null!=a)throw e.i.N();for(t=new e.Zc(t),i=e.IC.local().V(t,i,r,n,s,o,null),r=[];null!=(n=i.next());)r.push(n);return r.slice(0)},t.offset=function(t,i,r,n,s,o,a){if(null!=i){var l=i.Hd();if(null!=a&&l.Ec()!=a.Ec()){if(l.od!=a.od)throw e.i.Xk();r=e.Tc.Nh(r,a,l)}}else if(null!=a)throw e.i.N();return e.IC.local().V(t,i,r,n,s,o,null)},t.iP=function(t){return e.CC.local().V(t,null)},t.jP=function(t,i){var r=e.CC.local();for(t=new e.Zc(t),i=r.V(t,i,null),r=[];null!=(t=i.next());)r.push(t);return r},t.nz=function(t,i,r){return e.Ix.local().nz(t,i,r)},t.oz=function(t,i){return e.Ix.local().oz(t,i)},t.pz=function(t,i,r,n){return e.Ix.local().pz(t,i,r,n)},t.eC=function(t,i){return e.Yl.local().V(t,i,!1,null)},t.dT=function(t,i){return e.Yl.local().rs(t,i,null)},t.QQ=function(t,i,r,n,s){var o=e.EC.local();if(null!=i){if(i=i.Hd(),null!=s&&i.Ec()!=s.Ec()){if(i.od!=s.od)throw e.i.Xk();r=e.Tc.Nh(r,s,i)}}else if(null!=s)throw e.i.N();return o.V(t,r,n,null)},t.Qr=function(t,i,r,n){var s=e.Xl.local();if(null!=i){if(i=i.Hd(),null!=n&&i.Ec()!=n.Ec()){if(i.od!=n.od)throw e.i.Xk();r=e.Tc.Nh(r,n,i)}}else if(null!=n)throw e.i.N();return s.V(t,r,null)},t.Wy=function(t,i,r,n,s){void 0===s&&(s=0);var o=e.tL.local();if(4==s)throw e.i.Ie();if(0!==s)throw e.i.Ie();if(null!==n){if(0!==n.od)throw e.i.N("Unit must be a linear unit type");r=e.Tc.Nh(r,n,e.Tc.Zg(9001))}return o.V(t,r,i,s,null)},t.WQ=function(i,r,n,s){if(null===i)return 0;if(4==s)throw e.i.Ie();if(0!==s)throw e.i.Ie();if(197==i.getType())i=t.TT(i);else if(1736!=i.getType())return 0;if(s=e.cb.sc(r),i=e.cb.zh(i,r,s),i=e.UK.XQ([i])[0],null!==n){if(2!==n.od)throw e.i.N("Unit must be a area unit type");i=e.Tc.Nh(i,e.Tc.Zg(109404),n)}return i},t.ZQ=function(t,i,r,n){if(t=e.vL.local().V(t,i,n,null),null!==r){if(0!==r.od)throw e.i.N("Unit must be a linear unit type");t=e.Tc.Nh(t,e.Tc.Zg(9001),r)}return t},t.JU=function(t,i,r){if(null===t)return 0;var n=null;if(null!=i){if(0==(n=i.Hd()).od&&null==(n=e.Tc.aG(n))&&null!==r)throw e.i.N();if(null!=r&&n.Ec()!=r.Ec()&&n.od!=r.od)throw e.i.Xk()}else if(null!=r)throw e.i.N();return 1736==t.getType()||197==t.getType()?(t=t.Ke(),null!==r?e.Tc.Nh(t,n,r):t):0},t.KU=function(t,i,r){if(null===t||t.B()||1>t.Db())return 0;var n=null;if(null!=i){if(n=i.Hd(),null!=r&&n.Ec()!=r.Ec()&&n.od!=r.od)throw e.i.Xk()}else if(null!=r)throw e.i.N();1736==t.getType()||197==t.getType()?i=t.mg():e.aa.yd(t.getType())?(i=new e.Ta(t.description)).oc(t,!0):i=t,t=0,i=i.Ga();for(var s=new e.h,o=new e.h;i.$a();)for(;i.Ha();){var a=i.ha();a.Yp(s),a.Tr(o),t+=e.h.tb(s,o)}return null!==n&&null!==r&&(t=e.Tc.Nh(t,n,r)),t},t.fP=function(e){return void 0!==e.points?t.mS(e,void 0!==e.hasZ&&e.hasZ,void 0!==e.hasM&&e.hasM):void 0!==e.rings?t.lG(e.rings,void 0!==e.hasZ&&e.hasZ,void 0!==e.hasM&&e.hasM,"P"):void 0!==e.paths?t.lG(e.paths,void 0!==e.hasZ&&e.hasZ,void 0!==e.hasM&&e.hasM,"L"):void 0!==e.x?t.nS(e):void 0!==e.xmin?t.lS(e):null},t.nS=function(t){if(null==t.x||"NaN"==t.x)return new e.Sa;var i=new e.Sa(t.x,t.y);return void 0!==t.z&&null!==t.z&&i.wX(t.z),void 0!==t.m&&null!==t.m&&i.hX(t.m),i},t.lS=function(t){if(null==t.xmin||"NaN"==t.xmin)return new e.Fh;var i=new e.Fh(t.xmin,t.ymin,t.xmax,t.ymax);return void 0!==t.zmin&&null!==t.zmin&&i.setInterval(1,0,t.zmin,t.zmax),void 0!==t.mmin&&null!==t.mmin&&i.setInterval(2,0,t.mmin,t.mmax),i},t.mS=function(t,i,r){var n=0,s=new e.de,o=3*t.points.length;0!=o%2&&o++,2>o&&(o=2);var a=e.O.truncate(3*t.points.length/2);4>a?a=4:16>a&&(a=16),o=e.Yc.Dn(o,0);var l=e.Yc.Dn(a);a=e.Yc.Dn(a);for(var c=0;c<t.points.length;c++)o.write(2*c,t.points[c][0]),o.write(2*c+1,t.points[c][1]),l.write(c,i||r?t.points[c][2]:NaN),a.write(c,r&&i?t.points[c][3]:NaN),n++;return 0!=n&&(s.resize(n),s.hn(0,o)),i&&(s.re(1),s.hn(1,l)),r&&(s.re(2),s.hn(2,0==i?l:a)),s.Pc(16777215),s},t.lG=function(t,i,r,n){var s=0,o=2;if("P"==n){var a=new e.Da;s=1,o=3}else a=new e.Ta;for(var l=e.Yc.Oh(0),c=e.Yc.Mr(0),h=0,u=0,p=[],d=[],f=0;f<t.length;f++){var y=t[f].length;if(p[f]=!1,"P"===n&&t[f][0][0]===t[f][t[f].length-1][0]&&t[f][0][1]===t[f][t[f].length-1][1]){var m=0==r||t[f][0][3]===t[f][t[f].length-1][3]||void 0===t[f][0][3]&&void 0===t[f][t[f].length-1][3];(0==i||t[f][0][2]===t[f][t[f].length-1][2]||void 0===t[f][0][2]&&void 0===t[f][t[f].length-1][2])&&m&&(p[f]=!0,--y)}y>=o?(d[f]=!1,u+=1,l.add(h),c.add(s),h+=y):d[f]=!0}for(0!=(n=3*h)%2&&n++,2>n&&(n=2),4>(f=e.O.truncate(3*h/2))?f=4:16>f&&(f=16),n=e.Yc.Dn(n,0),s=e.Yc.Dn(f),o=e.Yc.Dn(f),f=y=0;f<t.length;f++)if(!1===d[f])for(m=0;m<t[f].length;m++){var g=!1;m===t[f].length-1&&!0===p[f]&&(g=!0),g||(n.write(2*y,t[f][m][0]),n.write(2*y+1,t[f][m][1]),s.write(y,i||r?t[f][m][2]:NaN),o.write(y,r&&i?t[f][m][3]:NaN),y++)}return 0!=h&&(t=a,l.resize(u),c.resize(u),0<h&&(l.add(h),c.add(0)),t.hn(0,n),t.PJ(c),t.QJ(l)),i&&(a.re(1),a.hn(1,s)),r&&(a.re(2),a.hn(2,0==i?s:o)),a.Pc(16777215),a},t}()}(Y||(Y={})),function(e){e.Ex=function(){function e(){}return e.br=function(e){var t,i=0,r=e.length,n=e[0];for(t=0;t<r-1;t++){var s=e[t+1];i+=(s[0]-n[0])*(s[1]+n[1]),n=s}return 0<=i},e.rotate=function(t,i,r){i=i*Math.PI/180;var n=Math.cos(i),s=Math.sin(i);if(void 0!==t.paths){i={paths:[]};for(var o=0;o<t.paths.length;o++){for(var a=t.paths[o],l=[],c=0;c<a.length;c++){var h=a[c].slice(0);l.push(h);var u=n*(a[c][0]-r.x)-s*(a[c][1]-r.y)+r.x,p=s*(a[c][0]-r.x)+n*(a[c][1]-r.y)+r.y;h[0]=u,h[1]=p}i.paths.push(l),void 0!==t.hasZ&&(i.hasZ=t.hasZ),void 0!==t.hasM&&(i.hasM=t.hasM)}return i}if(void 0!==t.rings){for(i={rings:[]},o=0;o<t.rings.length;o++){a=t.rings[o],l=[];var d=e.br(a);for(c=0;c<a.length;c++)h=a[c].slice(0),l.push(h),u=n*(a[c][0]-r.x)-s*(a[c][1]-r.y)+r.x,p=s*(a[c][0]-r.x)+n*(a[c][1]-r.y)+r.y,h[0]=u,h[1]=p;e.br(l)!==d&&l.reverse(),i.rings.push(l),void 0!==t.hasZ&&(i.hasZ=t.hasZ),void 0!==t.hasM&&(i.hasM=t.hasM)}return i}if(void 0!==t.x)return i={x:n*(t.x-r.x)-s*(t.y-r.y)+r.x,y:s*(t.x-r.x)+n*(t.y-r.y)+r.y},void 0!==t.z&&(i.z=t.z),void 0!==t.m&&(i.m=t.m),void 0!==t.hasZ&&(i.hasZ=t.hasZ),void 0!==t.hasM&&(i.hasM=t.hasM),i;if(void 0!==t.points){for(i={points:[]},o=t.points,c=0;c<o.length;c++)(a=o[c].slice(0))[0]=n*(o[c][0]-r.x)-s*(o[c][1]-r.y)+r.x,a[1]=s*(o[c][0]-r.x)+n*(o[c][1]-r.y)+r.y,i.points.push(a);return void 0!==t.hasZ&&(i.hasZ=t.hasZ),void 0!==t.hasM&&(i.hasM=t.hasM),i}return null},e.JQ=function(t,i){if(void 0!==t.paths){for(var r={paths:[]},n=0;n<t.paths.length;n++){for(var s=t.paths[n],o=[],a=0;a<s.length;a++){var l=s[a].slice(0);o.push(l);var c=i.x-s[a][0];l[0]=s[a][0]+2*c}r.paths.push(o)}return void 0!==t.hasZ&&(r.hasZ=t.hasZ),void 0!==t.hasM&&(r.hasM=t.hasM),r}if(void 0!==t.rings){for(r={rings:[]},n=0;n<t.rings.length;n++){s=t.rings[n];var h=e.br(s);for(o=[],a=0;a<s.length;a++)l=s[a].slice(0),o.push(l),c=i.x-s[a][0],l[0]=s[a][0]+2*c;e.br(o)!==h&&o.reverse(),r.rings.push(o)}return void 0!==t.hasZ&&(r.hasZ=t.hasZ),void 0!==t.hasM&&(r.hasM=t.hasM),r}if(void 0!==t.x)return c=i.x-t.x,r={x:t.x+2*c,y:t.y},void 0!==t.z&&(r.z=t.z),void 0!==t.m&&(r.m=t.m),void 0!==t.hasZ&&(r.hasZ=t.hasZ),void 0!==t.hasM&&(r.hasM=t.hasM),r;if(void 0!==t.points){for(r={points:[]},n=t.points,a=0;a<n.length;a++)s=n[a].slice(0),c=i.x-s[0],s[0]+=2*c,r.points.push(s);return void 0!==t.hasZ&&(r.hasZ=t.hasZ),void 0!==t.hasM&&(r.hasM=t.hasM),r}return void 0!==t.xmin?(r={v:t.xmin,G:t.ymin,C:t.xmax,H:t.ymax},void 0!==t.zmin&&(r.zmin=t.zmin,r.zmax=t.zmax),void 0!==t.mmin&&(r.mmin=t.mmin,r.mmax=t.mmax),c=i.x-t.xmin,r.xmax=t.xmin+2*c,c=i.x-t.xmax,r.xmin=t.xmax+2*c,void 0!==t.zmin&&(r.zmin=t.zmin),void 0!==t.zmax&&(r.zmax=t.zmax),void 0!==t.mmin&&(r.mmin=t.mmin),void 0!==t.mmax&&(r.mmax=t.mmax),void 0!==t.hasZ&&(r.hasZ=t.hasZ),void 0!==t.hasM&&(r.hasM=t.hasM),r):null},e.KQ=function(t,i){if(void 0!==t.paths){for(var r={paths:[]},n=0;n<t.paths.length;n++){for(var s=t.paths[n],o=[],a=0;a<s.length;a++){var l=s[a].slice(0);o.push(l);var c=i.y-s[a][1];l[1]=s[a][1]+2*c}r.paths.push(o)}return void 0!==t.hasZ&&(r.hasZ=t.hasZ),void 0!==t.hasM&&(r.hasM=t.hasM),r}if(void 0!==t.rings){for(r={rings:[]},n=0;n<t.rings.length;n++){s=t.rings[n];var h=e.br(s);for(o=[],a=0;a<s.length;a++)l=s[a].slice(0),o.push(l),c=i.y-s[a][1],l[1]=s[a][1]+2*c;e.br(o)!==h&&o.reverse(),r.rings.push(o)}return void 0!==t.hasZ&&(r.hasZ=t.hasZ),void 0!==t.hasM&&(r.hasM=t.hasM),r}if(void 0!==t.x)return c=i.y-t.y,r={y:t.y+2*c,x:t.x},void 0!==t.z&&(r.z=t.z),void 0!==t.m&&(r.m=t.m),void 0!==t.hasZ&&(r.hasZ=t.hasZ),void 0!==t.hasM&&(r.hasM=t.hasM),r;if(void 0!==t.points){for(r={points:[]},n=t.points,a=0;a<n.length;a++)s=n[a].slice(0),c=i.y-s[1],s[1]+=2*c,r.points.push(s);return void 0!==t.hasZ&&(r.hasZ=t.hasZ),void 0!==t.hasM&&(r.hasM=t.hasM),r}return void 0!==t.xmin?(r={v:t.xmin,G:t.ymin,C:t.xmax,H:t.ymax},void 0!==t.zmin&&(r.zmin=t.zmin,r.zmax=t.zmax),void 0!==t.mmin&&(r.mmin=t.mmin,r.mmax=t.mmax),c=i.y-t.ymin,r.ymax=t.ymin+2*c,c=i.y-t.ymax,r.ymin=t.ymax+2*c,void 0!==t.zmin&&(r.zmin=t.zmin),void 0!==t.zmax&&(r.zmax=t.zmax),void 0!==t.mmin&&(r.mmin=t.mmin),void 0!==t.mmax&&(r.mmax=t.mmax),void 0!==t.hasZ&&(r.hasZ=t.hasZ),void 0!==t.hasM&&(r.hasM=t.hasM),r):null},e}()}(Y||(Y={})),function(e){e.ZK=function(){function t(){}return t.Ig=function(t,i){switch(null==i&&(i=e.ee.og()),t){case 33:return new e.Sa(i);case 322:return new e.yb(i);case 197:return new e.Fh(i);case 550:return new e.de(i);case 1607:return new e.Ta(i);case 1736:return new e.Da(i);default:throw e.i.fa("invalid argument.")}},t}()}(Y||(Y={})),function(e){var t=function(){function t(t,i){this.Te=e.ia.qf(t,-1),this.ua=new e.au,this.wl=i}return t.prototype.AW=function(e){this.ua.At(Math.min(this.Te.size,e)),this.ua.fn(e)},t.prototype.addElement=function(t,i){if(void 0===i)return this.eN(t);i=e.O.truncate(i%this.Te.size);var r=this.Te.get(i);return-1==r&&(r=this.ua.Ph(),this.Te.set(i,r)),this.ua.addElement(r,t)},t.prototype.eN=function(t){var i=this.wl.jz(t);i=e.O.truncate(i%this.Te.size);var r=this.Te.get(i);return-1==r&&(r=this.ua.Ph(),this.Te.set(i,r)),this.ua.addElement(r,t)},t.prototype.jd=function(t,i){if(void 0===i)this.KP(t);else{i=e.O.truncate(i%this.Te.size);var r=this.Te.get(i);if(-1==r)throw e.i.N();for(var n=this.ua.rc(r),s=-1;-1!=n;){var o=this.ua.lb(n);this.ua.ja(n)==t?(this.ua.jd(r,s,n),-1==this.ua.rc(r)&&(this.ua.bh(r),this.Te.set(i,-1))):s=n,n=o}}},t.prototype.KP=function(t){var i=this.wl.jz(t);i=e.O.truncate(i%this.Te.size);var r=this.Te.get(i);if(-1==r)throw e.i.N();for(var n=this.ua.rc(r),s=-1;-1!=n;){var o=this.ua.lb(n);this.ua.ja(n)==t?(this.ua.jd(r,s,n),-1==this.ua.rc(r)&&(this.ua.bh(r),this.Te.set(i,-1))):s=n,n=o}},t.prototype.rR=function(t){return t=e.O.truncate(t%this.Te.size),-1==(t=this.Te.get(t))?-1:this.ua.rc(t)},t.prototype.ER=function(e){return this.ua.lb(e)},t.prototype.vd=function(t){var i=this.wl.jz(this.ja(t));i=e.O.truncate(i%this.Te.size);var r=this.Te.get(i);if(-1==r)throw e.i.N();for(var n=this.ua.rc(r),s=-1;-1!=n;){if(n==t)return this.ua.jd(r,s,n),void(-1==this.ua.rc(r)&&(this.ua.bh(r),this.Te.set(i,-1)));s=n,n=this.ua.lb(n)}throw e.i.N()},t.prototype.ja=function(e){return this.ua.ja(e)},t.prototype.clear=function(){this.Te=e.ia.qf(this.Te.size,-1),this.ua.clear()},t.prototype.size=function(){return this.ua.TF()},t}();e.dL=t}(Y||(Y={})),function(e){var t=function(){function t(){this.Li=new e.$c(3),this.ua=new e.$c(6),this.sT=!1,this.je=-1}return t.prototype.fl=function(e){this.Li.jd(e)},t.prototype.Pw=function(){return this.Li.Ce()},t.prototype.bv=function(e){this.ua.jd(e)},t.prototype.$A=function(){return this.ua.Ce()},t.prototype.WB=function(e,t){this.Li.S(e,1,t)},t.prototype.ex=function(e,t){this.Li.S(e,2,t)},t.prototype.gX=function(e,t){this.Li.S(e,3,t)},t.prototype.UB=function(e,t){this.ua.S(e,4,t)},t.prototype.jX=function(e,t){this.ua.S(e,3,t)},t.prototype.TJ=function(e,t){this.ua.S(e,2,t)},t.prototype.Ph=function(e){var t=this.$A();return this.ua.S(t,3,this.je),this.ua.S(t,4,0),this.ua.S(t,5,e),-1!=this.je&&this.TJ(this.je,t),this.je=t},t.prototype.bh=function(e){this.LE(e);var t=this.ua.T(e,2),i=this.ua.T(e,3);return-1!=t?this.jX(t,i):this.je=i,-1!=i&&this.TJ(i,t),this.bv(e),i},t.prototype.At=function(e){this.ua.De(e)},t.prototype.PF=function(e){return this.ua.T(e,5)},t.prototype.fX=function(e,t){this.ua.S(e,5,t)},t.prototype.addElement=function(e,t){return this.tS(e,t)},t.prototype.tS=function(e,t){var i=this.Pw();this.ex(i,-1),-1==this.ua.T(e,0)&&this.ua.S(e,0,i);var r=this.ua.T(e,1);return this.WB(i,r),-1!=r&&this.ex(r,i),this.ua.S(e,1,i),this.setData(i,t),this.UB(e,this.bs(e)+1),this.sT&&this.gX(i,e),i},t.prototype.jd=function(e,t){var i=this.we(t),r=this.lb(t);return-1!=i?this.ex(i,r):this.ua.S(e,0,r),-1!=r?this.WB(r,i):this.ua.S(e,1,i),this.fl(t),this.UB(e,this.bs(e)-1),r},t.prototype.fn=function(e){this.Li.De(e)},t.prototype.getData=function(e){return this.Li.T(e,0)},t.prototype.setData=function(e,t){this.Li.S(e,0,t)},t.prototype.lb=function(e){return this.Li.T(e,2)},t.prototype.we=function(e){return this.Li.T(e,1)},t.prototype.rc=function(e){return this.ua.T(e,0)},t.prototype.Fc=function(e){return this.ua.T(e,1)},t.prototype.clear=function(){for(var e=this.je;-1!=e;)e=this.bh(e)},t.prototype.LE=function(e){for(var t=this.Fc(e);-1!=t;){var i=t;t=this.we(i),this.fl(i)}this.ua.S(e,0,-1),this.ua.S(e,1,-1),this.UB(e,0)},t.prototype.B=function(){return 0==this.Li.size},t.prototype.TF=function(){return this.Li.size},t.prototype.bs=function(e){return this.ua.T(e,4)},t.prototype.qz=function(e){return this.ua.T(e,3)},t}();e.jp=t}(Y||(Y={})),function(e){var t=function(){function t(t){void 0===t?(this.ug=new e.$c(2),this.ua=new e.$c(4),this.je=-1,this.Qv=!0):(this.ug=new e.$c(2),this.ua=new e.$c(t?4:2),this.je=-1,this.Qv=t)}return t.prototype.fl=function(e){this.ug.jd(e)},t.prototype.Pw=function(){return this.ug.Ce()},t.prototype.bv=function(e){this.ua.jd(e)},t.prototype.$A=function(){return this.ua.Ce()},t.prototype.Ph=function(){var e=this.$A();return this.Qv&&(this.ua.S(e,3,this.je),-1!=this.je&&this.ua.S(this.je,2,e),this.je=e),e},t.prototype.bh=function(e){for(var t=this.rc(e);-1!=t;){var i=t;t=this.lb(t),this.fl(i)}this.Qv&&(t=this.ua.T(e,2),i=this.ua.T(e,3),-1!=t?this.ua.S(t,3,i):this.je=i,-1!=i&&this.ua.S(i,2,t)),this.bv(e)},t.prototype.At=function(e){this.ua.De(e)},t.prototype.addElement=function(e,t){var i=this.ua.T(e,1),r=this.Pw();return-1!=i?this.ug.S(i,1,r):this.ua.S(e,0,r),this.ua.S(e,1,r),this.ug.S(r,0,t),r},t.prototype.fn=function(e){this.ug.De(e)},t.prototype.jd=function(e,t,i){-1!=t?(this.ug.S(t,1,this.ug.T(i,1)),this.ua.T(e,1)==i&&this.ua.S(e,1,t)):(this.ua.S(e,0,this.ug.T(i,1)),this.ua.T(e,1)==i&&this.ua.S(e,1,-1)),this.fl(i)},t.prototype.Hy=function(e,t){var i=this.ua.T(e,1),r=this.ua.T(t,0);-1!=r&&(-1!=i?this.ug.S(i,1,r):this.ua.S(e,0,r),this.ua.S(e,1,this.ua.T(t,1))),this.Qv&&(e=this.ua.T(t,2),i=this.ua.T(t,3),-1!=e?this.ua.S(e,3,i):this.je=i,-1!=i&&this.ua.S(i,2,e)),this.bv(t)},t.prototype.ja=function(e){return this.ug.T(e,0)},t.prototype.Sj=function(e,t){this.ug.S(e,0,t)},t.prototype.lb=function(e){return this.ug.T(e,1)},t.prototype.rc=function(e){return this.ua.T(e,0)},t.prototype.Jn=function(e){return this.ja(this.rc(e))},t.prototype.clear=function(){this.ug.mj(!0),this.ua.mj(!0),this.je=-1},t.prototype.B=function(){return 0==this.ug.size},t.prototype.TF=function(){return this.ug.size},t.prototype.qz=function(e){return this.ua.T(e,3)},t}();e.au=t}(Y||(Y={})),function(e){e.ta=function(){function t(){}return t.Wd=function(e,t,i){return t=t.xr(),e=null!=e&&void 0!==e.Xd?e.Xd(0):0,i&&(t*=4,e*=1.1),Math.max(e,t)},t.Er=function(e){return 2*Math.sqrt(2)*e},t.rN=function(e){return Math.sqrt(2)*e},t.kj=function(i,r,n){var s=new e.l;return r.A(s),t.Wd(i,s,n)},t.wE=function(e,t,i){return t=t.Tg(1,0).xr(),e=null!=e?e.Xd(1):0,i&&(t*=4,e*=1.1),Math.max(e,t)},t.mv=function(t,i){var r=new e.l;return t.xc(r),t=new e.l,i.xc(t),r.Zb(t),r},t.YN=function(t){var i=new e.l;if(t.xc(i),i.B())return null;var r=new e.du(i,8),n=-1,s=new e.l,o=!1;do{for(var a=0,l=t.da();a<l;a++){if(t.Rj(a,s),-1==(n=r.Jz(a,s,n))){if(o)throw e.i.fa("internal error");t.yp(i,!1),o=!0,r.reset(i,8);break}o=!1}}while(o);return r},t.nE=function(t){var i=new e.l;t.xc(i);for(var r=new e.du(i,8),n=-1,s=t.Ga(),o=new e.l,a=!1;s.$a();)for(;s.Ha();){var l=s.ha(),c=s.wb();if(l.A(o),-1==(n=r.Jz(c,o,n))){if(a)throw e.i.Qa();t.yp(i,!1),a=!0,r.reset(i,8),s.Zi();break}}return r},t.jj=function(t,i){var r=new e.l;t.xc(r);for(var n=new e.du(r,8),s=-1,o=new e.l,a=t.Ga(),l=!1;a.$a();)for(;a.Ha();){var c=a.ha(),h=a.wb();if(c.A(o),o.isIntersecting(i)&&-1==(s=n.Jz(h,o,s))){if(l)throw e.i.fa("internal error.");t.yp(r,!1),l=!0,n.reset(r,8),a.Zi();break}}return n},t.oE=function(t,i){for(var r=new e.du(i,8),n=new e.h,s=!1,o=new e.l,a=0;a<t.I();a++)if(t.D(a,n),i.contains(n)&&(o.K(n),-1==r.vj(a,o))){if(s)throw e.i.Qa();s=!0,a=new e.l,t.yp(a,!1),r.reset(a,8),a=-1}return r},t.lR=function(t,i,r){var n=new e.l,s=new e.l;t.xc(n),i.xc(s),n.W(r,r),s.W(r,r);var o=new e.l;o.K(n),o.Ea(s),t=t.Ga(),i=i.Ga();var a=new e.xC;a.aC(r);var l=!1;for(a.pK();t.$a();)for(;t.Ha();)t.ha().A(n),n.isIntersecting(o)&&(l=!0,(r=new e.l).K(n),a.JD(t.wb(),r));if(a.iF(),!l)return null;for(n=!1,a.oK();i.$a();)for(;i.Ha();)i.ha().A(s),s.isIntersecting(o)&&(n=!0,(r=new e.l).K(s),a.ED(i.wb(),r));return a.hF(),n?a:null},t.mR=function(t,i,r,n,s){var o=t.getType(),a=i.getType(),l=new e.l,c=new e.l;t.xc(l),i.xc(c),l.W(r,r),c.W(r,r);var h=new e.l;h.K(l),h.Ea(c);var u=new e.xC;u.aC(r);var p=!1;u.pK();var d=0;for(r=t.da();d<r;d++)n&&1736==o&&!t.Ev(d)||(t.Rj(d,l),l.isIntersecting(h)&&(p=!0,u.JD(d,l)));if(u.iF(),!p)return null;for(t=!1,u.oK(),n=0,r=i.da();n<r;n++)s&&1736==a&&!i.Ev(n)||(i.Rj(n,c),c.isIntersecting(h)&&(t=!0,u.ED(n,c)));return u.hF(),t?u:null},t.Ru=function(t,i,r){if(t!=i)for(var n=0;n<r;n++)null==t[n]?t[n]=e.h.al(i[n]):t[n].L(i[n])},t.Jy=function(e,t,i,r){var n=0;for(r+=0;n<r;i++,n++)null==e[n]&&(e[n]=[0,0]),e[n][0]=t[i].x,e[n][1]=t[i].y},t.Iy=function(t,i,r,n){var s=i,o=0;for(i=n+i;s<i;o++,s++)null==t[s]?t[s]=e.h.construct(r[o][0],r[o][1]):t[s].ma(r[o][0],r[o][1])},t.kP=function(t,i,r){if(t!=i)for(var n=0;n<r;n++)null==t[n]?t[n]=new e.Sa(i[n]):i[n].copyTo(t[n])},t.vE=function(e,t,i,r){var n=0;return null!=e&&(n=e.Xd(0),r&&!i||null==e||(n+=1.01*e.vz(0))),i&&(t*=4,n*=1.01),Math.max(n,t)},t.ty=function(e,i,r){return t.vE(e,i.xr(),r,!1)},t.gO=function(i,r){var n=new e.l;return r.A(n),t.ty(i,n,!0)},t.uy=function(e,i){return t.vE(e,i.xr(),!1,!0)},t.Hu=function(i,r){var n=new e.l;return r.A(n),t.uy(i,n)},t.AG=function(t,i,r,n){n*=n;var s=new e.h;if(s.uc(t,i),(t=new e.h).uc(r,i),i=s.Sk(),r=t.Sk(),i<=n&&r<=n)return!0;var o=e.lc.ox(s.wi(t));return(o<=n*i||o<=n*r)&&0<=s.Qh(t)},t.dK=function(t,i,r,n){for(var s=0;s<i;s++){var o=t[s].y,a=e.O.Rk(o,r,n);a!=o&&(t[s].y=a)}},t}()}(Y||(Y={})),function(e){var t,i,r=function(){function e(e){this.Ya=e}return e.prototype.compare=function(e,t,i){e=e.ja(i),i=this.Ya.nk(t);var r=this.Ya.nk(e);return i<r?-1:i==r?o.gq(t)&&o.Gv(e)?-1:o.gq(e)&&o.Gv(t)?1:0:1},e}(),n=function(){function e(e){this.Ya=e}return e.prototype.nr=function(e,t,i){this.Ya.GX(i,e,t)},e.prototype.$p=function(e){return this.Ya.nk(e)},e}();(i=t||(t={}))[i.initialize=0]="initialize",i[i.pIn=1]="pIn",i[i.pL=2]="pL",i[i.pR=3]="pR",i[i.pT=4]="pT",i[i.right=5]="right",i[i.left=6]="left",i[i.all=7]="all";var s=function(){function t(){this.Ya=null,this.Qi=new e.Nc,this.hi=new e.ia(0),this.sg=[0,0]}return t.prototype.Xi=function(e,t){this.Qi.oa=e.oa-t,this.Qi.va=e.va+t,this.hi.resize(0),this.he=0,this.sg[0]=0},t.prototype.EB=function(t,i,r){if(t>i)throw e.i.N();this.Qi.oa=t-r,this.Qi.va=i+r,this.hi.resize(0),this.he=0,this.sg[0]=0},t.prototype.Uo=function(e,t){this.Qi.oa=e-t,this.Qi.va=e+t,this.hi.resize(0),this.he=0,this.sg[0]=0},t.prototype.next=function(){if(!this.Ya.lq)throw e.i.Hb();if(0>this.he)return-1;for(var t=!0;t;)switch(this.sg[this.he]){case 1:t=this.FU();break;case 2:t=this.GU();break;case 3:t=this.HU();break;case 4:t=this.IU();break;case 5:t=this.GW();break;case 6:t=this.kT();break;case 7:t=this.tN();break;case 0:t=this.Gz();break;default:throw e.i.Qa()}return-1!=this.Og?this.Mp()>>1:-1},t.construct=function(e){var i=new t;return i.Ya=e,i.hi.Jb(20),i.he=-1,i},t.prototype.Gz=function(){return this.Og=this.vH=this.Mi=this.Lc=-1,null!=this.Ya.me&&0<this.Ya.me.size?(this.sg[0]=1,this.Mi=this.Ya.kf,!0):(this.he=-1,!1)},t.prototype.FU=function(){if(this.Lc=this.Mi,-1==this.Lc)return this.Og=this.he=-1,!1;var e=this.Ya.Np(this.Lc);return this.Qi.va<e?(e=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),-1!=e&&(this.ei=this.Ya.kl(e),this.sg[++this.he]=6),!0):e<this.Qi.oa?(e=this.Ya.mk(this.Lc),this.Mi=this.Ya.lk(this.Lc),-1!=e&&(this.ei=this.Ya.Zr(e),this.sg[++this.he]=5),!0):(this.sg[this.he]=2,this.vH=this.Lc,e=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),-1!=e&&(this.ei=this.Ya.kl(e),this.sg[++this.he]=7),!0)},t.prototype.GU=function(){if(this.Lc=this.Mi,-1==this.Lc)return this.sg[this.he]=3,this.Mi=this.Ya.lk(this.vH),!0;if(this.Ya.Np(this.Lc)<this.Qi.oa){var e=this.Ya.mk(this.Lc);return this.Mi=this.Ya.lk(this.Lc),-1!=e&&(this.ei=this.Ya.Zr(e),this.sg[++this.he]=5),!0}return e=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),-1!=e&&(this.ei=this.Ya.kl(e),this.sg[++this.he]=7),-1!=(e=this.Ya.lk(this.Lc))&&this.hi.add(e),!0},t.prototype.HU=function(){if(this.Lc=this.Mi,-1==this.Lc)return this.sg[this.he]=4,!0;if(this.Qi.va<this.Ya.Np(this.Lc)){var e=this.Ya.mk(this.Lc);return this.Mi=this.Ya.qj(this.Lc),-1!=e&&(this.ei=this.Ya.kl(e),this.sg[++this.he]=6),!0}return e=this.Ya.mk(this.Lc),this.Mi=this.Ya.lk(this.Lc),-1!=e&&(this.ei=this.Ya.kl(e),this.sg[++this.he]=7),-1!=(e=this.Ya.qj(this.Lc))&&this.hi.add(e),!0},t.prototype.IU=function(){if(0==this.hi.size)return this.Og=this.he=-1,!1;this.Lc=this.hi.get(this.hi.size-1),this.hi.resize(this.hi.size-1);var e=this.Ya.mk(this.Lc);return-1!=e&&(this.ei=this.Ya.kl(e),this.sg[++this.he]=7),-1!=this.Ya.qj(this.Lc)&&this.hi.add(this.Ya.qj(this.Lc)),-1!=this.Ya.lk(this.Lc)&&this.hi.add(this.Ya.lk(this.Lc)),!0},t.prototype.kT=function(){return this.Og=this.ei,-1!=this.Og&&o.gq(this.Mp())&&this.Ya.nk(this.Mp())<=this.Qi.va?(this.ei=this.SF(),!1):(this.he--,!0)},t.prototype.GW=function(){return this.Og=this.ei,-1!=this.Og&&o.Gv(this.Mp())&&this.Ya.nk(this.Mp())>=this.Qi.oa?(this.ei=this.QR(),!1):(this.he--,!0)},t.prototype.tN=function(){return this.Og=this.ei,-1!=this.Og&&o.gq(this.Mp())?(this.ei=this.SF(),!1):(this.he--,!0)},t.prototype.SF=function(){return this.Ya.Sf?this.Ya.$f.lb(this.Og):this.Ya.Ti.lb(this.Og)},t.prototype.QR=function(){return this.Ya.Sf?this.Ya.$f.we(this.Og):this.Ya.Ti.we(this.Og)},t.prototype.Mp=function(){return this.Ya.Sf?this.Ya.$f.ja(this.Og):this.Ya.Ti.getData(this.Og)},t}();e.EY=s;var o=function(){function t(e){this.Am=this.$h=this.$f=this.Ti=this.Km=this.Ej=this.me=this.Fj=null,this.Sf=e,this.lq=this.Sv=!1}return t.prototype.kr=function(){this.Nk(!0)},t.prototype.Br=function(t,i){if(!this.Sv)throw e.i.Hb();this.Fj.push(new e.Nc(t,i))},t.prototype.Fp=function(){if(!this.Sv)throw e.i.fa("invalid call");this.Sv=!1,this.lq=!0,this.Sf||(this.vS(),this.Zv=this.Fj.length)},t.prototype.vj=function(t){if(!this.Sf||!this.lq)throw e.i.N("invalid call");if(-1==this.kf){var i=this.Fj.length;if(this.iA){var r=new e.ia(0);r.Jb(2*i),this.bJ(r),this.$h.Jb(2*i),this.$h.resize(0),this.aJ(r),this.Km.resize(i,-1),this.Km.Wj(-1,0,i),this.iA=!1}else this.Km.Wj(-1,0,i);this.kf=this.Tu()}i=this.pG(t<<1,this.kf),r=this.$f.addElement(1+(t<<1),this.xz(i)),this.VJ(i,r),this.Km.set(t,i),this.Zv++},t.prototype.remove=function(t){if(!this.Sf||!this.lq)throw e.i.fa("invalid call");var i=this.Km.get(t);if(-1==i)throw e.i.N("the interval does not exist in the interval tree");this.Km.set(t,-1),this.Zv--;var r=this.xz(i),n=this.$f.ZR(r);this.$f.vd(this.wR(i),r),this.$f.vd(this.TR(i),r),0==(t=this.$f.size(r))&&(this.$f.MP(r),this.ZJ(n,-1)),this.Ej.jd(i),r=this.UF(n);var s=this.qj(n),o=this.lk(n);for(i=0;!(0<t||n==this.kf||-1!=s&&-1!=o);)n==this.qj(r)?-1!=s?(this.Ok(r,s),this.Uj(s,r),this.Ok(n,-1)):-1!=o?(this.Ok(r,o),this.Uj(o,r),this.Qk(n,-1)):this.Ok(r,-1):-1!=s?(this.Qk(r,s),this.Uj(s,r),this.Ok(n,-1)):-1!=o?(this.Qk(r,o),this.Uj(o,r),this.Qk(n,-1)):this.Qk(r,-1),this.Uj(n,-1),i++,n=r,t=-1!=(r=this.mk(n))?this.$f.size(r):0,s=this.qj(n),o=this.lk(n),r=this.UF(n)},t.prototype.reset=function(){if(!this.Sf||!this.lq)throw e.i.N("invalid call");this.Nk(!1)},t.prototype.size=function(){return this.Zv},t.prototype.getIterator=function(){return s.construct(this)},t.prototype.bJ=function(e){for(var t=this.Fj.length,i=0;i<2*t;i++)e.add(i);this.HX(e,2*t)},t.prototype.aJ=function(e){for(var t=NaN,i=0;i<e.size;i++){var r=e.get(i),n=this.nk(r);n!=t&&(this.$h.add(r),t=n)}},t.prototype.vS=function(){var t=this.Fj.length,i=new e.ia(0);i.Jb(2*t),this.bJ(i),this.$h.Jb(2*t),this.$h.resize(0),this.aJ(i),this.Ej.De(t),this.Ti.fn(2*t);var r=e.Yc.Oh(t);for(r.Wj(-1,0,t),this.kf=this.Tu(),t=0;t<i.size;t++){var n=i.get(t),s=r.get(n>>1);-1!=s?this.VJ(s,this.Ti.addElement(this.xz(s),n)):(s=this.pG(n,this.kf),r.set(n>>1,s))}},t.prototype.pG=function(t,i){var r=i,n=i,s=-1,o=0,a=this.$h.size-1,l=0,c=t>>1,h=NaN,u=NaN,p=!0,d=this.DR(c);for(c=this.AR(c);p;){o<a?(l=o+e.O.truncate((a-o)/2),-1==this.gz(r)&&this.FJ(r,this.$h.get(l),this.$h.get(l+1))):-1==this.gz(r)&&this.FJ(r,this.$h.get(o),this.$h.get(o));var f=this.Np(r);if(c<f)-1!=i&&(i==r?(n=r,h=f,u=-1!=(i=this.qj(r))?this.Np(i):NaN):u>f&&(f<h?this.Ok(n,r):this.Qk(n,r),this.Qk(r,i),this.Sf&&(this.Uj(r,n),this.Uj(i,r)),n=r,h=f,i=-1,u=NaN)),-1==(a=this.xR(r))&&(a=this.Tu(),this.dX(r,a)),r=a,a=l;else if(d>f)-1!=i&&(i==r?(n=r,h=f,u=-1!=(i=this.lk(r))?this.Np(i):NaN):u<f&&(f<h?this.Ok(n,r):this.Qk(n,r),this.Ok(r,i),this.Sf&&(this.Uj(r,n),this.Uj(i,r)),n=r,h=f,i=-1,u=NaN)),-1==(o=this.UR(r))&&(o=this.Tu(),this.oX(r,o)),r=o,o=l+1;else{-1==(p=this.mk(r))&&(p=this.zP(r),this.ZJ(r,p));var y=this.fN(p,t);s=this.xP(),this.qX(s,p),this.cX(s,y),r!=i&&(f<h?this.Ok(n,r):this.Qk(n,r),this.Sf&&this.Uj(r,n),-1!=i&&(u<f?this.Ok(r,i):this.Qk(r,i),this.Sf&&this.Uj(i,r))),p=!1}}return s},t.prototype.Tu=function(){return this.me.Ce()},t.prototype.zP=function(e){return this.Sf?this.$f.Pr(e):this.Ti.Ph(e)},t.prototype.xP=function(){return this.Ej.Ce()},t.prototype.Nk=function(t){t?(this.Sv=this.iA=!0,this.lq=!1,null==this.$h?this.$h=e.Yc.Oh(0):this.$h.resize(0),null==this.Fj?this.Fj=[]:this.Fj.length=0):this.iA=!1,this.Sf?null==this.Km?(this.Km=e.Yc.Oh(0),this.$f=new e.Yj,this.$f.Vo(new r(this))):this.$f.clear():null==this.Ti?this.Ti=new e.jp:this.Ti.clear(),null==this.me?(this.Ej=new e.$c(3),this.me=new e.$c(this.Sf?8:7)):(this.Ej.mj(!1),this.me.mj(!1)),this.kf=-1,this.Zv=0},t.prototype.FJ=function(e,t,i){this.XW(e,t),this.YW(e,i)},t.prototype.Np=function(e){var t=this.gz(e);return-1==t?NaN:(t=this.nk(t))==(e=this.nk(this.gR(e)))?t:.5*(t+e)},t.prototype.XW=function(e,t){this.me.S(e,0,t)},t.prototype.YW=function(e,t){this.me.S(e,1,t)},t.prototype.dX=function(e,t){this.me.S(e,3,t)},t.prototype.oX=function(e,t){this.me.S(e,4,t)},t.prototype.ZJ=function(e,t){this.me.S(e,2,t)},t.prototype.Ok=function(e,t){this.me.S(e,5,t)},t.prototype.Qk=function(e,t){this.me.S(e,6,t)},t.prototype.Uj=function(e,t){this.me.S(e,7,t)},t.prototype.qX=function(e,t){this.Ej.S(e,0,t)},t.prototype.fN=function(e,t){return this.Sf?this.$f.addElement(t,e):this.Ti.addElement(e,t)},t.prototype.cX=function(e,t){this.Ej.S(e,1,t)},t.prototype.VJ=function(e,t){this.Ej.S(e,2,t)},t.prototype.kl=function(e){return this.Sf?this.$f.rc(e):this.Ti.rc(e)},t.prototype.Zr=function(e){return this.Sf?this.$f.Fc(e):this.Ti.Fc(e)},t.gq=function(e){return!(1&e)},t.Gv=function(e){return!(1&~e)},t.prototype.gz=function(e){return this.me.T(e,0)},t.prototype.gR=function(e){return this.me.T(e,1)},t.prototype.mk=function(e){return this.me.T(e,2)},t.prototype.xR=function(e){return this.me.T(e,3)},t.prototype.UR=function(e){return this.me.T(e,4)},t.prototype.qj=function(e){return this.me.T(e,5)},t.prototype.lk=function(e){return this.me.T(e,6)},t.prototype.UF=function(e){return this.me.T(e,7)},t.prototype.xz=function(e){return this.Ej.T(e,0)},t.prototype.wR=function(e){return this.Ej.T(e,1)},t.prototype.TR=function(e){return this.Ej.T(e,2)},t.prototype.DR=function(e){return this.Fj[e].oa},t.prototype.AR=function(e){return this.Fj[e].va},t.prototype.HX=function(t,i){null==this.Am&&(this.Am=new e.Xt);var r=new n(this);this.Am.sort(t,0,i,r)},t.prototype.GX=function(e,i,r){var n=this;e.Vd(i,r,(function(e,i){var r=n.nk(e),s=n.nk(i);return r<s||r==s&&t.gq(e)&&t.Gv(i)?-1:1}))},t.prototype.nk=function(e){var i=this.Fj[e>>1];return t.gq(e)?i.oa:i.va},t}();e.sr=o}(Y||(Y={})),function(e){var t=function(){function t(t){if(null==t)throw e.i.fa("Invalid arguement");this.hf=t;var i=t.nR();i.hS()?t.ef.IG()?this.lo=e.si.PannableFold:this.lo=e.si.Clip:this.lo=e.si.DontClip,i.iS()?t.Yf.IG()?this.Qm=e.si.PannableFold:this.Qm=e.si.Clip:this.Qm=e.si.DontClip,this.Bm=i.Jr,this.mH=i.Vu,t=this.hf.sH,this.aH=t.hs(2147483648),this.Uv=t.hs(1073741824)}return t.zh=function(e,t,i){return t.ww.zh(e,i)},t.Rt=function(e,t,i,r){return e.ww.Rt(t,i,r)},t.Qt=function(e,t,i,r){if(i=0>i?t.length:i,(e=e.ww.Rt(t,i,r))==i)return e;for(var n=t=0;n<i;n++){var s=r[n];s.isNaN()||(t<n&&r[t].L(s),t++)}for(;t<i;t++)r[t].Rc();return e},t.transform=function(i,r,n,s,o){if(i.isIdentity())return e.ta.kP(s,r,n),n;for(var a=[],l=0,c=0;c<n;){for(var h=Math.min(a.length,n-c),u=c,p=0;u<h;u++,p++)null==a[p]?a[p]=r[u].D():r[u].D(a[p]);var d=o?t.Qt(i,a,h,a):t.Rt(i,a,h,a);for(p=u=0;u<d;u++,p++)null==s[c]&&(s[c]=new e.Sa(r[c])),s[c].Cb(a[p]);c+=h,l+=d}return l},t.prototype.Rt=function(t,i,r){if(this.hf.isIdentity())return t!=r&&e.ta.Ru(r,t,i),i;var n=this.hf.ef,s=this.hf.Yf,o=n.Sb(),a=s.Sb();if(0==o&&o===a){var l=n.Qp();return s=l/(s=s.Qp()),(l=new e.Dd).setScale(s,s),l.eY(t,i,r),i}if(l=e.O.Fu(Math.min(i,64)),3==o){var c=n.Ji;o=(n=c.fk()).Sb(),r!=t&&e.ta.Ru(r,t,i),e.zb.$k(c,r,i,!0),c.Qt(e.bm.forward,r,i),e.zb.Zk(c,r,i,!0)}if(3==o||3===a)throw e.i.fa("image: transform_in_place_");if(2==o)this.lo==e.si.Clip?(r!=t&&e.ta.Ru(r,t,i),t=n.ml(),e.zb.OS(t,n,r,i)):(r!=t&&e.ta.Ru(r,t,i),n.Wc()&&(o=n.Xd(0),c=n.Oe(),e.zb.EX(r,i,c,o),e.zb.qF(r,i,n,0))),e.zb.IL(n,r,i,l);else for(o=n.Xd(0),c=n.Oe(),n=0;n<i;n++)e.zb.FX(t[n],c,o,r[n]);for(e.zb.GL(this.hf,r,i,l),t=0,(a=2==a)?t=s.zi():isNaN(this.Bm)||(t=this.Bm),a&&this.Qm!=e.si.Clip||e.zb.qF(r,i,s.sc(),t),a&&(e.zb.yG(r,i,s,this.Qm),e.zb.HL(s,r,i,l)),t=i,n=0;n<i;++n)r[n].isNaN()&&t--;return t},t.prototype.zh=function(t,i){if(this.hf.isIdentity()||t.B())return t;if(33==t.getType())return this.XI(t);var r=this.hf.ef,n=this.hf.Yf,s=r.Sb(),o=n.Sb();if(0==s&&s==o)return i=r.Qp(),i/=n=n.Qp(),(n=new e.Dd).setScale(i,i),(t=e.aa.jg(t)).Oc(n),t;switch(t.getType()){case 1607:case 1736:t=this.VI(t,i);break;case 550:t=this.fW(t,i);break;case 197:t=this.eW(t,i);break;default:throw e.i.fa("")}return t},t.prototype.XI=function(t){var i=t.D(),r=[];return r[0]=i,this.Rt(r,1,r),(t=new e.Sa(t)).Cb(r[0]),t},t.prototype.VI=function(t,i){if(t.tm())throw e.i.fa("curves not supported");var r=t.getType();if(1736==r)return this.gW(t,i);if(1607==r)return this.hW(t,i);throw e.i.fa("projectMultiPath")},t.prototype.gW=function(i,r){var n=this.hf.ef,s=this.hf.Yf,o=n.Sb(),a=s.Sb(),l=e.O.Fu(Math.min(i.I(),64)),c=e.Da.jg(i);3==o&&(o=(n=(i=n.Ji).fk()).Sb(),c=i.$k(c,!0),this.wp(i,e.bm.forward,c),c=i.Zk(c,!0)),i=null,3==a&&(a=(s=(i=s.Ji).fk()).Sb());var h=2==o,u=2==a,p=u?s.sc():s,d=!u&&!this.Uv;a=!1;var f=c;if(h){if((f=e.zb.UI(f,n,this.lo,r)).B())return f}else{if(c=new e.l,f.xc(c),o=n.Oe(),c.G<o.G||c.H>o.H){var y=e.l.construct(c.v-1,o.G,c.C+1,o.H);if((f=e.ri.Nu(f,y,n,NaN,0,r)).B())return f}c.R()>2*o.R()&&(f=e.zb.Hp(f,-2*o.R(),2*o.R(),n,!0,0,!0,r))}c=this.mH,(o=!isNaN(c))&&(f=e.Xl.local().V(f,c,r)),y=u?s.kk():null;var m=NaN;h&&(m=n.zi());var g=null!=s.Wr();if(this.aH)h&&(e.zb.ur(n,m,f,l),o&&(h=n.hh(),c*=(m=n.sc().hh())/h)),e.zb.tr(this.hf,f,d,l),o&&(h=n.sc().hh(),c*=(m=s.sc().hh())/h),n=f;else{var v=new e.Ta(f.description);v.DD(f),h&&(e.zb.ur(n,m,v,l),o&&(h=n.hh(),c*=(m=n.sc().hh())/h)),e.zb.tr(this.hf,v,d,l),o&&(h=n.sc().pm(),c*=(m=s.sc().pm())/h),d=NaN,u?(y=s.kk(),d=s.zi()):isNaN(this.Bm)||(d=this.Bm),h=t.tv(n)|t.tv(s),m=10*p.Xd(0),this.Uv&&(h=3,m=0),n=e.zb.UQ(f,n,v,p,d,r,h,m)}return g&&(n=e.zb.XD(n,s,r)),u&&(a||(u=p.Oe().R(),n.Tg(0,0).R()>=u-p.Xd(0)&&(p=y.getNorthPoleLocation(),u=y.getSouthPoleLocation(),f=y.getNorthPoleGeometry(),y=y.getSouthPoleGeometry(),d=0,f==e.Cg.PE_POLE_POINT&&p!=e.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(d=1),y==e.Cg.PE_POLE_POINT&&u!=e.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(d|=2),0!==d&&(a=!0))),n=e.zb.Mz(n,s,this.Qm,r),o&&(n=e.Xl.local().V(n,c,r)),e.zb.Lx(s,n,l)),n.B()||(a&&(n=e.Yl.local().V(n,s,!1,r)),null!=i&&(n=i.Zk(n,!1),this.wp(i,e.bm.reverse,n),n=i.$k(n,!1))),n},t.tv=function(t){if(2!=t.Sb())return 0;var i=0,r=t.kk();t=r.getNorthPoleLocation();var n=r.getSouthPoleLocation(),s=r.getNorthPoleGeometry();return r=r.getSouthPoleGeometry(),s==e.Cg.PE_POLE_POINT&&t!=e.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(i=1),r==e.Cg.PE_POLE_POINT&&n!=e.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(i|=2),i},t.prototype.hW=function(i,r){var n=this.hf.ef,s=this.hf.Yf,o=n.Sb(),a=s.Sb(),l=e.O.Fu(Math.min(i.I(),64)),c=e.Ta.jg(i);3==o&&(o=(n=(i=n.Ji).fk()).Sb(),c=i.$k(c,!0),this.wp(i,e.bm.forward,c),c=i.Zk(c,!0)),i=null,3==a&&(a=(s=(i=s.Ji).fk()).Sb());var h=2==o;o=(a=2==a)?s.sc():s;var u=!a&&!this.Uv;if(h){if((c=e.zb.UI(c,n,this.lo,r)).B())return c}else{var p=new e.l;c.xc(p);var d=n.Oe();if((p.G<d.G||p.H>d.H)&&(p=e.l.construct(p.v-1,d.G,p.C+1,d.H),(c=e.ri.Nu(c,p,n,NaN,0,r)).B()))return c}var f=NaN;h&&(f=n.zi()),p=null!=s.Wr(),d=this.mH;var y=!isNaN(d);if(y&&(c=e.Xl.local().V(c,d,r)),this.aH)h&&e.zb.ur(n,f,c,l),y&&(h=n.hh(),d*=(f=n.sc().hh())/h),e.zb.tr(this.hf,c,u,l),y&&(h=n.sc().hh(),d*=(f=s.sc().hh())/h),n=c;else{var m=new e.Ta(c.description);m.DD(c),h&&(e.zb.ur(n,f,m,l),y&&(h=n.hh(),d*=(f=n.sc().hh())/h)),e.zb.tr(this.hf,m,u,l),y&&(h=n.sc().hh(),d*=(f=s.sc().hh())/h),u=NaN,a?u=s.zi():isNaN(this.Bm)||(u=this.Bm),h=t.tv(n)|t.tv(s),f=10*o.Xd(0),this.Uv&&(h=3,f=0),n=e.zb.VQ(c,n,m,o,u,r,h,f)}return p&&(n=e.zb.XD(n,s,r)),a&&(n=e.zb.Mz(n,s,this.Qm,r),y&&(n=e.Xl.local().V(n,d,r)),e.zb.Lx(s,n,l)),n.B()||null!=i&&(n=i.Zk(n,!1),this.wp(i,e.bm.reverse,n),n=i.$k(n,!1)),n},t.prototype.eW=function(t,i){var r=(t.ca()+t.R())/400;return 0!=r?(r=e.Xl.local().V(t,r,i),r=this.VI(r,i),i=t.Ia(),r.bn(i)):(i=new e.Sa(t.Ip()),r=this.XI(i),i=t.Ia(),r.B()?i.Oa():(t.copyTo(i),t=r.D(),i.K(t.x,t.y,t.x,t.y))),i},t.prototype.fW=function(t,i){t=e.aa.jg(t);var r=this.hf.ef,n=this.hf.Yf,s=r.Sb(),o=n.Sb(),a=e.O.Fu(Math.min(t.I(),64));if(3==s){var l=r.Ji;s=(r=l.fk()).Sb(),t=l.Zk(t,!0),this.wp(l,e.bm.forward,t),t=l.$k(t,!0)}if(2==s){if(this.lo==e.si.Clip?t=e.Xj.local().V(t,r.ml(),r,i):r.Wc()&&(s=new e.l,t.xc(s),r.Oe().contains(s)||(this.lo==e.si.PannableFold&&(t=e.zb.lj(t,r)),e.zb.Jt(t,r.Oe(),r.Xd(0),!0),t=e.zb.Fn(t,r,0,!0,0,i))),t.B())return t;e.zb.ur(r,0,t,a)}else e.zb.Jt(t,r.Oe(),r.Xd(0),!0);return e.zb.tr(this.hf,t,!1,a),r=0,s=!1,l=null,3==o&&(s=!0,o=(n=(l=n.Ji).fk()).Sb()),(o=2==o)?r=n.zi():isNaN(this.Bm)||(r=this.Bm),o&&this.Qm!=e.si.Clip||(t=e.zb.Fn(t,n.sc(),r,!1,0,i)),o&&(t=e.zb.Mz(t,n,this.Qm,i),e.zb.Lx(n,t,a),t.B())||s&&(t=l.Zk(t,!0),this.wp(l,e.bm.reverse,t),t=l.$k(t,!0)),t},t.prototype.wp=function(t,i,r){var n=r.I();if(0!=n){for(var s=r.ub(0),o=e.O.lg(200,0),a=[],l=0;l<n;){var c=Math.min(100,n-l);s.Vw(2*l,2*c,o,2,!0);for(var h=0;h<c;++h)a[h]=e.h.construct(o[2*l],o[2*l+1]);t.Qt(i,a,c),l+=c}r.Pc(1993)}},t.Uy=function(t,i,r){if(null==t||null==i||!i.Wc())throw e.i.fa("Invalid Arguement");if(t.B())return t;var n=t.getType();return 197==n?(n=new e.Da(t.description)).ad(t,!1):e.aa.yd(n)?(n=new e.Ta(t.description)).oc(t,!0):n=t,(n=e.zb.lj(n,i)).B()?n:e.zb.Fn(n,i,0,n!=t,0,r)},t.nj=function(i,r,n,s){if(null==i||null==r||!r.Wc())throw e.i.fa("Invalid Arguement");if(i.B())return i;var o=i.getType();if(e.aa.Hc(o)){i=e.zb.lj(i,r),o=new e.l,i.A(o);for(var a=e.ta.ty(r,o,!1),l=r.gh(),c=Math.floor((o.v-l.v)/l.R())*l.R()+l.v;c<o.C;)c>o.v+a&&c<o.C-a&&(i=e.zb.uS(i,r,n,c)),c+=l.R()}else{if(197==o)return(o=new e.Da(i.description)).ad(i,!1),t.nj(o,r,n,s);if(e.aa.yd(o))return(o=new e.Ta(i.description)).oc(i,!0),t.nj(o,r,n,s)}return t.Uy(i,r,s)},t}();e.bu=t}(Y||(Y={})),function(e){var t=function(t){function i(i,r,n,s){var o=t.call(this)||this;return void 0===i?o.description=e.ee.og():void 0===n?o.description=i:(o.description=e.ee.og(),o.ZB(i,r),o.Ql(n,s)),o}return Q(i,t),i.prototype.getType=function(){return 322},i.prototype.Qb=function(){var e=this.sa-this.pa,t=this.na-this.la;return Math.sqrt(e*e+t*t)},i.prototype.Bi=function(e){var t=this.sa-this.pa,i=this.na-this.la;return Math.sqrt(t*t+i*i)<=e},i.prototype.Pn=function(){return!1},i.prototype.kg=function(){var t=new e.h;return t.uc(this.wc(),this.ac()),t},i.cP=function(e,t){return new i(e.x,e.y,t.x,t.y)},i.prototype.bn=function(t){t.Oa(),t.Nf(this.description);var i=new e.l;this.A(i),t.Xo(i),i=1;for(var r=this.description.Aa;i<r;i++)for(var n=this.description.kd(i),s=e.ra.Va(n);i<s;i++){var o=this.Tg(n,0);t.setInterval(n,0,o)}},i.prototype.A=function(e){e.K(this.sa,this.na,this.pa,this.la),e.normalize()},i.prototype.Qo=function(e){e.Oa(),e.Zb(this.sa,this.na,this.Od(0,1,0)),e.Zb(this.pa,this.la,this.Od(1,1,0))},i.prototype.Oc=function(t){if(t instanceof e.Dd){this.vc();var i=new e.h;i.x=this.sa,i.y=this.na,t.Eh(i,i),this.sa=i.x,this.na=i.y,i.x=this.pa,i.y=this.la,t.Eh(i,i),this.pa=i.x,this.la=i.y}else this.vc(),(i=new e.Nd).x=this.sa,i.y=this.na,i.z=this.Od(0,1,0),i=t.fp(i),this.sa=i.x,this.na=i.y,this.tn(0,1,0,i.z),i.x=this.pa,i.y=this.la,i.z=this.Od(1,1,0),i=t.fp(i),this.pa=i.x,this.la=i.y,this.tn(1,1,0,i.z)},i.prototype.Ia=function(){return new i(this.description)},i.prototype.Tx=function(e,t){return(this.pa-e-(this.sa-e))*(this.la-t+(this.na-t))*.5},i.prototype.vx=function(e){return e*this.Qb()},i.prototype.NG=function(e){return e/this.Qb()},i.prototype.DF=function(t){return e.lc.hq(this.sa,this.pa,t)},i.prototype.fR=function(t){return e.lc.hq(this.na,this.la,t)},i.prototype.dl=function(t,i){var r=new e.ig;return this.ah(t,i,r),r.get()},i.prototype.ah=function(t,i,r){if(null==r)throw e.i.N();r.Or(),(r=r.get()).Nf(this.description);var n=new e.h;this.hc(t,n),r.ZB(n.x,n.y),this.hc(i,n),r.Ql(n.x,n.y),n=1;for(var s=this.description.Aa;n<s;n++)for(var o=this.description.Ed(n),a=e.ra.Va(o),l=0;l<a;l++){var c=this.Uc(t,o,l);r.YB(o,l,c),c=this.Uc(i,o,l),r.OB(o,l,c)}},i.prototype.Uc=function(t,i,r){if(0==i)return 0==r?this.hc(t).x:this.hc(t).y;switch(e.ra.lz(i)){case 0:return.5>t?this.wv(i,r):this.gv(i,r);case 1:var n=this.wv(i,r);return i=this.gv(i,r),e.lc.hq(n,i,t);case 2:throw e.i.fa("not implemented")}throw e.i.Qa()},i.prototype.fe=function(e,t){var i=this.pa-this.sa,r=this.la-this.na,n=i*i+r*r;return 0==n?.5:(e=((e.x-this.sa)*i+(e.y-this.na)*r)/n,t||(0>e?e=0:1<e&&(e=1)),e)},i.prototype.cq=function(e,t,i,r){if(e){if(0==(e=this.la-this.na))return t==this.la?-1:0;if(0>(t=(t-this.na)/e)||1<t)return 0;null!=i&&(i[0]=this.DF(t))}else{if(0==(e=this.pa-this.sa))return t==this.pa?-1:0;if(0>(t=(t-this.sa)/e)||1<t)return 0;null!=i&&(i[0]=this.fR(t))}return null!=r&&(r[0]=t),1},i.prototype.Pe=function(e,t){var i=this.la-this.na;return 0==i?e==this.la?t:NaN:(e=(e-this.na)/i,t=this.DF(e),1==e&&(t=this.pa),t)},i.prototype.ru=function(e,t,i){return 0<=this.rp(e.x,e.y,t,i)},i.prototype.vi=function(e,t,i){return 0<=this.rp(e,t,i,!0)},i.prototype.qs=function(e,t){return this.ru(e,t,!1)},i.prototype.rI=function(){if(this.la<this.na||this.la==this.na&&this.pa<this.sa){var e=this.sa;this.sa=this.pa,this.pa=e,e=this.na,this.na=this.la,this.la=e,e=0;for(var t=this.description.Oq-2;e<t;e++){var i=this.ka[e];this.ka[e]=this.ka[e+t],this.ka[e+t]=i}}},i.prototype.uu=function(t,i){(i=e.h.construct(t,i)).sub(this.ac());var r=new e.h;return r.uc(this.wc(),this.ac()),(t=r.wi(i))>(i=8881784197001252e-31*(Math.abs(r.x*i.y)+Math.abs(r.y*i.x)))?-1:t<-i?1:0},i.prototype.rp=function(t,i,r,n){var s=this.sa,o=this.na,a=t-s,l=i-o;if((a=Math.sqrt(a*a+l*l))<=Math.max(r,6661338147750939e-31*a))return n&&0==a?NaN:0;if(a=t-this.pa,l=i-this.la,(a=Math.sqrt(a*a+l*l))<=Math.max(r,6661338147750939e-31*a))return n&&0==a?NaN:1;if(a=this.pa-this.sa,l=this.la-this.na,0<(n=Math.sqrt(a*a+l*l))){var c=1/n,h=t-s,u=i-o,p=h*(a*=c)+u*(l*=c),d=17763568394002505e-31*(Math.abs(h*a)+Math.abs(u*l)),f=a;if(a=-l,l=f,p<-(d=Math.max(r,d))||p>n+d)return NaN;if(Math.abs(h*a+u*l)<=Math.max(r,17763568394002505e-31*(Math.abs(h*a)+Math.abs(u*l)))&&(.5>=(a=e.O.Rk(p*c,0,1))?(l=this.sa+(this.pa-this.sa)*a,n=this.na+(this.la-this.na)*a):(l=this.pa-(this.pa-this.sa)*(1-a),n=this.la-(this.la-this.na)*(1-a)),e.h.Oy(l,n,t,i)<=r)){if(.5>a){if(e.h.Oy(l,n,s,o)<=r)return 0}else if(e.h.Oy(l,n,this.pa,this.la)<=r)return 1;return a}}return NaN},i.prototype.Nb=function(e){return null!=e&&(e==this||e.constructor===this.constructor&&this.FM(e))},i.prototype.rD=function(t,i,r){var n=r?this.sa:this.pa;r=r?this.na:this.la;var s=new e.h;return s.x=t.pa-n,s.y=t.la-r,!(i.Qh(s)>6661338147750939e-31*i.fD(s))||(s.x=t.sa-n,s.y=t.na-r,i.Qh(s)<=6661338147750939e-31*i.fD(s))},i.prototype.qD=function(t){var i=new e.h;return i.x=this.pa-this.sa,i.y=this.la-this.na,!!this.rD(t,i,!1)&&(i.Sq(),!!this.rD(t,i,!0))},i.NM=function(e,t){var i=e.uu(t.sa,t.na),r=e.uu(t.pa,t.la);return!(0>i&&0>r||0<i&&0<r)&&(i=t.uu(e.sa,e.na),r=t.uu(e.pa,e.la),!(0>i&&0>r||0<i&&0<r)&&((i=e.Qb())>(r=t.Qb())?e.qD(t):t.qD(e)))},i.LM=function(t,i,r){var n=e.h.construct(NaN,NaN),s=t.pa-t.sa,o=t.la-t.na,a=i.pa-i.sa,l=i.la-i.na,c=a*o-s*l;if(0==c)return n;var h=8881784197001252e-31*(Math.abs(a*o)+Math.abs(s*l)),u=i.sa-t.sa,p=i.na-t.na,d=a*p-u*l,f=d/c,y=Math.abs(c);return f<-(a=(8881784197001252e-31*(Math.abs(a*p)+Math.abs(u*l))*y+h*Math.abs(d))/(c*c)+2220446049250313e-31*Math.abs(f))||f>1+a||(a=(l=s*p-u*o)/c)<-(s=(8881784197001252e-31*(Math.abs(s*p)+Math.abs(u*o))*y+h*Math.abs(l))/(c*c)+2220446049250313e-31*Math.abs(a))||a>1+s||(f=e.O.Rk(f,0,1),s=e.O.Rk(a,0,1),o=t.hc(f),c=i.hc(s),(h=new e.h).uc(o,c),h.length()>r&&(h.add(o,c),h.scale(.5),f=t.fe(h,!1),s=i.fe(h,!1),t=t.hc(f),i=i.hc(s),t.sub(i),t.length()>r)||n.ma(f,s)),n},i.OM=function(e,t,r,n){var s=0;if((e.sa==t.sa&&e.na==t.na||e.sa==t.pa&&e.na==t.la)&&(s++,!n))return 1;if(e.pa==t.sa&&e.la==t.na||e.pa==t.pa&&e.la==t.la){if(2==++s)return 2;if(!n)return 1}return t.vi(e.sa,e.na,r)||t.vi(e.pa,e.la,r)||e.vi(t.sa,t.na,r)||e.vi(t.pa,t.la,r)?1:n&&0!=s||0==i.NM(e,t)?0:1},i.Zx=function(t,r,n,s,o,a){var l=0,c=t.rp(r.sa,r.na,a,!1),h=t.rp(r.pa,r.la,a,!1),u=r.rp(t.sa,t.na,a,!1),p=r.rp(t.pa,t.la,a,!1);return isNaN(c)||(null!=s&&(s[l]=c),null!=o&&(o[l]=0),null!=n&&(n[l]=e.h.construct(r.sa,r.na)),l++),isNaN(h)||(null!=s&&(s[l]=h),null!=o&&(o[l]=1),null!=n&&(n[l]=e.h.construct(r.pa,r.la)),l++),2==l||isNaN(u)||0==c&&0==u||0==h&&1==u||(null!=s&&(s[l]=0),null!=o&&(o[l]=u),null!=n&&(n[l]=e.h.construct(t.sa,t.na)),l++),2==l||isNaN(p)||1==c&&0==p||1==h&&1==p||(null!=s&&(s[l]=1),null!=o&&(o[l]=p),null!=n&&(n[l]=e.h.construct(r.pa,r.la)),l++),0<l?(2==l&&null!=s&&s[0]>s[1]&&(t=s[0],s[0]=s[1],s[1]=t,null!=o&&(s=o[0],o[0]=o[1],o[1]=s),null!=n&&(o=e.h.construct(n[0].x,n[0].y),n[0]=n[1],n[1]=o)),l):(l=i.LM(t,r,a),isNaN(l.x)?0:(null!=n&&(n[0]=t.hc(l.x)),null!=s&&(s[0]=l.x),null!=o&&(o[0]=l.y),1))},i.prototype.eG=function(){return 0},i.prototype.op=function(){},i.prototype.toString=function(){return"Line: ["+this.sa.toString()+", "+this.na.toString()+", "+this.pa.toString()+", "+this.la.toString()+"]"},i}(e.SC);e.yb=t}(Y||(Y={})),function(e){var t=function(){function e(){this.Jm=[],this.ya=-1}return e.prototype.La=function(){return this.ya},e.prototype.next=function(){if(null!=this.Jm&&0!=this.Jm.length){this.ya++;var e=this.Jm[0];return this.Jm=1>=this.Jm.length?[]:this.Jm.slice(1),e}return this.Jm=null},e.prototype.ZX=function(e){this.Jm.push(e)},e.prototype.qe=function(){},e}();e.gL=t}(Y||(Y={})),function(e){var t;(t=e.SL||(e.SL={}))[t.enumFillRuleOddEven=0]="enumFillRuleOddEven",t[t.enumFillRuleWinding=1]="enumFillRuleWinding";var i=function(t){function i(i,r){var n=t.call(this)||this;if(n.xf=!1,n.Eq=null,n.sq=0,n.rq=0,n.Aj=null,n.Mg=!1,n.nb=null,n.mb=null,n.Ve=null,n.Lj=null,n.Sd=null,n.tq=0,n.gb=0,n.xq=0,void 0===r)n.xf=i,n.Mg=!1,n.tq=0,n.sq=0,n.rq=0,n.wa=0,n.description=e.ee.og();else{if(null==r)throw e.i.N();n.xf=i,n.Mg=!1,n.tq=0,n.sq=0,n.rq=0,n.wa=0,n.description=r}return n.Aj=null,n.gb=0,n}return Q(i,t),i.prototype.tm=function(){return 0<this.tq},i.prototype.Yx=function(){this.vc(),null==this.Eq?this.Eq=new e.Sa(this.description):this.Eq.Nf(this.description)},i.prototype.sx=function(t,i){var r=new e.h;r.x=t,r.y=i,this.Lt(r)},i.prototype.Lt=function(e){this.Yx(),this.Eq.Cb(e),this.Mg=!0},i.prototype.nf=function(t){if(t.B())throw e.i.N();this.Jl(t.description),this.Yx(),t.copyTo(this.Eq),this.Mg=!0},i.prototype.Sx=function(){var t=1;this.Mg&&(this.Yx(),null==this.nb?(this.nb=e.Yc.Oh(2),this.nb.write(0,0),this.mb=e.Yc.Mr(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.xf&&this.mb.write(this.mb.size-2,1),t++);var i=this.wa;this.nb.write(this.nb.size-1,this.wa+t),this.dm(i+t),this.mb.write(this.nb.size-1,0),this.Mg&&(this.Ht(i,this.Eq),this.Mg=!1)},i.prototype.yj=function(e,t){this.Sx(),this.Cb(this.wa-1,e,t)},i.prototype.Ci=function(e){this.Sx(),this.Cb(this.wa-1,e)},i.prototype.lineTo=function(e){this.Sx(),this.Ht(this.wa-1,e)},i.prototype.CU=function(t){if(this.vc(),this.xf)throw e.i.Qa();var i=this.da();if(t>i)throw e.i.Qa();if(this.dc(t)){if(null==this.mb)throw e.i.Qa();var r=this.wa,n=this.Ba(t),s=this.Vc(t);this.dm(this.wa+1),this.mc();for(var o=0,a=this.description.Aa;o<a;o++)if(null!=this.za[o]){var l=e.ra.Va(this.description.Ed(o));this.za[o].Mn(l*s,this.za[o],l*n,l,!0,1,l*r)}for(;i>t;i--)r=this.nb.read(i),this.nb.write(i,r+1);this.mb.KE(t,1)}},i.prototype.Ap=function(){if(this.wx(),void 0===e){this.Mg=!1;var e=this.da()-1}var t=this.mb.read(e);this.mb.write(e,1|t),null!=this.Ve&&(e=this.Vc(e)-1,this.Ve.write(e,1),this.Lj.write(e,-1))},i.prototype.dc=function(e){return!!(1&this.mb.read(e))},i.prototype.Nn=function(e){if(this.dc(e))return!0;var t=this.Ba(e);return!(t>(e=this.Vc(e)-1))&&(t=this.Na(t),e=this.Na(e),t.qb(e))},i.prototype.yv=function(e){return!!(2&this.mb.read(e))},i.prototype.oc=function(t,i){if(this.Jl(t.description),322!=t.getType())throw e.i.Qa();var r=new e.Sa;(i||this.B())&&(t.To(r),this.nf(r)),t.Po(r),this.lineTo(r)},i.prototype.tp=function(e){var t=0==this.wa;this.sx(e.v,e.G),this.yj(e.v,e.H),this.yj(e.C,e.H),this.yj(e.C,e.G),this.Ap(),this.Mg=!1,t&&this.Lf(256,!1)},i.prototype.ad=function(t,i){if(!t.B()){for(var r=0==this.wa,n=new e.Sa(this.description),s=0;4>s;s++)t.Hf(i?4-s-1:s,n),0==s?this.nf(n):this.lineTo(n);this.Ap(),this.Mg=!1,r&&!i&&this.Lf(256,!1)}},i.prototype.add=function(e,t){for(var i=0;i<e.da();i++)this.addPath(e,i,!t)},i.prototype.addPath=function(e,t,i){this.vf(-1,e,t,i)},i.prototype.Yk=function(e,t){this.Hz(e,t)},i.prototype.Dr=function(t,i,r,n,s){if(s||0!=this.da()||(s=!0),0>i&&(i=t.da()-1),i>=t.da()||0>r||0>n||n>t.rv(i))throw e.i.fa("index out of bounds");if(0!=n){var o=t.dc(i)&&r+n==t.rv(i);if(!o||1!=n){if(this.Mg=!1,this.Jl(t.description),r=t.Ba(i)+r+1,s&&(n++,r--),o&&n--,o=this.wa,this.dm(this.wa+n),this.mc(),s){if(0==n)return;this.nb.add(this.wa),s=t.mb.read(i),s&=-5,this.xf&&(s|=1),this.mb.write(this.mb.size-1,s),this.mb.add(0)}else this.nb.write(this.mb.size-1,this.wa);s=0;for(var a=this.description.Aa;s<a;s++){var l=this.description.kd(s),c=e.ra.Va(l),h=t.description.Pf(l);0>h||null==t.za[h]?this.za[s].Ln(c*o,e.ra.se(l),n*c,c*o):this.za[s].Mn(c*o,t.za[h],c*r,n*c,!0,c,c*o)}if(this.tm())throw e.i.Qa();if(t.yv(i))throw e.i.Qa();this.Pc(1993)}}},i.prototype.oJ=function(){for(var e=0,t=this.da();e<t;e++)this.FW(e)},i.prototype.FW=function(t){if(this.mc(),t>=this.da())throw e.i.N();var i=this.Ba(t),r=this.Ja(t);t=this.dc(t)?1:0;for(var n=0,s=this.description.Aa;n<s;n++)if(null!=this.za[n]){var o=e.ra.Va(this.description.Ed(n));this.za[n].ni(o*(i+t),o*(r-t),o)}this.Pc(1993)},i.prototype.Zq=function(t){this.mc();var i=this.da();if(0>t&&(t=i-1),t>=i)throw e.i.N();for(var r=this.Ba(t),n=this.Ja(t),s=0,o=this.description.Aa;s<o;s++)if(null!=this.za[s]){var a=e.ra.Va(this.description.Ed(s));this.za[s].En(a*r,a*n,a*this.wa)}for(r=t+1;r<=i;r++)s=this.nb.read(r),this.nb.write(r-1,s-n);if(null==this.mb)for(r=t+1;r<=i;r++)t=this.mb.read(r),this.mb.write(r-1,t);this.nb.resize(i),this.mb.resize(i),this.wa-=n,this.Pg-=n,this.Pc(1993)},i.prototype.vf=function(t,i,r,n){if(i==this)throw e.i.N();if(r>=i.da())throw e.i.N();var s=this.da();if(t>s)throw e.i.N();0>t&&(t=s),0>r&&(r=i.da()-1),this.Mg=!1,this.Jl(i.description),i.mc();var o=i.Ba(r),a=i.Ja(r),l=this.wa,c=i.dc(r)&&!n?1:0;this.dm(this.wa+a),this.mc();for(var h=t<s?this.Ba(t):l,u=0,p=this.description.Aa;u<p;u++){var d=this.description.Ed(u),f=i.description.Pf(d),y=e.ra.Va(d);0<=f&&null!=i.za[f]?(0!=c&&this.za[u].Mn(h*y,i.za[f],y*o,y,!0,y,y*l),this.za[u].Mn((h+c)*y,i.za[f],y*(o+c),y*(a-c),n,y,y*(l+c))):this.za[u].Ln(h*y,e.ra.se(d),y*a,y*l)}for(this.nb.add(l+a),n=s;n>=t+1;n--)o=this.nb.read(n-1),this.nb.write(n,o+a);for(i.yv(r),this.mb.add(0),n=s-1;n>=t+1;n--)s=this.mb.read(n),s&=-5,this.mb.write(n+1,s);s=i.JR().read(r),s&=-5,this.xf&&(s|=1),this.mb.write(t,s)},i.prototype.Hz=function(t,i){var r=-1,n=this.da();if(r>n)throw e.i.N();0>r&&(r=n),this.Mg=!1;var s=this.wa;this.dm(this.wa+i),this.mc();var o=r<n?this.Ba(r):s;if(null!=t)this.za[0].Iz(2*o,t,0,i,!0,2*s);else{var a=e.ra.se(0);this.za[0].Ln(2*o,a,2*i,2*s)}t=1;for(var l=this.description.Aa;t<l;t++){a=this.description.kd(t);var c=e.ra.Va(a);a=e.ra.se(a),this.za[t].Ln(o*c,a,c*i,c*s)}for(this.nb.add(this.wa),s=n;s>=r+1;s--)o=this.nb.read(s-1),this.nb.write(s,o+i);for(this.mb.add(0),s=n-1;s>=r+1;s--)i=this.mb.read(s),i&=-5,this.mb.write(s+1,i);this.xf&&this.mb.write(r,1)},i.prototype.qG=function(t,i,r){var n=-1;if(0>t&&(t=this.da()),t>this.da()||n>this.Ja(t)||r>i.length)throw e.i.fa("index out of bounds");if(0!=r){t==this.da()&&(this.nb.add(this.wa),this.xf?this.mb.add(1):this.mb.add(0)),0>n&&(n=this.Ja(t)),this.mc();var s=this.wa;this.dm(this.wa+r),this.mc();for(var o=0,a=this.description.Aa;o<a;o++){var l=this.description.Ed(o),c=e.ra.Va(l);this.za[o].Ut(c*(this.Ba(t)+n+r),(s-this.Ba(t)-n)*c,this.za[o],c*(this.Ba(t)+n),!0,c),0==o?this.za[o].vC(c*(this.Ba(t)+n),r,i,0,!0):this.za[o].Wj(e.ra.se(l),(this.Ba(t)+n)*c,r*c)}for(this.tm()&&(this.Ve.Ut(this.Ba(t)+n+r,s-this.Ba(t)-n,this.Ve,this.Ba(t)+n,!0,1),this.Lj.Ut(this.Ba(t)+n+r,s-this.Ba(t)-n,this.Lj,this.Ba(t)+n,!0,1),this.Ve.Wj(1,this.Ba(t)+n,r),this.Lj.Wj(-1,this.Ba(t)+n,r)),t+=1,i=this.da();t<=i;t++)this.nb.write(t,this.nb.read(t)+r)}},i.prototype.wf=function(t,i,r){var n=this.da();if(0>t&&(t=this.da()),t>=n||i>this.Ja(t))throw e.i.fa("index out of bounds");t==this.da()&&(this.nb.add(this.wa),this.xf?this.mb.add(1):this.mb.add(0)),0>i&&(i=this.Ja(t));var s=this.wa;this.dm(this.wa+1),this.mc();var o=this.Ba(t);this.za[0].vj(2*(o+i),r,2*s),r=1;for(var a=this.description.Aa;r<a;r++){var l=this.description.Ed(r),c=e.ra.Va(l);this.za[r].Ln(c*(o+i),e.ra.se(l),c,c*s)}for(t+=1;t<=n;t++)this.nb.write(t,this.nb.read(t)+1)},i.prototype.DB=function(t,i){var r=this.da();if(0>t&&(t=r-1),t>=r||i>=this.Ja(t))throw e.i.fa("index out of bounds");this.mc();var n=this.Ba(t);0>i&&(i=this.Ja(t)-1),i=n+i,n=0;for(var s=this.description.Aa;n<s;n++)if(null!=this.za[n]){var o=e.ra.Va(this.description.Ed(n));this.za[n].En(o*i,o,o*this.wa)}for(;r>=t+1;r--)i=this.nb.read(r),this.nb.write(r,i-1);this.wa--,this.Pg--,this.Pc(1993)},i.prototype.uE=function(t,i,r){var n=this.Ba(t)+i;if((r=this.Ba(r)+void 0)<n||0>n||r>this.I()-1)throw e.i.N();i=0,(t=this.Ga()).Vb(n);do{for(;t.Ha()&&(n=t.ha(),t.wb()!=r);)i+=n=n.Qb();if(t.wb()==r)break}while(t.$a());return i},i.prototype.fO=function(t,i,r){if(i=this.Ba(t)+i,r=this.Ba(t)+r,0>i||r>this.I()-1)throw e.i.N();var n=this.Ga();if(i>r){if(!this.dc(t))throw e.i.N("cannot iterate across an open path");n.JB()}var s=t=0;n.Vb(i);do{s+=t,t=n.ha().Qb()}while(n.wb()!=r);return s},i.prototype.mg=function(){return e.pi.gm(this,null)},i.prototype.KS=function(t,i,r){for(var n=t;n<r-1;n++)if(this.dc(n))throw e.i.N("cannot interpolate across closed paths");if(1!=(n=this.description.Aa)){var s=this.uE(t,i,r);if(0!=s)for(var o=1;o<n;o++){var a=this.description.kd(o);if(2!=e.ra.lz(a))for(var l=e.ra.Va(a),c=0;c<l;c++)this.MS(a,t,i,r,s,c)}}},i.prototype.JS=function(t,i,r){var n=this.description.Aa;if(1!=n){var s=this.fO(t,i,r);if(0!=s)for(var o=1;o<n;o++){var a=this.description.kd(o);if(2!=e.ra.lz(a))for(var l=e.ra.Va(a),c=0;c<l;c++)this.LS(a,t,i,r,s,c)}}},i.prototype.MS=function(t,i,r,n,s,o){var a=this.Ga(),l=this.Ba(i)+r;n=this.Ba(n)+void 0,i=this.Uc(t,l,o),r=this.Uc(t,n,o);var c=i,h=0;a.Vb(l);do{if(a.Ha()){if(a.ha(),a.wb()==n)break;this.setAttribute(t,a.wb(),o,c),a.li();do{if(l=a.ha(),a.ik()==n)return;h+=l=l.Qb(),c=e.lc.hq(i,r,h/s),a.On()||this.setAttribute(t,a.ik(),o,c)}while(a.Ha())}}while(a.$a())},i.prototype.LS=function(t,i,r,n,s,o){var a=this.Ga(),l=this.Ba(i)+r;if((i=this.Ba(i)+n)!=l){n=this.Uc(t,l,o),r=this.Uc(t,i,o);var c=0;a.Vb(l),a.JB(),l=n;do{var h=a.ha();this.setAttribute(t,a.wb(),o,l),c+=l=h.Qb(),l=e.lc.hq(n,r,c/s)}while(a.ik()!=i)}},i.prototype.Oa=function(){this.tq=0,this.Mg=!1,this.Sd=this.Ve=this.Lj=this.mb=this.nb=null,this.wD()},i.prototype.Oc=function(t){t instanceof e.Dd?this.YD(t,-1):this.wN(t)},i.prototype.YD=function(t,i){if(!this.B()&&!t.isIdentity()){this.mc();var r=this.za[0],n=new e.h,s=new e.h;if(0>i){var o=this.tm(),a=0;i=this.wa}else o=this.yv(i),a=this.Ba(i),i=this.Vc(i);for(;a<i;a++){if(n.x=r.read(2*a),n.y=r.read(2*a+1),o){var l=this.Lj.read(a);if(0<=l)switch(7&this.Ve.read(a)){case 2:s.x=this.Sd.read(l),s.y=this.Sd.read(l+1),t.Eh(s,s),this.Sd.write(l,s.x),this.Sd.write(l+1,s.y),s.x=this.Sd.read(l+3),s.y=this.Sd.read(l+4),t.Eh(s,s),this.Sd.write(l+3,s.x),this.Sd.write(l+4,s.y);break;case 4:throw e.i.Qa()}}t.Eh(n,n),r.write(2*a,n.x),r.write(2*a+1,n.y)}this.Pc(1993)}},i.prototype.wN=function(t){if(!this.B()){this.re(1),this.mc();for(var i=this.za[0],r=this.za[1],n=new e.Nd,s=new e.Nd,o=this.tm(),a=0;a<this.wa;a++){if(n.x=i.read(2*a),n.y=i.read(2*a+1),n.z=r.read(a),o){var l=this.Lj.read(a);if(0<=l)switch(7&this.Ve.read(a)){case 2:s.x=this.Sd.read(l),s.y=this.Sd.read(l+1),s.z=this.Sd.read(l+2),s=t.fp(s),this.Sd.write(l,s.x),this.Sd.write(l+1,s.y),this.Sd.write(l+1,s.z),s.x=this.Sd.read(l+3),s.y=this.Sd.read(l+4),s.z=this.Sd.read(l+5),s=t.fp(s),this.Sd.write(l+3,s.x),this.Sd.write(l+4,s.y),this.Sd.write(l+5,s.z);break;case 4:throw e.i.Qa()}}n=t.fp(n),i.write(2*a,n.x),i.write(2*a+1,n.y),r.write(a,n.z)}this.Pc(1993)}},i.prototype.iy=function(){null==this.nb&&(this.nb=e.Yc.Oh(1,0),this.mb=e.Yc.Mr(1,0)),null!=this.Ve&&(this.Ve.resize(this.Pg,1),this.Lj.resize(this.Pg,-1))},i.prototype.op=function(t){t.Mg=!1,t.tq=this.tq,t.xq=this.xq,t.nb=null!=this.nb?e.ia.Bn(this.nb):null,t.mb=null!=this.mb?e.pn.Bn(this.mb):null,t.Lj=null!=this.Lj?e.ia.Bn(this.Lj):null,t.Ve=null!=this.Ve?e.pn.Bn(this.Ve):null,t.Sd=null!=this.Sd?e.be.Bn(this.Sd):null,t.sq=this.sq,t.rq=this.rq,t.Aj=this.ak(1024)?null:this.Aj},i.prototype.Qb=function(){if(!this.ak(512))return this.sq;for(var t=this.Ga(),i=new e.Fx(0);t.$a();)for(;t.Ha();)i.add(t.ha().Qb());return this.sq=i.rm(),this.Lf(512,!1),i.rm()},i.prototype.Nb=function(e){if(e==this)return!0;if(!(e instanceof i&&t.prototype.Nb.call(this,e)))return!1;var r=this.da();return!(r!=e.da()||null!=this.nb&&!this.nb.Nb(e.nb,0,r+1)||this.xq!=e.xq||null!=this.mb&&!this.mb.Nb(e.mb,0,r))&&t.prototype.Nb.call(this,e)},i.prototype.Ga=function(){return new e.YL(this)},i.prototype.hy=function(e){if(t.prototype.hy.call(this,e),this.tm())for(e=this.Ga();e.$a();)e.Ha()},i.prototype.yp=function(e,i){if(t.prototype.yp.call(this,e,i),this.tm())for(e=this.Ga();e.$a();)e.Ha()},i.prototype.$x=function(){this.wa=null==this.nb||0==this.nb.size?0:this.nb.read(this.nb.size-1)},i.prototype.Ke=function(){return this.xf?(this.xu(),this.rq):0},i.prototype.Ev=function(e){return!!this.xf&&(this.ak(8)?(this.xu(),0<this.Aj.read(e)):!!(4&this.mb.read(e)))},i.prototype.Ir=function(e){return this.xf?(this.xu(),this.Aj.read(e)):0},i.prototype.xu=function(){if(this.ak(1024)){var t=this.da();null==this.Aj?this.Aj=new e.be(t):this.Aj.size!=t&&this.Aj.resize(t),t=new e.Fx(0);for(var i=new e.Fx(0),r=new e.h,n=0,s=this.Ga();s.$a();){for(i.reset(),this.D(this.Ba(s.gb),r);s.Ha();)i.add(s.ha().Tx(r.x,r.y));t.add(i.rm());var o=n++;this.Aj.write(o,i.rm())}this.rq=t.rm(),this.Lf(1024,!1)}},i.prototype.FR=function(){if(this.xf){this.fm();for(var e=this.da(),t=0;t<e;t++)this.mb.read(t)}},i.prototype.fm=function(){if(this.ak(8)){this.xu();var t=this.da();(null==this.mb||this.mb.size<t)&&(this.mb=e.Yc.Mr(t+1));for(var i=1,r=0;r<t;r++){var n=this.Aj.read(r);0==r&&(i=0<n?1:-1),0<n*i?this.mb.zJ(r,4):this.mb.KE(r,4)}this.Lf(8,!1)}},i.prototype.sz=function(t){var i=this.gb,r=this.da();if(0<=i&&i<r){if(t<this.Vc(i)){if(t>=this.Ba(i))return i;i--}else i++;if(0<=i&&i<r&&t>=this.Ba(i)&&t<this.Vc(i))return this.gb=i}if(5>r){for(i=0;i<r;i++)if(t<this.Vc(i))return this.gb=i;throw e.i.fa("corrupted geometry")}for(i=0,--r;r>i;){var n=i+(r-i>>1);if(t<this.Ba(n))r=n-1;else{if(!(t>=(i=this.Vc(n))))return this.gb=n;i=n+1}}return this.gb=i},i.prototype.yz=function(){var e=this.I();if(!this.xf){e-=this.da();for(var t=0,i=this.da();t<i;t++)this.dc(t)&&e++}return e},i.prototype.rv=function(e){var t=this.Ja(e);return this.dc(e)||t--,t},i.prototype.Ia=function(){return new i(this.xf,this.description)},i.prototype.Db=function(){return this.xf?2:1},i.prototype.getType=function(){return this.xf?1736:1607},i.prototype.QJ=function(e){this.nb=e,this.Pc(16777215)},i.prototype.VR=function(){return this.wx(),this.Ve},i.prototype.JR=function(){return this.wx(),this.mb},i.prototype.PJ=function(e){this.mb=e,this.Pc(16777215)},i.prototype.da=function(){return null!=this.nb?this.nb.size-1:0},i.prototype.Vc=function(e){return this.nb.read(e+1)},i.prototype.Ja=function(e){return this.nb.read(e+1)-this.nb.read(e)},i.prototype.Ba=function(e){return this.nb.read(e)},i.prototype.lu=function(t,i){null==this.Bb&&(this.Bb=new e.Uk),i=e.Nx.pW(i);var r=this.Bb.Fk;if(null!=r){if(!(r.Ik<t||i>r.RR()))return!0;this.Bb.yD(null)}return r=e.Nx.create(this,t,i),this.Bb.yD(r),!0},i.prototype.cc=function(){var e=t.prototype.cc.call(this);if(!this.Ac()){var i=this.da();null!=this.nb&&this.nb.An(e,0,i+1),null!=this.mb&&this.mb.An(e,0,i)}return e},i.prototype.ZF=function(e){return null!=this.Ve?this.Ve.read(e):1},i.prototype.bc=function(t,i,r){var n=this.sz(t);if(t==this.Vc(n)-1&&!this.dc(n))throw e.i.fa("index out of bounds");this.mc();var s=this.Ve,o=1;if(null!=s&&(o=7&s.read(t)),1!==o)throw e.i.Qa();if(i.Or(),i=i.get(),r?i.Nf(e.ee.og()):i.Nf(this.description),n=t==this.Vc(n)-1&&this.dc(n)?this.Ba(n):t+1,s=new e.h,this.D(t,s),i.Dc(s),this.D(n,s),i.Qc(s),!r)for(r=1,s=this.description.Aa;r<s;r++){o=this.description.Ed(r);for(var a=e.ra.Va(o),l=0;l<a;l++){var c=this.Uc(o,t,l);i.YB(o,l,c),c=this.Uc(o,n,l),i.OB(o,l,c)}}},i.prototype.Rj=function(t,i){if(t>=this.da())throw e.i.N();if(this.B())i.Oa();else{if(this.yv(t))throw e.i.fa("not implemented");var r=this.ub(0),n=new e.h,s=new e.l;s.Oa();var o=this.Ba(t);for(t=this.Vc(t);o<t;o++)r.tc(2*o,n),s.Zb(n);i.K(s)}},i.prototype.fj=function(t){return null==this.Bb&&(this.Bb=new e.Uk),!(0==t||16>this.I()||(t=e.ta.nE(this),this.Bb.WM(t),0))},i.prototype.hM=function(){if(null==this.Bb&&(this.Bb=new e.Uk),null==this.Bb.zo){this.Bb.xD(null);var t=e.ta.YN(this);this.Bb.xD(t)}},i.prototype.Yo=function(e){this.xq=e},i.prototype.In=function(){return this.xq},i.prototype.DD=function(t){if(this==t)throw e.i.fa("MultiPathImpl.add");for(var i=this.da(),r=0;r<t.da();r++)this.addPath(t,r,!0),this.CU(i),i++},i.prototype.kO=function(t){var i=this.sz(t),r=this.Ba(i);if(r!=t){if(t>=(i=this.Vc(i))||t<r)throw e.i.fa("change_ring_start_point");for(var n=0,s=this.description.Aa;n<s;n++){var o=this.description.kd(n);o=e.ra.Va(o),this.za[n].rotate(r*o,t*o,i*o)}}},i}(e.Gx);e.Vk=i}(Y||(Y={})),function(e){var t=function(t){function i(i){var r=t.call(this)||this;if(void 0!==i){if(null==i)throw e.i.N();r.description=i}else r.description=e.ee.og();return r.wa=0,r}return Q(i,t),i.prototype.Ia=function(){return new i(this.description)},i.prototype.add=function(e){this.resize(this.wa+1),this.Dh(this.wa-1,e)},i.prototype.Bu=function(t,i){this.resize(this.wa+1);var r=new e.h;r.ma(t,i),this.Cb(this.wa-1,r)},i.prototype.Fd=function(t,i,r){if(r=0>r?t.I():r,0>i||i>t.I()||r<i)throw e.i.N();if(i!=r){this.Jl(t.description),r-=i;var n=this.wa;this.resize(this.wa+r),this.mc();for(var s=0,o=t.description.Aa;s<o;s++){var a=t.description.Ed(s),l=e.ra.Va(a),c=this.ub(a);a=t.ub(a),c.Mn(n*l,a,i*l,r*l,!0,1,n*l)}}},i.prototype.HD=function(t,i){var r=t.length;if(i=0>i?r:i,0>r||0>i)throw e.i.N();if(0!=i){r=i-0,i=this.wa,this.resize(this.wa+r);for(var n=0;n<r;n++)this.Cb(i+n,t[0+n])}},i.prototype.DB=function(t){if(0>t||t>=this.I())throw e.i.fa("index out of bounds");this.mc();for(var i=0,r=this.description.Aa;i<r;i++)if(null!=this.za[i]){var n=e.ra.Va(this.description.Ed(i));this.za[i].En(n*t,n,n*this.wa)}this.wa--,this.Pg--,this.Pc(1993)},i.prototype.resize=function(e){this.dm(e)},i.prototype.op=function(){},i.prototype.Oa=function(){t.prototype.wD.call(this)},i.prototype.Oc=function(t){if(t instanceof e.Dd){if(this.B())return;this.mc();for(var i=this.za[0],r=new e.h,n=0;n<this.wa;n++)r.x=i.read(2*n),r.y=i.read(2*n+1),t.Eh(r,r),i.write(2*n,r.x),i.write(2*n+1,r.y)}else{if(this.B())return;this.mc(),this.re(1),this.mc(),i=this.za[0],r=this.za[1];var s=new e.Nd;for(n=0;n<this.wa;n++){s.x=i.read(2*n),s.y=i.read(2*n+1),s.z=r.read(n);var o=t.fp(s);i.write(2*n,o.x),i.write(2*n+1,o.y),r.write(n,o.z)}}this.Pc(1993)},i.prototype.Db=function(){return 0},i.prototype.getType=function(){return 550},i.prototype.Ke=function(){return 0},i.prototype.Qb=function(){return 0},i.prototype.Nb=function(e){return e==this||e instanceof i&&t.prototype.Nb.call(this,e)},i.prototype.lW=function(t,i){var r=this.wa;if(r=Math.min(r,i+1e3),0>i||i>=this.wa||r<i||1e3!=t.length)throw e.i.N();var n=r-i,s=[];for(this.ub(0).Vw(2*i,2*n,s,0,!0),i=0;i<n;i++)t[i]=e.h.construct(s[2*i],s[2*i+1]);return r},i.prototype.$x=function(){},i.prototype.iy=function(){},i.prototype.lu=function(){return!1},i.prototype.fj=function(){return!1},i.prototype.mg=function(){return null},i}(e.Gx);e.de=t}(Y||(Y={})),function(e){var t;(t=e.iL||(e.iL={}))[t.NotDetermined=0]="NotDetermined",t[t.Structure=1]="Structure",t[t.DegenerateSegments=2]="DegenerateSegments",t[t.Clustering=3]="Clustering",t[t.Cracking=4]="Cracking",t[t.CrossOver=5]="CrossOver",t[t.RingOrientation=6]="RingOrientation",t[t.RingOrder=7]="RingOrder",t[t.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",t[t.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",t[t.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var i=function(){function e(e,t,i){void 0===e?(this.Jj=0,this.Ko=this.Jo=-1):(this.Jj=e,this.Jo=t,this.Ko=i)}return e.prototype.Wt=function(e){this.Jj=e.Jj,this.Jo=e.Jo,this.Ko=e.Ko},e}();e.Md=i}(Y||(Y={})),function(e){e.O=function(){function t(){}return t.assert=function(t){if(!1===t)throw e.i.GK()},t.bK=function(e){return isNaN(e)?NaN:0===e?e:0<e?1:-1},t.Fu=function(e){var i;void 0===i&&(i=0);for(var r=[],n=0;n<e;n++)r[n]=t.lg(2,i);return r},t.lg=function(e,t){void 0===t&&(t=0);for(var i=[],r=0;r<e;r++)i[r]=t;return i},t.$u=function(e,t){var i,r;for(void 0===i&&(i=0),void 0===r&&(r=e.length-1);i<=r;i++)e[i]=t},t.Rk=function(e,t,i){return e<t?t:e>i?i:e},t.Th=function(e,t){var i=5381;return((i=((i=((i=void 0!==t?(t<<5)+t+(255&e):(i<<5)+i+(255&e))<<5)+i+(e>>8&255))<<5)+i+(e>>16&255))<<5)+i+(e>>24&255)&2147483647},t.uj=function(){throw Error("Not Implemented")},t.bB=function(e){return t.aU(e)+12345&2147483647},t.XG=function(e){var i=32,r=e%t.Qx|0,n=e/t.Qx|0;return 0==(i&=63)?e:(32>i?(e=r>>>i|n<<32-i,i=n>>i):(e=n>>i-32,i=0<=n?0:-1),i*t.Qx+(e>>>0))},t.aU=function(e){return(1103495168*(e|=0)|0)+(20077*e|0)|0},t.truncate=function(e){return 0>e?-1*Math.floor(Math.abs(e)):Math.floor(e)},t.MAX_SAFE_INTEGER=Math.pow(2,53)-1,t.MIN_SAFE_INTEGER=-t.MAX_SAFE_INTEGER,t.VC=65536,t.Qx=t.VC*t.VC,t}()}(Y||(Y={})),function(e){var t;(t=e.CL||(e.CL={}))[t.Project=0]="Project",t[t.Union=1]="Union",t[t.Difference=2]="Difference",t[t.Proximity2D=3]="Proximity2D",t[t.Relate=4]="Relate",t[t.Equals=5]="Equals",t[t.Disjoint=6]="Disjoint",t[t.Intersects=7]="Intersects",t[t.Within=8]="Within",t[t.Contains=9]="Contains",t[t.Crosses=10]="Crosses",t[t.Touches=11]="Touches",t[t.Overlaps=12]="Overlaps",t[t.Buffer=13]="Buffer",t[t.Distance=14]="Distance",t[t.Intersection=15]="Intersection",t[t.Clip=16]="Clip",t[t.Cut=17]="Cut",t[t.DensifyByLength=18]="DensifyByLength",t[t.DensifyByAngle=19]="DensifyByAngle",t[t.LabelPoint=20]="LabelPoint",t[t.GeodesicBuffer=21]="GeodesicBuffer",t[t.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",t[t.ShapePreservingDensify=23]="ShapePreservingDensify",t[t.GeodeticLength=24]="GeodeticLength",t[t.GeodeticArea=25]="GeodeticArea",t[t.Simplify=26]="Simplify",t[t.SimplifyOGC=27]="SimplifyOGC",t[t.Offset=28]="Offset",t[t.Generalize=29]="Generalize",t[t.SymmetricDifference=30]="SymmetricDifference",t[t.ConvexHull=31]="ConvexHull",t[t.Boundary=32]="Boundary",t[t.SimpleRelation=33]="SimpleRelation";var i=function(){function e(){}return e.prototype.getType=function(){return null},e.prototype.wn=function(){},e.prototype.Iu=function(){return!1},e}();e.Je=i}(Y||(Y={})),function(e){var t=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Q(i,t),i.prototype.getType=function(){return 13},i.local=function(){return null===i.instance&&(i.instance=new i),i.instance},i.prototype.V=function(t,i,r,n,s){return t instanceof e.aa?(s=new e.Zc(t),this.V(s,i,[r],!1,n).next()):!0===n?(r=new e.BC(t,i,r,!1,s),e.Gh.local().V(r,i,s)):new e.BC(t,i,r,!1,s)},i.instance=null,i}(e.Je);e.AC=t}(Y||(Y={})),function(e){var t=function(){function t(t,i,r,n,s){this.ya=-1,this.Rd=t,this.$z=i,this.Cs=r,this.tT=new e.l,this.tT.Oa(),this.eo=-1,this.Ub=s}return t.prototype.next=function(){for(var e;null!=(e=this.Rd.next());)return this.ya=this.Rd.La(),this.eo+1<this.Cs.length&&this.eo++,this.buffer(e,this.Cs[this.eo]);return null},t.prototype.La=function(){return this.ya},t.prototype.buffer=function(t,i){return e.HK.buffer(t,i,this.$z,NaN,96,this.Ub)},t.prototype.qe=function(){},t}();e.BC=t}(Y||(Y={})),function(e){var t=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Q(i,t),i.prototype.getType=function(){return 16},i.local=function(){return null===i.instance&&(i.instance=new i),i.instance},i.prototype.V=function(t,i,r,n){return t instanceof e.aa?(t=new e.Zc(t),this.V(t,i,r,n).next()):new e.lL(t,i,r,n)},i.instance=null,i}(e.Je);e.kL=t}(Y||(Y={})),function(e){var t=function(){function t(t,i,r){if(this.ya=-1,null==t)throw e.i.N();this.$=i,this.yk=t,this.qa=e.ta.Wd(r,i,!1)}return t.prototype.next=function(){var t;return null!=(t=this.yk.next())?(this.ya=this.yk.La(),e.Ud.clip(t,this.$,this.qa,0)):null},t.prototype.La=function(){return this.ya},t.prototype.qe=function(){},t}();e.lL=t}(Y||(Y={})),function(e){var t=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Q(i,t),i.prototype.getType=function(){return 31},i.local=function(){return null===i.instance&&(i.instance=new i),i.instance},i.prototype.V=function(t,i,r){return t instanceof e.aa?e.DC.rE(t):new e.DC(i,t,r)},i.instance=null,i}(e.Je);e.CC=t}(Y||(Y={})),function(e){var t=function(){function t(t,i,r){if(this.uA=new e.Zt,this.ya=-1,null==i)throw e.i.N();this.cH=t,this.Ic=!1,this.yk=i,this.Ub=r}return t.prototype.next=function(){if(this.cH){if(!this.Ic){var e=this.dO(this.yk);return this.Ic=!0,e}return null}if(!this.Ic){if(null!=(e=this.yk.next()))return this.ya=this.yk.La(),t.rE(e);this.Ic=!0}return null},t.prototype.La=function(){return this.ya},t.prototype.dO=function(e){for(var t;null!=(t=e.next());)this.uA.Ib(t);return this.uA.cR()},t.prototype.qe=function(){if(!this.Ic){if(!this.cH)throw e.i.fa("Invalid call for non merging convex hull.");var t=this.yk.next();if(null==t)throw e.i.fa("Expects a non-null geometry.");this.uA.Ib(t)}},t.rE=function(i){if(t.VS(i))return i;var r=i.getType();if(e.Vk.yd(r))return(r=new e.Ta(i.description)).oc(i,!0),r;if(550==r&&2==i.I()){var n=new e.Sa;return r=new e.Ta(i.description),i.ve(0,n),r.nf(n),i.ve(1,n),r.lineTo(n),r}return e.Zt.RO(i)},t.VS=function(t){if(t.B())return!0;var i=t.getType();return 33==i||197==i||!e.Vk.yd(i)&&(550==i?1==t.I():1607==i?1==t.da()&&2>=t.I():1==t.da()&&(2>=t.I()||e.Zt.JG(t,0)))},t}();e.DC=t}(Y||(Y={})),function(e){var t=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Q(i,t),i.prototype.getType=function(){return 17},i.local=function(){return null===i.instance&&(i.instance=new i),i.instance},i.prototype.V=function(t,i,r,n,s){return new e.nL(t,i,r,n,s)},i.instance=null,i}(e.Je);e.mL=t}(Y||(Y={})),function(e){var t=function(){function t(t,i,r,n,s){if(this.Tf=null,null==i||null==r)throw e.i.fa("invalid argument");this.qT=t,this.nA=i,this.lH=r,t=e.ta.mv(i,r),this.qa=e.ta.Wd(n,t,!0),this.kH=-1,this.nd=s}return t.prototype.La=function(){return 0},t.prototype.next=function(){return this.RQ(),++this.kH<this.Tf.length?this.Tf[this.kH]:null},t.prototype.RQ=function(){if(null==this.Tf)switch(this.Tf=[],this.nA.getType()){case 1607:this.TQ();break;case 1736:this.SQ()}},t.prototype.TQ=function(){var t=new e.Ta,i=new e.Ta,r=new e.Ta;this.Tf.push(t),this.Tf.push(i);var n=[];e.LK.JK(this.qT,this.nA,this.lH,this.qa,n,this.nd);for(var s=0;s<n.length;s++){var o=n[s];if(0==o.bt)t.add(o.X,!1);else if(1==o.bt||2==o.bt)i.add(o.X,!1);else if(3==o.bt)this.Tf.push(o.X);else{if(4!=o.bt)throw e.i.fa("internal");r.add(o.X,!1)}}r.B()||t.B()&&i.B()&&!(3<=this.Tf.length)||this.Tf.push(r),t.B()&&i.B()&&3>this.Tf.length&&(this.Tf.length=0)},t.prototype.SQ=function(){var t=new e.ia(0),i=new e.gd,r=i.aF(),n=i.Ib(this.nA),s=i.Ib(this.lH),o=new e.Fg;try{o.Ft(i,this.qa,this.nd),o.dl(r,n,s,t);var a=i.Ne(n),l=new e.Da,c=new e.Da;for(this.Tf.length=0,this.Tf.push(l),this.Tf.push(c),n=0;n<t.size;n++){var h=new e.gd,u=h.Ib(a),p=h.Ib(i.Ne(t.get(n)));o.dr(h,this.nd);var d=o.Av(u,p),f=h.Ne(d);if(!f.B()){var y=i.KF(t.get(n),r);2==y?l.add(f,!1):1==y?c.add(f,!1):this.Tf.push(f);var m=new e.gd;u=m.Ib(a),p=m.Ib(i.Ne(t.get(n))),o.dr(m,this.nd),a=m.Ne(o.im(u,p))}}!a.B()&&0<t.size&&this.Tf.push(a),l.B()&&c.B()&&(this.Tf.length=0)}finally{o.Ug()}},t.prototype.qe=function(){},t}();e.nL=t}(Y||(Y={})),function(e){var t=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Q(i,t),i.prototype.getType=function(){return 18},i.local=function(){return null===i.instance&&(i.instance=new i),i.instance},i.prototype.V=function(t,i,r){if(t instanceof e.aa)return t=new e.Zc(t),this.V(t,i,r).next();if(0>=i)throw e.i.N();return new e.oL(t,i,r)},i.instance=null,i}(e.Je);e.Xl=t}(Y||(Y={})),function(e){var t=function(){function t(e,t){this.ya=-1,this.Rd=e,this.Ps=t}return t.prototype.La=function(){return this.ya},t.prototype.next=function(){var e;return null!=(e=this.Rd.next())?(this.ya=this.Rd.La(),this.NP(e)):null},t.prototype.NP=function(t){if(t.B()||1>t.Db())return t;var i=t.getType();if(1736==i||1607==i)return this.Ny(t);if(e.aa.yd(i))return this.PP(t);if(197==i)return this.OP(t);throw e.i.Qa()},t.prototype.PP=function(t){if(t.Qb()<=this.Ps)return t;var i=new e.Ta(t.description);return i.oc(t,!0),this.Ny(i)},t.prototype.OP=function(t){var i=new e.Da(t.description);i.ad(t,!1);var r=new e.l;return t.A(r),t=r.ca(),r.R()<=this.Ps&&t<=this.Ps?i:this.Ny(i)},t.prototype.Ny=function(t){for(var i=t.Ia(),r=t.Ga();r.$a();)for(var n=!0;r.Ha();){var s=r.ha();if(322!=s.getType())throw e.i.fa("not implemented");var o=r.On(),a=s.Qb();if(a>this.Ps){var l=Math.ceil(a/this.Ps);a=new e.Sa(t.description),n&&(s.To(a),i.nf(a));var c=n=1/l,h=0;for(--l;h<l;h++)s.Tw(c,a),i.lineTo(a),c+=n;o?i.Ap():(s.Po(a),i.lineTo(a))}else o?i.Ap():i.oc(s,n);n=!1}return i},t.prototype.qe=function(){},t}();e.oL=t}(Y||(Y={})),function(e){var t=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Q(i,t),i.local=function(){return null===i.instance&&(i.instance=new i),i.instance},i.prototype.getType=function(){return 2},i.prototype.V=function(t,i,r,n){return t instanceof e.aa?(t=new e.Zc(t),i=new e.Zc(i),this.V(t,i,r,n).next()):new e.qL(t,i,r,n)},i.im=function(t,r,n,s){if(t.B()||r.B())return t;var o=t.Db(),a=r.Db();if(o>a)return t;var l=t.getType(),c=r.getType(),h=new e.l,u=new e.l,p=new e.l;t.A(h),r.A(u),p.K(h),p.Zb(u);var d=(p=e.ta.Wd(n,p,!0))*Math.sqrt(2)*1.00001,f=new e.l;if(f.K(h),f.W(d,d),!f.isIntersecting(u))return t;if(1==o&&2==a)return i.KV(t,r,c,n,s);if(33==l)switch(e.Vk.yd(c)?(n=new e.Ta(r.description),n.oc(r,!0)):n=r,c){case 1736:return i.XU(t,n,p);case 1607:return i.YU(t,n,p);case 550:return i.VU(t,n,p);case 197:return i.UU(t,n,p);case 33:return i.WU(t,n,p);default:throw e.i.N()}else if(550==l)switch(c){case 1736:return i.nU(t,r,p);case 197:return i.lU(t,r,p);case 33:return i.mU(t,r,p)}return e.Fg.im(t,r,n,s)},i.XU=function(t,i,r){return 0==e.hd.KG(i,t,r)?t:t.Ia()},i.YU=function(t,i,r){var n=t.D();i=i.Ga();for(var s=r*Math.sqrt(2)*1.00001,o=s*s,a=new e.l;i.$a();)for(;i.Ha();){var l=i.ha();if(l.A(a),a.W(s,s),a.contains(n)){if(l.qs(n,r))return t.Ia();var c=l.ac();if(e.h.yc(n,c)<=o)return t.Ia();if(c=l.wc(),e.h.yc(n,c)<=o)return t.Ia()}}return t},i.VU=function(t,i,r){var n=i.ub(0);i=i.I();var s=t.D(),o=new e.h;r=r*Math.sqrt(2)*1.00001,r*=r;for(var a=0;a<i;a++)if(n.tc(2*a,o),e.h.yc(o,s)<=r)return t.Ia();return t},i.UU=function(t,i,r){var n=new e.l;return i.A(n),n.W(r,r),i=t.D(),n.contains(i)?t.Ia():t},i.WU=function(t,i,r){r=r*Math.sqrt(2)*1.00001,r*=r;var n=t.D();return i=i.D(),e.h.yc(n,i)<=r?t.Ia():t},i.nU=function(t,i,r){var n=new e.l;i.A(n),n.W(r,r);for(var s=t.I(),o=!1,a=[],l=0;l<s;l++)a[l]=!1;var c=new e.h;for(l=0;l<s;l++)t.D(l,c),n.contains(c)&&0!=e.hd.Yd(i,c,r)&&(o=!0,a[l]=!0);if(!o)return t;for(i=t.Ia(),l=0;l<s;l++)a[l]||i.Fd(t,l,l+1);return i},i.lU=function(t,i,r){var n=new e.l;i.A(n),n.W(r,r),i=t.I();var s=!1;r=[];for(var o=0;o<i;o++)r[o]=!1;var a=new e.h;for(o=0;o<i;o++)t.D(o,a),n.contains(a)&&(s=!0,r[o]=!0);if(!s)return t;for(n=t.Ia(),o=0;o<i;o++)r[o]||n.Fd(t,o,o+1);return n},i.mU=function(t,i,r){var n=t.ub(0),s=t.I(),o=i.D(),a=new e.h,l=!1;i=[];for(var c=0;c<s;c++)i[c]=!1;for(r=(c=r*Math.sqrt(2)*1.00001)*c,c=0;c<s;c++)n.tc(2*c,a),e.h.yc(a,o)<=r&&(l=!0,i[c]=!0);if(!l)return t;for(n=t.Ia(),c=0;c<s;c++)i[c]||n.Fd(t,c,c+1);return n},i.KV=function(t,i,r,n,s){var o=new e.Fh;t.bn(o);var a=new e.l;return i.A(a),o.Zb(a),o.W(.1*o.R(),.1*o.ca()),(a=new e.Da).ad(o,!1),1736==r?a.add(i,!0):a.ad(i,!0),e.Xj.local().V(t,a,n,s)},i.instance=null,i}(e.Je);e.kp=t}(Y||(Y={})),function(e){var t=function(){function t(e,t,i,r){this.ts=null==t,this.ya=-1,this.Rd=e,this.$z=i,this.wT=t.next(),this.Ub=r}return t.prototype.next=function(){return this.ts?null:null!=(t=this.Rd.next())?(this.ya=this.Rd.La(),e.kp.im(t,this.wT,this.$z,this.Ub)):null;var t},t.prototype.La=function(){return this.ya},t.prototype.qe=function(){},t}();e.qL=t}(Y||(Y={})),function(e){var t=function(){function t(t){this.nd=t,this.Bj=new e.l,this.Bj.Oa(),this.oh=new e.l,this.oh.Oa()}return t.prototype.Nt=function(){var e=this.Bj.v;this.Bj.v=this.oh.v,this.oh.v=e,e=this.Bj.C,this.Bj.C=this.oh.C,this.oh.C=e,e=this.Bj.G,this.Bj.G=this.oh.G,this.oh.G=e,e=this.Bj.H,this.Bj.H=this.oh.H,this.oh.H=e},t.prototype.eQ=function(t,i){if(null!=this.nd&&!this.nd.progress(-1,-1))throw e.i.fu("user_canceled");var r=!this.Bj.isIntersecting(this.oh);return e.aa.Hc(t.getType())&&e.aa.Hc(i.getType())?t.I()>i.I()?this.gE(t,i,r):(this.Nt(),t=this.gE(i,t,r),this.Nt(),t):550==t.getType()&&e.aa.Hc(i.getType())?(t=this.hE(i,t,r),this.Nt(),t):550==i.getType()&&e.aa.Hc(t.getType())?this.hE(t,i,r):550==t.getType()&&550==i.getType()?t.I()>i.I()?this.iE(t,i):(this.Nt(),t=this.iE(i,t),this.Nt(),t):0},t.prototype.gE=function(t,i,r){var n=t.Ga(),s=i.Ga(),o=new e.l,a=new e.l,l=17976931348623157e292;if(!r&&this.pY(t,i,n,s))return 0;for(;n.$a();)for(;n.Ha();)if((t=n.ha()).A(o),!(o.px(this.oh)>l)){for(;s.$a();)for(;s.Ha();)if((i=s.ha()).A(a),o.px(a)<l&&(i=t.tb(i,r),(i*=i)<l)){if(0==i)return 0;l=i}s.Zi()}return Math.sqrt(l)},t.prototype.hE=function(t,i,r){var n=t.Ga(),s=new e.l,o=17976931348623157e292,a=new e.h,l=i.I();for(r=!r&&1736==t.getType();n.$a();)for(;n.Ha();){var c=n.ha();if(c.A(s),!(1<l&&s.px(this.oh)>o)){for(var h=0;h<l;h++){if(i.D(h,a),r&&0!=e.hd.Yd(t,a,0))return 0;var u=c.fe(a,!1);if(a.sub(c.hc(u)),(u=a.Sk())<o){if(0==u)return 0;o=u}}r=!1}}return Math.sqrt(o)},t.prototype.iE=function(t,i){for(var r,n=17976931348623157e292,s=new e.h,o=new e.h,a=t.I(),l=i.I(),c=0;c<a;c++)if(t.D(c,s),!(1<l&&this.oh.iK(s)>n))for(var h=0;h<l;h++)if(i.D(h,o),(r=e.h.yc(s,o))<n){if(0==r)return 0;n=r}return Math.sqrt(n)},t.prototype.pY=function(t,i,r,n){if(1736==t.getType()){for(;n.$a();)if(n.Ha()){var s=n.ha();if(0!=e.hd.Yd(t,s.wc(),0))return!0}n.Zi()}if(1736==i.getType()){for(;r.$a();)if(r.Ha()&&(t=r.ha(),0!=e.hd.Yd(i,t.wc(),0)))return!0;r.Zi()}return!1},t.prototype.gm=function(e,t){return e.B()||t.B()?NaN:(e.A(this.Bj),t.A(this.oh),this.eQ(e,t))},t}(),i=function(i){function r(){return null!==i&&i.apply(this,arguments)||this}return Q(r,i),r.prototype.V=function(i,r,n){if(null==i||null==r)throw e.i.N();if(i.B()||r.B())return NaN;var s=i.getType(),o=r.getType();if(33==s){if(33==o)return e.h.tb(i.D(),r.D());if(197==o)return n=new e.l,r.A(n),n.tb(i.D());(s=new e.de).add(i),i=s}else if(197==s){if(197==o)return o=new e.l,i.A(o),n=new e.l,r.A(n),n.tb(o);(s=new e.Da).ad(i,!1),i=s}return 33==o?((o=new e.de).add(r),r=o):197==o&&((o=new e.Da).ad(r,!1),r=o),new t(n).gm(i,r)},r.local=function(){return null===r.instance&&(r.instance=new r),r.instance},r.prototype.getType=function(){return 14},r.instance=null,r}(e.Je);e.rL=i}(Y||(Y={})),function(e){var t=function(){function t(e,t,i,r){this.zH=e,this.DH=t,this.nd=r,this.$G=i}return t.prototype.next=function(){var e=this.zH.next();return null==e?null:this.zC(e)},t.prototype.La=function(){return this.zH.La()},t.prototype.zC=function(t){var i=t.getType();if(e.aa.Rn(i))return t;if(197==i)return(i=new e.Da(t.description)).ad(t,!1),this.zC(i);if(t.B())return t;if(null==t)throw e.i.Qa();i=t.Ia();for(var r=new e.yb,n=0,s=t.da();n<s;n++)this.TK(t,n,i,r);return i},t.prototype.TK=function(t,i,r,n){if(!(2>t.Ja(i))){var s=t.Ba(i),o=t.Vc(i)-1,a=t.ub(0),l=t.dc(i),c=new e.ia(0);c.Jb(t.Ja(i)+1);var h=new e.ia(0);for(h.Jb(t.Ja(i)+1),c.add(l?s:o),c.add(s),s=new e.h;1<c.size;){var u=c.Fc();c.If();var p=c.Fc();t.D(u,s),n.Dc(s),t.D(p,s),n.Qc(s),0<=(p=this.SK(n,s,a,u,p,o))?(c.add(p),c.add(u)):h.add(u)}if(l||h.add(c.get(0)),h.size==c.size)r.addPath(t,i,!0);else if(2<=h.size&&(!this.$G||2!=h.size||!(l||e.h.tb(t.Na(h.get(0)),t.Na(h.get(1)))<=this.DH))){for(i=new e.Sa,n=0,o=h.size;n<o;n++)t.ve(h.get(n),i),0==n?r.nf(i):r.lineTo(i);l&&(this.$G||2!=h.size||r.lineTo(i),r.Ap())}}},t.prototype.SK=function(e,t,i,r,n,s){var o=n-1;for(n<=r&&(o=s),s=n=-1,r+=1;r<=o;r++){i.tc(2*r,t);var a=t.x,l=t.y;e.hc(e.fe(t,!1),t),t.x-=a,t.y-=l,(a=t.length())>this.DH&&a>s&&(n=r,s=a)}return n},t.prototype.qe=function(){},t}();e.sL=t}(Y||(Y={})),function(e){var t=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Q(i,t),i.prototype.getType=function(){return 29},i.prototype.V=function(t,i,r,n){return t instanceof e.aa?(t=new e.Zc(t),this.V(t,i,r,n).next()):new e.sL(t,i,r,n)},i.local=function(){return null===i.instance&&(i.instance=new i),i.instance},i.instance=null,i}(e.Je);e.EC=t}(Y||(Y={})),function(e){var t=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Q(i,t),i.prototype.getType=function(){return 21},i.local=function(){return null===i.instance&&(i.instance=new i),i.instance},i.prototype.V=function(t,i,r,n,s,o,a,l){return t instanceof e.aa?(l=new e.Zc(t),this.V(l,i,r,[n],s,o,!1,a).next()):!0===a?(r=new e.GC(t,i,r,n,s,!1,!1,l),e.Gh.local().V(r,i,l)):new e.GC(t,i,r,n,s,!1,!1,l)},i.instance=null,i}(e.Je);e.FC=t}(Y||(Y={})),function(e){var t=function(){function t(t,i,r,n,s,o,a,l){if(o)throw e.i.Ie();if(null==i)throw e.i.N();this.ya=-1,this.Ms=t,this.vg=i,this.ze=r,this.Cs=n,this.$n=s,this.eo=-1,this.Ub=l,this.uT=new e.l,this.uT.Oa()}return t.prototype.next=function(){for(var e;null!=(e=this.Ms.next());)return this.ya=this.Ms.La(),this.eo+1<this.Cs.length&&this.eo++,this.$Q(e,this.Cs[this.eo]);return null},t.prototype.La=function(){return this.ya},t.prototype.$Q=function(t,i){return e.VK.buffer(t,this.vg,this.ze,i,this.$n,this.Ub)},t.prototype.qe=function(){},t}();e.GC=t}(Y||(Y={})),function(e){var t=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Q(i,t),i.prototype.getType=function(){return 24},i.local=function(){return null===i.instance&&(i.instance=new i),i.instance},i.prototype.V=function(t,i,r){if(null==i)throw e.i.N();if(t.B()||1>t.Db())return 0;if(4==r)throw e.i.Ie();var n=e.cb.sc(i),s=e.cb.vv(n),o=e.cb.ev(n);s*=2-s;var a=n.Hd().ai,l=t.getType();if(1736==l||197==l)var c=t.mg();else e.aa.yd(l)?(c=new e.Ta(t.description)).oc(t,!0):c=t;if(0==n.Nb(i)){if(e.cb.Wc(i)){c=e.Hh.lj(c,i),1607==l&&c==t&&(c=e.aa.jg(t)),t=new e.Nc,e.cb.gh(i).cn(t),l=0;for(var h=c.I();l<h;l++){var u=c.Na(l);u.x=e.Hh.Zm(u.x,t),c.Cb(l,u)}}t=c.Ia(),c=e.Hh.WI(i,n,c,t)?t:e.cb.zh(c,i,n)}return this.hQ(c,r,o,s,a)},i.prototype.hQ=function(t,i,r,n,s){var o=new e.ga(0),a=0;for(t=t.Ga();t.$a();)for(;t.Ha();){var l=t.ha(),c=l.ac();l=l.wc(),c.scale(s),l.scale(s),e.kb.wd(r,n,c.x,c.y,l.x,l.y,o,null,null,i),a+=o.u}return a},i.instance=null,i}(e.Je);e.vL=t}(Y||(Y={})),function(e){var t=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Q(i,t),i.prototype.getType=function(){return 18},i.local=function(){return null===i.instance&&(i.instance=new i),i.instance},i.prototype.V=function(t,i,r,n,s){return t instanceof e.aa?(t=new e.Zc(t),this.V(t,i,r,n,s).next()):new e.uL(t,r,n,i,-1,-1,s)},i.instance=null,i}(e.Je);e.tL=t}(Y||(Y={})),function(e){var t=function(){function t(t,i,r,n,s,o){if(0<o)throw e.i.Ie();if(4!=r&&0<s)throw e.i.Ie();if(null==i)throw e.i.N();this.ya=-1,this.Ms=t,this.vg=i,this.ze=r,this.DT=n,this.CT=s}return t.prototype.next=function(){for(var e;null!=(e=this.Ms.next());)return this.ya=this.Ms.La(),this.Zy(e);return null},t.prototype.La=function(){return this.ya},t.prototype.Zy=function(t){return e.cj.Qr(t,this.vg,this.ze,this.DT,this.CT,this.Ub)},t.prototype.qe=function(){},t}();e.uL=t}(Y||(Y={})),function(e){!function(e){e[e.Unknown=0]="Unknown",e[e.Contains=1]="Contains",e[e.Within=2]="Within",e[e.Equals=3]="Equals",e[e.Disjoint=4]="Disjoint",e[e.Touches=8]="Touches",e[e.Crosses=16]="Crosses",e[e.Overlaps=32]="Overlaps",e[e.NoThisRelation=64]="NoThisRelation",e[e.Intersects=1073741824]="Intersects",e[e.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"}(e.cL||(e.cL={})),e.wL=function(){function t(){}return t.nW=function(t,i){var r=t.getType(),n=i.getType();if(e.aa.xj(r)){var s=t.Bb;if(null!=s&&null!=(s=s.Fk)){if(33==n){var o=i.D();s=s.So(o.x,o.y)}else o=new e.l,i.A(o),s=s.Ro(o);if(1==s)return 1;if(0==s)return 4}}if(e.aa.xj(n)&&null!=(s=i.Bb)&&null!=(s=s.Fk)){if(33==r?(t=t.D(),s=s.So(t.x,t.y)):(i=new e.l,t.A(i),s=s.Ro(i)),1==s)return 2;if(0==s)return 4}return 0},t}()}(Y||(Y={})),function(e){var t=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Q(i,t),i.local=function(){return null===i.instance&&(i.instance=new i),i.instance},i.prototype.getType=function(){return 15},i.prototype.V=function(t,i,r,n,s){return t instanceof e.aa?(t=new e.Zc(t),i=new e.Zc(i),this.V(t,i,r,n,void 0===s?-1:s).next()):void 0===s?new e.HC(t,i,r,n,-1):new e.HC(t,i,r,n,s)},i.prototype.wn=function(t,i,r){this.Iu(t)&&(i=e.ta.kj(i,t,!1),t.fj(r)||t.lu(i,r))},i.prototype.Iu=function(t){return e.Nx.zE(t)},i.instance=null,i}(e.Je);e.Xj=t}(Y||(Y={})),function(e){var t=function(){function t(t,i,r,n,s){if(this.ts=null==i,this.ya=-1,this.Rd=t,this.vg=r,this.Se=i.next(),this.Dj=this.Se.getType(),this.Ub=n,this.Fi=s,-1!=this.Fi&&(0>=this.Fi||7<this.Fi))throw e.i.N("bad dimension mask")}return t.prototype.next=function(){if(this.ts)return null;if(null!=this.zw){var e=this.zw.next();if(null!=e)return e;this.zw=null}for(;null!=(e=this.Rd.next());)return this.ya=this.Rd.La(),-1==this.Fi?e=this.Ea(e):(this.zw=this.PS(e),e=this.zw.next()),e;return null},t.prototype.La=function(){return this.ya},t.prototype.Ea=function(t){var i=this.zK(t);if(null!=i)return i;i=e.ta.mv(this.Se,t);var r=e.ta.Wd(this.vg,i,!0);i=new e.l,this.Se.A(i);var n=new e.l;return t.A(n),i.W(2*r,2*r),i.Ea(n),i.W(100*r,100*r),r=e.Ud.clip(this.Se,i,0,0),t=e.Ud.clip(t,i,0,0),e.Fg.Av(t,r,this.vg,this.Ub)},t.prototype.QI=function(t,i,r){var n=0;if(1&i)null==r[0]&&(r[0]=new e.de(t)),n++;else for(var s=0;s<r.length-1;s++)r[s]=r[s+1];if(2&i)null==r[n]&&(r[n]=new e.Ta(t)),n++;else for(s=n;s<r.length-1;s++)r[s]=r[s+1];if(4&i)null==r[n]&&(r[n]=new e.Da(t)),n++;else for(s=n;s<r.length-1;s++)r[s]=r[s+1];if(3!=n){for(t=[],s=0;s<n;s++)t[s]=r[s];return new e.Zc(t)}return new e.Zc(r)},t.prototype.PS=function(t){var i=this.zK(t);if(null!=i){var r=[null,null,null];return r[i.Db()]=i,this.QI(t.description,this.Fi,r)}i=e.ta.mv(this.Se,t),r=e.ta.Wd(this.vg,i,!0),i=new e.l,this.Se.A(i),i.W(2*r,2*r);var n=new e.l;return t.A(n),i.Ea(n),i.W(100*r,100*r),r=e.Ud.clip(this.Se,i,0,0),i=e.Ud.clip(t,i,0,0),r=e.Fg.Pz(i,r,this.vg,this.Ub),this.QI(t.description,this.Fi,r)},t.prototype.zK=function(i){var r=e.ta.mv(i,this.Se),n=e.ta.Wd(this.vg,r,!0);r=i.getType();var s=i.B(),o=this.Se.B();if(!(o=s||o)){o=new e.l,i.A(o);var a=new e.l;this.Se.A(a),a.W(2*n,2*n),o=!o.isIntersecting(a)}if(!o)if(4==(a=e.wL.nW(this.Se,i)))o=!0;else{if(2&a)return this.Se;if(1&a)return i}if(o)return(n=e.aa.tf(r))<(o=e.aa.tf(this.Dj))?t.HB(i,s):n>o||0==n&&550==r&&33==this.Dj?this.nJ():t.HB(i,s);if((-1==this.Fi||4==this.Fi)&&197==r&&197==this.Dj)return n=this.Se,r=new e.l,i.A(r),s=new e.l,n.A(s),r.Ea(s),n=new e.Fh,i.copyTo(n),n.Xo(r),n;if(197==r&&0==e.aa.tf(this.Dj)||197==this.Dj&&0==e.aa.tf(r))return s=197==r?i:this.Se,i=197==r?this.Se:i,r=new e.l,s.A(r),e.Ud.clip(i,r,n,0);if(0==e.aa.tf(r)&&0<e.aa.tf(this.Dj)||0<e.aa.tf(r)&&0==e.aa.tf(this.Dj)){if(n=e.ta.kj(this.vg,i,!1),550==r||33==r)return e.Fg.zG(i,this.Se,n);if(550==this.Dj||33==this.Dj)return e.Fg.zG(this.Se,i,n);throw e.i.Qa()}return-1!=this.Fi&&2!=this.Fi||1607!=r||1736!=this.Dj?-1!=this.Fi&&2!=this.Fi||1736!=r||1607!=this.Dj?null:this.wK(this.Se,i):this.wK(i,this.Se)},t.prototype.wK=function(t,i){var r=t,n=i,s=e.ta.kj(this.vg,i,!1),o=new e.l;n.A(o);var a=new e.l;r.A(a),a.W(2*s,2*s),o.Ea(a),o.W(10*s,10*s),r=t=e.Ud.clip(t,o,0,0),a=new e.ia(0);var l=-1,c=n.Bb;if(null!=c){var h=c.Fk;if(null!=h){l=0,a.Jb(r.I()+r.da());for(var u=new e.l,p=r.Ga();p.$a();)for(;p.Ha();){p.ha().A(u);var d=h.Ro(u);1==d?a.add(1):0==d?a.add(0):(a.add(-1),l++)}}}if(5<i.I()&&(c=(n=i=e.Ud.clip(i,o,0,0)).Bb),0>l&&(l=r.yz()),o=r.I()+n.I(),l*n.I()>Math.log(o)*o*4)return null;o=null,l=n.Ga(),null!=c&&null!=c.Fb&&(o=c.Fb),null==o&&20<n.I()&&(o=e.ta.nE(n)),t=t.Ia(),n=null,c=r.Ga(),h=[0,0,0,0,0,0,0,0,0],u=new e.be(0),p=new e.ig,d=-1;for(var f=0,y=0,m=0<a.size,g=-1;c.$a();){g=c.gb;var v=0;for(d=-1,f=0;c.Ha();){var _=m?e.O.truncate(a.get(y)):-1;y++;var b=c.ha();if(0>_){if(null!=o)for(null==n?n=o.vR(b,s):n.Uo(b,s),_=n.next();-1!=_;_=n.next()){l.Vb(o.ja(_)),_=l.ha();var w=b.Ea(_,null,h,null,s);for(_=0;_<w;_++)u.add(h[_])}else for(l.Zi();l.$a();)for(;l.Ha();)for(_=l.ha(),w=b.Ea(_,null,h,null,s),_=0;_<w;_++)u.add(h[_]);if(0<u.size){u.Vd(0,u.size,(function(e,t){return e-t}));var M=0;u.add(1),w=-1,_=0;for(var T=u.size;_<T;_++){var S=u.get(_);if(S!=M){var A=!1;if(0!=M||1!=S?(b.ah(M,S,p),M=p.get()):(M=b,A=!0),2<=v){if(t.Dr(r,g,d,f,3==v),1!=this.QD(i,M.ac(),s)&&1!=this.RD(i,M,s))return null;t.oc(M,!1),v=1,f=0}else switch(w=this.RD(i,M,s),w){case 1:A?2>v?(d=c.wb()-r.Ba(g),f=1,v=0==v?3:2):f++:(t.oc(M,0==v),v=1);break;case 0:v=0,d=-1,f=0;break;default:return null}M=S}}}else{if(0>(_=this.QD(i,b.ac(),s)))return null;1==_?(2>v&&(d=c.wb()-r.Ba(g),v=0==v?3:2),f++):(d=-1,f=0)}u.clear(!1)}else 0!=_&&1==_&&(0==v?(v=3,d=c.wb()-r.Ba(g)):1==v?(v=2,d=c.wb()-r.Ba(g)):f++)}2<=v&&(t.Dr(r,g,d,f,3==v),d=-1)}return t},t.prototype.QD=function(t,i,r){return e.Dg.wm(t,i,r)},t.prototype.RD=function(t,i,r){var n=i.ac();i=i.wc();var s=e.Dg.wm(t,n,r),o=e.Dg.wm(t,i,r);return 1==s&&0==o||0==s&&1==o?-1:0==s||0==o?0:1==s||1==o?1:((s=new e.h).add(n,i),s.scale(.5),0==(t=e.Dg.wm(t,s,r))?0:1==t?1:-1)},t.HB=function(e,t){return t?e:e.Ia()},t.prototype.nJ=function(){return null==this.yH&&(this.yH=this.Se.Ia()),this.yH},t.prototype.qe=function(){},t}();e.HC=t}(Y||(Y={})),function(e){var t=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Q(i,t),i.prototype.getType=function(){return 28},i.local=function(){return null===i.instance&&(i.instance=new i),i.instance},i.prototype.V=function(t,i,r,n,s,o,a){return t instanceof e.aa?(t=new e.Zc(t),this.V(t,i,r,n,s,o,a).next()):new e.xL(t,i,r,n,s,o,a)},i.instance=null,i}(e.Je);e.IC=t}(Y||(Y={})),function(e){var t=function(){function t(e,t,i,r,n,s,o){this.ya=-1,this.Rd=e,this.Mj=t,this.Ka=i,this.Ki=r,this.CA=n,this.uH=s,this.nd=o}return t.prototype.next=function(){var e=this.Rd.next();return null!=e?(this.ya=this.Rd.La(),this.jL(e)):null},t.prototype.La=function(){return this.ya},t.prototype.jL=function(t){var i=0>=this.uH?e.ta.kj(this.Mj,t,!1):this.uH;return e.IK.V(t,this.Ka,this.Ki,this.CA,i,this.nd)},t.prototype.qe=function(){},t}();e.xL=t}(Y||(Y={})),function(e){var t;(t=e.NK||(e.NK={}))[t.clipToDomainOnly=1]="clipToDomainOnly",t[t.clipWithHorizon=2]="clipWithHorizon",t[t.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var i=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Q(i,t),i.prototype.getType=function(){return 0},i.local=function(){return null===i.instance&&(i.instance=new i),i.instance},i.prototype.V=function(t,i,r){return t instanceof e.aa?(t=new e.Zc(t),this.V(t,i,r).next()):new e.yL(t,i,r)},i.prototype.transform=function(t,i,r,n){return e.bu.transform(t,i,r,n,!0)},i.prototype.Qt=function(t,i,r,n){return e.bu.Qt(t,i,r,n)},i.instance=null,i}(e.Je);e.Hx=i}(Y||(Y={})),function(e){var t=function(){function t(e,t,i){this.ya=-1,this.Rd=e,this.MT=t,this.nd=i}return t.prototype.next=function(){var t=this.Rd.next();return null!=t?(this.ya=this.Rd.La(),e.bu.zh(t,this.MT,this.nd)):null},t.prototype.La=function(){return this.ya},t.prototype.qe=function(){},t}();e.yL=t}(Y||(Y={})),function(e){var t=function(){function t(){}return t.prototype.reset=function(){this.ph=this.xk=-1,this.us=this.kq=!1},t.prototype.AQ=function(e,t,i){for(e.Vb(t,i);e.Ha();){var r=e.ha();if(0!=(r=r.Qb()))return e.wb()}for(e.Vb(t,i);e.Ez();)if(0!=(r=(r=e.li()).Qb()))return e.wb();return-1},t.prototype.BQ=function(e,t){for(e.Vb(t,-1);e.Ez();)if(0!=e.li().Qb())return e.wb();return-1},t.prototype.zQ=function(e,t){for(e.Vb(t,-1),e.ha();e.Ha();)if(0!=e.ha().Qb())return e.wb();return-1},t.prototype.yQ=function(t,i,r,n){if(this.xk=this.AQ(i,r,n),-1!=this.xk){i.Vb(this.xk,-1);var s=i.ha(),o=s.hc(s.fe(t,!1));if(r=e.h.yc(o,t),(n=new e.h).L(o),n.sub(s.ac()),(o=new e.h).L(t),o.sub(s.ac()),this.kq=0>n.wi(o),this.ph=this.zQ(i,this.xk),-1!=this.ph){i.Vb(this.ph,-1);var a=(s=i.ha()).fe(t,!1);a=s.hc(a);var l=e.h.yc(a,t);l>r?this.ph=-1:(n.L(a),n.sub(s.ac()),o.L(t),o.sub(s.ac()),this.us=0>n.wi(o))}-1==this.ph&&(this.ph=this.BQ(i,this.xk),-1!=this.ph&&(i.Vb(this.ph,-1),a=(s=i.ha()).fe(t,!1),a=s.hc(a),(l=e.h.yc(a,t))>r?this.ph=-1:(n.L(a),n.sub(s.ac()),o.L(t),o.sub(s.ac()),this.us=0>n.wi(o),t=this.xk,this.xk=this.ph,this.ph=t,t=this.kq,this.kq=this.us,this.us=t)))}},t.prototype.cO=function(e,t,i,r,n){return i=i.Ga(),this.yQ(e,i,r,n),-1!=this.xk&&-1==this.ph?this.kq:-1!=this.xk&&-1!=this.ph?this.kq==this.us?this.kq:(i.Vb(this.xk,-1),e=i.ha().kg(),i.Vb(this.ph,-1),t=i.ha().kg(),0<=e.wi(t)):t},t}(),i=function(i){function r(){return null!==i&&i.apply(this,arguments)||this}return Q(r,i),r.local=function(){return null===r.instance&&(r.instance=new r),r.instance},r.prototype.getType=function(){return 3},r.prototype.nz=function(t,i,r){var n;if(void 0===n&&(n=!1),t.B())return new e.$l;i=i.D();var s=t,o=t.getType();switch(197==o&&((s=new e.Da).ad(t,!1),o=1736),o){case 33:return this.xI(s,i);case 550:return this.jI(s,i);case 1607:case 1736:return this.bU(s,i,r,n);default:throw e.i.fa("not implemented")}},r.prototype.oz=function(t,i){if(t.B())return new e.$l;i=i.D();var r=t,n=t.getType();switch(197==n&&((r=new e.Da).ad(t,!1),n=1736),n){case 33:return this.xI(r,i);case 550:case 1607:case 1736:return this.jI(r,i);default:throw e.i.fa("not implemented")}},r.prototype.pz=function(t,i,r,n){if(0>n)throw e.i.N();if(t.B())return[];i=i.D();var s=t,o=t.getType();switch(197==o&&((s=new e.Da).ad(t,!1),o=1736),o){case 33:return this.TU(s,i,r,n);case 550:case 1607:case 1736:return this.tU(s,i,r,n);default:throw e.i.fa("not implemented")}},r.prototype.bU=function(i,r,n,s){if(1736==i.getType()&&n&&(n=new e.l,i.A(n),n=e.ta.Wd(null,n,!1),0!=(s?e.hd.Yd(i,r,0):e.hd.Yd(i,r,n)))){var o=new e.$l(r,0,0);return s&&o.WJ(!0),o}var a=i.Ga();o=new e.h;for(var l=n=-1,c=17976931348623157e292,h=0;a.$a();)for(;a.Ha();){var u=a.ha();u=u.hc(u.fe(r,!1));var p=e.h.yc(u,r);p<c?(h=1,o=u,n=a.wb(),l=a.gb,c=p):p==c&&h++}return o=new e.$l(o,n,Math.sqrt(c)),s&&(a.Vb(n,l),u=a.ha(),s=0>e.h.Uq(r,u.ac(),u.wc()),1<h&&((h=new t).reset(),s=h.cO(r,s,i,n,l)),o.WJ(s)),o},r.prototype.xI=function(t,i){return t=t.D(),i=e.h.tb(t,i),new e.$l(t,0,i)},r.prototype.jI=function(t,i){for(var r=t.ub(0),n=t.I(),s=t=0,o=0,a=17976931348623157e292,l=0;l<n;l++){var c=new e.h;r.tc(2*l,c);var h=e.h.yc(c,i);h<a&&(s=c.x,o=c.y,t=l,a=h)}return(i=new e.$l).ey(s,o,t,Math.sqrt(a)),i},r.prototype.TU=function(t,i,r,n){return 0==n?[]:(r*=r,t=t.D(),(i=e.h.yc(t,i))<=r?(r=[],(n=new e.$l).ey(t.x,t.y,0,Math.sqrt(i)),r[0]=n):r=[],r)},r.prototype.tU=function(t,i,r,n){if(0==n)return[];var s=t.ub(0),o=t.I();t=[],r*=r;for(var a=0;a<o;a++){var l=s.read(2*a),c=s.read(2*a+1),h=i.x-l,u=i.y-c;(h=h*h+u*u)<=r&&((u=new e.$l).ey(l,c,a,Math.sqrt(h)),t.push(u))}return i=t.length,t.sort((function(e,t){return e.Ka<t.Ka?-1:e.Ka==t.Ka?0:1})),n>=i||(t.length=n),t.slice(0)},r.instance=null,r}(e.Je);e.Ix=i}(Y||(Y={})),function(e){var t=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Q(i,t),i.prototype.getType=function(){return 4},i.prototype.V=function(t,i,r,n,s){return e.am.yB(t,i,r,n,s)},i.local=function(){return null===i.instance&&(i.instance=new i),i.instance},i.prototype.Iu=function(t){return e.Vt.wy(t)},i.prototype.wn=function(t,i,r){e.Vt.CD(t,i,r)},i.instance=null,i}(e.Je);e.zL=t}(Y||(Y={})),function(e){var t=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Q(i,t),i.prototype.getType=function(){return 33},i.prototype.V=function(t,i,r,n,s){return 1073741824===t?!e.ud.zB(i,r,n,4,s):e.ud.zB(i,r,n,t,s)},i.local=function(){return null===i.instance&&(i.instance=new i),i.instance},i.prototype.Iu=function(t){return e.Vt.wy(t)},i.prototype.wn=function(t,i,r){e.Vt.CD(t,i,r)},i.instance=null,i}(e.Je);e.dj=t}(Y||(Y={})),function(e){var t=function(){function t(t,i,r,n){if(this.nd=n,this.rT=r,this.ya=-1,null==t)throw e.i.N();this.yk=t,this.Mj=i}return t.prototype.next=function(){var t;if(null!=(t=this.yk.next())){if(this.ya=this.yk.La(),null!=this.nd&&!this.nd.progress(-1,-1))throw e.i.fu("user_canceled");return this.eC(t)}return null},t.prototype.La=function(){return this.ya},t.prototype.eC=function(t){if(null==t)throw e.i.N();return e.Jx.cK(t,this.Mj,this.rT,this.nd)},t.prototype.qe=function(){},t}();e.AL=t}(Y||(Y={})),function(e){var t=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Q(i,t),i.prototype.getType=function(){return 26},i.prototype.V=function(t,i,r,n){return t instanceof e.aa?(t=new e.Zc(t),this.V(t,i,r,n).next()):new e.AL(t,i,r,n)},i.prototype.rs=function(t,i,r,n,s){return 0<(void 0!==n?e.Jx.rs(t,i,r,n,s):e.Jx.rs(t,i,!1,null,r))},i.local=function(){return null===i.instance&&(i.instance=new i),i.instance},i.instance=null,i}(e.Je);e.Yl=t}(Y||(Y={})),function(e){var t=function(){function e(){this.yq=0}return e.prototype.nX=function(e){this.yq&=-2,this.yq|=e?1:0},e.prototype.Wp=function(){return!!(1&this.yq)},e.prototype.XF=function(){return this.Wp()?0:1},e}();e.xY=t;var i=function(){},r=function(e,t,i,r){this.x=e,this.y=t,this.Ai=i,this.xm=r},n=function(){function e(e){this.Be=e}return e.prototype.compare=function(e,t,i){return e=e.ja(i),t=this.Be.lf.read(2*t),0>(t-=e=this.Be.lf.read(2*e))?-1:0<t?1:0},e}(),s=function(){function e(e){this.Be=e}return e.prototype.compare=function(e,t,i){t=this.Be.hb[t],e=this.Be.hb[e.ja(i)];var r=t.Wp(),n=e.Wp();i=t.ne.Pe(this.Be.Mo,0);var s=e.ne.Pe(this.Be.Mo,0);return i==s&&((r=.5*((i=Math.min(r?t.ne.na:t.ne.la,n?e.ne.na:e.ne.la))-this.Be.Mo)+this.Be.Mo)==this.Be.Mo&&(r=i),i=t.ne.Pe(r,0),s=e.ne.Pe(r,0)),i<s?-1:i>s?1:0},e}(),o=function(){function t(t,i){this.YI=new e.h,this.parent=t,this.dS=i}return t.prototype.nr=function(e,t,i){var r=this.parent,n=this.dS;i.Vd(e,t,(function(e,t){return r.Mh(e,t,n)}))},t.prototype.$p=function(e){return e=this.parent.gi.get(e),this.parent.lf.tc(2*(e>>1),this.YI),this.YI.y+(1&e?this.parent.Oj:-this.parent.Oj)},t}(),a=function(){function a(t,i,r,n,s){this.nH=t.description,this.X=t,this.Qg=i,this.Oj=e.ta.kj(this.Qg,t,!1),this.Bo=e.ta.kj(this.Qg,t,!0),this.xA=r,this.oT=this.nH.Aa,this.hb=[],this.po=[],this.mh=new e.jp,this.fb=new e.Yj,this.ke=new e.Md,this.ZG=this.ql=s}return a.prototype.eT=function(){return this.ZG=!0,(!e.aa.Hc(this.X.getType())||this.GE()&&this.DE(!1))&&this.mO()?e.aa.Hc(this.X.getType())?this.pO()?1607==this.X.getType()?this.rO()?2:0:this.sO()?this.tO():0:0:2:0},a.prototype.kC=function(t,i){var r=this.lf.read(2*t);t=this.lf.read(2*t+1);var n=this.lf.read(2*i);return i=this.lf.read(2*i+1),!e.Yt.Cv(r,t,n,i,this.Oj*this.Oj)||0!=this.X.Db()&&r==n&&t==i},a.prototype.GE=function(){for(var t=this.X,i=t.xf?3:2,r=0,n=t.da();r<n;r++)if(t.Ja(r)<i)return this.ke=new e.Md(1,r,0),!1;return!0},a.prototype.DE=function(t){var i=this.X,r=i.Ga(),n=i.hasAttribute(1);for(i=n?e.ta.wE(this.Qg,i,!1):0;r.$a();)for(;r.Ha();){var s=r.ha();if(!(s.Qb()>this.Oj)){if(t&&n){var o=s.wv(1,0);if(s=s.wv(1,0),Math.abs(s-o)>i)continue}return this.ke=new e.Md(2,r.wb(),-1),!1}}return!0},a.prototype.mO=function(){var t=this.X,i=null;e.aa.Hc(this.X.getType())&&(i=this.X);var r=(this.ZG||this.ql)&&null!=i,s=t.I();this.lf=t.ub(0),this.gi=new e.ia(0),this.gi.Jb(2*s),this.fi=new e.ia(0),this.fi.Jb(2*s),r&&(null==this.Fl&&(this.Fl=new e.ia(0)),this.Fl.Jb(s));for(var a=t=0;a<s;a++)if(this.gi.add(2*a),this.gi.add(2*a+1),this.fi.add(2*a),this.fi.add(2*a+1),r){for(;a>=i.Vc(t);)t++;this.Fl.add(t)}for((new e.Xt).sort(this.fi,0,2*s,new o(this,r)),this.fb.clear(),this.fb.Vo(new n(this)),this.fb.De(s),i=0,s*=2;i<s;i++)if(r=this.fi.get(i),r=(t=this.gi.get(r))>>1,1&t){if(t=this.fb.search(r,-1),a=this.fb.we(t),l=this.fb.lb(t),this.fb.vd(t,-1),-1!=a&&-1!=l&&!this.kC(this.fb.ja(a),this.fb.ja(l)))return this.ke=new e.Md(3,this.fb.ja(a),this.fb.ja(l)),!1}else{if(t=this.fb.addElement(r,-1),-1!=(a=this.fb.we(t))&&!this.kC(this.fb.ja(a),r))return this.ke=new e.Md(3,r,this.fb.ja(a)),!1;var l=this.fb.lb(t);if(-1!=l&&!this.kC(this.fb.ja(l),r))return this.ke=new e.Md(3,r,this.fb.ja(l)),!1}return!0},a.prototype.pO=function(){return 10>this.X.I()?this.nO():this.oO()},a.prototype.oO=function(){var t=new e.gd;t.Ib(this.X);var i=new e.Md;return!e.$t.kI(!1,t,this.Oj,i,this.nd)||(i.Jo=t.Ua(i.Jo),i.Ko=t.Ua(i.Ko),this.ke.Wt(i),!1)},a.prototype.nO=function(){var t=this.X,i=t.Ga();for(t=t.Ga();i.$a();)for(;i.Ha();){var r=i.ha();if(!i.Qn()||!i.$S()){t.BW(i);do{for(;t.Ha();){var n=t.ha();if(0!=(n=r.zr(n,this.Oj,!0)))return this.ke=new e.Md(2==n?5:4,i.wb(),t.wb()),!1}}while(t.$a())}}return!0},a.prototype.sO=function(){var t=this.X;this.hb.length=0,this.po.length=0,this.Zf=t.Ga(),this.Zf.JB();var i=new e.ia(0);i.Jb(10);var r=NaN,n=0,s=0;for(t=2*t.I();s<t;s++){var o=this.fi.get(s);if(!(1&(o=this.gi.get(o)))){o>>=1;var a=this.lf.read(2*o),l=this.lf.read(2*o+1);if(0!=i.size&&(a!=r||l!=n)){if(!this.RI(i))return!1;null!=i&&i.clear(!1)}i.add(o),r=a,n=l}}return!!this.RI(i)},a.prototype.rO=function(){for(var t=this.X,r=Array(t.da()),n=0,s=t.da();n<s;n++)r[n]=t.Nn(n);s=new i;var o=new e.h;n=this.fi.get(0);var a=(n=this.gi.get(n))>>1;this.lf.tc(2*a,o);var l=r[n=this.Fl.get(a)],c=t.Ba(n),h=t.Vc(n)-1;s.el=a==c||a==h,s.ny=this.ql?!l&&s.el:s.el,s.Ai=n,s.x=o.x,s.y=o.y,s.xm=a;for(var u=new i,p=1,d=this.fi.size;p<d;p++)if(n=this.fi.get(p),!(1&(n=this.gi.get(n)))){a=n>>1,this.lf.tc(2*a,o),(n=this.Fl.get(a))!=s.Ai&&(l=r[n],c=t.Ba(n),h=t.Vc(n)-1);var f=a==c||a==h,y=this.ql?!l&&s.el:s.el;if(u.x=o.x,u.y=o.y,u.Ai=n,u.xm=a,u.ny=y,u.el=f,u.x==s.x&&u.y==s.y)if(this.ql){if(!(u.ny&&s.ny||u.Ai==s.Ai&&(u.el||s.el)))return this.ke=new e.Md(8,u.xm,s.xm),!1}else if(!u.el||!s.el)return this.ke=new e.Md(5,u.xm,s.xm),!1;n=s,s=u,u=n}return!0},a.prototype.JE=function(){for(var t=this.X,i=[],n=-1,s=!1,o=0,a=t.da();o<a;o++)t.Ev(o)&&(s=!1,n++,o<a-1&&(t.Ev(o+1)||(s=!0))),i[o]=s?n:-1;s=new e.h,o=this.fi.get(0);var l=(o=this.gi.get(o))>>1;this.lf.tc(2*l,s),o=this.Fl.get(l),n=new r(s.x,s.y,o,l,i[o]),t=[];var c=1;for(a=this.fi.size;c<a;c++)if(o=this.fi.get(c),!(1&(o=this.gi.get(o)))){if(l=o>>1,this.lf.tc(2*l,s),o=this.Fl.get(l),(o=new r(s.x,s.y,o,l,i[o])).x==n.x&&o.y==n.y){if(o.Ai==n.Ai)return this.ke=new e.Md(9,o.xm,n.xm),!1;0<=i[o.Ai]&&i[o.Ai]==i[n.Ai]&&(0!=t.length&&t[t.length-1]==n||t.push(n),t.push(o))}n=o}if(0==t.length)return!0;for(o=new e.jp(!0),e.O.$u(i,-1),s=-1,(c=new e.h).Rc(),n=0,a=t.length;n<a;n++){(l=t[n]).x==c.x&&l.y==c.y||(s=o.Ph(0),c.x=l.x,c.y=l.y);var h=i[l.Ai];-1==h&&(h=o.Ph(2),i[l.Ai]=h),o.addElement(h,s),o.addElement(s,h)}for((a=new e.ia(0)).Jb(10),n=o.je;-1!=n;n=o.qz(n))if(!(1&(t=o.PF(n)))&&2&t){for(t=-1,a.add(n),a.add(-1);0<a.size;){if(s=a.Fc(),a.If(),c=a.Fc(),a.If(),1&(l=o.PF(c))){t=2&l?c:s;break}for(o.fX(c,1|l),l=o.rc(c);-1!=l;l=o.lb(l))(h=o.getData(l))!=s&&(a.add(h),a.add(c))}if(-1!=t){for(o=-1,n=0,a=i.length;n<a;n++)if(i[n]==t){o=n;break}return this.ke=new e.Md(10,o,-1),!1}}return!0},a.prototype.tO=function(){var t=this.X;if(0>=t.Ke())return this.ke=new e.Md(6,1==t.da()?1:-1,-1),0;if(1==t.da())return this.ql&&!this.JE()?0:2;this.to=e.ia.qf(t.da(),0),this.JA=e.ia.qf(t.da(),-1);for(var i=-1,r=0,n=0,o=t.da();n<o;n++){var a=t.Ir(n);if(this.to.write(n,0>a?0:256),0<a)i=n,r=a;else{if(0==a)return this.ke=new e.Md(6,n,-1),0;if((0>i||r<Math.abs(a))&&(this.ke=new e.Md(7,n,-1),this.ql))return 0;this.JA.write(n,i)}}for(this.dt=t.da(),this.Om=new e.ia(0),this.Om.Jb(10),o=t.I(),this.Mo=NaN,(t=new e.ia(0)).Jb(10),this.Qq=e.ia.qf(o,-1),this.Hw=e.ia.qf(o,-1),null!=this.zj?this.zj.clear(!1):this.zj=new e.ia(0),this.zj.Jb(10),this.fb.clear(),this.fb.Vo(new s(this)),i=0,o*=2;0<this.dt&&i<o;i++)if(r=this.fi.get(i),!(1&(r=this.gi.get(r)))){if(r>>=1,(n=this.lf.read(2*r+1))!=this.Mo&&0!=t.size){if(!this.ut(t))return 0;null!=t&&t.clear(!1)}t.add(r),this.Mo=n}return 0<this.dt&&!this.ut(t)?0:this.ql?0==this.ke.Jj&&this.JE()?2:0:0==this.ke.Jj?2:1},a.prototype.RI=function(t){if(1==t.size)return!0;for(var i=0,r=t.size;i<r;i++){var n=t.get(i);this.Zf.Vb(n);var s=this.Zf.li();this.hb.push(this.Su(s,n,this.Zf.gb,!0)),this.Zf.ha(),s=this.Zf.ha(),this.hb.push(this.Su(s,n,this.Zf.gb,!1))}var o=this;for(this.hb.sort((function(e,t){return o.XP(e,t)})),-1==(n=this.mh.je)&&(n=this.mh.Ph(0)),this.mh.fn(this.hb.length),i=0,r=this.hb.length;i<r;i++)this.mh.addElement(n,i);i=!0;for(var a=r=-1;i&&(i=!1,-1!=(s=this.mh.rc(n)));)for(var l=this.mh.lb(s);-1!=l;)if(r=this.mh.getData(s),a=this.mh.getData(l),(r=this.hb[r].Io)!=(a=this.hb[a].Io))s=l,l=this.mh.lb(s);else if(i=!0,this.mh.jd(n,s),s=this.mh.we(l),-1==(l=this.mh.jd(n,l))||-1==s)break;if(i=this.mh.bs(n),this.mh.LE(n),0<i)return this.ke=new e.Md(5,r,a),!1;for(i=0,r=t.size;i<r;i++)this.vB(this.hb[i]);return this.hb.length=0,!0},a.prototype.ut=function(t){for(var i=0,r=t.size;i<r;i++){var n=t.get(i),s=this.Qq.read(n);if(-1!=s){var o=this.fb.ja(s);this.zj.add(o),this.fb.vd(s,-1),this.vB(this.hb[o]),this.hb[o]=null,this.Qq.write(n,-1)}-1!=(s=this.Hw.read(n))&&(o=this.fb.ja(s),this.zj.add(o),this.fb.vd(s,-1),this.vB(this.hb[o]),this.hb[o]=null,this.Hw.write(n,-1))}for(i=0,r=t.size;i<r;i++){if(n=t.get(i),this.Zf.Vb(n),(s=this.Zf.li()).na>s.la){var a=this.Zf.wb(),l=this.Su(s,n,this.Zf.gb,!0);0<this.zj.size?(o=this.zj.Fc(),this.zj.If(),this.hb[o]=l):(o=this.hb.length,this.hb.push(l)),s=this.fb.addElement(o,-1),-1==this.Qq.read(a)?this.Qq.write(a,s):this.Hw.write(a,s),!(3&this.to.read(this.Zf.gb))&&this.Om.add(s)}this.Zf.ha(),(s=this.Zf.ha()).na<s.la&&(a=this.Zf.ik(),l=this.Su(s,n,this.Zf.gb,!1),0<this.zj.size?(o=this.zj.Fc(),this.zj.If(),this.hb[o]=l):(o=this.hb.length,this.hb.push(l)),s=this.fb.addElement(o,-1),-1==this.Qq.read(a)?this.Qq.write(a,s):this.Hw.write(a,s),!(3&this.to.read(this.Zf.gb))&&this.Om.add(s))}for(i=0,r=this.Om.size;i<r&&0<this.dt;i++)if(s=this.Om.get(i),!(3&this.to.read(this.hb[this.fb.ja(s)].IA))){t=-1,n=this.fb.we(s);var c=s;l=null,o=-1;for(var h=0;-1!=n&&(o=this.fb.ja(n),o=(l=this.hb[o]).IA,!(3&(h=this.to.read(o))));)c=n,n=this.fb.we(n);-1==n?(a=1,n=c):(t=1==(3&h)?o:this.JA.read(o),a=0!=l.XF()?0:1,n=this.fb.lb(n));do{if(o=this.fb.ja(n),o=(l=this.hb[o]).IA,!(3&(c=this.to.read(o)))){if(a!=l.XF())return this.ke=new e.Md(6,o,-1),!1;if(c=252&c|(h=0==a||l.Wp()?2:1),this.to.write(o,h),2==h&&0==this.ke.Jj&&this.JA.read(o)!=t&&(this.ke=new e.Md(7,o,-1),this.ql))return!1;if(this.dt--,0==this.dt)return!0}1==(3&c)&&(t=o),c=n,n=this.fb.lb(n),a=0!=a?0:1}while(c!=s)}return null!=this.Om?this.Om.clear(!1):this.Om=new e.ia(0),!0},a.prototype.Su=function(t,i,r,n){if(322!=t.getType())throw e.i.Qa();return(t=this.sP(t)).Io=i,t.IA=r,t.yq=0,t.nX(n),t},a.prototype.sP=function(i){if(0<this.po.length){var r=this.po[this.po.length-1];--this.po.length,i.copyTo(r.ne)}else(r=new t).ne=e.SC.jg(i);return r},a.prototype.vB=function(e){322==e.ne.getType()&&this.po.push(e)},a.prototype.kU=function(){for(var t=this.X.I(),i=new e.ia(0),r=0;r<t;r++)i.add(r);var n=this;for(i.Vd(0,t,(function(e,t){return n.Ou(e,t)})),r=1;r<t;r++)if(0==this.Ou(i.get(r-1),i.get(r)))return this.ke=new e.Md(3,i.get(r-1),i.get(r)),0;return 2},a.prototype.JV=function(){return this.GE()&&this.DE(!0)?2:0},a.prototype.oV=function(){return this.eT()},a.prototype.pU=function(){for(var t=this.X.I(),i=new e.ia(0),r=0;r<t;r++)i.add(r);var n=this;i.Vd(0,t,(function(e,t){return n.PO(e,t)}));var s=Array(t);for(e.O.$u(s,!1),s[i.get(0)]=!0,r=1;r<t;r++){var o=i.get(r-1),a=i.get(r);0==this.Ou(o,a)?s[a]=!1:s[a]=!0}i=this.X.Ia(),o=this.X,a=0;var l=1;for(r=0;r<t;r++)s[r]?l=r+1:(a<l&&i.Fd(o,a,l),a=r+1);return a<l&&i.Fd(o,a,l),i.Ch(2,this.Bo),i},a.prototype.NV=function(){var t=this.X,i=t.Ga(),r=t.Ga(),n=this.X.Ia(),s=this.X,o=t.hasAttribute(1),a=o?e.ta.wE(this.Qg,t,!0):0,l=new e.ia(0),c=new e.ia(0);for(l.Jb(e.O.truncate(t.I()/2+1)),c.Jb(e.O.truncate(t.I()/2+1));i.$a();)if(r.$a(),!(2>t.Ja(i.gb))){r.EW();for(var h,u,p=!0;i.Ha();){var d=i.ha(),f=r.li();if(i.wb()>r.wb())break;p&&(l.add(i.wb()),c.add(r.ik()),p=!1),u=l.Fc();var y=i.ik();if(1<y-u){var m=new e.h;m.uc(t.Na(u),t.Na(y)),h=m.length()}else h=d.Qb();u=c.Fc(),1<(y=r.wb())-u?((m=new e.h).uc(t.Na(u),t.Na(y)),u=m.length()):u=f.Qb(),h>this.Bo?l.add(i.ik()):o&&(h=t.Uc(1,l.Fc(),0),d=d.gv(1,0),Math.abs(d-h)>a&&l.add(i.ik())),u>this.Bo?c.add(r.wb()):o&&(h=t.Uc(1,c.Fc(),0),d=f.gv(1,0),Math.abs(d-h)>a&&c.add(r.wb()))}if(l.Fc()<c.Fc()?l.size>c.size?l.If():c.If():(l.Fc()!=c.Fc()&&c.If(),c.If()),2<=c.size+l.size){for(p=new e.Sa,f=0,d=l.size;f<d;f++)s.ve(l.get(f),p),0==f?n.nf(p):n.lineTo(p);for(f=c.size-1;0<f;f--)s.ve(c.get(f),p),n.lineTo(p);s.dc(i.gb)?n.Ap():0<c.size&&(s.ve(c.get(0),p),n.lineTo(p))}null!=l&&l.clear(!1),null!=c&&c.clear(!1)}return n.Ch(2,this.Bo),n},a.prototype.rV=function(){return this.DX()},a.prototype.DX=function(){return 1736==this.X.getType()&&1==this.X.In()?e.Fg.Mk(this.X,this.Bo,!0,!1,this.nd):(this.Hi=new e.gd,this.Hi.Ib(this.X),0!=this.Hi.fd&&(1!=this.xA&&e.Tk.V(this.Hi,this.Bo,this.nd,!0),1736==this.X.getType()&&e.rn.V(this.Hi,this.Hi.ld,this.xA,!1,this.nd)),this.X=this.Hi.Ne(this.Hi.ld),1736==this.X.getType()&&(this.X.fm(),this.X.Yo(0)),this.X.Ch(2,this.Bo),this.X)},a.rs=function(t,i,r,n,s){if(null!=n&&(n.Jj=0,n.Jo=-1,n.Ko=-1),t.B())return 1;var o=t.getType();if(33==o)return 1;var l=e.ta.kj(i,t,!1);if(197==o)return i=new e.l,t.A(i),i.Bi(l)?(null!=n&&(n.Jj=2,n.Jo=-1,n.Ko=-1),0):1;if(e.aa.yd(o))return(l=new e.Ta(t.description)).oc(t,!0),a.rs(l,i,r,n,s);var c=t.om(l);if(-1!=(r=r?-1:c))return r;if(i=new a(t,i,r,s,!1),550==o)r=i.kU();else if(1607==o)r=i.JV();else{if(1736!=o)throw e.i.Qa();r=i.oV()}return t.Ch(r,l),null!=n&&0==r&&n.Wt(i.ke),r},a.cK=function(t,i,r,n){if(t.B())return t;var s=t.getType();if(33==s)return t;var o=e.ta.kj(i,t,!1);if(197==s)return i=new e.l,t.A(i),i.Bi(o)?t.Ia():t;if(e.aa.yd(s))return(s=new e.Ta(t.description)).oc(t,!0),a.cK(s,i,r,n);if(o=t.om(o),2==(r=r?-1:o))return t;if(t=new a(t,i,r,n,!1),550==s)t=t.pU();else if(1607==s)t=t.NV();else{if(1736!=s)throw e.i.Qa();t=t.rV()}return t},a.prototype.Mh=function(t,i,r){if(t==i)return 0;t=this.gi.get(t);var n=this.gi.get(i);i=t>>1;var s=n>>1,o=new e.h,a=new e.h;return this.lf.tc(2*i,o),o.y+=1&t?this.Oj:-this.Oj,this.lf.tc(2*s,a),a.y+=1&n?this.Oj:-this.Oj,0==(t=o.compare(a))&&r?0>(r=this.Fl.get(i)-this.Fl.get(s))?-1:0<r?1:0:t},a.prototype.Ou=function(t,i){if(t==i)return 0;var r=this.X,n=r.Na(t),s=r.Na(i);if(n.x<s.x)return-1;if(n.x>s.x)return 1;if(n.y<s.y)return-1;if(n.y>s.y)return 1;for(n=1;n<this.oT;n++){s=this.nH.kd(n);for(var o=e.ra.Va(s),a=0;a<o;a++){var l=r.Uc(s,t,a),c=r.Uc(s,i,a);if(l<c)return-1;if(l>c)return 1}}return 0},a.prototype.PO=function(e,t){var i=this.Ou(e,t);return 0==i?e<t?-1:1:i},a.prototype.XP=function(e,t){if(e===t)return 0;var i=e.ne.kg();e.Wp()&&i.Sq(),e=t.ne.kg(),t.Wp()&&e.Sq(),t=i.qu();var r=e.qu();return r==t?(t=i.wi(e),Math.abs(t)<=8881784197001252e-31*(Math.abs(e.x*i.y)+Math.abs(e.y*i.x))&&(t--,t++),0>t?1:0<t?-1:0):t<r?-1:1},a}();e.Jx=a}(Y||(Y={})),function(e){var t=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Q(i,t),i.prototype.getType=function(){return 30},i.local=function(){return null===i.instance&&(i.instance=new i),i.instance},i.prototype.V=function(t,i,r,n){return t instanceof e.aa?(t=new e.Zc(t),i=new e.Zc(i),this.V(t,i,r,n).next()):new e.BL(t,i,r,n)},i.ep=function(t,r,n,s){var o=t.Db(),a=r.Db();if(t.B()&&r.B())return o>a?t:r;if(t.B())return r;if(r.B())return t;var l=new e.l,c=new e.l,h=new e.l;return t.A(l),r.A(c),h.K(l),h.Zb(c),l=e.ta.Wd(n,h,!0),c=t.getType(),h=r.getType(),33==c&&33==h?i.aV(t,r,l):c!=h?0<o||0<a?o>a?t:r:550==c?i.iI(t,r,l):i.iI(r,t,l):e.Fg.ep(t,r,n,s)},i.aV=function(t,i,r){r=r*Math.sqrt(2)*1.00001,r*=r;var n=t.D(),s=i.D(),o=new e.de(t.description);return e.h.yc(n,s)>r&&(o.add(t),o.add(i)),o},i.iI=function(t,i,r){var n=t.ub(0),s=t.I(),o=i.D(),a=t.Ia();r=r*Math.sqrt(2)*1.00001;var l=new e.l;if(t.A(l),l.W(r,r),l.contains(o)){r*=r,l=!1;for(var c=[],h=0;h<s;h++)c[h]=!1;for(h=0;h<s;h++){var u=n.read(2*h),p=n.read(2*h+1);(u-=o.x)*u+(p-=o.y)*p<=r&&(l=!0,c[h]=!0)}if(l)for(h=0;h<s;h++)c[h]||a.Fd(t,h,h+1);else a.Fd(t,0,s),a.add(i)}else a.Fd(t,0,s),a.add(i);return a},i.instance=null,i}(e.Je);e.Kx=t}(Y||(Y={})),function(e){var t=function(){function t(e,t,i,r){this.ts=null==t,this.ya=-1,this.Rd=e,this.vg=i,this.NT=t.next(),this.Ub=r}return t.prototype.next=function(){return this.ts?null:null!=(t=this.Rd.next())?(this.ya=this.Rd.La(),e.Kx.ep(t,this.NT,this.vg,this.Ub)):null;var t},t.prototype.La=function(){return this.ya},t.prototype.qe=function(){},t}();e.BL=t}(Y||(Y={})),function(e){var t=function(){function e(){}return e.prototype.Fz=function(){this.$y=null,this.Ax=-1,this.AK=!1},e}(),i=function(){function e(){this.Gr=0,this.pj=[]}return e.prototype.pN=function(e){this.Gr+=e.Ax,this.pj.push(e)},e.prototype.TV=function(){this.Gr-=this.pj[this.pj.length-1].Ax,--this.pj.length},e.prototype.my=function(){return this.pj[this.pj.length-1]},e.prototype.Nb=function(e){return e===this},e}(),r=function(){function r(e,t,i){this.ya=-1,this.Ic=!1,this.AH=[!1,!1,!1,!1],this.uq=[0,0,0,0],this.jA=!1,this.zk=-1,this.iq=0,this.bo=-1,this.Do=[],this.Rd=e,this.vg=t,this.Ub=i}return r.dE=function(e){var t=[],i=0;for(e=Object.keys(e);i<e.length;i++)t.push(Number(e[i]));return t.sort((function(e,t){return e-t})),t},r.prototype.fG=function(t){var i=this.Do[t],n=r.dE(i)[0],s=i[n],o=s.my().$y;return s=s.my().AK,delete i[n],s&&(o=e.Yl.local().V(o,this.vg,!1,this.Ub),0==t&&33==o.getType()&&(t=new e.de(o.description),o.B()||t.add(o),o=t)),o},r.prototype.next=function(){if(this.Ic&&this.bo==this.zk)return null;for(;!this.qK(););if(-1==this.zk)return null;if(this.jA){for(this.bo++;;){if(this.bo>this.zk||0>this.bo)throw e.i.Qa();if(this.AH[this.bo])break}return this.ya++,this.fG(this.bo)}return this.ya=0,this.bo=this.zk,this.fG(this.zk)},r.prototype.La=function(){return this.ya},r.prototype.qK=function(){if(this.Ic)return!0;var t=null;if(null!=this.Rd&&null==(t=this.Rd.next())&&(this.Ic=!0,this.Rd=null),e.mp.zp(this.Ub),null!=t){var i=t.Db();this.AH[i]=!0,i>=this.zk&&!this.jA&&(this.ND(i,!1,t),i>this.zk&&!this.jA&&this.zW(i))}if(0<this.iq)for(i=0;i<=this.zk;i++)for(;1<this.uq[i]&&0!=(t=this.FO(i)).length;)t=e.Fg.VP(t,this.vg,this.Ub),this.ND(i,!0,t);return this.Ic},r.prototype.FO=function(e){for(var t=[],i=[],n=this.Do[e],s=r.dE(n),o=0;o<s.length;o++){var a=s[o],l=n[a];if(this.Ic||1e4<l.Gr&&1<l.pj.length){for(this.uq[e]-=l.pj.length,this.iq-=l.pj.length;0<l.pj.length;)t.push(l.my().$y),l.TV();i.push(a)}}for(o=0;o<i.length;o++)delete n[i[o]];return t},r.prototype.zW=function(e){for(var t=0;t<e;t++)this.Do[t]=[],this.iq-=this.uq[t],this.uq[t]=0},r.prototype.ND=function(e,n,s){var o=new t;if(o.Fz(),o.$y=s,s=r.eS(s),o.Ax=s,s=r.cS(s),e+1>this.Do.length)for(var a=0,l=Math.max(2,e+1);a<l;a++)this.Do.push([]);void 0===(a=this.Do[e][s])&&(a=new i,this.Do[e][s]=a),o.AK=n,a.pN(o),this.uq[e]++,this.iq++,this.zk=Math.max(this.zk,e)},r.cS=function(t){return 0<t?e.O.truncate(Math.log(t)/Math.log(4)+.5):0},r.eS=function(t){var i=t.getType();if(e.aa.xj(i))return t.I();if(33==i)return 1;if(197==i)return 4;if(e.aa.yd(i))return 2;throw e.i.Qa()},r.prototype.qe=function(){this.qK()},r}();e.DL=r}(Y||(Y={})),function(e){var t=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Q(i,t),i.prototype.getType=function(){return 1},i.prototype.V=function(t,i,r,n){return void 0===n?new e.DL(t,i,r):this.gQ(t,i,r,n)},i.prototype.gQ=function(t,i,r,n){return t=new e.Zc([t,i]),this.V(t,r,n).next()},i.local=function(){return null===i.instance&&(i.instance=new i),i.instance},i.instance=null,i}(e.Je);e.Gh=t}(Y||(Y={})),function(e){var t,i;(i=t||(t={}))[i.nextPath=0]="nextPath",i[i.nextSegment=1]="nextSegment",i[i.iterate=2]="iterate",t=function(){function t(t,i,r,n){this.Ts=new e.l,this.GT=t,this.HT=i,this.mq=n,this.uo=-1,this.rl=!1;var s=t.Bb;null!=s&&null!=(s=n?s.zo:s.Fb)&&(this.Ic=!1,this.qa=r,this.Fb=s,this.xw=this.Fb.getIterator(),this.nq=this.rl=!0,this.Xb=0,n?this.uo=i.da():this.sd=i.Ga()),this.rl||null!=(s=i.Bb)&&null!=(s=n?s.zo:s.Fb)&&(this.Ic=!1,this.qa=r,this.Fb=s,this.xw=this.Fb.getIterator(),this.rl=!0,this.nq=!1,this.Xb=0,n?this.uo=t.da():this.sd=t.Ga()),this.rl||(this.ci=n?e.ta.mR(t,i,r,1<=t.om(0),1<=i.om(0)):e.ta.lR(t,i,r))}return t.prototype.next=function(){if(this.rl){if(this.Ic)return!1;for(var t=!0;t;)switch(this.Xb){case 0:t=this.xU();break;case 1:t=this.yU();break;case 2:t=this.Uz();break;default:throw e.i.fa("internal error")}return!this.Ic}return null!=this.ci&&this.ci.next()},t.prototype.nl=function(){return this.rl?this.nq?this.Fb.ja(this.Fs):this.mq?this.uo:this.sd.wb():this.ci.nl(this.ci.Vf)},t.prototype.hl=function(){return this.rl?this.nq?this.mq?this.uo:this.sd.wb():this.Fb.ja(this.Fs):this.ci.hl(this.ci.Af)},t.prototype.uz=function(){if(!this.mq)throw e.i.fa("internal error");return this.rl?this.nq?this.Fb.GF(this.Fs):this.Ts:this.ci.uz(this.ci.Vf)},t.prototype.az=function(){if(!this.mq)throw e.i.fa("internal error");return this.rl?this.nq?this.Ts:this.Fb.GF(this.Fs):this.ci.az(this.ci.Af)},t.prototype.xU=function(){return this.mq?-1==--this.uo?(this.Ic=!0,!1):(this.nq?this.HT.Rj(this.uo,this.Ts):this.GT.Rj(this.uo,this.Ts),this.xw.Xi(this.Ts,this.qa),this.Xb=2,!0):this.sd.$a()?(this.Xb=1,!0):(this.Ic=!0,!1)},t.prototype.yU=function(){if(!this.sd.Ha())return this.Xb=0,!0;var e=this.sd.ha();return this.xw.Uo(e,this.qa),this.Xb=2,!0},t.prototype.Uz=function(){return this.Fs=this.xw.next(),-1==this.Fs&&(this.Xb=this.mq?0:1,!0)},t}(),e.Zl=t}(Y||(Y={})),function(e){(e=e.OL||(e.OL={}))[e.enumClosed=1]="enumClosed",e[e.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",e[e.enumOGCStartPolygon=4]="enumOGCStartPolygon",e[e.enumCalcMask=4]="enumCalcMask"}(Y||(Y={})),function(e){e.QC=function(){function t(){}return t.tb=function(i,r,n,s,o,a,l,c,h){var u=[0,0,0],p=[0,0,0],d=[0,0,0],f=[0,0,0,0],y=new e.ga(0),m=new e.ga(0),g=new e.ga(0);if(null!=l||null!=c||null!=h)if(e.s.ti(r))e.Yg.tb(i,n,s,o,a,l,c,h);else{o=e.F.ba(o),n=e.F.ba(n);var v=e.F.ba(o-n);if(e.s.Y(s,a)&&(e.s.Y(n,o)||e.s.Y(e.s.P(s),1.570796326794897)))null!=l&&(l.u=0),null!=c&&(c.u=0),null!=h&&(h.u=0);else{if(e.s.Y(s,-a)){if(e.s.Y(e.s.P(s),1.570796326794897))return null!=l&&(l.u=2*e.F.Ah(i,r)),null!=c&&(c.u=0<s?e.F.ba(3.141592653589793-e.F.ba(o)):e.F.ba(o)),void(null!=h&&(h.u=0<s?e.F.ba(o):e.F.ba(3.141592653589793-e.F.ba(o))));e.s.Y(e.s.P(v),3.141592653589793)&&(null!=l&&(l.u=2*e.F.Ah(i,r)),null!=c&&(c.u=0),null!=h&&(h.u=0))}else{if(e.s.Y(e.s.P(s),1.570796326794897)||e.s.Y(e.s.P(a),1.570796326794897))return void e.Wk.tb(i,r,n,s,o,a,l,c,h);if(e.s.Y(n,o)||e.s.Y(e.s.P(v),3.141592653589793))return void e.Wk.tb(i,r,n,s,o,a,l,c,h);if(e.s.Cd(s))return void e.Wk.tb(i,r,n,s,o,a,l,c,h)}var _=Math.sqrt(1-r);o=e.F.ba(o-n),n=0,e.F.cl(1,r,s,n,0,y,m,g),u[0]=y.u,u[1]=m.u,u[2]=g.u,e.F.cl(1,r,a,o,0,y,m,g),p[0]=y.u,p[1]=m.u,p[2]=g.u,d[0]=0,d[1]=0,d[2]=-1*r*e.F.n(1,r,s)*Math.sin(s),0>o?e.F.Wq(d,p,u,f,0):e.F.Wq(d,u,p,f,0),m=[0,0,0],g=[0,0,0];var b=[0,0,0];u=[0,0,0],y=[0,0,0];var w=Math.acos(f[2]/1),M=1-r,T=Math.tan(w),S=1+T*T/M,A=2*d[2]*T/M;for(M=(-A+(T=Math.sqrt(A*A-4*S*(d[2]*d[2]/M-1))))/(S*=2),A=(-A-T)/S,T=Math.tan(w),w=(M+A)/2,d=((S=T*M+d[2])+(T*A+d[2]))/2,T=e.F.gp(M-w,S-d),M=d/_*1.570796326794897,A=0;100>A&&(S=(S=e.F.w(r,M))*S/Math.cos(M)*(Math.sin(M)-d*S/(1-r)),!e.s.Cd(S));A++)M-=S;d=e.F.n(1,r,M)*Math.cos(M),T=1-T/(d=Math.sqrt((d-w)*(d+w))),T*=2-T,S=e.F.on(m),w=e.F.on(g),M=e.F.on(b);var E=e.F.St(b,m);A=e.F.St(b,g),e.F.zx(b,m,u),e.F.zx(b,g,y),m=Math.acos(E/(M*S)),g=Math.acos(A/(M*w)),g*=e.s.Mb(1,e.F.St(u,y)),(1.570796326794897<=e.s.P(m)&&1.570796326794897<=e.s.P(g)||3.141592653589793<e.s.P(m-g))&&(m=(3.141592653589793-e.s.P(m))*e.s.Mb(1,m),g=(3.141592653589793-e.s.P(g))*e.s.Mb(1,g)),u=e.F.Qj(T,g),y=e.F.q(d,T,e.F.Qj(T,m)),u=e.F.q(d,T,u),u=e.s.P(u-y)*i,m=new e.ga(0),g=new e.ga(0),b=f[1]/1,b*=-e.s.Mb(1,v),y=Math.acos(b)*e.s.Mb(1,v),t.rf(i,r,n,s,u,y,m,g),e.s.Y(o,m.u)&&e.s.Y(a,g.u)||(T=e.F.gp(e.F.ba(o-m.u),a-g.u),t.rf(i,r,n,s,u,e.F.ba(y+3.141592653589793),m,g),(S=e.F.gp(e.F.ba(o-m.u),a-g.u))<T&&(y=e.F.ba(y+3.141592653589793))),m=[0,0,0,0],g=[0,0,0,0],T=[0,0,0],i=[0,0,0],n=[0,0,0],s=[0,0,0],b=[0,0,0],(d=[0,0,0])[0]=0,d[1]=0,d[2]=_,T[0]=0,T[1]=0,T[2]=0,e.F.Wq(T,d,p,m,0),e.s.Cd(a)?(i[0]=p[0],i[1]=p[1],i[2]=1,n[0]=1*Math.cos(o)-1*Math.sin(o),n[1]=1*Math.sin(o)+1*Math.cos(o)):(r=e.F.n(1,r,a)*Math.cos(a),i[0]=0,i[1]=0,p[2]+=Math.tan(1.570796326794897-e.s.P(a))*r*e.s.Mb(1,a),n[0]=r*Math.cos(o)-r*Math.sin(o),n[1]=r*Math.sin(o)+r*Math.cos(o)),n[2]=p[2],e.F.Wq(p,n,i,g,1),e.F.zx(g,m,s),e.F.zx(g,f,b),b=e.F.St(s,b)/(e.F.on(s)*e.F.on(b)),b*=e.s.Mb(1,v),o=Math.acos(b)*-e.s.Mb(1,v),(0<y&&0<o||0>y&&0>o)&&(o=e.F.ba(o+3.141592653589793)),null!=l&&(l.u=u),null!=c&&(c.u=y),null!=h&&(h.u=o)}}},t.rf=function(t,i,r,n,s,o,a,l){var c=[0,0,0],h=[0,0,0],u=[0,0,0],p=[0,0,0],d=[0,0,0],f=[0,0,0],y=[0,0,0],m=[0,0,0,0],g=new e.ga(0),v=new e.ga(0),_=new e.ga(0),b=new e.ga(0),w=new e.ga(0),M=new e.ga(0);if(null!=a&&null!=l)if(e.s.ti(i))e.Yg.rf(t,r,n,s,o,a,l);else if(e.s.Cd(s))null!=a&&(a.u=r),null!=l&&(l.u=n);else if(o=e.F.ba(o),0>s&&(s=e.s.P(s),o=e.F.ba(o+3.141592653589793)),r=e.F.ba(r),n=e.F.ba(n),1.570796326794897<e.s.P(n)&&(r=e.F.ba(r+3.141592653589793),n=e.s.Mb(3.141592653589793,n)-n),e.s.Y(e.s.P(n),1.570796326794897)||e.s.Cd(n)||e.s.Cd(o)||e.s.Y(e.s.P(o),3.141592653589793))e.Wk.rf(t,i,r,n,s,o,a,l);else{var T=Math.sqrt(1-i);for(t=s/t,e.F.cl(1,i,n,0,0,b,w,M),c[0]=b.u,c[1]=w.u,c[2]=w.u,y[0]=0,y[1]=0,y[2]=-1*i*e.F.n(1,i,n)*Math.sin(n),b=e.F.n(1,i,n),w=e.F.ba(1.570796326794897-o),M=Math.sin(w),s=Math.cos(n),n=Math.sin(n),d[0]=b*s-n*M,d[1]=Math.cos(w),d[2]=(1-i)*b*n+s*M,0>o?e.F.Wq(y,d,c,m,0):e.F.Wq(y,c,d,m,0),c=Math.acos(m[2]/1),m=Math.atan2(-m[1],-m[0]),n=1-i,w=1+(d=Math.tan(c))*d/n,n=(-(b=2*y[2]*d/n)+(d=Math.sqrt(b*b-4*w*(y[2]*y[2]/n-1))))/(w*=2),b=(-b-d)/w,d=Math.tan(c),c=(n+b)/2,y=((w=d*n+y[2])+(d*b+y[2]))/2,d=e.F.gp(n-c,w-y),T=y/T*1.570796326794897,n=0;100>n&&(b=(b=e.F.w(i,T))*b/Math.cos(T)*(Math.sin(T)-y*b/(1-i)),!e.s.Cd(b));n++)T-=b;T=e.F.n(1,i,T)*Math.cos(T),y=1-d/(T=Math.sqrt((T-c)*(T+c))),y*=2-y,f=Math.acos(e.F.St(f,h)/(e.F.on(f)*e.F.on(h))),f*=e.s.Mb(1,h[0]),o=(e.F.q(T,y,e.F.Qj(y,f))+t*e.s.Mb(1,o))/e.F.Ah(T,y),o=e.F.ba(1.570796326794897*o),o=e.F.Rq(y,o),e.F.n(T,y,o),d=e.F.ba(m+r),r=Math.cos(d),o=Math.sin(d),u[0]=p[0]*r+p[1]*-o,u[1]=p[0]*o+p[1]*r,u[2]=p[2],e.F.jO(i,u[0],u[1],u[2],_,v,g),null!=a&&(a.u=v.u),null!=l&&(l.u=_.u)}},t}()}(Y||(Y={})),function(e){var t=function(){function t(t){this.Ya=null,this.wt=new e.h,this.xt=new e.h,this.g=t}return t.prototype.compare=function(e,t,i){return this.g.Gc(t,this.wt),this.g.Gc(e.ja(i),this.xt),this.wt.compare(this.xt)},t}(),i=function(){function t(t){this.Bf=new e.h,this.Dk=new e.h,this.g=t}return t.prototype.Dh=function(e){this.Bf.L(e)},t.prototype.compare=function(e,t){return this.g.Gc(e.ja(t),this.Dk),this.Bf.compare(this.Dk)},t}(),r=function(e){function t(t){var i=e.call(this,t.g,t.qa,!1)||this;return i.ib=t,i}return Q(t,e),t.prototype.compare=function(e,t,i){if(this.rg)return-1;var r=this.ib.Qd.Jn(this.ib.Rh(t));e=e.ja(i);var n=this.ib.Qd.Jn(this.ib.Rh(e));return this.Dm=i,this.RE(t,r,e,n)},t}(e.UC),n=function(e){function t(t){var i=e.call(this,t.g,t.qa)||this;return i.ib=t,i}return Q(t,e),t.prototype.compare=function(e,t){return this.rg?-1:(e=this.ib.Qd.Jn(this.ib.Rh(e.ja(t))),this.Dm=t,this.SE(t,e))},t}(e.aM),s=function(){function s(){this.Mc=this.df=this.jo=this.Qd=this.lh=this.zd=this.hb=this.g=null,this.Ng=!1,this.vh=this.Nm=this.ie=this.Gk=this.nh=this.Ak=this.Ff=this.$d=null,this.xh=this.Jq=this.UA=this.qa=0,this.Xv=this.Wn=!1,this.yo=new e.h,this.Pi=new e.h,this.hb=new e.$c(8),this.zd=new e.$c(5),this.lh=new e.au,this.Qd=new e.au,this.Ng=!1,this.vh=new e.h,this.vh.ma(0,0),this.qa=0,this.xh=-1,this.Wn=!1,this.g=null,this.df=new e.Yj,this.Mc=new e.Yj,this.nh=new e.ia(0),this.Gk=new e.TC,this.Ff=new e.ia(0),this.Ak=new e.ia(0),this.jo=new e.Sa}return s.prototype.PX=function(t,i){var r=new e.Dd;return r.$B(),t.Oc(r),this.er(t),this.Wn=!1,this.qa=i,this.UA=i*i,i=this.jC(),t.Oc(r),i||(this.qQ(),i||this.jC()),-1!=this.xh&&(this.g.Td(this.xh),this.xh=-1),this.g=null,this.Wn},s.prototype.TX=function(e,t){this.er(e),this.Wn=!1,this.qa=t,this.UA=t*t,this.Ng=!1,this.jC(),this.Ng||(this.Ng=1==e.Gp(t,!0,!1)),-1!=this.xh&&(this.g.Td(this.xh),this.xh=-1),this.g=null},s.prototype.pg=function(e,t){return this.hb.T(e,0+t)},s.prototype.LB=function(e,t,i){this.hb.S(e,0+t,i)},s.prototype.Rh=function(e){return this.hb.T(e,2)},s.prototype.ZW=function(e,t){this.hb.S(e,2,t)},s.prototype.RF=function(e,t){return this.hb.T(e,3+t)},s.prototype.Pp=function(e){return this.hb.T(e,7)},s.prototype.Pl=function(e,t){this.hb.S(e,7,t)},s.prototype.Rp=function(e,t){return this.hb.T(e,3+this.Op(e,t))},s.prototype.fr=function(e,t,i){this.hb.S(e,3+this.Op(e,t),i)},s.prototype.NR=function(e,t){return this.hb.T(e,5+this.Op(e,t))},s.prototype.hr=function(e,t,i){this.hb.S(e,5+this.Op(e,t),i)},s.prototype.Sr=function(e){return this.zd.T(e,0)},s.prototype.UW=function(e,t){this.zd.S(e,0,t)},s.prototype.ez=function(e){return this.zd.T(e,4)},s.prototype.cr=function(e,t){this.zd.S(e,4,t)},s.prototype.il=function(e){return this.zd.T(e,1)},s.prototype.ln=function(e,t){this.zd.S(e,1,t)},s.prototype.dz=function(e){return this.zd.T(e,3)},s.prototype.Et=function(e,t){this.zd.S(e,3,t)},s.prototype.Ym=function(e){var t=this.zd.Ce(),i=this.lh.Ph();return this.UW(t,i),-1!=e?(this.lh.addElement(i,e),this.g.Ra(e,this.xh,t),this.cr(t,this.g.Ua(e))):this.cr(t,-1),t},s.prototype.HP=function(e){this.zd.jd(e)},s.prototype.LD=function(e,t){this.lh.addElement(this.Sr(e),t),this.g.Ra(t,this.xh,e)},s.prototype.nt=function(e){var t=this.hb.Ce(),i=this.Qd.Ph();return this.ZW(t,i),-1!=e&&this.Qd.addElement(i,e),t},s.prototype.MD=function(e,t){this.Qd.addElement(this.Rh(e),t)},s.prototype.Uu=function(e){this.hb.jd(e),0<=(e=this.nh.lF(e))&&this.nh.SV(e)},s.prototype.hj=function(t,i){if(-1==this.pg(t,0))this.LB(t,0,i);else{if(-1!=this.pg(t,1))throw e.i.Qa();this.LB(t,1,i)}this.ky(t,i)},s.prototype.ky=function(e,t){var i=this.il(t);if(-1!=i){var r=this.Rp(i,t);this.hr(r,t,e),this.fr(e,t,r),this.fr(i,t,e),this.hr(e,t,i)}else this.hr(e,t,e),this.fr(e,t,e),this.ln(t,e)},s.prototype.Op=function(e,t){return this.pg(e,0)==t?0:1},s.prototype.Xm=function(e,t){var i,r=this.dz(t);if(-1!=r&&(this.df.vd(r,-1),this.Et(t,-1)),-1!=(r=this.il(t))){var n=i=r;do{var s=!1,o=this.Op(i,t),a=this.RF(i,o);if(this.pg(i,o+1&1)==e){if(this.Xu(i),this.Qd.bh(this.Rh(i)),this.Uu(i),i==a){r=-1;break}r==i&&(r=this.il(t),n=a,s=!0)}i=a}while(i!=n||s);if(-1!=r){do{o=this.Op(i,t),a=this.RF(i,o),this.LB(i,o,e),i=a}while(i!=n);-1!=(i=this.il(e))?(n=this.Rp(i,e),s=this.Rp(r,e),n==i?(this.ln(e,r),this.ky(i,e),this.ln(e,i)):s==r&&this.ky(r,e),this.fr(r,e,n),this.hr(n,e,r),this.fr(i,e,s),this.hr(s,e,i)):this.ln(e,r)}}for(r=this.Sr(e),i=this.Sr(t),n=this.lh.rc(i);-1!=n;n=this.lh.lb(n))this.g.Ra(this.lh.ja(n),this.xh,e);this.lh.Hy(r,i),this.HP(t)},s.prototype.UT=function(e,t){var i=this.pg(e,0),r=this.pg(e,1),n=this.pg(t,0),s=this.pg(t,1);this.Qd.Hy(this.Rh(e),this.Rh(t)),t==this.il(i)&&this.ln(i,e),t==this.il(r)&&this.ln(r,e),this.Xu(t),this.Uu(t),i==n&&r==s||r==n&&i==s||(this.Hn(i,this.yo),this.Hn(n,this.Pi),this.yo.qb(this.Pi)?(i!=n&&this.Xm(i,n),r!=s&&this.Xm(r,s)):(r!=n&&this.Xm(r,n),i!=s&&this.Xm(i,s)))},s.prototype.Xu=function(e){var t=this.pg(e,1);this.dF(e,this.pg(e,0)),this.dF(e,t)},s.prototype.dF=function(e,t){var i=this.Rp(e,t),r=this.NR(e,t),n=this.il(t);i!=e?(this.fr(r,t,i),this.hr(i,t,r),n==e&&this.ln(t,i)):this.ln(t,-1)},s.prototype.WD=function(e,t,i){var r=this.Qd.rc(e),n=this.Qd.ja(r);e=this.Le(n);var s=this.Le(this.g.U(n));for(this.g.jr(n,t,i,!0),r=this.Qd.lb(r);-1!=r;r=this.Qd.lb(r)){n=this.Qd.ja(r);var o=this.Le(n)==e;this.g.jr(n,t,i,o)}r=t.Vp(i,0).ac(),t=t.Vp(i,t.ol(i)-1).wc(),this.BK(e,r),this.BK(s,t)},s.prototype.ZE=function(e,t,i){var r=this.Rh(e),n=this.pg(e,0),s=this.pg(e,1),o=this.nt(-1);for(this.nh.add(o),this.Pl(o,-3),this.Ff.add(o),this.hj(o,n),e=1,t=t.ol(i);e<t;e++)i=this.Ym(-1),this.Ak.add(i),this.Ff.add(i),this.hj(o,i),o=this.nt(-1),this.nh.add(o),this.Pl(o,-3),this.Ff.add(o),this.hj(o,i);for(this.hj(o,s),r=this.Qd.rc(r);-1!=r;r=this.Qd.lb(r))if(s=this.Qd.ja(r),this.Le(s)==n){e=0;do{0<e&&(o=this.Ff.get(e-1),this.LD(o,s),-1==this.ez(o)&&this.cr(o,this.g.Ua(s))),o=this.Ff.get(e),e+=2,this.MD(o,s),s=this.g.U(s)}while(e<this.Ff.size)}else{e=this.Ff.size-1;do{e<this.Ff.size-2&&(o=this.Ff.get(e+1),this.LD(o,s),0>this.ez(o)&&this.cr(o,this.g.Ua(s))),o=this.Ff.get(e),e-=2,this.MD(o,s),s=this.g.U(s)}while(0<=e)}this.Ff.clear(!1)},s.prototype.Le=function(e){return this.g.Pa(e,this.xh)},s.prototype.TI=function(t,i,r){var n=this.pg(i,0),s=new e.h;this.Hn(n,s);var o=new e.h,a=this.pg(i,1);this.Hn(a,o);var l=r.ol(t),c=r.Vp(t,0),h=new e.h;if(c.Yp(h),!s.qb(h)){if(!this.Ng){var u=s.compare(this.vh);0>u*(h=h.compare(this.vh))&&(this.Ng=!0)}this.vF(n,this.Ff),this.Ak.add(n)}for(!this.Ng&&1<l&&(u=s.compare(o),c=c.wc(),(s.compare(c)!=u||c.compare(o)!=u||0>c.compare(this.vh))&&(this.Ng=!0)),t=(c=r.Vp(t,l-1)).wc(),o.qb(t)||(this.Ng||0>(u=o.compare(this.vh))*(h=t.compare(this.vh))&&(this.Ng=!0),this.vF(a,this.Ff),this.Ak.add(a)),this.Ff.add(i),o=0,a=this.Ff.size;o<a;o++)t=this.Ff.get(o),r=this.Pp(t),e.$c.LG(r)&&(this.Mc.vd(r,-1),this.Pl(t,-1)),t!=i&&-3!=this.Pp(t)&&(this.nh.add(t),this.Pl(t,-3));this.Ff.clear(!1)},s.prototype.lO=function(e,t){this.$d.compare(this.Mc,this.Mc.ja(e),t),this.$d.rg&&(this.$d.Kr(),this.oF(e,t))},s.prototype.oF=function(t,i){this.Wn=!0,t=this.Mc.ja(t),i=this.Mc.ja(i);var r=this.Qd.Jn(this.Rh(t)),n=this.Qd.Jn(this.Rh(i)),s=this.g.bc(r);null==s&&(null==this.ie&&(this.ie=new e.yb),this.g.ed(r,this.ie),s=this.ie),null==(r=this.g.bc(n))&&(null==this.Nm&&(this.Nm=new e.yb),this.g.ed(n,this.Nm),r=this.Nm),this.Gk.Oo(s),this.Gk.Oo(r),this.Gk.Ea(this.qa,!0)&&(this.Ng=!0),this.hK(t,i,-1,this.Gk),this.Gk.clear()},s.prototype.GQ=function(t,i){this.Wn=!0,i=this.Mc.ja(i);var r=this.Qd.Jn(this.Rh(i)),n=this.g.bc(r);null==n&&(null==this.ie&&(this.ie=new e.yb),this.g.ed(r,this.ie),n=this.ie),r=this.BF(t),this.Gk.Oo(n),this.g.Vi(r,this.jo),this.Gk.Kz(this.qa,this.jo,!0),this.hK(i,-1,t,this.Gk),this.Gk.clear()},s.prototype.xS=function(){if(0!=this.nh.size)for(;0!=this.nh.size;){if(this.nh.size>Math.max(100,this.g.fd)){this.nh.clear(!1),this.Ng=!0;break}var e=this.nh.Fc();this.nh.If(),this.Pl(e,-1),-1!=this.WS(e)&&this.wS(e),this.Vn=!1}},s.prototype.wS=function(e){if(this.Vn){var t=this.Mc.zu(this.MH,this.GH,e,!0);this.Vn=!1}else t=this.Mc.KD(e);-1==t?this.UT(this.Mc.ja(this.Mc.FF()),e):(this.Pl(e,t),this.$d.rg&&(this.$d.Kr(),this.oF(this.$d.Dm,t)))},s.prototype.WS=function(t){var i=this.pg(t,0);if(t=this.pg(t,1),this.Hn(i,this.yo),this.Hn(t,this.Pi),e.h.yc(this.yo,this.Pi)<=this.UA)return this.Ng=!0,-1;var r=this.yo.compare(this.vh),n=this.Pi.compare(this.vh);return 0>=r&&0<n?t:0>=n&&0<r?i:-1},s.prototype.oQ=function(){var t=new e.ia(0);t.Jb(this.g.fd);for(var i=this.g.Yq(),r=i.next();-1!=r;r=i.next())-1!=this.g.Pa(r,this.xh)&&t.add(r);this.g.nx(t,t.size),this.pQ(t)},s.prototype.pQ=function(i){this.df.clear(),this.df.De(i.size),this.df.Vo(new t(this.g));var r=new e.h;r.Rc();for(var n=-1,s=new e.h,o=0,a=i.size;o<a;o++){var l=i.get(o);this.g.Gc(l,s),s.qb(r)?(l=this.g.Pa(l,this.xh),this.Xm(n,l)):(n=this.Le(l),this.g.Gc(l,r),l=this.df.xn(l),this.Et(n,l))}},s.prototype.qQ=function(){var t=new e.ia(0);t.Jb(this.g.fd);for(var i=this.df.rc(-1);-1!=i;i=this.df.lb(i))t.add(this.df.ja(i));this.df.clear(),this.g.nx(t,t.size),i=0;for(var r=t.size;i<r;i++){var n=t.get(i),s=this.Le(n);n=this.df.xn(n),this.Et(s,n)}},s.prototype.vF=function(t,i){var r=this.il(t);if(-1!=r){var n=r;do{e.$c.LG(this.Pp(n))&&i.add(n),n=this.Rp(n,t)}while(n!=r)}},s.prototype.BK=function(e,t){for(e=this.lh.rc(this.Sr(e));-1!=e;e=this.lh.lb(e))this.g.mf(this.lh.ja(e),t)},s.prototype.hK=function(e,t,i,r){this.Xu(e),-1!=t&&this.Xu(t),this.TI(0,e,r),-1!=t&&this.TI(1,t,r),-1!=i&&(r.Bf.D(this.yo),this.Hn(i,this.Pi),this.Pi.qb(this.yo)||this.Ak.add(i)),i=0;for(var n=this.Ak.size;i<n;i++){var s=this.Ak.get(i),o=this.dz(s);-1!=o&&(this.df.vd(o,-1),this.Et(s,-1))}for(i=this.Rh(e),n=-1!=t?this.Rh(t):-1,this.WD(i,r,0),-1!=t&&this.WD(n,r,1),this.ZE(e,r,0),-1!=t&&this.ZE(t,r,1),this.Qd.bh(i),this.Uu(e),-1!=t&&(this.Qd.bh(n),this.Uu(t)),i=0,n=this.Ak.size;i<n;i++)(s=this.Ak.get(i))==this.Jq&&(this.Xv=!0),-1==(o=this.dz(s))&&(-1==(o=this.df.KD(this.BF(s)))?(e=this.Le(this.df.ja(this.df.FF())),this.Xm(e,s)):this.Et(s,o));this.Ak.clear(!1)},s.prototype.Hn=function(e,t){this.g.dG(this.ez(e),t)},s.prototype.BF=function(e){return this.lh.Jn(this.Sr(e))},s.prototype.jC=function(){this.Xv=!1,this.Jq=-1,null==this.$d&&(this.Mc.Rv=!1,this.$d=new r(this),this.Mc.Zn=this.$d);var t=new e.ia(0),s=null,o=null;this.GH=this.MH=-1,this.Vn=!1;for(var a=this.df.rc(-1);-1!=a;){this.Vn=!1;var l=this.df.ja(a);this.Jq=this.Le(l),this.g.Gc(l,this.vh),this.$d.$J(this.vh.y,this.vh.x);var c=this.il(this.Jq),h=-1==c;if(!h){l=c;do{var u=this.Pp(l);-1==u?(this.nh.add(l),this.Pl(l,-3)):-3!=u&&t.add(u),l=this.Rp(l,this.Jq)}while(l!=c)}if(0<t.size){for(this.Vn=1==t.size&&1==this.nh.size,h=0,c=t.size;h<c;h++)l=this.Mc.ja(t.get(h)),this.Pl(l,-2);var p=-2,d=-2;for(h=0,c=t.size;h<c;h++){if(u=t.get(h),-2==p){var f=this.Mc.we(u);-1!=f?(l=this.Mc.ja(f),-2!=(l=this.Pp(l))&&(p=f)):p=-1}if(-2==d&&(-1!=(u=this.Mc.lb(u))?(l=this.Mc.ja(u),-2!=(l=this.Pp(l))&&(d=u)):d=-1),-2!=p&&-2!=d)break}for(h=0,c=t.size;h<c;h++)u=t.get(h),l=this.Mc.ja(u),this.Mc.vd(u,-1),this.Pl(l,-1);t.clear(!1),this.MH=-1!=p?p:-1,this.GH=-1!=d?d:-1,-1!=p&&-1!=d?this.Vn||this.lO(p,d):-1==p&&-1==d&&(this.Vn=!1)}else h&&(null==s&&(s=new n(this)),s.Dh(this.vh),this.Mc.uJ(s),s.rg&&(s.Kr(),this.GQ(this.Jq,s.Dm)));this.xS(),this.Xv?(this.Xv=!1,null==o&&(o=new i(this.g)),o.Dh(this.vh),a=this.df.uJ(o)):a=this.df.lb(a)}return this.Wn},s.prototype.er=function(t){for(this.g=t,this.xh=this.g.Gd(),this.hb.De(t.fd+32),this.zd.De(t.fd),this.lh.At(t.fd),this.lh.fn(t.fd),this.Qd.At(t.fd+32),this.Qd.fn(t.fd+32),t=this.g.ld;-1!=t;t=this.g.ue(t))if(e.aa.Hc(this.g.ic(t)))for(l=this.g.Ob(t);-1!=l;l=this.g.Rb(l)){var i=this.g.Ja(l),r=this.g.Xa(l),n=this.Ym(r),s=this.nt(r);for(this.hj(s,n),c=this.g.U(r),r=0,i-=2;r<i;r++){var o=this.g.U(c),a=this.Ym(c);this.hj(s,a),s=this.nt(c),this.hj(s,a),c=o}this.g.dc(l)?(a=this.Ym(c),this.hj(s,a),s=this.nt(c),this.hj(s,a),this.hj(s,n)):(a=this.Ym(c),this.hj(s,a))}else for(var l=this.g.Ob(t);-1!=l;l=this.g.Rb(l)){var c=this.g.Xa(l);for(n=0,i=this.g.Ja(l);n<i;n++)this.Ym(c),c=this.g.U(c)}this.oQ()},s}();e.RC=s}(Y||(Y={})),function(e){var t=function(t){function i(r,n,s){var o=t.call(this)||this;if(void 0!==r)if(void 0!==s){o.description=e.ee.og();var a=new e.Nd;a.K(r,n,s),o.dC(a)}else if(void 0!==n)o.description=e.ee.og(),o.Cb(r,n);else if(r instanceof e.ra)o.description=r;else if(r instanceof e.h)o.description=e.ee.og(),o.Cb(r);else{if(!(r instanceof i))throw e.i.N();o.description=r.description,o.Cb(r.Lg(),r.ih()),null!==r.ka&&(o.ka=r.ka.slice(0))}else o.description=e.ee.og();return o}return Q(i,t),i.prototype.D=function(t){if(void 0===t){if(this.Ac())throw e.i.fa("This operation should not be performed on an empty geometry.");return(t=new e.h).ma(this.ka[0],this.ka[1]),t}if(this.Ac())throw e.i.fa("This operation should not be performed on an empty geometry.");t.ma(this.ka[0],this.ka[1])},i.prototype.Cb=function(e,t){"number"==typeof e?(this.vc(),null==this.ka&&this.un(),this.ka[0]=e,this.ka[1]=t):(this.vc(),this.Cb(e.x,e.y))},i.prototype.Cz=function(){if(this.Ac())throw e.i.fa("This operation should not be performed on an empty geometry.");var t=new e.Nd;return t.x=this.ka[0],t.y=this.ka[1],t.z=this.description.iG()?this.ka[2]:e.ra.se(1),t},i.prototype.dC=function(t){this.vc();var i=this.hasAttribute(1);i||e.ra.DG(1,t.z)||(this.re(1),i=!0),null==this.ka&&this.un(),this.ka[0]=t.x,this.ka[1]=t.y,i&&(this.ka[2]=t.z)},i.prototype.Lg=function(){if(this.Ac())throw e.i.fa("This operation should not be performed on an empty geometry.");return this.ka[0]},i.prototype.cC=function(e){this.setAttribute(0,0,e)},i.prototype.ih=function(){if(this.Ac())throw e.i.fa("This operation should not be performed on an empty geometry.");return this.ka[1]},i.prototype.aK=function(e){this.setAttribute(0,1,e)},i.prototype.bS=function(){return this.Uc(1,0)},i.prototype.wX=function(e){this.setAttribute(1,0,e)},i.prototype.zR=function(){return this.Uc(2,0)},i.prototype.hX=function(e){this.setAttribute(2,0,e)},i.prototype.Ec=function(){return this.yF(3,0)},i.prototype.LJ=function(e){this.setAttribute(3,0,e)},i.prototype.Uc=function(t,i){var r=this.description.Pf(t);return 0<=r?this.ka[this.description.$j(r)+i]:e.ra.se(t)},i.prototype.yF=function(t,i){var r=this.description.Pf(t);return 0<=r?this.ka[this.description.$j(r)+i]:e.ra.se(t)},i.prototype.setAttribute=function(e,t,i){this.vc();var r=this.description.Pf(e);0>r&&(this.re(e),r=this.description.Pf(e)),null==this.ka&&this.un(),this.ka[this.description.$j(r)+t]=i},i.prototype.getType=function(){return 33},i.prototype.Db=function(){return 0},i.prototype.Oa=function(){this.vc(),null!=this.ka&&(this.ka[0]=NaN,this.ka[1]=NaN)},i.prototype.sn=function(t){if(null!=this.ka){for(var i=e.ee.Iw(t,this.description),r=[],n=0,s=0,o=t.Aa;s<o;s++){var a=t.kd(s),l=e.ra.Va(a);if(-1==i[s]){var c=e.ra.se(a);for(a=0;a<l;a++)r[n]=c,n++}else for(c=this.description.$j(i[s]),a=0;a<l;a++)r[n]=this.ka[c],n++,c++}this.ka=r}this.description=t},i.prototype.un=function(){this.lJ(this.description.Ae.length),i.cE(this.description.Ae,this.ka,this.description.Ae.length),this.ka[0]=NaN,this.ka[1]=NaN},i.prototype.Oc=function(t){if(t instanceof e.Dd){if(!this.Ac()){var i=this.D();t.Eh(i,i),this.Cb(i)}}else this.Ac()||(this.re(1),i=this.Cz(),this.dC(t.fp(i)))},i.prototype.copyTo=function(t){if(33!=t.getType())throw e.i.N();t.vc(),null==this.ka?(t.Oa(),t.ka=null,t.Nf(this.description)):(t.Nf(this.description),t.lJ(this.description.Ae.length),i.cE(this.ka,t.ka,this.description.Ae.length))},i.prototype.Ia=function(){return new i(this.description)},i.prototype.B=function(){return this.Ac()},i.prototype.Ac=function(){return null==this.ka||isNaN(this.ka[0])||isNaN(this.ka[1])},i.prototype.bn=function(e){e.Oa(),this.description!=e.description&&e.Nf(this.description),e.Zb(this)},i.prototype.A=function(e){this.Ac()?e.Oa():(e.v=this.ka[0],e.G=this.ka[1],e.C=this.ka[0],e.H=this.ka[1])},i.prototype.Qo=function(e){if(this.Ac())e.Oa();else{var t=this.Cz();e.v=t.x,e.G=t.y,e.Ye=t.z,e.C=t.x,e.H=t.y,e.Bg=t.z}},i.prototype.Tg=function(t,i){var r=new e.Nc;return this.Ac()?(r.Oa(),r):(t=this.Uc(t,i),r.oa=t,r.va=t,r)},i.prototype.lJ=function(t){if(null==this.ka)this.ka=e.O.lg(t);else if(this.ka.length<t){for(var i=this.ka.slice(0),r=this.ka.length;r<t;r++)i[r]=0;this.ka=i}},i.cE=function(e,t,i){if(0<i)for(i=0;i<e.length;i++)t[i]=e[i]},i.prototype.Nb=function(e){if(e==this)return!0;if(!(e instanceof i)||this.description!=e.description)return!1;if(this.Ac())return!!e.Ac();for(var t=0,r=this.description.Ae.length;t<r;t++)if(this.ka[t]!=e.ka[t])return!1;return!0},i.prototype.cc=function(){var t=this.description.cc();if(!this.Ac())for(var i=0,r=this.description.Ae.length;i<r;i++){var n=this.ka[i];n=e.O.truncate(n^n>>>32),t=e.O.Th(n,t)}return t},i.prototype.mg=function(){return null},i}(e.aa);e.Sa=t}(Y||(Y={})),function(e){var t=function(){function e(e,t,i){void 0!==e&&(this.x=e,this.y=t,this.z=i)}return e.construct=function(t,i,r){var n=new e;return n.x=t,n.y=i,n.z=r,n},e.prototype.K=function(e,t,i){this.x=e,this.y=t,this.z=i},e.prototype.lx=function(){this.z=this.y=this.x=0},e.prototype.normalize=function(){var e=this.length();0==e&&(this.x/=e,this.y/=e,this.z/=e)},e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y,this.z-t.z)},e.prototype.Ag=function(t){new e(this.x*t,this.y*t,this.z*t)},e.prototype.Qh=function(e){return this.x*e.x+this.y*e.y+this.z*e.z},e}();e.Nd=t}(Y||(Y={})),function(e){var t=function(){function t(e,t,i){this.Gw=this.DA=null,this.Xf=t,this.FT=t.y-i,this.ET=t.y+i,this.Ew=0,this.dA=e,this.qa=i,this.RT=i*i,this.eA=0!=i,this.Lv=!1}return t.prototype.result=function(){return 0!=this.Ew?1:0},t.prototype.ZM=function(t){return t=t.hc(t.fe(this.Xf,!1)),e.h.yc(t,this.Xf)<=this.RT},t.prototype.fF=function(e){if(!this.eA&&(this.dA&&this.Xf.qb(e.ac())||this.Xf.qb(e.wc())))this.Lv=!0;else if(e.na==this.Xf.y&&e.na==e.la){if(this.dA&&!this.eA){var t=Math.max(e.sa,e.pa);this.Xf.x>Math.min(e.sa,e.pa)&&this.Xf.x<t&&(this.Lv=!0)}}else{var i=!1;if(t=Math.max(e.sa,e.pa),this.Xf.x>t?i=!0:this.Xf.x>=Math.min(e.sa,e.pa)&&(i=0<e.cq(!0,this.Xf.y,this.Gw,null)&&this.Gw[0]<=this.Xf.x),i){if(this.Xf.y==e.ac().y){if(this.Xf.y<e.wc().y)return}else if(this.Xf.y==e.wc().y&&this.Xf.y<e.ac().y)return;this.Ew=this.dA?1^this.Ew:this.Ew+(e.ac().y>e.wc().y?1:-1)}}},t.prototype.SI=function(e){var t=e.Tg(0,1);if(t.oa>this.ET||t.va<this.FT)return!1;if(this.eA&&this.ZM(e))return!0;if(t.oa>this.Xf.y||t.va<this.Xf.y)return!1;if(null==this.DA&&(this.DA=[null,null,null,null,null]),null==this.Gw&&(this.Gw=[0,0,0]),0<(t=e.eG()))for(e=0;e<t;e++){var i=this.DA[e].get();if(this.fF(i),this.Lv)return!0}else if(this.fF(e),this.Lv)return!0;return!1},t.PM=function(e,i,r){for(i=new t(0==e.In(),i,r),e=e.Ga();e.$a();)for(;e.Ha();)if(r=e.ha(),i.SI(r))return-1;return i.result()},t.QM=function(i,r,n,s){var o=new e.l;i.xc(o),o.W(s,s);var a=new t(0==i.In(),n,s);i=i.Ga();var l=new e.l;for(l.K(o),l.C=n.x+s,l.G=n.y-s,l.H=n.y+s,s=(n=r.MF(l,s)).next();-1!=s;s=n.next())if(i.Vb(r.ja(s)),i.Ha()&&(s=i.ha(),a.SI(s)))return-1;return a.result()},t.wm=function(i,r,n){if(i.B())return 0;var s=new e.l;if(i.xc(s),s.W(n,n),!s.contains(r))return 0;if(null!=(s=i.Bb)){var o=s.Fk;if(null!=o){if(1==(o=o.So(r.x,r.y)))return 1;if(0==o)return 0}if(null!=(s=s.Fb))return t.QM(i,s,r,n)}return t.PM(i,r,n)},t.bT=function(e,i,r){return i.B()?0:t.wm(e,i.D(),r)},t.Ml=function(e,t){return!(16>(e=e.I()))&&2*e+Math.log(e)/Math.log(2)*t<1*e*t},t}();e.Dg=t}(Y||(Y={})),function(e){var t=function(e){function t(t){return e.call(this,!0,t)||this}return Q(t,e),t.prototype.Ia=function(){return new t(this.description)},t.prototype.Db=function(){return 2},t.prototype.getType=function(){return 1736},t.prototype.xG=function(e,t,i){this.JS(e,t,i)},t.prototype.qR=function(){this.FR()},t}(e.Vk);e.Da=t}(Y||(Y={})),function(e){!function(e){e[e.PiPOutside=0]="PiPOutside",e[e.PiPInside=1]="PiPInside",e[e.PiPBoundary=2]="PiPBoundary"}(e.RL||(e.RL={})),e.hd=function(){function t(){}return t.KG=function(t,i,r){return 0==(t=e.Dg.bT(t,i,r))?0:1==t?1:2},t.Yd=function(t,i,r){return 0==(t=e.Dg.wm(t,i,r))?0:1==t?1:2},t.WX=function(i,r,n,s,o){if(r.length<n||o.length<n)throw e.i.N();for(var a=0;a<n;a++)o[a]=t.Yd(i,r[a],s)},t.sK=function(i,r,n,s,o){if(1736==i.getType())t.WX(i,r,n,s,o);else{if(197!=i.getType())throw e.i.fa("invalid_call");var a=new e.l;i.A(a),t.$M(a,r,n,s,o)}},t.$M=function(t,i,r,n,s){if(i.length<r||s.length<r)throw e.i.N();if(t.B())for(n=0;n<r;n++)s[n]=0;else for(t.W(.5*-n,.5*-n),t.W(.5*n,.5*n),n=0;n<r;n++)t.contains(i[n])?s[n]=1:t.contains(i[n])?s[n]=2:s[n]=0},t.YX=function(e,t,i,r,n){for(var s=0;s<i;s++)n[s]=e.qs(t[s],r)?2:0},t.XX=function(e,t,i,r,n){var s=e.Bb,o=null;null!=s&&(o=s.Fk),s=i;for(var a=0;a<i;a++)if(n[a]=1,null!=o){var l=t[a];0==o.So(l.x,l.y)&&(n[a]=0,s--)}if(0!=s)for(e=e.Ga();e.$a()&&0!=s;)for(;e.Ha()&&0!=s;)for(o=e.ha(),a=0;a<i&&0!=s;a++)1==n[a]&&o.qs(t[a],r)&&(n[a]=2,s--);for(a=0;a<i;a++)1==n[a]&&(n[a]=0)},t.tK=function(i,r,n,s,o){var a=i.getType();if(1607==a)t.XX(i,r,n,s,o);else{if(!e.aa.yd(a))throw e.i.fa("Invalid call.");t.YX(i,r,n,s,o)}},t}()}(Y||(Y={})),function(e){var t=function(e){function t(t,i){if(2==arguments.length){var r=e.call(this,!1,t.description)||this;r.nf(t),r.lineTo(i)}else r=e.call(this,!1,t)||this;return r}return Q(t,e),t.prototype.Ia=function(){return new t(this.description)},t.prototype.Db=function(){return 1},t.prototype.getType=function(){return 1607},t.prototype.xG=function(e,t,i){this.KS(e,t,i)},t}(e.Vk);e.Ta=t}(Y||(Y={})),function(e){var t=function(){function t(){}return t.prototype.progress=function(){return!0},t.zp=function(t){if(null!=t&&!t.progress(-1,-1))throw e.i.WC()},t}();e.mp=t}(Y||(Y={})),function(e){var t;(t=e.PK||(e.PK={}))[t.clipWithInputHorizon=1]="clipWithInputHorizon",t[t.clipWithOutputHorizon=2]="clipWithOutputHorizon";var i=function(){function e(){this.Kg=3,this.Vu=this.Jr=NaN}return e.prototype.PW=function(e){this.QB(1,e)},e.prototype.QW=function(e){this.QB(2,e)},e.prototype.hS=function(){return this.hs(1)},e.prototype.iS=function(){return this.hs(2)},e.prototype.QB=function(e,t){this.Kg=t?this.Kg|e:this.Kg&~e},e.prototype.hs=function(e){return!!(this.Kg&e)},e.prototype.Of=function(){var t=new e;return t.Jr=this.Jr,t.Vu=this.Vu,t.Kg=this.Kg,t},e}();e.yC=i,function(e){e[e.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",e[e.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"}(e.QK||(e.QK={}));var r=function(){function e(){this.Kg=0}return e.prototype.QB=function(e,t){this.Kg=t?this.Kg|e:this.Kg&~e},e.prototype.hs=function(e){return!!(this.Kg&e)},e.jg=function(t){var i=new e;return i.Kg=t.Kg,i},e.prototype.mM=function(e){this.Kg=e.Kg},e}();e.AY=r;var n=function(){function t(t,i,r){this.ef=t,this.Yf=i,this.Uf=new e.l,this.Uf.K(r),this.AT=t.cc()+i.cc()+this.Uf.cc().toString()}return t.prototype.cc=function(){return this.AT},t.prototype.Nb=function(e){return this==e||this.ef.Nb(e.ef)&&this.Yf.Nb(e.Yf)&&this.Uf.Nb(e.Uf)},t}();e.FY=n,n=function(){function t(){this.Yf=this.ef=null,this.rH=new i,this.sH=new r,this.ww=this.Wf=null,this.mw=this.Tn=!0}return t.Nr=function(e,i,r,n){var s;void 0===n&&(n=null),void 0===s&&(s=null);var o=new t;return o.qp(e,i,r,n,s),o},t.prototype.qp=function(t,i,r,n,s){if(null==t||null==i)throw e.i.fa("invalidArgument");if(this.ef=t,this.Yf=i,this.mw=this.Tn=!1,null!=n&&(this.rH=n.Of()),null!=s&&this.sH.mM(s),s=!1,1==i.Sb()&&null!=n&&(n=n.Jr,isNaN(n)||0==n||(s=!0)),t==i)this.Tn=!s,this.mw=!0;else{n=t.Sb();var o=i.Sb();if(0==n||0==o){if(null!=r)throw e.i.N();null!=t.Hd()&&null!=i.Hd()&&(this.Tn=t.Hd().Nb(i.Hd()))}else 3==n||3==o?this.Tn=t.Nb(i):this.ef.kS(this.Yf)?this.Tn=!s:this.Tn=!1,this.Wf=r,null!=this.Wf&&this.Wf.ix(),this.mw=(null==this.Wf||0==this.Wf.count())&&this.ef.sc().Nb(this.Yf.sc())}this.oY()},t.prototype.isIdentity=function(){return this.Tn},t.prototype.nR=function(){return this.rH.Of()},t.prototype.Nb=function(e){return e==this||!!(e instanceof t&&this.ef.Nb(e.ef)&&this.Yf.Nb(e.Yf))&&(this.Wf==e.Wf||!(null==this.Wf||null==e.Wf||!this.Wf.Nb(e.Wf)))},t.prototype.oY=function(){this.ww=new e.bu(this)},t}(),e.vr=n}(Y||(Y={})),function(e){var t=function(){function t(){}return t.Cp=function(e){return e*t.oW},t.mx=function(e,i){return t.gP(i-e)},t.hP=function(t){return-360<=t&&720>t?(0>t?t+=360:360<=t&&(t-=360),t):(0>(t=e.lc.RK(t))&&(t+=360),t)},t.gP=function(e){return 180<(e=t.hP(e))&&(e-=360),e},t.oW=57.29577951308232,t}();e.qr=t,e.Hh=function(){function i(){}return i.lj=function(t,i){var r=new e.l;t.A(r);var n=e.cb.gh(i),s=new e.l;return s.K(n),s.v=r.v,s.C=r.C,s.W(.01*s.ca(),0),i=e.ta.Wd(i,r,!1),s.contains(r)?t:e.Ud.clip(t,s,i,0)},i.ks=function(t,r,n,s,o){if(!e.cb.Wc(r))throw e.i.N();var a=e.ta.kj(r,t,!1),l=e.cb.gh(r),c=e.cb.sc(r),h=c.Hd().ai,u=e.cb.vv(c);c=e.cb.ev(c),u*=2-u;var p=new e.Nc;l.cn(p);var d=[[0,0],[0,0]];if(2==e.Eg.Sb(r)?s?(d[0][0]=i.Zm(o,p),d[0][1]=l.Jp(),e.cb.vt(),l=d[0][0]*h):(d[0][0]=l.gk(),d[0][1]=o,e.cb.vt(),l=d[0][1]*h):l=o*h,!s&&0!=l)throw e.i.N();var f=new e.ga,y=new e.gd;t=y.Ib(t);for(var m=[0],g=new e.h,v=new e.h,_=new e.h,b=new e.h,w=new e.h,M=new e.h,T=y.Ob(t);-1!=T;T=y.Rb(T)){var S=y.Xa(T);y.D(S,_);for(var A=!1,E=S=y.U(S);-1!=E;E=y.U(E)){if(E==S){if(A)break;A=!0}if(y.D(E,b),s&&a<o-_.x&&b.x-o>a||a<o-b.x&&_.x-o>a||!s&&a<-_.y&&b.y>a||a<-b.y&&_.y>a)do{if(!(Math.abs(_.x-b.x)>=.5*p.R())){if(2==e.Eg.Sb(r)?(d[0][0]=i.Zm(_.x,p),d[0][1]=_.y,d[1][0]=i.Zm(b.x,p),d[1][1]=b.y,e.cb.dW(),w.x=d[0][0]*h,w.y=d[0][1]*h,M.x=d[1][0]*h,M.y=d[1][1]*h):(w.x=_.x*h,w.y=_.y*h,M.x=b.x*h,M.y=b.y*h),M.x=6.283185307179586*(b.x-_.x)/p.R()+w.x,s){if(v.x=l,v.y=i.Nz(c,u,w,M,l,n),isNaN(v.y))break}else{if(v.x=i.Lz(c,u,w,M,n),isNaN(v.x))break;v.y=0}e.kb.wd(c,u,w.x,w.y,M.x,M.y,f,null,null,n);var x=f.u;e.kb.wd(c,u,w.x,w.y,v.x,v.y,f,null,null,n);var I=f.u;2==e.Eg.Sb(r)?(d[0][0]=v.x/h,d[0][1]=v.y/h,e.cb.bR(),s?(g.y=d[0][1],g.x=o):(g.x=i.os(d[0][0],_.x,b.x,p),g.y=o)):s?(g.x=o,g.y=v.y/h):(g.x=i.os(v.x/h,_.x,b.x,p),g.y=o),m[0]=0<x?e.O.Rk(I/x,0,1):.5,0!=m[0]&&1!=m[0]&&(x=y.Ma(E),y.Ul(x,m,1),y.Cb(y.U(x),g.x,g.y))}}while(0);_.L(b)}}return y.Ne(t)},i.Fn=function(t,r,n,s,o){if(t.B())return t;var a=e.cb.bf(r);return i.Hp(t,n-180*a,360*a,r,s,o,!0)},i.Nz=function(t,r,n,s,o,a){if(3.141592653589793<=Math.abs(n.x-s.x)||!i.Sn(n.x,s.x,o))return NaN;if(n.x>s.x)var l=s;else l=n,n=s;s=new e.ga(0);var c=new e.ga(0),h=new e.ga(0);e.kb.wd(t,r,l.x,l.y,n.x,n.y,c,s,null,a);var u=c.u,p=0,d=1,f=new e.h;for(f.L(l);u*(d-p)>1e-12*t;){var y=.5*(p+d);if(e.kb.oj(t,r,l.x,l.y,u*y,s.u,c,h,a),f.x=c.u,f.y=h.u,f.x==o)break;if(i.Sn(l.x,f.x,o))d=y;else{if(!i.Sn(n.x,f.x,o))return NaN;p=y}}return f.y},i.Sn=function(e,i,r){return e=t.Cp(e),i=t.mx(e,t.Cp(i)),0==(r=t.mx(e,t.Cp(r)))||0<i&&0<r&&r<=i||0>i&&0>r&&r>=i},i.Zm=function(e,t){var i=t.va-t.oa;return t.It(e-Math.floor((e-t.oa)/i)*i)},i.os=function(t,i,r,n){var s=new e.Nc;for(s.K(i,r),r=n.R(),t=Math.floor((t-i)/r)*r+t,s=s.sf();Math.abs(t-s)>Math.abs(t+r-s);)t+=r;return t},i.Lz=function(t,i,r,n,s){if(r.y>n.y)var o=n;else o=r,r=n;if((n=new e.Nc).K(o.y,r.y),!n.contains(0)||3.141592653589793<=Math.abs(o.x-r.x))return NaN;if(o.x==r.x)return o.x;var a=new e.ga(0),l=new e.ga(0),c=new e.ga(0);e.kb.wd(t,i,o.x,o.y,r.x,r.y,l,a,null,s);var h=l.u,u=0,p=1,d=new e.h;for(d.L(o);h*(p-u)>1e-12*t;){var f=.5*(u+p);if(e.kb.oj(t,i,o.x,o.y,h*f,a.u,l,c,s),d.x=l.u,d.y=c.u,n.K(o.y,d.y),0==d.y)break;if(n.contains(0))p=f;else{if(n.K(r.y,d.y),!n.contains(0))return NaN;u=f}}return d.x},i.Hp=function(t,i,r,n,s,o,a){var l=new e.l;if(t.A(l),l.B())return t;var c=new e.Nc;l.cn(c);var h=new e.Nc;if(h.K(i,i+r),h.contains(c)&&h.va!=c.va)return t;var u=new e.l;u.K(l);var p=t.getType();if(33==p)return((l=(u=s?t:t.Of()).Lg())<h.oa||l>=h.va||a&&l==h.va)&&(l+=Math.ceil((h.oa-l)/r)*r,l=h.It(l),u.cC(l)),u;if(550==p){for(n=(u=s?t:t.Of()).ub(0),p=2*u.I(),t=!1,s=0;s<p;s+=2)((l=n.read(s))<h.oa||l>=h.va||a&&l==h.va)&&(t=!0,l+=Math.ceil((h.oa-l)/r)*r,l=h.It(l),n.write(s,l));return t&&u.Pc(1993),u}if(h.contains(c))return t;if(197==p)return r=s?t:t.Of(),l.Ea(u),r.Xo(l),r;var d=.1*Math.max(l.ca(),l.R());for(u.W(0,d),a=t,h=n.Xd(0),t=e.Gh.local(),s=new e.Dd;;){var f=Math.floor((c.oa-i)/r),y=Math.ceil((c.va-i)/r);if(!(3<y-f))break;f=Math.floor(.5*(y+f)),u.v=l.v-d,u.C=i+r*f;var m=e.Ud.clip(a,u,h,o);u.v=u.C,u.C=l.C+d;var g=e.Ud.clip(a,u,h,o);s.gg((f-y)*r,0),g.Oc(s),1736==p?a=t.V(m,g,n,null):(a=m).add(g,!1),a.A(l),l.cn(c)}for(u.v=i,u.C=i+r,(i=new e.l).K(u),i.W(h,0),0!=(i=Math.floor((l.v-u.v)/r)*r)?(u.move(i,0),s.gg(-i,0)):s.RB(),i=1607==p?new e.Ta(a.description):new e.Da(a.description),o=new e.l,c=new e.l;l.C>u.v;)(d=e.Ud.clip(a,u,h,0)).A(c),(1607==p?!d.B()&&(c.R()>h||c.ca()>h):!d.B()&&(1736!=p||c.R()>h))&&(d.Oc(s),d.A(c),i.A(o),o.W(h,h),o.isIntersecting(c)&&1736==p?i=t.V(i,d,n,null):i.add(d,!1)),u.move(r,0),s.shift(-r,0);return i},i.WI=function(t,i,r,n){var s=new e.de(r.description);s.Fd(r,0,-1),s=e.cb.zh(s,t,i);var o=r.I();if(n.Oa(),!e.cb.Wc(t)||o!=s.I())return!1;var a=new e.l;r.A(a);var l=new e.l;if(s.A(l),a=a.R(),l=l.R(),0!=a&&0!=l){if(l/=a,t=e.cb.gh(i).R()/e.cb.gh(t).R(),1e-10<Math.abs(l/t-1))return!1}else if(0!=a||0!=l)return!1;for(n.add(r,!1),r=0;r<o;r++)t=s.Na(r),n.Cb(r,t);return!0},i.Oz=function(){throw e.i.Ie()},i}()}(Y||(Y={})),function(e){var t,i,r;(i=t=e.si||(e.si={}))[i.Clip=0]="Clip",i[i.DontClip=1]="DontClip",i[i.PannableFold=2]="PannableFold",function(e){e[e.Geodesic=0]="Geodesic",e[e.Loxodrome=1]="Loxodrome",e[e.GreatElliptic=2]="GreatElliptic",e[e.NormalSection=3]="NormalSection",e[e.ShapePreserving=4]="ShapePreserving"}(r=e.WK||(e.WK={})),e.zb=function(){function i(){}return i.xv=function(t,i,r){if(r||0<i){for(t=t.toString(e.Sc.PE_STR_NAME_CANON|e.Sc.PE_STR_AUTH_NONE),i=[],r=0;r<t.length;r++)i[r]="a"<=t[r]&&"z">=t[r]?i[r]=t[r].toUpperCase():t[r];return i.join()}return t.toString(e.Sc.PE_STR_AUTH_TOP)},i.ur=function(t,i,r,n){var s=n.length,o=r.I();if(0!=o){var a=r.ub(0),l=Math.min(o,s),c=0,h=t.eh();isNaN(i)&&(i=0);for(var u=t.Wc(),p=179*(t=u?t.sc().Oe().R():0)/360;0<o;){if(a.uB(c<<1,l,n),e.ej.projToGeogCenter(h,l,n,i),u)for(var d=0;d<l;d++){var f=n[d][0]-i,y=e.lc.sign(f),m=a.read(2*(c+d));0>y*e.lc.sign(m)&&Math.abs(f)>p&&(n[d][0]+=-y*t)}a.uC(c<<1,l,n),c+=l,o-=l,l=Math.min(o,s)}r.Pc(1993)}},i.IL=function(t,i,r,n){var s=0,o=t.eh();isNaN(s)&&(s=0);var a=t.Wc(),l=t.bf();t=360*l,l*=179;for(var c=n.length,h=0;h<r;){for(var u=h;u<r&&i[u].isNaN();++u)h++;var p=Math.min(c,r-h);if(0<p){u=1;for(var d=h+1;u<p;++u,++d)if(i[d].isNaN()){p=u;break}if(e.ta.Jy(n,i,h,p),e.ej.projToGeogCenter(o,p,n,s),a)for(u=0,d=h;u<p;++u,++d){var f=i[d].x,y=n[u][0]-s,m=e.lc.sign(y);0>m*e.lc.sign(f)&&Math.abs(y)>l&&(n[u][0]-=m*t)}e.ta.Iy(i,h,n,p),h+=p}}},i.Lx=function(t,i,r){var n=r.length,s=i.I();if(!(1>s)){var o=i.ub(0),a=Math.min(s,n),l=0,c=t.eh(),h=t.Wc(),u=h?t.Oe().R():0,p=179*u/360,d=0;for(h&&(d=t.zi());0<s;){if(o.uB(l<<1,a,r),e.ej.geogToProj(c,a,r),h)for(t=0;t<a;t++){var f=r[t][0],y=e.lc.sign(f),m=o.read(2*(l+t))-d;0>y*e.lc.sign(m)&&Math.abs(f)>p&&(r[t][0]+=-y*u)}o.uC(l<<1,a,r),l+=a,s-=a,a=Math.min(s,n)}i.Pc(1993)}},i.HL=function(t,i,r,n){if(0!=r){var s=t.eh(),o=t.Wc(),a=o?t.Oe().R():0,l=179*a/360,c=0;for(o&&(c=t.zi()),t=0;t<r;){for(var h=t;h<r&&i[h].isNaN();++h)t++;var u=Math.min(n.length,r-t);if(0<u){h=1;for(var p=t+1;h<u;++h,++p)if(i[p].isNaN()){u=h;break}if(e.ta.Jy(n,i,t,u),e.ej.geogToProj(s,u,n),o)for(h=0,p=t;h<u;h++){var d=n[h][0],f=e.lc.sign(d);0>f*e.lc.sign(i[p].x-c)&&Math.abs(d)>l&&(n[h][0]-=f*a)}e.ta.Iy(i,t,n,u),t+=u}}}},i.tr=function(t,i,r,n){var s=i.I();if(0!=s){var o=i.ub(0),a=t.ef,l=t.Yf,c=a.sc().Qp(),h=l.sc().Qp(),u=a.bf(),p=l.bf();if(null==(t=t.Wf)||0==t.count()){for(r=c/h,n=(a.Up()-l.Up())*p,h=-90*u,t=90*u,c=!1,p=1,a=2*s;p<a;)u=o.get(p),(l=e.O.Rk(u,h,t))!=u&&(o.set(p,l),c=!0),p+=2;if(0!=n||1!=r)for(c=!0,h=new e.h,p=0;p<s;p++)o.tc(2*p,h),h.x*=r,h.x+=n,h.y*=r,o.Tt(2*p,h);c&&i.Pc(1993)}else{a=n.length,l=Math.min(s,a);var d=e.O.lg(l),f=null,y=0,m=NaN,g=NaN,v=360*p,_=p/u;r&&(g=90*p,m=89.9*u,f=e.O.lg(l));for(var b=!0,w=0;0!=s;){for(u=!1,o.uB(y<<1,l,n),p=0;p<l;p++)d[p]=n[p][0];if(r)for(p=0;p<l;p++){var M=Math.abs(n[p][1])-m;0<M&&(u=n[p][1],n[p][1]=e.lc.Cn(m,u),f[p]=e.lc.Cn(M,u),u=!0)}for(p=n[0][0],t.transform(n,l,c,h),b&&(w=n[0][0]-_*p,b=!1),p=0;p<l;p++)M=n[p][0]-d[p]*_-w,200<Math.abs(M)&&(n[p][0]=0<M?n[p][0]-v:n[p][0]+v);if(u){for(p=0;p<l;p++)0!=f[p]&&(n[p][1]+=_*f[p],n[p][1]>g?n[p][1]=g:n[p][1]<-g&&(n[p][1]=-g));for(u=0;u<l;u++)f[u]=0}o.uC(y<<1,l,n),y+=l,s-=l,l=Math.min(s,a)}i.Pc(1993)}}},i.GL=function(t,i,r,n){if(t.mw)n=90*t.ef.bf(),e.ta.dK(i,r,-n,n);else{var s=t.Wf,o=t.ef,a=t.Yf;t=o.Xr();var l=a.Xr(),c=o.bf(),h=90*c,u=a.bf();if(null==s||0==s.count()){if(n=t/l,s=(o.Up()-a.Up())*u,e.ta.dK(i,r,-h,h),0!=s||1!=n)for(u=0;u<r;u++)i[u].x*=n,i[u].x+=s,i[u].y*=n}else{o=Math.min(r,n.length),h=e.O.lg(o),a=360*u,c=u/c;for(var p=!0,d=0,f=0;0!=r;){for(u=0;u<o;u++)h[u]=i[u+f].x;for(u=i[0].x,e.ta.Jy(n,i,f,o),s.transform(n,o,t,l),e.ta.Iy(i,f,n,o),p&&(d=i[0].x-c*u,p=!1),u=0;u<o;u++){var y=i[f+u].x-h[u]*c-d;200<Math.abs(y)&&(i[f+u].x=0<y?i[f+u].x-a:i[f+u].x+a)}f+=o,r-=o,o=Math.min(r,n.length)}}}},i.dv=function(e,t){return e=e.gh(),isNaN(t)||e.Ju(t,0),e},i.UQ=function(t,r,n,s,o,a,l,c){for(var h=i.dv(s,o),u=h.R(),p=u/360,d=i.pE*p,f=t.ub(0),y=r.Wc(),m=y?u/r.Oe().R():0,g=!1,v=new e.Da(n.description),_=0,b=n.da();_<b;++_){var w=y,M=new e.Ta(n.description);if(M.addPath(n,_,!0),0!=l){var T=i.PD(!0,M,h.H-c,h.H,l);(g=g||T)&&(w=!1)}var S=-1;w&&(S=t.Ba(_));var A=M.ub(0),E=M.I(),x=0,I=A.read(0),C=0;T=3*s.Xd(0);var k=!1,N=new e.h;N.Rc();var L=new e.h;L.Rc();for(var O=!1,R=1;R<E;++R){var P=e.h.construct(A.eg(2*R),A.eg(2*R+1)),D=P.x,F=D+x,j=F-I;if(P.x=F,Math.abs(j)>d){if(w){var Z=S+(R+1<E?R:0),z=f.read(2*(S+R-1));Z=(f.read(2*Z)-z)*m,Math.abs(j-Z)>1*p&&(w=!1)}w||(F=D+(x-=e.lc.Cn(u,F-I)),++C,O=0!=x,P.x=F)}else k||e.ta.AG(L,N,P,T)&&(k=!0);O&&A.write(2*R,F),I=F,L.L(N),N.L(P)}0<C&&M.Pc(1993),w=M.Na(0),E=M.Na(E-1),M=e.h.tb(w,E)<T?i.uQ(M,s,o,a,k):i.vQ(t,_,M,s,o),v.add(M,!1)}return o=s.Xd(0),n=h.R()/180,i.Jt(v,h,.1*o,!1),v=v!=(o=e.ri.clip(v,h,o,n,a)),t=t.Ke(),l=0,0<(c=o.Ke())&&0>t?l=1:0>=c&&0<t&&(0==c?(c=NaN,2==r.Sb()?c=r.ml().Ke():1==r.Sb()&&(c=r.Oe().wF()),t>.99*c&&(l=-1)):l=-1),0!=l&&((r=new e.Da(o.description)).tp(h),(r=e.Xl.local().V(r,n,a)).add(o,!1),v=!0,o=r),v&&(o=e.Yl.local().V(o,s,!1,a)),o},i.vQ=function(t,r,n,s,o){var a=n.I(),l=n.Na(0),c=n.Na(a-1);o=(s=i.dv(s,o)).R(),l=e.lc.sign(c.x-l.x);var h=new e.l;n.xc(h);var u=s.gk();if(c=u-o,u+=o,0<=l){var p=Math.ceil((c-h.v)/o);for(p*=o;c>h.v+p;)p+=o;for(;c<h.C+p;)p-=o;var d=p;720<h.R()&&(u=c+360*Math.ceil(h.R()/360))}else{for(p=Math.ceil((u-h.C)/o),p*=o;u<h.C+p;)p-=o;for(;u>h.v+p;)p+=o;d=p,720<h.R()&&(c=u-360*Math.ceil(h.R()/360))}p=l*o;var f=e.l.construct(h.v,h.G,h.C,h.H);f.move(d,0);var y=new e.Dd;y.gg(d,0),n.Oc(y),(h=new e.Ta(n.description)).add(n,!1),d=n.Na(a-1),o=0;for(var m=h.Na(0).x,g=0;0<l?f.C<u:f.v>c;)1024<=g&&(g=0),f.move(p,0),y.Gb=p,n.Oc(y),m+=p,s.v<=m&&s.C>=m&&(o=h.I()-1),n.Cb(0,d),d=n.Na(a-1),h.Dr(n,0,0,a-1,!1);return n=new e.Da(h.description),a=0<t.Ir(r),n.add(h,!1),t=h.Na(0),c=h.Na(h.I()-1),r=n.da()-1,(0>l?a:!a)?(l=e.h.construct(c.x,s.H),n.Ci(l),l=e.h.construct(s.gk(),s.H),n.Ci(l),s=e.h.construct(t.x,s.H)):(l=e.h.construct(c.x,s.G),n.Ci(l),l=e.h.construct(s.gk(),s.G),n.Ci(l),s=e.h.construct(t.x,s.G)),n.Ci(s),n.xG(0,r,0),n.kO(o),n},i.uQ=function(t,r,n,s,o){var a=new e.Da(t.description);a.add(t,!1),a.DB(0,a.I()-1);var l=new e.l;a.xc(l);var c=(n=i.dv(r,n)).R(),h=Math.ceil((n.v-l.v)/c);for(h*=c;n.v>l.v+h;)h+=c;for(;n.v<l.C+h;)h-=c;if(0!=(h+=c)){l.move(h,0);var u=new e.Dd;u.gg(h,0),a.Oc(u)}if(n.v<=l.v&&n.C>l.C)return o&&(o=a.Ke(),r=(a=e.Yl.local().V(a,r,!0,s)).Ke(),(r=e.lc.sign(o)!=e.lc.sign(r))&&a.oJ()),a;for((t=new e.Da(t.description)).add(a,!1),o=o||l.R()>c-r.Xd(0);l.v<n.C;)l.move(c,0),(u=new e.Dd).gg(c,0),a.Oc(u),t.add(a,!1);return o&&(o=t.Ke(),t.Yo(1),r=(t=e.Yl.local().V(t,r,!0,s)).Ke(),(r=e.lc.sign(o)!=e.lc.sign(r))&&t.oJ()),t},i.PD=function(t,i,r,n,s){for(var o=i.ub(0),a=i.I(),l=!1,c=0;c<a;c++){var h=e.h.construct(o.eg(2*c),o.eg(2*c+1));if(1&s&&h.y>=r){l=!0;break}if(2&s&&h.y<=-r){l=!0;break}}if(!l)return!1;o=!1,t&&(o=i.Nn(0)),a=(t=new e.gd).Ib(i),l=t.Ob(a);var u=-1,p=!0,d=new e.h;d.Rc(),c=new e.Sa;for(var f=-1,y=t.Xa(l);-1!=y;y=t.U(y)){h=t.Na(y);var m=1&s&&90<=h.y?1:0;if(m|=2&s&&h.y<=-r?2:0,0<u&&u!=m){if(d.x!=h.x){d.x=h.x,t.Vi(t.Ma(y),c);var g=t.wj(l,y,c);t.mf(g,d)}if(o)for(f=-1!=f?t.U(f):t.Xa(l),g=t.Ma(y);f!=g;)f=t.pd(f,!1);f=-1}0<m&&(h.y=e.lc.Cn(n,h.y),t.mf(y,h),p||u==m||(h.x!=d.x?(t.Vi(y,c),g=t.wj(l,y,c),t.Cb(g,d.x,h.y),f=g):f=y)),u=m,d=h,p=!1}if(o){if(-1!=f)for(f=t.U(f);-1!=f;)f=t.pd(f,!1);r=t.Xa(l),t.fq(r,t.rj(l))||(t.Vi(r,c),t.wj(l,-1,c))}return t.Ne(a).copyTo(i),!0},i.Mz=function(r,n,s,o){var a=r;if(a.B()||s==t.DontClip)return a;var l=a.getType();if(33==l)return a=[(o=a).D()],i.yG(a,1,n,s),a[0].isNaN()?o.Oa():o.Cb(a[0]),r;var c=(r=n.sc()).bf(),h=90*c,u=180*c,p=360*c,d=n.zi(),f=.5*c,y=new e.l;a.A(y);var m=n.Vr(),g=n.PQ(),v=197==m.getType();if(n=new e.l,m.A(n),s==t.PannableFold&&(s=r.Oe().R(),n.v=d-.5*s,n.C=n.v+s),y.G<-h||y.H>h){if((new e.l).K(y.v-c,-h,y.C+c,h),(a=e.ri.Nu(a,n,r,NaN,0,o)).B())return a;a.A(y)}if(g&&(n.H<y.G||n.G>y.H))return a.Ia();if(y.R()>p&&(a=i.Hp(a,d-u,p,r,!0,0,!0,o)).A(y),0!=(h=i.eO(y.v,y.C,n.v,n.C,p))&&y.move(h,0),y.C>n.C||y.v<n.v){if(y.C>n.C)for(;y.v>=n.C;)y.move(-p,0),h-=p;for(;y.v<n.C-p;)y.move(p,0),h+=p}if(s=e.ta.Hu(r,m),0!=h&&((c=new e.Dd).gg(h,0),a.Oc(c)),g){if(v&&n.contains(y))return a;for(g=[null,null],h=0;2>h;h++){if(v?c=e.aa.Hc(l)?e.ri.clip(a,n,s,f,o):e.ri.clip(a,n,s,0,o):(c=e.Xj.local().V(a,m,r,o))==m&&(c=e.aa.jg(c)),n.v<=y.v&&n.C>=y.C||n.v>=y.v&&n.C<=y.C)return c;g[h]=c,0==h&&(y.move(-p,0),(c=new e.Dd).gg(-p,0),a.Oc(c))}if(550==l)g[0].Fd(g[1],0,-1);else if(e.aa.Hc(l))g[0].add(g[1],!1);else{if(33!=l)throw e.i.fa("intersect_with_GCS_horizon: unexpected geometry type");g[0].B()&&(g[0]=g[1])}return g[0]}if(n.H<y.G||n.G>y.H)return a;for(l=0;!a.B()&&y.C>n.v;)0!=l&&((c=new e.Dd).gg(l,0),a.Oc(c)),e.dj.local().V(4,a,m,r,o)||m==(a=e.kp.local().V(a,m,r,o))&&(a=e.aa.jg(a)),0!=l&&((f=new e.Dd).gg(-l,0),a.Oc(f)),l-=p,y.move(-p,0);return a},i.yG=function(r,n,s,o){if(0!=n&&o!=t.DontClip)if(o==t.PannableFold){o=s.HR();for(var a=n,l=0;l<n;l++)(r[l].y>o.H||r[l].y<o.G)&&(r[l].Rc(),a--);0!=a&&i.av(r,n,o.v,o.R())}else{var c=90*(o=s.bf()),h=180*o;for(o*=360,a=n,l=0;l<n;l++)(r[l].y>c||r[l].y<-c)&&(r[l].Rc(),a--);if(0!=a){(a=new e.l).Zw(r,n),c=s.Vr();var u=s.hv();l=197==c.getType();var p=new e.l;if(c.A(p),!u||!(p.H<a.G||p.G>a.H))if(u)if(i.av(r,n,p.gk()-h,o),a=n,l)for(l=0;l<n;l++)p.contains(r[l])||(r[l].Rc(),a--);else for(s=e.ta.Hu(s.sc(),c),l=0;l<n;l++)(h=0!=e.hd.Yd(c,r[l],s))||(r[l].Rc(),a--);else for(i.av(r,n,-h,o),a=n,s=e.ta.Hu(s.sc(),c),l=0;l<n;l++)(h=r[l]).isNaN()&&a--,u=i.tE(h.x,p.v,p.C,o),h.x+=u,(h=0!=e.hd.Yd(c,h,s))&&(r[l].Rc(),a--)}}},i.Hp=function(t,i,r,n,s,o,a,l){var c=t.getType(),h=i+r;if(33===c){var u=(n=s?t:t.Of()).Lg();return(u<i||u>=h||a&&u==h)&&(u+=Math.ceil((i-u)/r)*r,u=e.O.Rk(u,i,h),n.cC(u)),n}if(t.B())return t;if(u=new e.l,t.A(u),u.B())return t;var p=new e.Nc;u.cn(p);var d=new e.Nc;if(d.K(i,h),d.contains(p))return t;if((h=new e.l).K(u),550===c){for(l=(n=s?t:t.Of()).ub(0),c=2*n.I(),h=!1,i=0;i<c;i+=2)((u=l.read(i))<d.oa||u>=d.va||a&&u==d.va)&&(h=!0,u+=Math.ceil((d.oa-u)/r)*r,u=d.It(u),l.write(i,u));return h&&n.Pc(1993),n}if(197==c)return r=s?t:t.Of(),u.Ea(h),r.Xo(u),r;var f=.1*Math.max(u.ca(),u.R());for(h.W(0,f),a=t,d=n.Xd(0),t=e.Gh.local(),s=new e.Dd;;){var y=Math.floor((p.oa-i)/r),m=Math.ceil((p.va-i)/r);if(!(3<m-y))break;y=Math.floor(.5*(m+y)),h.v=u.v-f,h.C=i+r*y;var g=e.ri.clip(a,h,d,o,l);h.v=h.C,h.C=u.C+f;var v=e.ri.clip(a,h,d,o,l);s.gg((y-m)*r,0),v.Oc(s),1736==c?a=t.V(g,v,n,null):(a=g).add(v,!1),a.A(u),u.cn(p)}for(h.v=i,h.C=i+r,(i=new e.l).K(h),i.W(d,0),0!=(i=Math.floor((u.v-h.v)/r)*r)?(h.move(i,0),s.gg(-i,0)):s.RB(),i=1607==c?new e.Ta(a.description):new e.Da(a.description),o=new e.l,p=new e.l;u.C>h.v;)(f=e.ri.clip(a,h,d,0,l)).A(p),(1607==c?!f.B()&&(p.R()>d||p.ca()>d):!f.B()&&(1736!=c||p.R()>d))&&(f.Oc(s),f.A(p),i.A(o),o.W(d,d),o.isIntersecting(p)&&1736==c?i=t.V(i,f,n,null):i.add(f,!1)),h.move(r,0),s.shift(-r,0);return i},i.av=function(t,i,r,n){for(var s=r+n,o=0;o<i;o++){var a=t[o].x;r<=a&&a<s||!(a<r||a>s||a==s)||(a+=Math.ceil((r-a)/n)*n,a=e.O.Rk(a,r,s),t[o].x=a)}},i.Fn=function(t,r,n,s,o,a){if(!r.Wc())throw e.i.fa("fold_into_360_degree_range");if(t.B())return t;if(2==r.Sb()){n=r.pv();var l=r.ov()-n}else{var c=r.bf();l=360*c,n-=180*c}return i.Hp(t,n,l,r,s,o,!0,a)},i.qF=function(e,t,r,n){if(2==r.Sb())n=r.pv(),r=r.ov()-n;else{var s=r.bf();r=360*s,n-=180*s}i.av(e,t,n,r)},i.lj=function(t,i){var r=i.Oe();if(33==t.getType()){var n=t.ih();return r.G<=n&&n<=r.H?t:t.Ia()}n=new e.l,t.A(n);var s=new e.l;return s.K(r),s.v=n.v,s.C=n.C,s.W(.01*s.ca(),0),r=e.ta.uy(i,n),s.contains(n)?t:e.ri.clip(t,s,r,0,null)},i.ir=function(e,t,i){return e>t.C&&e-t.C<i?t.C:e<t.v&&t.v-e<i?t.v:e},i.FX=function(e,t,r,n){n.x=i.ir(e.x,t,r),n.y=e.y},i.EX=function(e,t,r,n){for(var s=0;s<t;s++)e[s].y<r.G||e[s].y>r.H?e[s].Rc():e[s].x=i.ir(e[s].x,r,n)},i.Jt=function(t,r,n,s){if(!t.B()){var o=t.getType();if(!s||1736!=o)if(e.aa.xj(o)){s=t.ub(0),o=0;for(var a=t.I();o<a;o++){var l=s.read(2*o),c=i.ir(l,r,n);c!=l&&s.write(2*o,c)}t.Pc(1993)}else if(197==o)s=new e.l,t.A(s),s.v=i.ir(s.v,r,n),s.C=i.ir(s.C,r,n),t.Xo(s);else{if(33!=o)throw e.i.fa("internal error");t.cC(i.ir(t.Lg(),r,n))}}},i.uS=function(t,r,n,s){var o=new e.gd,a=o.Ib(t);return t=e.ta.Hu(r,t),i.ks(o,a,r,t,n,!0,s),o.Ne(a)},i.ks=function(t,n,s,o,a,l,c){if(!s.Wc())throw e.i.N("invalid call");var h=s.Oe(),u=s.sc(),p=u.eh().getDatum().getSpheroid();u=u.Hd().ai;var d=p.getFlattening();p=p.getAxis(),d*=2-d;var f=new e.Nc;h.cn(f);var y=null,m=[[0,0],[0,0]];if(2==s.Sb()?(y=s.eh(),l?(m[0][0]=i.Zm(c,f),m[0][1]=h.Jp(),e.ej.projToGeog(y,1,m),h=m[0][0]*u):(m[0][0]=h.gk(),m[0][1]=c,e.ej.projToGeog(y,1,m),h=m[0][1]*u)):h=c*u,!l&&0!=h&&a!=r.GreatElliptic)throw e.i.fa("invalid argument");var g=new e.ga,v=[0],_=new e.h,b=new e.h,w=new e.h,M=[null,null],T=new e.h,S=new e.h,A=new e.h,E=new e.h;for(n=t.Ob(n);-1!=n;n=t.Rb(n)){var x=t.Xa(n);t.D(x,T);for(var I=!1,C=x=t.U(x);-1!=C;C=t.U(C)){if(C==x){if(I)break;I=!0}if(t.D(C,S),l&&(o<c-T.x&&S.x-c>o||o<c-S.x&&T.x-c>o)||!l&&(0!=c||o<-T.y&&S.y>o||o<-S.y&&T.y>o))do{if(!(Math.abs(T.x-S.x)>=.5*f.R())){if(2==s.Sb()?(m[0][0]=i.Zm(T.x,f),m[0][1]=T.y,m[1][0]=i.Zm(S.x,f),m[1][1]=S.y,e.ej.projToGeogCenter(y,2,m,0),A.x=m[0][0]*u,A.y=m[0][1]*u,E.y=m[1][1]*u):(A.x=T.x*u,A.y=T.y*u,E.y=S.y*u),E.x=2*(S.x-T.x)*Math.PI/f.R()+A.x,l){if(b.x=h,b.y=i.Nz(p,d,A,E,h,a),isNaN(b.y))break;M[0]=b;var k=1}else if(a==r.GreatElliptic){var N=[0,0];if(0==(k=e.Ox.Oz(d,A,E,h,N)))break;b.x=N[0],b.y=h,M[0]=b,2==k&&(w.x=N[1],w.y=h,M[1]=w)}else{if(b.x=i.Lz(p,d,A,E,a),isNaN(b.x))break;b.y=0,M[0]=b,k=1}var L=-1;for(N=0;N<k;N++){e.kb.wd(p,d,A.x,A.y,E.x,E.y,g,null,null,a);var O=g.u;e.kb.wd(p,d,A.x,A.y,M[N].x,M[N].y,g,null,null,a);var R=g.u;if(2==s.Sb()?(m[0][0]=M[N].x/u,m[0][1]=M[N].y/u,e.ej.geogToProj(y,1,m),l?(_.y=m[0][1],_.x=c):(_.x=i.os(m[0][0],T.x,S.x,f),_.y=c)):l?(_.x=c,_.y=M[N].y/u):(_.x=i.os(M[N].x/u,T.x,S.x,f),_.y=c),v[0]=0<O?e.O.Rk(R/O,0,1):.5,0==v[0]||1==v[0])break;L>v[0]||(L=t.Ma(C),t.Ul(L,v,1),t.Cb(t.U(L),_.x,_.y),L=v[0])}}}while(0);T.L(S)}}},i.Zm=function(e,t){var i=t.va-t.oa;return t.It(e-Math.floor((e-t.oa)/i)*i)},i.os=function(t,i,r,n){var s=new e.Nc;for(s.K(i,r),r=n.R(),t=Math.floor((t-i)/r)*r+t,s=s.sf();Math.abs(t-s)>Math.abs(t+r-s);)t+=r;return t},i.Sn=function(t,i,r){return t=e.qr.Cp(t),i=e.qr.mx(t,e.qr.Cp(i)),0==(r=e.qr.mx(t,e.qr.Cp(r)))||0<i&&0<r&&r<=i||0>i&&0>r&&r>=i},i.Nz=function(t,n,s,o,a,l){if(l==r.GreatElliptic)return e.Ox.SS(n,s,o,a);if(Math.abs(s.x-o.x)>=Math.PI||!i.Sn(s.x,o.x,a))return NaN;if(s.x>o.x)var c=o;else c=s,s=o;o=new e.ga;var h=new e.ga,u=new e.ga;e.kb.wd(t,n,c.x,c.y,s.x,s.y,h,o,null,l);var p=h.u,d=0,f=1,y=new e.h;for(y.L(c);p*(f-d)>1e-12*t;){var m=.5*(d+f);if(e.kb.oj(t,n,c.x,c.y,p*m,o.u,h,u,l),y.x=h.u,y.y=u.u,y.x==a)break;if(i.Sn(c.x,y.x,a))f=m;else{if(!i.Sn(s.x,y.x,a))return NaN;d=m}}return y.y},i.Lz=function(t,i,n,s,o){if(o==r.GreatElliptic)return t=[0,0],e.Ox.Oz(i,n,s,0,t),t[0];if(n.y>s.y)var a=s;else a=n,n=s;if((s=new e.Nc).K(a.y,n.y),!s.contains(0)||Math.abs(a.x-n.x)>=Math.PI)return NaN;if(a.x==n.x)return a.x;var l=new e.ga,c=new e.ga,h=new e.ga;e.kb.wd(t,i,a.x,a.y,n.x,n.y,c,l,null,o);var u=c.u,p=0,d=1,f=new e.h;for(f.L(a);u*(d-p)>1e-12*t;){var y=.5*(p+d);if(e.kb.oj(t,i,a.x,a.y,u*y,l.u,c,h,o),f.x=c.u,f.y=h.u,s.K(a.y,f.y),0==f.y)break;if(s.contains(0))d=y;else{if(s.K(n.y,f.y),!s.contains(0))return NaN;p=y}}return f.x},i.WI=function(t,i,r,n){if(!t.ef.Wc())return!1;var s=new e.de(i.description);if(s.Fd(i,0,-1),n=e.Hx.local().V(s,t,n),s=i.I(),r.Oa(),s!=n.I())return!1;var o=new e.l;i.A(o);var a=new e.l;if(n.A(a),o=o.R(),a=a.R(),0!=o&&0!=a){if(a/=o,t=t.Yf.gh().R()/t.ef.gh().R(),1e-10<Math.abs(a/t-1))return!1}else if(0!=o||0!=a)return!1;for(r.add(i,!1),i=new e.h,t=0;t<s;t++)n.D(t,i),r.Cb(t,i);return!0},i.qN=function(e,t){return(e%=360*t)>=180*t&&(e-=360*t),e},i.UI=function(r,n,s,o){if(s==t.Clip){var a=n.ml();197==a.getType()?(s=new e.l,a.A(s),a=e.ta.uy(n,s),r=e.ri.clip(r,s,a,5e4*n.pm(),o)):e.dj.local().V(1,a,r,n,o)||(r=e.Xj.local().V(r,a,n,o))==a&&(r=e.Vk.jg(r))}else n.Wc()&&(o=new e.l,r.xc(o),n.Oe().contains(o)||(i.Jt(r,n.Oe(),n.Xd(0),!0),s==t.PannableFold&&(r=i.lj(r,n)),r=i.Fn(r,n,0,!0,1e5*n.pm(),null)));return r},i.XD=function(t,i,r){var n=i.Wr();if(null==n)return t;var s=(i=i.sc()).Oe().R(),o=new e.l;t.xc(o);var a=new e.Nc;o.cn(a),o=n.Ga(),n=null;for(var l=new e.Dd;o.$a();)for(;o.Ha();){var c=o.ha(),h=c.Tg(0,0),u=new e.Nc;for(u.K(h.oa,h.va),h=0;u.va>a.oa;)u.move(-s),--h;for(;u.oa<=a.va;){if(u.isIntersecting(a)){null==n&&(n=new e.Ta);var p=e.yb.cP(c.ac(),c.wc());0!=h&&(l.gg(h*s,0),p.Oc(l)),n.oc(p,!0)}u.move(s),++h}}return null!=n?(i=e.ta.gO(i,n),i=e.ta.Er(i),e.$t.lP(t,n,i,r)):t},i.eO=function(e,t,r,n,s){return e>=r&&t<=n?0:i.tE(.5*(t+e),r,n,s)},i.tE=function(t,i,r,n){return e.lc.round((.5*(r+i)-t)/n)*n},i.VQ=function(t,r,n,s,o,a,l,c){var h=i.dv(s,o),u=h.R(),p=u/360,d=i.pE*p,f=t.ub(0),y=r.Wc(),m=y?u/r.Oe().R():0;r=t.Ia();for(var g=0,v=n.da();g<v;++g){var _=y,b=new e.Ta(n.description);b.addPath(n,g,!0);var w=n.dc(g);0!=l&&(w=i.PD(w,b,h.H-c,h.H,l))&&(_=!1);var M=-1;w=b.I();var T=!1;_&&(M=t.Ba(g),T=t.dc(g));var S=b.ub(0),A=0,E=S.read(0),x=0,I=3*s.Xd(0),C=!1,k=new e.h;k.Rc();var N=new e.h;N.Rc();for(var L=!1,O=1;O<w;++O){var R=e.h.construct(S.eg(2*O),S.eg(2*O+1)),P=R.x,D=P+A,F=D-E;if(R.x=D,Math.abs(F)>d){if(_){var j=M+O-1,Z=M;(!T||O+1<w)&&(Z+=O),j=f.read(2*j),Z=(f.read(2*Z)-j)*m,Math.abs(F-Z)>1*p&&(y=!1)}_||(D=P+(A-=e.lc.Cn(u,D-E)),++x,L=0!=A,R.x=D)}else C||e.ta.AG(k,N,R,I)&&(C=!0);L&&S.write(2*O,D),E=D,k.L(N),N.L(R)}0!=x&&b.Pc(1993),_=b.Na(0),w=b.Na(w-1),e.h.tb(_,w),b=i.wQ(b,s,isNaN(o)?0:o,a),r.add(b,!1)}return t=s.Xd(0),n=h.R()/180,i.Jt(r,h,.1*t,!1),e.ri.clip(r,h,t,n,a)},i.wQ=function(e,t,r,n){return i.Fn(e,t,r,!0,0,n)},i.OS=function(t,i,r,n){var s=t.getType();if(1736==s)for(i=null!=i?i.Xd(0):0,s=0;s<n;s++)1!=e.hd.Yd(t,r[s],i)&&r[s].Rc();else{if(197!=s)throw e.i.N();for(s=0;s<n;s++)t.dP(r[s])||r[s].Rc()}},i.$k=function(t,i,r,n){if(32>r)for(var s=new e.Sa,o=0;o<r;o++)s.Cb(i[o]),t.$k(s,n).D(i[o]);else{var a=new e.de;for(a.re(3),a.HD(i,r),s=a.ub(3),o=0;o<r;o++)s.write(o,o);for(o=t.$k(a,n),t=o.ub(0),s=o.ub(3),n=e.h.construct(NaN,NaN),a=0;a<r;a++)i[a]=n;for(r=o.I(),o=0;o<r;o++)n=s.read(o),t.tc(2*o,i[n])}},i.Zk=function(t,i,r,n){if(32>r)for(var s=new e.Sa,o=0;o<r;o++)s.Cb(i[o]),t.Zk(s,n).D(i[o]);else{var a=new e.de;for(a.re(3),a.HD(i,r),s=a.ub(3),o=0;o<r;o++)s.write(o,o);for(o=t.Zk(a,n),t=o.ub(0),s=o.ub(3),n=e.h.construct(NaN,NaN),a=0;a<r;a++)i[a]=n;for(r=o.I(),o=0;o<r;o++)n=s.read(o),t.tc(2*o,i[n])}},i.pE=210,i}()}(Y||(Y={})),function(e){var t;(t=e.UL||(e.UL={}))[t.rightSide=1]="rightSide";var i=function(){function t(t,i,r){this.Bs=new e.h,void 0===t?this.Io=-1:(this.Bs.L(t),this.Io=i,this.Ka=r,this.nw=0)}return t.prototype.WJ=function(e){this.nw=e?1|this.nw:-2&this.nw},t.prototype.B=function(){return 0>this.Io},t.prototype.fz=function(){if(this.B())throw e.i.fa("invalid call");return new e.Sa(this.Bs.x,this.Bs.y)},t.prototype.Ua=function(){if(this.B())throw e.i.fa("invalid call");return this.Io},t.prototype.hz=function(){if(this.B())throw e.i.fa("invalid call");return this.Ka},t.prototype.Sz=function(){return!!(1&this.nw)},t.prototype.ey=function(e,t,i,r){this.Bs.x=e,this.Bs.y=t,this.Io=i,this.Ka=r},t}();e.$l=i}(Y||(Y={})),function(e){var t=function(){function t(){}return t.prototype.Uo=function(t,i){if(this.th.resize(0),this.Ii.length=0,this.tk=-1,t.xc(this.Ek),this.Ek.W(i,i),this.Ek.isIntersecting(this.Fb.Ca)){var r=t.getType();(this.vs=e.aa.yd(r))?(this.TH=t.ac(),this.SH=t.wc(),this.qa=i):this.qa=NaN,this.th.add(this.Fb.kf),this.Ii.push(this.Fb.Ca),this.Qs=this.Fb.Ur(this.Fb.kf)}else this.Qs=-1},t.prototype.Xi=function(e,t){this.th.resize(0),this.Ii.length=0,this.tk=-1,this.Ek.K(e),this.Ek.W(t,t),this.qa=NaN,this.Ek.isIntersecting(this.Fb.Ca)?(this.th.add(this.Fb.kf),this.Ii.push(this.Fb.Ca),this.Qs=this.Fb.Ur(this.Fb.kf),this.vs=!1):this.Qs=-1},t.prototype.next=function(){if(0==this.th.size)return-1;this.tk=this.Qs;var t=null,r=null,n=null,s=null;this.vs&&(t=new e.h,r=new e.h,n=new e.l);for(var o=!1;!o;){for(;-1!=this.tk;){var a=this.Fb.bz(this.Fb.fv(this.tk));if(a.isIntersecting(this.Ek)){if(!this.vs){o=!0;break}if(t.L(this.TH),r.L(this.SH),n.K(a),n.W(this.qa,this.qa),0<n.zy(t,r)){o=!0;break}}this.tk=this.Fb.nv(this.tk)}if(-1==this.tk){a=this.th.Fc();var l=this.Ii[this.Ii.length-1];for(null==s&&((s=[])[0]=new e.l,s[1]=new e.l,s[2]=new e.l,s[3]=new e.l),i.EJ(l,s),this.th.If(),--this.Ii.length,l=0;4>l;l++){var c=this.Fb.Lp(a,l);if(-1!=c&&0<this.Fb.WR(c)&&s[l].isIntersecting(this.Ek))if(this.vs){if(t.L(this.TH),r.L(this.SH),n.K(s[l]),n.W(this.qa,this.qa),0<n.zy(t,r)){var h=new e.l;h.K(s[l]),this.th.add(c),this.Ii.push(h)}}else(h=new e.l).K(s[l]),this.th.add(c),this.Ii.push(h)}if(0==this.th.size)return-1;this.tk=this.Fb.Ur(this.th.get(this.th.size-1))}}return this.Qs=this.Fb.nv(this.tk),this.tk},t.bP=function(i,r,n){var s=new t;return s.Fb=i,s.Ek=new e.l,s.th=new e.ia(0),s.Ii=[],s.Uo(r,n),s},t.aP=function(i,r,n){var s=new t;return s.Fb=i,s.Ek=new e.l,s.th=new e.ia(0),s.Ii=[],s.Xi(r,n),s},t.$O=function(i){var r=new t;return r.Fb=i,r.Ek=new e.l,r.th=new e.ia(0),r.Ii=[],r},t}();e.GY=t;var i=function(){function i(t,i){this.jf=new e.$c(11),this.Zh=new e.$c(5),this.ws=[],this.gw=new e.ia(0),this.Ca=new e.l,this.Nk(t,i)}return i.prototype.reset=function(e,t){this.jf.mj(!1),this.Zh.mj(!1),this.ws.length=0,this.gw.clear(!1),this.Nk(e,t)},i.prototype.vj=function(e,t){return this.zv(e,t,0,this.Ca,this.kf,!1,-1)},i.prototype.Jz=function(e,t,i){i=-1==i?this.kf:this.WF(i);var r=this.ca(i),n=this.oR(i);return this.zv(e,t,r,n,i,!1,-1)},i.prototype.ja=function(e){return this.jR(e)},i.prototype.GF=function(e){return this.bz(this.fv(e))},i.prototype.ca=function(e){return this.jv(e)},i.prototype.oR=function(t){var i=new e.l;i.K(this.Ca);var r=this.jv(t);t=this.QF(t);for(var n=0;n<2*r;n+=2){var s=e.O.truncate(3&t>>n);0==s?(i.v=.5*(i.v+i.C),i.G=.5*(i.G+i.H)):1==s?(i.C=.5*(i.v+i.C),i.G=.5*(i.G+i.H)):(2==s?i.C=.5*(i.v+i.C):i.v=.5*(i.v+i.C),i.H=.5*(i.G+i.H))}return i},i.prototype.WR=function(e){return this.Az(e)},i.prototype.vR=function(e,i){return t.bP(this,e,i)},i.prototype.MF=function(e,i){return t.aP(this,e,i)},i.prototype.getIterator=function(){return t.$O(this)},i.prototype.Nk=function(t,i){if(0>i||32<2*i)throw e.i.N("invalid height");this.BT=i,this.Ca.K(t),this.kf=this.jf.Ce(),this.jx(this.kf,0),this.ax(this.kf,0),this.NJ(this.kf,0),this.KJ(this.kf,0)},i.prototype.zv=function(t,r,n,s,o,a,l){if(!s.contains(r))return 0==n?-1:this.zv(t,r,0,this.Ca,this.kf,a,l);if(!a)for(var c=o;-1!=c;c=this.IR(c))this.jx(c,this.Az(c)+1);(c=new e.l).K(s),s=o;var h=[];for(h[0]=new e.l,h[1]=new e.l,h[2]=new e.l,h[3]=new e.l;n<this.BT&&this.iO(s);n++){i.EJ(c,h);for(var u=!1,p=0;4>p;p++)if(h[p].contains(r)){u=!0;var d=this.Lp(s,p);-1==d&&(d=this.rP(s,p)),this.jx(d,this.Az(d)+1),s=d,c.K(h[p]);break}if(!u)break}return this.sS(t,r,n,c,s,a,o,l)},i.prototype.sS=function(e,t,i,r,n,s,o,a){var l=this.NF(n);if(s){if(n==o)return a;this.SP(a),s=a}else s=this.tP(),this.NB(s,e),this.KW(this.fv(s),t);return this.mX(s,n),-1!=l?(this.hx(s,l),this.bx(l,s)):this.GJ(n,s),this.SB(n,s),this.ax(n,this.lv(n)+1),this.hO(n)&&this.MQ(i,r,n),s},i.prototype.SP=function(e){var t=this.WF(e),i=this.NF(t),r=this.OR(e),n=this.nv(e);this.Ur(t)==e?(-1!=n?this.hx(n,-1):this.SB(t,-1),this.GJ(t,n)):i==e?(this.bx(r,-1),this.SB(t,r)):(this.hx(n,r),this.bx(r,n)),this.hx(e,-1),this.bx(e,-1),this.ax(t,this.lv(t)-1)},i.EJ=function(e,t){var i=.5*(e.v+e.C),r=.5*(e.G+e.H);t[0].K(i,r,e.C,e.H),t[1].K(e.v,r,i,e.H),t[2].K(e.v,e.G,i,r),t[3].K(i,e.G,e.C,r)},i.prototype.hO=function(e){return 8==this.lv(e)&&!this.gG(e)},i.prototype.MQ=function(e,t,i){var r=this.Ur(i);do{var n=this.fv(r),s=this.Zh.T(r,0);n=this.bz(n),this.zv(s,n,e,t,i,!0,r),r=s=this.nv(r)}while(-1!=r)},i.prototype.iO=function(e){return 8<=this.lv(e)||this.gG(e)},i.prototype.gG=function(e){return-1!=this.Lp(e,0)||-1!=this.Lp(e,1)||-1!=this.Lp(e,2)||-1!=this.Lp(e,3)},i.prototype.rP=function(e,t){var i=this.jf.Ce();return this.OW(e,t,i),this.jx(i,0),this.ax(i,0),this.Pk(i,e),this.KJ(i,this.jv(e)+1),this.NJ(i,t<<2*this.jv(e)|this.QF(e)),i},i.prototype.tP=function(){var t=this.Zh.Ce();if(0<this.gw.size){var i=this.gw.Fc();this.gw.If()}else i=this.ws.length,this.ws.push(new e.l);return this.LW(t,i),t},i.prototype.Lp=function(e,t){return this.jf.T(e,t)},i.prototype.OW=function(e,t,i){this.jf.S(e,t,i)},i.prototype.Ur=function(e){return this.jf.T(e,4)},i.prototype.GJ=function(e,t){this.jf.S(e,4,t)},i.prototype.NF=function(e){return this.jf.T(e,5)},i.prototype.SB=function(e,t){this.jf.S(e,5,t)},i.prototype.QF=function(e){return this.jf.T(e,6)},i.prototype.NJ=function(e,t){this.jf.S(e,6,t)},i.prototype.lv=function(e){return this.jf.T(e,7)},i.prototype.Az=function(e){return this.jf.T(e,8)},i.prototype.ax=function(e,t){this.jf.S(e,7,t)},i.prototype.jx=function(e,t){this.jf.S(e,8,t)},i.prototype.IR=function(e){return this.jf.T(e,9)},i.prototype.Pk=function(e,t){this.jf.S(e,9,t)},i.prototype.jv=function(e){return this.jf.T(e,10)},i.prototype.KJ=function(e,t){this.jf.S(e,10,t)},i.prototype.jR=function(e){return this.Zh.T(e,0)},i.prototype.NB=function(e,t){this.Zh.S(e,0,t)},i.prototype.OR=function(e){return this.Zh.T(e,1)},i.prototype.nv=function(e){return this.Zh.T(e,2)},i.prototype.hx=function(e,t){this.Zh.S(e,1,t)},i.prototype.bx=function(e,t){this.Zh.S(e,2,t)},i.prototype.WF=function(e){return this.Zh.T(e,3)},i.prototype.mX=function(e,t){this.Zh.S(e,3,t)},i.prototype.fv=function(e){return this.Zh.T(e,4)},i.prototype.LW=function(e,t){this.Zh.S(e,4,t)},i.prototype.bz=function(e){return this.ws[e]},i.prototype.KW=function(e,t){this.ws[e].K(t)},i}();e.du=i}(Y||(Y={})),function(e){var t;(t=e.aL||(e.aL={}))[t.Outside=0]="Outside",t[t.Inside=1]="Inside",t[t.Border=2]="Border";var i=function(){function e(e,t){this.PT=t,this.Vh=e}return e.prototype.setColor=function(e,t){this.iH!=t&&e.flush(),this.iH=t},e.prototype.gF=function(e,t){for(var i=0;i<t;)for(var r=e[i++],n=e[i++],s=e[i++]*this.PT;r<n;r++)this.Vh[s+(r>>4)]|=this.iH<<2*(15&r)},e}();e.HY=i;var r=function(){function t(e,t,i){this.Vh=null,this.SA=this.Ik=this.cI=this.aI=this.Es=this.qH=this.Gf=this.Um=0,this.Ri=this.Jk=this.vl=null,this.Fz(e,t,i)}return t.create=function(i,r,n){if(!t.zE(i))throw e.i.N();return t.wP(i,r,n)},t.pW=function(t){switch(t){case 0:t=1024;break;case 1:t=16384;break;case 2:t=262144;break;default:throw e.i.fa("Internal Error")}return t},t.zE=function(e){return!(e.B()||1607!=e.getType()&&1736!=e.getType())},t.prototype.rQ=function(t,i){i=i.Ga();for(var r=new e.h,n=new e.h;i.$a();)for(;i.Ha();){var s=i.ha();if(322!=s.getType())throw e.i.fa("Internal Error");t.Eh(s.ac(),r),t.Eh(s.wc(),n),this.Ri.jy(r.x,r.y,n.x,n.y)}this.Ri.iJ(e.Px.Cx)},t.prototype.sQ=function(){throw e.i.fa("Internal Error")},t.prototype.Ry=function(t,i){for(var r=1;4>r;r++)t.jy(i[r-1].x,i[r-1].y,i[r].x,i[r].y);t.jy(i[3].x,i[3].y,i[0].x,i[0].y),this.Ri.iJ(e.Px.Cx)},t.prototype.rK=function(t,i,r){for(var n=[null,null,null,null],s=0;s<n.length;s++)n[s]=new e.h;i=i.Ga(),r=this.Jk.dY(r)+1.5,s=new e.h;for(var o=new e.h,a=new e.h,l=new e.h,c=new e.h,h=new e.l,u=new e.h;i.$a();){var p=!1,d=!0;for(u.ma(0,0);i.Ha();){var f=i.ha();if(l.x=f.sa,l.y=f.na,c.x=f.pa,c.y=f.la,h.Oa(),h.Zb(l.x,l.y),h.Lk(c.x,c.y),this.vl.HG(h)){this.Jk.Eh(c,c),d?(this.Jk.Eh(l,l),u.L(l),d=!1):l.L(u),s.uc(c,l);var y=.5>(f=s.length());0==f?s.ma(1,0):(y||u.L(c),s.scale(r/f),o.ma(-s.y,s.x),a.ma(s.y,-s.x),l.sub(s),c.add(s),n[0].add(l,o),n[1].add(l,a),n[2].add(c,a),n[3].add(c,o),y?p=!0:this.Ry(t,n))}else p&&(this.Ry(t,n),p=!1),d=!0}p&&this.Ry(t,n)}},t.prototype.sC=function(t){return e.O.truncate(t*this.qH+this.aI)},t.prototype.tC=function(t){return e.O.truncate(t*this.Es+this.cI)},t.wP=function(e,i,r){return new t(e,i,r)},t.prototype.Fz=function(t,r,n){this.Gf=Math.max(e.O.truncate(2*Math.sqrt(n)+.5),64),this.Um=e.O.truncate((2*this.Gf+31)/32),this.vl=new e.l,this.Ik=r,n=0;for(var s=this.Gf,o=this.Um;8<=s;)n+=s*o,s=e.O.truncate(s/2),o=e.O.truncate((2*s+31)/32);this.Vh=e.O.lg(n,0),this.Ri=new e.Px,n=new i(this.Vh,this.Um,this),this.Ri.AX(this.Gf,this.Gf,n),t.A(this.vl),this.vl.W(r,r),s=new e.l;var a=r*(o=e.l.construct(1,1,this.Gf-2,this.Gf-2)).R();switch(r*=o.ca(),s.K(this.vl.sf(),Math.max(a,this.vl.R()),Math.max(r,this.vl.ca())),this.SA=this.Ik,this.Jk=new e.Dd,this.Jk.pS(s,o),new e.Dd,t.getType()){case 550:n.setColor(this.Ri,2),this.sQ();break;case 1607:n.setColor(this.Ri,2),this.rK(this.Ri,t,this.SA);break;case 1736:n.setColor(this.Ri,1),this.rQ(this.Jk,t),n.setColor(this.Ri,2),this.rK(this.Ri,t,this.SA)}this.qH=this.Jk.bb,this.Es=this.Jk.ab,this.aI=this.Jk.Gb,this.cI=this.Jk.Lb,this.XN()},t.prototype.XN=function(){this.Ri.flush();for(var t=0,i=this.Gf*this.Um,r=this.Gf,n=e.O.truncate(this.Gf/2),s=this.Um,o=e.O.truncate((2*n+31)/32);8<r;){for(r=0;r<n;r++)for(var a=2*r,l=2*r+1,c=0;c<n;c++){var h=2*c,u=2*c+1,p=h>>4;h=2*(15&h);var d=u>>4;u=2*(15&u);var f=this.Vh[t+s*a+p]>>h&3;f|=this.Vh[t+s*a+d]>>u&3,f|=this.Vh[t+s*l+p]>>h&3,f|=this.Vh[t+s*l+d]>>u&3,this.Vh[i+o*r+(c>>4)]|=f<<2*(15&c)}r=n,s=o,t=i,n=e.O.truncate(r/2),o=e.O.truncate((2*n+31)/32),i=t+s*r}},t.prototype.So=function(e,t){return this.vl.contains(e,t)?(e=this.sC(e),t=this.tC(t),0>e||e>=this.Gf||0>t||t>=this.Gf||0==(t=this.Vh[this.Um*t+(e>>4)]>>2*(15&e)&3)?0:1==t?1:2):0},t.prototype.Ro=function(t){if(!t.Ea(this.vl))return 0;var i=this.sC(t.v),r=this.sC(t.C),n=this.tC(t.G);if(t=this.tC(t.H),0>i&&(i=0),0>n&&(n=0),r>=this.Gf&&(r=this.Gf-1),t>=this.Gf&&(t=this.Gf-1),i>r||n>t)return 0;for(var s=Math.max(r-i,1)*Math.max(t-n,1),o=0,a=this.Um,l=this.Gf,c=0;;){if(32>s||16>l){for(s=n;s<=t;s++)for(var h=i;h<=r;h++)if(1<(c=this.Vh[o+a*s+(h>>4)]>>2*(15&h)&3))return 2;if(0==c)return 0;if(1==c)return 1}o+=a*l,l=e.O.truncate(l/2),a=e.O.truncate((2*l+31)/32),i=e.O.truncate(i/2),n=e.O.truncate(n/2),r=e.O.truncate(r/2),t=e.O.truncate(t/2),s=Math.max(r-i,1)*Math.max(t-n,1)}},t.prototype.RR=function(){return this.Gf*this.Um},t}();e.Nx=r}(Y||(Y={})),function(e){var t;(t=e.VL||(e.VL={}))[t.contains=1]="contains",t[t.within=2]="within",t[t.equals=3]="equals",t[t.disjoint=4]="disjoint",t[t.touches=8]="touches",t[t.crosses=16]="crosses",t[t.overlaps=32]="overlaps",t[t.unknown=0]="unknown",t[t.intersects=1073741824]="intersects";var i=function(){function e(){}return e.construct=function(t,i,r,n,s,o,a,l){var c=new e;return c.pw=t,c.Mm=i,c.Kj=r,c.Si=n,c.BH=s,c.SY=o,c.TY=a,c.UY=l,c},e}();e.Vt=function(){function t(){}return t.CD=function(i,r,n){if(t.wy(i)){var s=e.ta.kj(r,i,!1);r=!1,e.Uk.CE(i)&&(r=r||i.lu(s,n)),1736!=(s=i.getType())&&1607!=s||!e.Uk.AE(i)||0==n||(r=r||i.fj(n)),1736!=s&&1607!=s||!e.Uk.BE(i)||0==n||r||i.hM()}},t.wy=function(t){return e.Uk.CE(t)||e.Uk.AE(t)||e.Uk.BE(t)},t}();var r=function(){function t(){this.rh=[]}return t.zB=function(i,r,n,s,o){var a=i.getType(),l=r.getType();if(197==a){if(197==l)return t.tW(i,r,n,s);if(33==l)return 2==s?s=1:1==s&&(s=2),t.hJ(r,i,n,s)}else if(33==a){if(197==l)return t.hJ(i,r,n,s);if(33==l)return t.vW(i,r,n,s)}if(i.B()||r.B())return 4==s;var c=new e.l;i.A(c);var h=new e.l;r.A(h);var u=new e.l;if(u.K(c),u.Zb(h),n=e.ta.Wd(n,u,!1),t.dk(c,h,n))return 4==s;switch(c=!1,e.Vk.yd(a)&&((a=new e.Ta(i.description)).oc(i,!0),i=a,a=1607),e.Vk.yd(l)&&((l=new e.Ta(r.description)).oc(r,!0),r=l,l=1607),197!=a&&197!=l?(i.Db()<r.Db()||33==a&&550==l)&&(2==s?s=1:1==s&&(s=2)):1736!=a&&197!=l&&(2==s?s=1:1==s&&(s=2)),a){case 1736:switch(l){case 1736:c=t.rt(i,r,n,s,o);break;case 1607:c=t.$m(i,r,n,s,o);break;case 33:c=t.qt(i,r,n,s);break;case 550:c=t.pt(i,r,n,s,o);break;case 197:c=t.GI(i,r,n,s,o)}break;case 1607:switch(l){case 1736:c=t.$m(r,i,n,s,o);break;case 1607:c=t.gB(i,r,n,s,o);break;case 33:c=t.tt(i,r,n,s,o);break;case 550:c=t.st(i,r,n,s,o);break;case 197:c=t.MI(i,r,n,s)}break;case 33:switch(l){case 1736:c=t.qt(r,i,n,s);break;case 1607:c=t.tt(r,i,n,s,o);break;case 550:c=t.lt(r,i,n,s)}break;case 550:switch(l){case 1736:c=t.pt(r,i,n,s,o);break;case 1607:c=t.st(r,i,n,s,o);break;case 550:c=t.ZA(i,r,n,s,o);break;case 33:c=t.lt(i,r,n,s);break;case 197:c=t.hI(i,r,n,s)}break;case 197:switch(l){case 1736:c=t.GI(r,i,n,s,o);break;case 1607:c=t.MI(r,i,n,s);break;case 550:c=t.hI(r,i,n,s)}}return c},t.tW=function(i,r,n,s){if(i.B()||r.B())return 4==s;var o=new e.l,a=new e.l,l=new e.l;switch(i.A(o),r.A(a),l.K(o),l.Zb(a),i=e.ta.Wd(n,l,!1),s){case 4:return t.dk(o,a,i);case 2:return t.jF(a,o,i);case 1:return t.jF(o,a,i);case 3:return t.ek(o,a,i);case 8:return t.cQ(o,a,i);case 32:return t.bQ(o,a,i);case 16:return t.aQ(o,a,i)}return!1},t.hJ=function(i,r,n,s){if(i.B()||r.B())return 4==s;i=i.D();var o=new e.l,a=new e.l;switch(r.A(o),a.K(i),a.Zb(o),r=e.ta.Wd(n,a,!1),s){case 4:return t.Rw(i,o,r);case 2:return t.eB(i,o,r);case 1:return t.RU(i,o,r);case 3:return t.vI(i,o,r);case 8:return t.dB(i,o,r)}return!1},t.vW=function(i,r,n,s){if(i.B()||r.B())return 4==s;i=i.D(),r=r.D();var o=new e.l;switch(o.K(i),o.Zb(r),n=e.ta.Wd(n,o,!1),s){case 4:return t.SU(i,r,n);case 2:return t.uI(r,i,n);case 1:return t.uI(i,r,n);case 3:return t.wI(i,r,n)}return!1},t.rt=function(e,i,r,n,s){switch(n){case 4:return t.kV(e,i,r);case 2:return t.Sw(i,e,r,s);case 1:return t.Sw(e,i,r,s);case 3:return t.nV(e,i,r);case 8:return t.vV(e,i,r);case 32:return t.qV(e,i,r,s)}return!1},t.$m=function(e,i,r,n,s){switch(n){case 4:return t.lV(e,i,r);case 1:return t.fB(e,i,r,s);case 8:return t.wV(e,i,r,s);case 16:return t.gV(e,i,r)}return!1},t.qt=function(e,i,r,n){switch(n){case 4:return t.jV(e,i,r);case 1:return t.dV(e,i,r);case 8:return t.uV(e,i,r)}return!1},t.pt=function(e,i,r,n){switch(n){case 4:return t.iV(e,i,r);case 1:return t.cV(e,i,r);case 8:return t.tV(e,i,r);case 16:return t.fV(e,i,r)}return!1},t.GI=function(e,i,r,n,s){if(t.hV(e,i,r))return 4==n;if(4==n)return!1;switch(n){case 2:return t.xV(e,i,r);case 1:return t.bV(e,i,r);case 3:return t.mV(e,i,r);case 8:return t.sV(e,i,r,s);case 32:return t.pV(e,i,r,s);case 16:return t.eV(e,i,r,s)}return!1},t.gB=function(e,i,r,n){switch(n){case 4:return t.GV(e,i,r);case 2:return t.KI(i,e,r);case 1:return t.KI(e,i,r);case 3:return t.IV(e,i,r);case 8:return t.NI(e,i,r);case 32:return t.MV(e,i,r);case 16:return t.LI(e,i,r)}return!1},t.tt=function(e,i,r,n){switch(n){case 4:return t.FV(e,i,r);case 1:return t.AV(e,i,r);case 8:return t.QV(e,i,r)}return!1},t.st=function(e,i,r,n){switch(n){case 4:return t.EV(e,i,r);case 1:return t.zV(e,i,r);case 8:return t.PV(e,i,r);case 16:return t.CV(e,i,r)}return!1},t.MI=function(e,i,r,n){if(t.DV(e,i,r))return 4==n;if(4==n)return!1;switch(n){case 2:return t.RV(e,i,r);case 1:return t.yV(e,i,r);case 3:return t.HV(e,i,r);case 8:return t.OV(e,i,r);case 32:return t.LV(e,i,r);case 16:return t.BV(e,i,r)}return!1},t.ZA=function(e,i,r,n){switch(n){case 4:return t.gU(e,i,r);case 2:return t.eI(i,e,r);case 1:return t.eI(e,i,r);case 3:return t.iU(e,i,r);case 32:return t.oU(e,i,r)}return!1},t.lt=function(e,i,r,n){switch(n){case 4:return t.fI(e,i,r);case 2:return t.sU(e,i,r);case 1:return t.dU(e,i,r);case 3:return t.Nw(e,i,r)}return!1},t.hI=function(e,i,r,n){switch(n){case 4:return t.fU(e,i,r);case 2:return t.rU(e,i,r);case 1:return t.cU(e,i,r);case 3:return t.hU(e,i,r);case 8:return t.qU(e,i,r);case 16:return t.eU(e,i,r)}return!1},t.nV=function(i,r,n){var s=new e.l,o=new e.l;return i.A(s),r.A(o),!!t.ek(s,o,n)&&4!=(s=t.qc(i,r,!1))&&1!=s&&2!=s&&(!!t.dI(i,r,n)||(s=i.Qb(),o=r.Qb(),!(Math.abs(s-o)>4*Math.max(i.I(),r.I())*n)&&t.Wz(i,r,n,!0)))},t.kV=function(e,i,r){var n=t.qc(e,i,!0);return 4==n||1!=n&&2!=n&&1073741824!=n&&t.EI(e,i,r)},t.vV=function(e,i,r){var n=t.qc(e,i,!1);return 4!=n&&1!=n&&2!=n&&t.II(e,i,r,null)},t.qV=function(e,i,r,n){var s=t.qc(e,i,!1);return 4!=s&&1!=s&&2!=s&&t.FI(e,i,r,n)},t.Sw=function(i,r,n,s){var o=new e.l,a=new e.l;return i.A(o),r.A(a),!!t.zc(o,a,n)&&4!=(o=t.qc(i,r,!1))&&2!=o&&(1==o||t.BI(i,r,n,s))},t.lV=function(e,i,r){var n=t.qc(e,i,!0);return 4==n||1!=n&&1073741824!=n&&t.EI(e,i,r)},t.wV=function(e,i,r,n){var s=t.qc(e,i,!1);return 4!=s&&1!=s&&t.JI(e,i,r,n)},t.gV=function(e,i,r){var n=t.qc(e,i,!1);return 4!=n&&1!=n&&t.DI(e,i,r,null)},t.fB=function(i,r,n,s){var o=new e.l,a=new e.l;return i.A(o),r.A(a),!!t.zc(o,a,n)&&4!=(o=t.qc(i,r,!1))&&(1==o||t.CI(i,r,n,s))},t.jV=function(t,i,r){return 0==e.hd.KG(t,i,r)},t.uV=function(e,i,r){return i=i.D(),t.HI(e,i,r)},t.dV=function(e,i,r){return i=i.D(),t.AI(e,i,r)},t.iV=function(i,r,n){var s=t.qc(i,r,!1);if(4==s)return!0;if(1==s)return!1;s=new e.l,i.A(s),s.W(n,n);for(var o=new e.h,a=0;a<r.I();a++)if(r.D(a,o),s.contains(o)){var l=e.hd.Yd(i,o,n);if(1==l||2==l)return!1}return!0},t.tV=function(t,i,r){var n=this.qc(t,i,!1);if(4==n||1==n)return!1;n=new e.l,t.A(n),n.W(r,r);for(var s=!1,o=t,a=!1,l=0;l<i.I();l++){var c=i.Na(l);if(n.contains(c))if(2==(c=e.hd.Yd(o,c,r)))s=!0;else if(1==c)return!1;a||(!e.Dg.Ml(t,i.I()-1)||null!=t.Bb&&null!=t.Bb.Fb?o=t:(o=new e.Da,t.copyTo(o),o.fj(1)),a=!0)}return!!s},t.fV=function(t,i,r){var n=this.qc(t,i,!1);if(4==n||1==n)return!1;var s=new e.l;n=new e.l;var o=new e.l;t.A(s),i.A(o),n.K(s),n.W(r,r),o=s=!1;for(var a=t,l=!1,c=0;c<i.I();c++){var h=i.Na(c);if(n.contains(h)?0==(h=e.hd.Yd(a,h,r))?o=!0:1==h&&(s=!0):o=!0,s&&o)return!0;l||(!e.Dg.Ml(t,i.I()-1)||null!=t.Bb&&null!=t.Bb.Fb?a=t:(a=new e.Da,t.copyTo(a),a.fj(1)),l=!0)}return!1},t.cV=function(t,i,r){var n=new e.l,s=new e.l;if(t.A(n),i.A(s),!this.zc(n,s,r))return!1;if(4==(s=this.qc(t,i,!1)))return!1;if(1==s)return!0;s=!1;for(var o=t,a=!1,l=0;l<i.I();l++){var c=i.Na(l);if(!n.contains(c))return!1;if(1==(c=e.hd.Yd(o,c,r)))s=!0;else if(0==c)return!1;a||(!e.Dg.Ml(t,i.I()-1)||null!=t.Bb&&null!=t.Bb.Fb?o=t:(o=new e.Da,t.copyTo(o),o.fj(1)),a=!0)}return s},t.mV=function(i,r,n){var s=new e.l,o=new e.l;return i.A(s),r.A(o),!!t.ek(s,o,n)&&((s=new e.Da).ad(r,!1),t.Wz(i,s,n,!0))},t.hV=function(i,r,n){var s=t.qc(i,r,!1);if(4==s)return!0;if(1==s||2==s)return!1;var o=new e.l;if(s=new e.l,i.A(o),r.A(s),t.zc(s,o,n))return!1;if(o=new e.h,s.dn(o),0!=(r=e.hd.Yd(i,o,n)))return!1;if(s.$I(o),0!=(r=e.hd.Yd(i,o,n)))return!1;if(s.en(o),0!=(r=e.hd.Yd(i,o,n)))return!1;if(s.cJ(o),0!=(r=e.hd.Yd(i,o,n)))return!1;r=i.ub(0),(o=new e.l).K(s),o.W(n,n);for(var a=0,l=i.I();a<l;a++){var c=r.read(2*a),h=r.read(2*a+1);if(o.contains(c,h))return!1}return!t.TG(i,s,n)},t.sV=function(i,r,n,s){var o=t.qc(i,r,!1);if(4==o||1==o||2==o)return!1;o=new e.l;var a=new e.l;return i.A(o),r.A(a),!t.zc(a,o,n)&&(a.R()<=n&&a.ca()<=n?(r=r.Ip(),t.HI(i,r,n)):a.R()<=n||a.ca()<=n?(o=new e.Ta,a=new e.Sa,r.Hf(0,a),o.nf(a),r.Hf(2,a),o.lineTo(a),t.JI(i,o,n,s)):((o=new e.Da).ad(r,!1),t.II(i,o,n,s)))},t.pV=function(i,r,n,s){var o=t.qc(i,r,!1);if(4==o||1==o||2==o)return!1;o=new e.l;var a=new e.l;return i.A(o),r.A(a),!(t.zc(a,o,n)||a.R()<=n||a.ca()<=n)&&((o=new e.Da).ad(r,!1),t.FI(i,o,n,s))},t.xV=function(i,r,n){var s=new e.l,o=new e.l;return i.A(s),r.A(o),t.zc(o,s,n)},t.bV=function(i,r,n){var s=new e.l,o=new e.l;return i.A(s),r.A(o),!!t.zc(s,o,n)&&4!=(s=t.qc(i,r,!1))&&2!=s&&(1==s||(o.R()<=n&&o.ca()<=n?(r=r.Ip(),t.AI(i,r,n)):o.R()<=n||o.ca()<=n?(o=new e.Ta,s=new e.Sa,r.Hf(0,s),o.nf(s),r.Hf(2,s),o.lineTo(s),t.CI(i,o,n,null)):((o=new e.Da).ad(r,!1),t.BI(i,o,n,null))))},t.eV=function(i,r,n,s){var o=new e.l,a=new e.l;return i.A(o),r.A(a),!(t.zc(a,o,n)||a.ca()>n&&a.R()>n||a.ca()<=n&&a.R()<=n)&&(o=new e.Ta,a=new e.Sa,r.Hf(0,a),o.nf(a),r.Hf(2,a),o.lineTo(a),t.DI(i,o,n,s))},t.IV=function(i,r,n){var s=new e.l,o=new e.l;return i.A(s),r.A(o),!(!t.ek(s,o,n)||4==t.qc(i,r,!1))&&(!!t.dI(i,r,n)||t.Wz(i,r,n,!1))},t.GV=function(t,i,r){return 4==this.qc(t,i,!1)||!!new e.Zl(t,i,r,!0).next()&&!this.UG(t,i,r)},t.NI=function(i,r,n){if(4==t.qc(i,r,!1))return!1;var s=new e.be(0);if(0!=t.Xz(i,r,n,s))return!1;for(var o=new e.de,a=0;a<s.size;a+=2){var l=s.read(a),c=s.read(a+1);o.Bu(l,c)}return i=i.mg(),r=r.mg(),i.Fd(r,0,r.I()),t.Mw(i,o,n)},t.LI=function(i,r,n){if(4==t.qc(i,r,!1))return!1;var s=new e.be(0);if(0!=t.Xz(i,r,n,s))return!1;for(var o=new e.de,a=0;a<s.size;a+=2){var l=s.read(a),c=s.read(a+1);o.Bu(l,c)}return i=i.mg(),r=r.mg(),i.Fd(r,0,r.I()),!t.Mw(i,o,n)},t.MV=function(e,i,r){return 4!=t.qc(e,i,!1)&&t.WG(e,i,r)},t.KI=function(i,r,n){var s=new e.l,o=new e.l;return i.A(s),r.A(o),!(!t.zc(s,o,n)||4==t.qc(i,r,!1))&&t.ym(r,i,n,!1)},t.FV=function(e,i,r){return 4==t.qc(e,i,!1)||(i=i.D(),!t.Yz(e,i,r))},t.QV=function(e,i,r){return 4!=t.qc(e,i,!1)&&(i=i.D(),t.Zz(e,i,r))},t.AV=function(e,i,r){return 4!=t.qc(e,i,!1)&&(i=i.D(),t.SG(e,i,r))},t.EV=function(e,i,r){return 4==t.qc(e,i,!1)||!t.VG(e,i,r,!1)},t.PV=function(t,i,r){if(4==this.qc(t,i,!1))return!1;var n=t.Ga(),s=new e.l,o=new e.l,a=new e.l;t.A(s),i.A(o),s.W(r,r),o.W(r,r),a.K(s),a.Ea(o),s=null;var l=t.Bb;if(null!=l){var c=l.Fb;s=l.zo,null==c&&(c=l=e.ta.jj(t,a))}else c=l=e.ta.jj(t,a);var h=c.getIterator(),u=null;null!=s&&(u=s.getIterator());var p=new e.h,d=new e.h,f=!1,y=r*r;for(s=new e.pn(i.I()),l=0;l<i.I();l++)s.write(l,0);for(l=0;l<i.I();l++)if(i.D(l,p),a.contains(p)){if(o.K(p.x,p.y,p.x,p.y),null!=u&&(u.Xi(o,r),-1==u.next()))continue;h.Xi(o,r);for(var m=h.next();-1!=m;m=h.next())if(n.Vb(c.ja(m)),(m=n.ha()).hc(m.fe(p,!1),d),e.h.yc(p,d)<=y){s.write(l,1),f=!0;break}}if(!f)return!1;for(t=t.mg(),n=new e.de,o=new e.h,l=0;l<i.I();l++)0!=s.read(l)&&(i.D(l,o),n.Bu(o.x,o.y));return this.Mw(t,n,r)},t.CV=function(t,i,r){if(4==this.qc(t,i,!1))return!1;var n=t.Ga(),s=new e.l,o=new e.l,a=new e.l;t.A(s),i.A(o),s.W(r,r),o.W(r,r),a.K(s),a.Ea(o),s=null;var l=t.Bb;if(null!=l){var c=l.Fb;s=l.zo,null==c&&(c=l=e.ta.jj(t,a))}else c=l=e.ta.jj(t,a);var h=c.getIterator(),u=null;null!=s&&(u=s.getIterator());var p=new e.h,d=new e.h,f=!1,y=!1,m=r*r;for(s=new e.pn(i.I()),l=0;l<i.I();l++)s.write(l,0);for(l=0;l<i.I();l++)if(i.D(l,p),a.contains(p)){if(o.K(p.x,p.y,p.x,p.y),null!=u&&(u.Xi(o,r),-1==u.next())){y=!0;continue}h.Xi(o,r);for(var g=!1,v=h.next();-1!=v;v=h.next())if(n.Vb(c.ja(v)),(v=n.ha()).hc(v.fe(p,!1),d),e.h.yc(p,d)<=m){s.write(l,1),g=f=!0;break}g||(y=!0)}else y=!0;if(!f||!y)return!1;for(t=t.mg(),n=new e.de,o=new e.h,l=0;l<i.I();l++)0!=s.read(l)&&(i.D(l,o),n.Bu(o.x,o.y));return!this.Mw(t,n,r)},t.zV=function(i,r,n){var s=new e.l,o=new e.l;return i.A(s),r.A(o),!(!t.zc(s,o,n)||4==t.qc(i,r,!1)||!t.VG(i,r,n,!0)||(i=i.mg(),t.gI(i,r,n)))},t.HV=function(i,r,n){var s=new e.l,o=new e.l;return i.A(s),r.A(o),!(o.ca()>n&&o.R()>n)&&t.ek(s,o,n)},t.DV=function(i,r,n){var s=new e.l,o=new e.l;return i.A(s),r.A(o),!t.zc(o,s,n)&&!t.TG(i,o,n)},t.OV=function(i,r,n){var s=new e.l,o=new e.l;if(i.A(s),r.A(o),o.ca()<=n&&o.R()<=n)return o=r.Ip(),t.Zz(i,o,n);if(o.ca()<=n||o.R()<=n)return o=new e.Ta,s=new e.Sa,r.Hf(0,s),o.nf(s),r.Hf(2,s),o.lineTo(s),t.NI(i,o,n);i=i.Ga(),r=new e.l,s=new e.l,r.K(o),s.K(o),r.W(-n,-n),s.W(n,n),o=!1;for(var a=new e.l,l=new e.l;i.$a();)for(;i.Ha();){if(i.ha().A(a),l.K(r),l.Ea(a),!l.B()&&(l.ca()>n||l.R()>n))return!1;l.K(s),l.Ea(a),l.B()||(o=!0)}return o},t.LV=function(i,r,n){var s=new e.l,o=new e.l;return i.A(s),r.A(o),!(t.zc(s,o,n)||t.zc(o,s,n)||t.zc(o,s,n)||o.ca()>n&&o.R()>n||o.ca()<=n&&o.R()<=n)&&(s=new e.Ta,o=new e.Sa,r.Hf(0,o),s.nf(o),r.Hf(2,o),s.lineTo(o),t.WG(i,s,n))},t.RV=function(i,r,n){var s=new e.l,o=new e.l;if(i.A(s),r.A(o),!t.zc(o,s,n)||o.ca()<=n&&o.R()<=n)return!1;if(o.ca()<=n||o.R()<=n)return t.zc(o,s,n);i=i.Ga(),(r=new e.l).K(o),r.W(-n,-n),o=!1,s=new e.l;for(var a=new e.l;i.$a();)for(;i.Ha();)i.ha().A(s),r.hm(s)?o=!0:(a.K(r),a.Ea(s),!a.B()&&(a.ca()>n||a.R()>n)&&(o=!0));return o},t.yV=function(i,r,n){var s=new e.l,o=new e.l;return r.A(o),i.A(s),!(!t.zc(s,o,n)||o.ca()>n&&o.R()>n)&&(o.ca()<=n&&o.R()<=n?(r=r.Ip(),t.SG(i,r,n)):(s=new e.Ta,o=new e.Sa,r.Hf(0,o),s.nf(o),r.Hf(2,o),s.lineTo(o),t.ym(s,i,n,!1)))},t.BV=function(i,r,n){var s=new e.l,o=new e.l;if(i.A(s),r.A(o),t.zc(o,s,n)||o.ca()<=n&&o.R()<=n)return!1;if(o.ca()<=n||o.R()<=n)return s=new e.Ta,o=new e.Sa,r.Hf(0,o),s.nf(o),r.Hf(2,o),s.lineTo(o),t.LI(i,s,n);i=i.Ga(),r=new e.l,(s=new e.l).K(o),r.K(o),s.W(-n,-n),r.W(n,n);for(var a=o=!1,l=new e.l,c=new e.l;i.$a();)for(;i.Ha();)if(i.ha().A(l),a||r.contains(l)||(a=!0),o||(c.K(s),c.Ea(l),!c.B()&&(c.ca()>n||c.R()>n)&&(o=!0)),o&&a)return!0;return!1},t.iU=function(i,r,n){var s=new e.l,o=new e.l;return i.A(s),r.A(o),!!t.ek(s,o,n)&&(!!t.jU(i,r,n)||t.YA(i,r,n,!1,!0,!1))},t.gU=function(e,i,r){return!t.gI(e,i,r)},t.oU=function(e,i,r){return t.YA(e,i,r,!1,!1,!0)},t.eI=function(i,r,n){var s=new e.l,o=new e.l;return i.A(s),r.A(o),!!t.zc(s,o,n)&&t.YA(r,i,n,!0,!1,!1)},t.Mw=function(t,i,r){r*=r;for(var n=new e.h,s=new e.h,o=0;o<i.I();o++){i.D(o,s);for(var a=!1,l=0;l<t.I();l++)if(t.D(l,n),e.h.yc(n,s)<=r){a=!0;break}if(!a)return!1}return!0},t.Nw=function(i,r,n){var s=new e.l,o=new e.l;return i.A(s),r.A(o),t.ek(s,o,n)},t.fI=function(e,i,r){return i=i.D(),t.kt(e,i,r)},t.sU=function(e,i,r){return t.Nw(e,i,r)},t.dU=function(e,i,r){return!t.fI(e,i,r)},t.hU=function(i,r,n){var s=new e.l,o=new e.l;return i.A(s),r.A(o),!(o.ca()>n||o.R()>n)&&t.ek(s,o,n)},t.fU=function(i,r,n){var s=new e.l,o=new e.l;if(i.A(s),r.A(o),t.zc(o,s,n))return!1;for((r=new e.l).K(o),r.W(n,n),n=new e.h,o=0;o<i.I();o++)if(i.D(o,n),r.contains(n))return!1;return!0},t.qU=function(t,i,r){var n=new e.l,s=new e.l,o=new e.l;if(i.A(n),n.ca()<=r&&n.R()<=r)return!1;if(n.ca()<=r||n.R()<=r){i=new e.h;var a=!1;s.K(n),o.K(n),s.W(r,r),n.ca()>r?o.W(0,-r):o.W(-r,0);for(var l=0;l<t.I();l++)if(t.D(l,i),s.contains(i)){if(n.ca()>r){if(i.y>o.G&&i.y<o.H)return!1}else if(i.x>o.v&&i.x<o.C)return!1;a=!0}return a}for(s.K(n),o.K(n),s.W(r,r),o.W(-r,-r),i=new e.h,a=!1,l=0;l<t.I();l++)if(t.D(l,i),s.contains(i)){if(o.hm(i))return!1;a=!0}return a},t.rU=function(i,r,n){var s=new e.l,o=new e.l;if(i.A(s),r.A(o),!t.zc(o,s,n))return!1;if(o.ca()<=n&&o.R()<=n)return t.ek(s,o,n);if(o.ca()<=n||o.R()<=n){r=!1,s=new e.l;var a=new e.l;s.K(o),a.K(o),o.ca()>n?s.W(0,-n):s.W(-n,0),a.W(n,n);for(var l=new e.h,c=0;c<i.I();c++){if(i.D(c,l),!a.contains(l))return!1;o.ca()>n?l.y>s.G&&l.y<s.H&&(r=!0):l.x>s.v&&l.x<s.C&&(r=!0)}return r}for(r=!1,s=new e.l,a=new e.l,s.K(o),a.K(o),s.W(-n,-n),a.W(n,n),l=new e.h,c=0;c<i.I();c++){if(i.D(c,l),!a.contains(l))return!1;s.hm(l)&&(r=!0)}return r},t.cU=function(i,r,n){var s=new e.l,o=new e.l;return i.A(s),r.A(o),!(!t.zc(s,o,n)||o.ca()>n||o.R()>n||(r=r.Ip(),t.kt(i,r,n)))},t.eU=function(i,r,n){var s=new e.l,o=new e.l;if(i.A(s),r.A(o),t.zc(o,s,n)||o.ca()<=n&&o.R()<=n)return!1;if(o.ca()<=n||o.R()<=n){r=new e.l,s=new e.l,r.K(o),o.ca()>n?r.W(0,-n):r.W(-n,0),s.K(o),s.W(n,n);for(var a=new e.h,l=!1,c=!1,h=0;h<i.I();h++)if(i.D(h,a),l||(o.ca()>n?a.y>r.G&&a.y<r.H&&(l=!0):a.x>r.v&&a.x<r.C&&(l=!0)),c||s.contains(a)||(c=!0),l&&c)return!0;return!1}for(r=new e.l,s=new e.l,r.K(o),r.W(-n,-n),s.K(o),s.W(n,n),a=new e.h,c=l=!1,h=0;h<i.I();h++)if(i.D(h,a),!l&&r.hm(a)&&(l=!0),c||s.contains(a)||(c=!0),l&&c)return!0;return!1},t.wI=function(t,i,r){return e.h.yc(t,i)<=r*r},t.SU=function(t,i,r){return e.h.yc(t,i)>r*r},t.uI=function(e,i,r){return t.wI(e,i,r)},t.vI=function(i,r,n){var s=new e.l;return s.K(i),t.ek(s,r,n)},t.Rw=function(t,i,r){var n=new e.l;return n.K(i),n.W(r,r),!n.contains(t)},t.dB=function(t,i,r){if(i.ca()<=r&&i.R()<=r)return!1;var n=new e.l,s=new e.l;if(n.K(i),n.W(r,r),!n.contains(t))return!1;if(i.ca()<=r||i.R()<=r){if(s.K(i),i.ca()>r?s.W(0,-r):s.W(-r,0),i.ca()>r){if(t.y>s.G&&t.y<s.H)return!1}else if(t.x>s.v&&t.x<s.C)return!1;return!0}return s.K(i),s.W(-r,-r),!s.hm(t)},t.eB=function(t,i,r){if(i.ca()<=r&&i.R()<=r)return!0;if(i.ca()<=r||i.R()<=r){var n=new e.l;n.K(i),i.ca()>r?n.W(0,-r):n.W(-r,0);var s=!1;return i.ca()>r?t.y>n.G&&t.y<n.H&&(s=!0):t.x>n.v&&t.x<n.C&&(s=!0),s}return(n=new e.l).K(i),n.W(-r,-r),n.hm(t)},t.RU=function(e,i,r){return t.vI(e,i,r)},t.ek=function(e,i,r){return t.zc(e,i,r)&&t.zc(i,e,r)},t.dk=function(t,i,r){var n=new e.l;return n.K(i),n.W(r,r),!t.isIntersecting(n)},t.cQ=function(i,r,n){if(i.ca()<=n&&i.R()<=n){var s=i.sf();return t.dB(s,r,n)}if(r.ca()<=n&&r.R()<=n)return s=r.sf(),t.dB(s,i,n);if(i.ca()>n&&i.R()>n&&(r.ca()<=n||r.R()<=n)?s=r:(s=i,i=r),s.ca()<=n||s.R()<=n){if(i.ca()<=n||i.R()<=n){r=new e.yb;var o=new e.yb,a=[0,0],l=[0,0],c=new e.h;return s.dn(c),r.Dc(c),s.en(c),r.Qc(c),i.dn(c),o.Dc(c),i.en(c),o.Qc(c),r.Ea(o,null,a,l,n),1==r.Ea(o,null,null,null,n)&&(0==a[0]||1==a[1]||0==l[0]||1==l[1])}return r=new e.l,o=new e.l,r.K(i),r.W(-n,-n),o.K(r),o.Ea(s),!(!o.B()&&(o.ca()>n||o.R()>n))}return i.W(n,n),(o=new e.l).K(s),o.Ea(i),!(o.B()||!o.B()&&o.ca()>n&&o.R()>n)},t.bQ=function(i,r,n){if(t.zc(i,r,n)||t.zc(r,i,n)||i.ca()<=n&&i.R()<=n||r.ca()<=n&&r.R()<=n)return!1;if(i.ca()<=n||i.R()<=n){if(r.ca()>n&&r.R()>n)return!1;var s=new e.yb,o=new e.yb,a=[0,0],l=[0,0],c=new e.h;return i.dn(c),s.Dc(c),i.en(c),s.Qc(c),r.dn(c),o.Dc(c),r.en(c),o.Qc(c),s.Ea(o,null,a,l,n),2==s.Ea(o,null,null,null,n)&&(0<a[0]||1>a[1])&&(0<l[0]||1>l[1])}return!(r.ca()<=n||r.R()<=n||((s=new e.l).K(i),s.Ea(r),s.B()||s.ca()<=n||s.R()<=n))},t.jF=function(i,r,n){if(!t.zc(i,r,n))return!1;if(i.ca()<=n&&i.R()<=n)return i=i.sf(),t.eB(i,r,n);if(r.ca()<=n&&r.R()<=n)return r=r.sf(),t.eB(r,i,n);if(i.ca()<=n||i.R()<=n)return t.zc(i,r,n);if(r.ca()<=n||r.R()<=n){var s=new e.l;return s.K(i),s.W(-n,-n),!(!s.hm(r)&&((i=new e.l).K(s),i.Ea(r),i.B()||i.ca()<=n&&i.R()<=n))}return t.zc(i,r,n)},t.aQ=function(i,r,n){if(t.zc(i,r,n)||t.zc(r,i,n)||i.ca()<=n&&i.R()<=n||r.ca()<=n&&r.R()<=n||r.ca()>n&&r.R()>n&&i.ca()>n&&i.R()>n)return!1;if(i.ca()>n&&i.R()>n)var s=r;else s=i,i=r;if(i.ca()>n&&i.R()>n){r=new e.l;var o=new e.l;return o.K(i),o.W(-n,-n),r.K(o),r.Ea(s),!(r.B()||r.ca()<=n&&r.R()<=n)}r=new e.yb,o=new e.yb;var a=[0,0],l=[0,0],c=new e.h;return s.dn(c),r.Dc(c),s.en(c),r.Qc(c),i.dn(c),o.Dc(c),i.en(c),o.Qc(c),r.Ea(o,null,a,l,n),1==r.Ea(o,null,null,null,n)&&0<a[0]&&1>a[1]&&0<l[0]&&1>l[1]},t.EI=function(t,i,r){var n=new e.l,s=new e.l,o=new e.Zl(t,i,r,!0);if(!o.next())return!0;if(this.UG(t,i,r))return!1;var a=t,l=null;1736==i.getType()&&(l=i);var c=!1,h=!1;do{var u=o.nl(),p=o.hl();if(p=i.Na(i.Ba(p)),n.K(o.uz()),n.W(r,r),n.contains(p)&&0!=(p=e.hd.Yd(a,p,0))||1736==i.getType()&&(u=t.Na(t.Ba(u)),s.K(o.az()),s.W(r,r),s.contains(u)&&0!=(p=e.hd.Yd(l,u,0))))return!1;c||(!e.Dg.Ml(t,i.da()-1)||null!=t.Bb&&null!=t.Bb.Fb?a=t:(a=new e.Da,t.copyTo(a),a.fj(1)),c=!0),1736!=i.getType()||h||(h=i,!e.Dg.Ml(h,t.da()-1)||null!=i.Bb&&null!=i.Bb.Fb?l=i:(l=new e.Da,h.copyTo(l),l.fj(1)),h=!0)}while(o.next());return!0},t.zc=function(t,i,r){var n=new e.l;return n.K(t),n.W(r,r),n.contains(i)},t.ls=function(t,i,r){var n=new e.l;return n.K(i),n.W(r,r),i=new e.h,t.dn(i),!(n.contains(i)&&(t.$I(i),n.contains(i)&&(t.cJ(i),n.contains(i)&&(t.en(i),n.contains(i)))))},t.dI=function(t,i,r){if(t.da()!=i.da()||t.I()!=i.I())return!1;var n=new e.h,s=new e.h,o=!0;r*=r;for(var a=0;a<t.da();a++){if(t.Vc(a)!=i.Vc(a)){o=!1;break}for(var l=t.Ba(a);l<i.Vc(a);l++)if(t.D(l,n),i.D(l,s),e.h.yc(n,s)>r){o=!1;break}if(!o)break}return!!o},t.jU=function(t,i,r){if(t.I()!=i.I())return!1;var n=new e.h,s=new e.h,o=!0;r*=r;for(var a=0;a<t.I();a++)if(t.D(a,n),i.D(a,s),e.h.yc(n,s)>r){o=!1;break}return!!o},t.YA=function(t,i,r,n,s,o){var a=!1;if(t.I()>i.I()){n&&(n=!1,a=!0);var l=i}else l=t,t=i;if(i=null,s||o||a){i=new e.pn(t.I());for(var c=0;c<t.I();c++)i.write(c,0)}c=new e.l;var h=new e.l,u=new e.l;l.A(c),t.A(h),c.W(r,r),h.W(r,r),u.K(c),u.Ea(h),h=new e.h;for(var p=new e.h,d=!0,f=e.ta.oE(t,u),y=f.getIterator(),m=r*r,g=0;g<l.I();g++)if(l.D(g,h),u.contains(h)){var v=!1;c.K(h.x,h.y,h.x,h.y),y.Xi(c,r);for(var _=y.next();-1!=_&&(_=f.ja(_),t.D(_,p),!(e.h.yc(h,p)<=m&&((s||o||a)&&i.write(_,1),v=!0,n)));_=y.next());if(!v&&(d=!1,s||n))return!1}else{if(s||n)return!1;d=!1}if(o&&d)return!1;if(n)return!0;for(c=0;c<t.I();c++)if(1==i.read(c)){if(o)return!0}else if(s||a)return!1;return!o},t.gI=function(t,i,r){if(t.I()>i.I())var n=i;else n=t,t=i;i=new e.l;var s=new e.l,o=new e.l;n.A(i),t.A(s),i.W(r,r),s.W(r,r),o.K(i),o.Ea(s),s=new e.h;for(var a=new e.h,l=r*r,c=e.ta.oE(t,o),h=c.getIterator(),u=0;u<n.I();u++)if(n.D(u,s),o.contains(s)){i.K(s.x,s.y,s.x,s.y),h.Xi(i,r);for(var p=h.next();-1!=p;p=h.next())if(t.D(c.ja(p),a),e.h.yc(s,a)<=l)return!0}return!1},t.Wz=function(e,i,r,n){return t.ym(e,i,r,n)&&t.ym(i,e,r,n)},t.ym=function(r,n,s,o){function a(e,t){return d.QE(e,t)}var l,c=[0,0],h=[0,0],u=0,p=new e.ia(0),d=new t,f=new e.l,y=new e.l,m=new e.l;r.A(f),n.A(y),f.W(s,s),y.W(s,s),m.K(f),m.Ea(y),r=r.Ga(),y=n.Ga();var g=null,v=g=null,_=n.Bb;for(null!=_?(g=_.Fb,v=_.zo,null==g&&(g=e.ta.jj(n,m))):g=e.ta.jj(n,m),n=g.getIterator(),_=null,null!=v&&(_=v.getIterator());r.$a();)for(;r.Ha();){var b=!1,w=r.ha();if(w.A(f),!f.isIntersecting(m))return!1;if(null!=_&&(_.Xi(f,s),-1==_.next()))return!1;for(v=w.Qb(),n.Uo(w,s),l=n.next();-1!=l;l=n.next()){y.Vb(g.ja(l)),l=y.ha();var M=w.Ea(l,null,c,h,s);if(2==M&&(!o||h[0]<=h[1])){var T=c[1],S=h[0],A=h[1];if((M=c[0])*v<=s&&(1-T)*v<=s){b=!0,u=0,p.resize(0),d.rh.length=0;var E=r.wb();for(S=!0;S;){if(r.Ha()){if(v=(w=r.ha()).Qb(),2==(M=w.Ea(l,null,c,h,s))&&(!o||h[0]<=h[1])&&(T=c[1],(M=c[0])*v<=s&&(1-T)*v<=s)){E=r.wb();continue}if(y.Ha()&&(l=y.ha(),2==(M=w.Ea(l,null,c,h,s))&&(!o||h[0]<=h[1])&&(T=c[1],(M=c[0])*v<=s&&(1-T)*v<=s))){E=r.wb();continue}}S=!1}E!=r.wb()&&(r.Vb(E),r.ha());break}E=r.wb(),l=i.construct(E,r.gb,M,T,y.wb(),y.gb,S,A),d.rh.push(l),p.add(p.size)}}if(!b){if(u==d.rh.length)return!1;for(1<p.size-u&&p.Vd(u,p.size,a),b=0;u<d.rh.length;u++)if(!((l=d.rh[p.get(u)]).Kj<b&&l.Si<b)){if(v*(l.Kj-b)>s)return!1;if(v*(1-(b=l.Si))<=s||1==b)break}if(v*(1-b)>s)return!1;u=0,p.resize(0),d.rh.length=0}}return!0},t.WG=function(i,r,n){if(1>t.Xz(i,r,n,null))return!1;var s=new e.l,o=new e.l;i.A(s),r.A(o);var a=t.ls(s,o,n);return s=t.ls(o,s,n),!((!a||!s)&&(a&&!s?t.ym(r,i,n,!1):s&&!a?t.ym(i,r,n,!1):t.ym(i,r,n,!1)||t.ym(r,i,n,!1)))},t.Xz=function(r,n,s,o){function a(e,t){return y.QE(e,t)}if(r.yz()>n.yz())var l=n,c=r;else l=r,c=n;r=l.Ga(),n=c.Ga();var h=[0,0],u=[0,0],p=-1,d=0,f=new e.ia(0),y=new t,m=new e.l,g=new e.l,v=new e.l;l.A(m),c.A(g),m.W(s,s),g.W(s,s),v.K(m),v.Ea(g),l=null,null!=o&&(l=new e.h);var _=g=g=null,b=c.Bb;for(null!=b?(g=b.Fb,_=b.zo,null==g&&(g=e.ta.jj(c,v))):g=e.ta.jj(c,v),c=g.getIterator(),b=null,null!=_&&(b=_.getIterator());r.$a();)for(_=0;r.Ha();){var w=r.ha();if(w.A(m),m.isIntersecting(v)){if(null!=b&&(b.Xi(m,s),-1==b.next()))continue;var M=w.Qb();c.Uo(w,s);for(var T=c.next();-1!=T;T=c.next()){var S=g.ja(T);n.Vb(S);var A=n.ha(),E=A.Qb(),x=w.Ea(A,null,h,u,s);if(0<x){T=h[0],p=u[0];var I=2==x?h[1]:NaN,C=2==x?u[1]:NaN;if(2==x){if(M*(I-T)>s)return 1;var k=M*(I-T);if(n.Ha()){if(A=n.ha(),2==(x=w.Ea(A,null,h,null,s))){var N=h[1];if(k+(x=M*(N-(x=h[0])))>s)return 1}n.Vb(S),n.ha()}if(!n.vm()){if(n.li(),A=n.li(),2==(x=w.Ea(A,null,h,null,s))&&k+(x=M*((N=h[1])-(x=h[0])))>s)return 1;n.Vb(S),n.ha()}if(r.Ha()){if(S=r.wb(),2==(x=(w=r.ha()).Ea(A,null,h,null,s))&&k+(x=M*((N=h[1])-(x=h[0])))>s)return 1;r.Vb(S),r.ha()}if(!r.vm()){if(S=r.wb(),r.li(),2==(x=(w=r.li()).Ea(A,null,h,null,s))&&k+(x=E*((N=h[1])-(x=h[0])))>s)return 1;r.Vb(S),r.ha()}A=i.construct(r.wb(),r.gb,T,I,n.wb(),n.gb,p,C),y.rh.push(A),f.add(f.size)}p=0,null!=o&&(w.hc(T,l),o.add(l.x),o.add(l.y))}}if(d<y.rh.length){for(f.Vd(d,f.size,a),w=0,T=y.rh[f.get(d)].Mm;d<y.rh.length;d++)if(!((A=y.rh[f.get(d)]).Kj<w&&A.Si<w))if(M*(A.Kj-w)>s)_=M*(A.Si-A.Kj),w=A.Si,T=A.Mm;else{if(A.Mm!=T?(_=M*(A.Si-A.Kj),T=A.Mm):_+=M*(A.Si-A.Kj),_>s)return 1;if(1==(w=A.Si))break}M*(1-w)>s&&(_=0),d=0,f.resize(0),y.rh.length=0}}}return p},t.UG=function(t,i,r){var n=t.Ga(),s=i.Ga();for(t=new e.Zl(t,i,r,!1);t.next();){i=t.nl();var o=t.hl();if(n.Vb(i),s.Vb(o),i=n.ha(),0<s.ha().Ea(i,null,null,null,r))return!0}return!1},t.VG=function(t,i,r,n){var s=t.Ga(),o=new e.l,a=new e.l,l=new e.l;t.A(o),i.A(a),o.W(r,r),o.contains(a),a.W(r,r),l.K(o),l.Ea(a),null!=(o=t.Bb)?null==(o=o.Fb)&&(o=e.ta.jj(t,l)):o=e.ta.jj(t,l),t=o.getIterator();for(var c=new e.h,h=new e.h,u=r*r,p=0;p<i.I();p++)if(i.D(p,c),l.contains(c)){a.K(c.x,c.y,c.x,c.y),t.Xi(a,r);for(var d=!1,f=t.next();-1!=f;f=t.next())if(s.Vb(o.ja(f)),(f=s.ha()).hc(f.fe(c,!1),h),e.h.yc(h,c)<=u){d=!0;break}if(n){if(!d)return!1}else if(d)return!0}return!!n},t.Yz=function(t,i,r){var n=new e.h,s=r*r,o=t.Ga();if(null!=(t=t.Bb)&&null!=(t=t.Fb)){var a=new e.l;for(a.K(i),a=(r=t.MF(a,r)).next();-1!=a;a=r.next())if(o.Vb(t.ja(a)),o.Ha()){var l=(a=o.ha()).fe(i,!1);if(a.hc(l,n),e.h.yc(i,n)<=s)return!0}return!1}for(t=new e.l;o.$a();)for(;o.Ha();)if((a=o.ha()).A(t),t.W(r,r),t.contains(i)&&(l=a.fe(i,!1),a.hc(l,n),e.h.yc(i,n)<=s))return!0;return!1},t.SG=function(e,i,r){return t.Yz(e,i,r)&&!t.Zz(e,i,r)},t.Zz=function(e,i,r){return e=e.mg(),!t.kt(e,i,r)},t.TG=function(t,i,r){if(t.tm()){var n=new e.yb(i.v,i.G,i.v,i.H),s=new e.yb(i.v,i.H,i.C,i.H),o=new e.yb(i.C,i.H,i.C,i.G);for(i=new e.yb(i.C,i.G,i.v,i.G),t=t.Ga();t.$a();)for(;t.Ha();){var a=t.ha();if(a.isIntersecting(n,r)||a.isIntersecting(s,r)||a.isIntersecting(o,r)||a.isIntersecting(i,r))return!0}}else{(n=new e.l).K(i),n.W(r,r),r=t.ub(0),s=new e.h,o=new e.h,i=new e.h,a=new e.h;for(var l=0,c=t.da();l<c;l++)for(var h=!0,u=t.Ba(l),p=t.Vc(l);u<p;u++)if(h)r.tc(2*u,o),h=!1;else{if(r.tc(2*u,s),i.L(o),a.L(s),0!=n.zy(i,a))return!0;o.L(s)}}return!1},t.qc=function(i,r,n){var s=i.getType(),o=r.getType();if(e.aa.xj(s)){var a=i.Bb;if(null!=a&&null!=(a=a.Fk))if(33==o){var l=r.D();if(1==(l=a.So(l.x,l.y)))return 1;if(0==l)return 4}else{if(l=new e.l,r.A(l),1==(l=a.Ro(l)))return 1;if(0==l)return 4;if(n&&e.aa.xj(o)&&t.HE(r,a))return 1073741824}}if(e.aa.xj(o)&&null!=(a=r.Bb)&&null!=(a=a.Fk))if(33==s){if(i=i.D(),1==(l=a.So(i.x,i.y)))return 2;if(0==l)return 4}else{if(r=new e.l,i.A(r),1==(l=a.Ro(r)))return 2;if(0==l)return 4;if(n&&e.aa.xj(s)&&t.HE(i,a))return 1073741824}return 0},t.HE=function(t,i){for(var r=t.I(),n=new e.h,s=0;s<r;s++)if(t.D(s,n),1==i.So(n.x,n.y))return!0;return!1},t.II=function(t,i,r,n){for(var s=1<=t.om(0)&&1<=i.om(0),o=t.Ga(),a=i.Ga(),l=[0,0],c=[0,0],h=new e.Zl(t,i,r,!1),u=!1;h.next();){var p=h.nl(),d=h.hl();if(o.Vb(p),a.Vb(d),p=o.ha(),2==(d=a.ha().Ea(p,null,c,l,r))){if(u=l[0],d=l[1],p=p.Qb(),s&&(d-u)*p>r)return!1;u=!0}else if(0!=d){if(p=c[0],0<(u=l[0])&&1>u&&0<p&&1>p)return!1;u=!0}}return!!u&&(o=new e.l,a=new e.l,s=new e.l,t.A(o),i.A(a),o.W(1e3*r,1e3*r),a.W(1e3*r,1e3*r),s.K(o),s.Ea(a),!(10<t.I()&&(t=e.Ud.clip(t,s,r,0),t.B())||10<i.I()&&(i=e.Ud.clip(i,s,r,0),i.B()))&&e.am.rt(t,i,r,"F********",n))},t.FI=function(i,r,n,s){var o=1<=i.om(0)&&1<=r.om(0),a=new e.l,l=new e.l,c=new e.l;i.A(a),r.A(l);for(var h=!1,u=t.ls(a,l,n),p=t.ls(l,a,n),d=i.Ga(),f=r.Ga(),y=[0,0],m=[0,0],g=new e.Zl(i,r,n,!1);g.next();){var v=g.nl(),_=g.hl();if(d.Vb(v),f.Vb(_),_=d.ha(),2==(v=f.ha().Ea(_,null,m,y,n))){v=y[0];var b=y[1];if(_=_.Qb(),o&&(b-v)*_>n&&(h=!0,u&&p))return!0}else if(0!=v&&(_=m[0],0<(v=y[0])&&1>v&&0<_&&1>_))return!0}if(o=new e.l,d=new e.l,o.K(a),o.W(1e3*n,1e3*n),d.K(l),d.W(1e3*n,1e3*n),c.K(o),c.Ea(d),a="",a=h?a+"**":a+"T*",u){if(10<r.I()&&(r=e.Ud.clip(r,c,n,0)).B())return!1;a+="****"}else a+="T***";if(p){if(10<i.I()&&(i=e.Ud.clip(i,c,n,0)).B())return!1;a+="***"}else a+="T**";return e.am.rt(i,r,n,a.toString(),s)},t.BI=function(i,r,n,s){var o=[!1],a=t.zI(i,r,n,o);return o[0]?a:(o=new e.l,r.A(o),o.W(1e3*n,1e3*n),!(10<i.I()&&(i=e.Ud.clip(i,o,n,0),i.B()))&&e.am.Sw(i,r,n,s))},t.zI=function(t,i,r,n){n[0]=!1;for(var s=t.Ga(),o=i.Ga(),a=[0,0],l=[0,0],c=new e.Zl(t,i,r,!1),h=!1;c.next();){var u=c.nl(),p=c.hl();if(s.Vb(u,-1),o.Vb(p,-1),u=s.ha(),0!=(u=o.ha().Ea(u,null,l,a,r))&&(h=!0,1==u&&(u=a[0],p=l[0],0<u&&1>u&&0<p&&1>p)))return n[0]=!0,!1}if(!h){for(n[0]=!0,a=new e.l,t.A(a),a.W(r,r),c=t,h=!1,l=new e.l,n=0,s=i.da();n<s;n++)if(0<i.Ja(n)){if(i.Rj(n,l),!a.isIntersecting(l))return!1;if(o=i.Na(i.Ba(n)),0==(o=e.Dg.wm(c,o,0)))return!1;h||(!e.Dg.Ml(t,i.da()-1)||null!=t.Bb&&null!=t.Bb.Fb?c=t:(o=new e.Da,t.copyTo(o),o.fj(1),c=o),h=!0)}if(1==t.da()||1607==i.getType())return!0;for(a=new e.l,i.A(a),a.W(r,r),l=i,c=!1,r=new e.l,n=0,s=t.da();n<s;n++)if(0<t.Ja(n)){if(t.Rj(n,r),a.isIntersecting(r)&&(o=t.Na(t.Ba(n)),1==(o=e.Dg.wm(l,o,0))))return!1;c||(!e.Dg.Ml(i,t.da()-1)||null!=i.Bb&&null!=i.Bb.Fb?l=i:(o=new e.Da,i.copyTo(o),o.fj(1),l=o),c=!0)}return!0}return!1},t.JI=function(t,i,r,n){for(var s=t.Ga(),o=i.Ga(),a=[0,0],l=[0,0],c=new e.Zl(t,i,r,!1),h=!1;c.next();){var u=c.nl(),p=c.hl();if(s.Vb(u),o.Vb(p),u=s.ha(),2==(u=o.ha().Ea(u,null,l,a,r)))h=!0;else if(0!=u){if(h=a[0],u=l[0],0<h&&1>h&&0<u&&1>u)return!1;h=!0}}return!!h&&(o=new e.l,a=new e.l,s=new e.l,t.A(o),i.A(a),o.W(1e3*r,1e3*r),a.W(1e3*r,1e3*r),s.K(o),s.Ea(a),!(10<t.I()&&(t=e.Ud.clip(t,s,r,0),t.B())||10<i.I()&&(i=e.Ud.clip(i,s,r,0),i.B()))&&e.am.$m(t,i,r,"F********",n))},t.DI=function(i,r,n,s){for(var o=i.Ga(),a=r.Ga(),l=[0,0],c=[0,0],h=new e.Zl(i,r,n,!1),u=!1;h.next();){var p=h.nl(),d=h.hl();if(o.Vb(p),a.Vb(d),p=o.ha(),2==(p=a.ha().Ea(p,null,c,l,n)))u=!0;else if(0!=p){if(u=l[0],p=c[0],0<u&&1>u&&0<p&&1>p)return!0;u=!0}}return!!u&&(a=new e.l,l=new e.l,c=new e.l,h=new e.l,o=new e.l,i.A(a),r.A(l),t.ls(l,a,n)?(c.K(a),c.W(1e3*n,1e3*n),h.K(l),h.W(1e3*n,1e3*n),o.K(c),o.Ea(h),!(10<i.I()&&(i=e.Ud.clip(i,o,n,0),i.B())||10<r.I()&&(r=e.Ud.clip(r,o,n,0),r.B()))&&(n=e.am.$m(i,r,n,"T********",s))):n=e.am.$m(i,r,n,"T*****T**",s))},t.CI=function(i,r,n,s){var o=[!1],a=t.zI(i,r,n,o);return o[0]?a:(o=new e.l,r.A(o),o.W(1e3*n,1e3*n),!(10<i.I()&&(i=e.Ud.clip(i,o,n,0),i.B()))&&e.am.fB(i,r,n,s))},t.AI=function(t,i,r){return 1==e.hd.Yd(t,i,r)},t.HI=function(t,i,r){return 2==e.hd.Yd(t,i,r)},t.kt=function(t,i,r){var n=new e.h;r*=r;for(var s=0;s<t.I();s++)if(t.D(s,n),e.h.yc(n,i)<=r)return!1;return!0},t.prototype.QE=function(e,t){return e=this.rh[e],t=this.rh[t],e.Mm<t.Mm||e.Mm==t.Mm&&(e.pw<t.pw||e.pw==t.pw&&(e.Kj<t.Kj||e.Kj==t.Kj&&(e.Si<t.Si||e.Si==t.Si&&e.BH<t.BH)))?-1:1},t}();e.ud=r}(Y||(Y={})),function(e){var t,i,r;(i=t||(t={}))[i.InteriorInterior=0]="InteriorInterior",i[i.InteriorBoundary=1]="InteriorBoundary",i[i.InteriorExterior=2]="InteriorExterior",i[i.BoundaryInterior=3]="BoundaryInterior",i[i.BoundaryBoundary=4]="BoundaryBoundary",i[i.BoundaryExterior=5]="BoundaryExterior",i[i.ExteriorInterior=6]="ExteriorInterior",i[i.ExteriorBoundary=7]="ExteriorBoundary",i[i.ExteriorExterior=8]="ExteriorExterior",function(e){e[e.AreaAreaPredicates=0]="AreaAreaPredicates",e[e.AreaLinePredicates=1]="AreaLinePredicates",e[e.LineLinePredicates=2]="LineLinePredicates",e[e.AreaPointPredicates=3]="AreaPointPredicates",e[e.LinePointPredicates=4]="LinePointPredicates",e[e.PointPointPredicates=5]="PointPointPredicates"}(r||(r={})),t=function(){function t(){this.le=0,this.j=new e.iu,this.J=[0,0,0,0,0,0,0,0,0],this.Za=[0,0,0,0,0,0,0,0,0],this.ea=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.Sm=this.vw=-1}return t.yB=function(t,i,r,n,s){if(9!=n.length)throw e.i.fa("relation string length has to be 9 characters");for(var o=0;9>o;o++){var a=n.charAt(o);if("*"!=a&&"T"!=a&&"F"!=a&&"0"!=a&&"1"!=a&&"2"!=a)throw e.i.fa("relation string")}if(0!=(o=this.MR(n,t.Db(),i.Db())))return e.ud.zB(t,i,r,o,s);o=new e.l,t.A(o),a=new e.l,i.A(a);var l=new e.l;if(l.K(o),l.Zb(a),r=e.ta.Wd(r,l,!1),t=this.WE(t,r),i=this.WE(i,r),t.B()||i.B())return this.uW(t,i,n);switch(o=t.getType(),a=i.getType(),l=!1,o){case 1736:switch(a){case 1736:l=this.rt(t,i,r,n,s);break;case 1607:l=this.$m(t,i,r,n,s);break;case 33:l=this.qt(t,i,r,n);break;case 550:l=this.pt(t,i,r,n,s)}break;case 1607:switch(a){case 1736:l=this.$m(i,t,r,this.Zp(n),s);break;case 1607:l=this.gB(t,i,r,n,s);break;case 33:l=this.tt(t,i,r,n,s);break;case 550:l=this.st(t,i,r,n,s)}break;case 33:switch(a){case 1736:l=this.qt(i,t,r,this.Zp(n));break;case 1607:l=this.tt(i,t,r,this.Zp(n),s);break;case 33:l=this.$U(t,i,r,n);break;case 550:l=this.lt(i,t,r,this.Zp(n))}break;case 550:switch(a){case 1736:l=this.pt(i,t,r,this.Zp(n),s);break;case 1607:l=this.st(i,t,r,this.Zp(n),s);break;case 550:l=this.ZA(t,i,r,n,s);break;case 33:l=this.lt(t,i,r,n)}break;default:l=!1}return l},t.rt=function(i,r,n,s,o){var a=new t;a.Yi(),a.bj(s),a.xJ();var l=new e.l,c=new e.l;return i.A(l),r.A(c),s=!1,e.ud.dk(l,c,n)&&(a.Cu(i,r),s=!0),s||(4==(l=e.ud.qc(i,r,!1))?(a.Cu(i,r),s=!0):1==l?(a.ly(r),s=!0):2==l&&(a.ZD(i),s=!0)),s||(i=(s=new e.gd).Ib(i),r=s.Ib(r),a.Wo(s,n,o),a.Bp(i,r),a.j.Ug()),t.fg(a.J,a.Xc)},t.Sw=function(i,r,n,s){var o=new t;o.Yi(),o.bj("T*****F**"),o.xJ();var a=new e.l,l=new e.l;i.A(a),r.A(l);var c=!1;return e.ud.dk(a,l,n)&&(o.Cu(i,r),c=!0),c||(4==(a=e.ud.qc(i,r,!1))?(o.Cu(i,r),c=!0):1==a?(o.ly(r),c=!0):2==a&&(o.ZD(i),c=!0)),c?this.fg(o.J,o.Xc):(i=(c=new e.gd).Ib(i),a=c.Ib(r),e.Tk.V(c,n,s,!1),n=c.Ne(a).mg(),c.Gp(0,!0,!0),e.rn.V(c,i,-1,!1,s),0!=c.I(i)&&(e.rn.V(c,a,-1,!1,s),o.er(c,s),(r=0==c.I(a))||(o.Bp(i,a),o.j.Ug(),a=this.fg(o.J,o.Xc))?(i=c.Ne(i),i=(c=new e.gd).Ib(i),a=c.Ib(n),o.er(c,s),o.le=0,o.Yi(),o.bj(r?"T*****F**":"******F**"),o.IB(),o.Bp(i,a),o.j.Ug(),this.fg(o.J,o.Xc)):a))},t.$m=function(i,r,n,s,o){var a=new t;a.Yi(),a.bj(s),a.IB();var l=new e.l,c=new e.l;return i.A(l),r.A(c),s=!1,e.ud.dk(l,c,n)&&(a.Du(i,r),s=!0),s||(4==(l=e.ud.qc(i,r,!1))?(a.Du(i,r),s=!0):1==l&&(a.$D(r),s=!0)),s||(i=(s=new e.gd).Ib(i),r=s.Ib(r),a.Wo(s,n,o),a.kh=a.j.Dp(),t.Jw(r,a.j,a.kh),a.Bp(i,r),a.j.Ep(a.kh),a.j.Ug()),t.fg(a.J,a.Xc)},t.fB=function(i,r,n,s){var o=new t;o.Yi(),o.bj("T*****F**"),o.IB();var a=new e.l,l=new e.l;i.A(a),r.A(l);var c=!1;return e.ud.dk(a,l,n)&&(o.Du(i,r),c=!0),c||(4==(a=e.ud.qc(i,r,!1))?(o.Du(i,r),c=!0):1==a&&(o.$D(r),c=!0)),c?this.fg(o.J,o.Xc):(i=(c=new e.gd).Ib(i),r=c.Ib(r),o.Wo(c,n,s),0!=c.I(i)&&(o.Bp(i,r),o.j.Ug(),this.fg(o.J,o.Xc)))},t.pt=function(i,r,n,s,o){var a=new t;a.Yi(),a.bj(s),a.yJ();var l=new e.l,c=new e.l;return i.A(l),r.A(c),s=!1,e.ud.dk(l,c,n)&&(a.Eu(i),s=!0),s||(4==(l=e.ud.qc(i,r,!1))?(a.Eu(i),s=!0):1==l&&(a.zN(),s=!0)),s||(i=(s=new e.gd).Ib(i),r=s.Ib(r),a.Wo(s,n,o),a.Gy(i,r),a.j.Ug()),t.fg(a.J,a.Xc)},t.gB=function(i,r,n,s,o){var a=new t;a.Yi(),a.bj(s),a.eX(),s=new e.l;var l=new e.l;i.A(s),r.A(l);var c=!1;return e.ud.dk(s,l,n)&&(a.PG(i,r),c=!0),c||4!=e.ud.qc(i,r,!1)||(a.PG(i,r),c=!0),c||(i=(s=new e.gd).Ib(i),r=s.Ib(r),a.Wo(s,n,o),a.Yh=a.j.Dp(),a.kh=a.j.Dp(),t.Jw(i,a.j,a.Yh),t.Jw(r,a.j,a.kh),a.Bp(i,r),a.j.Ep(a.Yh),a.j.Ep(a.kh),a.j.Ug()),t.fg(a.J,a.Xc)},t.st=function(i,r,n,s,o){var a=new t;a.Yi(),a.bj(s),a.MJ(),s=new e.l;var l=new e.l;i.A(s),r.A(l);var c=!1;return e.ud.dk(s,l,n)&&(a.Vz(i),c=!0),c||4!=e.ud.qc(i,r,!1)||(a.Vz(i),c=!0),c||(i=(s=new e.gd).Ib(i),r=s.Ib(r),a.Wo(s,n,o),a.Yh=a.j.Dp(),t.Jw(i,a.j,a.Yh),a.Gy(i,r),a.j.Ep(a.Yh),a.j.Ug()),t.fg(a.J,a.Xc)},t.ZA=function(i,r,n,s,o){var a=new t;a.Yi(),a.bj(s),a.RJ(),s=new e.l;var l=new e.l;i.A(s),r.A(l);var c=!1;return e.ud.dk(s,l,n)&&(a.yI(),c=!0),c||(i=(s=new e.gd).Ib(i),r=s.Ib(r),a.Wo(s,n,o),a.Gy(i,r),a.j.Ug()),t.fg(a.J,a.Xc)},t.qt=function(i,r,n,s){var o=new t;o.Yi(),o.bj(s),o.yJ();var a=new e.l;i.A(a),r=r.D();var l=!1;return e.ud.Rw(r,a,n)&&(o.Eu(i),l=!0),l||(1==(n=e.hd.Yd(i,r,n))?(o.J[0]=0,o.J[2]=2,o.J[3]=-1,o.J[5]=1,o.J[6]=-1):2==n?(o.J[6]=-1,0!=i.Ke()?(o.J[0]=-1,o.J[3]=0,o.J[2]=2,o.J[5]=1):(o.J[0]=0,o.J[3]=-1,o.J[5]=-1,n=new e.l,i.A(n),o.J[2]=0==n.ca()&&0==n.R()?-1:1)):o.Eu(i)),this.fg(o.J,s)},t.tt=function(i,r,n,s,o){var a=new t;a.Yi(),a.bj(s),a.MJ();var l=new e.l;i.A(l),s=r.D();var c=!1;if(e.ud.Rw(s,l,n)&&(a.Vz(i),c=!0),!c){l=null;var h=c=!1;(a.ea[0]||a.ea[6])&&(e.ud.Yz(i,s,n)?(a.ea[0]&&(l=e.pi.gm(i,o),h=!e.ud.kt(l,s,n),c=!0,a.J[0]=h?-1:0),a.J[6]=-1):(a.J[0]=-1,a.J[6]=0)),a.ea[3]&&(null!=l&&l.B()?a.J[3]=-1:(c||(null==l&&(l=e.pi.gm(i,o)),h=!e.ud.kt(l,s,n),c=!0),a.J[3]=h?0:-1)),a.ea[5]&&(null!=l&&l.B()?a.J[5]=-1:c&&!h?a.J[5]=0:(null==l&&(l=e.pi.gm(i,o)),o=e.ud.Nw(l,r,n),a.J[5]=o?-1:0)),a.ea[2]&&(0!=i.Qb()?a.J[2]=1:((o=new e.de(i.description)).Fd(i,0,i.I()),i=e.ud.Nw(o,r,n),a.J[2]=i?-1:0))}return this.fg(a.J,a.Xc)},t.lt=function(i,r,n,s){var o=new t;o.Yi(),o.bj(s),o.RJ();var a=new e.l;i.A(a),r=r.D();var l=!1;if(e.ud.Rw(r,a,n)&&(o.yI(),l=!0),!l){a=!1,l=!0,n*=n;for(var c=0;c<i.I();c++){var h=i.Na(c);if(e.h.yc(h,r)<=n?a=!0:l=!1,a&&!l)break}a?(o.J[0]=0,o.J[2]=l?-1:0,o.J[6]=-1):(o.J[0]=-1,o.J[2]=0,o.J[6]=0)}return t.fg(o.J,s)},t.$U=function(i,r,n,s){i=i.D(),r=r.D();for(var o=[],a=0;9>a;a++)o[a]=-1;return e.h.yc(i,r)<=n*n?o[0]=0:(o[2]=0,o[6]=0),o[8]=2,t.fg(o,s)},t.fg=function(e,t){for(var i=0;9>i;i++)switch(t.charAt(i)){case"T":if(-1==e[i])return!1;break;case"F":if(-1!=e[i])return!1;break;case"0":if(0!=e[i])return!1;break;case"1":if(1!=e[i])return!1;break;case"2":if(2!=e[i])return!1}return!0},t.uW=function(t,i,r){var n=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(t.B()&&i.B()){for(var s=0;9>s;s++)n[s]=-1;return this.fg(n,r)}return s=!1,t.B()&&(t=i,s=!0),n[0]=-1,n[1]=-1,n[3]=-1,n[4]=-1,n[6]=-1,n[7]=-1,n[8]=2,i=t.getType(),e.aa.Hc(i)?1736==i?0!=t.Ke()?(n[2]=2,n[5]=1):(n[5]=-1,i=new e.l,t.A(i),n[2]=0==i.ca()&&0==i.R()?0:1):(i=0!=t.Qb(),n[2]=i?1:0,n[5]=e.pi.aq(t)?0:-1):(n[2]=0,n[5]=-1),s&&this.vK(n),this.fg(n,r)},t.MR=function(e,i,r){return t.dQ(e)?3:t.UP(e)?4:t.cY(e,i,r)?8:t.CP(e,i,r)?16:t.eP(e)?1:t.EU(e,i,r)?32:0},t.dQ=function(e){return"T"==e.charAt(0)&&"*"==e.charAt(1)&&"F"==e.charAt(2)&&"*"==e.charAt(3)&&"*"==e.charAt(4)&&"F"==e.charAt(5)&&"F"==e.charAt(6)&&"F"==e.charAt(7)&&"*"==e.charAt(8)},t.UP=function(e){return"F"==e.charAt(0)&&"F"==e.charAt(1)&&"*"==e.charAt(2)&&"F"==e.charAt(3)&&"F"==e.charAt(4)&&"*"==e.charAt(5)&&"*"==e.charAt(6)&&"*"==e.charAt(7)&&"*"==e.charAt(8)},t.cY=function(e,t,i){return(0!=t||0!=i)&&((2!=t||2!=i)&&("F"==e.charAt(0)&&"*"==e.charAt(1)&&"*"==e.charAt(2)&&"T"==e.charAt(3)&&"*"==e.charAt(4)&&"*"==e.charAt(5)&&"*"==e.charAt(6)&&"*"==e.charAt(7)&&"*"==e.charAt(8)||1==t&&1==i&&"F"==e.charAt(0)&&"T"==e.charAt(1)&&"*"==e.charAt(2)&&"*"==e.charAt(3)&&"*"==e.charAt(4)&&"*"==e.charAt(5)&&"*"==e.charAt(6)&&"*"==e.charAt(7)&&"*"==e.charAt(8))||0!=i&&"F"==e.charAt(0)&&"*"==e.charAt(1)&&"*"==e.charAt(2)&&"*"==e.charAt(3)&&"T"==e.charAt(4)&&"*"==e.charAt(5)&&"*"==e.charAt(6)&&"*"==e.charAt(7)&&"*"==e.charAt(8))},t.CP=function(e,t,i){return t>i?"T"==e.charAt(0)&&"*"==e.charAt(1)&&"*"==e.charAt(2)&&"*"==e.charAt(3)&&"*"==e.charAt(4)&&"*"==e.charAt(5)&&"T"==e.charAt(6)&&"*"==e.charAt(7)&&"*"==e.charAt(8):1==t&&1==i&&"0"==e.charAt(0)&&"*"==e.charAt(1)&&"*"==e.charAt(2)&&"*"==e.charAt(3)&&"*"==e.charAt(4)&&"*"==e.charAt(5)&&"*"==e.charAt(6)&&"*"==e.charAt(7)&&"*"==e.charAt(8)},t.eP=function(e){return"T"==e.charAt(0)&&"*"==e.charAt(1)&&"*"==e.charAt(2)&&"*"==e.charAt(3)&&"*"==e.charAt(4)&&"*"==e.charAt(5)&&"F"==e.charAt(6)&&"F"==e.charAt(7)&&"*"==e.charAt(8)},t.EU=function(e,t,i){if(t==i){if(1!=t)return"T"==e.charAt(0)&&"*"==e.charAt(1)&&"T"==e.charAt(2)&&"*"==e.charAt(3)&&"*"==e.charAt(4)&&"*"==e.charAt(5)&&"T"==e.charAt(6)&&"*"==e.charAt(7)&&"*"==e.charAt(8);if("1"==e.charAt(0)&&"*"==e.charAt(1)&&"T"==e.charAt(2)&&"*"==e.charAt(3)&&"*"==e.charAt(4)&&"*"==e.charAt(5)&&"T"==e.charAt(6)&&"*"==e.charAt(7)&&"*"==e.charAt(8))return!0}return!1},t.Jw=function(e,t,i){e=t.La(e);for(var r=t.Re;-1!=r;r=t.Rf(r))if(t.xd(r)&e){var n=t.Me(r);if(-1==n)t.nn(r,i,0);else{var s=n,o=0;do{!!(t.dh(s)&e)&&o++,s=t.jc(t.xa(s))}while(s!=n);t.nn(r,i,o)}}},t.Zp=function(e){var t=""+e.charAt(0);return t+=e.charAt(3),t+=e.charAt(6),t+=e.charAt(1),t+=e.charAt(4),t+=e.charAt(7),t+=e.charAt(2),(t+=e.charAt(5))+e.charAt(8)},t.prototype.Yi=function(){for(var e=0;9>e;e++)this.J[e]=-2,this.Za[e]=-2},t.vK=function(e){var t=e[1],i=e[2],r=e[5];e[1]=e[3],e[2]=e[6],e[5]=e[7],e[3]=t,e[6]=i,e[7]=r},t.prototype.bj=function(e){for(this.Xc=e,e=0;9>e;e++)"*"!=this.Xc.charAt(e)?(this.ea[e]=!0,this.le++):this.ea[e]=!1},t.prototype.UJ=function(){for(var e=0;9>e;e++)this.ea[e]&&-2==this.J[e]&&(this.J[e]=-1,this.ea[e]=!1)},t.prototype.pc=function(e){return!(-2==this.J[e]||(-1==this.J[e]?(this.ea[e]=!1,this.le--,0):"T"!=this.Xc.charAt(e)&&"F"!=this.Xc.charAt(e)&&this.J[e]<this.Za[e]||(this.ea[e]=!1,this.le--,0)))},t.prototype.xJ=function(){this.vw=0,this.Za[0]=2,this.Za[1]=1,this.Za[2]=2,this.Za[3]=1,this.Za[4]=1,this.Za[5]=1,this.Za[6]=2,this.Za[7]=1,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},t.prototype.IB=function(){this.vw=1,this.Sm=3,this.Za[0]=1,this.Za[1]=0,this.Za[2]=2,this.Za[3]=1,this.Za[4]=0,this.Za[5]=1,this.Za[6]=1,this.Za[7]=0,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},t.prototype.eX=function(){this.vw=2,this.Sm=4,this.Za[0]=1,this.Za[1]=0,this.Za[2]=1,this.Za[3]=0,this.Za[4]=0,this.Za[5]=0,this.Za[6]=1,this.Za[7]=0,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},t.prototype.yJ=function(){this.Sm=3,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=2,this.Za[3]=0,this.Za[4]=-1,this.Za[5]=1,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},t.prototype.MJ=function(){this.Sm=4,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=1,this.Za[3]=0,this.Za[4]=-1,this.Za[5]=0,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},t.prototype.RJ=function(){this.Sm=5,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=0,this.Za[3]=-1,this.Za[4]=-1,this.Za[5]=-1,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[3]&&(this.J[3]=-1,this.ea[3]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[5]&&(this.J[5]=-1,this.ea[5]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},t.prototype.xN=function(e,t,i){var r=!0;return this.ea[0]&&(this.CS(e,t,i),r=r&&this.pc(0)),this.ea[1]&&(this.sG(e,t,1),r=r&&this.pc(1)),this.ea[2]&&(this.tG(e,t,i,2),r=r&&this.pc(2)),this.ea[3]&&(this.sG(e,i,3),r=r&&this.pc(3)),this.ea[4]&&(this.BN(e,t,i),r=r&&this.pc(4)),this.ea[5]&&(this.eE(e,i,5),r=r&&this.pc(5)),this.ea[6]&&(this.tG(e,i,t,6),r=r&&this.pc(6)),this.ea[7]&&(this.eE(e,t,7),r=r&&this.pc(7)),r},t.prototype.Cu=function(e,t){this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.Fr(e,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5)),this.Fr(t,this.ea[6]?6:-1,this.Xc.charAt(6),this.ea[7]?7:-1,this.Xc.charAt(7))},t.prototype.Fr=function(t,i,r,n,s){-1==i&&-1==n||(("T"!=r&&"F"!=r&&-1!=i||"T"!=s&&"F"!=s&&-1!=n)&&0==t.Ke()?(-1!=n&&(this.J[n]=-1),-1!=i&&(r=new e.l,t.A(r),this.J[i]=0==r.ca()&&0==r.R()?0:1)):(-1!=i&&(this.J[i]=2),-1!=n&&(this.J[n]=1)))},t.prototype.ly=function(e){this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1,this.Fr(e,this.ea[0]?0:-1,this.Xc.charAt(0),this.ea[1]?1:-1,this.Xc.charAt(1))},t.prototype.ZD=function(e){this.ly(e),t.vK(this.J)},t.prototype.Du=function(t,i){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.ea[6]){var r=this.Xc.charAt(6);r="T"==r||"F"==r||0!=i.Qb(),this.J[6]=r?1:0}this.ea[7]&&(i=e.pi.aq(i),this.J[7]=i?0:-1),this.Fr(t,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5))},t.prototype.$D=function(t){if(this.ea[0]){var i=this.Xc.charAt(0);i="T"==i||"F"==i||0!=t.Qb(),this.J[0]=i?1:0}this.ea[1]&&(t=e.pi.aq(t),this.J[1]=t?0:-1),this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1},t.prototype.Eu=function(e){this.J[0]=-1,this.J[3]=-1,this.J[6]=0,this.Fr(e,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5))},t.prototype.zN=function(){this.J[0]=0,this.J[2]=2,this.J[3]=-1,this.J[5]=1,this.J[6]=-1},t.prototype.PG=function(t,i){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.ea[2]){var r=this.Xc.charAt(2);r="T"==r||"F"==r||0!=t.Qb(),this.J[2]=r?1:0}this.ea[5]&&(t=e.pi.aq(t),this.J[5]=t?0:-1),this.ea[6]&&(r="T"==(r=this.Xc.charAt(6))||"F"==r||0!=i.Qb(),this.J[6]=r?1:0),this.ea[7]&&(i=e.pi.aq(i),this.J[7]=i?0:-1)},t.prototype.Vz=function(t){if(this.J[0]=-1,this.J[3]=-1,this.ea[2]){var i=this.Xc.charAt(2);i="T"==i||"F"==i||0!=t.Qb(),this.J[2]=i?1:0}this.ea[5]&&(t=e.pi.aq(t),this.J[5]=t?0:-1),this.J[6]=0},t.prototype.yI=function(){this.J[0]=-1,this.J[2]=0,this.J[6]=0},t.prototype.yN=function(e,t,i){var r=!0;return this.ea[0]&&(this.DS(e,t),r=r&&this.pc(0)),this.ea[1]&&(this.zS(e,t,i,this.kh),r=r&&this.pc(1)),this.ea[2]&&(this.AS(e,t),r=r&&this.pc(2)),this.ea[3]&&(this.FN(e,t,i,this.kh),r=r&&this.pc(3)),this.ea[4]&&(this.CN(e,t,i,this.kh),r=r&&this.pc(4)),this.ea[5]&&(this.DN(e,t,i),r=r&&this.pc(5)),this.ea[6]&&(this.lQ(e,t),r=r&&this.pc(6)),this.ea[7]&&(this.kQ(e,t,i,this.kh),r=r&&this.pc(7)),r},t.prototype.mT=function(e,t,i){var r=!0;return this.ea[0]&&(this.GS(e,t,i,this.Yh,this.kh),r=r&&this.pc(0)),this.ea[1]&&(this.uG(e,t,i,this.Yh,this.kh,1),r=r&&this.pc(1)),this.ea[2]&&(this.vG(e,t,i,2),r=r&&this.pc(2)),this.ea[3]&&(this.uG(e,i,t,this.kh,this.Yh,3),r=r&&this.pc(3)),this.ea[4]&&(this.HN(e,t,i,this.Yh,this.kh),r=r&&this.pc(4)),this.ea[5]&&(this.fE(e,i,this.Yh,5),r=r&&this.pc(5)),this.ea[6]&&(this.vG(e,i,t,6),r=r&&this.pc(6)),this.ea[7]&&(this.fE(e,t,this.kh,7),r=r&&this.pc(7)),r},t.prototype.aE=function(e,t,i){var r=!0;return this.ea[0]&&(this.ES(e,t),r=r&&this.pc(0)),this.ea[2]&&(this.BS(e,t),r=r&&this.pc(2)),this.ea[3]&&(this.GN(e,t,i),r=r&&this.pc(3)),this.ea[5]&&(this.EN(e,t),r=r&&this.pc(5)),this.ea[6]&&(this.mQ(e,t),r=r&&this.pc(6)),r},t.prototype.QG=function(e,t,i){var r=!0;return this.ea[0]&&(this.HS(e,t,i,this.Yh),r=r&&this.pc(0)),this.ea[2]&&(this.FS(e,i),r=r&&this.pc(2)),this.ea[3]&&(this.JN(e,t,i,this.Yh),r=r&&this.pc(3)),this.ea[5]&&(this.IN(e,t,i,this.Yh),r=r&&this.pc(5)),this.ea[6]&&(this.nQ(e,t,i),r=r&&this.pc(6)),r},t.prototype.ZU=function(e,t,i){var r=!0;return this.ea[0]&&(this.IS(e,t,i),r=r&&this.pc(0)),this.ea[2]&&(this.wG(e,t,i,2),r=r&&this.pc(2)),this.ea[6]&&(this.wG(e,i,t,6),r=r&&this.pc(6)),r},t.prototype.CS=function(e,t,i){2!=this.J[0]&&(e=this.j.af(e))&t&&e&i&&(this.J[0]=2)},t.prototype.sG=function(e,t,i){if(1!=this.J[i]){var r=this.j.af(this.j.xa(e));this.j.af(e)&t&&r&t&&(this.J[i]=1)}},t.prototype.tG=function(e,t,i,r){2!=this.J[r]&&(e=this.j.af(e))&t&&!(e&i)&&(this.J[r]=2)},t.prototype.BN=function(e,t,i){if(1!=this.J[4]){var r=this.j.dh(e);r&t&&r&i?this.J[4]=1:0!=this.J[4]&&1!=this.j.Ab(this.j.te(this.j.xa(e)),this.Ui)&&(e=this.j.xd(this.j.uf(e)))&t&&e&i&&(this.J[4]=0)}},t.prototype.eE=function(e,t,i){if(1!=this.J[i]){var r=this.j.af(this.j.xa(e));!(this.j.af(e)&t)&&!(r&t)&&(this.J[i]=1)}},t.prototype.DS=function(e,t){if(1!=this.J[0]){var i=this.j.af(this.j.xa(e));this.j.af(e)&t&&i&t&&(this.J[0]=1)}},t.prototype.zS=function(e,t,i,r){if(0!=this.J[1]&&1!=this.j.Ab(this.j.te(this.j.xa(e)),this.Ui)){var n=this.j.uf(e),s=this.j.xd(n);!(s&t)&&this.j.af(e)&t&&(e=this.j.ng(n,r),s&i&&0!=e%2&&(this.J[1]=0))}},t.prototype.AS=function(e,t){2!=this.J[2]&&this.j.dh(e)&t&&(this.J[2]=2)},t.prototype.FN=function(e,t,i,r){if(1!=this.J[3]){var n=this.j.dh(e);n&t&&n&i?this.J[3]=1:0!=this.J[3]&&1!=this.j.Ab(this.j.te(this.j.xa(e)),this.Ui)&&(n=this.j.uf(e),(e=this.j.xd(n))&t&&(t=this.j.ng(n,r),e&i&&0==t%2&&(this.J[3]=0)))}},t.prototype.CN=function(e,t,i,r){if(0!=this.J[4]&&1!=this.j.Ab(this.j.te(this.j.xa(e)),this.Ui)){var n=this.j.uf(e);(e=this.j.xd(n))&t&&(t=this.j.ng(n,r),e&i&&0!=t%2&&(this.J[4]=0))}},t.prototype.DN=function(e,t,i){1!=this.J[5]&&(e=this.j.dh(e))&t&&!(e&i)&&(this.J[5]=1)},t.prototype.lQ=function(e,t){if(1!=this.J[6]){var i=this.j.af(this.j.xa(e));!(this.j.af(e)&t)&&!(i&t)&&(this.J[6]=1)}},t.prototype.kQ=function(e,t,i,r){if(0!=this.J[7]&&1!=this.j.Ab(this.j.te(this.j.xa(e)),this.Ui)){var n=this.j.uf(e),s=this.j.xd(n);!(s&t)&&!(this.j.af(e)&t)&&(e=this.j.ng(n,r),s&i&&0!=e%2&&(this.J[7]=0))}},t.prototype.GS=function(e,t,i,r,n){if(1!=this.J[0]){var s=this.j.dh(e);s&t&&s&i?this.J[0]=1:0!=this.J[0]&&1!=this.j.Ab(this.j.te(this.j.xa(e)),this.Ui)&&(e=this.j.uf(e),(s=this.j.xd(e))&t&&s&i&&(t=this.j.ng(e,r),n=this.j.ng(e,n),0==t%2&&0==n%2&&(this.J[0]=0)))}},t.prototype.uG=function(e,t,i,r,n,s){if(0!=this.J[s]&&1!=this.j.Ab(this.j.te(this.j.xa(e)),this.Ui)){e=this.j.uf(e);var o=this.j.xd(e);o&t&&o&i&&(t=this.j.ng(e,r),n=this.j.ng(e,n),0==t%2&&0!=n%2&&(this.J[s]=0))}},t.prototype.vG=function(e,t,i,r){1!=this.J[r]&&(e=this.j.dh(e))&t&&!(e&i)&&(this.J[r]=1)},t.prototype.HN=function(e,t,i,r,n){if(0!=this.J[4]&&1!=this.j.Ab(this.j.te(this.j.xa(e)),this.Ui)){e=this.j.uf(e);var s=this.j.xd(e);s&t&&s&i&&(t=this.j.ng(e,r),n=this.j.ng(e,n),0!=t%2&&0!=n%2&&(this.J[4]=0))}},t.prototype.fE=function(e,t,i,r){0!=this.J[r]&&1!=this.j.Ab(this.j.te(this.j.xa(e)),this.Ui)&&(e=this.j.uf(e),!(this.j.xd(e)&t)&&0!=this.j.ng(e,i)%2&&(this.J[r]=0))},t.prototype.ES=function(e,t){0!=this.J[0]&&!(this.j.xd(e)&t)&&this.j.hk(this.j.cz(e))&t&&(this.J[0]=0)},t.prototype.BS=function(e,t){2!=this.J[2]&&this.j.xd(e)&t&&(this.J[2]=2)},t.prototype.GN=function(e,t,i){0!=this.J[3]&&(e=this.j.xd(e))&t&&e&i&&(this.J[3]=0)},t.prototype.EN=function(e,t){1!=this.J[5]&&this.j.xd(e)&t&&(this.J[5]=1)},t.prototype.mQ=function(e,t){0!=this.J[6]&&!(this.j.xd(e)&t)&&!(this.j.hk(this.j.cz(e))&t)&&(this.J[6]=0)},t.prototype.HS=function(e,t,i,r){if(0!=this.J[0]){var n=this.j.xd(e);n&t&&n&i&&0==this.j.ng(e,r)%2&&(this.J[0]=0)}},t.prototype.FS=function(e,t){1!=this.J[2]&&(-1!=this.j.Me(e)?this.J[2]=1:0!=this.J[2]&&!(this.j.xd(e)&t)&&(this.J[2]=0))},t.prototype.JN=function(e,t,i,r){if(0!=this.J[3]){var n=this.j.xd(e);n&t&&n&i&&0!=this.j.ng(e,r)%2&&(this.J[3]=0)}},t.prototype.IN=function(e,t,i,r){if(0!=this.J[5]){var n=this.j.xd(e);n&t&&!(n&i)&&0!=this.j.ng(e,r)%2&&(this.J[5]=0)}},t.prototype.nQ=function(e,t,i){0!=this.J[6]&&!((e=this.j.xd(e))&t)&&e&i&&(this.J[6]=0)},t.prototype.IS=function(e,t,i){0!=this.J[0]&&(e=this.j.xd(e))&t&&e&i&&(this.J[0]=0)},t.prototype.wG=function(e,t,i,r){0!=this.J[r]&&(e=this.j.xd(e))&t&&!(e&i)&&(this.J[r]=0)},t.prototype.Bp=function(t,i){var r=!1;t=this.j.La(t),i=this.j.La(i),this.Ui=this.j.$g();for(var n=this.j.Re;-1!=n;n=this.j.Rf(n)){var s=this.j.Me(n);if(-1==s){if(-1!=this.Sm)switch(this.Sm){case 3:r=this.aE(n,t,i);break;case 4:r=this.QG(n,t,i);break;default:throw e.i.fa("internal error")}}else{var o=s;do{var a=o;if(1!=this.j.Ab(a,this.Ui))do{switch(this.vw){case 0:r=this.xN(a,t,i);break;case 1:r=this.yN(a,t,i);break;case 2:r=this.mT(a,t,i);break;default:throw e.i.fa("internal error")}if(r)break;this.j.Kb(a,this.Ui,1),a=this.j.jc(a)}while(a!=o&&!r);if(r)break;o=this.j.jc(this.j.xa(a))}while(o!=s);if(r)break}}r||this.UJ(),this.j.Jg(this.Ui)},t.prototype.Gy=function(t,i){var r=!1;t=this.j.La(t),i=this.j.La(i);for(var n=this.j.Re;-1!=n;n=this.j.Rf(n)){switch(this.Sm){case 3:r=this.aE(n,t,i);break;case 4:r=this.QG(n,t,i);break;case 5:r=this.ZU(n,t,i);break;default:throw e.i.Qa()}if(r)break}r||this.UJ()},t.prototype.er=function(e,t){this.j.dr(e,t)},t.prototype.Wo=function(e,t,i){this.YP(e,t,i),this.er(e,i)},t.prototype.YP=function(t,i,r){for(e.Tk.V(t,i,r,!1),t.Gp(0,!0,!0),i=t.ld;-1!=i;i=t.ue(i))1736==t.ic(i)&&e.rn.V(t,i,-1,!1,r)},t.WE=function(t,i){var r=t.getType();return e.aa.yd(r)?((i=new e.Ta(t.description)).oc(t,!0),i):197==r?(r=new e.l,t.A(r),r.ca()<=i&&r.R()<=i?(i=new e.Sa(t.description),t.sf(i),i):r.ca()<=i||r.R()<=i?(i=new e.Ta(t.description),r=new e.Sa,t.Hf(0,r),i.nf(r),t.Hf(2,r),i.lineTo(r),i):((i=new e.Da(t.description)).ad(t,!1),i)):t},t}(),e.am=t}(Y||(Y={})),function(e){var t=function(){function t(t){this.Em=new e.ia(0),this.dw=new e.ia(0),this.wt=new e.h,this.xt=new e.h,this.g=t,this.Hs=-1}return t.prototype.bc=function(e){return this.g.bc(this.zz(e))},t.prototype.Bv=function(e){var t=this.iz(e);if(e=this.HF(e),this.g.Ma(t)==e){var i=t;t=e,e=i}return this.g.Gc(t,this.wt),this.g.Gc(e,this.xt),this.wt.y<this.xt.y},t.prototype.zz=function(e){var t=this.iz(e);return e=this.HF(e),this.g.U(t)==e?t:e},t.prototype.iz=function(e){return this.Em.get(e)},t.prototype.HF=function(e){return this.dw.get(e)},t.prototype.rF=function(e){this.Em.set(e,this.Hs),this.Hs=e},t.prototype.nI=function(t){if(-1!=this.Hs){var i=this.Hs;return this.Hs=this.Em.get(i),this.Em.set(i,t),this.dw.set(i,this.g.U(t)),i}return null==this.Em&&(this.Em=new e.ia(0),this.dw=new e.ia(0)),i=this.Em.size,this.Em.add(t),this.dw.add(this.g.U(t)),i},t.prototype.rz=function(e){return this.g.bd(this.iz(e))},t}();e.yY=t;var i=function(){function t(t){this.Be=t,this.ie=new e.yb,this.Nm=new e.yb,this.CH=0,this.Ao=null,this.yA=-1}return t.prototype.compare=function(e,t,i){i=e.ja(i);var r=this.Be.hb;if(this.yA==t)var n=this.CH;else this.Ao=r.bc(t),null==this.Ao?((e=r.g).ed(r.zz(t),this.ie),this.Ao=this.ie,n=this.ie.Pe(this.Be.yh,0)):n=this.Ao.Pe(this.Be.yh,0),this.CH=n,this.yA=t;if(null==(e=r.bc(i))){(e=r.g).ed(r.zz(i),this.Nm),e=this.Nm;var s=this.Nm.Pe(this.Be.yh,0)}else s=e.Pe(this.Be.yh,0);return n==s&&(t=r.Bv(t),i=r.Bv(i),(t=.5*((i=Math.min(t?this.Ao.la:this.Ao.na,i?e.la:e.na))+this.Be.yh))==this.Be.yh&&(t=i),n=this.Ao.Pe(t,0),s=e.Pe(t,0)),n<s?-1:n>s?1:0},t.prototype.reset=function(){this.yA=-1},t}(),r=function(){function r(){this.Wm=this.Gl=null,this.fb=new e.Yj,this.fb.RP(),this.$d=new i(this),this.fb.Vo(this.$d)}return r.prototype.HQ=function(){var t=!1;if(this.fw&&(t=this.IQ()),1==this.g.da(this.X)){var i=this.g.Ob(this.X);return t=this.g.wz(i),this.g.PB(i,!0),0>t&&(t=this.g.Xa(i),this.g.pJ(t),this.g.Wg(i,this.g.Ma(t)),!0)}for(this.El=this.g.Ky(),this.wo=this.g.Ky(),i=this.g.Ob(this.X);-1!=i;i=this.g.Rb(i))this.g.gr(i,this.El,0),this.g.gr(i,this.wo,-1);i=new e.ia(0),this.yh=NaN;var r=new e.h;this.et=this.g.da(this.X),this.ro=this.g.Gd(),this.Rs=this.g.Gd();for(var n=this.Gl.rc(this.Gl.je);-1!=n;n=this.Gl.lb(n)){var s=this.Gl.getData(n);if(this.g.Gc(s,r),r.y!=this.yh&&0!=i.size&&(t=this.ut(i)||t,this.$d.reset(),i.clear(!1)),i.add(s),this.yh=r.y,0==this.et)break}for(0<this.et&&(t=this.ut(i)||t,i.clear(!1)),this.g.Td(this.ro),this.g.Td(this.Rs),i=this.g.Ob(this.X);-1!=i;)if(3==this.g.sj(i,this.El)){for(this.g.PB(i,!0),r=i,i=this.g.sj(i,this.wo);-1!=i;)n=this.g.sj(i,this.wo),this.g.ZT(this.X,this.g.Rb(r),i),r=i,i=n;i=this.g.Rb(r)}else this.g.PB(i,!1),i=this.g.Rb(i);return this.g.CB(this.El),this.g.CB(this.wo),t},r.prototype.ut=function(e){return this.$V(e)},r.prototype.$V=function(i){var r=!1;null==this.hb&&(this.hb=new t(this.g)),null==this.Wm?(this.Wm=new e.ia(0),this.Wm.Jb(16)):this.Wm.clear(!1),this.ZV(i);for(var n=0,s=i.size;n<s;n++){var o=i.get(n);-1!=o&&this.oG(o,-1)}for(n=0;n<this.Wm.size&&0<this.et;n++)if(i=this.Wm.get(n),o=this.hb.rz(this.fb.ja(i)),s=-1,0==this.g.sj(o,this.El)){o=this.fb.we(i);for(var a,l=i;-1!=o;){var c=this.fb.ja(o),h=this.hb.rz(c),u=this.g.sj(h,this.El);if(0!=u){s=h;break}l=o,o=this.fb.we(o)}-1==o?(a=!0,o=l):(c=this.fb.ja(o),a=this.hb.Bv(c),o=this.fb.lb(o),a=!a);do{if(c=this.fb.ja(o),h=this.hb.rz(c),0==(u=this.g.sj(h,this.El))&&(a!=this.hb.Bv(c)&&(r=this.g.Xa(h),this.g.pJ(r),this.g.Wg(h,this.g.Ma(r)),r=!0),this.g.gr(h,this.El,a?3:2),a||(l=this.g.sj(s,this.wo),this.g.gr(s,this.wo,h),this.g.gr(h,this.wo,l)),this.et--,0==this.et))return r;s=h,l=o,o=this.fb.lb(o),a=!a}while(l!=i)}return r},r.prototype.ZV=function(e){for(var t=0,i=e.size;t<i;t++){var r=e.get(t),n=this.g.Pa(r,this.ro),s=this.g.Pa(r,this.Rs);if(-1!=n){var o=this.fb.ja(n);this.hb.rF(o),this.g.Ra(r,this.ro,-1)}-1!=s&&(o=this.fb.ja(s),this.hb.rF(o),this.g.Ra(r,this.Rs,-1)),o=-1,-1!=n&&-1!=s?(this.fb.vd(n,-1),this.fb.vd(s,-1),e.set(t,-1)):o=-1!=n?n:s,-1!=o&&(this.oG(r,o)||this.fb.vd(o,-1),e.set(t,-1))}},r.prototype.oG=function(t,i){var r=new e.h,n=new e.h;this.g.Gc(t,r);var s=this.g.U(t);this.g.Gc(s,n);var o=!1;if(r.y<n.y){o=!0;var a=this.hb.nI(t);if(-1==i)var l=this.fb.addElement(a,-1);else l=i,this.fb.Sj(l,a);-1==(a=this.g.Pa(s,this.ro))?this.g.Ra(s,this.ro,l):this.g.Ra(s,this.Rs,l),s=this.g.bd(t),0==this.g.sj(s,this.El)&&this.Wm.add(l)}return s=this.g.Ma(t),this.g.Gc(s,n),r.y<n.y&&(o=!0,a=this.hb.nI(s),-1==i?l=this.fb.addElement(a,-1):(l=i,this.fb.Sj(l,a)),-1==(a=this.g.Pa(s,this.ro))?this.g.Ra(s,this.ro,l):this.g.Ra(s,this.Rs,l),s=this.g.bd(t),0==this.g.sj(s,this.El)&&this.Wm.add(l)),o},r.V=function(e,t,i,n){var s=new r;return s.g=e,s.X=t,s.Gl=i,s.fw=n,s.HQ()},r.prototype.IQ=function(){var t=new e.ia(0),i=new e.ia(0),r=-1,n=-1,s=new e.h;s.Rc();for(var o=-1,a=-1,l=-1,c=new e.h,h=this.Gl.rc(this.Gl.je);-1!=h;h=this.Gl.lb(h)){var u=this.Gl.getData(h);this.g.Gc(u,c);var p=this.g.bd(u);s.qb(c)&&a==p?(-1==n&&(r=this.g.Ky(),n=this.g.Gd()),-1==l&&(l=i.size,this.g.Ra(o,n,l),i.add(1),-1==this.g.sj(p,r)&&(this.g.gr(p,r,o),t.add(p))),this.g.Ra(u,n,l),i.bX(i.Fc()+1)):(l=-1,s.L(c)),o=u,a=p}if(0==t.size)return!1;for(s=new e.ia(0),o=new e.ia(0),a=0,l=t.size;a<l;a++){p=t.get(a);var d=this.g.sj(p,r);for(u=this.g.Pa(d,n),s.clear(!1),o.clear(!1),s.add(d),o.add(u),u=this.g.U(d);u!=d;u=this.g.U(u)){var f=u;if(-1!=(c=this.g.Pa(f,n)))if(0==o.size)o.add(c),s.add(f);else if(o.Fc()==c){h=s.Fc();var y=this.g.U(h);d=this.g.U(f),this.g.Bc(h,d),this.g.Cc(d,h),this.g.Bc(f,y),this.g.Cc(y,f),f=[!1],y=this.g.nG(this.X,y,this.g.Xa(p),f),this.g.Ra(u,n,-1),f[0]&&this.g.Jf(p,d),u=this.g.Ja(p),u-=d=this.g.Ja(y),this.g.Vj(p,u),i.set(c,i.get(c)-1),1==i.get(c)&&(i.set(c,0),o.If(),s.If()),u=d=h}else s.add(u),o.add(c)}}return this.g.CB(r),this.g.Td(n),!0},r}();e.WL=r}(Y||(Y={})),function(e){var t=function(){function t(){}return t.prototype.ig=function(){this.PA=this.sb=null},t.prototype.get=function(){return this.PA},t.prototype.set=function(t){if(this.PA=t,null!=t)throw 322==t.getType()&&(this.sb=t),e.i.Qa()},t.prototype.create=function(t){if(322!=t)throw e.i.fa("Not Implemented");this.Or()},t.prototype.Or=function(){null==this.sb&&(this.sb=new e.yb),this.PA=this.sb},t}();e.ig=t}(Y||(Y={})),function(e){(e=e.XL||(e.XL={}))[e.enumLineSeg=1]="enumLineSeg",e[e.enumBezierSeg=2]="enumBezierSeg",e[e.enumArcSeg=4]="enumArcSeg",e[e.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",e[e.enumSegmentMask=7]="enumSegmentMask",e[e.enumDensified=8]="enumDensified"}(Y||(Y={})),function(e){var t=function(e){this.$i=e,this.qC=this.rC=1,this.sB=this.rB=this.tB=0},i=function(){function i(){this.Fq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Bk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Bf=new e.Sa,this.qa=this.Cw=0,this.mo=[],this.$s=[],this.yw=[],this.Iq=[],this.MA=[]}return i.prototype.wB=function(e){if(null!=e){for(var t=0,i=e.length;t<i;t++)this.rW(e[t]);e.length=0}},i.prototype.rW=function(e){e.$i=null,this.Iq.push(e)},i.prototype.Ow=function(e){if(0===this.Iq.length)var i=new t(e);else(i=this.Iq[this.Iq.length-1]).$i=e,--this.Iq.length;return i},i.prototype.SR=function(e,t){return 0==e?this.$s[t]:this.yw[t]},i.prototype.aB=function(){this.Cw>=this.MA.length&&this.MA.push(new e.ig);var t=this.MA[this.Cw];return this.Cw++,t},i.prototype.clear=function(){this.wB(this.mo),this.wB(this.$s),this.wB(this.yw),this.Cw=0},i.prototype.Oo=function(e){this.mo.push(this.Ow(e))},i.prototype.ol=function(e){return 0==e?this.$s.length:this.yw.length},i.prototype.Vp=function(e,t){return this.SR(e,t).$i},i.prototype.Ea=function(t,i){if(2!=this.mo.length)throw e.i.Qa();this.qa=t;var r=e.lc.ox(.01*t),n=!1,s=this.mo[0],o=this.mo[1];if(i||5&s.$i.zr(o.$i,t,!0)){if(322==s.$i.getType()){var a=s.$i;if(322==o.$i.getType()){i=o.$i;var l=e.yb.Zx(a,i,null,this.Fq,this.Bk,t);if(0==l)throw e.yb.Zx(a,i,null,this.Fq,this.Bk,t),e.i.Qa();t=Array(9),e.O.$u(t,null);for(var c=0;c<l;c++){var h=this.Fq[c],u=this.Bk[c],p=s.sB,d=1;0==h?(p=s.tB,d=s.rC):1==h&&(p=s.rB,d=s.qC);var f=o.sB,y=1;0==u?(f=o.tB,y=o.rC):1==u&&(f=o.rB,y=o.qC);var m=new e.h;p==f?(p=new e.h,a.hc(h,p),h=new e.h,i.hc(u,h),y/=u=d+y,e.lc.OG(p,h,y,m),e.h.yc(m,p)+e.h.yc(m,h)>r&&(n=!0)):p>f?(a.hc(h,m),h=new e.h,i.hc(u,h),e.h.yc(m,h)>r&&(n=!0)):(i.hc(u,m),p=new e.h,a.hc(h,p),e.h.yc(m,p)>r&&(n=!0)),t[c]=m}for(s=0,o=-1,c=0;c<=l;c++)(y=c<l?this.Fq[c]:1)!=s&&(r=this.aB(),a.ah(s,y,r),-1!=o&&r.get().Dc(t[o]),c!=l&&r.get().Qc(t[c]),s=y,this.$s.push(this.Ow(r.get()))),o=c;for(a=[0,0,0,0,0,0,0,0,0],c=0;c<l;c++)a[c]=c;for(1<l&&this.Bk[0]>this.Bk[1]&&(y=this.Bk[0],this.Bk[0]=this.Bk[1],this.Bk[1]=y,c=a[0],a[0]=a[1],a[1]=c),s=0,o=-1,c=0;c<=l;c++)(y=c<l?this.Bk[c]:1)!=s&&(r=this.aB(),i.ah(s,y,r),-1!=o&&(s=a[o],r.get().Dc(t[s])),c!=l&&(s=a[c],r.get().Qc(t[s])),s=y,this.yw.push(this.Ow(r.get()))),o=c;return n}}throw e.i.Qa()}return!1},i.prototype.Kz=function(t,i,r){if(i.copyTo(this.Bf),1!=this.mo.length)throw e.i.Qa();this.qa=t;var n=this.mo[0];if(r||n.$i.ru(i.D(),t,!0)){if(322!=n.$i.getType())throw e.i.Qa();var s=(t=n.$i).fe(i.D(),!1);this.Fq[0]=s;var o=n.sB;for(r=1,0==s?(o=n.tB,r=n.rC):1==s&&(o=n.rB,r=n.qC),n=new e.h,0==o?(o=new e.h,t.hc(s,o),i=i.D(),e.lc.OG(o,i,1/(r+1),n)):0<o?(n=new e.h,t.hc(s,n)):n=i.D(),r=0,s=-1,o=0;1>=o;o++){if((i=1>o?this.Fq[o]:1)!=r){var a=this.aB();t.ah(r,i,a),-1!=s&&a.get().Dc(n),1!=o&&a.get().Qc(n),r=i,this.$s.push(this.Ow(a.get()))}s=o}this.Bf.Cb(n)}},i}();e.TC=i}(Y||(Y={})),function(e){var t=function(){function t(t){this.Ds=this.rk=this.sb=null,this.ag=0,this.zm=!1,this.zf=-1,this.Cl=this.Jd=0,this.gb=-1,this.ib=t,this.ag=this.Wx(this.Cl),this.zm=!1,this.rk=null,this.Ds=new e.h}return t.prototype.BW=function(t){if(this.ib!=t.ib)throw e.i.Hb();this.zf=t.zf,this.Jd=t.Jd,this.gb=t.gb,this.Cl=t.Cl,this.ag=t.ag,this.zm=t.zm,this.rk=null},t.prototype.ha=function(){if(this.zf!=this.Jd&&this.BD(),this.zm)this.Jd=(this.Jd+1)%this.ag;else{if(this.Jd==this.ag)throw e.i.ce();this.Jd++}return this.rk},t.prototype.li=function(){if(this.zm)this.Jd=(this.ag+this.Jd-1)%this.ag;else{if(0==this.Jd)throw e.i.ce();this.Jd--}return this.Jd!=this.zf&&this.BD(),this.rk},t.prototype.DW=function(){this.zf=-1,this.Jd=0},t.prototype.EW=function(){this.Jd=this.ag,this.zf=-1},t.prototype.Vb=function(e,t){if(void 0===t&&(t=-1),0<=this.gb&&this.gb<this.ib.da()){var i=this.IM();if(e>=i&&e<this.ib.Vc(this.gb))return this.zf=-1,void(this.Jd=e-i)}t=0<=t&&t<this.ib.da()&&e>=this.ib.Ba(t)&&e<this.ib.Vc(t)?t:this.ib.sz(e),this.Cl=t+1,this.gb=t,this.zf=-1,this.Jd=e-this.ib.Ba(t),this.ag=this.Wx(t),this.ib.Ba(this.gb),this.ib.dc(this.gb)},t.prototype.$a=function(){return this.gb=this.Cl,!(this.gb>=this.ib.da()||(this.zf=-1,this.Jd=0,this.ag=this.Wx(this.gb),this.ib.Ba(this.gb),this.ib.dc(this.gb),this.Cl++,0))},t.prototype.Zi=function(){this.ag=this.Jd=this.zf=-1,this.Cl=0,this.gb=-1},t.prototype.Wx=function(e){if(this.ib.Ac())return 0;var t=1;return this.ib.dc(e)&&(t=0),this.ib.Ja(e)-t},t.prototype.On=function(){return this.zf==this.ag-1&&this.ib.dc(this.gb)},t.prototype.JB=function(){this.zm=!0},t.prototype.wb=function(){return this.ib.nb.o[this.gb]+this.zf},t.prototype.IM=function(){return this.ib.Ba(this.gb)},t.prototype.ik=function(){return this.On()?this.ib.Ba(this.gb):this.wb()+1},t.prototype.vm=function(){return 0==this.zf},t.prototype.Qn=function(){return this.zf==this.ag-1},t.prototype.Ha=function(){return this.Jd<this.ag},t.prototype.Ez=function(){return 0<this.Jd},t.prototype.Of=function(){var e=new t(this.ib);return e.zf=this.zf,e.Jd=this.Jd,e.ag=this.ag,e.gb=this.gb,e.Cl=this.Cl,e.ib=this.ib,e.zm=this.zm,e},t.prototype.BD=function(){if(0>this.Jd||this.Jd>=this.ag)throw e.i.ce();this.zf=this.Jd;var t=this.wb();this.ib.mc();var i=this.ib.Ve,r=1;switch(null!=i&&(r=7&i.read(t)),i=this.ib.description,r){case 1:null==this.sb&&(this.sb=new e.yb),this.rk=this.sb;break;case 2:throw e.i.fa("internal error");default:throw e.i.Qa()}this.rk.Nf(i),r=this.ik(),this.ib.Gc(t,this.Ds),this.rk.Dc(this.Ds),this.ib.Gc(r,this.Ds),this.rk.Qc(this.Ds);for(var n=1,s=i.Aa;n<s;n++)for(var o=i.kd(n),a=e.ra.Va(o),l=0;l<a;l++){var c=this.ib.Uc(o,t,l);this.rk.YB(o,l,c),c=this.ib.Uc(o,r,l),this.rk.OB(o,l,c)}},t.prototype.$S=function(){return this.gb==this.ib.da()-1},t.prototype.Pn=function(){var e=this.ib.VR();return null!=e&&1!=(7&e.read(this.zf))},t}();e.YL=t}(Y||(Y={})),function(e){var t=function(){function t(t){t instanceof e.aa?(this.xH=t,this.ya=-1,this.Ei=1):(this.vT=t.slice(0),this.ya=-1,this.Ei=t.length)}return t.prototype.La=function(){return this.ya},t.prototype.next=function(){return this.ya<this.Ei-1?(this.ya++,null!=this.xH?this.xH:this.vT[this.ya]):null},t.prototype.qe=function(){},t}();e.Zc=t}(Y||(Y={})),function(e){var t=function(){this.next=null},i=function(){function i(){this.Tq=this.Kw=this.Lw=0,this.kF=!1,this.gK=0,this.gn=this.Kf=this.Wl=this.Jh=null,this.Ol=0,this.vy=null,this.pl=this.oi=-1}return i.prototype.AX=function(t,i,r){this.oi=t,this.pl=i,this.Jh=this.Wl=null,this.Tq=0,this.vy=r,null==this.gn&&(this.gn=e.O.lg(384,0)),this.nK()},i.prototype.R=function(){return this.oi},i.prototype.ca=function(){return this.pl},i.prototype.flush=function(){0<this.Ol&&(this.vy.gF(this.gn,this.Ol),this.Ol=0)},i.prototype.nK=function(){if(0<this.Tq){for(var e=0;e<this.pl;e++){for(var t=this.Wl[e];null!=t;){var i=t;t=t.next,i.next=null}this.Wl[e]=null}this.Jh=null}this.Lw=this.pl,this.Kw=-1,this.Tq=0},i.prototype.iJ=function(e){for(this.kF=e==i.Cx,e=this.Lw;e<=this.Kw;e++)this.sN(),this.lN(e),this.ZP();this.nK()},i.prototype.jy=function(i,r,n,s){if(r!=s){var o=1;if(r>s&&(o=i,i=n,n=o,o=r,r=s,s=o,o=-1),!(0>s||r>=this.pl)){0>i&&0>n?n=i=-1:i>=this.oi&&n>=this.oi&&(n=i=this.oi);var a=(n-i)/(s-r);s>this.pl&&(n=a*((s=this.pl)-r)+i),0>r&&(i=a*(0-r)+i,r=0);var l=Math.max(this.oi+1,8388607);-8388607>i?(r=(0-i)/a+r,i=0):i>l&&(r=(this.oi-i)/a+r,i=this.oi),-8388607>n?s=(0-i)/a+r:n>l&&(s=(this.oi-i)/a+r),(r=e.O.truncate(r))!=(s=e.O.truncate(s))&&((n=new t).x=e.O.truncate(4294967296*i),n.y=r,n.H=s,n.WP=e.O.truncate(4294967296*a),n.dir=o,null==this.Wl&&(this.Wl=e.O.lg(this.pl,null)),n.next=this.Wl[n.y],this.Wl[n.y]=n,n.y<this.Lw&&(this.Lw=n.y),n.H>this.Kw&&(this.Kw=n.H),this.Tq++)}}},i.prototype.sN=function(){if(null!=this.Jh){for(var e=!1,t=null,i=this.Jh;null!=i;)if(i.y++,i.y==i.H){var r=i;i=i.next,null!=t?t.next=i:this.Jh=i,r.next=null}else i.x+=i.WP,null!=t&&t.x>i.x&&(e=!0),t=i,i=i.next;e&&(this.Jh=this.fK(this.Jh))}},i.prototype.lN=function(e){if(!(e>=this.pl)){var t=this.Wl[e];if(null!=t){this.Wl[e]=null,t=this.fK(t),this.Tq-=this.gK,e=this.Jh;for(var i=!0,r=t,n=null;null!=e&&null!=r;)e.x>r.x?(i&&(this.Jh=r),i=r.next,r.next=e,null!=n&&(n.next=r),n=r,r=i):(i=e.next,e.next=r,null!=n&&(n.next=e),n=e,e=i),i=!1;null==this.Jh&&(this.Jh=t)}}},i.eK=function(e,t){return 0>e?0:e>t?t:e},i.prototype.ZP=function(){if(null!=this.Jh)for(var t=0,r=this.Jh,n=e.O.truncate(e.O.XG(r.x)),s=r.next;null!=s;s=s.next)if(t=this.kF?1^t:t+s.dir,s.x>r.x){var o=e.O.truncate(e.O.XG(s.x));0!=t&&(r=i.eK(n,this.oi),(n=i.eK(o,this.oi))>r&&r<this.oi&&(this.gn[this.Ol++]=r,this.gn[this.Ol++]=n,this.gn[this.Ol++]=s.y,this.Ol==this.gn.length&&(this.vy.gF(this.gn,this.Ol),this.Ol=0))),r=s,n=o}},i.prototype.fK=function(t){for(var r=0,n=t;null!=n;n=n.next)r++;if(this.gK=r,1==r)return t;null==this.Kf?this.Kf=e.O.lg(Math.max(r,16),null):this.Kf.length<r&&(this.Kf=e.O.lg(Math.max(r,2*this.Kf.length),null));var s=0;for(n=t;null!=n;n=n.next)this.Kf[s++]=n;for(2==r?this.Kf[0].x>this.Kf[1].x&&(t=this.Kf[0],this.Kf[0]=this.Kf[1],this.Kf[1]=t):i.AN(this.Kf,r,(function(e,t){return e==t?0:e.x<t.x?-1:e.x>t.x?1:0})),t=this.Kf[0],this.Kf[0]=null,n=t,s=1;s<r;s++)n.next=this.Kf[s],n=this.Kf[s],this.Kf[s]=null;return n.next=null,t},i.AN=function(e,t,i){if(t==e.length)e.sort(i);else{var r=e.slice(0,0),n=e.slice(t);t=e.slice(0,t).sort(i),e.length=0,e.push.apply(e,r.concat(t).concat(n))}},i.Cx=0,i}();e.Px=i}(Y||(Y={})),function(e){var t=function(){function t(){}return t.prototype.ui=function(e,t){var i=this.g.Pa(e,this.Pq);if(this.Dl==i&&(this.Dl=this.oe.lb(this.Dl)),this.ho==i&&(this.ho=this.oe.lb(this.ho)),this.oe.jd(this.RA,i),this.bk(e),t&&-1!=(t=this.g.bd(e))&&this.g.Xa(t)==e){var r=this.g.U(e);if(r!=e){if((i=this.g.bd(r))==t)return void this.g.Jf(t,r);if((r=this.g.Ma(e))!=e&&(i=this.g.bd(r))==t)return void this.g.Jf(t,r)}this.g.Jf(t,-1),this.g.Wg(t,-1)}},t.prototype.pD=function(){for(var t=!1,i=new e.h;;){null==this.Wh?(this.Wh=new e.ia(0),this.zs=new e.ia(0),this.xe=new e.ia(0)):(this.Wh.clear(!1),this.zs.clear(!1),this.xe.clear(!1));for(var r=this.ho,n=0,s=!0;r!=this.Dl;){var o=this.oe.getData(r),a=new e.h;this.g.Gc(o,a),s&&(this.g.Gc(o,i),s=!1),a=this.g.Ma(o);var l=this.g.U(o);-559038737!=this.g.Pa(a,this.zg)&&(this.Wh.add(a),this.g.Ra(a,this.zg,-559038737),this.zs.add(o),this.xe.add(n++)),-559038737!=this.g.Pa(l,this.zg)&&(this.Wh.add(l),this.g.Ra(l,this.zg,-559038737),this.zs.add(o),this.xe.add(n++)),r=this.oe.lb(r)}if(2>this.Wh.size)break;var c=this;for(this.xe.Vd(0,this.xe.size,(function(e,t){return c.pM(e,t)})),r=0,n=this.xe.size;r<n;r++)s=this.xe.get(r),s=this.Wh.get(s),this.g.Ra(s,this.zg,r),a=new e.h,this.g.Gc(s,a);for(a=this.TM(i),r=0,n=this.xe.size;r<n;r++)-1!=(s=this.xe.get(r))&&(s=this.Wh.get(s),this.g.Ra(s,this.zg,-1));if(!a)break;t=!0}return t},t.prototype.TM=function(e){for(var t=!1,i=!0;i;){i=!1;var r=0;-1==this.xe.get(r)&&(r=this.cm(r));for(var n=this.cm(r),s=0,o=this.xe.size;s<o&&-1!=r&&-1!=n&&r!=n;s++){var a=this.xe.get(r);n=this.xe.get(n),a=this.Wh.get(a),n=this.Wh.get(n);var l=this.g.U(a);this.g.Dv(l,e)||(l=this.g.Ma(a));var c=this.g.U(n);this.g.Dv(c,e)||(c=this.g.Ma(n));var h=this.pu(l,a),u=this.pu(c,n),p=h?this.g.Ma(l):this.g.U(l),d=u?this.g.Ma(c):this.g.U(c),f=!1;(this.sp(l)||this.sp(c)||this.sp(a)||this.sp(n)||this.sp(p)||this.sp(d))&&(f=!0),!f&&this.g.fq(a,n)&&(f=!0,this.tD(h,u,l,a,c,n)),!f&&this.g.fq(p,d)&&(f=!0,this.tD(!h,!u,l,p,c,d)),f&&(t=!0),i=i||f,r=this.cm(r),n=this.cm(r)}}if(!t)for(r=0,-1==this.xe.get(r)&&(r=this.cm(r)),n=this.cm(r),s=0,o=this.xe.size;s<o&&-1!=r&&-1!=n&&r!=n;s++)a=this.xe.get(r),n=this.xe.get(n),a=this.Wh.get(a),n=this.Wh.get(n),l=this.g.U(a),this.g.Dv(l,e)||(l=this.g.Ma(a)),c=this.g.U(n),this.g.Dv(c,e)||(c=this.g.Ma(n)),h=this.pu(l,a),u=this.pu(c,n),p=h?this.g.Ma(l):this.g.U(l),d=u?this.g.Ma(c):this.g.U(c),this.DM(h,u,a,l,p,n,c,d)&&(t=!0),r=this.cm(r),n=this.cm(r);return t},t.prototype.XM=function(){1736==this.g.ic(this.X)&&1==this.g.In(this.X)&&(new e.Fg).MU(this.fw,this.g,this.X,this.nd);var t=!1,i=!0;this.zg=this.Pq=-1;var r=this.g.I(this.X),n=new e.ia(0);n.Jb(r);for(var s=this.g.Ob(this.X);-1!=s;s=this.g.Rb(s))for(var o=this.g.Xa(s),a=0,l=this.g.Ja(s);a<l;a++)n.add(o),o=this.g.U(o);var c=this.g.td.o,h=this.g.td.stride;this.g.vb.mc();var u=this.g.vb.za[0].o;for(n.Vd(0,r,(function(e,t){var i=c[h*e],r=c[h*t],n=u[2*i];i=u[2*i+1];var s=u[2*r];return 0==(n=i<(r=u[2*r+1])?-1:i>r?1:n<s?-1:n>s?1:0)&&(n=(e=c[h*e+3])<(t=c[h*t+3])?-1:e==t?0:1),n})),this.Pq=this.g.Gd(),this.oe=new e.jp,this.RA=this.oe.Ph(0),this.oe.fn(r),s=0;s<r;s++)o=n.get(s),a=this.oe.addElement(this.RA,o),this.g.Ra(o,this.Pq,a);for(this.zg=this.g.Gd(),this.Dl=-1,this.cD()&&(t=!0);i;){i=!1,r=0,n=!1;do{n=!1,this.ho=-1,l=0,s=new e.h,a=new e.h;for(var p=this.oe.rc(this.RA);-1!=p;)o=this.oe.getData(p),-1!=this.ho?(this.g.Gc(o,a),s.qb(a)?l++:(s.L(a),this.Dl=p,0<l&&(o=this.pD())&&(n=!0,-1!=this.Dl&&(o=this.oe.getData(this.Dl),this.g.Gc(o,s))),this.ho=p=this.Dl,l=0)):(this.ho=p,this.g.Gc(this.oe.getData(p),s),l=0),-1!=p&&(p=this.oe.lb(p));if(this.Dl=-1,0<l&&(o=this.pD())&&(n=!0),10<r++)throw e.i.Qa();n&&this.GM(),this.cD()&&(n=!0),i=i||n&&!1,t=t||n}while(n)}return this.g.Td(this.Pq),this.g.Td(this.zg),e.WL.V(this.g,this.X,this.oe,this.fw)||t},t.prototype.pu=function(e,t){return this.g.U(t)!=e},t.prototype.DM=function(e,t,i,r,n,s,o,a){if(r==o)return this.bk(i),this.bk(s),!1;var l=this.g.Pa(i,this.zg),c=this.g.Pa(n,this.zg),h=this.g.Pa(s,this.zg),u=this.g.Pa(a,this.zg),p=[0,0,0,0];for((i=[0,0,0,0,0,0,0,0])[0]=0,p[0]=l,i[1]=0,p[1]=c,i[2]=1,p[2]=h,i[3]=1,p[3]=u,l=1;4>l;l++){for(c=p[l],h=i[l],u=l-1;0<=u&&p[u]>c;)p[u+1]=p[u],i[u+1]=i[u],u--;p[u+1]=c,i[u+1]=h}return p=0,0!=i[0]&&(p|=1),0!=i[1]&&(p|=2),0!=i[2]&&(p|=4),0!=i[3]&&(p|=8),(5==p||10==p)&&(e==t?e?(this.g.Bc(a,r),this.g.Cc(r,a),this.g.Bc(n,o),this.g.Cc(o,n)):(this.g.Cc(a,r),this.g.Bc(r,a),this.g.Cc(n,o),this.g.Bc(o,n)):e?(this.g.Cc(r,s),this.g.Bc(s,r),this.g.Cc(o,n),this.g.Bc(n,o)):(this.g.Bc(r,s),this.g.Cc(s,r),this.g.Bc(o,n),this.g.Cc(n,o)),!0)},t.prototype.tD=function(e,t,i,r,n,s){this.MY?this.VM():this.UM(e,t,i,r,n,s)},t.prototype.VM=function(){throw e.i.fa("not implemented.")},t.prototype.UM=function(e,t,i,r,n,s){if(e!=t)e?(this.g.Bc(i,n),this.g.Cc(n,i),this.g.Bc(s,r),this.g.Cc(r,s),this.vn(n,i),this.ui(n,!0),this.g.mi(n,!0),this.bk(i),this.vn(s,r),this.ui(s,!0),this.g.mi(s,!1)):(this.g.Bc(n,i),this.g.Cc(i,n),this.g.Bc(r,s),this.g.Cc(s,r),this.vn(n,i),this.ui(n,!0),this.g.mi(n,!1),this.bk(i),this.vn(s,r),this.ui(s,!0),this.g.mi(s,!0)),this.bk(r);else{var o=e?i:r,a=t?n:s;for(e=e?r:i,t=t?s:n,n=!1,this.g.Bc(o,a),this.g.Bc(a,o),this.g.Cc(e,t),this.g.Cc(t,e),s=t;s!=a;)i=this.g.Ma(s),r=this.g.U(s),this.g.Cc(s,r),this.g.Bc(s,i),n=n||s==o,s=r;n||(i=this.g.Ma(a),r=this.g.U(a),this.g.Cc(a,r),this.g.Bc(a,i)),this.vn(a,o),this.ui(a,!0),this.g.mi(a,!1),this.bk(o),this.vn(t,e),this.ui(t,!0),this.g.mi(t,!1),this.bk(e)}},t.prototype.cD=function(){for(var e=!1,t=this.g.Ob(this.X);-1!=t;){for(var i=this.g.Xa(t),r=0,n=this.g.Ja(t);r<n&&1<n;){var s=this.g.Ma(i),o=this.g.U(i);this.g.fq(s,o)?(e=!0,this.ui(i,!1),this.g.pd(i,!0),this.ui(o,!1),this.g.pd(o,!0),i=s,r=0,n=this.g.Ja(t)):(i=o,r++)}if(2>this.g.Ja(t)){for(e=this.g.Xa(t),r=0,n=this.g.Ja(t);r<n;r++)this.ui(e,!1),e=this.g.U(e);t=this.g.Zq(t),e=!0}else t=this.g.Rb(t)}return e},t.prototype.sp=function(e){for(var t=!1;;){var i=this.g.U(e),r=this.g.Ma(e);if(i==e)return this.ui(e,!0),this.g.mi(e,!1),!0;if(!this.g.fq(i,r))break;if(t=!0,this.bk(r),this.bk(i),this.ui(e,!0),this.g.mi(e,!1),this.vn(i,r),this.ui(i,!0),this.g.mi(i,!0),i==r)break;e=r}return t},t.prototype.GM=function(){for(var e=0,t=this.oe.rc(this.oe.je);-1!=t;t=this.oe.lb(t)){var i=this.oe.getData(t);this.g.aj(i,-1)}for(var r=0,n=this.g.Ob(this.X);-1!=n;)if(-1==(t=this.g.Xa(n))||-1!=this.g.bd(t))i=n,n=this.g.Rb(n),this.g.$q(i);else{this.g.aj(t,n);var s=1;for(i=this.g.U(t);i!=t;i=this.g.U(i))this.g.aj(i,n),s++;this.g.cp(n,!1),this.g.Vj(n,s),this.g.Wg(n,this.g.Ma(t)),r+=s,e++,n=this.g.Rb(n)}for(t=this.oe.rc(this.oe.je);-1!=t;t=this.oe.lb(t))i=this.oe.getData(t),-1==this.g.bd(i)&&(n=this.g.nG(this.X,i,i,null),r+=this.g.Ja(n),e++);for(this.g.Rl(this.X,e),this.g.Tj(this.X,r),e=0,r=this.g.ld;-1!=r;r=this.g.ue(r))e+=this.g.I(r);this.g.bC(e)},t.prototype.cm=function(e){for(var t=0,i=this.xe.size-1;t<i;t++)if(e=(e+1)%this.xe.size,-1!=this.xe.get(e))return e;return-1},t.prototype.vn=function(e,t){var i=this.g.Pa(t,this.Pq),r=this.g.Pa(t,this.zg);this.g.lC(e,t),this.g.Ra(t,this.Pq,i),this.g.Ra(t,this.zg,r)},t.prototype.bk=function(e){var t=this.g.Pa(e,this.zg);-1!=t&&(this.xe.set(t,-1),this.g.Ra(e,this.zg,-1))},t.V=function(e,i,r,n,s){var o=new t;return o.g=e,o.X=i,o.xA=r,o.fw=n,o.nd=s,o.XM()},t.prototype.pM=function(t,i){var r=this.Wh.get(t),n=new e.h;this.g.Gc(r,n),r=new e.h;var s=this.Wh.get(i);return this.g.Gc(s,r),n.qb(r)?0:(s=this.zs.get(t),t=new e.h,this.g.Gc(s,t),s=this.zs.get(i),i=new e.h,this.g.Gc(s,i),(s=new e.h).uc(n,t),(n=new e.h).uc(r,i),e.h.nu(s,n))},t}();e.rn=t}(Y||(Y={})),function(e){var t;(t=e.$L||(e.$L={}))[t.Local=0]="Local",t[t.Geographic=1]="Geographic",t[t.Projected=2]="Projected",t[t.Image=3]="Image",t[t.Unknown=4]="Unknown",function(e){e[e.Integer32=0]="Integer32",e[e.Integer64=1]="Integer64",e[e.FloatingPoint=2]="FloatingPoint"}(e.TL||(e.TL={}));var i=function(){function t(){this.mA=null,this.pp="",this.su=null,this.dg=0,this.ZH=this.Ho=-1,this.wh=null}return t.prototype.Ec=function(){return this.dg},t.prototype.VF=function(){return 1},t.prototype.VW=function(e){this.mA=e},t.prototype.Xd=function(){if(null!==this.mA)return this.mA;var t=.001;return 0!=this.dg?t=e.wr.CQ(this.dg):null!=this.wh&&(t=e.XC.DQ(this.wh)),t},t.prototype.Bz=function(){return this.wh},t.prototype.Hd=function(){return 0!=this.dg?e.Tc.Zg(e.wr.Sy(this.dg)):null!=this.wh?e.XC.EQ(this.wh):void 0},t.Sb=function(t){if(0!=t.dg){if(!0===e.wr.ZS(t.dg))return 1;if(!0===e.wr.aT(t.dg))return 2}return 4},t.prototype.$r=function(){var t=this.Ec();return-1!=this.Ho?this.Ho:(this.Ho=e.wr.FK(t),-1!=this.Ho?this.Ho:t)},t.create=function(i){if(0>=i)throw e.i.N("Invalid or unsupported wkid: "+i);var r=new t;return r.dg=i,r},t.qP=function(i){if(null==i||0==i.length)throw e.i.N("Cannot create SpatialReference from null or empty text.");var r=new t;return r.wh=i,r},t.prototype.Nb=function(e){return this==e||null!=e&&this.constructor==e.constructor&&this.dg==e.dg&&(0!=this.dg||this.wh===e.wh)},t.prototype.toString=function(){return"[ tol: "+this.Kn()+"; wkid: "+this.Ec()+"; wkt: "+this.Bz()+"]"},t.prototype.cc=function(){if(""!==this.pp)return this.pp;var e=this.toString();if(Array.prototype.reduce)return this.pp="S"+e.split("").reduce((function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e}),0);var t=0;if(0===e.length)return"";for(var i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t&=t;return this.pp="S"+t},t.prototype.Kn=function(){return this.Xd(0)},t.prototype.fh=function(){return null!==this.su?this.su:this.su=e.gu.yP(this)},t.ZN=2147483645,t.$N=9007199254740990,t}();e.Eg=i}(Y||(Y={})),function(e){var t=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.Ji=null,i.ST=null,i.Hq=new e.ZL,i.Eo=null,i.jw=null,i}return Q(i,t),i.yP=function(t){var r=new i;if(r.dg=t.dg,r.Ho=t.Ho,r.ZH=t.ZH,r.wh=t.wh,""!==r.wh&&null!==r.wh){t=i.kM(r.wh);var n=i.iM(r.wh);r.Hq.Xx(t,n,e.hu.Integer64),r.by(t),r.gy(n),r.dg=t.$r()}else t=i.jM(r.dg),r.by(t),r.gy(null),r.Hq.Xx(t,null,e.hu.Integer64);return r},i.prototype.Xd=function(e){return this.Hq.Kn(e)},i.iM=function(t){if(0>=t.length)throw e.i.N();var r=null;try{r=e.NC.fromString(t)}catch(e){r=null}return null==r?null:i.bD(r,!0)},i.prototype.by=function(e){this.Kd=e,this.Eo=this.Kd.Hd()},i.prototype.gy=function(e){this.KH=e,this.ST=null!=this.KH?this.KH.Eo:null},i.prototype.Wc=function(){return 0!=this.Sb()&&3!=this.Sb()&&this.Kd.Wc()},i.prototype.IG=function(){return 0!=this.Sb()&&(3==this.Sb()?this.Ji.fk().Wc():this.Kd.Wc())},i.prototype.eh=function(){return null!=this.Kd?this.Kd.Ue:null},i.prototype.pm=function(){return this.Kd.pm()},i.prototype.bf=function(){return this.Kd.bf()},i.prototype.hh=function(){return null!=this.Kd?this.Kd.sw:NaN},i.prototype.Up=function(){return this.Kd.Up()},i.prototype.Wr=function(){return this.Kd.Wr()},i.prototype.kk=function(){return this.Kd.kk()},i.prototype.kS=function(t){return e.OC.Py(this.Kd,t.Kd)},i.prototype.ml=function(){return this.Kd.ml()},i.prototype.Vr=function(){return this.Kd.Vr()},i.prototype.zi=function(){return 3==this.Sb()?this.Ji.fk().zi():this.Kd.zi()},i.prototype.gh=function(){if(!this.Wc())throw e.i.N("!isPannable()");var t=new e.l;return this.Kd.gh(t),t},i.prototype.Oe=function(){if(!this.Wc())throw e.i.N("!isPannable()");return this.Kd.so},i.prototype.HR=function(){if(!this.Wc())throw e.i.N("!isPannable()");var t=new e.l;return this.Kd.GR(t),t},i.prototype.pv=function(){if(!this.Wc())throw e.i.N("!isPannable()");return this.Kd.pv()},i.prototype.ov=function(){if(!this.Wc())throw e.i.N("!isPannable()");return this.Kd.ov()},i.prototype.Xr=function(){return null!=this.Ji?this.Ji.fk().Xr():this.Kd.Xr()},i.prototype.PQ=function(){return this.Kd.hv()},i.prototype.Qp=function(){return this.Eo.getUnitFactor()},i.prototype.vz=function(e){return this.Hq.vz(e)},i.prototype.sc=function(){var t=this.Sb();if(1==t)return this;if(3==t)return this.Ji.fk().sc();if(0==t)throw e.i.fa("invalid call");if(4===t)throw e.i.fa("invalid call");if(null!==this.jw)return this.jw;if(null==(t=this.eh().getGeogcs()))throw e.i.Qa();return this.jw=i.bF(t,this.Hq.VF())},i.bF=function(t,r){if(null==t)throw e.i.N("null pointer.");var n=new i;return t=i.mu(t,!0),n.Hq.Xx(t,null,r),n.by(t),n.gy(null),n.dg=t.$r(),n},i.prototype.Sb=function(){var t=this.eh();if(null!=t)switch(t.getType()){case e.Sc.PE_TYPE_GEOGCS:return 1;case e.Sc.PE_TYPE_PROJCS:return 2}return 4},i.prototype.hv=function(){return this.Kd.hv()},i.mu=function(t,r){var n=t.getCode();if(0>=n&&0<(n=e.pf.getCode(t))){if(null==(t=e.pf.coordsys(n)))throw e.i.N("Text to wkid mapping had failed: "+n);return i.mu(t,r)}return r&&0<n&&(r=i.qx[n])?r:(r=e.zb.xv(t,n,!1),i.lK[r]||(t=0>=n?t:e.pf.coordsys(n),t=new e.OC(t),i.lK[r]=t,0<n&&(i.qx[n]=t),t))},i.jM=function(t){if(0>=t)throw e.i.N("Invalid or unsupported wkid: "+t);var r=i.qx[t];if(null!=r)return r;if(null==(r=e.pf.coordsys(t)))throw e.i.N("Invalid or unsupported wkid: "+t);return(r=i.mu(r,!1)).$r()!=t&&(i.qx[t]=r),r},i.kM=function(t){if(null==t||void 0===t||0==t.length)throw e.i.N("Cannot create SpatialReference from null or empty text.");var r=null;try{r=e.pf.fromString(e.Sc.PE_TYPE_COORDSYS,t)}catch(t){throw e.i.N("Cannot create SpatialReference from text. "+t.message)}if(null===r)throw e.i.N("Cannot create SpatialReference from text. ");return i.mu(r,!0)},i.bD=function(t,r){var n,s=t.getCode();if(0>=s&&0<(s=e.pf.getCode(t))){if(null===(s=e.pf.vertcs(s)))throw e.i.N();return i.bD(s,r)}if(r&&0<s&&(r=i.kK[s]))return r;if(t=e.zb.xv(t,s,!1),r=i.mK[t])return r;if(0>=s||(n=e.pf.vertcs(s)),null===n)throw e.i.N();return n=new e.PL(n),i.mK[t]=n,0<s&&(i.kK[s]=n),n},i.sI=function(t,i){if(null===i||i.B())return null;var r=new e.l;if(null!==i&&1!=t.Sb()){var n=t.sc(),s=n.eh();t=e.vr.Nr(t,n,null,null),(i=e.Hx.local().V(i,t,null)).A(r)}else s=t.eh(),i.A(r);return i=s.getPrimem().getLongitude(),s=s.getUnit().getUnitFactor(),new e.LC(r.v,r.G,r.C,r.H,i,s)},i.lD=function(e){var t={name:"",steps:[],_pt:null,_entry:null},i=0;for(e=e.getEntries();i<e.length;i++){var r=e[i],n={LY:!1,ZY:"",YY:-1,geogtran:null};0===r.getDirection()?n.isInverse=!1:n.isInverse=!0;var s=r.getGeogtran().getCode();-1<s?n.wkid=s:n.wkt=r.getGeogtran().toString(),t.steps.push(n)}return t},i.XR=function(t,r,n,s){return void 0===n&&(n=null),n=i.sI(s,n),t=e.lp.getGTlist(t.eh(),r.eh(),2,e.lp.PE_GTLIST_OPTS_COMMON,n,1),r=null,t&&0<t.length&&(r=this.lD(t[0]),e.Mx.destroy(t)),null!==n&&n.destroy(),r},i.YR=function(t,r,n,s){var o;if(void 0===n&&(n=null),void 0===s&&(s=null),void 0===o&&(o=30),n=i.sI(s,n),t=e.lp.getGTlist(t.eh(),r.eh(),2,e.lp.PE_GTLIST_OPTS_COMMON,n,o),r=[],t&&0<t.length){for(o=0;o<t.length;o++)r.push(this.lD(t[o]));e.Mx.destroy(t)}return null!==n&&n.destroy(),r},i.qx={},i.lK={},i.kK={},i.mK={},i}(e.Eg);e.gu=t}(Y||(Y={})),function(e){var t,i;(i=t=e.hu||(e.hu={}))[i.Integer32=0]="Integer32",i[i.Integer64=1]="Integer64",i[i.FloatingPoint=2]="FloatingPoint";var r=function(){function i(){this.qp()}return i.prototype.assign=function(e){this.Fm=e.Fm,this.Gm=e.Gm,this.Pj=e.Pj,this.sA=e.sA,this.Fo=e.Fo,this.rA=e.rA,this.Ik=e.Ik,this.Mq=e.Mq,this.Lq=e.Lq,this.Rm=e.Rm},i.prototype.VF=function(){return this.Rm},i.prototype.qp=function(){this.Gm=this.Fm=0,this.Pj=1,this.sA=0,this.Fo=1,this.rA=0,this.Lq=this.Mq=this.Ik=2220446049250313e-29,this.Rm=t.FloatingPoint},i.prototype.Xx=function(i,r,n){if(this.qp(),this.Rm=n,n!=t.FloatingPoint){var s=new e.l;i.hR(s),this.Fm=s.v,this.Gm=s.G}else this.Gm=this.Fm=-17976931348623157e292;(s=i.Ue.getType())==e.Sc.PE_TYPE_GEOGCS?(s=(n==t.Integer64?1e-9:1/18e5)*i.bf(),this.Pj=1/s):s==e.Sc.PE_TYPE_PROJCS&&(s=(n==t.Integer64?1e-4:.001)*i.pm(),this.Pj=1/s),null!=r?(s=(n==t.Integer32?.001:1e-4)*r.IH,this.Fo=1/s):this.Fo=1e4,this.YM(),this.Ik=i.sw,this.Mq=null!=r?.001*r.IH:.001,this.Lq=2220446049250313e-29},i.prototype.YM=function(){if(this.Rm!=t.FloatingPoint){var i=this.Rm==t.Integer64?e.Eg.$N:e.Eg.ZN,r=i/this.Pj,n=this.Fm+r,s=e.O.truncate((n-this.Fm)*this.Pj);s>i&&(this.Pj=i/(n-this.Fm)),r=this.Gm+r,(s=e.O.truncate((r-this.Gm)*this.Pj))>i&&(this.Pj=i/(r-this.Gm))}},i.prototype.aC=function(e){switch(e){case 0:this.Ik=void 0;case 1:this.Mq=void 0;case 2:this.Lq=void 0}},i.prototype.Kn=function(e){switch(e){case 0:return this.Ik;case 1:return this.Mq;case 2:return this.Lq}return 0},i.prototype.vz=function(e){if(this.Rm==t.FloatingPoint)return 0;switch(e){case 0:return 1/this.Pj;case 1:case 2:return 1/this.Fo;default:return 0}},i.prototype.toString=function(){var e="SRPD [m_toleranceXY: "+this.Ik.toString();return(e=(e=(e=(e=(e=(e=(e=(e=(e=e+";m_falseX: "+this.Fm.toString())+";m_falseY: "+this.Gm.toString())+";m_unitsXY: "+this.Pj.toString())+";m_falseZ: "+this.sA.toString())+";m_unitsZ: "+this.Fo.toString())+";m_falseM: "+this.rA.toString())+";m_toleranceZ: "+this.Mq.toString())+";m_toleranceM: "+this.Lq.toString())+";m_precision: "+this.Rm.toString())+"] "},i}();e.ZL=r}(Y||(Y={})),function(e){function t(e,t){return 89.99999<t?t=89.99999:-89.99999>t&&(t=-89.99999),t*=.017453292519943,[111319.49079327169*e,3189068.5*Math.log((1+Math.sin(t))/(1-Math.sin(t)))]}function i(e,t,i){return e=e/6378137*57.29577951308232,i?[e,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*t/6378137)))]:[e-360*Math.floor((e+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*t/6378137)))]}function r(t,i,r){var n=t.Of();if(33===t.getType())i=i(n.Lg(),n.ih()),n.Cb(i[0],i[1]);else if(197===t.getType()){var s=i(t.es(),t.gs(),r);i=i(t.ds(),t.fs(),r),n.K(s[0],s[1],i[0],i[1])}else for(s=new e.h,t=0;t<n.I();t++){n.D(t,s);var o=i(s.x,s.y,r);s.ma(o[0],o[1]),n.Cb(t,s)}return n}function n(e){return r(e,i,!0)}function s(e){return r(e,t,!0)}var o=Math.PI/180;e.UK=function(){function t(){}return t.vu=function(t){var i=Math.sqrt(.006694379990197414),r=Math.sin(t.y*o);return e.h.construct(6378137*t.x*o,3167719.6636462314*(r/(1-.006694379990197414*r*r)-1/(2*i)*Math.log((1-i*r)/(1+i*r))))},t.Vx=function(t,i,r,n){var s=1/298.257223563,a=Math.sin(r);r=Math.cos(r);var l=(1-s)*Math.tan(t),c=l*(t=1/Math.sqrt(1+l*l)),h=Math.atan2(l,r),u=(l=t*a)*l,p=1-u,d=272331606107.54688*p/40408299984661.45,f=1+d/16384*(4096+d*(d*(320-175*d)-768)),y=d/1024*(256+d*(d*(74-47*d)-128));d=n/(6356752.31424518*f);for(var m,g,v,_=2*Math.PI;1e-12<Math.abs(d-_);)v=Math.cos(2*h+d),_=d,d=n/(6356752.31424518*f)+y*(m=Math.sin(d))*(v+y/4*((g=Math.cos(d))*(2*v*v-1)-y/6*v*(4*m*m-3)*(4*v*v-3)));return n=c*m-t*g*r,p=s/16*p*(4+s*(4-3*p)),e.h.construct((i+(Math.atan2(m*a,t*g-c*m*r)-(1-p)*s*l*(d+p*m*(v+p*g*(2*v*v-1)))))/o,Math.atan2(c*g+t*m*r,(1-s)*Math.sqrt(u+n*n))/o)},t.MM=function(e,t,i,r){var n=1/298.257223563,s=r-t,o=Math.atan((1-n)*Math.tan(e)),a=Math.atan((1-n)*Math.tan(i)),l=Math.sin(o);o=Math.cos(o);var c=Math.sin(a);a=Math.cos(a);var h=s,u=1e3;do{var p=Math.sin(h),d=Math.cos(h),f=Math.sqrt(a*p*a*p+(o*c-l*a*d)*(o*c-l*a*d));if(0===f)return 0;d=l*c+o*a*d;var y=Math.atan2(f,d),m=o*a*p/f,g=1-m*m;p=d-2*l*c/g,isNaN(p)&&(p=0);var v=n/16*g*(4+n*(4-3*g)),_=h;h=s+(1-v)*n*m*(y+v*f*(p+v*d*(2*p*p-1)))}while(1e-12<Math.abs(h-_)&&0<--u);return 0===u?(l=r-t,{azimuth:Math.atan2(Math.sin(l)*Math.cos(i),Math.cos(e)*Math.sin(i)-Math.sin(e)*Math.cos(i)*Math.cos(l)),geodesicDistance:6371008.771415059*Math.acos(Math.sin(e)*Math.sin(i)+Math.cos(e)*Math.cos(i)*Math.cos(r-t))}):(t=(e=272331606107.54688*g/40408299984661.45)/1024*(256+e*(e*(74-47*e)-128)),{azimuth:Math.atan2(a*Math.sin(h),o*c-l*a*Math.cos(h)),YQ:6356752.31424518*(1+e/16384*(4096+e*(e*(320-175*e)-768)))*(y-t*f*(p+t/4*(d*(2*p*p-1)-t/6*p*(4*f*f-3)*(4*p*p-3)))),XY:Math.atan2(o*Math.sin(h),o*c*Math.cos(h)-l*a)})},t.jQ=function(t){var i=t.hasAttribute(1),r=t.hasAttribute(2),n=[],s=t.da(),o=null,a=null;i&&(o=t.ub(1)),r&&(a=t.ub(2));for(var l=new e.h,c=0;c<s;c++){for(var h=t.Ba(c),u=t.Ja(c),p=0,d=0,f=NaN,y=NaN,m=NaN,g=NaN,v=t.dc(c),_=[],b=h;b<h+u;b++){t.D(b,l),g=m=NaN;var w=[l.x,l.y];i&&(m=o.get(b),w.push(m)),r&&(s=a.get(b),w.push(g)),b==h&&v&&(p=l.x,d=l.y,f=m,y=g),_.push(w)}!v||p==l.x&&d==l.y&&(!i||isNaN(f)&&isNaN(m)||f==m)&&(!r||isNaN(y)&&isNaN(g)||y==g)||_.push(_[0].slice(0)),n.push(_)}return n},t.Wy=function(e,i){e=t.jQ(e),637.100877141506>i&&(i=637.100877141506);for(var r,n=[],s=0;s<e.length;s++){var a,l,c=e[s];n.push(r=[]),r.push([c[0][0],c[0][1]]);var h=c[0][0]*o,u=c[0][1]*o;for(a=0;a<c.length-1;a++){var p=c[a+1][0]*o,d=c[a+1][1]*o;if(h!==p||u!==d){p=(d=t.MM(u,h,d,p)).azimuth;var f=(d=d.YQ)/i;if(1<f){for(l=1;l<=f-1;l++){var y=t.Vx(u,h,p,l*i);r.push([y.x,y.y])}l=t.Vx(u,h,p,(d+Math.floor(f-1)*i)/2),r.push([l.x,l.y])}u=t.Vx(u,h,p,d),r.push([u.x,u.y]),h=u.x*o,u=u.y*o}}}return{qJ:n}},t.XQ=function(i){for(var r=[],n=0;n<i.length;n++){var s=i[n];s=t.Wy(s,1e4),r.push(s)}i=[];for(var o=0;o<r.length;o++){s=r[o];var a=0;for(n=0;n<s.qJ.length;n++){var l,c=s.qJ[n],h=t.vu(e.h.construct(c[0][0],c[0][1])),u=t.vu(e.h.construct(c[c.length-1][0],c[c.length-1][1])),p=u.x*h.y-h.x*u.y;for(l=0;l<c.length-1;l++)h=t.vu(e.h.construct(c[l+1][0],c[l+1][1])),p+=(u=t.vu(e.h.construct(c[l][0],c[l][1]))).x*h.y-h.x*u.y;a+=p}a/=1,i.push(a/-2)}return i},t}(),e.cb=function(){function t(){}return t.xB=function(e,i,r,n,s,o,a){t.gD[e.cc()]=i,0==isNaN(r)&&(t.mD[e.cc()]=r),0==isNaN(n)&&(t.zD[e.cc()]=n),0==isNaN(s)&&(t.aD[e.cc()]=s),t.nD[e.cc()]=o,null!==a&&(t.oD[e.cc()]=a)},t.Ww=function(e,i,r){t.sD[e.cc()+"-"+i.cc()]=r},t.sc=function(i){if(null==(i=t.gD[i.cc()]))throw e.i.Ie();return i},t.bf=function(i){if(null==(i=t.mD[i.cc()]))throw e.i.Ie();return i},t.vv=function(i){if(null==(i=t.zD[i.cc()]))throw e.i.Ie();return i},t.ev=function(i){if(null==(i=t.aD[i.cc()]))throw e.i.Ie();return i},t.gh=function(i){if(null==(i=t.oD[i.cc()]))throw e.i.Ie();return e.l.construct(i[0],i[1],i[2],i[3])},t.Wc=function(i){if(null==(i=t.nD[i.cc()]))throw e.i.Ie();return i},t.zh=function(i,r,n){if(r.Nb(n))return i;var s=t.sD[r.cc()+"-"+n.cc()];if(void 0!==s)return s(i,r,n);throw e.i.Ie()},t.vt=function(){throw e.i.Ie()},t.bR=function(){throw e.i.Ie()},t.dW=function(){throw e.i.Ie()},t.ml=function(){throw e.i.Ie()},t.sW=function(){var t=e.Eg.create(102100),i=e.Eg.create(3857),r=e.Eg.create(4326);e.cb.xB(t,r,NaN,NaN,NaN,!1,null),e.cb.xB(r,r,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),e.cb.xB(i,r,NaN,NaN,NaN,!1,null),e.cb.Ww(t,r,n),e.cb.Ww(r,t,s),e.cb.Ww(i,r,n),e.cb.Ww(r,i,s)},t.gD=[],t.mD=[],t.zD=[],t.aD=[],t.nD=[],t.oD=[],t.sD=[],t}()}(Y||(Y={})),Y.cb.sW(),function(e){var t=function(){function t(e){this.o=new Int32Array(0),this.io=-1,this.Hg=this.size=this.Bl=0,this.stride=e}return t.prototype.jd=function(e){e<this.Bl?(this.o[e*this.stride]=this.io,this.io=e):this.Bl--,this.size--},t.prototype.T=function(e,t){return this.o[e*this.stride+t]},t.prototype.S=function(e,t,i){this.o[e*this.stride+t]=i},t.prototype.Ce=function(){var t=this.io;if(-1==t){if(this.Bl==this.Hg){if(2147483647<(t=0!=this.Hg?e.O.truncate(3*(this.Hg+1)/2):1)&&(t=2147483647),t==this.Hg)throw e.i.ce();this.Dz(t)}t=this.Bl,this.Bl++}else this.io=this.o[t*this.stride];this.size++;for(var i=t*this.stride;i<t*this.stride+this.stride;i++)this.o[i]=-1;return t},t.prototype.Ll=function(t){var i=this.io;if(-1==i){if(this.Bl==this.Hg){if(2147483647<(i=0!=this.Hg?e.O.truncate(3*(this.Hg+1)/2):1)&&(i=2147483647),i==this.Hg)throw e.i.ce();this.Dz(i)}i=this.Bl,this.Bl++}else this.io=this.o[i*this.stride];this.size++;for(var r=i*this.stride,n=0;n<t.length;n++)this.o[r+n]=t[n];return i},t.prototype.mj=function(e){this.io=-1,this.size=this.Bl=0,e&&(this.o=null,this.Hg=0)},t.prototype.De=function(e){e>this.Hg&&this.Dz(e)},t.prototype.tx=function(e,t){e*=this.stride,t*=this.stride;for(var i=0;i<this.stride;i++){var r=this.o[t+i];this.o[t+i]=this.o[e+i],this.o[e+i]=r}},t.prototype.gC=function(e,t,i){var r=this.o[this.stride*t+i];this.o[this.stride*t+i]=this.o[this.stride*e+i],this.o[this.stride*e+i]=r},t.LG=function(e){return 0<=e},t.prototype.Dz=function(e){null==this.o&&(this.o=new Int32Array(0));var t=new Int32Array(this.stride*e);t.set(this.o,0),this.o=t,this.Hg=e},t}();e.$c=t}(Y||(Y={})),function(e){var t,i;(i=t||(t={}))[i.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",i[i.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",i[i.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",i[i.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var r=function(){function t(t){this.Be=t,this.yh=NaN,this.eH=new e.ig,this.fH=new e.ig,this.ms=new e.Nc,this.ns=new e.Nc}return t.prototype.compare=function(e,t,i){if(e=e.ja(i),this.Be.pB(t,this.eH),this.Be.pB(e,this.fH),t=this.eH.get(),e=this.fH.get(),this.ms.K(t.sa,t.pa),this.ns.K(e.sa,e.pa),this.ms.va<this.ns.oa)return-1;if(this.ms.oa>this.ns.va)return 1;i=t.na==t.la;var r=e.na==e.la;if(i||r){if(i&&r)return 0;if(t.na==e.na&&t.sa==e.sa)return i?1:-1;if(t.la==e.la&&t.pa==e.pa)return i?-1:1}return(i=t.Pe(this.yh,this.ms.oa))==(r=e.Pe(this.yh,this.ns.oa))&&((r=.5*((i=Math.min(t.la,e.la))+this.yh))==this.yh&&(r=i),i=t.Pe(r,this.ms.oa),r=e.Pe(r,this.ns.oa)),i<r?-1:i>r?1:0},t.prototype.aK=function(e){this.yh=e},t}(),n=function(){function t(t){this.ib=t,this.WH=new e.ig,this.Bf=new e.h,this.wA=new e.Nc}return t.prototype.kX=function(e){this.Bf.L(e)},t.prototype.compare=function(e,t){return this.ib.pB(e.ja(t),this.WH),e=this.WH.get(),this.wA.K(e.sa,e.pa),this.Bf.x<this.wA.oa?-1:this.Bf.x>this.wA.va?1:(e=e.Pe(this.Bf.y,this.Bf.x),this.Bf.x<e?-1:this.Bf.x>e?1:0)},t}();t=function(){function t(){this.hH=this.Di=this.Gi=this.kA=this.Yn=this.ye=this.Kc=this.jh=this.ge=null,this.Go=this.xg=-1,this.gH=!0,this.pA=!1,this.lA=NaN,this.Ni=new e.Md,this.bO=2147483647,this.aO=e.O.truncate(-2147483648),this.cg=this.ae=this.Hl=this.Cq=this.Cm=this.Bq=this.Os=this.Re=-1,this.wa=0}return t.prototype.yy=function(e){this.lA=e},t.prototype.Ym=function(){null==this.ge&&(this.ge=new e.$c(8));var t=this.ge.Ce();return this.ge.S(t,1,0),t},t.prototype.vU=function(){null==this.Kc&&(this.Kc=new e.$c(8));var t=this.Kc.Ce();this.Kc.S(t,2,0),this.Kc.S(t,3,0);var i=this.Kc.Ce();return this.Kc.S(i,2,0),this.Kc.S(i,3,0),this.JJ(t,i),this.JJ(i,t),t},t.prototype.mI=function(){null==this.ye&&(this.ye=new e.$c(8));var t=this.ye.Ce();return this.ye.S(t,2,0),t},t.prototype.TW=function(e,t){this.ge.S(e,7,t)},t.prototype.mn=function(e,t){this.ge.S(e,2,t)},t.prototype.SW=function(e,t){this.ge.S(e,1,t)},t.prototype.lX=function(e,t){this.ge.S(e,3,t)},t.prototype.iX=function(e,t){this.ge.S(e,4,t)},t.prototype.cr=function(e,t){this.ge.S(e,5,t)},t.prototype.eR=function(e){return this.ge.T(e,5)},t.prototype.RW=function(e,t){this.ge.S(e,6,t)},t.prototype.cN=function(e,t){this.RW(t,e)},t.prototype.IJ=function(e,t){this.Kc.S(e,1,t)},t.prototype.JJ=function(e,t){this.Kc.S(e,4,t)},t.prototype.Tl=function(e,t){this.Kc.S(e,5,t)},t.prototype.Sl=function(e,t){this.Kc.S(e,6,t)},t.prototype.$W=function(e,t){this.Kc.S(e,2,t)},t.prototype.$w=function(e,t){this.Kc.S(e,3,t)},t.prototype.LF=function(e){return this.Kc.T(e,3)},t.prototype.Gt=function(e,t){this.Kc.S(e,7,t)},t.prototype.EK=function(e,t){if(-1!=this.mm(e))for(t=t?-1:e,e=this.mm(e);-1!=e;e=this.js(e))this.g.Ra(this.tj(e),this.Cq,t)},t.prototype.yx=function(e,t){-1!=e&&(this.EK(e,t),this.EK(this.xa(e),t))},t.prototype.Dt=function(e,t){this.ye.S(e,1,t)},t.prototype.Vg=function(e,t){this.ye.S(e,2,t)},t.prototype.jn=function(e,t){this.ye.S(e,3,t),this.NW(e,this.dR(t)),this.MW(t,e)},t.prototype.MW=function(e,t){this.ye.S(e,4,t)},t.prototype.NW=function(e,t){this.ye.S(e,5,t)},t.prototype.DJ=function(e,t){this.ye.S(e,6,t)},t.prototype.BJ=function(e,t){this.ye.S(e,7,t)},t.prototype.AJ=function(e,t){this.Yn.write(e,t)},t.prototype.CJ=function(e,t){this.kA.write(e,t)},t.prototype.kY=function(t){var i=0,r=0,n=this.AF(t),s=new e.h,o=new e.h,a=new e.h;this.Yr(n,s),o.L(s);var l=n;do{this.lm(l,a),r+=e.h.tb(o,a),this.$e(this.xa(l))!=t&&(i+=(a.x-s.x-(o.x-s.x))*(a.y-s.y+(o.y-s.y))*.5),o.L(a),l=this.jc(l)}while(l!=n);this.Yn.write(t,i),this.kA.write(t,r)},t.prototype.PU=function(t,i){var s=new r(this),o=new e.Yj;o.De(e.O.truncate(this.wa/2)),o.Vo(s);for(var a=new e.ia(0),l=this.$g(),c=null,h=0,u=new e.h,p=this.Re;-1!=p;p=this.Rf(p)){if(!(255&++h||null==i||i.progress(-1,-1)))throw e.i.WC();var d=this.Me(p);if(-1!=d){if(a.Bh(0),!this.gY(o,l,a,d)){this.D(p,u),s.aK(u.y);var f=d;do{var y=this.Ab(f,l);-1!=y&&(o.vd(y,-1),this.Kb(f,l,-2)),f=this.jc(this.xa(f))}while(d!=f);f=d;do{-1==(y=this.Ab(f,l))&&(y=o.addElement(f,-1),a.add(y)),f=this.jc(this.xa(f))}while(d!=f)}for(d=a.size-1;0<=d;d--)y=a.get(d),f=o.ja(y),this.Kb(this.xa(f),l,y),this.OU(o,y,t)}else-1==this.cz(p)&&(null==c&&(c=new n(this)),this.D(p,u),c.kX(u),f=o.IW(c),d=this.Hl,-1!=f&&(y=o.ja(f),this.$e(y)==this.$e(this.xa(y))&&(y=this.OF(o,f)),-1!=y&&(d=this.$e(y))),this.cN(d,p))}this.Jg(l)},t.prototype.OU=function(e,t,i){var r=e.ja(t),n=this.$e(r);if(-1==this.Gn(n)){var s=this.OF(e,t),o=this.xa(r),a=this.$e(o);this.Kp(n),this.Kp(a);var l=this.Gn(n),c=this.Gn(a);if(-1==s&&-1==l&&(a==n?(this.jn(a,this.Hl),l=c=this.Hl):(-1==c&&(this.jn(a,this.Hl),c=this.Hl),this.jn(n,a),l=a)),-1!=s){var h=this.$e(s);-1==c&&(0>=this.Kp(h)?(c=this.Gn(h),this.jn(a,c)):(this.jn(a,h),c=h),a==n&&(l=c))}-1==l&&this.hY(n,a),0==i?this.jW(e,t,r,s,n,a):5==i?this.kW(e,t,r,o,n,a):4==i&&this.iW(r,s,n,a)}},t.prototype.jW=function(e,t,i,r,n,s){var o=this.hk(n);if(-1!=r){var a=this.hk(s),l=this.hk(this.$e(r));r=o&a&l,l^=l&this.dh(i),0!=(l|=r)&&(this.Vg(s,a|l),this.Vg(n,l|o),o=o||l)}for(t=e.lb(t);-1!=t&&(r=e.ja(t),i=this.$e(this.xa(r)),n=this.hk(i),s=this.dh(r),a=this.$e(r),r=n&(l=this.hk(a))&o,o^=o&s,0!=(o|=r));t=e.lb(t))this.Vg(i,n|o),this.Vg(a,l|o)},t.prototype.kW=function(t,i,r,n,s,o){if(s!=o){r=this.Ab(r,this.cg),r+=this.Ab(n,this.cg),n=0;var a=new e.ia(0),l=new e.ia(0);l.add(0);for(var c=t.rc(-1);c!=i;c=t.lb(c)){var h=t.ja(c),u=this.xa(h),p=this.$e(h),d=this.$e(u);if(p!=d){if(h=this.Ab(h,this.cg),n+=h+=this.Ab(u,this.cg),u=!1,0!=a.size&&a.Fc()==d&&(l.If(),a.If(),u=!0),-1==this.Gn(d))throw e.i.Qa();u&&this.Gn(d)==p||(l.add(n),a.add(p))}}n+=r,0!=a.size&&a.Fc()==o&&(l.If(),a.If()),0!=n?0==l.Fc()&&(t=this.g.ld,t=this.La(t),this.Vg(s,t)):0!=l.Fc()&&(t=this.g.ld,t=this.La(t),this.Vg(s,t))}},t.prototype.iW=function(e,t,i,r){var n=this.La(this.g.ld);if(-1==t)this.Vg(r,this.Go),1&(e=this.Ab(e,this.xg))?this.Vg(i,n):this.Vg(i,this.Go);else{var s=this.hk(r);0==s?(s=this.hk(this.$e(t)),this.Vg(r,s),1&(e=this.Ab(e,this.xg))?this.Vg(i,s==n?this.Go:n):this.Vg(i,s)):1&(e=this.Ab(e,this.xg))?this.Vg(i,s==n?this.Go:n):this.Vg(i,s)}},t.prototype.gY=function(e,t,i,r){var n=r,s=-1,o=-1,a=0;do{if(2==a)return!1;var l=this.Ab(n,t);if(-1!=l){if(-1!=s)return!1;s=l}else{if(-1!=o)return!1;o=n}a++,n=this.jc(this.xa(n))}while(r!=n);return-1!=o&&-1!=s&&(this.Kb(e.ja(s),t,-2),e.Sj(s,o),i.add(s),!0)},t.prototype.hY=function(e,t){var i=this.Kp(e);if(0!=i){var r=this.Kp(t);(0<i&&0>r||0>i&&0<r||-1!=(t=this.Gn(t)))&&this.jn(e,t)}},t.prototype.vP=function(t,i){this.Cq=this.g.Gd();for(var r=0,n=i.size;r<n;r++){var s=i.get(r),o=this.g.Pa(s,this.Cm),a=this.g.Qf(this.g.bd(s)),l=this.g.ic(a);if(e.aa.Hc(l)){var c=this.g.U(s);if(-1!=c){var h=this.g.Pa(c,this.Cm);if(o!=h){var u=this.vU(),p=this.xa(u),d=this.jh.Ce();this.jh.S(d,0,s),this.jh.S(d,1,-1),this.Gt(u,d),this.IJ(u,o),-1==(d=this.Me(o))?(this.mn(o,u),this.Tl(u,p),this.Sl(p,u)):(o=this.te(d),this.Tl(d,p),this.Sl(p,d),this.Sl(o,u),this.Tl(u,o)),this.IJ(p,h),-1==(o=this.Me(h))?(this.mn(h,p),this.Sl(u,p),this.Tl(p,u)):(h=this.te(o),this.Tl(o,u),this.Sl(u,o),this.Sl(h,p),this.Tl(p,h)),a=this.La(a),0==t?(this.Kb(p,this.ae,0),this.Kb(u,this.ae,1736==l?a:0)):5==t?(h=new e.h,this.g.D(s,h),s=new e.h,this.g.D(c,s),o=c=0,0>h.compare(s)?c=1:o=-1,this.Kb(p,this.ae,0),this.Kb(u,this.ae,0),this.Kb(u,this.cg,c),this.Kb(p,this.cg,o)):7==t?(this.Kb(p,this.ae,this.Go),this.Kb(u,this.ae,1736==l?a:0)):4==t&&(this.Kb(p,this.ae,0),this.Kb(u,this.ae,0),this.Kb(u,this.xg,1),this.Kb(p,this.xg,1)),l=1736==l?this.aO:0,this.$w(u,a|l),this.$w(p,a|l)}}}}},t.prototype.VT=function(e,t){var i=this.mm(t);if(-1!=i){var r=this.mm(e);this.jh.S(i,1,r),this.Gt(e,i),this.Gt(t,-1)}e=this.xa(e),t=this.xa(t),-1!=(i=this.mm(t))&&(r=this.mm(e),this.jh.S(i,1,r),this.Gt(e,i),this.Gt(t,-1))},t.prototype.IX=function(t){function i(e,t){return n.HO(e,t)}var r=new e.ia(0);r.Jb(10);for(var n=this,s=this.Re;-1!=s;s=this.Rf(s)){r.clear(!1);var o=this.Me(s);if(-1!=o){var a=o;do{r.add(a),a=this.jc(this.xa(a))}while(a!=o);if(1<r.size){if(a=!0,2<r.size)r.Vd(0,r.size,i),r.add(r.get(0));else if(0<this.GO(r.get(0),r.get(1))){var l=r.get(0);r.set(0,r.get(1)),r.set(1,l)}else a=!1;for(var c=l=r.get(0),h=this.uf(c),u=this.xa(c),p=-1,d=1,f=r.size;d<f;d++){var y=r.get(d),m=this.xa(y),g=this.jk(m);if(g==h&&y!=c){if(0==t)p=this.LF(c)|this.LF(y),this.$w(c,p),this.$w(u,p),this.Kb(c,this.ae,this.Ab(c,this.ae)|this.Ab(y,this.ae)),this.Kb(u,this.ae,this.Ab(u,this.ae)|this.Ab(m,this.ae));else if(-1!=this.cg)p=this.Ab(c,this.cg)+this.Ab(y,this.cg),m=this.Ab(u,this.cg)+this.Ab(m,this.cg),this.Kb(c,this.cg,p),this.Kb(u,this.cg,m);else{if(7==t)return void(this.Ni=new e.Md(5,s,-1));-1!=this.xg&&(p=this.Ab(c,this.xg)+this.Ab(y,this.xg),m=this.Ab(u,this.xg)+this.Ab(m,this.xg),this.Kb(c,this.xg,p),this.Kb(u,this.xg,m))}this.VT(c,y),this.Ly(y),p=c,r.set(d,-1),y==l&&(r.set(0,-1),l=-1)}else this.yx(p,!1),p=-1,c=y,h=g,u=m}if(this.yx(p,!1),p=-1,a){for(l=-1,d=0,f=r.size;d<f;d++)if(-1!=(y=r.get(d)))if(-1==l)c=l=y,h=this.uf(c),u=this.xa(c);else if(y!=c&&(m=this.xa(y),g=this.jk(m),this.Sl(u,y),this.Tl(y,u),c=y,h=g,u=m,7==t&&(this.Ab(y,this.ae)|this.Ab(this.te(y),this.ae))==(1|this.Go)))return void(this.Ni=new e.Md(5,s,-1));this.mn(s,l)}else{for(l=-1,d=0,f=r.size;d<f;d++)if(-1!=(y=r.get(d))){l=y;break}o!=l&&this.mn(s,l)}}}}},t.prototype.WN=function(){for(var t=-1,i=this.$g(),r=this.Re;-1!=r;r=this.Rf(r)){var n=this.Me(r);if(-1!=n){var s=n;do{if(1!=this.Ab(s,i)){var o=this.mI();this.Dt(o,s),this.BJ(o,t),-1!=t&&this.DJ(t,o),t=o;var a=0,l=s;do{a|=this.Ab(l,this.ae),this.$W(l,o),this.Kb(l,i,1),l=this.jc(l)}while(l!=s);this.Vg(o,a)}s=this.jc(this.xa(s))}while(s!=n)}}o=this.mI(),this.Dt(o,-1),this.BJ(o,t),-1!=t&&this.DJ(t,o),this.Hl=o,this.Yn=e.be.qf(this.ye.size,NaN),this.kA=e.be.qf(this.ye.size,NaN),this.AJ(this.Hl,1/0),this.CJ(this.Hl,1/0),this.Jg(i)},t.prototype.sR=function(e,t,i){if(-1==(t=-1!=t?t:this.Me(e)))return-1;for(e=t;;){if(1!=this.Ab(t,i))return t;if((t=this.jc(this.xa(t)))==e)return-1}},t.prototype.yW=function(){for(var e=this.$g(),t=this.Re;-1!=t;t=this.Rf(t))for(var i=-1;;){var r=this.sR(t,i,e);if(-1==r)break;i=this.jc(this.xa(r));for(var n=r;;){var s=this.jc(n),o=this.te(n),a=this.xa(n);if(o==a){if(this.IP(n),i!=n&&i!=a||(i=-1),n==r||o==r){if(n==(r=s)||o==r)break;n=s;continue}}else this.Kb(n,e,1);if((n=s)==r)break}}this.Jg(e)},t.prototype.MB=function(t,i,r,n,s){this.Ug(),this.gH=s,this.g=t,this.Bq=this.g.aF(),(t=new e.ia(0)).Jb(null!=r?this.g.I(r.get(0)):this.g.fd);var o=0,a=1,l=null!=r?r.get(0):this.g.ld;for(s=1;-1!=l;){this.g.HJ(l,this.Bq,a),a<<=1;for(var c=this.g.Ob(l);-1!=c;c=this.g.Rb(c))for(var h=this.g.Xa(c),u=0,p=this.g.Ja(c);u<p;u++)t.add(h),h=this.g.U(h);e.aa.Rn(this.g.ic(l))||(o+=this.g.da(l)),null!=r?(l=s<r.size?r.get(s):-1,s++):l=this.g.ue(l)}for(this.Go=a,this.wa=t.size,this.g.nx(t,this.wa),null==this.jh&&(this.jh=new e.$c(2),this.ge=new e.$c(8),this.Kc=new e.$c(8),this.ye=new e.$c(8)),this.jh.De(this.wa),e.mp.zp(n),this.ge.De(this.wa+10),this.Kc.De(2*this.wa+32),this.ye.De(Math.max(32,o)),this.Cm=this.g.Gd(),r=new e.h,s=0,o=new e.h,r.Rc(),a=0;a<=this.wa;a++)if(a<this.wa?(h=t.get(a),this.g.D(h,o)):o.Rc(),!r.qb(o)){if(s<a){for(h=this.Ym(),p=u=-1;s<a;s++)p=t.get(s),this.g.Ra(p,this.Cm,h),l=this.jh.Ce(),this.jh.S(l,0,p),this.jh.S(l,1,u),u=l,c=this.g.bd(p),l=this.g.Qf(c),l=this.La(l),this.SW(h,this.xd(h)|l);this.TW(h,u),this.cr(h,this.g.Ua(p)),-1!=this.Os&&this.iX(this.Os,h),this.lX(h,this.Os),this.Os=h,-1==this.Re&&(this.Re=h)}s=a,r.L(o)}e.mp.zp(n),this.ae=this.$g(),5==i&&(this.cg=this.$g()),4==i&&(this.xg=this.$g()),this.vP(i,t),0==this.Ni.Jj&&(this.IX(i),0==this.Ni.Jj&&(isNaN(this.lA)||this.xO()?(this.WN(),0==this.Ni.Jj&&(this.Jg(this.ae),this.ae=-1,this.gH&&this.PU(i,n))):this.pA=!0))},t.prototype.Ly=function(e){var t=this.jc(e),i=this.te(e),r=this.xa(e),n=this.jc(r),s=this.te(r);t!=r&&(this.Sl(s,t),this.Tl(t,s)),i!=r&&(this.Sl(i,n),this.Tl(n,i)),i=this.jk(e),this.Me(i)==e&&(n!=e?this.mn(i,n):this.mn(i,-1)),n=this.jk(r),this.Me(n)==r&&(t!=r?this.mn(n,t):this.mn(n,-1)),this.Kc.jd(e),this.Kc.jd(r)},t.prototype.OF=function(e,t){for(;;){if(-1==(t=e.we(t)))return-1;var i=e.ja(t);if(this.$e(i)!=this.$e(this.xa(i)))return i}},t.prototype.dr=function(e,t){var i;void 0===i&&(i=!0),this.MB(e,0,null,t,i)},t.prototype.vJ=function(t,i,r){var n=new e.ia(0);n.add(i),this.MB(t,4,n,r,1736==t.ic(i))},t.prototype.wJ=function(t,i,r){var n=new e.ia(0);n.add(i),this.MB(t,5,n,r,!0)},t.prototype.Ug=function(){null!=this.g&&(-1!=this.Bq&&(this.g.xW(this.Bq),this.Bq=-1),-1!=this.Cm&&(this.g.Td(this.Cm),this.Cm=-1),-1!=this.Cq&&(this.g.Td(this.Cq),this.Cq=-1),-1!=this.ae&&(this.Jg(this.ae),this.ae=-1),-1!=this.cg&&(this.Jg(this.cg),this.cg=-1),-1!=this.xg&&(this.Jg(this.xg),this.xg=-1),this.g=null,this.ge.mj(!0),this.jh.mj(!0),this.Os=this.Re=-1,null!=this.Kc&&this.Kc.mj(!0),null!=this.Gi&&(this.Gi.length=0),null!=this.Di&&(this.Di.length=0),null!=this.hH&&(this.hH.length=0),null!=this.ye&&this.ye.mj(!0),this.Hl=-1,this.Yn=null)},t.prototype.Me=function(e){return this.ge.T(e,2)},t.prototype.D=function(e,t){this.g.dG(this.eR(e),t)},t.prototype.xd=function(e){return this.ge.T(e,1)},t.prototype.Rf=function(e){return this.ge.T(e,4)},t.prototype.cz=function(e){return this.ge.T(e,6)},t.prototype.km=function(e){return this.ge.T(e,7)},t.prototype.js=function(e){return this.jh.T(e,1)},t.prototype.tj=function(e){return this.jh.T(e,0)},t.prototype.ng=function(e,t){return(t=this.Di[t]).size<=e?-1:t.read(e)},t.prototype.nn=function(e,t,i){(t=this.Di[t]).size<=e&&t.resize(this.ge.size,-1),t.write(e,i)},t.prototype.Dp=function(){null==this.Di&&(this.Di=[]);for(var t=e.ia.qf(this.ge.Hg,-1),i=0,r=this.Di.length;i<r;i++)if(null==this.Di[i])return this.Di[i]=t,i;return this.Di.push(t),this.Di.length-1},t.prototype.Ep=function(e){this.Di[e]=null},t.prototype.jk=function(e){return this.Kc.T(e,1)},t.prototype.uf=function(e){return this.jk(this.xa(e))},t.prototype.xa=function(e){return this.Kc.T(e,4)},t.prototype.te=function(e){return this.Kc.T(e,5)},t.prototype.jc=function(e){return this.Kc.T(e,6)},t.prototype.$e=function(e){return this.Kc.T(e,2)},t.prototype.af=function(e){return this.hk(this.Kc.T(e,2))},t.prototype.mm=function(e){return this.Kc.T(e,7)},t.prototype.Yr=function(e,t){this.D(this.jk(e),t)},t.prototype.lm=function(e,t){this.D(this.uf(e),t)},t.prototype.dh=function(e){return this.Kc.T(e,3)&this.bO},t.prototype.Ab=function(e,t){return(t=this.Gi[t]).size<=e?-1:t.read(e)},t.prototype.Kb=function(e,t,i){(t=this.Gi[t]).size<=e&&t.resize(this.Kc.size,-1),t.write(e,i)},t.prototype.$g=function(){null==this.Gi&&(this.Gi=[]);for(var t=e.ia.qf(this.Kc.Hg,-1),i=0,r=this.Gi.length;i<r;i++)if(null==this.Gi[i])return this.Gi[i]=t,i;return this.Gi.push(t),this.Gi.length-1},t.prototype.Jg=function(e){this.Gi[e]=null},t.prototype.IP=function(e){var t=this.$e(e),i=this.xa(e),r=this.jc(e);r==i&&(r=this.jc(r))==e&&(r=-1);var n=this.AF(t);n!==e&&n!=i||this.Dt(t,r),i=this.Yn.read(t),isNaN(i)||(this.AJ(t,NaN),this.CJ(t,NaN)),this.yx(e,!0),this.Ly(e)},t.prototype.JP=function(e){for(var t=0,i=e.size;t<i;t++){var r=e.get(t),n=this.$e(this.xa(r));this.Dt(this.$e(r),-1),this.Dt(n,-1),this.yx(r,!0),this.Ly(r)}},t.prototype.AF=function(e){return this.ye.T(e,1)},t.prototype.hk=function(e){return this.ye.T(e,2)},t.prototype.Gn=function(e){return this.ye.T(e,3)},t.prototype.dR=function(e){return this.ye.T(e,4)},t.prototype.Kp=function(e){var t=this.Yn.read(e);return isNaN(t)&&(this.kY(e),t=this.Yn.read(e)),t},t.prototype.La=function(e){return this.g.KF(e,this.Bq)},t.prototype.Le=function(e){return this.g.Pa(e,this.Cm)},t.prototype.uR=function(e){return this.g.Pa(e,this.Cq)},t.prototype.tR=function(e,t){var i=this.Me(e);if(-1==i)return-1;var r=i,n=-1,s=-1;do{if(this.uf(r)==t)return r;if(-1==n){if(-1==(n=this.Me(t)))break;s=n}if(this.uf(s)==e)return this.xa(s);r=this.jc(this.xa(r)),s=this.jc(this.xa(s))}while(r!=i&&s!=n);return-1},t.prototype.pB=function(t,i){i.Or(),i=i.get();var r=new e.h;this.Yr(t,r),i.Dc(r),this.lm(t,r),i.Qc(r)},t.prototype.HO=function(t,i){if(t==i)return 0;var r=new e.h;this.lm(t,r);var n=new e.h;return this.lm(i,n),r.qb(n)?0:(i=new e.h,this.Yr(t,i),(t=new e.h).uc(r,i),(r=new e.h).uc(n,i),e.h.nu(t,r))},t.prototype.GO=function(t,i){if(t==i)return 0;var r=new e.h;this.lm(t,r);var n=new e.h;return this.lm(i,n),r.qb(n)?0:(i=new e.h,this.Yr(t,i),(t=new e.h).uc(r,i),(r=new e.h).uc(n,i),0<=r.y&&0<t.y?e.h.nu(t,r):0)},t.prototype.xO=function(){for(var t=e.lc.ox(this.lA),i=new e.h,r=new e.h,n=new e.h,s=new e.h,o=new e.h,a=this.Re;-1!=a;a=this.Rf(a)){var l=this.Me(a);if(-1!=l){var c=l;this.Yr(c,i),this.lm(c,r),o.uc(r,i);var h=o.Sk();do{var u=c;if((c=this.jc(this.xa(c)))!=u){this.lm(c,n),s.uc(n,i),u=s.Sk();var p=s.wi(o);if(p*p/(u*h)*Math.min(u,h)<=t)return!1;o.L(s),h=u,r.L(n)}}while(c!=l)}}return!0},t}(),e.iu=t}(Y||(Y={})),function(e){var t=function(){function t(){this.j=null,this.oH=new e.h,this.pH=new e.h,this.Gj=null,this.Mv=!1,this.tl=-1}return t.prototype.cf=function(e){return e<this.Gj.length&&this.Gj[e]},t.prototype.dl=function(t,i,r,n){var s=e.aa.tf(this.j.g.ic(r));if(2!=e.aa.tf(this.j.g.ic(i))||1!=s)throw e.i.Qa();this.FP(t,i,r,n)},t.prototype.dr=function(t,i){null==this.j&&(this.j=new e.iu),this.j.dr(t,i)},t.prototype.Ft=function(t,i,r){for(e.Tk.V(t,i,r,!0),i=t.ld;-1!=i;i=t.ue(i))1736==t.ic(i)&&e.rn.V(t,i,-1,this.Mv,r);this.dr(t,r)},t.prototype.ME=function(e,t,i,r,n){var s=this.j.g;if(1736==s.ic(e))for(e=s.Ob(e);-1!=e;e=s.Rb(e)){var o=s.Xa(e);this.j.Le(o),this.j.Le(s.U(o));var a=this.j.uR(o);if(-1!=a){var l=this.j.Ab(a,i);if(1!=l&&2!=l)if(this.cf(this.j.af(a))){this.j.Kb(a,i,1),l=s.vf(t,-1);var c=a,h=this.j.Le(o),u=1;do{var p=this.sm(o,n);s.ij(l,p),-1!=r&&this.j.nn(h,r,1),this.j.Kb(c,i,1),c=this.j.jc(c);do{var d=-1!=(p=1==u?s.U(o):s.Ma(o))?this.j.Le(p):-1}while(d==h);var f=this.j.jk(c);if(f!=d){do{d=-1!=(p=1==u?s.Ma(o):s.U(o))?this.j.Le(p):-1}while(d==h);f!=d?(d=f,p=this.j.tj(this.j.km(d))):u=-u}h=d,o=p}while(c!=a);s.kn(l,!0)}else this.j.Kb(a,i,2)}}},t.prototype.eF=function(){for(var t=this.j.$g(),i=new e.ia(0),r=this.j.Re;-1!=r;r=this.j.Rf(r)){var n=this.j.Me(r),s=n;if(-1!=n)do{if(1!=this.j.Ab(s,t)){var o=this.j.xa(s);this.j.Kb(o,t,1),this.j.Kb(s,t,1),this.cf(this.j.af(s))&&this.cf(this.j.af(o))&&i.add(s)}s=this.j.jc(this.j.xa(s))}while(s!=n)}this.j.Jg(t),this.j.JP(i)},t.prototype.sm=function(e,t){return-1==t?e:this.aS(e,t)},t.prototype.aS=function(e,t){var i=this.j.g,r=this.j.km(this.j.Le(e));do{var n=this.j.tj(r);if(i.Qf(i.bd(n))==t)return n;r=this.j.js(r)}while(-1!=r);return e},t.prototype.Ot=function(t,i,r){this.eF();var n=this.j.g,s=n.Ig(1736),o=this.j.$g();return this.uK(t,i,s,r,o,-1),this.j.Jg(o),e.rn.V(n,s,1,this.Mv,null),s},t.prototype.uK=function(e,t,i,r,n,s){for(this.ME(e,i,n,s,r),-1!=t&&this.ME(t,i,n,s,r),e=this.j.g,t=this.j.Re;-1!=t;t=this.j.Rf(t)){var o=this.j.Me(t);if(-1!=o){var a=o;do{var l=this.j.Ab(a,n);if(1!=l&&2!=l)if(this.cf(this.j.af(a))){l=e.vf(i,-1);var c=a;do{var h=this.j.mm(c);-1!=h?h=this.j.tj(h):(h=this.j.tj(this.j.mm(this.j.xa(c))),h=this.j.g.U(h)),h=this.sm(h,r),e.ij(l,h),this.j.Kb(c,n,1),-1!=s&&(h=this.j.Le(h),this.j.nn(h,s,1)),c=this.j.jc(c)}while(c!=a);e.kn(l,!0)}else this.j.Kb(a,n,2);a=this.j.jc(this.j.xa(a))}while(a!=o)}}},t.prototype.aY=function(t,i,r){var n=this.j.g,s=n.Ig(1736),o=n.Ig(1607),a=n.Ig(550);this.eF();var l=-1,c=this.j.$g(),h=this.j.Dp();for(this.uK(t,i,s,r,c,h),t=this.j.Re;-1!=t;t=this.j.Rf(t))if(-1!=(i=this.j.Me(t))){var u=i;do{var p=this.j.Ab(u,c),d=this.j.Ab(this.j.xa(u),c);if(2==(p|=d))if(p=this.j.dh(u),this.cf(p)){var f=n.vf(o,-1),y=u;p=this.Yw(t,n),p=this.sm(p,r),n.ij(f,p),this.j.nn(t,h,1);do{if(p=this.j.uf(y),d=this.Yw(p,n),d=this.sm(d,r),n.ij(f,d),this.j.Kb(y,c,1),this.j.Kb(this.j.xa(y),c,1),this.j.nn(p,h,1),y=this.j.jc(y),p=this.j.Ab(y,c),2!=(p|=d=this.j.Ab(this.j.xa(y),c)))break;if(p=this.j.dh(y),!this.cf(p)){this.j.Kb(y,c,1),this.j.Kb(this.j.xa(y),c,1);break}}while(y!=u)}else this.j.Kb(u,c,1),this.j.Kb(this.j.xa(u),c,1);u=this.j.jc(this.j.xa(u))}while(u!=i)}for(t=this.j.Re;-1!=t;t=this.j.Rf(t))1!=(p=this.j.ng(t,h))&&(p=this.j.xd(t),this.cf(p)&&(-1==l&&(l=n.vf(a,-1)),-1!=(i=this.j.km(t))&&(i=this.j.tj(i),p=this.sm(i,r),n.ij(l,p))));return this.j.Ep(h),this.j.Jg(c),e.rn.V(n,s,1,this.Mv,null),(r=[])[0]=a,r[1]=o,r[2]=s,r},t.prototype.Yw=function(e,t){var i=-1;for(e=this.j.km(e);-1!=e;e=this.j.js(e)){var r=this.j.tj(e);-1==i&&(i=r);var n=this.j.La(t.Qf(t.bd(r)));if(this.cf(n)){i=r;break}}return i},t.prototype.lB=function(t,i){for(var r=this.jl(i),n=this.j.jk(i),s=this.j.uf(i),o=0,a=0,l=this.j.km(n);-1!=l;l=this.j.js(l)){var c=this.j.tj(l),h=t.bd(c),u=this.j.La(t.Qf(h));h=t.Xa(h),(u=!!(u&r))&&h==c&&(this.tl=i);var p=t.U(c);-1!=p&&this.j.Le(p)==s?(o++,u&&(-1===this.tl&&h==p&&(c=this.j.jc(i),this.cf(this.jl(c))&&(this.tl=c)),a++)):-1!=(c=t.Ma(c))&&this.j.Le(c)==s&&(o--,u&&(-1===this.tl&&h===c&&(c=this.j.jc(i),this.cf(this.jl(c))&&(this.tl=c)),a--))}return this.j.D(n,this.oH),this.j.D(s,this.pH),(0!=a?a:o)*e.h.tb(this.oH,this.pH)},t.prototype.jl=function(e){return this.j.dh(e)|this.j.af(e)|this.j.af(this.j.xa(e))},t.prototype.xK=function(e){for(var t=this.j.xa(this.j.te(e)),i=-1;t!=e;){if(this.cf(this.jl(t))){if(-1!=i)return-1;i=t}t=this.j.xa(this.j.te(t))}return-1!=i?this.j.xa(i):-1},t.prototype.yK=function(e){for(var t=this.j.xa(this.j.jc(e)),i=-1;t!=e;){if(this.cf(this.jl(t))){if(-1!=i)return-1;i=t}t=this.j.xa(this.j.jc(t))}return-1!=i?this.j.xa(i):-1},t.prototype.mJ=function(t,i,r,n,s){var o=this.j.g,a=t,l=this.j.xa(a);this.j.Kb(a,r,1),this.j.Kb(l,r,1),this.tl=-1;for(var c=this.lB(o,a),h=a,u=-1,p=!1,d=1;;){var f=this.j.te(a);if(f==l)break;if(l=this.j.jc(l),this.j.xa(f)!=l){if(-1==(a=this.xK(a))){p=!0;break}l=this.j.xa(a)}else a=f;if(a==t){u=t;break}if(f=this.jl(a),!this.cf(f))break;this.j.Kb(a,r,1),this.j.Kb(l,r,1),h=a,c+=this.lB(o,a),d++}if(-1==u)for(a=t,l=this.j.xa(a),u=a;(t=this.j.jc(a))!=l;){if(l=this.j.te(l),this.j.xa(t)!=l){if(-1==(a=this.yK(a))){p=!0;break}l=this.j.xa(a)}else a=t;if(f=this.jl(a),!this.cf(f))break;this.j.Kb(a,r,1),this.j.Kb(l,r,1),u=a,c+=this.lB(o,a),d++}else if(-1!=this.tl&&(h=this.tl,u=this.j.te(this.tl),this.j.xa(u)!=this.j.jc(this.j.xa(h))&&-1==(u=this.xK(h))))throw e.i.Qa();for(0<=c||(a=u,u=this.j.xa(h),h=this.j.xa(a)),r=o.vf(i,-1),a=h,h=this.j.jk(h),p=this.j.uf(u)==h&&p,c=this.Yw(h,o),c=this.sm(c,s),o.ij(r,c),-1!=n&&this.j.nn(h,n,1),h=0,d=p?e.O.truncate((d+1)/2):-1;t=this.j.uf(a),c=this.Yw(t,o),c=this.sm(c,s),o.ij(r,c),h++,-1!=n&&this.j.nn(t,n,1),p&&h==d&&(r=o.vf(i,-1),o.ij(r,c)),a!=u;)if(t=this.j.jc(a),this.j.te(this.j.xa(a))!=this.j.xa(t)){if(-1==(a=this.yK(a)))throw e.i.Qa()}else a=t},t.prototype.Pt=function(e){for(var t=this.j.g.Ig(1607),i=this.j.$g(),r=this.j.Re;-1!=r;r=this.j.Rf(r)){var n=this.j.Me(r),s=n;do{1!=this.j.Ab(s,i)&&this.cf(this.jl(s))&&this.mJ(s,t,i,-1,e),s=this.j.jc(this.j.xa(s))}while(s!=n)}return this.j.Jg(i),t},t.prototype.bY=function(e){for(var t=this.j.g,i=t.Ig(1607),r=t.Ig(550),n=this.j.$g(),s=this.j.Dp(),o=-1,a=this.j.Re;-1!=a;a=this.j.Rf(a)){var l=this.j.Me(a),c=l;do{var h=this.j.Ab(c,n);1!=h&&(h=this.jl(c),this.cf(h)&&this.mJ(c,i,n,s,e)),c=this.j.jc(this.j.xa(c))}while(c!=l)}for(a=this.j.Re;-1!=a;a=this.j.Rf(a))1!=(h=this.j.ng(a,s))&&(h=this.j.xd(a),this.cf(h)&&(-1==o&&(o=t.vf(r,-1)),-1!=(l=this.j.km(a))&&(l=this.j.tj(l),l=this.sm(l,e),t.ij(o,l))));return this.j.Jg(n),this.j.Ep(s),(e=[])[0]=r,e[1]=i,e},t.prototype.mr=function(){for(var e=this.j.g,t=e.Ig(550),i=e.vf(t,-1),r=this.j.Re;-1!=r;r=this.j.Rf(r))if(this.cf(this.j.xd(r))){for(var n=-1,s=this.j.km(r);-1!=s;s=this.j.js(s)){var o=this.j.tj(s);-1==n&&(n=o);var a=this.j.La(e.Qf(e.bd(o)));if(this.cf(a)){n=o;break}}e.ij(i,n)}return t},t.prototype.bq=function(e){this.Gj=[];for(var t=0;t<e;t++)this.Gj[t]=!1},t.aW=function(t,i,r){var n=t.Ia(),s=Array(1e3);e.O.$u(s,null);var o=e.O.lg(1e3,0),a=t.I(),l=!0,c=2==i.Db();if(1!=i.Db()&&2!=i.Db())throw e.i.Qa();for(var h=0;h<a;){var u=e.O.truncate(t.lW(s,h)-h);c?e.hd.sK(i,s,u,r,o):e.hd.tK(i,s,u,r,o);for(var p=0,d=0;d<u;d++)0==o[d]&&(l&&(l=!1,n.Fd(t,0,h)),p!=d&&n.Fd(t,h+p,h+d),p=d+1);l||p==u||n.Fd(t,h+p,h+u),h+=u}return l?t:n},t.zG=function(i,r,n){return i instanceof e.de?t.aW(i,r,n):r instanceof e.Sa?i.B()||r.B()?i.Ia():e.Tk.zU(n,i,r)?e.Tk.CO(i,r):i.Ia():t.bW(i,r,n)},t.Av=function(i,r,n,s){var o=new e.l;i.A(o);var a=new e.l;r.A(a);var l=new e.l;if(l.K(o),l.Zb(a),n=e.ta.Wd(n,l,!0),(l=new e.l).K(a),a=e.ta.Er(n),l.W(a,a),!o.isIntersecting(l)){if(i.Db()<=r.Db())return t.ki(t.Xe(i.Ia()),i,"&");if(i.Db()>r.Db())return t.ki(t.Xe(r.Ia()),i,"&")}return a=new t,l=(o=new e.gd).Ib(t.Xe(i)),r=o.Ib(t.Xe(r)),a.Ft(o,n,s),s=a.Av(l,r),i=t.ki(o.Ne(s),i,"&"),e.aa.Hc(i.getType())&&(i.Ch(2,n),1736==i.getType()&&i.fm()),i},t.bW=function(t,i,r){if(t.B()||i.B())return t.Ia();var n=[null],s=[0],o=2==i.Db();if(1!=i.Db()&&2!=i.Db())throw e.i.Qa();return n[0]=t.D(),o?e.hd.sK(i,n,1,r,s):e.hd.tK(i,n,1,r,s),0==s[0]?t.Ia():t},t.prototype.LU=function(t,i,r,n,s){if(t.B())return t;var o=new e.gd;return t=o.Ib(t),this.Mk(o,t,i,r,n,s)},t.prototype.NU=function(t,i,r,n,s,o){if(s&&550!=t.ic(i)){var a=new e.RC;a.TX(t,r),a.Ng?(e.Tk.V(t,r,o,!0),s=!1):this.j.yy(r)}else e.Tk.V(t,r,o,!0),s=!1;if(n&&550!=t.ic(i)?this.j.wJ(t,i,o):this.j.vJ(t,i,o),this.j.pA)return this.j.Ug(),this.j=null,this.Mk(t,i,r,n,!1,o);if(this.j.yy(NaN),o=this.j.La(i),this.bq(o+1),this.Gj[o]=!0,1736==t.ic(i)||n&&550!=t.ic(i))return t.Yo(i,0),i=this.Ot(i,-1,-1),(t=t.Ne(i)).Yo(0),s?t.Ch(1,0):(t.Ch(2,r),t.fm()),t;if(1607==t.ic(i))return i=this.Pt(-1),t=t.Ne(i),s||t.Ch(2,r),t;if(550==t.ic(i))return i=this.mr(),t=t.Ne(i),s||t.Ch(2,r),t;throw e.i.Qa()},t.prototype.Mk=function(t,i,r,n,s,o){this.j=new e.iu;try{return this.NU(t,i,r,n,s,o)}finally{this.j.Ug()}},t.Mk=function(e,i,r,n,s){return(new t).LU(e,i,r,n,s)},t.prototype.MU=function(t,i,r,n){this.Mv=t,this.j=new e.iu,t=i.In(r);var s=i.ic(r);if(1!=t||550==s?this.j.vJ(i,r,n):this.j.wJ(i,r,n),!this.j.pA)if(this.j.yy(NaN),n=this.j.La(r),this.bq(n+1),this.Gj[n]=!0,1736==i.ic(r)||1==t&&550!=i.ic(r))i.Yo(r,0),n=this.Ot(r,-1,-1),i.hC(n,r),i.BB(n);else if(1607==i.ic(r))n=this.Pt(-1),i.hC(n,r),i.BB(n);else{if(550!=i.ic(r))throw e.i.fa("internal error");n=this.mr(),i.hC(n,r),i.BB(n)}},t.prototype.im=function(t,i){var r=e.aa.tf(this.j.g.ic(t)),n=e.aa.tf(this.j.g.ic(i));if(r>n)return t;var s=this.j.La(t),o=this.j.La(i);if(this.bq(1+(s|o)),this.Gj[this.j.La(t)]=!0,2==r&&2==n)return this.Ot(t,i,-1);if(1==r&&2==n||1==r&&1==n)return this.Pt(-1);if(0==r)return this.mr();throw e.i.Qa()},t.prototype.Av=function(t,i){var r=e.aa.tf(this.j.g.ic(t)),n=e.aa.tf(this.j.g.ic(i)),s=this.j.La(t),o=this.j.La(i);if(this.bq(1+(s|o)),this.Gj[this.j.La(t)|this.j.La(i)]=!0,s=-1,1<this.j.g.ht.Aa&&(s=t),2==r&&2==n)return this.Ot(t,i,s);if(1==r&&0<n||1==n&&0<r)return this.Pt(s);if(0==r||0==n)return this.mr();throw e.i.Qa()},t.prototype.Pz=function(t,i){var r=e.aa.tf(this.j.g.ic(t)),n=e.aa.tf(this.j.g.ic(i)),s=this.j.La(t),o=this.j.La(i);if(this.bq(1+(s|o)),this.Gj[this.j.La(t)|this.j.La(i)]=!0,s=-1,1<this.j.g.ht.Aa&&(s=t),2==r&&2==n)return this.aY(t,i,s);if(1==r&&0<n||1==n&&0<r)return this.bY(s);if(0==r||0==n)return(t=[])[0]=this.mr(),t;throw e.i.Qa()},t.prototype.ep=function(t,i){var r=e.aa.tf(this.j.g.ic(t)),n=e.aa.tf(this.j.g.ic(i)),s=this.j.La(t),o=this.j.La(i);if(this.bq(1+(s|o)),this.Gj[this.j.La(t)]=!0,this.Gj[this.j.La(i)]=!0,2==r&&2==n)return this.Ot(t,i,-1);if(1==r&&1==n)return this.Pt(-1);if(0==r&&0==n)return this.mr();throw e.i.Qa()},t.Xe=function(t){var i=t.getType();return 197==i?(i=new e.Da(t.description),t.B()||i.ad(t,!1),i):33==i?(i=new e.de(t.description),t.B()||i.add(t),i):322==i?(i=new e.Ta(t.description),t.B()||i.oc(t,!0),i):t},t.ki=function(t,i,r){var n=t.getType();return 197==n?(i=new e.Da(t.description),t.B()||i.ad(t,!1),i):33!=n||"|"!=r&&"^"!=r?322==n?(i=new e.Ta(t.description),t.B()||i.oc(t,!0),i):33==n&&"-"==r&&33==i.getType()||550==n&&"&"==r&&33==i.getType()?(i=new e.Sa(t.description),t.B()||t.ve(0,i),i):t:(i=new e.de(t.description),t.B()||i.add(t),i)},t.im=function(i,r,n,s){if(i.B()||r.B()||i.Db()>r.Db())return t.ki(t.Xe(i),i,"-");var o=new e.l;i.A(o);var a=new e.l;if(r.A(a),!o.isIntersecting(a))return t.ki(t.Xe(i),i,"-");var l=new e.l;return l.K(o),l.Zb(a),n=e.ta.Wd(n,l,!0),a=new t,l=(o=new e.gd).Ib(t.Xe(i)),r=o.Ib(t.Xe(r)),a.Ft(o,n,s),s=a.im(l,r),s=o.Ne(s),i=t.ki(s,i,"-"),e.aa.Hc(i.getType())&&(i.Ch(2,n),1736==i.getType()&&i.fm()),i},t.VP=function(i,r,n){if(2>i.length)throw e.i.N("not enough geometries to dissolve");for(var s=0,o=0,a=i.length;o<a;o++)s=Math.max(i[o].Db(),s);var l=new e.l;l.Oa();var c=new e.gd,h=-1,u=0,p=-1;for(o=0,a=i.length;o<a;o++)if(i[o].Db()==s)if(i[o].B())-1==p&&(p=o);else{p=o,-1==h?h=c.Ib(t.Xe(i[o])):c.uN(h,t.Xe(i[o]));var d=new e.l;i[o].xc(d),l.Zb(d),u++}return 2>u?t.Xe(i[p]):(i=2==s,r=e.ta.Wd(0==s?r:null,l,!0),(new t).Mk(c,h,r,i,!0,n))},t.Pz=function(i,r,n,s){var o=[null,null,null],a=new e.l;i.A(a);var l=new e.l;r.A(l);var c=new e.l;if(c.K(a),c.Zb(l),n=e.ta.Wd(n,c,!0),(c=new e.l).K(l),l=e.ta.Er(n),c.W(l,l),!a.isIntersecting(c)){if(i.Db()<=r.Db())return o[(i=t.ki(t.Xe(i.Ia()),i,"&")).Db()]=i,o;if(i.Db()>r.Db())return o[(i=t.ki(t.Xe(r.Ia()),i,"&")).Db()]=i,o}for(l=new t,c=(a=new e.gd).Ib(t.Xe(i)),r=a.Ib(t.Xe(r)),l.Ft(a,n,s),s=l.Pz(c,r),r=0;r<s.length;r++)l=t.ki(a.Ne(s[r]),i,"&"),e.aa.Hc(l.getType())&&(l.Ch(2,n),1736==l.getType()&&l.fm()),o[l.Db()]=l;return o},t.ep=function(i,r,n,s){if(i.Db()>r.Db())return t.ki(t.Xe(i),i,"^");if(i.Db()<r.Db()||i.B())return t.ki(t.Xe(r),i,"^");if(r.B())return t.ki(t.Xe(i),i,"^");var o=new e.l;i.A(o);var a=new e.l;r.A(a);var l=new e.l;return l.K(o),l.Zb(a),n=e.ta.Wd(n,l,!0),a=new t,l=(o=new e.gd).Ib(t.Xe(i)),r=o.Ib(t.Xe(r)),a.Ft(o,n,s),s=a.ep(l,r),i=t.ki(o.Ne(s),i,"^"),e.aa.Hc(i.getType())&&(i.Ch(2,n),1736==i.getType()&&i.fm()),i},t.prototype.LQ=function(e,t){var i=this.j.g;e=i.vf(e,-1);for(var r=t.size,n=0;n<r;n++){var s=t.get(n);i.ij(e,s)}i.kn(e,!0)},t.prototype.aX=function(e,t){for(var i=this.j.g,r=i.ld;-1!=r;r=i.ue(r))if(r==t)for(var n=i.Ob(r);-1!=n;n=i.Rb(n)){var s=i.Xa(n);if(-1!=s)for(var o=i.U(s);-1!=o;){s=this.j.Le(s);var a=this.j.Le(o);-1!=(s=this.j.tR(s,a))&&(a=this.j.xa(s),this.j.Kb(s,e,1),this.j.Kb(a,e,2)),s=o,o=i.U(s)}}},t.prototype.cW=function(t,i,r,n){r=this.j.La(r),n=this.j.La(n);var s=new e.ia(0);s.Jb(256);for(var o=this.j.g,a=this.j.$g(),l=this.j.Re;-1!=l;l=this.j.Rf(l)){var c=this.j.Me(l);if(-1!=c){var h=c;do{if(1!=this.j.Ab(h,a)){var u=h,p=h,d=!1,f=0;do{if(this.j.Kb(u,a,1),!d){var y=this.j.dh(u);y&n&&this.j.af(u)&r&&(p=u,d=!0)}d&&(s.add(this.j.tj(this.j.km(this.j.jk(u)))),-1!=t&&!!((y=this.j.dh(u))&n)&&(f|=y=this.j.Ab(u,t))),u=this.j.jc(u)}while(u!=p);d&&0<this.j.Kp(this.j.$e(p))&&(u=o.Ig(1736),this.LQ(u,s),-1!=i&&o.HJ(u,i,f)),s.clear(!1)}h=this.j.jc(this.j.xa(h))}while(h!=c)}}this.j.Jg(a)},t.prototype.FP=function(e,t,i,r){this.j.yW();var n=-1;-1!=e&&(n=this.j.$g(),this.aX(n,i)),this.cW(n,e,t,i),-1!=n&&(this.j.Jg(n),n=-1);var s=this.j.g;for(e=0,n=s.ld;-1!=n;n=s.ue(n))n!=t&&n!=i&&(r.add(n),e++);r.Vd(0,e,(function(e,t){return(e=s.wz(s.Ob(e)))<(t=s.wz(s.Ob(t)))?-1:e==t?0:1}))},t.prototype.Ug=function(){null!=this.j&&(this.j.Ug(),this.j=null)},t}();e.Fg=t}(Y||(Y={})),function(e){var t=function(){function t(e){void 0!==e?this.setScale(e):this.RB()}return t.prototype.lx=function(){this.Lb=this.Gb=this.jb=this.eb=this.ab=this.bb=0},t.prototype.Nb=function(e){return this==e||e instanceof t&&this.bb==e.bb&&this.eb==e.eb&&this.Gb==e.Gb&&this.jb==e.jb&&this.ab==e.ab&&this.Lb==e.Lb},t.prototype.cc=function(){return e.O.uj(),e.O.uj(),e.O.uj(),e.O.uj(),e.O.uj(),e.O.uj()},t.prototype.Eh=function(e,t){var i=this.jb*e.x+this.ab*e.y+this.Lb;t.x=this.bb*e.x+this.eb*e.y+this.Gb,t.y=i},t.prototype.eY=function(t,i,r){for(var n=0;n<i;n++){var s=t[n].x,o=t[n].y,a=this.bb*s+this.eb*o+this.Gb;s=this.jb*s+this.ab*o+this.Lb,null!=r[n]?r[n].ma(a,s):r[n]=e.h.construct(a,s)}},t.prototype.multiply=function(e){t.multiply(this,e,this)},t.multiply=function(e,t,i){var r=e.bb*t.bb+e.jb*t.eb,n=e.eb*t.bb+e.ab*t.eb,s=e.Gb*t.bb+e.Lb*t.eb+t.Gb,o=e.bb*t.jb+e.jb*t.ab,a=e.eb*t.jb+e.ab*t.ab;e=e.Gb*t.jb+e.Lb*t.ab+t.Lb,i.bb=r,i.eb=n,i.Gb=s,i.jb=o,i.ab=a,i.Lb=e},t.prototype.Of=function(){var e=new t;return e.bb=this.bb,e.eb=this.eb,e.Gb=this.Gb,e.jb=this.jb,e.ab=this.ab,e.Lb=this.Lb,e},t.prototype.mC=function(t){if(!t.B()){for(var i=[],r=0;4>r;r++)i[r]=new e.h;t.nB(i),this.fY(i,i),t.Zw(i,4)}},t.prototype.fY=function(t,i){for(var r=0;r<t.length;r++){var n=new e.h,s=t[r];n.x=this.bb*s.x+this.eb*s.y+this.Gb,n.y=this.jb*s.x+this.ab*s.y+this.Lb,i[r]=n}},t.prototype.pS=function(e,t){e.B()||t.B()||0==e.R()||0==e.ca()?this.lx():(this.eb=this.jb=0,this.bb=t.R()/e.R(),this.ab=t.ca()/e.ca(),this.Gb=t.v-e.v*this.bb,this.Lb=t.G-e.G*this.ab)},t.prototype.dY=function(t){var i=new e.h,r=new e.h;i.ma(this.bb,this.jb),r.ma(this.eb,this.ab),i.sub(i);var n=.5*i.Sk();return i.ma(this.bb,this.jb),r.ma(this.eb,this.ab),i.add(r),t*(n>(i=.5*i.Sk())?Math.sqrt(n):Math.sqrt(i))},t.prototype.RB=function(){this.bb=1,this.jb=this.Gb=this.eb=0,this.ab=1,this.Lb=0},t.prototype.isIdentity=function(t){if(void 0!==t){var i=e.h.construct(0,1);return this.Eh(i,i),i.sub(e.h.construct(0,1)),!(i.Sk()>t*t)&&(i.ma(0,0),this.Eh(i,i),!(i.Sk()>t*t)&&(i.ma(1,0),this.Eh(i,i),i.sub(e.h.construct(1,0)),i.Sk()<=t*t))}return 1==this.bb&&1==this.ab&&0==this.eb&&0==this.Gb&&0==this.jb&&0==this.Lb},t.prototype.Bi=function(e){return Math.abs(this.bb*this.ab-this.jb*this.eb)<=2*e*(Math.abs(this.bb*this.ab)+Math.abs(this.jb*this.eb))},t.prototype.gg=function(e,t){this.bb=1,this.eb=0,this.Gb=e,this.jb=0,this.ab=1,this.Lb=t},t.prototype.setScale=function(e,t){void 0!==t?(this.bb=e,this.jb=this.Gb=this.eb=0,this.ab=t,this.Lb=0):this.setScale(e,e)},t.prototype.$B=function(){this.bb=0,this.eb=1,this.Gb=0,this.jb=1,this.Lb=this.ab=0},t.prototype.setRotate=function(e){this.pX(Math.cos(e),Math.sin(e))},t.prototype.pX=function(e,t){this.bb=e,this.eb=-t,this.Gb=0,this.jb=t,this.ab=e,this.Lb=0},t.prototype.shift=function(e,t){this.Gb+=e,this.Lb+=t},t.prototype.scale=function(e,t){this.bb*=e,this.eb*=e,this.Gb*=e,this.jb*=t,this.ab*=t,this.Lb*=t},t.prototype.flipX=function(e,t){this.bb=-this.bb,this.eb=-this.eb,this.Gb=e+t-this.Gb},t.prototype.flipY=function(e,t){this.jb=-this.jb,this.ab=-this.ab,this.Lb=e+t-this.Lb},t.prototype.rotate=function(e){var i=new t;i.setRotate(e),this.multiply(i)},t.prototype.inverse=function(e){if(void 0!==e){var t=this.bb*this.ab-this.eb*this.jb;0==t?e.lx():(t=1/t,e.Gb=(this.eb*this.Lb-this.Gb*this.ab)*t,e.Lb=(this.Gb*this.jb-this.bb*this.Lb)*t,e.bb=this.ab*t,e.eb=-this.eb*t,e.jb=-this.jb*t,e.ab=this.bb*t)}else this.inverse(this)},t}();e.Dd=t}(Y||(Y={})),function(e){var t=function(){function t(){}return t.prototype.lx=function(){this.hg=this.Lb=this.Gb=this.He=this.Fe=this.Ee=this.Ge=this.ab=this.eb=this.Ze=this.jb=this.bb=0},t.prototype.setScale=function(e,t,i){this.bb=e,this.eb=this.Ze=this.jb=0,this.ab=t,this.Fe=this.Ee=this.Ge=0,this.He=i,this.hg=this.Lb=this.Gb=0},t.prototype.setTranslate=function(e,t,i){this.bb=1,this.eb=this.Ze=this.jb=0,this.ab=1,this.Fe=this.Ee=this.Ge=0,this.He=1,this.Gb=e,this.Lb=t,this.hg=i},t.prototype.translate=function(e,t,i){this.Gb+=e,this.Lb+=t,this.hg+=i},t.prototype.mC=function(t){if(!t.B()){for(var i=new e.Nd[8],r=0;8>r;r++)i[r]=new e.Nd;t.nB(i),this.transform(i,8,i),t.Zw(i)}},t.prototype.transform=function(t,i,r){for(var n=0;n<i;n++){var s=new e.Nd,o=t[n];s.x=this.bb*o.x+this.eb*o.y+this.Ee*o.z+this.Gb,s.y=this.jb*o.x+this.ab*o.y+this.Fe*o.z+this.Lb,s.z=this.Ze*o.x+this.Ge*o.y+this.He*o.z+this.hg,r[n]=s}},t.prototype.fp=function(t){var i=new e.Nd;return i.x=this.bb*t.x+this.eb*t.y+this.Ee*t.z+this.Gb,i.y=this.jb*t.x+this.ab*t.y+this.Fe*t.z+this.Lb,i.z=this.Ze*t.x+this.Ge*t.y+this.He*t.z+this.hg,i},t.prototype.Ag=function(e){t.multiply(this,e,this)},t.multiply=function(e,t,i){var r=e.bb*t.bb+e.jb*t.eb+e.Ze*t.Ee,n=e.bb*t.jb+e.jb*t.ab+e.Ze*t.Fe,s=e.bb*t.Ze+e.jb*t.Ge+e.Ze*t.He,o=e.eb*t.bb+e.ab*t.eb+e.Ge*t.Ee,a=e.eb*t.jb+e.ab*t.ab+e.Ge*t.Fe,l=e.eb*t.Ze+e.ab*t.Ge+e.Ge*t.He,c=e.Ee*t.bb+e.Fe*t.eb+e.He*t.Ee,h=e.Ee*t.jb+e.Fe*t.ab+e.He*t.Fe,u=e.Ee*t.Ze+e.Fe*t.Ge+e.He*t.He,p=e.Gb*t.bb+e.Lb*t.eb+e.hg*t.Ee+t.Gb,d=e.Gb*t.jb+e.Lb*t.ab+e.hg*t.Fe+t.Lb;e=e.Gb*t.Ze+e.Lb*t.Ge+e.hg*t.He+t.hg,i.bb=r,i.jb=n,i.Ze=s,i.eb=o,i.ab=a,i.Ge=l,i.Ee=c,i.Fe=h,i.He=u,i.Gb=p,i.Lb=d,i.hg=e},t.inverse=function(t,i){var r=t.bb*(t.ab*t.He-t.Ge*t.Fe)-t.jb*(t.eb*t.He-t.Ge*t.Ee)+t.Ze*(t.eb*t.Fe-t.ab*t.Ee);if(0==r)throw e.i.fa("math singularity");var n=1/r;r=(t.ab*t.He-t.Ge*t.Fe)*n;var s=-(t.eb*t.He-t.Ge*t.Ee)*n,o=(t.eb*t.Fe-t.ab*t.Ee)*n,a=-(t.jb*t.He-t.Fe*t.Ze)*n,l=(t.bb*t.He-t.Ze*t.Ee)*n,c=-(t.bb*t.Fe-t.jb*t.Ee)*n,h=(t.jb*t.Ge-t.Ze*t.ab)*n,u=-(t.bb*t.Ge-t.Ze*t.eb)*n;n*=t.bb*t.ab-t.jb*t.eb;var p=-(t.Gb*r+t.Lb*s+t.hg*o),d=-(t.Gb*a+t.Lb*l+t.hg*c);t=-(t.Gb*h+t.Lb*u+t.hg*n),i.bb=r,i.jb=a,i.Ze=h,i.eb=s,i.ab=l,i.Ge=u,i.Ee=o,i.Fe=c,i.He=n,i.Gb=p,i.Lb=d,i.hg=t},t.prototype.Of=function(){var e=new t;return e.bb=this.bb,e.jb=this.jb,e.Ze=this.Ze,e.eb=this.eb,e.ab=this.ab,e.Ge=this.Ge,e.Ee=this.Ee,e.Fe=this.Fe,e.He=this.He,e.Gb=this.Gb,e.Lb=this.Lb,e.hg=this.hg,e},t}();e.JY=t}(Y||(Y={})),function(e){var t=function(t){function r(e){if(void 0!==e)e=t.call(this,e.cc(),e)||this;else{(e=t.call(this)||this).bg=[],e.bg[0]=0,e.Aa=1,e.uh=[];for(var i=0;10>i;i++)e.uh[i]=-1;e.uh[e.bg[0]]=0}return e.jq=!0,e}return Q(r,t),r.prototype.re=function(e){this.hasAttribute(e)||(this.uh[e]=0,this.jD())},r.prototype.removeAttribute=function(t){if(0==t)throw e.i.N("Position attribue cannot be removed");this.hasAttribute(t)&&(this.uh[t]=-1,this.jD())},r.prototype.reset=function(){this.bg[0]=0,this.Aa=1;for(var e=0;e<this.uh.length;e++)this.uh[e]=-1;this.uh[this.bg[0]]=0,this.jq=!0},r.prototype.EF=function(){return i.kz().add(this)},r.og=function(){return i.kz().$R()},r.prototype.tM=function(){var t=this.cc();return new e.ra(t,this)},r.prototype.jD=function(){for(var e=this.Aa=0,t=0;10>e;e++)0<=this.uh[e]&&(this.bg[t]=e,this.uh[e]=t,t++,this.Aa++);this.jq=!0},r.prototype.cc=function(){return this.jq&&(this.wl=this.An(),this.jq=!1),this.wl},r.prototype.Nb=function(e){if(null==e)return!1;if(e==this)return!0;if(!(e instanceof r)||e.Aa!=this.Aa)return!1;for(var t=0;t<this.Aa;t++)if(this.bg[t]!=e.bg[t])return!1;return this.jq==e.jq},r.prototype.GG=function(e){if(e.Aa!=this.Aa)return!1;for(var t=0;t<this.Aa;t++)if(this.bg[t]!=e.bg[t])return!1;return!0},r.Iw=function(e,t){for(var i=[],r=0;r<e.Aa;r++)i[r]=-1;r=0;for(var n=e.Aa;r<n;r++)i[r]=t.Pf(e.kd(r));return i},r.BR=function(e,t){return(e=new r(e)).re(t),e.EF()},r.CR=function(e,t){for(var i=null,n=0;10>n;n++)!e.hasAttribute(n)&&t.hasAttribute(n)&&(null==i&&(i=new r(e)),i.re(n));return null!=i?i.EF():e},r}(e.ra);e.ee=t;var i=function(){function e(){this.map=[];var e=new t;this.add(e),(e=new t).re(1),this.add(e)}return e.kz=function(){return e.bL},e.prototype.$R=function(){return e.ft},e.prototype.add=function(t){var i=t.cc();if(null!=e.ft&&e.ft.cc()==i&&t.GG(e.ft))return e.ft;if(null!=e.Dw&&e.Dw.cc()==i&&t.GG(e.Dw))return e.Dw;var r=null;return void 0!==this.map[i]&&(r=this.map[i]),null==r&&(1==(r=t.tM()).Aa?e.ft=r:2==r.Aa&&1==r.kd(1)?e.Dw=r:this.map[i]=r),r},e.bL=new e,e}()}(Y||(Y={}));var se={feet:9002,kilometers:9036,meters:9001,miles:9093,"nautical-miles":9030,yards:9096},oe={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109439,"square-yards":109442},ae=new(function(){function e(){this.RM=50,this.np=new Map,this.gj=[]}return e.prototype.clear=function(){this.gj.length=0,this.np.clear()},e.prototype.delete=function(e){return!!this.np.delete(e)&&(this.gj.splice(this.gj.indexOf(e),1),!0)},e.prototype.get=function(e){var t=this.np.get(e);if(void 0!==t)return this.gj[0]!==e&&(this.gj.splice(this.gj.indexOf(e),1),this.gj.unshift(e)),t},e.prototype.has=function(e){return this.np.has(e)},e.prototype.set=function(e,t){return void 0!==this.get(e)&&this.delete(e),this.gj.unshift(e),this.np.set(e,t),this.oM(),this},e.prototype.oM=function(){for(;this.gj.length&&this.gj.length>this.RM;){var e=this.gj.pop();this.np.delete(e)}},e}()),le=((K={}).convertJSONToGeometry=function(e){return Y.$b.fP(e)},K.hasM=function(e){return e.hasAttribute(Y.Ih.M)},K.hasZ=function(e){return e.hasAttribute(Y.Ih.Z)},K.getPointX=function(e){return e.Lg()},K.getPointY=function(e){return e.ih()},K.getPointZ=function(e){return e.bS()},K.getPointM=function(e){return e.zR()},K.getXMin=function(e){return e.es()},K.getYMin=function(e){return e.gs()},K.getXMax=function(e){return e.ds()},K.getYMax=function(e){return e.fs()},K.getZExtent=function(e){return e.Tg(Y.Ih.Z,0)},K.getMExtent=function(e){return e.Tg(Y.Ih.M,0)},K.exportPaths=function(e){var t=[],i=e.da(),r=null,n=null,s=e.hasAttribute(Y.Ih.Z),o=e.hasAttribute(Y.Ih.M);s&&(r=e.ub(Y.Ih.Z)),o&&(n=e.ub(Y.Ih.M));for(var a=new Y.h,l=0;l<i;l++){for(var c=e.Ba(l),h=e.Ja(l),u=0,p=0,d=NaN,f=NaN,y=NaN,m=NaN,g=e.dc(l),v=[],_=c;_<c+h;_++){e.D(_,a),m=y=NaN;var b=[a.x,a.y];s&&(y=r.get(_),b.push(y)),o&&(m=n.get(_),b.push(m)),_==c&&g&&(u=a.x,p=a.y,d=y,f=m),v.push(b)}!g||u==a.x&&p==a.y&&(!s||isNaN(d)&&isNaN(y)||d==y)&&(!o||isNaN(f)&&isNaN(m)||f==m)||v.push(v[0].slice(0)),t.push(v)}return t},K.exportPathsFlat=function(){},K.exportPoints=function(e){var t=e.hasAttribute(Y.Ih.Z),i=e.hasAttribute(Y.Ih.M),r=null,n=null;t&&(r=e.ub(Y.Ih.Z)),i&&(n=e.ub(Y.Ih.M));for(var s=new Y.h,o=e.I(),a=[],l=0;l<o;l++){e.D(l,s);var c=[s.x,s.y];t&&c.push(r.get(l)),i&&c.push(n.get(l)),a.push(c)}return a},K.exportPointsFlat=function(){},K),ce=new Map;return function(){function e(){}return e.buffer=I,e.clip=l,e.contains=h,e.convexHull=M,e.crosses=u,e.cut=c,e.densify=P,e.difference=T,e.disjoint=g,e.distance=p,e.equals=d,e.extendedSpatialReferenceInfo=a,e.generalize=R,e.geodesicArea=Z,e.geodesicBuffer=C,e.geodesicDensify=D,e.geodesicLength=z,e.intersect=A,e.intersects=f,e.isSimple=b,e.nearestCoordinate=N,e.nearestVertex=L,e.nearestVertices=O,e.offset=x,e.overlaps=v,e.planarArea=F,e.planarLength=j,e.relate=_,e.simplify=w,e.symmetricDifference=S,e.touches=y,e.union=E,e.within=m,e.rotate=Y.Ex.rotate,e.flipHorizontal=Y.Ex.JQ,e.flipVertical=Y.Ex.KQ,e.intersectLinesToPoints=W,e.ExtendedParams=Y.yC,e.clearDefaultSpatialReferenceTolerance=q,e.changeDefaultSpatialReferenceTolerance=H,e._enableProjection=U,e._project=B,e._getTransformation=V,e._getTransformationBySuitability=G,e}()}();void 0!==i&&(e.exports=i)}(n);var s=n.exports;const o=(0,r.g)(s),a=function(e,t){for(var i=0;i<t.length;i++){const r=t[i];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const i=Object.getOwnPropertyDescriptor(r,t);i&&Object.defineProperty(e,t,i.get?i:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}({__proto__:null,default:o},[s])},89349:(e,t,i)=>{"use strict";i.d(t,{P:()=>u,a:()=>h,g:()=>c,h:()=>m,i:()=>a,j:()=>w,l:()=>l,p:()=>I});var r=i(44764),n=i(6273);let s,o=null;function a(){return!!o}function l(){return s||(s=i.e(3014).then(i.bind(i,93014)).then((e=>e.p)).then((({default:e})=>e({locateFile:e=>(0,r.s)(`esri/geometry/support/${e}`)}))).then((e=>{T(e)})),s)}var c,h,u,p;!function(e){function t(e,t,i){o.ensureCache.prepare();const r=E(i),n=i===r,s=o.ensureFloat64(r),a=o._pe_geog_to_proj(o.getPointer(e),t,s);return a&&x(i,t,s,n),a}function i(e,t,i){return r(e,t,i,0)}function r(e,t,i,r){o.ensureCache.prepare();const n=E(i),s=i===n,a=o.ensureFloat64(n),l=o._pe_proj_to_geog_center(o.getPointer(e),t,a,r);return l&&x(i,t,a,s),l}e.geogToProj=t,e.projGeog=function(e,r,n,s){switch(s){case h.PE_TRANSFORM_P_TO_G:return i(e,r,n);case h.PE_TRANSFORM_G_TO_P:return t(e,r,n)}return 0},e.projToGeog=i,e.projToGeogCenter=r}(c||(c={})),(p=h||(h={})).init=function(){p.PE_BUFFER_MAX=o.PeDefs.prototype.PE_BUFFER_MAX,p.PE_NAME_MAX=o.PeDefs.prototype.PE_NAME_MAX,p.PE_MGRS_MAX=o.PeDefs.prototype.PE_MGRS_MAX,p.PE_USNG_MAX=o.PeDefs.prototype.PE_USNG_MAX,p.PE_DD_MAX=o.PeDefs.prototype.PE_DD_MAX,p.PE_DDM_MAX=o.PeDefs.prototype.PE_DDM_MAX,p.PE_DMS_MAX=o.PeDefs.prototype.PE_DMS_MAX,p.PE_UTM_MAX=o.PeDefs.prototype.PE_UTM_MAX,p.PE_PARM_MAX=o.PeDefs.prototype.PE_PARM_MAX,p.PE_TYPE_NONE=o.PeDefs.prototype.PE_TYPE_NONE,p.PE_TYPE_GEOGCS=o.PeDefs.prototype.PE_TYPE_GEOGCS,p.PE_TYPE_PROJCS=o.PeDefs.prototype.PE_TYPE_PROJCS,p.PE_TYPE_GEOGTRAN=o.PeDefs.prototype.PE_TYPE_GEOGTRAN,p.PE_TYPE_COORDSYS=o.PeDefs.prototype.PE_TYPE_COORDSYS,p.PE_TYPE_UNIT=o.PeDefs.prototype.PE_TYPE_UNIT,p.PE_TYPE_LINUNIT=o.PeDefs.prototype.PE_TYPE_LINUNIT,p.PE_STR_OPTS_NONE=o.PeDefs.prototype.PE_STR_OPTS_NONE,p.PE_STR_AUTH_NONE=o.PeDefs.prototype.PE_STR_AUTH_NONE,p.PE_STR_AUTH_TOP=o.PeDefs.prototype.PE_STR_AUTH_TOP,p.PE_STR_NAME_CANON=o.PeDefs.prototype.PE_STR_NAME_CANON,p.PE_STR_FMT_WKT=o.PeDefs.prototype.PE_STR_FMT_WKT,p.PE_STR_FMT_WKT2=o.PeDefs.prototype.PE_STR_FMT_WKT2,p.PE_PARM_X0=o.PeDefs.prototype.PE_PARM_X0,p.PE_PARM_ND=o.PeDefs.prototype.PE_PARM_ND,p.PE_TRANSFORM_1_TO_2=o.PeDefs.prototype.PE_TRANSFORM_1_TO_2,p.PE_TRANSFORM_2_TO_1=o.PeDefs.prototype.PE_TRANSFORM_2_TO_1,p.PE_TRANSFORM_P_TO_G=o.PeDefs.prototype.PE_TRANSFORM_P_TO_G,p.PE_TRANSFORM_G_TO_P=o.PeDefs.prototype.PE_TRANSFORM_G_TO_P,p.PE_HORIZON_RECT=o.PeDefs.prototype.PE_HORIZON_RECT,p.PE_HORIZON_POLY=o.PeDefs.prototype.PE_HORIZON_POLY,p.PE_HORIZON_LINE=o.PeDefs.prototype.PE_HORIZON_LINE,p.PE_HORIZON_DELTA=o.PeDefs.prototype.PE_HORIZON_DELTA},function(e){const t={},i={},r=e=>{if(e){const t=e.getType();switch(t){case h.PE_TYPE_GEOGCS:e=o.castObject(e,o.PeGeogcs);break;case h.PE_TYPE_PROJCS:e=o.castObject(e,o.PeProjcs);break;case h.PE_TYPE_GEOGTRAN:e=o.castObject(e,o.PeGeogtran);break;default:t&h.PE_TYPE_UNIT&&(e=o.castObject(e,o.PeUnit))}}return e};function n(e,i){let n=null,s=t[e];if(s||(s={},t[e]=s),s.hasOwnProperty(String(i)))n=s[i];else{const t=o.PeFactory.prototype.factoryByType(e,i);o.compare(t,o.NULL)||(n=t,s[i]=n)}return n=r(n),n}e.initialize=function(){o.PeFactory.prototype.initialize(null)},e.coordsys=function(e){return n(h.PE_TYPE_COORDSYS,e)},e.factoryByType=n,e.fromString=function(e,t){let n=null,s=i[e];if(s||(s={},i[e]=s),s.hasOwnProperty(t))n=s[t];else{const i=o.PeFactory.prototype.fromString(e,t);o.compare(i,o.NULL)||(n=i,s[t]=n)}return n=r(n),n},e.geogcs=function(e){return n(h.PE_TYPE_GEOGCS,e)},e.geogtran=function(e){return n(h.PE_TYPE_GEOGTRAN,e)},e.getCode=function(e){return o.PeFactory.prototype.getCode(e)},e.projcs=function(e){return n(h.PE_TYPE_PROJCS,e)},e.unit=function(e){return n(h.PE_TYPE_UNIT,e)}}(u||(u={}));let d=null;var f,y,m,g,v,_,b,w,M;function T(e){function t(e,t,i){e[t]=i(e[t])}o=e,h.init(),f.init(),v.init(),b.init(),w.init(),d=class extends o.PeGCSExtent{destroy(){o.destroy(this)}};const i=[o.PeDatum,o.PeGeogcs,o.PeGeogtran,o.PeObject,o.PeParameter,o.PePrimem,o.PeProjcs,o.PeSpheroid,o.PeUnit];for(const e of i)t(e.prototype,"getName",(e=>function(){return e.call(this,new Array(h.PE_NAME_MAX))}));for(const e of[o.PeGeogtran,o.PeProjcs])t(e.prototype,"getParameters",(e=>function(){const t=new Array(h.PE_PARM_MAX);let i=e.call(this);for(let e=0;e<t.length;e++){const r=o.getValue(i,"*");t[e]=r?o.wrapPointer(r,o.PeParameter):null,i+=Int32Array.BYTES_PER_ELEMENT}return t}));t(o.PeHorizon.prototype,"getCoord",(e=>function(){const t=this.getSize();if(!t)return null;const i=[];return x(i,t,e.call(this)),i})),t(o.PeGTlistExtendedEntry.prototype,"getEntries",(e=>{const t=o._pe_getPeGTlistExtendedGTsSize();return function(){let i=null;const r=e.call(this);if(!o.compare(r,o.NULL)){i=[r];const e=this.getSteps();if(e>1){const n=o.getPointer(r);for(let r=1;r<e;r++)i.push(o.wrapPointer(n+t*r,o.PeGTlistExtendedGTs))}}return i}}));const r=o._pe_getPeHorizonSize(),n=e=>function(){let t=this._cache;if(t||(t=new Map,this._cache=t),t.has(e))return t.get(e);let i=null;const n=e.call(this);if(!o.compare(n,o.NULL)){i=[n];const e=n.getNump();if(e>1){const t=o.getPointer(n);for(let n=1;n<e;n++)i.push(o.wrapPointer(t+r*n,o.PeHorizon))}}return t.set(e,i),i};t(o.PeProjcs.prototype,"horizonGcsGenerate",n),t(o.PeProjcs.prototype,"horizonPcsGenerate",n),o.PeObject.prototype.toString=function(e=h.PE_STR_OPTS_NONE){o.ensureCache.prepare();const t=o.getPointer(this),i=o.ensureInt8(new Array(h.PE_BUFFER_MAX));return o.UTF8ToString(o._pe_object_to_string_ext(t,e,i))}}function S(e){if(!e)return;const t=o.getClass(e);if(!t)return;const i=o.getCache(t);if(!i)return;const r=o.getPointer(e);r&&delete i[r]}function A(e,t){const i=[],r=new Array(t);for(let t=0;t<e;t++)i.push(o.ensureInt8(r));return i}function E(e){let t;return Array.isArray(e[0])?(t=[],e.forEach((e=>{t.push(e[0],e[1])}))):t=e,t}function x(e,t,i,r=!1){if(r)for(let r=0;r<2*t;r++)e[r]=o.getValue(i+r*Float64Array.BYTES_PER_ELEMENT,"double");else{const r=0===e.length;for(let n=0;n<t;n++)r&&(e[n]=new Array(2)),e[n][0]=o.getValue(i,"double"),e[n][1]=o.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}!function(e){let t;e.init=function(){e.PE_GTLIST_OPTS_COMMON=o.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=o._pe_getPeGTlistExtendedEntrySize()},e.getGTlist=function(e,i,r,n,s,a){let l=null;const c=new o.PeInteger(a);try{const h=o.PeGTlistExtended.prototype.getGTlist(e,i,r,n,s,c);if((a=c.val)&&(l=[h],a>1)){const e=o.getPointer(h);for(let i=1;i<a;i++)l.push(o.wrapPointer(e+t*i,o.PeGTlistExtendedEntry))}}finally{o.destroy(c)}return l}}(f||(f={})),function(e){e.destroy=function(e){if(e?.length){for(const t of e)S(t),t.getEntries().forEach((e=>{S(e);const t=e.getGeogtran();S(t),t.getParameters().forEach(S),[t.getGeogcs1(),t.getGeogcs2()].forEach((e=>{S(e);const t=e.getDatum();S(t),S(t.getSpheroid()),S(e.getPrimem()),S(e.getUnit())}))}));o.PeGTlistExtendedEntry.prototype.Delete(e[0])}}}(y||(y={})),function(e){e.geogToGeog=function(e,t,i,r,n){o.ensureCache.prepare();const s=E(i),a=i===s,l=o.ensureFloat64(s);let c=0;r&&(c=o.ensureFloat64(r));const h=o._pe_geog_to_geog(o.getPointer(e),t,l,c,n);return h&&x(i,t,l,a),h}}(m||(m={})),function(e){const t=(e,t,i,r,n,s)=>{let a,l;switch(o.ensureCache.prepare(),e){case"dd":a=o._pe_geog_to_dd,l=h.PE_DD_MAX;break;case"ddm":a=o._pe_geog_to_ddm,l=h.PE_DDM_MAX;break;case"dms":a=o._pe_geog_to_dms,l=h.PE_DMS_MAX}let c=0;t&&(c=o.getPointer(t));const u=E(r),p=o.ensureFloat64(u),d=A(i,l),f=a(c,i,p,n,o.ensureInt32(d));if(f)for(let e=0;e<i;e++)s[e]=o.UTF8ToString(d[e]);return f},i=(e,t,i,r,n)=>{let s;switch(o.ensureCache.prepare(),e){case"dd":s=o._pe_dd_to_geog;break;case"ddm":s=o._pe_ddm_to_geog;break;case"dms":s=o._pe_dms_to_geog}let a=0;t&&(a=o.getPointer(t));const l=r.map((e=>o.ensureString(e))),c=o.ensureInt32(l),h=o.ensureFloat64(new Array(2*i)),u=s(a,i,c,h);return u&&x(n,i,h),u};e.geogToDms=function(e,i,r,n,s){return t("dms",e,i,r,n,s)},e.dmsToGeog=function(e,t,r,n){return i("dms",e,t,r,n)},e.geogToDdm=function(e,i,r,n,s){return t("ddm",e,i,r,n,s)},e.ddmToGeog=function(e,t,r,n){return i("ddm",e,t,r,n)},e.geogToDd=function(e,i,r,n,s){return t("dd",e,i,r,n,s)},e.ddToGeog=function(e,t,r,n){return i("dd",e,t,r,n)}}(g||(g={})),function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=o.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=o.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=o.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=o.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=o.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES},e.geogToMgrsExtended=function(e,t,i,r,n,s,a){o.ensureCache.prepare();let l=0;e&&(l=o.getPointer(e));const c=E(i),u=o.ensureFloat64(c),p=A(t,h.PE_MGRS_MAX),d=o.ensureInt32(p),f=o._pe_geog_to_mgrs_extended(l,t,u,r,n,s,d);if(f)for(let e=0;e<t;e++)a[e]=o.UTF8ToString(p[e]);return f},e.mgrsToGeogExtended=function(e,t,i,r,n){o.ensureCache.prepare();let s=0;e&&(s=o.getPointer(e));const a=i.map((e=>o.ensureString(e))),l=o.ensureInt32(a),c=o.ensureFloat64(new Array(2*t)),h=o._pe_mgrs_to_geog_extended(s,t,l,r,c);return h&&x(n,t,c),h}}(v||(v={})),function(e){e.geogToUsng=function(e,t,i,r,n,s,a){o.ensureCache.prepare();let l=0;e&&(l=o.getPointer(e));const c=E(i),u=o.ensureFloat64(c),p=A(t,h.PE_MGRS_MAX),d=o.ensureInt32(p),f=o._pe_geog_to_usng(l,t,u,r,n,s,d);if(f)for(let e=0;e<t;e++)a[e]=o.UTF8ToString(p[e]);return f},e.usngToGeog=function(e,t,i,r){o.ensureCache.prepare();let n=0;e&&(n=o.getPointer(e));const s=i.map((e=>o.ensureString(e))),a=o.ensureInt32(s),l=o.ensureFloat64(new Array(2*t)),c=o._pe_usng_to_geog(n,t,a,l);return c&&x(r,t,l),c}}(_||(_={})),function(e){e.init=function(){e.PE_UTM_OPTS_NONE=o.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=o.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=o.PeNotationUtm.prototype.PE_UTM_OPTS_NS},e.geogToUtm=function(e,t,i,r,n){o.ensureCache.prepare();let s=0;e&&(s=o.getPointer(e));const a=E(i),l=o.ensureFloat64(a),c=A(t,h.PE_UTM_MAX),u=o.ensureInt32(c),p=o._pe_geog_to_utm(s,t,l,r,u);if(p)for(let e=0;e<t;e++)n[e]=o.UTF8ToString(c[e]);return p},e.utmToGeog=function(e,t,i,r,n){o.ensureCache.prepare();let s=0;e&&(s=o.getPointer(e));const a=i.map((e=>o.ensureString(e))),l=o.ensureInt32(a),c=o.ensureFloat64(new Array(2*t)),h=o._pe_utm_to_geog(s,t,l,r,c);return h&&x(n,t,c),h}}(b||(b={})),function(e){const t=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=o.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=o.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=o.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=o.PePCSInfo.prototype.PE_POLE_POINT},e.generate=function(i,r=e.PE_PCSINFO_OPTION_DOMAIN){let n=null,s=null;return t.has(i)&&(s=t.get(i),s[r]&&(n=s[r])),n||(n=o.PePCSInfo.prototype.generate(i,r),s||(s=[],t.set(i,s)),s[r]=n),n}}(w||(w={})),function(e){e.versionString=function(){return o.PeVersion.prototype.version_string()}}(M||(M={}));const I=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return c},get PeDefs(){return h},get PeFactory(){return u},get PeGCSExtent(){return d},get PeGTTransformations(){return m},get PeGTlistExtended(){return f},get PeGTlistExtendedEntry(){return y},get PeNotationDms(){return g},get PeNotationMgrs(){return v},get PeNotationUsng(){return _},get PeNotationUtm(){return b},get PePCSInfo(){return w},get PeVersion(){return M},_init:T,get _pe(){return o},isLoaded:a,isSupported:function(){return!!(0,n.A)("esri-wasm")},load:l},Symbol.toStringTag,{value:"Module"}))},55714:(e,t,i)=>{"use strict";i.d(t,{M:()=>g,a:()=>y,b:()=>_,e:()=>d,f:()=>s,i:()=>u,p:()=>p,r:()=>a,t:()=>o,w:()=>l});var r=i(6480),n=i(19759);function s(e,t){const i=t?.url?.path;if(e&&i&&(e=(0,n.s2)(e,i,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const i=(0,n.V1)(e,t.portalItem.itemUrl);null!=i&&h.test(i)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(i).path)}return(e=f(e,t?.portal))&&c.test(e)?y(e):e}function o(e,t,i=g.YES){if(null==(e=e&&c.test(e)?m(e):e))return e;!(0,n.oP)(e)&&t?.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let r=(0,n.s2)(e);if(t){const i=t.verifyItemRelativeUrls?.rootPath||t.url?.path;if(i){const s=f(i,t.portal),o=f(r,t.portal);r=(0,n.V1)(o,s,s),null!=r&&r!==o&&r!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=d(r,t?.portal),(0,n.oP)(r)&&(r=(0,n.S8)(r)),t?.resources&&t?.portalItem&&!(0,n.oP)(r)&&!(0,n.DB)(r)&&i===g.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r),compress:!1}),r}function a(e,t,i){return s(e,i)}function l(e,t,i,r){const n=o(e,r);void 0!==n&&(t[i]=n)}const c=/\/items\/([^\/]+)\/resources\/(.*)/,h=/^\.\/resources\//;function u(e){const t=e?.match(c)??null;return t?.[1]??null}function p(e){const t=e?.match(c)??null;if(null==t)return null;const i=t[2],r=i.lastIndexOf("/");if(-1===r){const{path:e,extension:t}=(0,n.xw)(i);return{prefix:null,filename:e,extension:t}}const{path:s,extension:o}=(0,n.xw)(i.slice(r+1));return{prefix:i.slice(0,r),filename:s,extension:o}}function d(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?(0,n.T1)(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function f(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const i=`${t.urlKey}.${t.customBaseUrl}`,r=(0,n.Xq)();return(0,n.FX)(r,`${r.scheme}://${i}`)?(0,n.T1)(e,t.portalHostname,i):(0,n.T1)(e,i,t.portalHostname)}function y(e){if(!e)return e||null;let t=e;return t&&r.id&&!r.id.findCredential(t)&&(t=r.id._normalizeAGOLorgDomain(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function m(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&r.id&&!r.id.findCredential(t)&&(t=r.id._normalizeAGOLorgDomain(t)),t}var g,v;(v=g||(g={}))[v.YES=0]="YES",v[v.NO=1]="NO";const _=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return g},ensureMainOnlineDomain:d,fromCDNUrl:m,fromJSON:s,itemIdFromResourceUrl:u,prefixAndFilenameFromResourceUrl:p,read:a,toCDNUrl:y,toJSON:o,write:l},Symbol.toStringTag,{value:"Module"}))},79207:(e,t,i)=>{"use strict";i.d(t,{q:()=>l});var r,n,s,o=i(90618),a={exports:{}};r=a,n=function(){function e(i,r,n,s,o){for(;s>n;){if(s-n>600){var a=s-n+1,l=r-n+1,c=Math.log(a),h=.5*Math.exp(2*c/3),u=.5*Math.sqrt(c*h*(a-h)/a)*(l-a/2<0?-1:1);e(i,r,Math.max(n,Math.floor(r-l*h/a+u)),Math.min(s,Math.floor(r+(a-l)*h/a+u)),o)}var p=i[r],d=n,f=s;for(t(i,n,r),o(i[s],p)>0&&t(i,n,s);d<f;){for(t(i,d,f),d++,f--;o(i[d],p)<0;)d++;for(;o(i[f],p)>0;)f--}0===o(i[n],p)?t(i,n,f):t(i,++f,s),f<=r&&(n=f+1),r<=f&&(s=f-1)}}function t(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function i(e,t){return e<t?-1:e>t?1:0}return function(t,r,n,s,o){e(t,r,n||0,s||t.length-1,o||i)}},void 0!==(s=n())&&(r.exports=s);const l=(0,o.g)(a.exports)},52708:(e,t,i)=>{"use strict";i.d(t,{r:()=>n});var r=i(79207);function n(e,t){if(!(this instanceof n))return new n(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this.toBBox=t:this._initFormat(t)),this.clear()}function s(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++)if(i(e,t[r]))return r;return-1}function o(e,t){a(e,0,e.children.length,t,e)}function a(e,t,i,r,n){n||(n=g(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,o=t;o<i;o++)s=e.children[o],l(n,e.leaf?r(s):s);return n}function l(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function c(e,t){return e.minX-t.minX}function h(e,t){return e.minY-t.minY}function u(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function p(e){return e.maxX-e.minX+(e.maxY-e.minY)}function d(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function f(e,t){var i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),n=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,n-i)*Math.max(0,s-r)}function y(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function m(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function g(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(e,t,i,n,s){for(var o,a=[t,i];a.length;)(i=a.pop())-(t=a.pop())<=n||(o=t+Math.ceil((i-t)/n/2)*n,(0,r.q)(e,o,t,i,s),a.push(t,o,o,i))}n.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!m(e,t))return i;for(var n,s,o,a,l=[];t;){for(n=0,s=t.children.length;n<s;n++)o=t.children[n],m(e,a=t.leaf?r(o):o)&&(t.leaf?i.push(o):y(e,a)?this._all(o,i):l.push(o));t=l.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!m(e,t))return!1;for(var r,n,s,o,a=[];t;){for(r=0,n=t.children.length;r<n;r++)if(s=t.children[r],m(e,o=t.leaf?i(s):s)){if(t.leaf||y(e,o))return!0;a.push(s)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return null!=e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(e,t){if(null==e)return this;for(var i,r,n,o,a=this.data,l=this.toBBox(e),c=[],h=[];a||c.length;){if(a||(a=c.pop(),r=c[c.length-1],i=h.pop(),o=!0),a.leaf&&-1!==(n=s(e,a.children,t)))return a.children.splice(n,1),c.push(a),this._condense(c),this;o||a.leaf||!y(a,l)?r?(i++,a=r.children[i],o=!1):a=null:(c.push(a),h.push(i),i=0,r=a,a=a.children[0])}return this},toBBox:function(e){return e},compareMinX:c,compareMinY:h,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,r){var n,s=i-t+1,a=this._maxEntries;if(s<=a)return o(n=g(e.slice(t,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,r-1))),(n=g([])).leaf=!1,n.height=r;var l,c,h,u,p=Math.ceil(s/a),d=p*Math.ceil(Math.sqrt(a));for(v(e,t,i,d,this.compareMinX),l=t;l<=i;l+=d)for(v(e,l,h=Math.min(l+d-1,i),p,this.compareMinY),c=l;c<=h;c+=p)u=Math.min(c+p-1,h),n.children.push(this._build(e,c,u,r-1));return o(n,this.toBBox),n},_chooseSubtree:function(e,t,i,r){for(var n,s,o,a,l,c,h,p;r.push(t),!t.leaf&&r.length-1!==i;){for(h=p=1/0,n=0,s=t.children.length;n<s;n++)l=u(o=t.children[n]),(c=d(e,o)-l)<p?(p=c,h=l<h?l:h,a=o):c===p&&l<h&&(h=l,a=o);t=a||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,n=i?e:r(e),s=[],o=this._chooseSubtree(n,this.data,t,s);for(o.children.push(e),l(o,n);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(n,s,t)},_split:function(e,t){var i=e[t],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var s=this._chooseSplitIndex(i,n,r),a=g(i.children.splice(s,i.children.length-s));a.height=i.height,a.leaf=i.leaf,o(i,this.toBBox),o(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)},_splitRoot:function(e,t){this.data=g([e,t]),this.data.height=e.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,n,s,o,l,c,h,p;for(c=h=1/0,r=t;r<=i-t;r++)o=f(n=a(e,0,r,this.toBBox),s=a(e,r,i,this.toBBox)),l=u(n)+u(s),o<c?(c=o,p=r,h=l<h?l:h):o===c&&l<h&&(h=l,p=r);return p},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:c,n=e.leaf?this.compareMinY:h;this._allDistMargin(e,t,i,r)<this._allDistMargin(e,t,i,n)&&e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var n,s,o=this.toBBox,c=a(e,0,t,o),h=a(e,i-t,i,o),u=p(c)+p(h);for(n=t;n<i-t;n++)s=e.children[n],l(c,e.leaf?o(s):s),u+=p(c);for(n=i-t-1;n>=t;n--)s=e.children[n],l(h,e.leaf?o(s):s),u+=p(h);return u},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--)l(t[r],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)0===e[i].children.length?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():o(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}},69891:(e,t,i)=>{"use strict";i.d(t,{N:()=>y,a:()=>_,b:()=>M,c:()=>m,f:()=>S,g:()=>T,j:()=>k,k:()=>b,l:()=>g,m:()=>E,n:()=>F,p:()=>L,w:()=>w}),i(6273);var r=i(80861),n=i(4506),s=i(25336),o=i(80347),a=i(19913),l=i(74772),c=i(76982),h=i(78115),u=i(60929),p=i(63918),d=i(74695),f=i(11631);const y=m();function m(){return(0,c.vt)()}const g=l.e,v=l.e;function _(e,t){return(0,l.c)(t,e)}function b(e,t){return(0,c.fA)(e[0],e[1],e[2],t)}function w(e){return e}function M(e){return e[3]}function T(e){return e}function S(e,t,i,r){return(0,c.fA)(e,t,i,r)}function A(e,t,i){if(null==t)return!1;if(!I(e,t,x))return!1;let{t0:r,t1:n}=x;if((r<0||n<r&&n>0)&&(r=n),r<0)return!1;if(i){const{origin:e,direction:n}=t;i[0]=e[0]+n[0]*r,i[1]=e[1]+n[1]*r,i[2]=e[2]+n[2]*r}return!0}function E(e,t,i){const r=(0,p.Cr)(t,i);if(!I(e,r,x))return[];const{origin:n,direction:s}=r,{t0:l,t1:c}=x,u=t=>{const i=(0,a.vt)();return(0,o.r)(i,n,s,t),L(e,i,i)};return Math.abs(l-c)<(0,h.FD)()?[u(l)]:[u(l),u(c)]}const x={t0:0,t1:0};function I(e,t,i){const{origin:r,direction:n}=t,s=C;s[0]=r[0]-e[0],s[1]=r[1]-e[1],s[2]=r[2]-e[2];const o=n[0]*n[0]+n[1]*n[1]+n[2]*n[2];if(0===o)return!1;const a=2*(n[0]*s[0]+n[1]*s[1]+n[2]*s[2]),l=a*a-4*o*(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]-e[3]*e[3]);if(l<0)return!1;const c=Math.sqrt(l);return i.t0=(-a-c)/(2*o),i.t1=(-a+c)/(2*o),!0}const C=(0,a.vt)();function k(e,t){return A(e,t,null)}function N(e,t,i){const r=f.rq.get(),n=f.Rc.get();(0,o.b)(r,t.origin,t.direction);const a=M(e);(0,o.b)(i,r,t.origin),(0,o.h)(i,i,1/(0,o.l)(i)*a);const l=O(e,t.origin),c=(0,d.g7)(t.origin,i);return(0,s.$0)(n,c+l,r),(0,o.e)(i,i,n),i}function L(e,t,i){const r=(0,o.f)(f.rq.get(),t,e),n=(0,o.h)(f.rq.get(),r,e[3]/(0,o.l)(r));return(0,o.g)(i,n,e)}function O(e,t){const i=(0,o.f)(f.rq.get(),t,e),r=(0,o.l)(i),s=M(e),a=s+Math.abs(s-r);return(0,n.XM)(s/a)}const R=(0,a.vt)();function P(e,t,i,r){const s=(0,o.f)(R,t,e);switch(i){case u._.X:{const e=(0,n.jU)(s,R)[2];return(0,o.s)(r,-Math.sin(e),Math.cos(e),0)}case u._.Y:{const e=(0,n.jU)(s,R),t=e[1],i=e[2],a=Math.sin(t);return(0,o.s)(r,-a*Math.cos(i),-a*Math.sin(i),Math.cos(t))}case u._.Z:return(0,o.n)(r,s);default:return}}function D(e,t){const i=(0,o.f)(j,t,e);return(0,o.l)(i)-e[3]}function F(e,t){const i=(0,o.a)(e,t),r=M(e);return i<=r*r}const j=(0,a.vt)(),Z=m();Object.freeze(Object.defineProperty({__proto__:null,NullSphere:y,altitudeAt:D,angleToSilhouette:O,axisAt:P,clear:function(e){e[0]=e[1]=e[2]=e[3]=0},closestPoint:function(e,t,i){return A(e,t,i)?i:((0,p.oC)(t,e,i),L(e,i,i))},closestPointOnSilhouette:N,containsPoint:F,copy:_,create:m,distanceToSilhouette:function(e,t){const i=(0,o.f)(f.rq.get(),t,e),r=(0,o.p)(i),n=e[3]*e[3];return Math.sqrt(Math.abs(r-n))},elevate:function(e,t,i){return e!==i&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),i[3]=e[3]+t,i},equals:v,exactEquals:g,fromCenterAndRadius:b,fromRadius:function(e,t){return e[0]=e[1]=e[2]=0,e[3]=t,e},fromValues:S,getCenter:T,getRadius:M,intersectLine:E,intersectRay:A,intersectRayClosestSilhouette:function(e,t,i){if(A(e,t,i))return i;const r=N(e,t,f.rq.get());return(0,o.g)(i,t.origin,(0,o.h)(f.rq.get(),t.direction,(0,o.q)(t.origin,r)/(0,o.l)(t.direction))),i},intersectsRay:k,projectPoint:L,setAltitudeAt:function(e,t,i,r){const n=D(e,t),s=P(e,t,u._.Z,j),a=(0,o.h)(j,s,i-n);return(0,o.g)(r,t,a)},setExtent:function(e,t,i){return r.A.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported"),e!==i&&_(e,i),i},tmpSphere:Z,union:function(e,t,i=(0,c.vt)()){const r=(0,o.q)(e,t),n=e[3],s=t[3];return r+s<n?((0,l.c)(i,e),i):r+n<s?((0,l.c)(i,t),i):((0,o.m)(i,e,t,(r+s-n)/(2*r)),i[3]=(r+n+s)/2,i)},wrap:w},Symbol.toStringTag,{value:"Module"}))},82392:(e,t,i)=>{"use strict";function r(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o}function n(e,t){return function(i,r){t(i,r,e)}}function s(e,t,i,r){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){e.done?i(e.value):n(e.value).then(o,a)}l((r=r.apply(e,t||[])).next())}))}i.d(t,{_:()=>r,a:()=>n,b:()=>s}),"function"==typeof SuppressedError&&SuppressedError},72449:(e,t,i)=>{"use strict";i.d(t,{a:()=>s,b:()=>a,c:()=>o,d:()=>n,e:()=>u,f:()=>l,n:()=>p,s:()=>c,t:()=>h}),i(6273);var r=i(83851);function n(e,t,i){s(e.typedBuffer,t.typedBuffer,i,e.typedBufferStride,t.typedBufferStride)}function s(e,t,i,r=3,n=r){if(e.length/r!==Math.ceil(t.length/n))return e;const s=e.length/r,o=i[0],a=i[1],l=i[2],c=i[4],h=i[5],u=i[6],p=i[8],d=i[9],f=i[10],y=i[12],m=i[13],g=i[14];let v=0,_=0;for(let i=0;i<s;i++){const i=t[v],s=t[v+1],b=t[v+2];e[_]=o*i+c*s+p*b+y,e[_+1]=a*i+h*s+d*b+m,e[_+2]=l*i+u*s+f*b+g,v+=n,_+=r}return e}function o(e,t,i){a(e.typedBuffer,t.typedBuffer,i,e.typedBufferStride,t.typedBufferStride)}function a(e,t,i,n=3,s=n){if(e.length/n!==Math.ceil(t.length/s))return void(0,r.j)().error("source and destination buffers need to have the same number of elements");const o=e.length/n,a=i[0],l=i[1],c=i[2],h=i[3],u=i[4],p=i[5],d=i[6],f=i[7],y=i[8];let m=0,g=0;for(let i=0;i<o;i++){const i=t[m],r=t[m+1],o=t[m+2];e[g]=a*i+h*r+d*o,e[g+1]=l*i+u*r+f*o,e[g+2]=c*i+p*r+y*o,m+=s,g+=n}}function l(e,t,i){c(e.typedBuffer,t,i,e.typedBufferStride)}function c(e,t,i,r=3){const n=Math.min(e.length/r,t.count),s=t.typedBuffer,o=t.typedBufferStride;let a=0,l=0;for(let t=0;t<n;t++)e[l]=i*s[a],e[l+1]=i*s[a+1],e[l+2]=i*s[a+2],a+=o,l+=r}function h(e,t,i,r=3,n=r){const s=e.length/r;if(s!==Math.ceil(t.length/n))return e;let o=0,a=0;for(let l=0;l<s;l++)e[a]=t[o]+i[0],e[a+1]=t[o+1]+i[1],e[a+2]=t[o+2]+i[2],o+=n,a+=r;return e}function u(e,t){p(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function p(e,t,i=3,r=i){const n=Math.min(e.length/i,t.length/r);let s=0,o=0;for(let a=0;a<n;a++){const n=t[s],a=t[s+1],l=t[s+2],c=n*n+a*a+l*l;if(c>0){const t=1/Math.sqrt(c);e[o]=t*n,e[o+1]=t*a,e[o+2]=t*l}s+=r,o+=i}}Object.freeze(Object.defineProperty({__proto__:null,normalize:p,normalizeView:u,scale:c,scaleView:l,shiftRight:function(e,t,i){const r=Math.min(e.count,t.count),n=e.typedBuffer,s=e.typedBufferStride,o=t.typedBuffer,a=t.typedBufferStride;let l=0,c=0;for(let e=0;e<r;e++)n[c]=o[l]>>i,n[c+1]=o[l+1]>>i,n[c+2]=o[l+2]>>i,l+=a,c+=s},transformMat3:a,transformMat3View:o,transformMat4:s,transformMat4View:n,translate:h},Symbol.toStringTag,{value:"Module"}))},80347:(e,t,i)=>{"use strict";i.d(t,{A:()=>d,B:()=>h,C:()=>y,D:()=>u,E:()=>D,F:()=>w,G:()=>P,H:()=>V,K:()=>k,a:()=>_,b:()=>A,c:()=>o,d:()=>N,e:()=>x,f:()=>c,g:()=>l,h:()=>m,i:()=>M,j:()=>R,k:()=>S,l:()=>s,m:()=>E,n:()=>T,o:()=>z,p:()=>b,q:()=>v,r:()=>g,s:()=>a,t:()=>I,u:()=>C,v:()=>p,w:()=>U,x:()=>G,y:()=>f,z:()=>F});var r=i(19913),n=i(78115);function s(e){const t=e[0],i=e[1],r=e[2];return Math.sqrt(t*t+i*i+r*r)}function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function a(e,t,i,r){return e[0]=t,e[1]=i,e[2]=r,e}function l(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function c(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function h(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function u(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function p(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function d(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function f(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function y(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function m(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function g(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e}function v(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(i*i+r*r+n*n)}function _(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2];return i*i+r*r+n*n}function b(e){const t=e[0],i=e[1],r=e[2];return t*t+i*i+r*r}function w(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function M(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function T(e,t){const i=t[0],r=t[1],n=t[2];let s=i*i+r*r+n*n;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e}function S(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function A(e,t,i){const r=t[0],n=t[1],s=t[2],o=i[0],a=i[1],l=i[2];return e[0]=n*l-s*a,e[1]=s*o-r*l,e[2]=r*a-n*o,e}function E(e,t,i,r){const n=t[0],s=t[1],o=t[2];return e[0]=n+r*(i[0]-n),e[1]=s+r*(i[1]-s),e[2]=o+r*(i[2]-o),e}function x(e,t,i){const r=t[0],n=t[1],s=t[2];return e[0]=i[0]*r+i[4]*n+i[8]*s+i[12],e[1]=i[1]*r+i[5]*n+i[9]*s+i[13],e[2]=i[2]*r+i[6]*n+i[10]*s+i[14],e}function I(e,t,i){const r=t[0],n=t[1],s=t[2];return e[0]=r*i[0]+n*i[3]+s*i[6],e[1]=r*i[1]+n*i[4]+s*i[7],e[2]=r*i[2]+n*i[5]+s*i[8],e}function C(e,t,i){const r=i[0],n=i[1],s=i[2],o=i[3],a=t[0],l=t[1],c=t[2],h=n*c-s*l,u=s*a-r*c,p=r*l-n*a,d=n*p-s*u,f=s*h-r*p,y=r*u-n*h,m=2*o;return e[0]=a+h*m+2*d,e[1]=l+u*m+2*f,e[2]=c+p*m+2*y,e}function k(e,t,i,r){const n=[],s=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],s[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),s[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),s[2]=n[2],e[0]=s[0]+i[0],e[1]=s[1]+i[1],e[2]=s[2]+i[2],e}function N(e,t){T(L,e),T(O,t);const i=S(L,O);return i>1?0:i<-1?Math.PI:Math.acos(i)}const L=(0,r.vt)(),O=(0,r.vt)();function R(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function P(e,t){if(e===t)return!0;const i=e[0],r=e[1],s=e[2],o=t[0],a=t[1],l=t[2],c=(0,n.FD)();return Math.abs(i-o)<=c*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=c*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(s-l)<=c*Math.max(1,Math.abs(s),Math.abs(l))}function D(e,t,i){const r=i[0]-t[0],n=i[1]-t[1],s=i[2]-t[2];let o=r*r+n*n+s*s;return o>0?(o=1/Math.sqrt(o),e[0]=r*o,e[1]=n*o,e[2]=s*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const F=c,j=h,Z=u,z=v,U=_,V=s,G=b;Object.freeze(Object.defineProperty({__proto__:null,abs:p,add:l,angle:N,bezier:function(e,t,i,r,n,s){const o=1-s,a=o*o,l=s*s,c=a*o,h=3*s*a,u=3*l*o,p=l*s;return e[0]=t[0]*c+i[0]*h+r[0]*u+n[0]*p,e[1]=t[1]*c+i[1]*h+r[1]*u+n[1]*p,e[2]=t[2]*c+i[2]*h+r[2]*u+n[2]*p,e},ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},copy:o,cross:A,direction:D,dist:z,distance:v,div:Z,divide:u,dot:S,equals:P,exactEquals:R,floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},hermite:function(e,t,i,r,n,s){const o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,c=o*(s-1),h=o*(3-2*s);return e[0]=t[0]*a+i[0]*l+r[0]*c+n[0]*h,e[1]=t[1]*a+i[1]*l+r[1]*c+n[1]*h,e[2]=t[2]*a+i[2]*l+r[2]*c+n[2]*h,e},inverse:M,len:V,length:s,lerp:E,max:y,min:f,mul:j,multiply:h,negate:w,normalize:T,random:function(e,t){t=t||1;const i=n.Ov,r=2*i()*Math.PI,s=2*i()-1,o=Math.sqrt(1-s*s)*t;return e[0]=Math.cos(r)*o,e[1]=Math.sin(r)*o,e[2]=s*t,e},rotateX:function(e,t,i,r){const n=[],s=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],s[0]=n[0],s[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),s[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),e[0]=s[0]+i[0],e[1]=s[1]+i[1],e[2]=s[2]+i[2],e},rotateY:function(e,t,i,r){const n=[],s=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],s[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),s[1]=n[1],s[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),e[0]=s[0]+i[0],e[1]=s[1]+i[1],e[2]=s[2]+i[2],e},rotateZ:k,round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},scale:m,scaleAndAdd:g,set:a,sign:d,sqrDist:U,sqrLen:G,squaredDistance:_,squaredLength:b,str:function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},sub:F,subtract:c,transformMat3:I,transformMat4:x,transformQuat:C},Symbol.toStringTag,{value:"Module"}))},74772:(e,t,i)=>{"use strict";i.d(t,{a:()=>_,b:()=>h,c:()=>n,d:()=>p,e:()=>b,f:()=>o,g:()=>m,i:()=>d,j:()=>f,l:()=>g,n:()=>y,s:()=>s,t:()=>v});var r=i(78115);function n(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function s(e,t,i,r,n){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e}function o(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function a(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function l(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function c(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function h(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function u(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(i*i+r*r+n*n+s*s)}function p(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return i*i+r*r+n*n+s*s}function d(e){const t=e[0],i=e[1],r=e[2],n=e[3];return Math.sqrt(t*t+i*i+r*r+n*n)}function f(e){const t=e[0],i=e[1],r=e[2],n=e[3];return t*t+i*i+r*r+n*n}function y(e,t){const i=t[0],r=t[1],n=t[2],s=t[3];let o=i*i+r*r+n*n+s*s;return o>0&&(o=1/Math.sqrt(o),e[0]=i*o,e[1]=r*o,e[2]=n*o,e[3]=s*o),e}function m(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function g(e,t,i,r){const n=t[0],s=t[1],o=t[2],a=t[3];return e[0]=n+r*(i[0]-n),e[1]=s+r*(i[1]-s),e[2]=o+r*(i[2]-o),e[3]=a+r*(i[3]-a),e}function v(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3];return e[0]=i[0]*r+i[4]*n+i[8]*s+i[12]*o,e[1]=i[1]*r+i[5]*n+i[9]*s+i[13]*o,e[2]=i[2]*r+i[6]*n+i[10]*s+i[14]*o,e[3]=i[3]*r+i[7]*n+i[11]*s+i[15]*o,e}function _(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function b(e,t){const i=e[0],n=e[1],s=e[2],o=e[3],a=t[0],l=t[1],c=t[2],h=t[3],u=(0,r.FD)();return Math.abs(i-a)<=u*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(n-l)<=u*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(s-c)<=u*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(o-h)<=u*Math.max(1,Math.abs(o),Math.abs(h))}const w=a,M=l,T=c,S=u,A=p,E=d,x=f;Object.freeze(Object.defineProperty({__proto__:null,add:o,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},copy:n,copyVec3:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},dist:S,distance:u,div:T,divide:c,dot:m,equals:b,exactEquals:_,floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},len:E,length:d,lerp:g,max:function(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e},min:function(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e},mul:M,multiply:l,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},normalize:y,random:function(e,t){const i=r.Ov;let n,s,o,a,l,c;t=t||1;do{n=2*i()-1,s=2*i()-1,l=n*n+s*s}while(l>=1);do{o=2*i()-1,a=2*i()-1,c=o*o+a*a}while(c>=1);const h=Math.sqrt((1-l)/c);return e[0]=t*n,e[1]=t*s,e[2]=t*o*h,e[3]=t*a*h,e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},scale:h,scaleAndAdd:function(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e},set:s,sqrDist:A,sqrLen:x,squaredDistance:p,squaredLength:f,str:function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},sub:w,subtract:a,transformMat4:v,transformQuat:function(e,t,i){const r=t[0],n=t[1],s=t[2],o=i[0],a=i[1],l=i[2],c=i[3],h=c*r+a*s-l*n,u=c*n+l*r-o*s,p=c*s+o*n-a*r,d=-o*r-a*n-l*s;return e[0]=h*c+d*-o+u*-l-p*-a,e[1]=u*c+d*-a+p*-o-h*-l,e[2]=p*c+d*-l+h*-a-u*-o,e[3]=t[3],e}},Symbol.toStringTag,{value:"Module"}))},36137:(e,t,i)=>{"use strict";i.d(t,{TS:()=>s,V6:()=>n,c4:()=>o,qh:()=>c,z$:()=>l});const r={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function n(e){return!!r[e]||!!r[e.toLowerCase()]}function s(e){return r[e]??r[e.toLowerCase()]}function o(e){return[...s(e)]}function a(e,t,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?e+(t-e)*r:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function l(e,t,i,r=1){const n=(e%360+360)%360/360,s=i<=.5?i*(t+1):i+t-i*t,o=2*i-s;return[Math.round(255*a(o,s,n+1/3)),Math.round(255*a(o,s,n)),Math.round(255*a(o,s,n-1/3)),r]}function c(e){const t=e.length>5,i=t?8:4,r=(1<<i)-1,n=t?1:17,s=t?9===e.length:5===e.length;let o=Number("0x"+e.substr(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return s&&(l=o&r,o>>=i,a[3]=n*l/255),l=o&r,o>>=i,a[2]=n*l,l=o&r,o>>=i,a[1]=n*l,l=o&r,o>>=i,a[0]=n*l,a}},32083:(e,t,i)=>{"use strict";i.d(t,{A:()=>n}),i(6273);var r=i(21750);const n={apiKey:void 0,applicationName:"",applicationUrl:globalThis.location?.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&((0,r.$N)(n,globalThis.esriConfig,!0),delete n.has),!n.assetsPath){{const e="4.29";n.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}n.defaultAssetsPath=n.assetsPath}},73783:(e,t,i)=>{"use strict";i.d(t,{A:()=>O});var r=i(61090),n=i(56802),s=i(80861),o=i(57725),a=i(90199),l=i(44212),c=i(40634),h=i(88135),u=(i(6273),i(15565)),p=i(39744),d=i(59823),f=i(91101),y=i(99595),m=i(49095);class g extends d.T{constructor(e,t){super(),this.propertyName=e,this.metadata=t,this._accessed=null,this._handles=null,this.flags=0,this.flags=m.i.Dirty|(t.nonNullable?m.i.NonNullable:0)|(t.hasOwnProperty("value")?m.i.HasDefaultValue:0)|(void 0===t.get?m.i.DepTrackingInitialized:0)|(void 0===t.dependsOn?m.i.AutoTracked:0)}destroy(){this.flags&m.i.Dirty&&this.onCommitted(),super.destroy(),this._accessed=null,this._clearObservationHandles()}getComputed(e){(0,y.gc)(this);const t=e.store,i=this.propertyName,r=this.flags,n=t.get(i);if(r&m.i.Computing)return n;if(~r&m.i.Dirty&&t.has(i))return n;this.flags|=m.i.Computing;const s=e.host;let o;r&m.i.AutoTracked?o=(0,y.a)(this,this.metadata.get,s):((0,y.Xr)(s,this),o=this.metadata.get.call(s)),t.set(i,o,f.Gr.COMPUTED);const a=t.get(i);return a===n?this.flags&=~m.i.Dirty:(0,y.F_)(this.commit,this),this.flags&=~m.i.Computing,a}onObservableAccessed(e){if(e===this)return;let t=this._accessed;if(null==t)t=[],this._accessed=t;else if(t.includes(e))return;t.push(e)}onTrackingEnd(){this._clearObservationHandles(),this.flags|=m.i.DepTrackingInitialized;const e=this._accessed;if(null==e||0===e.length)return;let t=this._handles;null==t&&(t=[],this._handles=t);for(let i=0;i<e.length;++i)t.push(e[i].observe(this));e.length=0}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~m.i.Dirty,this.onCommitted()}_clearObservationHandles(){const e=this._handles;if(null!==e){for(let t=0;t<e.length;++t)e[t].remove();e.length=0}}onInvalidated(){~this.flags&m.i.Overridden&&(this.flags|=m.i.Dirty);const e=this._observers;if(e&&e.length>0)for(const t of e)t.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const t=e.slice();for(const e of t)e.onCommitted()}}}class v{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const t=new v;return this._values.forEach(((i,r)=>{e&&e.has(r)||t.set(r,(0,u.o8)(i))})),t}get(e){return this._values.get(e)}originOf(){return f.Gr.USER}keys(){return[...this._values.keys()]}set(e,t){this._values.set(e,t)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}}function _(e,t,i){return void 0!==e}function b(e,t,i,r){return!(void 0===e||null==i&&e.flags&m.i.NonNullable&&(r.lifecycle,c.v.INITIALIZING,1))}class w{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=c.v.INITIALIZING,this.store=new v,this._origin=f.Gr.USER;const t=this.host.constructor.__accessorMetadata__;for(const e in t){const i=new g(e,t[e]);this.propertiesByName.set(e,i)}this.metadata=t}initialize(){this.lifecycle=c.v.CONSTRUCTING}constructed(){this.lifecycle=c.v.CONSTRUCTED}destroy(){this.lifecycle=c.v.DESTROYED,this.propertiesByName.forEach((e=>e.destroy()))}get initialized(){return this.lifecycle!==c.v.INITIALIZING}get(e){const t=this.propertiesByName.get(e);if(t.metadata.get)return t.getComputed(this);(0,y.gc)(t);const i=this.store;return i.has(e)?i.get(e):t.metadata.value}originOf(e){const t=this.store.originOf(e);if(void 0===t){const t=this.propertiesByName.get(e);if(void 0!==t&&t.flags&m.i.HasDefaultValue)return"defaults"}return(0,f.OL)(t)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const t=this.propertiesByName.get(e);if(_(t))return this.store.has(e)?this.store.get(e):t.metadata.value}internalSet(e,t){const i=this.propertiesByName.get(e);_(i)&&this._internalSet(i,t)}getDependsInfo(e,t,i){const r=this.propertiesByName.get(t);if(!_(r))return"";const n=new Set,s=(0,y.a)({onObservableAccessed:e=>n.add(e),onTrackingEnd:()=>{}},(()=>r.metadata.get?.call(e)));let o=`${i}${e.declaredClass.split(".").pop()}.${t}: ${s}\n`;if(0===n.size)return o;i+="  ";for(const e of n)e instanceof g&&(o+=`${i}${e.propertyName}: undefined\n`);return o}setAtOrigin(e,t,i){const r=this.propertiesByName.get(e);if(_(r))return this._setAtOrigin(r,t,i)}isOverridden(e){const t=this.propertiesByName.get(e);return void 0!==t&&!!(t.flags&m.i.Overridden)}clearOverride(e){const t=this.propertiesByName.get(e);t&&t.flags&m.i.Overridden&&(t.flags&=~m.i.Overridden,t.notifyChange())}override(e,t){const i=this.propertiesByName.get(e);if(!b(i,0,t,this))return;const r=i.metadata.cast;if(r){const e=this._cast(r,t),{valid:i,value:n}=e;if(M.release(e),!i)return;t=n}i.flags|=m.i.Overridden,this._internalSet(i,t)}set(e,t){const i=this.propertiesByName.get(e);if(!b(i,0,t,this))return;const r=i.metadata.cast;if(r){const e=this._cast(r,t),{valid:i,value:n}=e;if(M.release(e),!i)return;t=n}const n=i.metadata.set;n?n.call(this.host,t):this._internalSet(i,t)}setDefaultOrigin(e){this._origin=(0,f.aB)(e)}getDefaultOrigin(){return(0,f.OL)(this._origin)}notifyChange(e){const t=this.propertiesByName.get(e);void 0!==t&&t.notifyChange()}invalidate(e){const t=this.propertiesByName.get(e);void 0!==t&&t.invalidate()}commit(e){const t=this.propertiesByName.get(e);void 0!==t&&t.commit()}_internalSet(e,t){const i=this.lifecycle!==c.v.INITIALIZING?this._origin:f.Gr.DEFAULTS;this._setAtOrigin(e,t,i)}_setAtOrigin(e,t,i){const r=this.store,n=e.propertyName;r.has(n,i)&&(0,u.aI)(t,r.get(n))&&~e.flags&m.i.Overridden&&i===r.originOf(n)||(e.invalidate(),r.set(n,t,i),e.commit(),(0,y.fE)(this.host,e))}_cast(e,t){const i=M.acquire();return i.valid=!0,i.value=t,e&&(i.value=e.call(this.host,t,i)),i}}const M=new p.A(class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}});var T=i(6864);var S;!function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"}(S||(S={}));var A,E,x=i(10319),I=i(81482),C=i(26325);function k(e){if(null==e)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return e.constructor?.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const N=Symbol("Accessor-Handles"),L=Symbol("Accessor-Initialized");class O{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:t,declaredClass:i,constructor:r}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const n=this;class s extends n{constructor(...e){super(...e),this.inherited=null,r&&r.apply(this,e)}}(0,h.tD)(s.prototype);for(const t in e){const i=e[t];s.prototype[t]="function"==typeof i?function(...e){const r=this.inherited;let s;this.inherited=function(...e){if(n.prototype[t])return n.prototype[t].apply(this,e)};try{s=i.apply(this,e)}catch(e){throw this.inherited=r,e}return this.inherited=r,s}:e[t]}for(const e in t){const i=k(t[e]);(0,I.MZ)(i)(s.prototype,e)}return(0,C.$)(i)(s)}constructor(...e){if(this[A]=null,this[E]=!1,this.constructor===O)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const t=new w(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:t}),e.length>0&&this.normalizeCtorArgs&&(t.ctorArgs=this.normalizeCtorArgs.apply(this,e))}postscript(e){const t=this.__accessor__,i=t.ctorArgs||e;t.initialize(),i&&(this.set(i),t.ctorArgs=null),t.constructed(),this.initialize(),this[L]=!0}initialize(){}[a.G](){this[N]=(0,o.pR)(this[N])}destroy(){this.destroyed||((0,x.iS)(this),this.__accessor__.destroy())}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[L]}get destroyed(){return this.__accessor__?.lifecycle===c.v.DESTROYED||!1}commitProperty(e){(0,l.Jt)(this,e)}get(e){return(0,r.eO)(s.A.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),(0,l.Jt)(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,t){return(0,T.h)(this,e,t),this}watch(e,t,i){return(0,x.wB)(this,e,t,i)}addHandles(e,t){if(this.destroyed){const t=Array.isArray(e)?e:[e];for(const e of t)e.remove();return}let i=this[N];null==i&&(i=this[N]=new n.A),i.add(e,t)}removeHandles(e){const t=this[N];null!=t&&t.remove(e)}removeAllHandles(){const e=this[N];null!=e&&e.removeAll()}hasHandles(e){const t=this[N];return null!=t&&t.has(e)}_override(e,t){void 0===t?this.__accessor__.clearOverride(e):this.__accessor__.override(e,t)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,t){null==t?this.__accessor__.clearOverride(e):this.__accessor__.override(e,t)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,t){return this.__accessor__.internalSet(e,t),this}}A=N,E=L},50398:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var r=i(39744);function n(e){e.length=0}class s{constructor(e=50,t=50){this._pool=new r.A(Array,void 0,n,t,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return o.acquire()}static release(e){return o.release(e)}static prune(){o.prune()}}const o=new s(100)},14755:(e,t,i)=>{"use strict";i.d(t,{O:()=>h,P:()=>u});var r=i(82392),n=i(73783),s=(i(6273),i(15565)),o=(i(80861),i(57725)),a=i(91101),l=i(66361),c=i(26325);const h=e=>{let t=class extends e{clone(){const e=(0,l.oY)(this);(0,o.Lw)(e,"unable to clone instance of non-accessor class");const t=e.metadata,i=e.store,r={},n=new Map;for(const e in t){const o=t[e],l=i?.originOf(e),c=o.clonable;if(o.readOnly||!1===c||l!==a.Gr.USER&&l!==a.Gr.DEFAULTS&&l!==a.Gr.WEB_MAP&&l!==a.Gr.WEB_SCENE)continue;const h=this[e];let u=null;u="function"==typeof c?c(h):"reference"===c?h:(0,s.TU)(h),null!=h&&null==u||(l===a.Gr.DEFAULTS?n.set(e,u):r[e]=u)}const c=new(0,Object.getPrototypeOf(this).constructor)(r);if(n.size){const e=(0,l.oY)(c)?.store;if(e)for(const[t,i]of n)e.set(t,i,a.Gr.DEFAULTS)}return c}};return t=(0,r._)([(0,c.$)("esri.core.Clonable")],t),t};let u=class extends(h(n.A)){};u=(0,r._)([(0,c.$)("esri.core.Clonable")],u)},58842:(e,t,i)=>{"use strict";i.d(t,{A:()=>k});var r,n=i(82392),s=i(50398),o=i(57888),a=i(70214),l=i(15565),c=i(39744);!function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"}(r||(r={}));var h,u=i(9987),p=i(8636),d=i(99595),f=i(81482),y=i(50078),m=i(26325),g=i(29745);class v{constructor(e,t,i,r,n){this.target=e,this.added=t,this.removed=i,this.start=r,this.deleteCount=n}}const _=new c.A(class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},void 0,(e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1}));function b(e){return e?e instanceof C?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function w(e){if(e?.length)return e[0]}function M(e,t,i,r){const n=Math.min(e.length-i,t.length-r);let s=0;for(;s<n&&e[i+s]===t[r+s];)s++;return s}function T(e,t,i,r){t&&t.forEach(((t,n,s)=>{e.push(t),T(e,i.call(r,t,n,s),i,r)}))}const S=new Set,A=new Set,E=new Set,x=new Map;let I=0,C=h=class extends o.A.EventedAccessor{static isCollection(e){return null!=e&&e instanceof h}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new g.I,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:I++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof h?{items:e}:e:{}}destroy(){this._removeAllRaw()}*[Symbol.iterator](){yield*this.items}get items(){return(0,d.gc)(this._observable),this._items}set items(e){this._emitBeforeChanges(r.ADD)||(this._splice(0,this.length,b(e)),this._emitAfterChanges(r.ADD))}hasEventListener(e){return"change"===e?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if("change"===e){const e=this._chgListeners,i={removed:!1,callback:t};return e.push(i),this._notifications&&this._notifications.push({listeners:e.slice(),items:this._items.slice(),changes:[]}),(0,a.hA)((()=>{i.removed=!0,e.splice(e.indexOf(i),1)}))}return this._emitter.on(e,t)}once(e,t){const i="deref"in t?()=>t.deref():()=>t,r=this.on(e,(e=>{i()?.call(null,e),r.remove()}));return r}add(e,t){if((0,d.gc)(this._observable),this._emitBeforeChanges(r.ADD))return this;const i=this.getNextIndex(t??null);return this._splice(i,0,[e]),this._emitAfterChanges(r.ADD),this}addMany(e,t=this._items.length){if((0,d.gc)(this._observable),!e?.length)return this;if(this._emitBeforeChanges(r.ADD))return this;const i=this.getNextIndex(t);return this._splice(i,0,b(e)),this._emitAfterChanges(r.ADD),this}at(e){if((0,d.gc)(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if((0,d.gc)(this._observable),!this.length||this._emitBeforeChanges(r.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(r.REMOVE),e}_removeAllRaw(){return 0===this.length?[]:this._splice(0,this.length)||[]}clone(){return(0,d.gc)(this._observable),this._createNewInstance({items:this._items.map(l.o8)})}concat(...e){(0,d.gc)(this._observable);const t=e.map(b);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if((0,d.gc)(this._observable),!this.length||this._emitBeforeChanges(r.REMOVE))return;const i=this._splice(0,this.length),n=i.length;for(let r=0;r<n;r++)e.call(t,i[r],r,i);this._emitAfterChanges(r.REMOVE)}every(e,t){return(0,d.gc)(this._observable),this._items.every(e,t)}filter(e,t){let i;return(0,d.gc)(this._observable),i=2===arguments.length?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:i})}find(e,t){return(0,d.gc)(this._observable),this._items.find(e,t)}findIndex(e,t){return(0,d.gc)(this._observable),this._items.findIndex(e,t)}flatten(e,t){(0,d.gc)(this._observable);const i=[];return T(i,this,e,t),new h(i)}forEach(e,t){return(0,d.gc)(this._observable),this._items.forEach(e,t)}getItemAt(e){return(0,d.gc)(this._observable),this._items[e]}getNextIndex(e){(0,d.gc)(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return(0,d.gc)(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return(0,d.gc)(this._observable),this._items.indexOf(e,t)}join(e=","){return(0,d.gc)(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return(0,d.gc)(this._observable),this._items.lastIndexOf(e,t)}map(e,t){(0,d.gc)(this._observable);const i=this._items.map(e,t);return new h({items:i})}reorder(e,t=this.length-1){(0,d.gc)(this._observable);const i=this.indexOf(e);if(-1!==i){if(t<0?t=0:t>=this.length&&(t=this.length-1),i!==t){if(this._emitBeforeChanges(r.MOVE))return e;this._splice(i,1),this._splice(t,0,[e]),this._emitAfterChanges(r.MOVE)}return e}}pop(){if((0,d.gc)(this._observable),!this.length||this._emitBeforeChanges(r.REMOVE))return;const e=w(this._splice(this.length-1,1));return this._emitAfterChanges(r.REMOVE),e}push(...e){return(0,d.gc)(this._observable),this._emitBeforeChanges(r.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(r.ADD)),this.length}reduce(e,t){(0,d.gc)(this._observable);const i=this._items;return 2===arguments.length?i.reduce(e,t):i.reduce(e)}reduceRight(e,t){(0,d.gc)(this._observable);const i=this._items;return 2===arguments.length?i.reduceRight(e,t):i.reduceRight(e)}remove(e){return(0,d.gc)(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if((0,d.gc)(this._observable),e<0||e>=this.length||this._emitBeforeChanges(r.REMOVE))return;const t=w(this._splice(e,1));return this._emitAfterChanges(r.REMOVE),t}removeMany(e){if((0,d.gc)(this._observable),!e?.length||this._emitBeforeChanges(r.REMOVE))return[];const t=e instanceof h?e.toArray():e,i=this._items,n=[],s=t.length;for(let e=0;e<s;e++){const r=t[e],s=i.indexOf(r);if(s>-1){const r=1+M(t,i,e+1,s+1),o=this._splice(s,r);o&&o.length>0&&n.push.apply(n,o),e+=r-1}}return this._emitAfterChanges(r.REMOVE),n}reverse(){if((0,d.gc)(this._observable),this._emitBeforeChanges(r.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(r.MOVE),this}shift(){if((0,d.gc)(this._observable),!this.length||this._emitBeforeChanges(r.REMOVE))return;const e=w(this._splice(0,1));return this._emitAfterChanges(r.REMOVE),e}slice(e=0,t=this.length){return(0,d.gc)(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return(0,d.gc)(this._observable),this._items.some(e,t)}sort(e){if((0,d.gc)(this._observable),!this.length||this._emitBeforeChanges(r.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(r.MOVE),this}splice(e,t,...i){(0,d.gc)(this._observable);const n=(t?r.REMOVE:0)|(i.length?r.ADD:0);if(this._emitBeforeChanges(n))return[];const s=this._splice(e,t,i)||[];return this._emitAfterChanges(n),s}toArray(){return(0,d.gc)(this._observable),this._items.slice()}toJSON(){return(0,d.gc)(this._observable),this.toArray()}toLocaleString(){return(0,d.gc)(this._observable),this._items.toLocaleString()}toString(){return(0,d.gc)(this._observable),this._items.toString()}unshift(...e){return(0,d.gc)(this._observable),!e.length||this._emitBeforeChanges(r.ADD)||(this._splice(0,0,e),this._emitAfterChanges(r.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,i){const r=this._items,n=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=(0,u._)((()=>this._dispatchChange()))),e<0&&(e+=this.length),t){if(o=r.splice(e,t),this.hasEventListener("before-remove")){const t=_.acquire();t.target=this,t.cancellable=!0;for(let i=0,n=o.length;i<n;i++)s=o[i],t.reset(s),this.emit("before-remove",t),t.defaultPrevented&&(o.splice(i,1),r.splice(e,0,s),e+=1,i-=1,n-=1);_.release(t)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const e=_.acquire();e.target=this,e.cancellable=!1;const t=o.length;for(let i=0;i<t;i++)e.reset(o[i]),this.emit("after-remove",e);_.release(e)}}if(i?.length){if(n){const e=[];for(const t of i){const i=n.ensureType(t);null==i&&null!=t||e.push(i)}i=e}const t=this.hasEventListener("before-add"),s=this.hasEventListener("after-add"),o=e===this.length;if(t||s){const n=_.acquire();n.target=this,n.cancellable=!0;const a=_.acquire();a.target=this,a.cancellable=!1;for(const l of i)t?(n.reset(l),this.emit("before-add",n),n.defaultPrevented||(o?r.push(l):r.splice(e++,0,l),this._set("length",r.length),s&&(a.reset(l),this.emit("after-add",a)))):(o?r.push(l):r.splice(e++,0,l),this._set("length",r.length),a.reset(l),this.emit("after-add",a));_.release(a),_.release(n)}else{if(o)for(const e of i)r.push(e);else r.splice(e,0,...i);this._set("length",r.length)}}if((i?.length||o?.length)&&this._notifyChangeEvent(i,o),this.hasEventListener("after-splice")){const r=new v(this,i,o,e,t);this.emit("after-splice",r)}return o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const i=_.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),t=i.defaultPrevented,_.release(i)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=_.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),_.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const e=t.changes;S.clear(),A.clear(),E.clear();for(const{added:t,removed:i}of e){if(t)if(0===E.size&&0===A.size)for(const e of t)S.add(e);else for(const e of t)A.has(e)?(E.add(e),A.delete(e)):E.has(e)||S.add(e);if(i)if(0===E.size&&0===S.size)for(const e of i)A.add(e);else for(const e of i)S.has(e)?S.delete(e):(E.delete(e),A.add(e))}const i=s.A.acquire();S.forEach((e=>{i.push(e)}));const r=s.A.acquire();A.forEach((e=>{r.push(e)}));const n=this._items,o=t.items,a=s.A.acquire();if(E.forEach((e=>{o.indexOf(e)!==n.indexOf(e)&&a.push(e)})),t.listeners&&(i.length||r.length||a.length)){const e={target:this,added:i,removed:r,moved:a},n=t.listeners.length;for(let i=0;i<n;i++){const r=t.listeners[i];r.removed||r.callback.call(this,e)}}s.A.release(i),s.A.release(r),s.A.release(a)}S.clear(),A.clear(),E.clear()}};C.ofType=e=>{if(!e)return h;if(x.has(e))return x.get(e);let t=null;if("function"==typeof e)t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const i in e.typeMap){const r=e.typeMap[i].prototype.declaredClass;t?t+=` | ${r}`:t=r}let i=class extends h{};return(0,n._)([(0,y.u)({Type:e,ensureType:"function"==typeof e?(0,p.dp)(e):(0,p.aq)(e)})],i.prototype,"itemType",void 0),i=(0,n._)([(0,m.$)(`esri.core.Collection<${t}>`)],i),x.set(e,i),i},(0,n._)([(0,f.MZ)()],C.prototype,"_updating",void 0),(0,n._)([(0,f.MZ)()],C.prototype,"length",void 0),(0,n._)([(0,f.MZ)()],C.prototype,"items",null),(0,n._)([(0,f.MZ)({readOnly:!0})],C.prototype,"updating",null),C=h=(0,n._)([(0,m.$)("esri.core.Collection")],C);const k=C},53244:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var r=i(82392),n=i(58842),s=(i(3132),i(62991),i(80861),i(10319),i(89370)),o=i(81482),a=i(26325);let l=class extends n.A{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles((0,s.fm)((()=>this._refresh())))}destroy(){this.getCollections=null}_refresh(){const e=null!=this.getCollections?this.getCollections():null;if(null==e)return void this.removeAll();let t=0;for(const i of e)null!=i&&(t=this._processCollection(t,i));this.splice(t,this.length)}_createNewInstance(e){return new n.A(e)}_processCollection(e,t){if(!t)return e;const i=this.itemFilterFunction??(e=>!!e);for(const r of t)if(r){if(i(r)){const t=this.indexOf(r,e);t>=0?t!==e&&this.reorder(r,e):this.add(r,e),++e}if(this.getChildrenFunction){const t=this.getChildrenFunction(r);if(Array.isArray(t))for(const i of t)e=this._processCollection(e,i);else e=this._processCollection(e,t)}}return e}};(0,r._)([(0,o.MZ)()],l.prototype,"getCollections",void 0),(0,r._)([(0,o.MZ)()],l.prototype,"getChildrenFunction",void 0),(0,r._)([(0,o.MZ)()],l.prototype,"itemFilterFunction",void 0),l=(0,r._)([(0,a.$)("esri.core.CollectionFlattener")],l);const c=l},80575:(e,t,i)=>{"use strict";i.d(t,{hr:()=>n,ie:()=>l,uC:()=>o,wf:()=>a});var r=i(4506);class n{constructor(e,t){this.min=e,this.max=t,this.range=t-e}ndiff(e,t=0){return Math.ceil((e-t)/this.range)*this.range+t}_normalize(e,t,i,r=0,n=!1){return(i-=r)<e?i+=this.ndiff(e-i):i>t&&(i-=this.ndiff(i-t)),n&&i===t&&(i=e),i+r}normalize(e,t=0,i=!1){return this._normalize(this.min,this.max,e,t,i)}clamp(e,t=0){return(0,r.qE)(e-t,this.min,this.max)+t}monotonic(e,t,i){return e<t?t:t+this.ndiff(e-t,i)}minimalMonotonic(e,t,i){return this._normalize(e,e+this.range,t,i)}center(e,t,i){return t=this.monotonic(e,t,i),this.normalize((e+t)/2,i)}diff(e,t,i){return this.monotonic(e,t,i)-e}shortestSignedDiff(e,t){e=this.normalize(e);const i=(t=this.normalize(t))-e,r=t<e?this.minimalMonotonic(e,t)-e:t-this.minimalMonotonic(t,e);return Math.abs(i)<Math.abs(r)?i:r}contains(e,t,i){return t=this.minimalMonotonic(e,t),(i=this.minimalMonotonic(e,i))>e&&i<t}}function s(e){for(const t in e){const i=e[t];i instanceof Function&&(e[t]=i.bind(e))}return e}const o=s(new n(0,2*Math.PI)),a=s(new n(-Math.PI,Math.PI)),l=s(new n(0,360))},62991:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var r=i(15565),n=i(80861),s=i(89894);class o extends s.A{constructor(e,t,i){super(e,t,i)}toJSON(){if(null!=this.details)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,((e,t)=>{if(t&&"object"==typeof t&&"function"==typeof t.toJSON)return t;try{return(0,r.o8)(t)}catch(e){return"[object]"}})))}}catch(e){throw n.A.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new o(e.name,e.message,e.details)}}o.prototype.type="error"},57888:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var r=i(82392),n=i(73783),s=i(70214),o=i(26325);class a{constructor(){this._emitter=new a.EventEmitter(this)}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}}!function(e){class t{constructor(e=null){this._target=e,this._listenersMap=null}clear(){this._listenersMap?.clear(),this._listenersMap=null}destroy(){this.clear()}emit(e,t){let i=this._listenersMap?.get(e);if(!i)return!1;const r=this._target||this;let n=!1;for(const e of i.slice()){const i="deref"in e?e.deref():e;i?i?.call(r,t):n=!0}return n&&(i=i.filter((e=>!("deref"in e)||null!=e.deref())),this._listenersMap.set(e,i)),i.length>0}on(e,t){if(Array.isArray(e)){const i=e.map((e=>this.on(e,t)));return(0,s.vE)(i)}if(e.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??=new Map;const i=this._listenersMap.get(e)||[];return i.push(t),this._listenersMap.set(e,i),(0,s.hA)((()=>{const i=this._listenersMap?.get(e),r=i?.indexOf(t)??-1;r>=0&&i.splice(r,1)}))}once(e,t){const i=this.on(e,(e=>{i.remove();const r="deref"in t?t.deref():t;r?.call(null,e)}));return i}hasEventListener(e){const t=this._listenersMap?.get(e);return null!=t&&t.length>0}}e.EventEmitter=t,e.EventedMixin=e=>{let i=class extends e{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}};return i=(0,r._)([(0,o.$)("esri.core.Evented")],i),i};let i=class extends n.A{constructor(){super(...arguments),this._emitter=new a.EventEmitter(this)}destroy(){this._emitter.clear()}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}};i=(0,r._)([(0,o.$)("esri.core.Evented")],i),e.EventedAccessor=i}(a||(a={}));const l=a},56802:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});var r=i(88938);class n{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach((t=>{e+=t.length})),e}add(e,t){if((0,r.xZ)(e)){const i=this._getOrCreateGroup(t);for(const t of e)this._isHandle(t)&&i.push(t)}else this._isHandle(e)&&this._getOrCreateGroup(t).push(e);return this}forEach(e,t){if("function"==typeof e)this._groups.forEach((t=>t.forEach(e)));else{const i=this._getGroup(e);i&&t&&i.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if("string"!=typeof e&&(0,r.xZ)(e)){for(const t of e)this.remove(t);return this}return this.has(e)?(this._removeAllFromGroup(this._getGroup(e)),this._groups.delete(this._ensureGroupKey(e)),this):this}removeAll(){return this._groups.forEach((e=>this._removeAllFromGroup(e))),this._groups.clear(),this}_isHandle(e){return e&&(!!e.remove||e instanceof n)}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}_removeAllFromGroup(e){for(const t of e)t instanceof n?t.removeAll():t.remove()}}},23377:(e,t,i)=>{"use strict";i.d(t,{PH:()=>a,sA:()=>o});var r=i(82392),n=i(26325);let s=0;const o=e=>{let t=class extends e{constructor(...e){super(...e),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+s++})}};return t=(0,r._)([(0,n.$)("esri.core.Identifiable")],t),t},a=e=>{let t=class extends e{constructor(...e){super(...e),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:s++})}};return t=(0,r._)([(0,n.$)("esri.core.NumericIdentifiable")],t),t};let l=class extends(o(class{})){};l=(0,r._)([(0,n.$)("esri.core.Identifiable")],l)},84977:(e,t,i)=>{"use strict";i.d(t,{oY:()=>g,Te:()=>f,Wj:()=>m});var r=i(82392),n=i(73783),s=i(15565),o=i(91101);class a{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const t=new a;return this._values.forEach(((i,r)=>{e&&e.has(r)||t.set(r,(0,s.o8)(i.value),i.origin)})),t}get(e,t){t=this._normalizeOrigin(t);const i=this._values.get(e);return null==t||i?.origin===t?i?.value:void 0}originOf(e){return this._values.get(e)?.origin??o.Gr.USER}keys(e){e=this._normalizeOrigin(e);const t=[...this._values.keys()];return null==e?t:t.filter((t=>this._values.get(t)?.origin===e))}set(e,t,i){if((i=this._normalizeOrigin(i))===o.Gr.DEFAULTS){const t=this._values.get(e);if(null!=t?.origin&&t.origin>i)return}this._values.set(e,new l(t,i))}delete(e,t){null!=(t=this._normalizeOrigin(t))&&this._values.get(e)?.origin!==t||this._values.delete(e)}has(e,t){return null!=(t=this._normalizeOrigin(t))?this._values.get(e)?.origin===t:this._values.has(e)}forEach(e){this._values.forEach((({value:t},i)=>e(t,i)))}_normalizeOrigin(e){if(null!=e)return e===o.Gr.DEFAULTS?e:o.Gr.USER}}class l{constructor(e,t){this.value=e,this.origin=t}}var c=i(44062),h=i(41446),u=i(66361),p=i(34467),d=i(26325);const f=e=>{let t=class extends e{constructor(...e){super(...e);const t=(0,u.oY)(this),i=t.store,r=new a;t.store=r,(0,c.k)(t,i,r)}read(e,t){(0,h.L)(this,e,t)}write(e,t){return(0,p.M)(this,e??{},t)}toJSON(e){return this.write({},e)}static fromJSON(e,t){return y.call(this,e,t)}};return t=(0,r._)([(0,d.$)("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function y(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(e,t),i}function m(e){return e&&"object"==typeof e&&"toJSON"in e&&"function"==typeof e.toJSON}let g=class extends(f(n.A)){};g=(0,r._)([(0,d.$)("esri.core.JSONSupport")],g)},91700:(e,t,i)=>{"use strict";i.d(t,{q:()=>n});var r=i(48156);class n{constructor(e,t){this._storage=new r.F,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),t&&this._storage.registerRemoveFunc("",t)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,t,i=1){this._storage.put(this,e,t,i,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}}},11965:(e,t,i)=>{"use strict";i.d(t,{A:()=>y});var r=i(82392),n=i(62991),s=i(57725),o=i(71004),a=i(37623),l=i(97629),c=i(81482),h=i(26325);const u="loaded",p=e=>{let t=class extends e{constructor(...e){super(...e),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise((e=>{const t=this.load.bind(this);this.load=i=>{const r=new Promise(((e,t)=>{const r=(0,a.NY)(i,t);this.destroyed&&t(new n.A("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(e,t).finally((()=>{r&&r.remove()}))}));if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");const e=this._loadController=new AbortController;t({signal:e.signal})}return e(),r}}))),this.when((()=>{this._set("loadStatus",u),this._loadController=null}),(e=>{this._set("loadStatus","failed"),this._set("loadError",e),this._loadController=null}))}destroy(){this._loadController&&(this._loadController=(0,s.DC)(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===u}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new n.A("load:cancelled","Cancelled")),this._loadController?.abort(),this._promiseProps.abort()),this}};return(0,r._)([(0,c.MZ)({readOnly:!0})],t.prototype,"loaded",null),(0,r._)([(0,c.MZ)({readOnly:!0})],t.prototype,"loadError",void 0),(0,r._)([(0,c.MZ)({clonable:!1})],t.prototype,"loadStatus",void 0),(0,r._)([(0,c.MZ)({type:[l.A],readOnly:!0})],t.prototype,"loadWarnings",null),t=(0,r._)([(0,h.$)("esri.core.Loadable")],t),t};let d=class extends(p(o.Z)){};var f;d=(0,r._)([(0,h.$)("esri.core.Loadable")],d),(f=d||(d={})).LoadableMixin=p,f.isLoadable=function(e){return!(!e||!e.load)};const y=d},80861:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var r=i(32083),n=(i(6273),i(21332));const s={info:0,warn:1,error:2,none:3};class o{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=e.level&&(this.level=e.level),null!=e.writer&&(this.writer=e.writer),this._module=e.module,o._loggers.set(this.module,this);const t=this.module.lastIndexOf(".");-1!==t&&(this._parent=o.getLogger(this.module.slice(0,t)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){const e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get test(){return{resetLoggers(e=new Map){const t=o._loggers;return o._loggers=e,t},set throttlingDisabled(e){o._throttlingDisabled=e}}}static getLogger(e){return e="string"!=typeof e?e.declaredClass:e,o._loggers.get(e)||new o({module:e})}_log(e,t,...i){if(this._matchLevel(e)){if("always"!==t&&!o._throttlingDisabled){const r=this._argsToKey(i),n=this._loggedMessages[e].get(r);if("once"===t&&null!=n||"oncePerTick"===t&&n&&n>=o._tickCounter)return;this._loggedMessages[e].set(r,o._tickCounter),o._scheduleTickCounterIncrement()}for(const t of r.A.log.interceptors)if(t(e,this.module,...i))return;this._inheritedWriter()(e,this.module,...i)}}_parentWithMember(e,t){let i=this;for(;null!=i;){const t=i[e];if(null!=t)return t;i=i.parent}return t}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,t,...i){console[e](`[${t}]`,...i)}_matchLevel(e){const t=r.A.log.level||"warn";return s[this._parentWithMember("level",t)]<=s[e]}_argsToKey(...e){return(0,n.Wm)(JSON.stringify(e,((e,t)=>"object"!=typeof t||Array.isArray(t)?t:"[Object]")))}static _scheduleTickCounterIncrement(){o._tickCounterScheduled||(o._tickCounterScheduled=!0,Promise.resolve().then((()=>{o._tickCounter++,o._tickCounterScheduled=!1})))}}o._loggers=new Map,o._tickCounter=0,o._tickCounterScheduled=!1,o._throttlingDisabled=!1},89809:(e,t,i)=>{"use strict";i.d(t,{T:()=>r,d:()=>y});const r={Base64:0,Hex:1,String:2,Raw:3},n=8,s=(1<<n)-1;function o(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function a(e){const t=[];for(let i=0,r=e.length*n;i<r;i+=n)t[i>>5]|=(e.charCodeAt(i/n)&s)<<i%32;return t}function l(e){const t=[];for(let i=0,r=32*e.length;i<r;i+=n)t.push(String.fromCharCode(e[i>>5]>>>i%32&s));return t.join("")}function c(e,t,i,r,n,s){return o(function(e,t){return e<<t|e>>>32-t}(o(o(t,e),o(r,s)),n),i)}function h(e,t,i,r,n,s,o){return c(t&i|~t&r,e,t,n,s,o)}function u(e,t,i,r,n,s,o){return c(t&r|i&~r,e,t,n,s,o)}function p(e,t,i,r,n,s,o){return c(t^i^r,e,t,n,s,o)}function d(e,t,i,r,n,s,o){return c(i^(t|~r),e,t,n,s,o)}function f(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let i=1732584193,r=-271733879,n=-1732584194,s=271733878;for(let t=0;t<e.length;t+=16){const a=i,l=r,c=n,f=s;i=h(i,r,n,s,e[t],7,-680876936),s=h(s,i,r,n,e[t+1],12,-389564586),n=h(n,s,i,r,e[t+2],17,606105819),r=h(r,n,s,i,e[t+3],22,-1044525330),i=h(i,r,n,s,e[t+4],7,-176418897),s=h(s,i,r,n,e[t+5],12,1200080426),n=h(n,s,i,r,e[t+6],17,-1473231341),r=h(r,n,s,i,e[t+7],22,-45705983),i=h(i,r,n,s,e[t+8],7,1770035416),s=h(s,i,r,n,e[t+9],12,-1958414417),n=h(n,s,i,r,e[t+10],17,-42063),r=h(r,n,s,i,e[t+11],22,-1990404162),i=h(i,r,n,s,e[t+12],7,1804603682),s=h(s,i,r,n,e[t+13],12,-40341101),n=h(n,s,i,r,e[t+14],17,-1502002290),r=h(r,n,s,i,e[t+15],22,1236535329),i=u(i,r,n,s,e[t+1],5,-165796510),s=u(s,i,r,n,e[t+6],9,-1069501632),n=u(n,s,i,r,e[t+11],14,643717713),r=u(r,n,s,i,e[t],20,-373897302),i=u(i,r,n,s,e[t+5],5,-701558691),s=u(s,i,r,n,e[t+10],9,38016083),n=u(n,s,i,r,e[t+15],14,-660478335),r=u(r,n,s,i,e[t+4],20,-405537848),i=u(i,r,n,s,e[t+9],5,568446438),s=u(s,i,r,n,e[t+14],9,-1019803690),n=u(n,s,i,r,e[t+3],14,-187363961),r=u(r,n,s,i,e[t+8],20,1163531501),i=u(i,r,n,s,e[t+13],5,-1444681467),s=u(s,i,r,n,e[t+2],9,-51403784),n=u(n,s,i,r,e[t+7],14,1735328473),r=u(r,n,s,i,e[t+12],20,-1926607734),i=p(i,r,n,s,e[t+5],4,-378558),s=p(s,i,r,n,e[t+8],11,-2022574463),n=p(n,s,i,r,e[t+11],16,1839030562),r=p(r,n,s,i,e[t+14],23,-35309556),i=p(i,r,n,s,e[t+1],4,-1530992060),s=p(s,i,r,n,e[t+4],11,1272893353),n=p(n,s,i,r,e[t+7],16,-155497632),r=p(r,n,s,i,e[t+10],23,-1094730640),i=p(i,r,n,s,e[t+13],4,681279174),s=p(s,i,r,n,e[t],11,-358537222),n=p(n,s,i,r,e[t+3],16,-722521979),r=p(r,n,s,i,e[t+6],23,76029189),i=p(i,r,n,s,e[t+9],4,-640364487),s=p(s,i,r,n,e[t+12],11,-421815835),n=p(n,s,i,r,e[t+15],16,530742520),r=p(r,n,s,i,e[t+2],23,-995338651),i=d(i,r,n,s,e[t],6,-198630844),s=d(s,i,r,n,e[t+7],10,1126891415),n=d(n,s,i,r,e[t+14],15,-1416354905),r=d(r,n,s,i,e[t+5],21,-57434055),i=d(i,r,n,s,e[t+12],6,1700485571),s=d(s,i,r,n,e[t+3],10,-1894986606),n=d(n,s,i,r,e[t+10],15,-1051523),r=d(r,n,s,i,e[t+1],21,-2054922799),i=d(i,r,n,s,e[t+8],6,1873313359),s=d(s,i,r,n,e[t+15],10,-30611744),n=d(n,s,i,r,e[t+6],15,-1560198380),r=d(r,n,s,i,e[t+13],21,1309151649),i=d(i,r,n,s,e[t+4],6,-145523070),s=d(s,i,r,n,e[t+11],10,-1120210379),n=d(n,s,i,r,e[t+2],15,718787259),r=d(r,n,s,i,e[t+9],21,-343485551),i=o(i,a),r=o(r,l),n=o(n,c),s=o(s,f)}return[i,r,n,s]}function y(e,t=r.Hex){const i=t||r.Base64,s=f(a(e),e.length*n);switch(i){case r.Raw:return s;case r.Hex:return function(e){const t="0123456789abcdef",i=[];for(let r=0,n=4*e.length;r<n;r++)i.push(t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15));return i.join("")}(s);case r.String:return l(s);case r.Base64:return function(e){const t=[];for(let i=0,r=4*e.length;i<r;i+=3){const r=(e[i>>2]>>i%4*8&255)<<16|(e[i+1>>2]>>(i+1)%4*8&255)<<8|e[i+2>>2]>>(i+2)%4*8&255;for(let n=0;n<4;n++)8*i+6*n>32*e.length?t.push("="):t.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>6*(3-n)&63))}return t.join("")}(s)}}},80294:(e,t,i)=>{"use strict";function r(e,t){for(const[i,r]of e)if(t(r,i))return!0;return!1}function n(e,t){for(const[i,r]of e)if(t(r,i))return r;return null}function s(e,t,i){const r=e.get(t);if(void 0!==r)return r;const n=i();return e.set(t,n),n}function o(e){const t=new Map;return i=>(t.has(i)||t.set(i,e(i)),t.get(i))}i.d(t,{$n:()=>n,Bj:()=>o,Bs:()=>r,tE:()=>s})},48156:(e,t,i)=>{"use strict";i.d(t,{Cn:()=>s,F:()=>c,Mn:()=>l,Ti:()=>n,k2:()=>o});var r=i(41785);const n=-3,s=n-1;var o,a;(a=o||(o={}))[a.ALL=0]="ALL",a[a.SOME=1]="SOME";class l{constructor(e,t,i){this.name=e,this._storage=t,this.id=h+++":",this.size=0,this.maxSize=-1,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),i&&(this._storage.registerRemoveFunc(this.id,i),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(e){return this._storage.getSize(this,e)}resetHitRate(){this._hit=this._miss=0}put(e,t,i,r=0){this._storage.put(this,e,t,i,r)}pop(e){const t=this._storage.pop(this,e);return void 0===t?++this._miss:++this._hit,t}get(e){const t=this._storage.get(this,e);return void 0===t?++this._miss:++this._hit,t}peek(e){return this._storage.peek(this,e)}updateSize(e,t,i){this._storage.updateSize(this,e,t,i)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class c{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new r.A,this._users=new r.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace((t=>t[0]!==e))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,t){const i=this._db.get(e.id+t);return i?.size??0}put(e,t,i,r,a){t=e.id+t;const l=this._db.get(t);if(l&&(this._size-=l.size,e.size-=l.size,this._db.delete(t),l.entry!==i&&this._notifyRemove(t,l.entry,l.size,o.ALL)),r>this._maxSize)return void this._notifyRemove(t,i,r,o.ALL);if(void 0===i)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return console.warn(`Refusing to cache entry with size ${r} for key ${t}`),void this._notifyRemove(t,i,0,o.ALL);const c=1+Math.max(a,s)-n;this._db.set(t,new u(i,r,c)),this._size+=r,e.size+=r,this._checkSize()}updateSize(e,t,i,r){t=e.id+t;const n=this._db.get(t);if(n&&n.entry===i){for(this._size-=n.size,e.size-=n.size;r>this._maxSize;){const e=this._notifyRemove(t,i,r,o.SOME);if(!(null!=e&&e>0))return void this._db.delete(t);r=e}n.size=r,this._size+=r,e.size+=r,this._checkSize()}}pop(e,t){t=e.id+t;const i=this._db.get(t);if(i)return this._size-=i.size,e.size-=i.size,this._db.delete(t),++this._hit,i.entry;++this._miss}get(e,t){t=e.id+t;const i=this._db.get(t);if(void 0!==i)return this._db.delete(t),i.lives=i.lifetime,this._db.set(t,i),++this._hit,i.entry;++this._miss}peek(e,t){const i=this._db.get(e.id+t);return i?++this._hit:++this._miss,i?.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},i=new Array;this._db.forEach(((e,r)=>{const n=e.lifetime;i[n]=(i[n]||0)+e.size,this._users.forAll((i=>{const{id:n,name:s}=i;if(r.startsWith(n)){const i=t[s]||0;t[s]=i+e.size}}))}));const r={};this._users.forAll((e=>{const i=e.name;if("hitRate"in e&&"number"==typeof e.hitRate&&!isNaN(e.hitRate)&&e.hitRate>0){const n=t[i]||0;t[i]=n,r[i]=Math.round(100*e.hitRate)+"%"}else r[i]="0%"}));const s=Object.keys(t);s.sort(((e,i)=>t[i]-t[e])),s.forEach((i=>e[i]=Math.round(t[i]/2**20)+"MB / "+r[i]));for(let t=i.length-1;t>=0;--t){const r=i[t];r&&(e["Priority "+(t+n-1)]=Math.round(r/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll((e=>e.resetHitRate()))}clear(e){const t=e.id;this._db.forEach(((e,i)=>{i.startsWith(t)&&(this._size-=e.size,this._db.delete(i),this._notifyRemove(i,e.entry,e.size,o.ALL))})),e.size=0}clearAll(){this._db.forEach(((e,t)=>this._notifyRemove(t,e.entry,e.size,o.ALL))),this._users.forAll((e=>e.size=0)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,t,i,r){let n;return this._removeFuncs.some((s=>{if(e.startsWith(s[0])){const e=s[1](t,r,i);return"number"==typeof e&&(n=e),!0}return!1})),n}_checkSize(){this._users.forAll((e=>this._checkSizeLimits(e))),this._checkSizeLimits()}_checkSizeLimits(e){const t=e??this;if(t.maxSize<0||t.size<=t.maxSize)return;const i=e?.id;let r=!0;for(;r;){r=!1;for(const[n,s]of this._db)if(0===s.lifetime&&(!i||n.startsWith(i))){if(this._purgeItem(n,s,e),t.size<=.9*t.maxSize)return;r||=this._db.has(n)}}for(const[r,n]of this._db)if((!i||r.startsWith(i))&&(this._purgeItem(r,n,e),t.size<=.9*t.maxSize))return}_purgeItem(e,t,i=this._users.find((t=>e.startsWith(t.id)))){if(this._db.delete(e),t.lives<=1){this._size-=t.size,i&&(i.size-=t.size);const r=this._notifyRemove(e,t.entry,t.size,o.SOME);null!=r&&r>0&&(this._size+=r,i&&(i.size+=r),t.lives=t.lifetime,t.size=r,this._db.set(e,t))}else--t.lives,this._db.set(e,t)}}let h=0;class u{constructor(e,t,i){this.entry=e,this.size=t,this.lifetime=i,this.lives=i}}},89894:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});var r=i(21750);class n{constructor(e,t,i){this.name=e,this.details=i,this.message=(t&&function(e,t){return e.replaceAll(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,((e,i)=>""===i?"$":((0,r.wc)(i,t)??"").toString()))}(t,i))??""}toString(){return"["+this.name+"]: "+this.message}}},67214:(e,t,i)=>{"use strict";i.d(t,{P:()=>_,L:()=>b});var r=i(82392),n=i(73783),s=i(44062),o=i(15565),a=i(91101);class l{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(a.AU),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const t=new l,i=this._originStores[a.Gr.DEFAULTS];i&&i.forEach(((e,i)=>{t.set(i,(0,o.o8)(e),a.Gr.DEFAULTS)}));for(let i=a.Gr.SERVICE;i<a.AU;i++){const r=this._originStores[i];r&&r.forEach(((r,n)=>{e&&e.has(n)||t.set(n,(0,o.o8)(r),i)}))}return t}get(e,t){const i=void 0===t?this._values:this._originStores[t];return i?i.get(e):void 0}keys(e){const t=null==e?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,i=a.Gr.USER){let r=this._originStores[i];if(r||(r=new Map,this._originStores[i]=r),r.set(e,t),!this._values.has(e)||this._propertyOriginMap.get(e)<=i){const r=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,i),r!==t}return!1}delete(e,t=a.Gr.USER){const i=this._originStores[t];if(!i)return;const r=i.get(e);if(i.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(let i=t-1;i>=0;i--){const t=this._originStores[i];if(t&&t.has(e)){this._values.set(e,t.get(e)),this._propertyOriginMap.set(e,i);break}}}return r}has(e,t){const i=void 0===t?this._values:this._originStores[t];return!!i&&i.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;const i=this._originStores[t],r=i?.get(e),n=this._values.get(e);return this._values.set(e,r),this._propertyOriginMap.set(e,t),n!==r}originOf(e){return this._propertyOriginMap.get(e)||a.Gr.DEFAULTS}forEach(e){this._values.forEach(e)}}var c=i(41446),h=i(66361),u=i(26325);const p=e=>{let t=class extends e{constructor(...e){super(...e);const t=(0,h.oY)(this),i=t.store,r=new l;t.store=r,(0,s.k)(t,i,r)}read(e,t){(0,c.L)(this,e,t)}getAtOrigin(e,t){const i=d(this),r=(0,a.aB)(t);if("string"==typeof e)return i.get(e,r);const n={};return e.forEach((e=>{n[e]=i.get(e,r)})),n}originOf(e){return(0,a.OL)(this.originIdOf(e))}originIdOf(e){return d(this).originOf(e)}revert(e,t){const i=d(this),r=(0,a.aB)(t),n=(0,h.oY)(this);let s;s="string"==typeof e?"*"===e?i.keys(r):[e]:e,s.forEach((e=>{n.invalidate(e),i.revert(e,r),n.commit(e)}))}};return t=(0,r._)([(0,u.$)("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function d(e){return(0,h.oY)(e).store}let f=class extends(p(n.A)){};f=(0,r._)([(0,u.$)("esri.core.ReadOnlyMultiOriginJSONSupport")],f);var y=i(44212),m=i(34467);const g=e=>{let t=class extends e{constructor(...e){super(...e)}clear(e,t="user"){return v(this).delete(e,(0,a.aB)(t))}write(e,t){return(0,m.M)(this,e=e||{},t),e}setAtOrigin(e,t,i){(0,h.oY)(this).setAtOrigin(e,t,(0,a.aB)(i))}removeOrigin(e){const t=v(this),i=(0,a.aB)(e),r=t.keys(i);for(const e of r)t.originOf(e)===i&&t.set(e,t.get(e,i),a.Gr.USER)}updateOrigin(e,t){const i=v(this),r=(0,a.aB)(t),n=(0,y.Jt)(this,e);for(let t=r+1;t<a.AU;++t)i.delete(e,t);i.set(e,n,r)}toJSON(e){return this.write({},e)}};return t=(0,r._)([(0,u.$)("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function v(e){return(0,h.oY)(e).store}const _=e=>{let t=class extends(g(p(e))){constructor(...e){super(...e)}};return t=(0,r._)([(0,u.$)("esri.core.MultiOriginJSONSupport")],t),t};let b=class extends(_(n.A)){};b=(0,r._)([(0,u.$)("esri.core.MultiOriginJSONSupport")],b)},39744:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});class r{constructor(e,t,i,r=1,n=0){if(this._ctor=e,this._acquireFunction=t,this._releaseFunction=i,this.allocationSize=r,this._pool=new Array(n),this._initialSize=n,this._ctor)for(let e=0;e<n;e++)this._pool[e]=new this._ctor;this.allocationSize=Math.max(r,1)}destroy(){this.prune(0)}acquire(...e){let t;if(r.test.disabled)t=new this._ctor;else{if(0===this._pool.length){const e=this.allocationSize;for(let t=0;t<e;t++)this._pool[t]=new this._ctor}t=this._pool.pop()}return this._acquireFunction?this._acquireFunction(t,...e):function(e){return e?.acquire&&"function"==typeof e.acquire}(t)&&t.acquire(...e),t}release(e){var t;e&&!r.test.disabled&&(this._releaseFunction?this._releaseFunction(e):(t=e,t?.release&&"function"==typeof t.release&&e.release()),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let t=e;t<this._pool.length;++t){const e=this._pool[t];this._dispose(e)}this._pool.length=e}}_dispose(e){e.dispose&&"function"==typeof e.dispose&&e.dispose()}}r.test={disabled:!1}},82444:(e,t,i)=>{"use strict";i.d(t,{I:()=>n});var r=i(71709);class n{constructor(e){this._allocator=e,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,r.d)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*s);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}_grow(){for(let e=0;e<Math.max(8,Math.min(this._items.length,s));e++)this._items.push(this._allocator())}}const s=1024},28335:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});class r{constructor(e,t=30){this.name=e,this._counter=0,this._samples=new Array(t)}record(e){null!=e&&(this._samples[++this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort(((e,t)=>e-t))[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce(((e,t)=>e+t),0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}}},41785:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var r,n=i(3223);!function(e){const t=(e,t,i,r)=>{let n=t,s=t;const o=i>>>1,a=e[n-1];for(;s<=o;){s=n<<1,s<i&&r(e[s-1],e[s])<0&&++s;const t=e[s-1];if(r(t,a)<=0)break;e[n-1]=t,n=s}e[n-1]=a},i=(e,t)=>e<t?-1:e>t?1:0;e.sort=function(e,r,n,s){void 0===r&&(r=0),void 0===n&&(n=e.length),void 0===s&&(s=i);for(let i=n>>>1;i>r;i--)t(e,i,n,s);const o=r+1;for(let i=n-1;i>r;i--){const n=e[r];e[r]=e[i],e[i]=n,t(e,o,i,s)}},e.iterableSort=function*(e,r,n,s){void 0===r&&(r=0),void 0===n&&(n=e.length),void 0===s&&(s=i);for(let i=n>>>1;i>r;i--)t(e,i,n,s),yield;const o=r+1;for(let i=n-1;i>r;i--){const n=e[r];e[r]=e[i],e[i]=n,t(e,o,i,s),yield}}}(r||(r={}));const s=r;class o{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new n.vW,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),void 0!==e.deallocator&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>a(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const t=new Array;for(let i=0;i<this._length;i++){const r=this.data[i];e(r)&&t.push(r)}return t}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,t){const i=this.data.indexOf(e,t);return-1!==i&&i<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let t=e;t<this._length;++t)this.data[t]=this._deallocator(this.data[t]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,t=e.length){for(let i=0;i<t;i++)this.data[this._length++]=e[i]}fill(e,t){for(let i=0;i<t;i++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,a(this)}pop(){if(0===this.length)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const t=(0,n.qh)(this.data,e,this.length,this._hint);if(-1!==t)return this.data.splice(t,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex((0,n.qh)(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,t=e.length,i){this.length=(0,n.mW)(this.data,e,this.length,t,this._hint,i),this._shrink()}front(){if(0!==this.length)return this.data[0]}back(){if(0!==this.length)return this.data[this.length-1]}swapElements(e,t){if(e>=this.length||t>=this.length||e===t)return;const i=this.data[e];this.data[e]=this.data[t],this.data[t]=i}sort(e){s.sort(this.data,0,this.length,e)}iterableSort(e){return s.iterableSort(this.data,0,this.length,e)}some(e,t){for(let i=0;i<this.length;++i)if(e.call(t,this.data[i],i,this.data))return!0;return!1}find(e,t){for(let i=0;i<this.length;++i){const r=this.data[i];if(e.call(t,r,i))return r}}filterInPlace(e,t){let i=0;for(let r=0;r<this._length;++r){const n=this.data[r];e.call(t,n,r,this.data)&&(this.data[r]=this.data[i],this.data[i]=n,i++)}if(this._deallocator)for(let e=i;e<this._length;e++)this.data[e]=this._deallocator(this.data[e]);return this._length=i,this._shrink(),this}forAll(e,t){const{data:i,length:r}=this;for(let n=0;n<r;++n)e.call(t,i[n],n,i)}forEach(e,t){this.data.slice(0,this.length).forEach(e,t)}map(e,t){const i=new Array(this.length);for(let r=0;r<this.length;++r)i[r]=e.call(t,this.data[r],r,this.data);return i}reduce(e,t){let i=t;for(let t=0;t<this.length;++t)i=e(i,this.data[t],t,this.data);return i}has(e){const t=this.length,i=this.data;for(let r=0;r<t;++r)if(i[r]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}}function a(e){e.data.length>1.5*e.length&&(e.data.length=Math.floor(1.1*e.length))}},71004:(e,t,i)=>{"use strict";i.d(t,{Z:()=>u,g:()=>h});var r,n,s=i(82392),o=i(73783),a=i(37623),l=i(26325);(n=r||(r={}))[n.PENDING=0]="PENDING",n[n.RESOLVED=1]="RESOLVED",n[n.REJECTED=2]="REJECTED";class c{constructor(){this._resolver=(0,a.Tw)(),this._status=r.PENDING,this._resolvingPromises=[],this._resolver.promise.then((()=>{this._status=r.RESOLVED,this._cleanUp()}),(()=>{this._status=r.REJECTED,this._cleanUp()})),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===r.RESOLVED}isRejected(){return this._status===r.REJECTED}isFulfilled(){return this._status!==r.PENDING}abort(){this._resolver.reject((0,a.NK)())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=(0,a.Tw)(),t=[...this._resolvingPromises,e.promise],i=this._allPromise=Promise.all(t);i.then((()=>{this.isFulfilled()||this._allPromise!==i||this._resolver.resolve()}),(e=>{this.isFulfilled()||this._allPromise!==i||(0,a.zf)(e)||this._resolver.reject(e)})),e.resolve()}}const h=e=>{let t=class extends e{constructor(...e){super(...e),this._promiseProps=new c,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(e,t){return this._promiseProps.promise.then((()=>this)).then(e,t)}catch(e){return this.when(null,e)}addResolvingPromise(e){e&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in e?e.when():e)}};return t=(0,s._)([(0,l.$)("esri.core.Promise")],t),t};let u=class extends(h(o.A)){};u=(0,s._)([(0,l.$)("esri.core.Promise")],u)},57882:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var r=i(99595),n=i(29745);class s{constructor(e=(e=>e.values().next().value)){this._peeker=e,this._observable=new n.I,this._items=new Set}get length(){return(0,r.gc)(this._observable),this._items.size}clear(){0!==this.length&&(this._items.clear(),this._observable.notify())}last(){if(0===this.length)return;let e;for(e of this._items);return e}peek(){if(0!==this.length)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return(0,r.gc)(this._observable),this._items.has(e)}pop(){if(0===this.length)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(0===this.length)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const t=this.length;return this._items.forEach((t=>{e(t)||this._items.delete(t)})),t!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){(0,r.gc)(this._observable),yield*this._items}}},67498:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});class r{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*r._m}getInt(){return this._seed=(r._a*this._seed+r._c)%r._m,this._seed}getFloat(){return this.getInt()/(r._m-1)}getIntRange(e,t){return Math.round(this.getFloatRange(e,t))}getFloatRange(e,t){const i=t-e;return e+this.getInt()/r._m*i}}r._m=2147483647,r._a=48271,r._c=0},51074:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var r=i(99595),n=i(29745);class s{constructor(e){this._observable=new n.I,this._map=new Map(e)}get size(){return(0,r.gc)(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(e){const t=this._map.delete(e);return t&&this._observable.notify(),t}entries(){return(0,r.gc)(this._observable),this._map.entries()}forEach(e,t){(0,r.gc)(this._observable),this._map.forEach(((i,r)=>e.call(t,i,r,this)),t)}get(e){return(0,r.gc)(this._observable),this._map.get(e)}has(e){return(0,r.gc)(this._observable),this._map.has(e)}keys(){return(0,r.gc)(this._observable),this._map.keys()}set(e,t){return this._map.set(e,t),this._observable.notify(),this}values(){return(0,r.gc)(this._observable),this._map.values()}[Symbol.iterator](){return(0,r.gc)(this._observable),this._map[Symbol.iterator]()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}}},47917:(e,t,i)=>{"use strict";i.d(t,{P:()=>n});var r=i(39744);class n extends r.A{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const t=super.acquire(...e);return this._set.delete(t),t}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}}},98592:(e,t,i)=>{"use strict";function r(e,t){for(const i of e.entries())if(t(i[0]))return!0;return!1}function n(e,t){if(!t)return e;for(const i of t)e.add(i);return e}function s(e,t){const i=new Set;return n(i,e),n(i,t),i}function o(e,t){const i=new Set;for(const r of t)e.has(r)&&i.add(r);return i}function a(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const i of e)if(!t.has(i))return!1;return!0}function l(e,t){if(null==e&&null==t)return!0;if(null==e||null==t||e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function c(e,t){const i=new Set(e);for(const e of t)i.delete(e);return i}function h(e,t){return c(s(e,t),o(e,t))}i.d(t,{BT:()=>h,E$:()=>o,KC:()=>s,Yy:()=>a,aI:()=>l,bw:()=>r,iv:()=>c})},27805:(e,t,i)=>{"use strict";i.d(t,{R:()=>n});var r=i(62991);let n=class e{constructor(e,t,i=""){this.major=e,this.minor=t,this._context=i}lessThan(e,t){return this.major<e||e===this.major&&this.minor<t}since(e,t){return!this.lessThan(e,t)}validate(e){if(this.major!==e.major){const t=this._context&&this._context+":",i=this._context&&this._context+" ";throw new r.A(t+"unsupported-version",`Required major ${i}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new e(this.major,this.minor,this._context)}static parse(t,i=""){const[n,s]=t.split("."),o=/^\s*\d+\s*$/;if(!n?.match||!o.test(n))throw new r.A((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!s?.match||!o.test(s))throw new r.A((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const a=parseInt(n,10),l=parseInt(s,10);return new e(a,l,i)}}},97629:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});var r=i(89894);class n extends r.A{constructor(e,t,i){super(e,t,i)}}n.prototype.type="warning"},59823:(e,t,i)=>{"use strict";i.d(t,{T:()=>o});var r=i(70214),n=i(3223);class s{constructor(e,t){this._observers=e,this._observer=t}remove(){(0,n.TF)(this._observers,this._observer)}}class o{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return a;null==this._observers&&(this._observers=[]);const t=this._observers;let i=!1,r=!1;const n=t.length;for(let s=0;s<n;++s){const n=t[s];if(n.destroyed)r=!0;else if(n===e){i=!0;break}}return i||(t.push(e),r&&this._removeDestroyedObservers()),new s(t,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||0===e.length)return;const t=e.length;let i=0;for(let r=0;r<t;++r){for(;r+i<t&&e[r+i].destroyed;)++i;if(i>0){if(!(r+i<t))break;e[r]=e[r+i]}}e.length=t-i}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(null!=e){for(const t of e)t.onCommitted();this._observers=null}}}const a=(0,r.hA)()},91101:(e,t,i)=>{"use strict";var r;i.d(t,{AU:()=>n,Gr:()=>r,OL:()=>o,aB:()=>s,in:()=>a}),function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"}(r||(r={}));const n=r.USER+1;function s(e){switch(e){case"defaults":return r.DEFAULTS;case"service":return r.SERVICE;case"portal-item":return r.PORTAL_ITEM;case"web-scene":return r.WEB_SCENE;case"web-map":return r.WEB_MAP;case"link-chart":return r.LINK_CHART;case"user":return r.USER;default:return null}}function o(e){switch(e){case r.DEFAULTS:return"defaults";case r.SERVICE:return"service";case r.PORTAL_ITEM:return"portal-item";case r.WEB_SCENE:return"web-scene";case r.WEB_MAP:return"web-map";case r.LINK_CHART:return"link-chart";case r.USER:return"user"}}function a(e){return o(e)}},90199:(e,t,i)=>{"use strict";i.d(t,{G:()=>r});const r=Symbol("Accessor-beforeDestroy")},77380:(e,t,i)=>{"use strict";i.d(t,{w:()=>l});var r=i(8636),n=i(88135);const s=Object.prototype.toString;function o(e){const t="__accessorMetadata__"in e?(0,r.dp)(e):e;return function(...e){if(e.push(t),"number"==typeof e[2])throw new Error("Using @cast has parameter decorator is not supported since 4.16");return a.apply(this,e)}}function a(e,t,i,r){(0,n.z4)(e,t).cast=r}function l(...e){if(3!==e.length||"string"!=typeof e[1])return 1===e.length&&"[object Function]"===s.call(e[0])?o(e[0]):1===e.length&&"string"==typeof e[0]?function(e){return(t,i)=>{(0,n.z4)(t,e).cast=t[i]}}(e[0]):void 0}},85716:(e,t,i)=>{"use strict";i.d(t,{e:()=>s});var r=i(1817),n=i(81482);function s(e,t={}){const i=e instanceof r.J?e:new r.J(e,t),s={type:t?.ignoreUnknown??1?i.apiValues:String,json:{type:i.jsonValues,read:!t?.readOnly&&{reader:i.read},write:{writer:i.write}}};return void 0!==t?.readOnly&&(s.readOnly=!!t.readOnly),void 0!==t?.default&&(s.json.default=t.default),void 0!==t?.name&&(s.json.name=t.name),void 0!==t?.nonNullable&&(s.nonNullable=t.nonNullable),(0,n.MZ)(s)}},81482:(e,t,i)=>{"use strict";i.d(t,{MZ:()=>l,Qp:()=>h,rM:()=>c});var r=i(80861),n=i(8636),s=i(44212),o=i(88135),a=i(6864);function l(e={}){return(t,i)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${i}. Accessor does not support static properties.`);const l=Object.getOwnPropertyDescriptor(t,i),c=(0,o.z4)(t,i);l&&(l.get||l.set?(c.get=l.get||c.get,c.set=l.set||c.set):"value"in l&&("value"in e&&r.A.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${t.constructor.name}" already defined in the metadata`,e),c.value=e.value=l.value)),null!=e.readOnly&&(c.readOnly=e.readOnly);const u=e.aliasOf;if(u){const e="string"==typeof u?u:u.source,t="string"==typeof u?null:!0===u.overridable;let r;c.dependsOn=[e],c.get=function(){let t=(0,s.Jt)(this,e);if("function"==typeof t){r||(r=e.split(".").slice(0,-1).join("."));const i=(0,s.Jt)(this,r);i&&(t=t.bind(i))}return t},c.readOnly||(c.set=t?function(e){this._override(i,e)}:function(t){(0,a.h)(this,e,t)})}const p=e.type,d=e.types;c.cast||(p?c.cast=function(e){let t=0,i=e;if((0,n.Zu)(e))return(0,n.Nd)(e);for(;Array.isArray(i)&&1===i.length&&"string"!=typeof i[0]&&"number"!=typeof i[0];)i=i[0],t++;const r=i;if((0,n.EK)(r))return 0===t?(0,n.MB)(r):(0,n._e)((0,n.MB)(r),t);if(1===t)return(0,n.eC)(r);if(t>1)return(0,n.e6)(r,t);const s=e;return s.from?s.from:(0,n.dp)(s)}(p):d&&(Array.isArray(d)?c.cast=(0,n.wB)((0,n.aq)(d[0])):c.cast=(0,n.aq)(d))),(0,o.CX)(c,e),e.range&&(c.cast=h(c.cast,e.range))}}function c(e,t,i){const r=(0,o.z4)(e,i);r.json||(r.json={});let n=r.json;return void 0!==t&&(n.origins||(n.origins={}),n.origins[t]||(n.origins[t]={}),n=n.origins[t]),n}function h(e,t){return i=>{let r=+e(i);return null!=t.step&&(r=Math.round(r/t.step)*t.step),null!=t.min&&(r=Math.max(t.min,r)),null!=t.max&&(r=Math.min(t.max,r)),r}}},25376:(e,t,i)=>{"use strict";i.d(t,{w:()=>n});var r=i(81482);function n(e,t,i){let n,s;return void 0===t||Array.isArray(t)?(s=e,i=t,n=[void 0]):(s=t,n=Array.isArray(e)?e:[e]),(e,t)=>{const o=e.constructor.prototype;n.forEach((n=>{const a=(0,r.rM)(e,n,s);a.read&&"object"==typeof a.read||(a.read={}),a.read.reader=o[t],i&&(a.read.source=(a.read.source||[]).concat(i))}))}}},50078:(e,t,i)=>{"use strict";function r(e){return(t,i)=>{t[i]=e}}i.d(t,{u:()=>r})},26325:(e,t,i)=>{"use strict";i.d(t,{$:()=>h}),i(6273);var r=i(90199),n=i(40634),s=i(88135),o=i(99595),a=i(12945);const l=new Set,c=new Set;function h(e){return t=>{e??="esri.core.Accessor",t.prototype.declaredClass=e,p(t);const i=[],n=[];let o=t.prototype;for(;o;)o.hasOwnProperty("initialize")&&!l.has(o.initialize)&&(l.add(o.initialize),i.push(o.initialize)),o.hasOwnProperty("destroy")&&!c.has(o.destroy)&&(c.add(o.destroy),n.push(o.destroy)),o=Object.getPrototypeOf(o);l.clear(),c.clear();const a=class extends t{constructor(...e){if(super(...e),this.constructor===a&&"function"==typeof this.postscript){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let e=i.length-1;e>=0;e--)i[e].call(this)}}),n.length){let e=!1;const t=this[r.G];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!e){e=!0,t.call(this);for(let e=0;e<n.length;e++)n[e].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript(...e)}}};a.__accessorMetadata__=(0,s.tD)(t.prototype),a.prototype.declaredClass=e;const h=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(a,"name",{value:h,configurable:!0}),a}}function u(e,t){return null==t.get?function(){const t=this.__accessor__,i=t.propertiesByName.get(e);if(void 0===i)return;(0,o.gc)(i);const r=t.store;return r.has(e)?r.get(e):i.metadata.value}:function(){const t=this.__accessor__,i=t.propertiesByName.get(e);if(void 0!==i)return i.getComputed(t)}}function p(e){const t=e.prototype,i=(0,s.tD)(t),r={};for(const e of Object.getOwnPropertyNames(i)){const t=i[e];(0,a.qk)(t),r[e]={enumerable:!0,configurable:!0,get:u(e,t),set(i){const r=this.__accessor__;if(void 0!==r){if(!Object.isFrozen(this)){if(r.initialized&&t.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${e}' of ${this.declaredClass}`);if(r.lifecycle===n.v.CONSTRUCTED&&t.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${e}' of ${this.declaredClass}`);r.set(e,i)}}else Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:i})}}}Object.defineProperties(e.prototype,r)}},48524:(e,t,i)=>{"use strict";i.d(t,{K:()=>n});var r=i(81482);function n(e,t,i){let n,s;return void 0===t?(s=e,n=[void 0]):"string"!=typeof t?(s=e,n=[void 0],i=t):(s=t,n=Array.isArray(e)?e:[e]),(e,t)=>{const o=e.constructor.prototype;for(const a of n){const n=(0,r.rM)(e,a,s);n.write&&"object"==typeof n.write||(n.write={}),i&&(n.write.target=i),n.write.writer=o[t]}}}},44062:(e,t,i)=>{"use strict";i.d(t,{k:()=>n});var r=i(91101);function n(e,t,i){t.keys().forEach((e=>{i.set(e,t.get(e),r.Gr.DEFAULTS)}));const n=e.metadata;Object.keys(n).forEach((t=>{e.internalGet(t)&&i.set(t,e.internalGet(t),r.Gr.DEFAULTS)}))}},58652:(e,t,i)=>{"use strict";i.d(t,{EB:()=>d,Im:()=>m,Mj:()=>p,Ui:()=>y,w2:()=>f});var r=i(73783),n=i(58842),s=i(66361);const o=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function a(e){return e instanceof r.A}function l(e){return e instanceof n.A?Object.keys(e.items):a(e)?(0,s.oY)(e).keys():e?Object.keys(e):[]}function c(e,t){return e instanceof n.A?e.items[t]:e[t]}function h(e){return e?e.declaredClass:null}function u(e,t){const i=e.diff;if(i&&"function"==typeof i)return i(e,t);const r=l(e),n=l(t);if(0===r.length&&0===n.length)return;if(!r.length||!n.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const s=n.filter((e=>!r.includes(e))),p=r.filter((e=>!n.includes(e))),d=r.filter((i=>n.includes(i)&&c(e,i)!==c(t,i))).concat(s,p).sort(),f=h(e);if(f&&o.has(f)&&d.length)return{type:"complete",oldValue:e,newValue:t};let y;const m=a(e)&&a(t);for(const r of d){const n=c(e,r),s=c(t,r);let o;if((m||"function"!=typeof n&&"function"!=typeof s)&&n!==s&&(null!=n||null!=s)){if(i&&i[r]&&"function"==typeof i[r])o=i[r]?.(n,s);else if(n instanceof Date&&s instanceof Date){if(n.getTime()===s.getTime())continue;o={type:"complete",oldValue:n,newValue:s}}else o="object"==typeof n&&"object"==typeof s&&h(n)===h(s)?u(n,s):{type:"complete",oldValue:n,newValue:s};null!=o&&(null!=y?y.diff[r]=o:y={type:"partial",diff:{[r]:o}})}}return y}function p(e,t){return d(e,t)}function d(e,t){if(null==e)return!1;const i=t.split(".");let r=e;for(const e of i){if("complete"===r.type)return!0;if("partial"!==r.type)return!1;{const t=r.diff[e];if(!t)return!1;r=t}}return!0}function f(e,t){if(!e)return!1;if("partial"===e.type){const i=Object.keys(e.diff);return 1===i.length&&i[0]===t}return!1}function y(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&h(e)!==h(t)?{type:"complete",oldValue:e,newValue:t}:u(e,t)}function m(e){if(null==e)return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const e of t.added)if(!m(e))return!1;for(const e of t.removed)if(!m(e))return!1;for(const e of t.changed)if(!m(e))return!1;return!0}case"partial":for(const t in e.diff)if(!m(e.diff[t]))return!1;return!0}}},8636:(e,t,i)=>{"use strict";i.d(t,{EK:()=>A,GB:()=>c,GX:()=>l,MB:()=>E,Nd:()=>N,PZ:()=>m,Vr:()=>h,Zu:()=>k,_e:()=>T,aq:()=>x,dp:()=>_,e6:()=>S,eC:()=>w,gK:()=>C,jz:()=>I,wB:()=>b}),i(6273);var r=i(80861),n=i(80294);const s=()=>r.A.getLogger("esri.core.accessorSupport.ensureTypes");function o(e){return null==e?e:new Date(e)}function a(e){return null==e?e:!!e}function l(e){return null==e?e:e.toString()}function c(e){return null==e?e:(e=parseFloat(e),isNaN(e)?0:e)}function h(e){return null==e?e:Math.round(parseFloat(e))}function u(e){return e?.constructor&&void 0!==e.constructor.__accessorMetadata__}function p(e,t){return null!=t&&e&&!(t instanceof e)}function d(e){return e&&"isCollection"in e}function f(e){return e?.Type?"function"==typeof e.Type?e.Type:e.Type.base:null}function y(e,t){return!!u(t)&&(s().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+g(e)+"'"),!0)}function m(e,t){return null==t?t:d(e)?function(e,t){if(!t?.constructor||!d(t.constructor))return y(e,t)?t:new e(t);const i=f(e.prototype.itemType),r=f(t.constructor.prototype.itemType);return i?r?i===r?t:i.prototype.isPrototypeOf(r.prototype)?new e(t):(y(e,t),t):new e(t):t}(e,t):p(e,t)?y(e,t)?t:new e(t):t}function g(e){return e?.prototype?.declaredClass||"unknown"}const v=new WeakMap;function _(e,t){const i=function(e){switch(e){case Number:return c;case I:return h;case Boolean:return a;case String:return l;case Date:return o;default:return(0,n.tE)(v,e,(()=>m.bind(null,e)))}}(e);return 1===arguments.length?i:i(t)}function b(e,t,i){return 1===arguments.length?b.bind(null,e):t?Array.isArray(t)?t.map((t=>e(t,i))):[e(t,i)]:t}function w(e,t){return 1===arguments.length?b((t=>_(e,t))):b((t=>_(e,t)),t)}function M(e,t,i){return 0!==t&&Array.isArray(i)?i.map((i=>M(e,t-1,i))):e(i)}function T(e,t,i){if(2===arguments.length)return i=>T(e,t,i);if(!i)return i;i=M(e,t,i);let r=t,n=i;for(;r>0&&Array.isArray(n);)r--,n=n[0];if(void 0!==n)for(let e=0;e<r;e++)i=[i];return i}function S(e,t,i){return 2===arguments.length?T((t=>_(e,t)),t):T((t=>_(e,t)),t,i)}function A(e){return!!Array.isArray(e)&&!e.some((t=>{const i=typeof t;return!("string"===i||"number"===i||"function"===i&&e.length>1)}))}function E(e,t){if(2===arguments.length)return E(e).call(null,t);const i=new Set,r=e.filter((e=>"function"!=typeof e)),n=e.filter((e=>"function"==typeof e));for(const t of e)"string"!=typeof t&&"number"!=typeof t||i.add(t);let o=null,a=null;return(e,t)=>{if(null==e)return e;const l=typeof e,c="string"===l||"number"===l;return c&&(i.has(e)||n.some((e=>"string"===l&&e===String||"number"===l&&e===Number)))||"object"===l&&n.some((t=>!p(e,t)))?e:(c&&r.length?(o||(o=r.map((e=>"string"==typeof e?`'${e}'`:`${e}`)).join(", ")),s().error("Accessor#set",`'${e}' is not a valid value for this property, only the following values are valid: ${o}`)):"object"==typeof e&&n.length?(a||(a=n.map((e=>g(e))).join(", ")),s().error("Accessor#set",`'${e}' is not a valid value for this property, value must be one of ${a}`)):s().error("Accessor#set",`'${e}' is not a valid value for this property`),t&&(t.valid=!1),null)}}function x(e,t){if(2===arguments.length)return x(e).call(null,t);const i={},r=[],n=[];for(const t in e.typeMap){const s=e.typeMap[t];i[t]=_(s),r.push(g(s)),n.push(t)}const o=()=>`'${r.join("', '")}'`,a=()=>`'${n.join("', '")}'`,l="string"==typeof e.key?t=>t[e.key]:e.key;return t=>{if(e.base&&!p(e.base,t))return t;if(null==t)return t;const r=l(t)||e.defaultKeyValue,n=i[r];if(!n)return s().error("Accessor#set",`Invalid property value, value needs to be one of ${o()}, or a plain object that can autocast (having .type = ${a()})`),null;if(!p(e.typeMap[r],t))return t;if("string"==typeof e.key&&!u(t)){const i={};for(const r in t)r!==e.key&&(i[r]=t[r]);return n(i)}return n(t)}}class I{}const C={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function k(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function N(e){switch(e.type){case"native":return _(e.value);case"array":return b(N(e.value));case"one-of":return function(e){let t=null;return(i,r)=>O(i,e)?i:(null==t&&(t=L(e)),s().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),r&&(r.valid=!1),null)}(e);default:return null}}function L(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case I:return"integer";case Date:return"date";default:return g(e.value)}case"array":return`array of ${L(e.value)}`;case"one-of":{const t=e.values.map((e=>L(e)));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function O(e,t){if(null==e)return!0;switch(t.type){case"native":switch(t.value){case Number:case I:return"number"==typeof e;case Boolean:return"boolean"==typeof e;case String:return"string"==typeof e}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some((e=>!O(e,t.value)));case"one-of":return t.values.some((t=>O(e,t)))}}},12945:(e,t,i)=>{"use strict";i.d(t,{xF:()=>h,N5:()=>u,k4:()=>p,qk:()=>g});var r=i(8636),n=i(9283);function s(e){if(e.json||(e.json={}),a(e.json),l(e.json),o(e.json),e.json.origins)for(const t in e.json.origins)a(e.json.origins[t]),l(e.json.origins[t]),o(e.json.origins[t]);return!0}function o(e){e.name&&(e.read&&"object"==typeof e.read?void 0===e.read.source&&(e.read.source=e.name):e.read={source:e.name},e.write&&"object"==typeof e.write?void 0===e.write.target&&(e.write.target=e.name):e.write={target:e.name})}function a(e){"boolean"==typeof e.read?e.read={enabled:e.read}:"function"==typeof e.read?e.read={enabled:!0,reader:e.read}:e.read&&"object"==typeof e.read&&void 0===e.read.enabled&&(e.read.enabled=!0)}function l(e){"boolean"==typeof e.write?e.write={enabled:e.write}:"function"==typeof e.write?e.write={enabled:!0,writer:e.write}:e.write&&"object"==typeof e.write&&void 0===e.write.enabled&&(e.write.enabled=!0)}var c=i(18051);function h(e,t){return d(e,"any",t?.origin)}function u(e,t){return d(e,"read",t?.origin)}function p(e,t){return d(e,"write",t?.origin)}function d(e,t,i){let r=e?.json;if(r?.origins&&i){let e;e="link-chart"===i?r.origins[i]&&("any"===t||t in r.origins[i])?r.origins[i]:r.origins["web-map"]:r.origins[i],e&&("any"===t||t in e)&&(r=e)}return r}function f(e){return e.type?y(e):m(e)}function y(e){if(!e.type)return;let t=0,i=e.type;for(;Array.isArray(i)&&!(0,r.EK)(i);)i=i[0],t++;return{type:i,ndimArray:t}}function m(e){if(!e.types)return;let t=0,i=e.types;for(;Array.isArray(i);)i=i[0],t++;return{types:i,ndimArray:t}}function g(e){s(e)&&(function(e){if(e.json&&e.json.origins){const t=e.json.origins,i={"web-document":["web-scene","web-map"]};for(const e in i)if(t[e]){const r=t[e];i[e].forEach((e=>{t[e]=r})),delete t[e]}}}(e),function(e){const t=function(e){return e.json.types?m(e.json):e.type?y(e):m(e)}(e);if(e.json.origins)for(const i in e.json.origins){const r=e.json.origins[i],s=r.types?f(r):t;(0,n.v)(s,r,!1),r.types&&!r.write&&e.json.write&&e.json.write.enabled&&(r.write={...e.json.write}),(0,c.v)(s,r)}(0,n.v)(t,e.json,!0),(0,c.v)(t,e.json)}(e))}},9283:(e,t,i)=>{"use strict";i.d(t,{C:()=>h,v:()=>c});var r=i(80861),n=i(21750),s=i(97629),o=i(88135),a=i(56360);const l=()=>r.A.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function c(e,t,i){e&&(!i&&!t.read||t.read?.reader||!1===t.read?.enabled||function(e){return"types"in e?m(e.types):y(e.type)}(e)&&(0,n.sM)("read.reader",h(e),t))}function h(e){const t=e.ndimArray??0;if(t>1)return function(e){const t=u(e),i=p.bind(null,t),r=e.ndimArray??0;return(e,t,n)=>{if(null==e)return e;e=i(e,n,r);let s=r,o=e;for(;s>0&&Array.isArray(o);)s--,o=o[0];if(void 0!==o)for(let t=0;t<s;t++)e=[e];return e}}(e);if(1===t)return d(e);if("type"in e&&f(e.type)){const t=e.type.prototype?.itemType?.Type,i=d("function"==typeof t?{type:t}:{types:t});return(t,r,n)=>{const s=i(t,r,n);return s?new e.type(s):s}}return u(e)}function u(e){return"type"in e?function(e){return e.prototype.read?(t,i,r)=>{if(null==t)return t;const n=typeof t;if("object"!==n)return void l().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${n}'`);const s=new e;return s.read(t,r),s}:e.fromJSON}(e.type):function(e){let t=null;const i=e.errorContext??"type",r=e.validate;return(n,a,c)=>{if(null==n)return n;const h=typeof n;if("object"!==h)return void l().error(`Expected JSON value of type 'object' to deserialize, but got '${h}'`);t||(t=function(e){const t={};for(const i in e.typeMap){const r=e.typeMap[i],n=(0,o.tD)(r.prototype);if("function"==typeof e.key)continue;const s=n[e.key];if(!s)continue;s.json?.type&&Array.isArray(s.json.type)&&1===s.json.type.length&&"string"==typeof s.json.type[0]&&(t[s.json.type[0]]=r);const a=s.json?.write;if(!a?.writer){t[i]=r;continue}const l=a.target,c="string"==typeof l?l:e.key,h={};a.writer(i,h,c),h[c]&&(t[h[c]]=r)}return t}(e));const u=e.key;if("string"!=typeof u)return;const p=n[u],d=p?t[p]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!d){const e=`Type '${p||"unknown"}' is not supported`;return c?.messages&&n&&c.messages.push(new s.A(`${i}:unsupported`,e,{definition:n,context:c})),void l().error(e)}const f=new d;return f.read(n,c),r?r(f):f}}(e.types)}function p(e,t,i,r){return 0!==r&&Array.isArray(t)?t.map((t=>p(e,t,i,r-1))):e(t,void 0,i)}function d(e){const t=u(e);return(e,i,r)=>{if(null==e)return e;if(Array.isArray(e)){const i=[];for(const n of e){const e=t(n,void 0,r);void 0!==e&&i.push(e)}return i}const n=t(e,void 0,r);return void 0!==n?[n]:void 0}}function f(e){if(!(0,a.P)(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&("function"==typeof t.Type?y(t.Type):m(t.Type))}function y(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||f(e))}function m(e){for(const t in e.typeMap)if(!y(e.typeMap[t]))return!1;return!0}},56360:(e,t,i)=>{"use strict";function r(e){return!!e&&e.prototype?.declaredClass&&0===e.prototype.declaredClass.indexOf("esri.core.Collection")}i.d(t,{P:()=>r})},18051:(e,t,i)=>{"use strict";i.d(t,{B:()=>u,v:()=>a});var r=i(62991),n=i(80861),s=i(21750),o=i(56360);function a(e,t){if(!t.write||t.write.writer||!1===t.write.enabled&&!t.write.overridePolicy)return;const i=e?.ndimArray??0;e&&(1===i||"type"in e&&(0,o.P)(e.type))?t.write.writer=p:i>1?t.write.writer=function(e){return(t,i,r,n)=>{let o;if(null===t)o=null;else{o=d(t,n,e);let i=e,r=o;for(;i>0&&Array.isArray(r);)i--,r=r[0];if(void 0!==r)for(let e=0;e<i;e++)o=[o]}(0,s.sM)(r,o,i)}}(i):t.types?Array.isArray(t.types)?t.write.writer=function(e){return(t,i,r,n)=>t&&Array.isArray(t)?c(t.filter((t=>l(t,e,n))),i,r,n):c(t,i,r,n)}(t.types[0]):t.write.writer=function(e){return(t,i,r,n)=>t?l(t,e,n)?c(t,i,r,n):void 0:c(t,i,r,n)}(t.types):t.write.writer=c}function l(e,t,i){for(const i in t.typeMap)if(e instanceof t.typeMap[i])return!0;if(i?.messages){const s=t.errorContext??"type",o=`Values of type '${("function"!=typeof t.key?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&e&&i.messages.push(new r.A(`${s}:unsupported`,o,{definition:e,context:i})),n.A.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(o)}return!1}function c(e,t,i,r){(0,s.sM)(i,h(e,r),t)}function h(e,t){return e&&"function"==typeof e.write?e.write({},t):e&&"function"==typeof e.toJSON?e.toJSON():"number"==typeof e?u(e):e}function u(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function p(e,t,i,r){let n;null===e?n=null:e&&"function"==typeof e.map?(n=e.map((e=>h(e,r))),"function"==typeof n.toArray&&(n=n.toArray())):n=[h(e,r)],(0,s.sM)(i,n,t)}function d(e,t,i){return 0!==i&&Array.isArray(e)?e.map((e=>d(e,t,i-1))):h(e,t)}},44212:(e,t,i)=>{"use strict";i.d(t,{Jt:()=>a,RP:()=>o,t2:()=>l});var r=i(66361);function n(e,t){const i="?"===e[e.length-1]?e.slice(0,-1):e;if(null!=t.getItemAt||Array.isArray(t)){const e=parseInt(i,10);if(!isNaN(e))return Array.isArray(t)?t[e]:t.at(e)}const n=(0,r.oY)(t);return(0,r.yh)(n,i)?n.get(i):t[i]}function s(e,t,i){if(null==e)return e;const r=n(t[i],e);return!r&&i<t.length-1?void 0:i===t.length-1?r:s(r,t,i+1)}function o(e,t,i=0){return"string"!=typeof t||t.includes(".")?s(e,(0,r.AH)(t),i):n(t,e)}function a(e,t){return o(e,t)}function l(e,t){return void 0!==o(t,e)}},40634:(e,t,i)=>{"use strict";var r;i.d(t,{v:()=>r}),function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED",e[e.DESTROYED=3]="DESTROYED"}(r||(r={}))},63910:(e,t,i)=>{"use strict";i.d(t,{K:()=>r});const r=["operational-layers","basemap","ground"]},88135:(e,t,i)=>{"use strict";i.d(t,{CX:()=>a,tD:()=>s,z4:()=>o});var r=i(15565),n=i(66361);function s(e){let t=e.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!i){t=Object.create(t);for(const e in t)t[e]=(0,r.o8)(t[e]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function o(e,t){const i=s(e);let r=i[t];return r||(r=i[t]={}),r}function a(e,t){return(0,n.h1)(e,t,c)}const l=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function c(e){return l.test(e)?"replace":"merge"}},41446:(e,t,i)=>{"use strict";i.d(t,{L:()=>h,t:()=>u});var r=i(44212),n=i(66361),s=i(12945);function o(e,t,i){if(!e?.read||!1===e.read.enabled||!e.read.source)return!1;const n=e.read.source;if("string"==typeof n){if(n===t)return!0;if(n.includes(".")&&0===n.indexOf(t)&&(0,r.t2)(n,i))return!0}else for(const e of n){if(e===t)return!0;if(e.includes(".")&&0===e.indexOf(t)&&(0,r.t2)(e,i))return!0}return!1}function a(e,t,i,r,n){let a=(0,s.N5)(t[i],n);(function(e){return e&&(!e.read||!1!==e.read.enabled&&!e.read.source)})(a)&&(e[i]=!0);for(const l of Object.getOwnPropertyNames(t))a=(0,s.N5)(t[l],n),o(a,i,r)&&(e[l]=!0)}function l(e,t,i,r){const n=i.metadata,o=(0,s.xF)(n[t],r),a=o?.default;if(void 0===a)return;const l="function"==typeof a?a.call(e,t,r):a;void 0!==l&&i.set(t,l)}const c={origin:"service"};function h(e,t,i=c){if(!t||"object"!=typeof t)return;const o=(0,n.oY)(e),h=o.metadata,u={};for(const e of Object.getOwnPropertyNames(t))a(u,h,e,t,i);o.setDefaultOrigin(i.origin);for(const n of Object.getOwnPropertyNames(u)){const a=(0,s.N5)(h[n],i).read,l=a?.source;let c;c=l&&"string"==typeof l?(0,r.RP)(t,l):t[n],a?.reader&&(c=a.reader.call(e,c,t,i)),void 0!==c&&o.set(n,c)}if(!i||!i.ignoreDefaults){o.setDefaultOrigin("defaults");for(const t of Object.getOwnPropertyNames(h))u[t]||l(e,t,o,i)}o.setDefaultOrigin("user")}function u(e,t,i,r=c){const n={...r,messages:[]};i(n),n.messages?.forEach((t=>{"warning"!==t.type||e.loaded?r?.messages&&r.messages.push(t):e.loadWarnings.push(t)}))}},6864:(e,t,i)=>{"use strict";i.d(t,{h:()=>o});var r=i(62991),n=i(6273),s=(i(80861),i(44212));function o(e,t,i){if(e&&t)if("object"==typeof t)for(const i of Object.getOwnPropertyNames(t))o(e,i,t[i]);else{if(t.includes(".")){const r=t.split("."),n=r.splice(-1,1)[0];return void o((0,s.Jt)(e,r),n,i)}const a=e.__accessor__;null!=a&&function(e,t){if((0,n.A)("esri-unknown-property-errors")&&!function(e,t){return null!=t.metadata[e]}(e,t))throw new r.A("set:unknown-property",function(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}(e,t))}(t,a),e[t]=i}}},99595:(e,t,i)=>{"use strict";i.d(t,{F_:()=>d,Xr:()=>_,a:()=>p,fE:()=>g,gc:()=>c}),i(6273);var r=i(80861),n=i(66361),s=i(49095);const o={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},a=[];let l=o;function c(e){l.onObservableAccessed(e)}let h=!1,u=!1;function p(e,t,i){if(h)return f(e,t,i);y(e);const r=t.call(i);return m(),r}function d(e,t){return p(o,e,t)}function f(e,t,i){const n=h;h=!0,y(e);let s=null;try{s=t.call(i)}catch(e){u&&r.A.getLogger("esri.core.accessorSupport.tracking").error(e)}return m(),h=n,s}function y(e){l=e,a.push(e)}function m(){const e=a.length;if(e>1){const t=a.pop();l=a[e-2],t.onTrackingEnd()}else if(1===e){const e=a.pop();l=o,e.onTrackingEnd()}else l=o}function g(e,t){if(t.flags&s.i.DepTrackingInitialized)return;const i=u;u=!1,t.flags&s.i.AutoTracked?f(t,t.metadata.get,e):_(e,t),u=i}const v=[];function _(e,t){t.flags&s.i.ExplicitlyTracking||(t.flags|=s.i.ExplicitlyTracking,f(t,(()=>{const i=t.metadata.dependsOn||v;for(const t of i)if("string"!=typeof t||t.includes(".")){const i=(0,n.AH)(t);for(let t=0,r=e;t<i.length&&null!=r&&"object"==typeof r;++t)r=b(r,i[t],t!==i.length-1)}else b(e,t,!1)})),t.flags&=~s.i.ExplicitlyTracking)}function b(e,t,i){const r="?"===t[t.length-1]?t.slice(0,-1):t;if(null!=e.getItemAt||Array.isArray(e)){const t=parseInt(r,10);if(!isNaN(t))return Array.isArray(e)?e[t]:e.at(t)}const s=(0,n.oY)(e);if(s){const t=s.propertiesByName.get(r);t&&(c(t),g(e,t))}return i?e[r]:void 0}},89370:(e,t,i)=>{"use strict";i.d(t,{Df:()=>c,fm:()=>h,mJ:()=>l});var r=i(70214),n=i(99595),s=i(52140);let o=!1;const a=[];function l(e,t){let i=new s.r((function r(){if(!i||l)return;if(o)return void u(r);const s=a;i.clear(),o=!0,l=!0,a=(0,n.a)(i,e),l=!1,o=!1,t(a,s),p()})),a=null,l=!1;return l=!0,a=(0,n.a)(i,e),l=!1,(0,r.hA)((function(){i&&(i.destroy(),i=null,a=null)}))}function c(e,t){let i=new s.r((function(){t(o,a)})),o=null;function a(){return i?(i.clear(),o=(0,n.a)(i,e),o):null}return a(),(0,r.hA)((function(){i&&(i.destroy(),i=null),o=null}))}function h(e){let t=new s.r((function r(){t&&!i&&(o?u(r):(t.clear(),o=!0,i=!0,(0,n.a)(t,e),i=!1,o=!1,p()))})),i=!1;return i=!0,(0,n.a)(t,e),i=!1,(0,r.hA)((function(){t&&(t.destroy(),t=null)}))}function u(e){a.includes(e)||a.unshift(e)}function p(){for(;a.length;)a.pop()()}},49095:(e,t,i)=>{"use strict";var r;i.d(t,{i:()=>r}),function(e){e[e.Dirty=1]="Dirty",e[e.Overridden=2]="Overridden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"}(r||(r={}))},29745:(e,t,i)=>{"use strict";i.d(t,{I:()=>n});var r=i(59823);class n extends r.T{notify(){const e=this._observers;if(e&&e.length>0){const t=e.slice();for(const e of t)e.onInvalidated(),e.onCommitted()}}}},52140:(e,t,i)=>{"use strict";i.d(t,{r:()=>r});class r{constructor(e){this._accessed=[],this._handles=[],this._observerObject=new n(e),s.register(this,new WeakRef(this._observerObject),this)}destroy(){s.unregister(this._observerObject),this._accessed.length=0,this._observerObject?.destroy(),this.clear()}onObservableAccessed(e){const t=this._accessed;t.includes(e)||t.push(e)}onTrackingEnd(){const e=this._handles,t=this._accessed,i=this._observerObject;for(let r=0;r<t.length;++r)e.push(t[r].observe(i));t.length=0}clear(){const e=this._handles;for(let t=0;t<e.length;++t)e[t].remove();e.length=0}}class n{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(1===e)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=o}}const s=new FinalizationRegistry((e=>{e.deref()?.destroy()}));function o(){}},66361:(e,t,i)=>{"use strict";i.d(t,{AH:()=>c,h1:()=>a,oY:()=>s,qg:()=>u,yh:()=>o});var r=i(70214),n=i(15565);function s(e){return e.__accessor__??null}function o(e,t){return null!=e?.metadata?.[t]}function a(e,t,i){return l(e,t,i?{policy:i,path:""}:null)}function l(e,t,i){return t?Object.keys(t).reduce(((e,r)=>{const s=r;let o=null,a="merge";if(i&&(o=i.path?`${i.path}.${r}`:r,a=i.policy(o)),"replace"===a)return e[s]=t[s],e;if("replace-arrays"===a&&Array.isArray(e[s]))return e[s]=t[s],e;if(void 0===e[s])return e[s]=(0,n.o8)(t[s]),e;let c=e[s],h=t[s];if(c===h)return e;if(Array.isArray(h)||Array.isArray(e))c=c?Array.isArray(c)?e[s]=c.concat():e[s]=[c]:e[s]=[],h&&(Array.isArray(h)||(h=[h]),h.forEach((e=>{c.includes(e)||c.push(e)})));else if(h&&"object"==typeof h)if(i){const t=i.path;i.path=o,e[s]=l(c,h,i),i.path=t}else e[s]=l(c,h,null);else e.hasOwnProperty(r)&&!t.hasOwnProperty(r)||(e[s]=h);return e}),e||{}):e}function c(e){return Array.isArray(e)?e:e.split(".")}function h(e){return e.includes(",")?e.split(",").map((e=>e.trim())):[e.trim()]}function u(e,t,i,n){const s=function(e){if(Array.isArray(e)){const t=[];for(const i of e)t.push(...h(i));return t}return h(e)}(t);if(1!==s.length){const t=s.map((t=>n(e,t,i)));return(0,r.vE)(t)}return n(e,s[0],i)}},10319:(e,t,i)=>{"use strict";i.d(t,{Cn:()=>I,Gs:()=>C,iS:()=>M,rs:()=>E,wB:()=>x});var r,n,s=i(50398),o=i(70214),a=i(15565),l=i(47917),c=i(9987),h=i(98592),u=i(78851),p=i(44212),d=i(40634),f=i(89370),y=i(66361);(n=r||(r={}))[n.Untracked=0]="Untracked",n[n.Tracked=1]="Tracked";class m{constructor(){this.uid=(0,u.c)(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,t,i,n,s){return this.pool.acquire(r.Untracked,e,t,i,n,s,a.aI)}static acquireTracked(e,t,i,n){return this.pool.acquire(r.Tracked,e,t,i,null,null,n)}notify(e,t){this.type===r.Untracked?this.callback.call(this.target,e,t,this.path,this.target):this.callback.call(null,e,t,void 0,void 0)}acquire(e,t,i,r,n,s,o){this.uid=(0,u.c)(),this.removed=!1,this.type=e,this.oldValue=t,this.callback=i,this.getValue=r,this.target=n,this.path=s,this.equals=o}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=(0,u.c)(),this.removed=!0}}m.pool=new l.P(m);const g=new s.A,v=new Set;let _;function b(e){v.delete(e),v.add(e),_||(_=(0,c._)(T))}function w(e){if(e.removed)return;const t=e.oldValue,i=e.getValue();e.equals(t,i)||(e.oldValue=i,e.notify(i,t))}function M(e){for(const t of v.values())t.target===e&&(t.removed=!0)}function T(){let e=10;for(;_&&e--;){_=null;const e=S(),t=g.acquire();for(const i of e){const e=i.uid;w(i),e===i.uid&&i.removed&&t.push(i)}for(const e of v)e.removed&&(t.push(e),v.delete(e));for(const e of t)m.pool.release(e);g.release(t),g.release(e),A.forEach((e=>e()))}}function S(){const e=g.acquire();e.length=v.size;let t=0;for(const i of v)e[t]=i,++t;return v.clear(),e}const A=new Set;function E(e){return A.add(e),(0,o.hA)((()=>A.delete(e)))}function x(e,t,i,r=!1){return e.__accessor__&&e.__accessor__.lifecycle!==d.v.DESTROYED?r?function(e,t,i){const r=(0,y.qg)(e,t,i,((e,t,i)=>{let n=!1;return(0,f.mJ)((()=>(0,p.RP)(e,t)),((s,o)=>{e.__accessor__.lifecycle!==d.v.DESTROYED?n||(n=!0,(0,a.aI)(o,s)||i.call(e,s,o,t,e),n=!1):r.remove()}))}));return r}(e,t,i):function(e,t,i){let r=(0,y.qg)(e,t,i,((e,t,i)=>{let n,s,a=(0,f.Df)((()=>(0,p.RP)(e,t)),((o,a)=>{e.__accessor__?.lifecycle===d.v.DESTROYED||n&&n.uid!==s?r.remove():(n||(n=m.acquireUntracked(o,i,a,e,t),s=n.uid),b(n))}));return(0,o.hA)((()=>{a.remove(),n&&(n.uid!==s||n.removed||(n.removed=!0,b(n)),n=null),r=a=null}))}));return r}(e,t,i):(0,o.hA)()}function I(e,t,i=!1,r=a.gh){return i?function(e,t,i){let r=!1;return(0,f.mJ)(e,((e,n)=>{r||(r=!0,i(n,e)||t(e,n),r=!1)}))}(e,t,r):function(e,t,i){let r,n,s=(0,f.Df)(e,((e,o)=>{r&&r.uid!==n?s.remove():(r||(r=m.acquireTracked(e,t,o,i),n=r.uid),b(r))}));return(0,o.hA)((()=>{s.remove(),r&&(r.uid!==n||r.removed||(r.removed=!0,b(r)),r=null),s=null}))}(e,t,r)}function C(e){return(0,h.bw)(v,(t=>t.oldValue===e))}},34467:(e,t,i)=>{"use strict";i.d(t,{M:()=>d,R:()=>p});var r=i(3223),n=i(62991),s=i(80861),o=i(44212),a=i(91101),l=i(66361),c=i(12945);function h(e,t,i,r,n){const s={};return t.write?.writer?.call(e,r,s,i,n),s}function u(e,t,i,l,c,h){if(!l?.write)return!1;const u=(0,o.Jt)(e,i);if(!c&&l.write.overridePolicy){const t=l.write.overridePolicy.call(e,u,i,h??void 0);void 0!==t&&(c=t)}if(c||(c=l.write),!c||!1===c.enabled)return!1;if(c.layerContainerTypes&&h?.layerContainerType&&!c.layerContainerTypes.includes(h.layerContainerType))return!1;if((null===u&&!c.allowNull&&!c.writerEnsuresNonNull||void 0===u)&&c.isRequired){const t=new n.A("web-document-write:property-required",`Missing value for required property '${i}' on '${e.declaredClass}'`,{propertyName:i,target:e});return t&&h?.messages?h.messages.push(t):t&&!h&&s.A.getLogger("esri.core.accessorSupport.write").error(t.name,t.message),!1}return!(void 0===u||null===u&&!c.allowNull&&!c.writerEnsuresNonNull||!(c.alwaysWriteDefaults||t.store.multipleOriginsSupported&&t.store.originOf(i)!==a.Gr.DEFAULTS)&&function(e,t,i,n,s){const o=n.default;if(void 0===o)return!1;if(null!=n.defaultEquals)return n.defaultEquals(s);if("function"==typeof o){if(Array.isArray(s)){const n=o.call(e,t,i??void 0);return(0,r.aI)(n,s)}return!1}return o===s}(e,i,h,l,u)||!c.ignoreOrigin&&h?.origin&&t.store.multipleOriginsSupported&&t.store.originOf(i)<(0,a.aB)(h.origin))}function p(e,t,i,r){const n=(0,l.oY)(e),s=n.metadata,o=(0,c.k4)(s[t],r);return!!o&&u(e,n,t,o,i,r)}function d(e,t,i){if(e&&"function"==typeof e.toJSON&&(!e.toJSON.isDefaultToJSON||!e.write))return(0,l.h1)(t,e.toJSON(i));const r=(0,l.oY)(e),n=r.metadata;for(const s in n){const p=(0,c.k4)(n[s],i);if(!u(e,r,s,p,void 0,i))continue;const d=(0,o.Jt)(e,s),f=h(e,p,p.write&&"string"==typeof p.write.target?p.write.target:s,d,i);Object.keys(f).length>0&&(t=(0,l.h1)(t,f),i?.resources?.pendingOperations?.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then((()=>(0,l.h1)(t,f,(()=>"replace-arrays"))))),i?.writtenProperties&&i.writtenProperties.push({target:e,propName:s,oldOrigin:(0,a.in)(r.store.originOf(s)),newOrigin:i.origin}))}return t}},3223:(e,t,i)=>{"use strict";i.d(t,{$U:()=>o,$i:()=>M,Am:()=>l,He:()=>s,Ji:()=>n,Ru:()=>S,TF:()=>T,Uk:()=>a,Xj:()=>p,Xy:()=>_,aI:()=>c,dY:()=>f,iv:()=>u,mW:()=>w,qh:()=>v,tR:()=>A,vW:()=>m,y1:()=>y,yo:()=>h});var r=i(67498);const n=1.5,s=1/n,o=.5;function a(e,t){for(let i=e.length-1;i>=0;i--){const r=e[i];if(t(r))return r}}function l(e,t){return t?e.filter(((e,i,r)=>r.findIndex(t.bind(null,e))===i)):Array.from(new Set(e))}function c(e,t,i){if(null==e&&null==t)return!0;if(null==e||null==t||e.length!==t.length)return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function h(e,t){let i=e.length!==t.length;i&&(e.length=t.length);for(let r=0;r<t.length;++r)e[r]!==t[r]&&(e[r]=t[r],i=!0);return i}function u(e,t,i){let r,n;return i?(r=t.filter((t=>!e.some((e=>i(e,t))))),n=e.filter((e=>!t.some((t=>i(t,e)))))):(r=t.filter((t=>!e.includes(t))),n=e.filter((e=>!t.includes(e)))),{added:r,removed:n}}function p(e){return e&&"number"==typeof e.length}const d=!!Array.prototype.fill;function f(e,t){if(d)return new Array(e).fill(t);const i=new Array(e);for(let r=0;r<e;r++)i[r]=t;return i}function y(e,t){void 0===t&&(t=e,e=0);const i=new Array(t-e);for(let r=e;r<t;r++)i[r-e]=r;return i}class m{constructor(){this.last=0}}const g=new m;function v(e,t,i,r){r=r||g;const n=Math.max(0,r.last-10);for(let s=n;s<i;++s)if(e[s]===t)return r.last=s,s;const s=Math.min(n,i);for(let i=0;i<s;++i)if(e[i]===t)return r.last=i,i;return-1}function _(e,t,i,r){const n=i??e.length,s=v(e,t,n,r);if(-1!==s)return e[s]=e[n-1],null==i&&e.pop(),t}const b=new Set;function w(e,t,i=e.length,r=t.length,n,s){if(0===r||0===i)return i;b.clear();for(let e=0;e<r;++e)b.add(t[e]);n=n||g;const o=Math.max(0,n.last-10);for(let t=o;t<i;++t)if(b.has(e[t])&&(s?.push(e[t]),b.delete(e[t]),e[t]=e[i-1],--i,--t,0===b.size||0===i))return b.clear(),i;for(let t=0;t<o;++t)if(b.has(e[t])&&(s?.push(e[t]),b.delete(e[t]),e[t]=e[i-1],--i,--t,0===b.size||0===i))return b.clear(),i;return b.clear(),i}function M(e,t){let i=0;for(let r=0;r<e.length;++r){const n=e[r];t(n,r)&&(e[i]=n,i++)}e.length=i}function T(e,t){const i=e.indexOf(t);return-1!==i?(e.splice(i,1),t):null}function S(e,t){return null!=e}new r.A;const A=[]},3132:(e,t,i)=>{"use strict";i.d(t,{DZ:()=>f,Ke:()=>d,Tj:()=>h,UT:()=>y,jJ:()=>c});var r=i(82392),n=i(73783),s=i(57725),o=i(37623),a=i(81482),l=i(26325);function c(e,t,i){return(0,o.Lx)(e.map(((e,r)=>t.apply(i,[e,r]))))}async function h(e,t,i){return(await(0,o.Lx)(e.map(((e,r)=>t.apply(i,[e,r]))))).map((e=>e.value))}function u(e){return{ok:!0,value:e}}function p(e){return{ok:!1,error:e}}async function d(e){if(null==e)return{ok:!1,error:new Error("no promise provided")};try{return u(await e)}catch(e){return p(e)}}async function f(e){try{return u(await e)}catch(e){return(0,o.QP)(e),p(e)}}function y(e,t){return new m(e,t)}let m=class extends n.A{get value(){return null!=(e=this._result)&&!0===e.ok?e.value:null;var e}get error(){return null!=(e=this._result)&&!1===e.ok?e.error:null;var e}get finished(){return null!=this._result}constructor(e,t){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=(0,s.DC)(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:i}=this._abortController;this.promise=e(i),this.promise.then((e=>{this._result=u(e),this._cleanup()}),(e=>{this._result=p(e),this._cleanup()})),this._abortHandle=(0,o.u7)(t,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=(0,s.xt)(this._abortHandle),this._abortController=null}};(0,r._)([(0,a.MZ)()],m.prototype,"value",null),(0,r._)([(0,a.MZ)()],m.prototype,"error",null),(0,r._)([(0,a.MZ)()],m.prototype,"finished",null),(0,r._)([(0,a.MZ)()],m.prototype,"promise",void 0),(0,r._)([(0,a.MZ)()],m.prototype,"_result",void 0),m=(0,r._)([(0,l.$)("esri.core.asyncUtils.ReactiveTask")],m)},88188:(e,t,i)=>{"use strict";function r(e){return 32+e.length}function n(){return 16}function s(e){if(!e)return 0;let t=c;for(const i in e)if(e.hasOwnProperty(i)){const n=e[i];switch(typeof n){case"string":t+=r(n);break;case"number":t+=16;break;case"boolean":t+=4}}return t}function o(e){if(!e)return 0;if(Array.isArray(e))return function(e){const t=e.length;if(0===t||"number"==typeof e[0])return 32+8*t;let i=h;for(let r=0;r<t;r++)i+=a(e[r]);return i}(e);let t=c;for(const i in e)e.hasOwnProperty(i)&&(t+=a(e[i]));return t}function a(e){switch(typeof e){case"object":return o(e);case"string":return r(e);case"number":return 16;case"boolean":return 4;default:return 8}}function l(e,t){return h+e.length*t}i.d(t,{eY:()=>s,f3:()=>n,iL:()=>o,zd:()=>l});const c=32,h=16},84807:(e,t,i)=>{"use strict";i.d(t,{p:()=>n});var r=i(70214);const n=(s=globalThis,{setTimeout:(e,t)=>{const i=s.setTimeout(e,t);return(0,r.hA)((()=>s.clearTimeout(i)))}});var s},48:(e,t,i)=>{"use strict";i.d(t,{H:()=>s,V:()=>n});var r=i(58842);function n(e,t,i=r.A){return t||(t=new i),t===e||(t.removeAll(),(n=e)&&(Array.isArray(n)||"items"in n&&Array.isArray(n.items))?t.addMany(e):e&&t.add(e)),t;var n}function s(e){return e}},60861:(e,t,i)=>{"use strict";i.d(t,{$:()=>m,IB:()=>s,N2:()=>g,QP:()=>x,RH:()=>_,Vl:()=>E,Ws:()=>b,ZD:()=>v,_L:()=>A,bJ:()=>T,e$:()=>S,f6:()=>C,pW:()=>w,pf:()=>I});var r=i(93814),n=(i(74772),i(76982));function s(e){return"r"in e&&"g"in e&&"b"in e}function o(e){return"h"in e&&"s"in e&&"v"in e}function a(e){return"l"in e&&"a"in e&&"b"in e}function l(e){return"l"in e&&"c"in e&&"h"in e}const c=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],h=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function u(e,t){const i=[];let r,n;if(e[0].length!==t.length)throw new Error("dimensions do not match");const s=e.length,o=e[0].length;let a=0;for(r=0;r<s;r++){for(a=0,n=0;n<o;n++)a+=e[r][n]*t[n];i.push(a)}return i}function p(e){const t=[e.r/255,e.g/255,e.b/255].map((e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4)),i=u(c,t);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function d(e){const t=u(h,[e.x/100,e.y/100,e.z/100]).map((e=>{const t=e<=.0031308?12.92*e:1.055*e**(1/2.4)-.055;return Math.min(1,Math.max(t,0))}));return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function f(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map((e=>e>(6/29)**3?e**(1/3):1/3*(29/6)**2*e+4/29));return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function y(e){const t=e.l,i=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map((e=>e>6/29?e**3:3*(6/29)**2*(e-4/29)));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function m(e){return s(e)?e:l(e)?function(e){return d(y(function(e){const t=e.l,i=e.c,r=e.h;return{l:t,a:i*Math.cos(r),b:i*Math.sin(r)}}(e)))}(e):a(e)?function(e){return d(y(e))}(e):function(e){return"x"in e&&"y"in e&&"z"in e}(e)?d(e):o(e)?function(e){const t=(e.h+360)%360/60,i=e.s/100,r=e.v/100*255,n=r*i,s=n*(1-Math.abs(t%2-1));let o;switch(Math.floor(t)){case 0:o={r:n,g:s,b:0};break;case 1:o={r:s,g:n,b:0};break;case 2:o={r:0,g:n,b:s};break;case 3:o={r:0,g:s,b:n};break;case 4:o={r:s,g:0,b:n};break;case 5:case 6:o={r:n,g:0,b:s};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+r-n),o.g=Math.round(o.g+r-n),o.b=Math.round(o.b+r-n),o}(e):e}function g(e){return o(e)?e:function(e){const t=e.r,i=e.g,r=e.b,n=Math.max(t,i,r),s=n-Math.min(t,i,r);let o=n,a=0===s?0:n===t?(i-r)/s%6:n===i?(r-t)/s+2:(t-i)/s+4,l=0===s?0:s/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}(m(e))}function v(e){return a(e)?e:function(e){return f(p(e))}(m(e))}function _(e){return l(e)?e:function(e){return function(e){const t=e.l,i=e.a,r=e.b,n=Math.sqrt(i*i+r*r);let s=Math.atan2(r,i);return s=s>0?s:s+2*Math.PI,{l:t,c:n,h:s}}(f(p(e)))}(m(e))}function b(e,t){const{r:i,g:n,b:s}=t?.ignoreAlpha?e:function(e){let{r:t,g:i,b:n,a:s}=e;return s<1&&(t=Math.round(s*t+255*(1-s)),i=Math.round(s*i+255*(1-s)),n=Math.round(s*n+255*(1-s))),new r.A({r:t,g:i,b:n})}(e);return.2126*i+.7152*n+.0722*s}var w,M;function T(e,t=w.High){return b(e,{ignoreAlpha:!0})>t?new r.A([0,0,0,e.a]):new r.A([255,255,255,e.a])}function S(e,t){const i=v(e);i.l*=1-t;const r=m(i),n=e.clone();return n.setColor(r),n.a=e.a,n}function A(e,t){const i=e.clone();return i.a*=t,i}function E(e,t){const i=g(e);i.s*=t;const r=m(i),n=e.clone();return n.setColor(r),n.a=e.a,n}function x(e){return r.A.toUnitRGBA(e)}function I(e){return(0,n.fA)(e[0],e[1],e[2],e.length>3?e[3]:1)}function C(e,t){const i=r.A.toUnitRGBA(e);return i[3]*=t,i}(M=w||(w={}))[M.Low=160]="Low",M[M.High=225]="High"},95039:(e,t,i)=>{"use strict";function r(e){}function n(e){return()=>e}i.d(t,{GB:()=>n,Xb:()=>r}),i(6273)},61090:(e,t,i)=>{"use strict";i.d(t,{Lx:()=>a,eO:()=>o,io:()=>l});var r=i(6273);const n=new WeakMap;function s(e,t,i=!1){const r=`🛑 DEPRECATED - ${t}`;if(!i)return void e.warn(r);let s=n.get(e);s||(s=new Set,n.set(e,s)),s.has(t)||(s.add(t),e.warn(r))}function o(e,t,i={}){if((0,r.A)("esri-deprecation-warnings")){const{moduleName:r}=i;l(e,"Function: "+(r?r+"::":"")+t+"()",i)}}function a(e,t,i={}){if((0,r.A)("esri-deprecation-warnings")){const{moduleName:r}=i;l(e,"Property: "+(r?r+"::":"")+t,i)}}function l(e,t,i={}){if((0,r.A)("esri-deprecation-warnings")){const{replacement:r,version:n,see:o,warnOnce:a}=i;let l=t;r&&(l+=`\n\t🛠️ Replacement: ${r}`),n&&(l+=`\n\t⚙️ Version: ${n}`),o&&(l+=`\n\t🔗 See ${o} for more details.`),s(e,l,a)}}},85012:(e,t,i)=>{"use strict";function r(e){return e=e||globalThis.location.hostname,c.some((t=>null!=e?.match(t)))}function n(e,t){return e&&(t=t||globalThis.location.hostname)?null!=t.match(s)||null!=t.match(a)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(o)||null!=t.match(l)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e}i.d(t,{EM:()=>n,b5:()=>r});const s=/^devext.arcgis.com$/,o=/^qaext.arcgis.com$/,a=/^[\w-]*\.mapsdevext.arcgis.com$/,l=/^[\w-]*\.mapsqa.arcgis.com$/,c=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,s,o,/^jsapps.esri.com$/,a,l]},28948:(e,t,i)=>{"use strict";function r(e){return"string"==typeof e?document.getElementById(e):e??null}function n(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function s(e,t){const i=t.parentNode;i&&i.insertBefore(e,t)}function o(e,t){for(;;){const i=e.firstChild;if(!i)break;t.appendChild(i)}}i.d(t,{$H:()=>r,Ie:()=>n,nc:()=>s,yC:()=>o}),Element.prototype.closest},92840:(e,t,i)=>{"use strict";i.d(t,{Oo:()=>a,on:()=>o,wb:()=>n});var r=i(70214);function n(e){return function(e){return null!=e&&"object"==typeof e&&"on"in e&&"function"==typeof e.on}(e)||s(e)}function s(e){return null!=e&&"object"==typeof e&&"addEventListener"in e&&"function"==typeof e.addEventListener}function o(e,t,i){if(!n(e))throw new TypeError("target is not a Evented or EventTarget object");return s(e)?function(e,t,i,n){if(Array.isArray(t)){const s=t.slice();for(const t of s)e.addEventListener(t,i,n);return(0,r.hA)((()=>{for(const t of s)e.removeEventListener(t,i,n)}))}return e.addEventListener(t,i,n),(0,r.hA)((()=>e.removeEventListener(t,i,n)))}(e,t,i):e.on(t,i)}function a(e,t,i){if(!n(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,i);const r=o(e,t,(t=>{r.remove(),i.call(e,t)}));return r}},70214:(e,t,i)=>{"use strict";i.d(t,{DQ:()=>l,a0:()=>s,a2:()=>a,hA:()=>n,vE:()=>o});const r={remove:()=>{}};function n(e){return e?{remove(){e&&(e(),e=void 0)}}:r}function s(e){e.forEach((e=>e?.remove()))}function o(e){return n((()=>s(e)))}function a(e){return n((()=>e()?.remove()))}function l(e){return n(null!=e?()=>e.destroy():void 0)}},6273:(e,t,i)=>{"use strict";let r;function n(e){return"function"==typeof r[e]?r[e]=r[e](globalThis):r[e]}i.d(t,{A:()=>n}),r=globalThis.dojoConfig?.has||globalThis.esriConfig?.has?{...globalThis.dojoConfig?.has,...globalThis.esriConfig?.has}:{},n.add=(e,t,i,s)=>((s||void 0===r[e])&&(r[e]=t),i&&n(e)),n.cache=r,n.add("big-integer-warning-enabled",!0),n.add("esri-deprecation-warnings",!0),n.add("esri-tests-disable-screenshots",!1),n.add("esri-tests-use-full-window",!1),n.add("esri-tests-post-to-influx",!0),(()=>{n.add("host-webworker",void 0!==globalThis.WorkerGlobalScope&&self instanceof globalThis.WorkerGlobalScope);const e="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document;if(n.add("host-browser",e),n.add("host-node","object"==typeof globalThis.process&&globalThis.process.versions?.node&&globalThis.process.versions.v8),n.add("dom",e),n("host-browser")){const e=navigator,t=e.userAgent,i=e.appVersion,r=parseFloat(i);if(n.add("wp",parseFloat(t.split("Windows Phone")[1])||void 0),n.add("msapp",parseFloat(t.split("MSAppHost/")[1])||void 0),n.add("khtml",i.includes("Konqueror")?r:void 0),n.add("edge",parseFloat(t.split("Edge/")[1])||void 0),n.add("opr",parseFloat(t.split("OPR/")[1])||void 0),n.add("webkit",!n("wp")&&!n("edge")&&parseFloat(t.split("WebKit/")[1])||void 0),n.add("chrome",!n("edge")&&!n("opr")&&parseFloat(t.split("Chrome/")[1])||void 0),n.add("android",!n("wp")&&parseFloat(t.split("Android ")[1])||void 0),n.add("safari",!i.includes("Safari")||n("wp")||n("chrome")||n("android")||n("edge")||n("opr")?void 0:parseFloat(i.split("Version/")[1])),n.add("mac",i.includes("Macintosh")),!n("wp")&&/(iPhone|iPod|iPad)/.test(t)){const e=RegExp.$1.replace(/P/,"p"),i=/OS ([\d_]+)/.test(t)?RegExp.$1:"1",r=parseFloat(i.replace(/_/,".").replaceAll("_",""));n.add(e,r),n.add("ios",r)}n("webkit")||(!t.includes("Gecko")||n("wp")||n("khtml")||n("edge")||n.add("mozilla",r),n("mozilla")&&n.add("ff",parseFloat(t.split("Firefox/")[1]||t.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),i=/iPhone/i.test(e);t&&n.add("esri-mobile",t),i&&n.add("esri-iPhone",i),n.add("esri-geolocation",!!navigator.geolocation)}n.add("esri-wasm","WebAssembly"in globalThis),n.add("esri-performance-mode-frames-between-render",20),n.add("esri-force-performance-mode",!1),n.add("esri-shared-array-buffer",(()=>{const e="SharedArrayBuffer"in globalThis,t=!1===globalThis.crossOriginIsolated;return e&&!t})),n.add("wasm-simd",(()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])))),n.add("esri-atomics","Atomics"in globalThis),n.add("esri-workers","Worker"in globalThis),n.add("web-feat:cache","caches"in globalThis),n.add("esri-workers-arraybuffer-transfer",!n("safari")||Number(n("safari"))>=12),n.add("workers-pool-size",8),n.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),n.add("featurelayer-simplify-payload-size-factors",[1,1,4]),n.add("featurelayer-fast-triangulation-enabled",!0),n.add("featurelayer-animation-enabled",!0),n.add("featurelayer-snapshot-enabled",!0),n.add("featurelayer-snapshot-point-min-threshold",8e4),n.add("featurelayer-snapshot-point-max-threshold",4e5),n.add("featurelayer-snapshot-point-coverage",.1),n.add("featurelayer-query-max-depth",4),n.add("featurelayer-query-pausing-enabled",!1),n.add("hittest-2d-mobile-tolerance",3),n.add("hittest-2d-desktop-tolerance",1),n.add("hittest-2d-small-symbol-tolerance",3),n.add("hittest-2d-small-symbol-tolerance-threshold",3),n.add("featurelayer-advanced-symbols",!1),n.add("featurelayer-pbf",!0),n.add("featurelayer-pbf-statistics",!1),n.add("feature-layers-workers",!0),n.add("feature-polyline-generalization-factor",1),n.add("mapview-transitions-duration",200),n.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),n.add("mapserver-pbf-version-support",10.81),n.add("mapservice-popup-identify-max-tolerance",20),n("host-webworker")||n("host-browser")&&(n.add("esri-csp-restrictions",(()=>{try{new Function}catch{return!0}return!1})),n.add("esri-image-decode",(()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then((()=>{n.add("esri-image-decode",!0,!0,!0)})).catch((()=>{n.add("esri-image-decode",!1,!0,!0)}))}return!1})),n.add("esri-url-encodes-apostrophe",(()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")})))})()},73027:(e,t,i)=>{"use strict";i.d(t,{M5:()=>d,eV:()=>u,xR:()=>h});var r=i(38116),n=i(62991),s=i(37623),o=i(19759),a=i(98593);let l=null,c=!0;function h(e,t,i){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(c)try{return new ImageData(e,t)}catch(e){c=!1}return p(e,t,i)}function u(e,t,i,r){if(!t||!i)throw new Error("Cannot construct image data without dimensions");if(c)try{return new ImageData(e,t,i)}catch(e){c=!1}const n=p(t,i,r);return n.data.set(e,0),n}function p(e,t,i){return i||(l||(l=document.createElement("canvas"),l.width=1,l.height=1),i=l),i.getContext("2d").createImageData(e,t)}async function d(e,t){const{arrayBuffer:l,mediaType:c}=await async function(e,t){const i=(0,o.r$)(e);if(i?.isBase64)return{arrayBuffer:(0,a.M)(i.data),mediaType:i.mediaType};const n=await(0,r.A)(e,{responseType:"array-buffer",...t});return{arrayBuffer:n.data,mediaType:n.getHeader?.("Content-Type")??""}}(e,t),h="image/png"===c;if("image/gif"===c){const{isAnimatedGIF:e,parseGif:r}=await i.e(4989).then(i.bind(i,4989));if(e(l))return r(l,t)}if(h){const{isAnimatedPNG:e,parseApng:r}=await i.e(3034).then(i.bind(i,23034));if(e(l))return r(l,t)}return async function(e,t){const i=window.URL.createObjectURL(e);try{const{data:e}=await(0,r.A)(i,{...t,responseType:"image"});return e}catch(e){if(!(0,s.zf)(e))throw new n.A("invalid-image",`Could not fetch requested image at ${i}`);throw e}finally{window.URL.revokeObjectURL(i)}}(new Blob([l],{type:c}),t)}},88938:(e,t,i)=>{"use strict";function r(e){const t=[];return function*(){yield*t;for(const i of e)t.push(i),yield i}}function n(e,t){for(const i of e)if(null!=i&&t(i))return i}function s(e){return null!=e&&"function"==typeof e[Symbol.iterator]}i.d(t,{I6:()=>n,PP:()=>r,xZ:()=>s})},1817:(e,t,i)=>{"use strict";i.d(t,{J:()=>n,O:()=>s});var r=i(21750);class n{constructor(e,t={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=t,this.apiValues=[],this.jsonValues=[],this._apiToJSON=this._invertMap(e),this.apiValues=this._getKeysSorted(this._apiToJSON),this.jsonValues=this._getKeysSorted(this._jsonToAPI),this.read=e=>this.fromJSON(e),this.write=(e,t,i)=>{const n=this.toJSON(e);void 0!==n&&(0,r.sM)(i,n,t)},this.write.isJSONMapWriter=!0}toJSON(e){if(null==e)return null;if(this._apiToJSON.hasOwnProperty(e)){const t=this._apiToJSON[e];return this._options.useNumericKeys?+t:t}return this._options.ignoreUnknown?void 0:e}fromJSON(e){return null!=e&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}_invertMap(e){const t={};for(const i in e)t[e[i]]=i;return t}_getKeysSorted(e){const t=[];for(const i in e)t.push(i);return t.sort(),t}}function s(){return function(e,t){return new n(e,{ignoreUnknown:!0,...t})}}},15565:(e,t,i)=>{"use strict";i.d(t,{Nb:()=>l,TU:()=>a,aI:()=>d,gh:()=>f,o8:()=>o,oy:()=>s});var r=i(3223),n=i(62088);function s(e,t){let i;if(t)for(i in e)e.hasOwnProperty(i)&&(void 0===e[i]?delete e[i]:e[i]instanceof Object&&s(e[i],!0));else for(i in e)e.hasOwnProperty(i)&&void 0===e[i]&&delete e[i];return e}function o(e){if(!e||"object"!=typeof e||"function"==typeof e)return e;const t=p(e);if(null!=t)return t;if(l(e))return e.clone();if(c(e))return e.map(o);if(h(e))return e.clone();const i={};for(const t of Object.getOwnPropertyNames(e))i[t]=o(e[t]);return i}function a(e){if(!e||"object"!=typeof e||"function"==typeof e||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=p(e);if(null!=t)return t;if(c(e)){let t=!0;const i=e.map((e=>{const i=a(e);return null!=e&&null==i&&(t=!1),i}));return t?i:null}if(l(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(!h(e)){const t=new(0,Object.getPrototypeOf(e).constructor);for(const i of Object.getOwnPropertyNames(e)){const r=e[i],n=a(r);if(null!=r&&null==n)return null;t[i]=n}return t}return null}function l(e){return"function"==typeof e.clone}function c(e){return"function"==typeof e.map&&"function"==typeof e.forEach}function h(e){return"function"==typeof e.notifyChange&&"function"==typeof e.watch}function u(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function p(e){if((0,n.dz)(e)||(0,n.mg)(e)||(0,n.UR)(e)||(0,n.IY)(e)||(0,n.jq)(e)||(0,n._G)(e)||(0,n.XJ)(e)||(0,n.vZ)(e)||(0,n.aI)(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[i,r]of e)t.set(i,o(r));return t}if(e instanceof Set){const t=new Set;for(const i of e)t.add(o(i));return t}return null}function d(e,t){return e===t||"number"==typeof e&&isNaN(e)&&"number"==typeof t&&isNaN(t)||"function"==typeof e?.getTime&&"function"==typeof t?.getTime&&e.getTime()===t.getTime()||!1}function f(e,t){return e===t||(null==e||"string"==typeof e?e===t:"number"==typeof e?e===t||"number"==typeof t&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&(0,r.aI)(e,t):e instanceof Set?t instanceof Set&&function(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}(e,t):e instanceof Map?t instanceof Map&&function(e,t){if(e.size!==t.size)return!1;for(const[i,r]of e){const e=t.get(i);if(e!==r||void 0===e&&!t.has(i))return!1}return!0}(e,t):!!u(e)&&u(t)&&function(e,t){if(null===e||null===t)return!1;const i=Object.keys(e);if(null===t||Object.keys(t).length!==i.length)return!1;for(const r of i)if(e[r]!==t[r]||!Object.prototype.hasOwnProperty.call(t,r))return!1;return!0}(e,t))}},68749:(e,t,i)=>{"use strict";function r(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function n(e,t,i,r){const n=t[r],s=t[r+1];e[r]=i[0]*n+i[2]*s+i[4],e[r+1]=i[1]*n+i[3]*s+i[5]}function s(e,t,i,r=0,s=0,o=2){const a=s||t.length/o;for(let s=r;s<a;s++)n(e,t,i,s*o)}i.d(t,{gb:()=>s,vt:()=>r}),Object.freeze(Object.defineProperty({__proto__:null,clone:function(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},create:r,createView:function(e,t){return new Float32Array(e,t,6)},fromValues:function(e,t,i,r,n,s){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=i,o[3]=r,o[4]=n,o[5]=s,o},transform:n,transformMany:s},Symbol.toStringTag,{value:"Module"}))},92374:(e,t,i)=>{"use strict";function r(){return[1,0,0,1,0,0]}function n(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}i.d(t,{o8:()=>n,vt:()=>r,zK:()=>s});const s=[1,0,0,1,0,0];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:n,create:r,createView:function(e,t){return new Float64Array(e,t,6)},fromValues:function(e,t,i,r,n,s){return[e,t,i,r,n,s]}},Symbol.toStringTag,{value:"Module"}))},93446:(e,t,i)=>{"use strict";function r(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function n(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}i.d(t,{o8:()=>n,vt:()=>r}),Object.freeze(Object.defineProperty({__proto__:null,clone:n,create:r,createView:function(e,t){return new Float32Array(e,t,9)},fromValues:function(e,t,i,r,n,s,o,a,l){const c=new Float32Array(9);return c[0]=e,c[1]=t,c[2]=i,c[3]=r,c[4]=n,c[5]=s,c[6]=o,c[7]=a,c[8]=l,c}},Symbol.toStringTag,{value:"Module"}))},79441:(e,t,i)=>{"use strict";function r(){return[1,0,0,0,1,0,0,0,1]}function n(e,t,i,r,n,s,o,a,l){return[e,t,i,r,n,s,o,a,l]}i.d(t,{fA:()=>n,vt:()=>r,zK:()=>s});const s=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},create:r,createView:function(e,t){return new Float64Array(e,t,9)},fromValues:n},Symbol.toStringTag,{value:"Module"}))},26110:(e,t,i)=>{"use strict";function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function n(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function s(e,t,i,r,n,s,o,a,l,c,h,u,p,d,f,y){return[e,t,i,r,n,s,o,a,l,c,h,u,p,d,f,y]}i.d(t,{fA:()=>s,o8:()=>n,vt:()=>r,zK:()=>o});const o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:n,create:r,createView:function(e,t){return new Float64Array(e,t,16)},fromValues:s},Symbol.toStringTag,{value:"Module"}))},19165:(e,t,i)=>{"use strict";function r(){return[0,0,0,1]}function n(e){return[e[0],e[1],e[2],e[3]]}i.d(t,{o8:()=>n,vt:()=>r,zK:()=>s});const s=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:n,create:r,createView:function(e,t){return new Float64Array(e,t,4)},fromValues:function(e,t,i,r){return[e,t,i,r]}},Symbol.toStringTag,{value:"Module"}))},14571:(e,t,i)=>{"use strict";function r(){return new Float32Array(2)}function n(e,t){const i=new Float32Array(2);return i[0]=e,i[1]=t,i}function s(){return r()}function o(){return n(1,1)}function a(){return n(1,0)}function l(){return n(0,1)}i.d(t,{Un:()=>h,fA:()=>n,uY:()=>c,vt:()=>r});const c=s(),h=o(),u=a(),p=l();Object.freeze(Object.defineProperty({__proto__:null,ONES:h,UNIT_X:u,UNIT_Y:p,ZEROS:c,clone:function(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t},create:r,createView:function(e,t){return new Float32Array(e,t,2)},fromValues:n,ones:o,unitX:a,unitY:l,zeros:s},Symbol.toStringTag,{value:"Module"}))},56560:(e,t,i)=>{"use strict";function r(){return[0,0]}function n(e){return[e[0],e[1]]}function s(e,t){return[e,t]}function o(e,t=[0,0]){const i=Math.min(2,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function a(){return s(1,1)}function l(){return s(1,0)}function c(){return s(0,1)}i.d(t,{Cw:()=>p,JP:()=>d,Un:()=>u,ci:()=>o,fA:()=>s,o8:()=>n,uY:()=>h,vt:()=>r});const h=[0,0],u=a(),p=l(),d=c();Object.freeze(Object.defineProperty({__proto__:null,ONES:u,UNIT_X:p,UNIT_Y:d,ZEROS:h,clone:n,create:r,createView:function(e,t){return new Float64Array(e,t,2)},fromArray:o,fromValues:s,ones:a,unitX:l,unitY:c,zeros:function(){return[0,0]}},Symbol.toStringTag,{value:"Module"}))},19913:(e,t,i)=>{"use strict";function r(){return[0,0,0]}function n(e){return[e[0],e[1],e[2]]}function s(e,t,i){return[e,t,i]}function o(e,t=[0,0,0]){const i=Math.min(3,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function a(){return s(1,1,1)}function l(){return s(1,0,0)}function c(){return s(0,1,0)}function h(){return s(0,0,1)}i.d(t,{Cb:()=>y,Cw:()=>d,JP:()=>f,Un:()=>p,ci:()=>o,fA:()=>s,o8:()=>n,uY:()=>u,vt:()=>r});const u=[0,0,0],p=a(),d=l(),f=c(),y=h();Object.freeze(Object.defineProperty({__proto__:null,ONES:p,UNIT_X:d,UNIT_Y:f,UNIT_Z:y,ZEROS:u,clone:n,create:r,createView:function(e,t){return new Float64Array(e,t,3)},fromArray:o,fromValues:s,ones:a,unitX:l,unitY:c,unitZ:h,zeros:function(){return[0,0,0]}},Symbol.toStringTag,{value:"Module"}))},76982:(e,t,i)=>{"use strict";function r(){return[0,0,0,0]}function n(e){return[e[0],e[1],e[2],e[3]]}function s(e,t,i,r){return[e,t,i,r]}function o(e,t=[0,0,0,0]){const i=Math.min(4,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function a(){return s(1,1,1,1)}function l(){return s(1,0,0,0)}function c(){return s(0,1,0,0)}function h(){return s(0,0,1,0)}function u(){return s(0,0,0,1)}i.d(t,{Un:()=>d,ci:()=>o,fA:()=>s,o8:()=>n,uY:()=>p,vt:()=>r});const p=[0,0,0,0],d=a(),f=l(),y=c(),m=h(),g=u();Object.freeze(Object.defineProperty({__proto__:null,ONES:d,UNIT_W:g,UNIT_X:f,UNIT_Y:y,UNIT_Z:m,ZEROS:p,clone:n,create:r,createView:function(e,t){return new Float64Array(e,t,4)},fromArray:o,fromValues:s,ones:a,unitW:u,unitX:l,unitY:c,unitZ:h,zeros:function(){return[0,0,0,0]}},Symbol.toStringTag,{value:"Module"}))},78115:(e,t,i)=>{"use strict";i.d(t,{DF:()=>l,FD:()=>n,Ov:()=>s,ct:()=>c});let r=1e-6;function n(){return r}const s=Math.random,o=Math.PI/180,a=180/Math.PI;function l(e){return e*o}function c(e){return e*a}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:s,equals:function(e,t){return Math.abs(e-t)<=r*Math.max(1,Math.abs(e),Math.abs(t))},getEpsilon:n,setEpsilon:function(e){r=e},toDegree:c,toRadian:l},Symbol.toStringTag,{value:"Module"}))},94464:(e,t,i)=>{"use strict";i.d(t,{$0:()=>u,B8:()=>o,CV:()=>p,D_:()=>n,Tl:()=>h,e$:()=>l,hZ:()=>s,hs:()=>c,kN:()=>d,lw:()=>a});var r=i(78115);function n(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function s(e,t,i,r,n,s,o){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=s,e[5]=o,e}function o(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5];let l=i*s-r*n;return l?(l=1/l,e[0]=s*l,e[1]=-r*l,e[2]=-n*l,e[3]=i*l,e[4]=(n*a-s*o)*l,e[5]=(r*o-i*a)*l,e):null}function a(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=i[0],h=i[1],u=i[2],p=i[3],d=i[4],f=i[5];return e[0]=r*c+s*h,e[1]=n*c+o*h,e[2]=r*u+s*p,e[3]=n*u+o*p,e[4]=r*d+s*f+a,e[5]=n*d+o*f+l,e}function l(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=Math.sin(i),h=Math.cos(i);return e[0]=r*h+s*c,e[1]=n*h+o*c,e[2]=r*-c+s*h,e[3]=n*-c+o*h,e[4]=a,e[5]=l,e}function c(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=i[0],h=i[1];return e[0]=r*c,e[1]=n*c,e[2]=s*h,e[3]=o*h,e[4]=a,e[5]=l,e}function h(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=i[0],h=i[1];return e[0]=r,e[1]=n,e[2]=s,e[3]=o,e[4]=r*c+s*h+a,e[5]=n*c+o*h+l,e}function u(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=-i,e[3]=r,e[4]=0,e[5]=0,e}function p(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function d(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function f(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}const y=a,m=f;Object.freeze(Object.defineProperty({__proto__:null,add:function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},determinant:function(e){return e[0]*e[3]-e[1]*e[2]},equals:function(e,t){const i=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=t[0],h=t[1],u=t[2],p=t[3],d=t[4],f=t[5],y=(0,r.FD)();return Math.abs(i-c)<=y*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(n-h)<=y*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(s-u)<=y*Math.max(1,Math.abs(s),Math.abs(u))&&Math.abs(o-p)<=y*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-d)<=y*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(l-f)<=y*Math.max(1,Math.abs(l),Math.abs(f))},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},frob:function(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)},fromRotation:u,fromScaling:p,fromTranslation:d,identity:n,invert:o,mul:y,multiply:a,multiplyScalar:function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e},multiplyScalarAndAdd:function(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e},rotate:l,scale:c,set:s,str:function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},sub:m,subtract:f,translate:h},Symbol.toStringTag,{value:"Module"}))},82541:(e,t,i)=>{"use strict";i.d(t,{B8:()=>l,D_:()=>o,Ge:()=>v,I0:()=>m,KC:()=>c,Oe:()=>f,Tl:()=>u,dR:()=>g,e$:()=>p,hZ:()=>s,hs:()=>d,kN:()=>y,lw:()=>h,mg:()=>a,ut:()=>b,z0:()=>n});var r=i(78115);function n(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function s(e,t,i,r,n,s,o,a,l,c){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=c,e}function o(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function a(e,t){if(e===t){const i=t[1],r=t[2],n=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=r,e[7]=n}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function l(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],u=h*o-a*c,p=-h*s+a*l,d=c*s-o*l;let f=i*u+r*p+n*d;return f?(f=1/f,e[0]=u*f,e[1]=(-h*r+n*c)*f,e[2]=(a*r-n*o)*f,e[3]=p*f,e[4]=(h*i-n*l)*f,e[5]=(-a*i+n*s)*f,e[6]=d*f,e[7]=(-c*i+r*l)*f,e[8]=(o*i-r*s)*f,e):null}function c(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8];return e[0]=o*h-a*c,e[1]=n*c-r*h,e[2]=r*a-n*o,e[3]=a*l-s*h,e[4]=i*h-n*l,e[5]=n*s-i*a,e[6]=s*c-o*l,e[7]=r*l-i*c,e[8]=i*o-r*s,e}function h(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],u=t[8],p=i[0],d=i[1],f=i[2],y=i[3],m=i[4],g=i[5],v=i[6],_=i[7],b=i[8];return e[0]=p*r+d*o+f*c,e[1]=p*n+d*a+f*h,e[2]=p*s+d*l+f*u,e[3]=y*r+m*o+g*c,e[4]=y*n+m*a+g*h,e[5]=y*s+m*l+g*u,e[6]=v*r+_*o+b*c,e[7]=v*n+_*a+b*h,e[8]=v*s+_*l+b*u,e}function u(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],u=t[8],p=i[0],d=i[1];return e[0]=r,e[1]=n,e[2]=s,e[3]=o,e[4]=a,e[5]=l,e[6]=p*r+d*o+c,e[7]=p*n+d*a+h,e[8]=p*s+d*l+u,e}function p(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],u=t[8],p=Math.sin(i),d=Math.cos(i);return e[0]=d*r+p*o,e[1]=d*n+p*a,e[2]=d*s+p*l,e[3]=d*o-p*r,e[4]=d*a-p*n,e[5]=d*l-p*s,e[6]=c,e[7]=h,e[8]=u,e}function d(e,t,i){const r=i[0],n=i[1],s=i[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=s*t[6],e[7]=s*t[7],e[8]=s*t[8],e}function f(e,t,i){const r=i[0],n=i[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e}function y(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function m(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=i+i,a=r+r,l=n+n,c=i*o,h=r*o,u=r*a,p=n*o,d=n*a,f=n*l,y=s*o,m=s*a,g=s*l;return e[0]=1-u-f,e[3]=h-g,e[6]=p+m,e[1]=h+g,e[4]=1-c-f,e[7]=d-y,e[2]=p-m,e[5]=d+y,e[8]=1-c-u,e}function g(e,t){const i=t[0],r=t[1],n=t[2],s=t[4],o=t[5],a=t[6],l=t[8],c=t[9],h=t[10],u=h*o-a*c,p=-h*s+a*l,d=c*s-o*l,f=i*u+r*p+n*d;if(!f)return null;const y=1/f;return e[0]=u*y,e[1]=(-h*r+n*c)*y,e[2]=(a*r-n*o)*y,e[3]=p*y,e[4]=(h*i-n*l)*y,e[5]=(-a*i+n*s)*y,e[6]=d*y,e[7]=(-c*i+r*l)*y,e[8]=(o*i-r*s)*y,e}function v(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],u=t[9],p=t[10],d=t[11],f=t[12],y=t[13],m=t[14],g=t[15],v=i*a-r*o,_=i*l-n*o,b=i*c-s*o,w=r*l-n*a,M=r*c-s*a,T=n*c-s*l,S=h*y-u*f,A=h*m-p*f,E=h*g-d*f,x=u*m-p*y,I=u*g-d*y,C=p*g-d*m;let k=v*C-_*I+b*x+w*E-M*A+T*S;return k?(k=1/k,e[0]=(a*C-l*I+c*x)*k,e[1]=(l*E-o*C-c*A)*k,e[2]=(o*I-a*E+c*S)*k,e[3]=(n*I-r*C-s*x)*k,e[4]=(i*C-n*E+s*A)*k,e[5]=(r*E-i*I-s*S)*k,e[6]=(y*T-m*M+g*w)*k,e[7]=(m*b-f*T-g*_)*k,e[8]=(f*M-y*b+g*v)*k,e):null}function _(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function b(e){const t=(0,r.FD)(),i=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],u=e[8];return Math.abs(1-(i*i+o*o+c*c))<=t&&Math.abs(1-(n*n+a*a+h*h))<=t&&Math.abs(1-(s*s+l*l+u*u))<=t}const w=h,M=_;Object.freeze(Object.defineProperty({__proto__:null,add:function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e},adjoint:c,copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},determinant:function(e){const t=e[0],i=e[1],r=e[2],n=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8];return t*(c*s-o*l)+i*(-c*n+o*a)+r*(l*n-s*a)},equals:function(e,t){const i=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],u=e[8],p=t[0],d=t[1],f=t[2],y=t[3],m=t[4],g=t[5],v=t[6],_=t[7],b=t[8],w=(0,r.FD)();return Math.abs(i-p)<=w*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(n-d)<=w*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(s-f)<=w*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(o-y)<=w*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(a-m)<=w*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(l-g)<=w*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(c-v)<=w*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(h-_)<=w*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(u-b)<=w*Math.max(1,Math.abs(u),Math.abs(b))},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},frob:function(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)},fromMat2d:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},fromMat4:n,fromQuat:m,fromRotation:function(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=-i,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromTranslation:y,identity:o,invert:l,isOrthoNormal:b,mul:w,multiply:h,multiplyScalar:function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e},multiplyScalarAndAdd:function(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e},normalFromMat4:v,normalFromMat4Legacy:g,projection:function(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},rotate:p,scale:d,scaleByVec2:f,set:s,str:function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},sub:M,subtract:_,translate:u,transpose:a},Symbol.toStringTag,{value:"Module"}))},25336:(e,t,i)=>{"use strict";i.d(t,{$0:()=>b,$h:()=>N,B8:()=>h,C:()=>s,CV:()=>_,D_:()=>a,I0:()=>k,IL:()=>E,N9:()=>M,O7:()=>C,Qr:()=>g,Qw:()=>c,Tl:()=>p,Z8:()=>m,aI:()=>D,e$:()=>f,eL:()=>y,hM:()=>w,hZ:()=>o,hs:()=>d,kN:()=>v,l:()=>x,lw:()=>u,mg:()=>l,o1:()=>I,sC:()=>A,t2:()=>P,t5:()=>O,tZ:()=>j,ut:()=>F,v3:()=>L});var r=i(19913),n=i(78115);function s(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function o(e,t,i,r,n,s,o,a,l,c,h,u,p,d,f,y,m){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=c,e[9]=h,e[10]=u,e[11]=p,e[12]=d,e[13]=f,e[14]=y,e[15]=m,e}function a(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function l(e,t){if(e===t){const i=t[1],r=t[2],n=t[3],s=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=s,e[11]=t[14],e[12]=n,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function c(e,t){return h(e,t)||a(e),e}function h(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],u=t[9],p=t[10],d=t[11],f=t[12],y=t[13],m=t[14],g=t[15],v=i*a-r*o,_=i*l-n*o,b=i*c-s*o,w=r*l-n*a,M=r*c-s*a,T=n*c-s*l,S=h*y-u*f,A=h*m-p*f,E=h*g-d*f,x=u*m-p*y,I=u*g-d*y,C=p*g-d*m;let k=v*C-_*I+b*x+w*E-M*A+T*S;return k?(k=1/k,e[0]=(a*C-l*I+c*x)*k,e[1]=(n*I-r*C-s*x)*k,e[2]=(y*T-m*M+g*w)*k,e[3]=(p*M-u*T-d*w)*k,e[4]=(l*E-o*C-c*A)*k,e[5]=(i*C-n*E+s*A)*k,e[6]=(m*b-f*T-g*_)*k,e[7]=(h*T-p*b+d*_)*k,e[8]=(o*I-a*E+c*S)*k,e[9]=(r*E-i*I-s*S)*k,e[10]=(f*M-y*b+g*v)*k,e[11]=(u*b-h*M-d*v)*k,e[12]=(a*A-o*x-l*S)*k,e[13]=(i*x-r*A+n*S)*k,e[14]=(y*_-f*w-m*v)*k,e[15]=(h*w-u*_+p*v)*k,e):null}function u(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],u=t[8],p=t[9],d=t[10],f=t[11],y=t[12],m=t[13],g=t[14],v=t[15];let _=i[0],b=i[1],w=i[2],M=i[3];return e[0]=_*r+b*a+w*u+M*y,e[1]=_*n+b*l+w*p+M*m,e[2]=_*s+b*c+w*d+M*g,e[3]=_*o+b*h+w*f+M*v,_=i[4],b=i[5],w=i[6],M=i[7],e[4]=_*r+b*a+w*u+M*y,e[5]=_*n+b*l+w*p+M*m,e[6]=_*s+b*c+w*d+M*g,e[7]=_*o+b*h+w*f+M*v,_=i[8],b=i[9],w=i[10],M=i[11],e[8]=_*r+b*a+w*u+M*y,e[9]=_*n+b*l+w*p+M*m,e[10]=_*s+b*c+w*d+M*g,e[11]=_*o+b*h+w*f+M*v,_=i[12],b=i[13],w=i[14],M=i[15],e[12]=_*r+b*a+w*u+M*y,e[13]=_*n+b*l+w*p+M*m,e[14]=_*s+b*c+w*d+M*g,e[15]=_*o+b*h+w*f+M*v,e}function p(e,t,i){const r=i[0],n=i[1],s=i[2];if(t===e)e[12]=t[0]*r+t[4]*n+t[8]*s+t[12],e[13]=t[1]*r+t[5]*n+t[9]*s+t[13],e[14]=t[2]*r+t[6]*n+t[10]*s+t[14],e[15]=t[3]*r+t[7]*n+t[11]*s+t[15];else{const i=t[0],o=t[1],a=t[2],l=t[3],c=t[4],h=t[5],u=t[6],p=t[7],d=t[8],f=t[9],y=t[10],m=t[11];e[0]=i,e[1]=o,e[2]=a,e[3]=l,e[4]=c,e[5]=h,e[6]=u,e[7]=p,e[8]=d,e[9]=f,e[10]=y,e[11]=m,e[12]=i*r+c*n+d*s+t[12],e[13]=o*r+h*n+f*s+t[13],e[14]=a*r+u*n+y*s+t[14],e[15]=l*r+p*n+m*s+t[15]}return e}function d(e,t,i){const r=i[0],n=i[1],s=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function f(e,t,i,r){let s,o,a,l,c,h,u,p,d,f,y,m,g,v,_,b,w,M,T,S,A,E,x,I,C=r[0],k=r[1],N=r[2],L=Math.sqrt(C*C+k*k+N*N);return L<(0,n.FD)()?null:(L=1/L,C*=L,k*=L,N*=L,s=Math.sin(i),o=Math.cos(i),a=1-o,l=t[0],c=t[1],h=t[2],u=t[3],p=t[4],d=t[5],f=t[6],y=t[7],m=t[8],g=t[9],v=t[10],_=t[11],b=C*C*a+o,w=k*C*a+N*s,M=N*C*a-k*s,T=C*k*a-N*s,S=k*k*a+o,A=N*k*a+C*s,E=C*N*a+k*s,x=k*N*a-C*s,I=N*N*a+o,e[0]=l*b+p*w+m*M,e[1]=c*b+d*w+g*M,e[2]=h*b+f*w+v*M,e[3]=u*b+y*w+_*M,e[4]=l*T+p*S+m*A,e[5]=c*T+d*S+g*A,e[6]=h*T+f*S+v*A,e[7]=u*T+y*S+_*A,e[8]=l*E+p*x+m*I,e[9]=c*E+d*x+g*I,e[10]=h*E+f*x+v*I,e[11]=u*E+y*x+_*I,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function y(e,t,i){const r=Math.sin(i),n=Math.cos(i),s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],h=t[9],u=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*n+c*r,e[5]=o*n+h*r,e[6]=a*n+u*r,e[7]=l*n+p*r,e[8]=c*n-s*r,e[9]=h*n-o*r,e[10]=u*n-a*r,e[11]=p*n-l*r,e}function m(e,t,i){const r=Math.sin(i),n=Math.cos(i),s=t[0],o=t[1],a=t[2],l=t[3],c=t[8],h=t[9],u=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n-c*r,e[1]=o*n-h*r,e[2]=a*n-u*r,e[3]=l*n-p*r,e[8]=s*r+c*n,e[9]=o*r+h*n,e[10]=a*r+u*n,e[11]=l*r+p*n,e}function g(e,t,i){const r=Math.sin(i),n=Math.cos(i),s=t[0],o=t[1],a=t[2],l=t[3],c=t[4],h=t[5],u=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n+c*r,e[1]=o*n+h*r,e[2]=a*n+u*r,e[3]=l*n+p*r,e[4]=c*n-s*r,e[5]=h*n-o*r,e[6]=u*n-a*r,e[7]=p*n-l*r,e}function v(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function _(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function b(e,t,i){if(0===t)return a(e);let r,s,o,l=i[0],c=i[1],h=i[2],u=Math.sqrt(l*l+c*c+h*h);return u<(0,n.FD)()?null:(u=1/u,l*=u,c*=u,h*=u,r=Math.sin(t),s=Math.cos(t),o=1-s,e[0]=l*l*o+s,e[1]=c*l*o+h*r,e[2]=h*l*o-c*r,e[3]=0,e[4]=l*c*o-h*r,e[5]=c*c*o+s,e[6]=h*c*o+l*r,e[7]=0,e[8]=l*h*o+c*r,e[9]=c*h*o-l*r,e[10]=h*h*o+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function w(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function M(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function T(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=r+r,l=n+n,c=s+s,h=r*a,u=r*l,p=r*c,d=n*l,f=n*c,y=s*c,m=o*a,g=o*l,v=o*c;return e[0]=1-(d+y),e[1]=u+v,e[2]=p-g,e[3]=0,e[4]=u-v,e[5]=1-(h+y),e[6]=f+m,e[7]=0,e[8]=p+g,e[9]=f-m,e[10]=1-(h+d),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}const S=(0,r.vt)();function A(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function E(e,t){const i=t[0],r=t[1],n=t[2],s=t[4],o=t[5],a=t[6],l=t[8],c=t[9],h=t[10];return e[0]=Math.sqrt(i*i+r*r+n*n),e[1]=Math.sqrt(s*s+o*o+a*a),e[2]=Math.sqrt(l*l+c*c+h*h),e}function x(e,t){const i=t[0]+t[5]+t[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function I(e,t,i,r){const n=t[0],s=t[1],o=t[2],a=t[3],l=n+n,c=s+s,h=o+o,u=n*l,p=n*c,d=n*h,f=s*c,y=s*h,m=o*h,g=a*l,v=a*c,_=a*h,b=r[0],w=r[1],M=r[2];return e[0]=(1-(f+m))*b,e[1]=(p+_)*b,e[2]=(d-v)*b,e[3]=0,e[4]=(p-_)*w,e[5]=(1-(u+m))*w,e[6]=(y+g)*w,e[7]=0,e[8]=(d+v)*M,e[9]=(y-g)*M,e[10]=(1-(u+f))*M,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function C(e,t,i,r,n){const s=t[0],o=t[1],a=t[2],l=t[3],c=s+s,h=o+o,u=a+a,p=s*c,d=s*h,f=s*u,y=o*h,m=o*u,g=a*u,v=l*c,_=l*h,b=l*u,w=r[0],M=r[1],T=r[2],S=n[0],A=n[1],E=n[2],x=(1-(y+g))*w,I=(d+b)*w,C=(f-_)*w,k=(d-b)*M,N=(1-(p+g))*M,L=(m+v)*M,O=(f+_)*T,R=(m-v)*T,P=(1-(p+y))*T;return e[0]=x,e[1]=I,e[2]=C,e[3]=0,e[4]=k,e[5]=N,e[6]=L,e[7]=0,e[8]=O,e[9]=R,e[10]=P,e[11]=0,e[12]=i[0]+S-(x*S+k*A+O*E),e[13]=i[1]+A-(I*S+N*A+R*E),e[14]=i[2]+E-(C*S+L*A+P*E),e[15]=1,e}function k(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=i+i,a=r+r,l=n+n,c=i*o,h=r*o,u=r*a,p=n*o,d=n*a,f=n*l,y=s*o,m=s*a,g=s*l;return e[0]=1-u-f,e[1]=h+g,e[2]=p-m,e[3]=0,e[4]=h-g,e[5]=1-c-f,e[6]=d+y,e[7]=0,e[8]=p+m,e[9]=d-y,e[10]=1-c-u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function N(e,t,i,r,n,s,o){const a=1/(i-t),l=1/(n-r),c=1/(s-o);return e[0]=2*s*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*l,e[6]=0,e[7]=0,e[8]=(i+t)*a,e[9]=(n+r)*l,e[10]=(o+s)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*c,e[15]=0,e}function L(e,t,i,r,n,s,o){const a=1/(t-i),l=1/(r-n),c=1/(s-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+i)*a,e[13]=(n+r)*l,e[14]=(o+s)*c,e[15]=1,e}function O(e,t,i,r){const s=t[0],o=t[1],l=t[2];let c=s-i[0],h=o-i[1],u=l-i[2];const p=(0,n.FD)();if(Math.abs(c)<p&&Math.abs(h)<p&&Math.abs(u)<p)return void a(e);let d=1/Math.sqrt(c*c+h*h+u*u);c*=d,h*=d,u*=d;const f=r[0],y=r[1],m=r[2];let g=y*u-m*h,v=m*c-f*u,_=f*h-y*c;d=Math.sqrt(g*g+v*v+_*_),d?(d=1/d,g*=d,v*=d,_*=d):(g=0,v=0,_=0);let b=h*_-u*v,w=u*g-c*_,M=c*v-h*g;d=Math.sqrt(b*b+w*w+M*M),d?(d=1/d,b*=d,w*=d,M*=d):(b=0,w=0,M=0),e[0]=g,e[1]=b,e[2]=c,e[3]=0,e[4]=v,e[5]=w,e[6]=h,e[7]=0,e[8]=_,e[9]=M,e[10]=u,e[11]=0,e[12]=-(g*s+v*o+_*l),e[13]=-(b*s+w*o+M*l),e[14]=-(c*s+h*o+u*l),e[15]=1}function R(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function P(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function D(e,t){if(e===t)return!0;const i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],u=e[8],p=e[9],d=e[10],f=e[11],y=e[12],m=e[13],g=e[14],v=e[15],_=t[0],b=t[1],w=t[2],M=t[3],T=t[4],S=t[5],A=t[6],E=t[7],x=t[8],I=t[9],C=t[10],k=t[11],N=t[12],L=t[13],O=t[14],R=t[15],P=(0,n.FD)();return Math.abs(i-_)<=P*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(r-b)<=P*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(s-w)<=P*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(o-M)<=P*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(a-T)<=P*Math.max(1,Math.abs(a),Math.abs(T))&&Math.abs(l-S)<=P*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(c-A)<=P*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(h-E)<=P*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(u-x)<=P*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(p-I)<=P*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(d-C)<=P*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(f-k)<=P*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(y-N)<=P*Math.max(1,Math.abs(y),Math.abs(N))&&Math.abs(m-L)<=P*Math.max(1,Math.abs(m),Math.abs(L))&&Math.abs(g-O)<=P*Math.max(1,Math.abs(g),Math.abs(O))&&Math.abs(v-R)<=P*Math.max(1,Math.abs(v),Math.abs(R))}function F(e){const t=(0,n.FD)(),i=e[0],r=e[1],s=e[2],o=e[4],a=e[5],l=e[6],c=e[8],h=e[9],u=e[10];return Math.abs(1-(i*i+o*o+c*c))<=t&&Math.abs(1-(r*r+a*a+h*h))<=t&&Math.abs(1-(s*s+l*l+u*u))<=t}function j(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[8]&&0===e[9]&&1===e[10]}const Z=u,z=R;Object.freeze(Object.defineProperty({__proto__:null,add:function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e},adjoint:function(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],u=t[9],p=t[10],d=t[11],f=t[12],y=t[13],m=t[14],g=t[15];return e[0]=a*(p*g-d*m)-u*(l*g-c*m)+y*(l*d-c*p),e[1]=-(r*(p*g-d*m)-u*(n*g-s*m)+y*(n*d-s*p)),e[2]=r*(l*g-c*m)-a*(n*g-s*m)+y*(n*c-s*l),e[3]=-(r*(l*d-c*p)-a*(n*d-s*p)+u*(n*c-s*l)),e[4]=-(o*(p*g-d*m)-h*(l*g-c*m)+f*(l*d-c*p)),e[5]=i*(p*g-d*m)-h*(n*g-s*m)+f*(n*d-s*p),e[6]=-(i*(l*g-c*m)-o*(n*g-s*m)+f*(n*c-s*l)),e[7]=i*(l*d-c*p)-o*(n*d-s*p)+h*(n*c-s*l),e[8]=o*(u*g-d*y)-h*(a*g-c*y)+f*(a*d-c*u),e[9]=-(i*(u*g-d*y)-h*(r*g-s*y)+f*(r*d-s*u)),e[10]=i*(a*g-c*y)-o*(r*g-s*y)+f*(r*c-s*a),e[11]=-(i*(a*d-c*u)-o*(r*d-s*u)+h*(r*c-s*a)),e[12]=-(o*(u*m-p*y)-h*(a*m-l*y)+f*(a*p-l*u)),e[13]=i*(u*m-p*y)-h*(r*m-n*y)+f*(r*p-n*u),e[14]=-(i*(a*m-l*y)-o*(r*m-n*y)+f*(r*l-n*a)),e[15]=i*(a*p-l*u)-o*(r*p-n*u)+h*(r*l-n*a),e},copy:s,determinant:function(e){const t=e[0],i=e[1],r=e[2],n=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],h=e[9],u=e[10],p=e[11],d=e[12],f=e[13],y=e[14],m=e[15];return(t*o-i*s)*(u*m-p*y)-(t*a-r*s)*(h*m-p*f)+(t*l-n*s)*(h*y-u*f)+(i*a-r*o)*(c*m-p*d)-(i*l-n*o)*(c*y-u*d)+(r*l-n*a)*(c*f-h*d)},equals:D,exactEquals:P,frob:function(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)},fromQuat:k,fromQuat2:function(e,t){const i=S,r=-t[0],n=-t[1],s=-t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],u=r*r+n*n+s*s+o*o;return u>0?(i[0]=2*(a*o+h*r+l*s-c*n)/u,i[1]=2*(l*o+h*n+c*r-a*s)/u,i[2]=2*(c*o+h*s+a*n-l*r)/u):(i[0]=2*(a*o+h*r+l*s-c*n),i[1]=2*(l*o+h*n+c*r-a*s),i[2]=2*(c*o+h*s+a*n-l*r)),T(e,t,i),e},fromRotation:b,fromRotationTranslation:T,fromRotationTranslationScale:I,fromRotationTranslationScaleOrigin:C,fromScaling:_,fromTranslation:v,fromXRotation:w,fromYRotation:function(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromZRotation:M,frustum:N,getRotation:x,getScaling:E,getTranslation:A,hasIdentityRotation:j,identity:a,invert:h,invertOrIdentity:c,isOrthoNormal:F,lookAt:O,mul:Z,multiply:u,multiplyScalar:function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e},multiplyScalarAndAdd:function(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e[9]=t[9]+i[9]*r,e[10]=t[10]+i[10]*r,e[11]=t[11]+i[11]*r,e[12]=t[12]+i[12]*r,e[13]=t[13]+i[13]*r,e[14]=t[14]+i[14]*r,e[15]=t[15]+i[15]*r,e},ortho:L,perspective:function(e,t,i,r,n){const s=1/Math.tan(t/2);let o;return e[0]=s/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=n&&n!==1/0?(o=1/(r-n),e[10]=(n+r)*o,e[14]=2*n*r*o):(e[10]=-1,e[14]=-2*r),e},perspectiveFromFieldOfView:function(e,t,i,r){const n=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+a),c=2/(n+s);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(o-a)*l*.5,e[9]=(n-s)*c*.5,e[10]=r/(i-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*i/(i-r),e[15]=0,e},rotate:f,rotateX:y,rotateY:m,rotateZ:g,scale:d,set:o,str:function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},sub:z,subtract:R,targetTo:function(e,t,i,r){const n=t[0],s=t[1],o=t[2],a=r[0],l=r[1],c=r[2];let h=n-i[0],u=s-i[1],p=o-i[2],d=h*h+u*u+p*p;d>0&&(d=1/Math.sqrt(d),h*=d,u*=d,p*=d);let f=l*p-c*u,y=c*h-a*p,m=a*u-l*h;return d=f*f+y*y+m*m,d>0&&(d=1/Math.sqrt(d),f*=d,y*=d,m*=d),e[0]=f,e[1]=y,e[2]=m,e[3]=0,e[4]=u*m-p*y,e[5]=p*f-h*m,e[6]=h*y-u*f,e[7]=0,e[8]=h,e[9]=u,e[10]=p,e[11]=0,e[12]=n,e[13]=s,e[14]=o,e[15]=1,e},translate:p,transpose:l},Symbol.toStringTag,{value:"Module"}))},31753:(e,t,i)=>{"use strict";i.d(t,{A6:()=>m,B8:()=>d,Xd:()=>h,Xr:()=>f,Yc:()=>N,hZ:()=>v,lw:()=>u,t2:()=>C,x8:()=>c});var r=i(79441),n=i(19165),s=i(19913),o=i(78115),a=i(80347),l=i(74772);function c(e,t,i){i*=.5;const r=Math.sin(i);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(i),e}function h(e,t){const i=2*Math.acos(t[3]),r=Math.sin(i/2);return r>(0,o.FD)()?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),i}function u(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=i[0],l=i[1],c=i[2],h=i[3];return e[0]=r*h+o*a+n*c-s*l,e[1]=n*h+o*l+s*a-r*c,e[2]=s*h+o*c+r*l-n*a,e[3]=o*h-r*a-n*l-s*c,e}function p(e,t,i,r){const n=t[0],s=t[1],a=t[2],l=t[3];let c,h,u,p,d,f=i[0],y=i[1],m=i[2],g=i[3];return h=n*f+s*y+a*m+l*g,h<0&&(h=-h,f=-f,y=-y,m=-m,g=-g),1-h>(0,o.FD)()?(c=Math.acos(h),u=Math.sin(c),p=Math.sin((1-r)*c)/u,d=Math.sin(r*c)/u):(p=1-r,d=r),e[0]=p*n+d*f,e[1]=p*s+d*y,e[2]=p*a+d*m,e[3]=p*l+d*g,e}function d(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=i*i+r*r+n*n+s*s,a=o?1/o:0;return e[0]=-i*a,e[1]=-r*a,e[2]=-n*a,e[3]=s*a,e}function f(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function y(e,t){const i=t[0]+t[4]+t[8];let r;if(i>0)r=Math.sqrt(i+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{let i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);const n=(i+1)%3,s=(i+2)%3;r=Math.sqrt(t[3*i+i]-t[3*n+n]-t[3*s+s]+1),e[i]=.5*r,r=.5/r,e[3]=(t[3*n+s]-t[3*s+n])*r,e[n]=(t[3*n+i]+t[3*i+n])*r,e[s]=(t[3*s+i]+t[3*i+s])*r}return e}function m(e,t,i,r){const n=.5*Math.PI/180;t*=n,i*=n,r*=n;const s=Math.sin(t),o=Math.cos(t),a=Math.sin(i),l=Math.cos(i),c=Math.sin(r),h=Math.cos(r);return e[0]=s*l*h-o*a*c,e[1]=o*a*h+s*l*c,e[2]=o*l*c-s*a*h,e[3]=o*l*h+s*a*c,e}const g=l.c,v=l.s,_=l.f,b=u,w=l.b,M=l.g,T=l.l,S=l.i,A=S,E=l.j,x=E,I=l.n,C=l.a,k=l.e;function N(e,t,i){const r=(0,a.k)(t,i);return r<-.999999?((0,a.b)(L,O,t),(0,a.H)(L)<1e-6&&(0,a.b)(L,R,t),(0,a.n)(L,L),c(e,L,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):((0,a.b)(L,t,i),e[0]=L[0],e[1]=L[1],e[2]=L[2],e[3]=1+r,I(e,e))}const L=(0,s.vt)(),O=(0,s.fA)(1,0,0),R=(0,s.fA)(0,1,0),P=(0,n.vt)(),D=(0,n.vt)(),F=(0,r.vt)();Object.freeze(Object.defineProperty({__proto__:null,add:_,calculateW:function(e,t){const i=t[0],r=t[1],n=t[2];return e[0]=i,e[1]=r,e[2]=n,e[3]=Math.sqrt(Math.abs(1-i*i-r*r-n*n)),e},conjugate:f,copy:g,dot:M,equals:k,exactEquals:C,fromEuler:m,fromMat3:y,getAxisAngle:h,identity:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},invert:d,len:A,length:S,lerp:T,mul:b,multiply:u,normalize:I,random:function(e){const t=o.Ov,i=t(),r=t(),n=t(),s=Math.sqrt(1-i),a=Math.sqrt(i);return e[0]=s*Math.sin(2*Math.PI*r),e[1]=s*Math.cos(2*Math.PI*r),e[2]=a*Math.sin(2*Math.PI*n),e[3]=a*Math.cos(2*Math.PI*n),e},rotateX:function(e,t,i){i*=.5;const r=t[0],n=t[1],s=t[2],o=t[3],a=Math.sin(i),l=Math.cos(i);return e[0]=r*l+o*a,e[1]=n*l+s*a,e[2]=s*l-n*a,e[3]=o*l-r*a,e},rotateY:function(e,t,i){i*=.5;const r=t[0],n=t[1],s=t[2],o=t[3],a=Math.sin(i),l=Math.cos(i);return e[0]=r*l-s*a,e[1]=n*l+o*a,e[2]=s*l+r*a,e[3]=o*l-n*a,e},rotateZ:function(e,t,i){i*=.5;const r=t[0],n=t[1],s=t[2],o=t[3],a=Math.sin(i),l=Math.cos(i);return e[0]=r*l+n*a,e[1]=n*l-r*a,e[2]=s*l+o*a,e[3]=o*l-s*a,e},rotationTo:N,scale:w,set:v,setAxes:function(e,t,i,r){const n=F;return n[0]=i[0],n[3]=i[1],n[6]=i[2],n[1]=r[0],n[4]=r[1],n[7]=r[2],n[2]=-t[0],n[5]=-t[1],n[8]=-t[2],I(e,y(e,n))},setAxisAngle:c,slerp:p,sqlerp:function(e,t,i,r,n,s){return p(P,t,n,s),p(D,i,r,s),p(e,P,D,2*s*(1-s)),e},sqrLen:x,squaredLength:E,str:function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}},Symbol.toStringTag,{value:"Module"}))},53334:(e,t,i)=>{"use strict";i.d(t,{$A:()=>w,Bw:()=>m,C:()=>n,Cc:()=>M,Io:()=>f,Ln:()=>d,Om:()=>b,Re:()=>a,S8:()=>_,T9:()=>u,Vj:()=>C,WQ:()=>o,ZF:()=>T,aI:()=>I,e$:()=>A,g7:()=>E,hG:()=>y,hZ:()=>s,hs:()=>p,jb:()=>N,jk:()=>h,l0:()=>S,m3:()=>g,t2:()=>x,xg:()=>R,ze:()=>v});var r=i(78115);function n(e,t){return e[0]=t[0],e[1]=t[1],e}function s(e,t,i){return e[0]=t,e[1]=i,e}function o(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function a(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function l(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function c(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function h(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function u(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function p(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function d(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e}function f(e,t){const i=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(i*i+r*r)}function y(e,t){const i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function m(e){const t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function g(e){const t=e[0],i=e[1];return t*t+i*i}function v(e,t){return e[0]=-t[0],e[1]=-t[1],e}function _(e,t){const i=t[0],r=t[1];let n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e}function b(e,t){return e[0]*t[0]+e[1]*t[1]}function w(e,t,i){const r=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=r,e}function M(e,t,i,r){const n=t[0],s=t[1];return e[0]=n+r*(i[0]-n),e[1]=s+r*(i[1]-s),e}function T(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[2]*n,e[1]=i[1]*r+i[3]*n,e}function S(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[2]*n+i[4],e[1]=i[1]*r+i[3]*n+i[5],e}function A(e,t,i,r){const n=t[0]-i[0],s=t[1]-i[1],o=Math.sin(r),a=Math.cos(r);return e[0]=n*a-s*o+i[0],e[1]=n*o+s*a+i[1],e}function E(e,t){const i=e[0],r=e[1],n=t[0],s=t[1];let o=i*i+r*r;o>0&&(o=1/Math.sqrt(o));let a=n*n+s*s;a>0&&(a=1/Math.sqrt(a));const l=(i*n+r*s)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function x(e,t){return e[0]===t[0]&&e[1]===t[1]}function I(e,t){const i=e[0],n=e[1],s=t[0],o=t[1],a=(0,r.FD)();return Math.abs(i-s)<=a*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(n-o)<=a*Math.max(1,Math.abs(n),Math.abs(o))}function C(e,t,i,r,n){let s=t[0]-i[0],o=t[1]-i[1];const a=(r[0]*s+r[1]*o)*(n-1);return s=r[0]*a,o=r[1]*a,e[0]=t[0]+s,e[1]=t[1]+o,e}const k=m,N=a,L=l,O=c,R=f,P=y,D=g;Object.freeze(Object.defineProperty({__proto__:null,add:o,angle:E,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},copy:n,cross:w,dist:R,distance:f,div:O,divide:c,dot:b,equals:I,exactEquals:x,floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},len:k,length:m,lerp:M,max:u,min:h,mul:L,multiply:l,negate:v,normalize:_,projectAndScale:C,random:function(e,t){t=t||1;const i=2*(0,r.Ov)()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e},rotate:A,round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},scale:p,scaleAndAdd:d,set:s,sqrDist:P,sqrLen:D,squaredDistance:y,squaredLength:g,str:function(e){return"vec2("+e[0]+", "+e[1]+")"},sub:N,subtract:a,transformMat2:T,transformMat2d:S,transformMat3:function(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[3]*n+i[6],e[1]=i[1]*r+i[4]*n+i[7],e},transformMat4:function(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[4]*n+i[12],e[1]=i[1]*r+i[5]*n+i[13],e}},Symbol.toStringTag,{value:"Module"}))},52686:(e,t,i)=>{"use strict";i.d(t,{L:()=>a,g:()=>o});var r=i(3132),n=i(58842),s=i(11965);async function o(e,t){return await e.load(),a(e,t)}async function a(e,t){const i=[],o=(...e)=>{for(const t of e)null!=t&&(Array.isArray(t)?o(...t):n.A.isCollection(t)?t.forEach((e=>o(e))):s.A.isLoadable(t)&&i.push(t))};t(o);let a=null;if(await(0,r.Tj)(i,(async e=>{const t=await(0,r.Ke)(function(e){return"loadAll"in e&&"function"==typeof e.loadAll}(e)?e.loadAll():e.load());!1!==t.ok||a||(a=t)})),a)throw a.error;return e}},4506:(e,t,i)=>{"use strict";i.d(t,{$8:()=>_,Cc:()=>l,J_:()=>p,KJ:()=>u,Sp:()=>y,XM:()=>d,YN:()=>f,b6:()=>v,cU:()=>s,hs:()=>c,jU:()=>w,kU:()=>h,or:()=>M,pq:()=>T,qE:()=>o,yR:()=>a});var r=i(80347);const n=new Float32Array(1);function s(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function o(e,t,i){return Math.min(Math.max(e,t),i)}function a(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function l(e,t,i){return e+(t-e)*i}function c(e,t,i,r,n){return l(r,n,(e-t)/(i-t))}function h(e){return e*Math.PI/180}function u(e){return 180*e/Math.PI}function p(e,t=1e-6){return(e<0?-1:1)/Math.max(Math.abs(e),t)}function d(e){return Math.acos(o(e,-1,1))}function f(e){return Math.asin(o(e,-1,1))}function y(e,t,i=1e-6){return e===t||!(!Number.isFinite(e)||!Number.isFinite(t))&&(e>t?e-t:t-e)<=i}const m=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));const g=BigInt("1000000");function v(e,t,i=1e-6){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;const r=Math.abs(e-t),n=Math.abs(e),s=Math.abs(t);if(0===e||0===t||n<1e-12&&s<1e-12){if(r>.01*i)return!1}else if(r/(n+s)>i)return!1;return!0}function _(e){return b(Math.max(-T,Math.min(e,T)))}function b(e){return n[0]=e,n[0]}function w(e,t){const i=(0,r.l)(e),n=f(e[2]/i),s=Math.atan2(e[1]/i,e[0]/i);return(0,r.s)(t,i,n,s),t}function M(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],r=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(y(t,1)&&y(i,1)&&y(r,1))}!function(e){const t=function(e){return m.setFloat64(0,e),m.getBigInt64(0)}(e=Math.abs(e)),i=function(e){return m.setBigInt64(0,e),m.getFloat64(0)}(t<=g?g:t-g);Math.abs(e-i)}(1);const T=b(34028234663852886e22)},57725:(e,t,i)=>{"use strict";function r(e,t){if(null==e)throw new Error(t??"value is None")}function n(e){return e?.destroy(),null}function s(e){return e?.dispose(),null}function o(e){return e?.remove(),null}function a(e){return e?.abort(),null}function l(e){return e?.release(),null}function c(e,t,i){return null!=e&&null!=t?null!=i?i(e,t):e.equals(t):e===t}function h(e,t){let i;return e.some(((e,r)=>(i=t(e,r),null!=i))),i??void 0}i.d(t,{CM:()=>c,DC:()=>a,Gz:()=>l,Lw:()=>r,Pb:()=>h,WD:()=>s,pR:()=>n,xt:()=>o})},36329:(e,t,i)=>{"use strict";function r(e){let t,i,r=[],n=!1;return function(...s){return n&&t===this&&function(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}(s,r)||(i=e.apply(this,s),t=this,r=s,n=!0),i}}i.d(t,{B:()=>r})},71709:(e,t,i)=>{"use strict";i.d(t,{d:()=>n});const r=[];function n(e){r.push(e),1===r.length&&queueMicrotask((()=>{const e=r.slice();r.length=0;for(const t of e)t()}))}},21750:(e,t,i)=>{"use strict";i.d(t,{$N:()=>n,sM:()=>o,wc:()=>s});var r=i(15565);function n(e,t,i=!1){return l(e,t,i)}function s(e,t){if(null!=t)return t[e]||a(e.split("."),!1,t)}function o(e,t,i){const r=e.split("."),n=r.pop(),s=a(r,!0,i);s&&n&&(s[n]=t)}function a(e,t,i){let r=i;for(const i of e){if(null==r)return;if(!(i in r)){if(!t)return;r[i]={}}r=r[i]}return r}function l(e,t,i){return t?Object.keys(t).reduce(((e,n)=>{let s=e[n],o=t[n];return s===o?e:void 0===s?(e[n]=(0,r.o8)(o),e):(Array.isArray(o)||Array.isArray(e)?(s=s?Array.isArray(s)?e[n]=s.concat():e[n]=[s]:e[n]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach((e=>{s.includes(e)||s.push(e)})):e[n]=o.concat())):o&&"object"==typeof o?e[n]=l(s,o,i):e.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(e[n]=o),e)}),e||{}):e}},37623:(e,t,i)=>{"use strict";i.d(t,{$X:()=>T,G4:()=>h,Lx:()=>v,Mq:()=>c,NK:()=>a,NO:()=>x,NY:()=>f,Ol:()=>b,Pl:()=>w,QP:()=>u,QZ:()=>g,Te:()=>l,Tw:()=>E,YL:()=>M,jH:()=>p,nA:()=>_,qr:()=>y,sg:()=>A,u7:()=>d,z7:()=>S,zf:()=>m});var r=i(84807),n=i(62991),s=i(92840),o=(i(80861),i(57725));function a(e="Aborted"){return new n.A("AbortError",e)}function l(e,t="Aborted"){if(h(e))throw a(t)}function c(e){return e instanceof AbortSignal?e:e?.signal}function h(e){const t=c(e);return null!=t&&t.aborted}function u(e){if(m(e))throw e}function p(e){if(!m(e))throw e}function d(e,t){const i=c(e);if(null!=i){if(!i.aborted)return(0,s.Oo)(i,"abort",(()=>t()));t()}}function f(e,t){const i=c(e);if(null!=i)return l(i),(0,s.Oo)(i,"abort",(()=>t(a())))}function y(e,t){return null==c(t)?e:new Promise(((i,r)=>{let n=d(t,(()=>r(a())));const s=()=>{n=(0,o.xt)(n)};e.then(s,s),e.then(i,r)}))}function m(e){return"AbortError"===e?.name}async function g(e){try{return await e}catch(e){if(!m(e))throw e;return}}async function v(e){if(!e)return;if("function"!=typeof e.forEach){const t=Object.keys(e),i=t.map((t=>e[t])),r=await v(i),n={};return t.map(((e,t)=>n[e]=r[t])),n}const t=e;return Promise.allSettled(t).then((e=>Array.from(t,((t,i)=>{const r=e[i];return"fulfilled"===r.status?{promise:t,value:r.value}:{promise:t,error:r.reason}}))))}async function _(e){return(await Promise.allSettled(e)).filter((e=>"fulfilled"===e.status)).map((e=>e.value))}async function b(e){return(await Promise.allSettled(e)).filter((e=>"rejected"===e.status)).map((e=>e.reason))}function w(e,t=void 0,i){const r=new AbortController;return d(i,(()=>r.abort())),new Promise(((i,n)=>{let s=setTimeout((()=>{s=0,i(t)}),e);d(r,(()=>{s&&(clearTimeout(s),n(a()))}))}))}function M(e,t){const i=new AbortController,r=setTimeout((()=>i.abort()),t);return d(e,(()=>{i.abort(),clearTimeout(r)})),{...e,signal:i.signal}}function T(e){return e&&"function"==typeof e.then}function S(e){return T(e)?e:Promise.resolve(e)}function A(e,t=-1){let i,r,n,s,o=null;const l=(...c)=>{if(i){r=c,s&&s.reject(a()),s=E();const e=s.promise;if(o){const e=o;o=null,e.abort()}return e}if(n=s||E(),s=null,t>0){const r=new AbortController;i=S(e(...c,r.signal));const n=i;w(t).then((()=>{i===n&&(s?r.abort():o=r)}))}else i=1,i=S(e(...c));const h=()=>{const e=r;r=n=i=o=null,null!=e&&l(...e)},u=i,p=n;return u.then(h,h),u.then(p.resolve,p.reject),p.promise};return l}function E(){let e,t;const i=new Promise(((i,r)=>{e=i,t=r})),n=t=>{e(t)};return n.resolve=t=>e(t),n.reject=e=>t(e),n.timeout=(e,t)=>r.p.setTimeout((()=>n.reject(t)),e),n.promise=i,n}async function x(e){await Promise.resolve(),l(e)}},7743:(e,t,i)=>{"use strict";i.d(t,{IV:()=>f,T9:()=>c,Wq:()=>o,d_:()=>n,g2:()=>u,gT:()=>s,hs:()=>h,iT:()=>d,kM:()=>a,l3:()=>l,n0:()=>y,r7:()=>p});var r=i(5262);function n(e,t){return{type:(0,r.t$)(t),value:e,unit:t}}function s(e,t){return{type:(0,r.t$)(t),value:e,unit:t}}function o(e,t,i="arithmetic"){return{type:(0,r.t$)(t),value:e,unit:t,rotationType:i}}function a(e,t){const i=l(e,t);return"angle"===e.type?o(i,t,e.rotationType):function(e,t){return{type:(0,r.t$)(t),value:e,unit:t}}(i,t)}function l(e,t){return(0,r.oU)(e.value,e.unit,t)}function c(e,t){return null==e?t:null==t||e.value>(0,r.oU)(t.value,t.unit,e.unit)?e:t}function h(e,t){return null==e?null:{...e,value:e.value*t}}function u(e,t,i){if(t===i)return e;switch(i){case"arithmetic":case"geographic":return 90-e}}const p=n(0,"meters"),d=s(0,"square-meters"),f=(o(0,"radians"),o(0,"degrees")),y=o(0,"degrees","geographic")},61985:(e,t,i)=>{"use strict";i.d(t,{C1:()=>g,C_:()=>f,OH:()=>_,Vh:()=>b,lZ:()=>v,on:()=>d,pc:()=>w,wB:()=>h,z7:()=>u});var r=i(3132),n=i(58842),s=i(92840),o=i(70214),a=i(57725),l=i(37623),c=i(10319);function h(e,t,i={}){return p(e,t,i,y)}function u(e,t,i={}){return p(e,t,i,m)}function p(e,t,i={},r){let n=null;const s=i.once?(e,i)=>{r(e)&&((0,a.xt)(n),t(e,i))}:(e,i)=>{r(e)&&t(e,i)};if(n=(0,c.Cn)(e,s,i.sync,i.equals),i.initial){const t=e();s(t,t)}return n}function d(e,t,i,r={}){let n=null,l=null,c=null;function u(){n&&l&&(l.remove(),r.onListenerRemove?.(n),n=null,l=null)}function p(e){r.once&&r.once&&(0,a.xt)(c),i(e)}const d=h(e,((e,i)=>{u(),(0,s.wb)(e)&&(n=e,l=(0,s.on)(e,t,p),r.onListenerAdd?.(e))}),{sync:r.sync,initial:!0});return c=(0,o.hA)((()=>{d.remove(),u()})),c}function f(e,t){return function(e,t,i){if((0,l.G4)(i))return Promise.reject((0,l.NK)());const r=e();if(t?.(r))return Promise.resolve(r);let n=null;function s(){n=(0,a.xt)(n)}return new Promise(((r,a)=>{n=(0,o.vE)([(0,l.u7)(i,(()=>{s(),a((0,l.NK)())})),p(e,(e=>{s(),r(e)}),{sync:!1,once:!0},t??y)])}))}(e,m,t)}function y(e){return!0}function m(e){return!!e}function g(e,t,i={}){let r=!1;const n=h(e,((e,i)=>{r||t(e,i)}),i);return{remove(){n.remove()},pause(){r=!0},resume(){r=!1}}}function v(e,t){const i=new n.A,s=function(e,t){const i=new n.A,r=d(e,"after-splice",(({added:e,start:r,deleteCount:n})=>{const s=i.splice(r,n);for(const e of s)e.remove();if(e?.length){const n=e.map(t);i.addMany(n,r)}}),{sync:!0,onListenerRemove:()=>i.drain((e=>e.remove())),onListenerAdd:e=>i.addMany(e.items.map(t))});return i.addHandles(r),i}(e,(e=>(0,r.UT)((async i=>{const r=await t(e,i);if((0,l.G4)(i))throw r.remove(),(0,l.NK)();return r})))),a=()=>null,c=async e=>{const t=await e.promise,r=s.indexOf(e);r<0||i.splice(r,1,t)};i.addMany(s.items.map(a));for(const e of s)(0,l.QZ)(c(e));const h=s.on("after-splice",(({added:e,start:t,deleteCount:r})=>{const n=i.splice(t,r);for(const e of n)e?.remove();if(e?.length){i.addMany(e.map(a),t);for(const t of e)(0,l.QZ)(c(t))}}));return i.addHandles([(0,o.DQ)(s),h]),i}i(89370);const _={sync:!0},b={initial:!0},w={sync:!0,initial:!0}},9987:(e,t,i)=>{"use strict";i.d(t,{$m:()=>E,NO:()=>A,_:()=>g,md:()=>S,mg:()=>v});var r=i(71709),n=i(28335),s=i(41785),o=i(37623),a=i(67900);class l{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}}class c{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}}let h=0;const u={time:(0,a.l5)(0),deltaTime:(0,a.l5)(0),elapsedFrameTime:(0,a.l5)(0),frameDuration:(0,a.l5)(0)},p=["prepare","preRender","render","postRender","update","finish"],d=[],f=new s.A;class y{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}const m={frameTasks:f,willDispatch:!1,clearFrameTasks:function(e=!1){f.forAll((e=>{e.removed=!0})),e&&M()},dispatch:T,executeFrameTasks:function(e){const t=(0,a.l5)(e-h);h=e;const i=1e3/60,r=Math.max(0,t-i);u.time=e,u.frameDuration=(0,a.l5)(i-r);for(let i=0;i<p.length;i++){const r=performance.now(),n=p[i];f.forAll((r=>{r.paused||r.removed||(0===i&&r.ticks++,r.phases[n]&&(u.elapsedFrameTime=(0,a.l5)(performance.now()-e),u.deltaTime=0===r.ticks?(0,a.l5)(0):t,r.phases[n]?.call(r,u)))})),x[i].record(performance.now()-r)}M(),I.record(performance.now()-e)},reschedule:function(){null!=_&&(cancelAnimationFrame(_),_=requestAnimationFrame(b))}};function g(e){const t=new c(e);return d.push(t),m.willDispatch||(m.willDispatch=!0,(0,r.d)(T)),t}function v(e){const t=new l(e);return f.push(t),null==_&&(h=performance.now(),_=requestAnimationFrame(b)),new y(t)}let _=null;function b(){const e=performance.now();_=null,_=f.length>0?requestAnimationFrame(b):null,m.executeFrameTasks(e)}const w=new s.A;function M(){f.forAll((e=>{e.removed&&w.push(e)})),f.removeUnorderedMany(w.data,w.length),w.clear()}function T(){for(;d.length;){const e=d.shift();e.isActive&&e.callback()}m.willDispatch=!1}function S(e=1,t){const i=(0,o.Tw)(),n=()=>{(0,o.G4)(t)?i.reject((0,o.NK)()):0===e?i():(--e,(0,r.d)((()=>n())))};return n(),i.promise}function A(e){return S(1,e)}async function E(){await A(),await new Promise((e=>requestAnimationFrame(e)))}const x=p.map((e=>new n.A(e))),I=new n.A("total")},23572:(e,t,i)=>{"use strict";i.d(t,{Lz:()=>o,PN:()=>a,PR:()=>y,QG:()=>u,WA:()=>m,cr:()=>l,gs:()=>h,rX:()=>d,r_:()=>p,sc:()=>f,tc:()=>c});const r=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,n="screenUtils.toPt: input not recognized!",s=96;function o(e){return e?e/72*s:0}function a(e){return e?72*e/s:0}function l(e){if("string"==typeof e){const t=e.match(r);if(t){const i=Number(t[1]),r=t[3]&&t[3].toLowerCase(),n="-"===e.charAt(0),s="px"===r?a(i):i;return n?-s:s}return console.warn(n),null}return e}function c(e=0,t=0){return{x:e,y:t}}function h(e=0,t=0){return[e,t]}function u(e=0,t=0){return[e,t]}function p(e=0,t=0,i=0){return[e,t,i]}function d(e){return e}function f(e){return e}function y(e){return e}function m(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}},39369:(e,t,i)=>{"use strict";i.d(t,{v:()=>a});var r=i(15565),n=i(99595),s=i(29745);class o{constructor(e,t){this._observable=new s.I,this._value=e,this._equalityFunction=t}get value(){return(0,n.gc)(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}}function a(e,t=r.gh){return new o(e,t)}},80189:(e,t,i)=>{"use strict";async function r(e,t){const{WhereClause:r}=await Promise.all([i.e(6984),i.e(4812)]).then(i.bind(i,76984));return r.create(e,t)}function n(e,t){return null!=e&&""!==e?null!=t&&""!==t?`(${e}) AND (${t})`:e:t}i.d(t,{G:()=>r,m:()=>n})},69967:(e,t,i)=>{"use strict";i.d(t,{GB:()=>n,Qo:()=>o,Y4:()=>s});var r=i(96285);class n{}function s(e){return e instanceof r.bo?e===n.instance:"unknown"===e?.toString().toLowerCase()}function o(e){return s(e)?n.instance:e}n.instance=new r.oh("Etc/UTC")},21332:(e,t,i)=>{"use strict";i.d(t,{Cj:()=>a,HC:()=>o,Wm:()=>l,_e:()=>c,mk:()=>h});var r=i(21750);const n=/\{([^\}]+)\}/g;function s(e){return e??""}function o(e,t){return t?e.replaceAll(n,"object"==typeof t?(e,i)=>s((0,r.wc)(i,t)):(e,i)=>s(t(i))):e}function a(e,t){return e.replaceAll(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,(e=>t&&t.includes(e)?e:`\\${e}`))}function l(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}function c(e){return(new DOMParser).parseFromString(e||"","text/html").body.innerText||""}function h(e,t){return new RegExp(`{${t}}`,"ig").test(e)}},15909:(e,t,i)=>{"use strict";i.d(t,{C:()=>c,X:()=>l});var r=i(82392),n=i(58842),s=i(48),o=(i(6273),i(80861),i(81482)),a=(i(67498),i(26325));let l=class extends n.A{constructor(e){super(e),this.addHandles([this.on("before-add",(e=>{null==e.item&&e.preventDefault()})),this.on("after-add",(e=>this._own(e.item))),this.on("after-remove",(e=>this._release(e.item)))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(n.A.ofType(this.itemType.Type))(e):new n.A(e)}};function c(e,t){return{type:e,cast:s.H,set(i){const r=(0,s.V)(i,this._get(t),e);r.owner=this,this._set(t,r)}}}(0,r._)([(0,o.MZ)()],l.prototype,"owner",null),l=(0,r._)([(0,a.$)("esri.core.support.OwningCollection")],l)},68660:(e,t,i)=>{"use strict";i.d(t,{U:()=>h});var r=i(82392),n=i(73783),s=i(70214),o=i(61985),a=i(9987),l=i(81482),c=i(26325);let h=class extends n.A{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,t,i={}){return this._installWatch(e,t,i,o.wB)}addWhen(e,t,i={}){return this._installWatch(e,t,i,o.z7)}addOnCollectionChange(e,t,{initial:i=!1,final:r=!1}={}){const n=++this._handleId;return this.addHandles([(0,o.on)(e,"after-changes",this._createSyncUpdatingCallback(),o.OH),(0,o.on)(e,"change",t,{onListenerAdd:i?e=>t({added:e.toArray(),removed:[]}):void 0,onListenerRemove:r?e=>t({added:[],removed:e.toArray()}):void 0})],n),(0,s.hA)((()=>this.removeHandles(n)))}addPromise(e){if(null==e)return e;const t=++this._handleId;this.addHandles((0,s.hA)((()=>{this._pendingPromises.delete(e)&&(0!==this._pendingPromises.size||this.hasHandles(u)||this._set("updating",!1))})),t),this._pendingPromises.add(e),this._set("updating",!0);const i=()=>this.removeHandles(t);return e.then(i,i),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,t,i={},r){const n=++this._handleId;i.sync||this._installSyncUpdatingWatch(e,n);const o=r(e,t,i);return this.addHandles(o,n),(0,s.hA)((()=>this.removeHandles(n)))}_installSyncUpdatingWatch(e,t){const i=this._createSyncUpdatingCallback(),r=(0,o.wB)(e,i,{sync:!0,equals:()=>!1});return this.addHandles(r,t),r}_createSyncUpdatingCallback(){return()=>{this.removeHandles(u),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles((0,a._)((()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(u))})),u)}}};(0,r._)([(0,l.MZ)({readOnly:!0})],h.prototype,"updating",void 0),h=(0,r._)([(0,c.$)("esri.core.support.UpdatingHandles")],h);const u=-42},67900:(e,t,i)=>{"use strict";function r(e){return e}function n(e){return 1e3*e}function s(e){return e}function o(e){return.001*e}i.d(t,{Kp:()=>s,gr:()=>n,l5:()=>r,y:()=>o})},11895:(e,t,i)=>{"use strict";i.d(t,{S1:()=>a,lL:()=>l,pJ:()=>h,t:()=>c,vf:()=>o});var r=i(50189),n=i(23375),s=i(96285);const o={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function a(e,t,i,o=n.qU){const a=new s.oh((0,r.wj)(o)),l=s.c9.fromJSDate(e,{zone:a}),c="decades"===i||"centuries"===i?"year":u(i);return"decades"===i&&(t*=10),"centuries"===i&&(t*=100),l.plus({[c]:t}).toJSDate()}function l(e,t,i=n.qU){const o=new s.oh((0,r.wj)(i)),a=s.c9.fromJSDate(e,{zone:o});if("decades"===t||"centuries"===t){const e=a.startOf("year"),{year:i}=e,r=i-i%("decades"===t?10:100);return e.set({year:r}).toJSDate()}const l=u(t);return a.startOf(l).toJSDate()}function c(e,t,i){return 0===e?0:e*o[t]/o[i]}function h(e,t){return e&&t?e.intersection(t):e||t}function u(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}},62088:(e,t,i)=>{"use strict";i.d(t,{Ek:()=>y,IY:()=>l,JI:()=>v,UR:()=>a,XJ:()=>u,_G:()=>h,a3:()=>b,aI:()=>d,cy:()=>f,dk:()=>_,dz:()=>s,jq:()=>c,mg:()=>o,mw:()=>n,vZ:()=>p,y9:()=>g,zQ:()=>m});var r=i(88188);function n(e){return e instanceof ArrayBuffer}function s(e){return"Int8Array"===e?.constructor?.name}function o(e){return"Uint8Array"===e?.constructor?.name}function a(e){return"Uint8ClampedArray"===e?.constructor?.name}function l(e){return"Int16Array"===e?.constructor?.name}function c(e){return"Uint16Array"===e?.constructor?.name}function h(e){return"Int32Array"===e?.constructor?.name}function u(e){return"Uint32Array"===e?.constructor?.name}function p(e){return"Float32Array"===e?.constructor?.name}function d(e){return"Float64Array"===e?.constructor?.name}function f(e){return!("buffer"in e)}function y(...e){return e.reduce(((e,t)=>e+(t?f(t)?(0,r.zd)(t,(0,r.f3)()):t.byteLength+m:0)),0)}i(6273);const m=145,g=1024;function v(e){return d(e)||p(e)||h(e)||l(e)||s(e)}function _(e){return d(e)||p(e)}function b(e){return d(e)?179769e303:p(e)?3402823e32:u(e)?4294967295:c(e)?65535:o(e)||a(e)?255:h(e)?2147483647:l(e)?32767:s(e)?127:256}},78851:(e,t,i)=>{"use strict";i.d(t,{c:()=>n});let r=0;function n(){return++r}},5262:(e,t,i)=>{"use strict";i.d(t,{Ao:()=>j,B5:()=>$,G9:()=>P,GA:()=>F,Ij:()=>V,KX:()=>Z,LA:()=>R,OU:()=>C,Sk:()=>J,TL:()=>L,_H:()=>G,b$:()=>X,dk:()=>Y,dy:()=>l,jM:()=>K,k1:()=>D,m5:()=>A,mq:()=>B,oU:()=>T,t$:()=>w,tW:()=>E,vl:()=>O,wL:()=>S,wv:()=>N,x$:()=>I,x0:()=>x,x1:()=>q,y7:()=>k}),i(6273);var r=i(1817),n=i(34670),s=i(99263),o=i(67488),a=i(40969);const l=39.37,c=s.$O.radius*Math.PI/200,h=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,u=a.A,p=/UNIT\[([^\]]+)]/i,d=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),f=(0,r.O)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),y=e=>e*e,m=e=>e*e*e,g={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:y(.001)},"square-centimeters":{inBaseUnits:y(.01)},"square-decimeters":{inBaseUnits:y(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:y(1e3)},"square-inches":{inBaseUnits:y(.0254)},"square-feet":{inBaseUnits:y(.3048)},"square-yards":{inBaseUnits:y(.9144)},"square-miles":{inBaseUnits:y(1609.344)},"square-us-feet":{inBaseUnits:y(1200/3937)},acres:{inBaseUnits:.0015625*y(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*m(.001)},"cubic-centimeters":{inBaseUnits:1e3*m(.01)},"cubic-decimeters":{inBaseUnits:1e3*m(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*m(1e3)},"cubic-inches":{inBaseUnits:1e3*m(.0254)},"cubic-feet":{inBaseUnits:1e3*m(.3048)},"cubic-yards":{inBaseUnits:1e3*m(.9144)},"cubic-miles":{inBaseUnits:1e3*m(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},v=(()=>{const e={};for(const t in g)for(const i in g[t].units)e[i]=t;return e})(),_=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],b=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function w(e){const t=v[e];if(!t)throw new Error("unknown type");return t}function M(e,t=null){return t=t||w(e),g[t].baseUnit===e}function T(e,t,i){if(t===i)return e;const r=w(t);if(r!==w(i))throw new Error("incompatible units");const n=M(t,r)?e:function(e,t,i){return e*g[i].units[t].inBaseUnits}(e,t,r);return M(i,r)?n:function(e,t,i){return e/g[i].units[t].inBaseUnits}(n,i,r)}function S(e){switch(e){case"metric":return"meters";case"imperial":return"feet";default:return e}}function A(e){return S(e)}function E(e){switch(e){case"metric":return"square-meters";case"imperial":return"square-feet";default:return e}}function x(e,t){const i=T(e,t,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function I(e,t){const i=T(e,t,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function C(e,t){const i=T(e,t,"feet");return Math.abs(i)<1e3?"feet":"miles"}function k(e,t){const i=T(e,t,"feet");return Math.abs(i)<1e5?"feet":"miles"}function N(e,t){const i=T(e,t,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function L(e,t){const i=T(e,t,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function O(e,t,i){return T(e,t,"meters")/(i*Math.PI/180)}function R(e){return f.fromJSON(e.toLowerCase())||null}function P(e){if(null!=e&&!(0,o.B3)(e))return 1;const t=F(e);return t>1e5?1:t}function D(e){return F(e)>=(0,n.tO)(e).metersPerDegree?"meters":V(e)}function F(e,t=s.$O.metersPerDegree){return j(e,!0)??t}function j(e,t=!1){const i=e?.wkid??null,r=e?.wkt2??e?.wkt??null;let n=null;if(i){if((0,o.tl)(i))return s.sH.metersPerDegree;if((0,o.ZL)(i))return s.Sw.metersPerDegree;n=u.values[u[i]],!n&&t&&d.has(i)&&(n=c)}else r&&(q(r)?n=z(h.exec(r),n):H(r)&&(n=z(p.exec(r),n)));return n}function Z(e){return(0,o.EA)(e)?1:F(e)}function z(e,t){return e?.[1]?U(e[1]):t}function U(e){return parseFloat(e.split(",")[1])}function V(e){const t=e?.wkid??null,i=e?.wkt2??e?.wkt??null;let r=null;if(t)r=u.units[u[t]];else if(i){const e=q(i)?h:H(i)?p:null;if(e){const t=e.exec(i);t?.[1]&&(r=function(e){const t=/[\\"']{1}([^\\"']+)/.exec(e);let i=t?.[1];if(!i||!u.units.includes(i)){const t=U(e);i=null;const r=u.values;for(let e=0;e<r.length;++e)if(Math.abs(t-r[e])<W){i=u.units[e];break}}return i}(t[1]))}}return null!=r?R(r):null}function G(e){const t=V(e);return null!=t&&_.includes(t)?t:null}function B(e){const t=D(e);return null!=t&&_.includes(t)?t:null}function $(e){const t=V(e);return null==t?null:b.get(t)}function H(e){return/^GEOCCS/i.test(e)}function q(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const W=1e-7;function K(e){const t=V(e);if(null==t)return null;switch(t){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}const Y=(0,r.O)()({esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"}),J=(0,r.O)()({esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"}),X=(0,r.O)()({esriDUDecimalDegrees:"degrees",esriDURadians:"radians"})},19759:(e,t,i)=>{"use strict";i.d(t,{$1:()=>Q,$z:()=>W,An:()=>x,BQ:()=>oe,DB:()=>J,FL:()=>V,FX:()=>U,Hg:()=>ie,IZ:()=>se,Il:()=>fe,N9:()=>ne,S8:()=>H,T1:()=>me,UC:()=>ye,V1:()=>$,XJ:()=>ve,Xq:()=>A,Zo:()=>Me,_0:()=>Se,a6:()=>we,b8:()=>F,e7:()=>de,fj:()=>q,gd:()=>E,lJ:()=>X,lM:()=>ce,m3:()=>le,nM:()=>pe,oP:()=>K,oy:()=>P,r$:()=>te,rs:()=>be,s0:()=>w,s2:()=>B,sC:()=>z,s_:()=>k,tk:()=>re,ut:()=>j,w8:()=>Y,x0:()=>C,xw:()=>Te,yM:()=>N,zf:()=>I,zi:()=>_e,zs:()=>D});var r=i(32083),n=i(3223),s=i(62991),o=i(84977),a=i(80861),l=i(9856),c=i(98593);const h=()=>a.A.getLogger("esri.core.urlUtils"),u=r.A.request,p="esri/config: esriConfig.request.proxyUrl is not set.",d=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,f=/^\s*http:/i,y=/^\s*https:/i,m=/^\s*file:/i,g=/:\d+$/,v=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,_=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),b=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class w{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let t=this.uri.match(_);this.scheme=t[2]||(t[1]?"":null),this.authority=t[4]||(t[3]?"":null),this.path=t[5],this.query=t[7]||(t[6]?"":null),this.fragment=t[9]||(t[8]?"":null),null!=this.authority&&(t=this.authority.match(b),this.user=t[3]||null,this.password=t[4]||null,this.host=t[6]||t[7],this.port=t[9]||null)}toString(){return this.uri}}const M={};let T=new w(r.A.applicationUrl);let S=function(){const e=T.path,t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${T.scheme}://${T.host}${null!=T.port?`:${T.port}`:""}${t}`}();const A=()=>T,E=()=>S;function x(e){if(!e)return null;const t={path:null,query:null},i=new w(e),r=e.indexOf("?");return null===i.query?t.path=e:(t.path=e.substring(0,r),t.query=I(i.query)),i.fragment&&(t.hash=i.fragment,null===i.query&&(t.path=t.path.substring(0,t.path.length-(i.fragment.length+1)))),t}function I(e){const t=e.split("&"),i={};for(const e of t){if(!e)continue;const t=e.indexOf("=");let r,n;t<0?(r=decodeURIComponent(e),n=""):(r=decodeURIComponent(e.slice(0,t)),n=decodeURIComponent(e.slice(t+1)));let s=i[r];"string"==typeof s&&(s=i[r]=[s]),Array.isArray(s)?s.push(n):i[r]=n}return i}function C(e,t){return e?t&&"function"==typeof t?Object.keys(e).map((i=>encodeURIComponent(i)+"="+encodeURIComponent(t(i,e[i])))).join("&"):Object.keys(e).map((i=>{const r=e[i];if(null==r)return"";const n=encodeURIComponent(i)+"=",s=t?.[i];return s?n+encodeURIComponent(s(r)):Array.isArray(r)?r.map((e=>(0,o.Wj)(e)?n+encodeURIComponent(JSON.stringify(e)):n+encodeURIComponent(e))).join("&"):(0,o.Wj)(r)?n+encodeURIComponent(JSON.stringify(r)):n+encodeURIComponent(r)})).filter((e=>e)).join("&"):""}function k(e=!1){let t,i=u.proxyUrl;if("string"==typeof e){t=le(e);const r=D(e);r&&(i=r.proxyUrl)}else t=!!e;if(!i)throw h().warn(p),new s.A("urlUtils:proxy-not-set",p);return t&&he()&&(i=ce(i)),x(i)}function N(e){const t=D(e);let i,r;if(t){const e=O(t.proxyUrl);i=e.path,r=e.query?I(e.query):null}if(i){const t=x(e);e=i+"?"+t.path;const n=C({...r,...t.query});n&&(e=`${e}?${n}`)}return e}const L={path:"",query:""};function O(e){const t=e.indexOf("?");return-1!==t?(L.path=e.slice(0,t),L.query=e.slice(t+1)):(L.path=e,L.query=null),L}function R(e){return(e=ue(e=fe(e=O(e).path),!0)).toLowerCase()}function P(e){const t={proxyUrl:e.proxyUrl,urlPrefix:R(e.urlPrefix)},i=u.proxyRules,r=t.urlPrefix;let n=i.length;for(let e=0;e<i.length;e++){const t=i[e].urlPrefix;if(0===r.indexOf(t)){if(r.length===t.length)return-1;n=e;break}0===t.indexOf(r)&&(n=e+1)}return i.splice(n,0,t),n}function D(e){const t=u.proxyRules,i=R(e);for(let e=0;e<t.length;e++)if(0===i.indexOf(t[e].urlPrefix))return t[e]}function F(e,t){if(!e||!t)return!1;e=Z(e),t=Z(t);const i=(0,l.p)(e),r=(0,l.p)(t);return null!=i&&null!=r?i.portalHostname===r.portalHostname:null==i&&null==r&&U(e,t,!0)}function j(e,t){return e=Z(e),t=Z(t),ue(e)===ue(t)}function Z(e){const t=(e=H(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function z(e){const t=t=>null==t||t instanceof RegExp&&t.test(e)||"string"==typeof t&&e.startsWith(t),i=u.interceptors;if(i)for(const e of i)if(Array.isArray(e.urls)){if(e.urls.some(t))return e}else if(t(e.urls))return e;return null}function U(e,t,i=!1){if(!e||!t)return!1;const r=ge(e),n=ge(t);return!(!i&&r.scheme!==n.scheme)&&null!=r.host&&null!=n.host&&r.host.toLowerCase()===n.host.toLowerCase()&&r.port===n.port}function V(e){if("string"==typeof e){if(!K(e))return!0;e=ge(e)}if(U(e,T))return!0;const t=u.trustedServers||[];for(let i=0;i<t.length;i++){const r=G(t[i]);for(let t=0;t<r.length;t++)if(U(e,r[t]))return!0}return!1}function G(e){return M[e]||(ae(e)||oe(e)?M[e]=[new w(B(e))]:M[e]=[new w(`http://${e}`),new w(`https://${e}`)]),M[e]}function B(e,t=S,i){return oe(e)?i&&i.preserveProtocolRelative?e:"http"===T.scheme&&T.authority===W(e).slice(2)?`http:${e}`:`https:${e}`:ae(e)?e:q("/"===e[0]?function(e){const t=e.indexOf("//"),i=e.indexOf("/",t+2);return-1===i?e:e.slice(0,i)}(t):t,e)}function $(e,t=S,i){if(null==e||!K(e))return e;const r=H(e),n=r.toLowerCase(),s=H(t).toLowerCase().replace(/\/+$/,""),o=i?H(i).toLowerCase().replace(/\/+$/,""):null;if(o&&0!==s.indexOf(o))return e;const a=(e,t,i)=>-1===(i=e.indexOf(t,i))?e.length:i;let l=a(n,"/",n.indexOf("//")+2),c=-1;for(;n.slice(0,l+1)===s.slice(0,l)+"/"&&(c=l+1,l!==n.length);)l=a(n,"/",l+1);if(-1===c)return e;if(o&&c<o.length)return e;e=r.slice(c);const h=s.slice(c-1).replaceAll(/[^/]+/g,"").length;if(h>0)for(let t=0;t<h;t++)e=`../${e}`;else e=`./${e}`;return e}function H(e){return function(e){const t=u.httpsDomains;if(!function(e){return null!=e&&f.test(e)||"http"===T.scheme&&oe(e)}(e))return e;const i=e.indexOf("/",7);let r;if(r=-1===i?e:e.slice(0,i),r=r.toLowerCase().slice(7),g.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return"http"===T.scheme&&r===T.authority&&!v.test(e)||(he()&&r===T.authority||t&&t.some((e=>r===e||r.endsWith(`.${e}`)))||he()&&!D(e))&&(e=ce(e)),e}(e=function(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}(e=function(e){if(/^https?:\/\//i.test(e)){const t=O(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}(e=B(e=e.trim()))))}function q(...e){const t=e.filter(n.Ru);if(!t?.length)return;const i=[];if(K(t[0])){const e=t[0],r=e.indexOf("//");-1!==r&&(i.push(e.slice(0,r+1)),function(e){return null!=e&&m.test(e)}(t[0])&&(i[0]+="/"),t[0]=e.slice(r+2))}else"/"===t[0][0]&&i.push("");const r=t.reduce(((e,t)=>t?e.concat(t.split("/")):e),[]);for(let e=0;e<r.length;e++){const t=r[e];".."===t&&i.length>0&&".."!==i[i.length-1]?i.pop():(!t&&e===r.length-1||t&&("."!==t||0===i.length))&&i.push(t)}return i.join("/")}function W(e,t=!1){if(null==e||Y(e)||J(e))return null;let i=e.indexOf("://");if(-1===i&&oe(e))i=2;else{if(-1===i)return null;i+=3}const r=e.indexOf("/",i);return-1!==r&&(e=e.slice(0,r)),t&&(e=ue(e,!0)),e}function K(e){return oe(e)||ae(e)}function Y(e){return null!=e&&"blob:"===e.slice(0,5)}function J(e){return null!=e&&"data:"===e.slice(0,5)}function X(e){const t=te(e);return t&&t.isBase64?(0,c.M)(t.data):null}function Q(e){return(0,c.Y)(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const ee=/^data:(.*?)(;base64)?,(.*)$/;function te(e){const t=e.match(ee);if(!t)return null;const[,i,r,n]=t;return{mediaType:i,isBase64:!!r,data:n}}function ie(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function re(e){return(await fetch(e)).blob()}function ne(e){const t=X(e);if(!t)return null;const i=te(e);return new Blob([t],{type:i.mediaType})}function se(e,t){!function(e,t){if(!e)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const r=URL.createObjectURL(e);i.download=t,i.href=r,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}(e,t)}function oe(e){return null!=e&&"/"===e[0]&&"/"===e[1]}function ae(e){return null!=e&&d.test(e)}function le(e){return null!=e&&y.test(e)||"https"===T.scheme&&oe(e)}function ce(e){return oe(e)?`https:${e}`:e.replace(f,"https:")}function he(){return"https"===T.scheme}function ue(e,t=!1){return oe(e)?e.slice(2):(e=e.replace(d,""),t&&e.length>1&&"/"===e[0]&&"/"===e[1]&&(e=e.slice(2)),e)}function pe(e){let t=0;if(K(e)){const i=e.indexOf("//");-1!==i&&(t=i+2)}const i=e.lastIndexOf("/");return i<t?e:e.slice(0,i+1)}function de(e,t){if(!e)return"";const i=x(e).path.replace(/\/+$/,""),r=i.substring(i.lastIndexOf("/")+1);if(!t?.length)return r;const n=new RegExp(`.(${t.join("|")})$`,"ig");return r.replace(n,"")}function fe(e){return e.endsWith("/")?e:`${e}/`}function ye(e){return e.replace(/\/+$/,"")}function me(e,t,i){if(!(t&&i&&e&&K(e)))return e;const r=e.indexOf("//"),n=e.indexOf("/",r+2),s=e.indexOf(":",r+2),o=Math.min(n<0?e.length:n,s<0?e.length:s);return e.slice(r+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,r+2)}${i}${e.slice(o)}`}function ge(e){return"string"==typeof e?new w(B(e)):(e.scheme||(e.scheme=T.scheme),e)}function ve(e){return Ee.test(e)}function _e(e,t){const i=x(e),r=Object.keys(i.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function be(e,t,i){const r=x(e),n=r.query||{};return n[t]=String(i),`${r.path}?${C(n)}`}function we(e,t){if(!t)return e;const i=x(e),r=i.query||{};for(const[e,i]of Object.entries(t))null!=i&&(r[e]=i);const n=C(r);return n?`${i.path}?${n}`:i.path}function Me(e){if(null==e)return null;const t=e.match(Ae);return t?t[2]:null}function Te(e){if(null==e)return null;const t=e.match(Ae);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function Se(e){return"string"==typeof e?te(e)??{data:e}:new Promise(((t,i)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(te(r.result)),r.onerror=e=>i(e)}))}const Ae=/([^.]*)\.([^\/]*)$/,Ee=/(^data:image\/svg|\.svg$)/i},1874:(e,t,i)=>{"use strict";i.d(t,{lk:()=>n,vD:()=>o,yS:()=>s});const r="randomUUID"in crypto;function n(){if(r)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=t=>e[t].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function s(){return`{${n().toUpperCase()}}`}function o(){return`{${n()}}`}},32809:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var r=i(70214),n=i(37623),s=i(57882),o=i(45878),a=i(87285),l=i(15331);class c{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new s.A}destroy(){this.close()}get closed(){return!this._clients?.length}open(e,t){return new Promise(((i,r)=>{let s=!0;const o=e=>{(0,n.Te)(t.signal),s&&(s=!1,e())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let s=0;s<e.length;++s){const a=e[s];(0,n.$X)(a)?this._clientPromises[s]=a.then((e=>(this._clients[s]=new l.A(e,t,this._ongoingJobsQueue),o(i),this._clients[s])),(()=>(o(r),null))):(this._clients[s]=new l.A(a,t,this._ongoingJobsQueue),this._clientPromises[s]=Promise.resolve(this._clients[s]),o(i))}}))}broadcast(e,t,i){const r=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const s=this._clientPromises[n];r[n]=s.then((r=>r?.invoke(e,t,i)))}return r}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject((0,n.NK)(`Worker closing, aborting job calling '${e.methodName}'`));for(const e of this._clientPromises)e.then((e=>e?.close()));this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,(0,o.h)(this)}invoke(e,t,i){return this.apply(e,[t],i)}apply(e,t,i){const r=(0,n.Tw)();this._ongoingJobsQueue.push({methodName:e,data:t,invokeOptions:i,resolver:r});for(let e=0;e<this._clientPromises.length;e++){const t=this._clients[e];t?t.jobAdded():this._clientPromises[e].then((e=>e?.jobAdded()))}return r.promise}createInvokeProxy(e){return(0,a.L)(this,e)}on(e,t){return Promise.all(this._clientPromises).then((()=>(0,r.vE)(this._clients.map((i=>i.on(e,t))))))}openPorts(){return new Promise((e=>{const t=new Array(this._clientPromises.length);let i=t.length;for(let r=0;r<this._clientPromises.length;++r)this._clientPromises[r].then((n=>{n&&(t[r]=n.openPort()),0==--i&&e(t)}))}))}get test(){return{numClients:this._clients.length}}}},87285:(e,t,i)=>{"use strict";i.d(t,{L:()=>n});var r=i(2236);function n(e,t,i){return new Proxy({},{get:(n,s,o)=>(...n)=>{let o,a;const l=n[n.length-1];var c;"object"==typeof(c=l)&&!Array.isArray(c)&&null!=c&&("signal"in c||"transferList"in c||0===Object.keys(c).length)&&(o=l.signal,a=l.transferList,n.pop());const h=e.apply(t?`${t}.${s.toString()}`:s.toString(),n,{transferList:a,signal:o});return i?.ignoreConnectionErrors?(0,r.oV)(h):h}})}},15331:(e,t,i)=>{"use strict";i.d(t,{A:()=>b});var r=i(6480),n=i(62991),s=i(92840),o=i(70214),a=i(57725),l=i(37623),c=i(87285);const h={statsWorker:()=>Promise.all([i.e(8310),i.e(5210)]).then(i.bind(i,25210)),geometryEngineWorker:()=>i.e(828).then(i.bind(i,30828)),CSVSourceWorker:()=>Promise.all([i.e(1924),i.e(6984),i.e(8310),i.e(2446),i.e(1582),i.e(9628)]).then(i.bind(i,89628)),EdgeProcessingWorker:()=>Promise.all([i.e(4197),i.e(3651),i.e(8853)]).then(i.bind(i,98853)),ElevationSamplerWorker:()=>i.e(4520).then(i.bind(i,84520)),FeatureServiceSnappingSourceWorker:()=>Promise.all([i.e(1924),i.e(6984),i.e(8310),i.e(2446),i.e(1582),i.e(3474)]).then(i.bind(i,53474)),GeoJSONSourceWorker:()=>Promise.all([i.e(1924),i.e(6984),i.e(8310),i.e(2446),i.e(1582),i.e(8601)]).then(i.bind(i,68601)),LercWorker:()=>i.e(7748).then(i.bind(i,57748)),MemorySourceWorker:()=>Promise.all([i.e(1924),i.e(6984),i.e(8310),i.e(2446),i.e(1582),i.e(1277)]).then(i.bind(i,81277)),PBFDecoderWorker:()=>Promise.all([i.e(8083),i.e(2089)]).then(i.bind(i,72089)),FeaturePipelineWorker:()=>Promise.all([i.e(9958),i.e(3849),i.e(8764),i.e(9018),i.e(2644),i.e(1924),i.e(5506),i.e(6984),i.e(1385),i.e(8310),i.e(2446),i.e(9155),i.e(2946)]).then(i.bind(i,4782)),PointCloudWorker:()=>i.e(757).then(i.bind(i,40757)),RasterWorker:()=>Promise.all([i.e(2672),i.e(6479),i.e(3758),i.e(2629)]).then(i.bind(i,62629)),SceneLayerSnappingSourceWorker:()=>Promise.all([i.e(4197),i.e(3651),i.e(2161)]).then(i.bind(i,72161)),SceneLayerWorker:()=>Promise.all([i.e(8842),i.e(1903),i.e(9837)]).then(i.bind(i,5227)),WFSSourceWorker:()=>Promise.all([i.e(1924),i.e(6984),i.e(8310),i.e(2446),i.e(1582),i.e(8264)]).then(i.bind(i,98264)),WorkerTileHandler:()=>Promise.all([i.e(9018),i.e(114),i.e(8536)]).then(i.bind(i,92657)),Lyr3DWorker:()=>i.e(5383).then(i.bind(i,55383))};var u=i(2236),p=i(74872);const{CLOSE:d,ABORT:f,INVOKE:y,RESPONSE:m,OPEN_PORT:g,ON:v}=u.Go;class _{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}push(e){e.type===u.Go.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),null===this._timer&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class b{static connect(e){const t=new MessageChannel;let i;i="function"==typeof e?new e:"default"in e&&"function"==typeof e.default?new e.default:e;const r=new b(t.port1,{channel:t,client:i});return"object"==typeof i&&"remoteClient"in i&&(i.remoteClient=r),b.clients.set(r,i),t.port2}static loadWorker(e){const t=h[e];return t?t():Promise.resolve(null)}constructor(e,t,i){this._port=e,this._jobQueue=i,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new _((e=>this._onInvokeMessage(e))),this._client=t.client,this._onMessage=this._onMessage.bind(this),this._channel=t.channel,this._schedule=t.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:d}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,t,i){return this.apply(e,[t],i)}apply(e,t,i){const r=i?.signal,s=i?.transferList;if(!this._port)return Promise.reject(new n.A(u.T,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:t}));const o=(0,u.Jc)();return new Promise(((i,n)=>{if((0,l.G4)(r))return this._processWork(),void n((0,l.NK)());const c=(0,l.u7)(r,(()=>{const e=this._outJobs.get(o);e&&(this._outJobs.delete(o),this._processWork(),(0,a.xt)(e.abortHandle),this._post({type:f,jobId:o}),n((0,l.NK)()))})),h={resolve:i,reject:n,abortHandle:c,debugInfo:e};this._outJobs.set(o,h),this._post({type:y,jobId:o,methodName:e,abortable:null!=r},t,s)}))}createInvokeProxy(e,t){return(0,c.L)(this,e,t)}on(e,t){const i=new MessageChannel;function r(e){t(e.data)}return this._port.postMessage({type:u.Go.ON,eventType:e,port:i.port2},[i.port2]),i.port1.addEventListener("message",r),i.port1.start(),(0,o.hA)((()=>{i.port1.postMessage({type:u.Go.CLOSE}),i.port1.close(),i.port1.removeEventListener("message",r)}))}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:g,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=2)return;const e=this._jobQueue?.pop();if(!e)return;const{methodName:t,data:i,invokeOptions:r,resolver:n}=e;this.apply(t,i,r).then((e=>n.resolve(e))).catch((e=>n.reject(e)))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach((e=>{(0,a.xt)(e.abortHandle),e.reject((0,l.NK)(`Worker closing, aborting job calling '${e.debugInfo}'`))})),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(e){null!=this._schedule?this._schedule((()=>this._processMessage(e))):this._processMessage(e)}_processMessage(e){const t=(0,u.VI)(e);if(t)switch(t.type){case m:this._onResponseMessage(t);break;case y:this._invokeQueue.push(t);break;case f:this._onAbortMessage(t);break;case d:this._onCloseMessage();break;case g:this._onOpenPortMessage(t);break;case v:this._onOnMessage(t)}}_onAbortMessage(e){const t=this._inJobs,i=e.jobId,r=t.get(i);this._invokeQueue.push(e),r&&(r.controller&&r.controller.abort(),t.delete(i))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&b.clients.get(this)===e&&e.destroy(),b.clients.delete(this),e?.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:t,jobId:i,data:r=[],abortable:n}=e,s=n?new AbortController:null,o=this._inJobs;let a,c=this._client,h=c[t];try{if(!h&&t&&t.includes(".")){const e=t.split(".");for(let t=0;t<e.length-1;t++)c=c[e[t]],h=c[e[t+1]]}if("function"!=typeof h)throw new TypeError(`${t} is not a function`);r.push({client:this,signal:s?s.signal:null}),a=h.apply(c,r)}catch(e){return void this._post({type:m,jobId:i,error:(0,u.mF)(e)})}(0,l.$X)(a)?(o.set(i,{controller:s,promise:a}),a.then((e=>{o.has(i)&&(o.delete(i),this._post({type:m,jobId:i},e))}),(e=>{o.has(i)&&(o.delete(i),(0,l.zf)(e)||this._post({type:m,jobId:i,error:(0,u.mF)(e||{message:`Error encountered at method ${t}`})}))}))):this._post({type:m,jobId:i},a)}_onOpenPortMessage(e){new b(e.port,{client:this._client})}_onOnMessage(e){const{port:t}=e,i=this._client.on(e.eventType,(e=>{t.postMessage(e)})),r=(0,s.on)(e.port,"message",(e=>{const n=(0,u.VI)(e);n?.type===u.Go.CLOSE&&(r.remove(),i.remove(),t.close())}))}_onResponseMessage(e){const{jobId:t,error:i,data:r}=e,s=this._outJobs;if(!s.has(t))return;const o=s.get(t);s.delete(t),this._processWork(),(0,a.xt)(o.abortHandle),i?o.reject(n.A.fromJSON(JSON.parse(i))):o.resolve(r)}_post(e,t,i){return(0,u.u1)(this._port,e,t,i)}}b.kernelInfo={buildDate:p.$,fullVersion:r.ol,revision:p.u},b.clients=new Map},45878:(e,t,i)=>{"use strict";i.d(t,{h:()=>s,k:()=>n});const r=new FinalizationRegistry((e=>{e.close()}));function n(e,t){r.register(e,t,t)}function s(e){r.unregister(e)}},2236:(e,t,i)=>{"use strict";i.d(t,{Go:()=>o,Jc:()=>c,T:()=>s,VI:()=>p,mF:()=>h,oV:()=>f,u1:()=>u});var r=i(6273),n=i(37623);const s="worker:port-closed";var o,a;(a=o||(o={}))[a.HANDSHAKE=0]="HANDSHAKE",a[a.OPEN=1]="OPEN",a[a.OPENED=2]="OPENED",a[a.RESPONSE=3]="RESPONSE",a[a.INVOKE=4]="INVOKE",a[a.ABORT=5]="ABORT",a[a.CLOSE=6]="CLOSE",a[a.OPEN_PORT=7]="OPEN_PORT",a[a.ON=8]="ON";let l=0;function c(){return l++}function h(e){return e?"string"==typeof e?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function u(e,t,i,n){if(t.type===o.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==o.INVOKE&&t.type!==o.RESPONSE)return void e.postMessage(t);let s;if(function(e){return e&&"object"==typeof e&&("result"in e||"transferList"in e)}(i)?(s=d(i.transferList),t.data=i.result):(s=d(n),t.data=i),s){if((0,r.A)("ff"))for(const i of s)if("byteLength"in i&&i.byteLength>267386880){const i="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case o.INVOKE:throw i;case o.RESPONSE:return void u(e,{type:o.RESPONSE,jobId:t.jobId,error:h(i)})}}e.postMessage(t,s)}else e.postMessage(t)}function p(e){if(!e)return null;const t=e.data;return t?"string"==typeof t?JSON.parse(t):t:null}function d(e){if(!e?.length)return null;if((0,r.A)("esri-workers-arraybuffer-transfer"))return e;const t=e.filter((e=>!function(e){return e instanceof ArrayBuffer||"ArrayBuffer"===e?.constructor?.name}(e)));return t.length?t:null}async function f(e){try{return await e}catch(e){const t=e?.name===s;if(!(0,n.zf)(e)&&!t)throw e;return}}},73462:(e,t,i)=>{"use strict";i.d(t,{n_:()=>U,ho:()=>G});var r=i(62991),n=i(6273),s=i(37623),o=i(32809),a=i(45878),l=i(15331),c=i(80861),h=i(57725),u=i(38116),p=i(19759);const d={async request(e,t){const i=e.options,r=i.responseType;i.signal=t?.signal,i.responseType="native"===r||"native-request-init"===r?"native-request-init":r&&["blob","json","text"].includes(r)&&(0,p.sC)(e.url)?.after?r:"array-buffer";const n=await(0,u.A)(e.url,i),s={data:n.data,httpStatus:n.httpStatus,ssl:n.ssl};switch(n.requestOptions?.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=(new TextEncoder).encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=(new TextEncoder).encode(s.data).buffer}return{result:s,transferList:[s.data]}}};var f=i(2236),y=i(44764),m=i(32083),g=(i(39553),i(6480));const v={};var _=i(71709);class b{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach((t=>{this[t]=(...i)=>e[t](...i)}))}}class w{constructor(){this._dispatcher=new b,this._workerPostMessage({type:f.Go.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){(0,_.d)((()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))}))}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,t,i){this._dispatcher.addEventListener(e,t,i)}removeEventListener(e,t,i){this._dispatcher.removeEventListener(e,t,i)}_workerPostMessage(e){(0,_.d)((()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))}))}async _workerMessageHandler(e){const t=(0,f.VI)(e);if(t&&t.type===f.Go.OPEN){const{modulePath:e,jobId:i}=t;let r=await l.A.loadWorker(e);r||(r=await import(e));const n=l.A.connect(r);this._workerPostMessage({type:f.Go.OPENED,jobId:i,data:n})}}}var M=i(4631),T=i(74872);const S=()=>c.A.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:A}=f.Go;let E,x;const I="Failed to create Worker. Fallback to execute module in main thread";async function C(e){return new Promise((t=>{function i(n){const s=(0,f.VI)(n);s&&s.type===A&&(e.removeEventListener("message",i),e.removeEventListener("error",r),t(e))}function r(t){t.preventDefault(),e.removeEventListener("message",i),e.removeEventListener("error",r),S().warn("Failed to create Worker. Fallback to execute module in main thread",t),(e=new w).addEventListener("message",i),e.addEventListener("error",r)}e.addEventListener("message",i),e.addEventListener("error",r)}))}let k=0;const{ABORT:N,INVOKE:L,OPEN:O,OPENED:R,RESPONSE:P}=f.Go;class D{static async create(e){const t=await async function(){if(!(0,n.A)("esri-workers"))return C(new w);if(!E&&!x)try{const e='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,s)=>{if(t){if(t.aborted)return s(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:ABORT,jobId:n}),s(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:s}),self.postMessage({type:INVOKE,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\\nModules version: ${r}\\nAssets version: ${n??s}\\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case OPEN:let n;function t(e){const o=n.connect(e);self.postMessage({type:OPENED,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case RESPONSE:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});'.split('"{CONFIGURATION}"').join(`'${function(){let e;if(null!=m.A.default){const t={...m.A};delete t.default,e=JSON.parse(JSON.stringify(t))}else e=JSON.parse(JSON.stringify(m.A));e.assetsPath=(0,p.s2)(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?(0,p.s2)(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=(0,M.JK)(),e.has={"esri-csp-restrictions":(0,n.A)("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":(0,n.A)("esri-2d-update-debug"),"esri-2d-log-updating":(0,n.A)("esri-2d-log-updating"),"featurelayer-pbf":(0,n.A)("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":(0,n.A)("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":(0,n.A)("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":(0,n.A)("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":(0,n.A)("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":(0,n.A)("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":(0,n.A)("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":(0,n.A)("featurelayer-snapshot-enabled"),"esri-atomics":(0,n.A)("esri-atomics"),"esri-shared-array-buffer":(0,n.A)("esri-shared-array-buffer"),"esri-tiles-debug":(0,n.A)("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":(0,n.A)("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":(0,n.A)("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=(0,p.s2)(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=(0,p.s2)(e.workers.workerPath):e.workers.workerPath=(0,p.s2)((0,y.s)("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=m.A.workers.loaderConfig,i=function(e){const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages?.concat()||[],paths:{...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=v.baseUrl),t}({baseUrl:t?.baseUrl,locale:(0,M.JK)(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t?.has},map:{...t?.map},paths:{...t?.paths},packages:t?.packages||[]}),r={buildDate:T.$,fullVersion:g.ol,revision:T.u};return JSON.stringify({esriConfig:e,loaderConfig:i,kernelInfo:r})}()}'`);E=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){x=e||{}}let e;if(E)try{e=new Worker(E,{name:"esri-worker-"+k++})}catch(t){S().warn(I,x),e=new w}else S().warn(I,x),e=new w;return C(e)}();return new D(t,e)}constructor(e,t){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=t,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",(e=>{e.preventDefault(),c.A.getLogger("esri.core.workers.WorkerOwner").error(e)}))}terminate(){this.worker.terminate()}async open(e,t={}){const{signal:i}=t,r=(0,f.Jc)();return new Promise(((t,n)=>{const o={resolve:t,reject:n,abortHandle:(0,s.NY)(i,(()=>{this._outJobs.delete(r),this._post({type:N,jobId:r})}))};this._outJobs.set(r,o),this._post({type:O,jobId:r,modulePath:e})}))}_onMessage(e){const t=(0,f.VI)(e);if(t)switch(t.type){case R:this._onOpenedMessage(t);break;case P:this._onResponseMessage(t);break;case N:this._onAbortMessage(t);break;case L:this._onInvokeMessage(t)}}_onAbortMessage(e){const t=this._inJobs,i=e.jobId,r=t.get(i);r&&(r.controller&&r.controller.abort(),t.delete(i))}_onInvokeMessage(e){const{methodName:t,jobId:i,data:r,abortable:n}=e,o=n?new AbortController:null,a=this._inJobs,l=d[t];let c;try{if("function"!=typeof l)throw new TypeError(`${t} is not a function`);c=l.call(null,r,{signal:o?o.signal:null})}catch(e){return void this._post({type:P,jobId:i,error:(0,f.mF)(e)})}(0,s.$X)(c)?(a.set(i,{controller:o,promise:c}),c.then((e=>{a.has(i)&&(a.delete(i),this._post({type:P,jobId:i},e))}),(e=>{a.has(i)&&(a.delete(i),e||(e={message:"Error encountered at method"+t}),(0,s.zf)(e)||this._post({type:P,jobId:i,error:(0,f.mF)(e||{message:`Error encountered at method ${t}`})}))}))):this._post({type:P,jobId:i},c)}_onOpenedMessage(e){const{jobId:t,data:i}=e,r=this._outJobs.get(t);r&&(this._outJobs.delete(t),(0,h.xt)(r.abortHandle),r.resolve(i))}_onResponseMessage(e){const{jobId:t,error:i,data:n}=e,s=this._outJobs.get(t);s&&(this._outJobs.delete(t),(0,h.xt)(s.abortHandle),i?s.reject(r.A.fromJSON(JSON.parse(i))):s.resolve(n))}_post(e,t,i){return(0,f.u1)(this.worker,e,t,i)}}const F=(0,n.A)("host-browser")?Math.min(navigator.hardwareConcurrency-1,(0,n.A)("workers-pool-size")):0;let j=(0,n.A)("esri-mobile")?Math.min(F,3):F;j||(j=(0,n.A)("safari")&&(0,n.A)("mac")?7:2);let Z=0;const z=[];function U(){H()}async function V(e,t){const i=new o.A,{registryTarget:r,...n}=t;return await i.open(e,n),r&&(0,a.k)(r,i),i}async function G(e,t={}){if("string"!=typeof e)throw new r.A("workers:undefined-module","modulePath is missing");let i=t.strategy||"distributed";if((0,n.A)("host-webworker")&&!(0,n.A)("esri-workers")&&(i="local"),"local"===i){let i=await l.A.loadWorker(e);i||(i=await import(e)),(0,s.Te)(t.signal);const r=t.client||i;return V([l.A.connect(i)],{...t,client:r})}if(await H(),(0,s.Te)(t.signal),"dedicated"===i){const i=Z++%j;return V([await z[i].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const i=Math.min(t.maxNumWorkers,j);if(i<j){const r=new Array(i);for(let n=0;n<i;++n){const i=Z++%j;r[n]=z[i].open(e,t)}return V(r,t)}}return V(z.map((i=>i.open(e,t))),t)}let B,$=null;async function H(){if($)return $;B=new AbortController;const e=[];for(let t=0;t<j;t++){const i=D.create(t).then((e=>(z[t]=e,e)));e.push(i)}return $=Promise.all(e),$}},82495:(e,t,i)=>{"use strict";i.d(t,{A:()=>Le});var r,n=i(82392),s=i(84977),o=i(15565),a=i(81482),l=i(77380),c=i(25376),h=i(26325),u=i(48524);i(6273),i(80861),i(67498);let p=r=class extends s.oY{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new r({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],p.prototype,"expression",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],p.prototype,"name",void 0),(0,n._)([(0,a.MZ)({type:["boolean","date","number","string"],json:{write:!0}})],p.prototype,"returnType",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],p.prototype,"title",void 0),p=r=(0,n._)([(0,h.$)("esri.form.ExpressionInfo")],p);const d=p;let f=class extends s.oY{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],f.prototype,"description",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],f.prototype,"label",void 0),(0,n._)([(0,a.MZ)()],f.prototype,"type",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],f.prototype,"visibilityExpression",void 0),f=(0,n._)([(0,h.$)("esri.form.elements.Element")],f);const y=f;var m,g=i(8636);let v=m=class extends s.oY{constructor(e){super(e),this.type=null}clone(){return new m({type:this.type})}};(0,n._)([(0,a.MZ)({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],v.prototype,"type",void 0),v=m=(0,n._)([(0,h.$)("esri.form.elements.inputs.AttachmentInput")],v);const _=v;var b;let w=b=class extends y{constructor(e){super(e),this.attachmentKeyword=null,this.editableExpression=null,this.input=null,this.type="attachment"}clone(){return new b({attachmentKeyword:this.attachmentKeyword,description:this.description,editableExpression:this.editableExpression,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],w.prototype,"attachmentKeyword",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],w.prototype,"editableExpression",void 0),(0,n._)([(0,a.MZ)({type:_,json:{read:{source:"inputType"},write:{target:"inputType"}}})],w.prototype,"input",void 0),(0,n._)([(0,a.MZ)({type:["attachment"],json:{read:!1,write:!0}})],w.prototype,"type",void 0),w=b=(0,n._)([(0,h.$)("esri.form.elements.AttachmentElement")],w);const M=w;let T=class extends s.oY{constructor(e){super(e),this.type=null}};(0,n._)([(0,a.MZ)()],T.prototype,"type",void 0),T=(0,n._)([(0,h.$)("esri.form.elements.inputs.Input")],T);const S=T;let A=class extends S{constructor(e){super(e),this.maxLength=null,this.minLength=0}};(0,n._)([(0,a.MZ)({type:Number,json:{write:!0}})],A.prototype,"maxLength",void 0),(0,n._)([(0,a.MZ)({type:Number,json:{write:!0}})],A.prototype,"minLength",void 0),A=(0,n._)([(0,h.$)("esri.form.elements.inputs.TextInput")],A);const E=A;var x;let I=x=class extends E{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new x({maxLength:this.maxLength,minLength:this.minLength})}};(0,n._)([(0,a.MZ)({type:["barcode-scanner"],json:{read:!1,write:!0}})],I.prototype,"type",void 0),I=x=(0,n._)([(0,h.$)("esri.form.elements.inputs.BarcodeScannerInput")],I);const C=I;var k;let N=k=class extends S{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new k({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],N.prototype,"noValueOptionLabel",void 0),(0,n._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],N.prototype,"showNoValueOption",void 0),(0,n._)([(0,a.MZ)({type:["combo-box"],json:{read:!1,write:!0}})],N.prototype,"type",void 0),N=k=(0,n._)([(0,h.$)("esri.form.elements.inputs.ComboBoxInput")],N);const L=N;var O;function R(e){return null!=e?e:null}function P(e){return null!=e?e:null}let D=O=class extends S{constructor(e){super(e),this.max=null,this.min=null,this.type="date-picker"}readMax(e,t){return R(t.max)}writeMax(e,t){t.max=P(e)}readMin(e,t){return R(t.min)}writeMin(e,t){t.min=P(e)}clone(){return new O({max:this.max,min:this.min})}};(0,n._)([(0,a.MZ)({type:String,json:{type:String,write:!0}})],D.prototype,"max",void 0),(0,n._)([(0,c.w)("max")],D.prototype,"readMax",null),(0,n._)([(0,u.K)("max")],D.prototype,"writeMax",null),(0,n._)([(0,a.MZ)({type:String,json:{type:String,write:!0}})],D.prototype,"min",void 0),(0,n._)([(0,c.w)("min")],D.prototype,"readMin",null),(0,n._)([(0,u.K)("min")],D.prototype,"writeMin",null),(0,n._)([(0,a.MZ)({type:["date-picker"],json:{read:!1,write:!0}})],D.prototype,"type",void 0),D=O=(0,n._)([(0,h.$)("esri.form.elements.inputs.DatePickerInput")],D);const F=D;var j;function Z(e){return null!=e?e:null}function z(e){return null!=e?e:null}let U=j=class extends S{constructor(e){super(e),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(e,t){return Z(t.max)}writeMax(e,t){t.max=z(e)}readMin(e,t){return Z(t.min)}writeMin(e,t){t.min=z(e)}readTimeResolution(e,t){return Z(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=z(e)}clone(){return new j({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};(0,n._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],U.prototype,"includeTimeOffset",void 0),(0,n._)([(0,a.MZ)({type:String,json:{type:String,write:!0}})],U.prototype,"max",void 0),(0,n._)([(0,c.w)("max")],U.prototype,"readMax",null),(0,n._)([(0,u.K)("max")],U.prototype,"writeMax",null),(0,n._)([(0,a.MZ)({type:String,json:{type:String,write:!0}})],U.prototype,"min",void 0),(0,n._)([(0,c.w)("min")],U.prototype,"readMin",null),(0,n._)([(0,u.K)("min")],U.prototype,"writeMin",null),(0,n._)([(0,a.MZ)({type:String,json:{type:String,write:!0}})],U.prototype,"timeResolution",void 0),(0,n._)([(0,c.w)("timeResolution")],U.prototype,"readTimeResolution",null),(0,n._)([(0,u.K)("timeResolution")],U.prototype,"writeTimeResolution",null),(0,n._)([(0,a.MZ)({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],U.prototype,"type",void 0),U=j=(0,n._)([(0,h.$)("esri.form.elements.inputs.DateTimeOffsetPickerInput")],U);const V=U;var G;function B(e){return null!=e?new Date(e):null}function $(e){return e?e.getTime():null}let H=G=class extends S{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return B(t.max)}writeMax(e,t){t.max=$(e)}readMin(e,t){return B(t.min)}writeMin(e,t){t.min=$(e)}clone(){return new G({includeTime:this.includeTime,max:this.max,min:this.min})}};(0,n._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],H.prototype,"includeTime",void 0),(0,n._)([(0,a.MZ)({type:Date,json:{type:Number,write:!0}})],H.prototype,"max",void 0),(0,n._)([(0,c.w)("max")],H.prototype,"readMax",null),(0,n._)([(0,u.K)("max")],H.prototype,"writeMax",null),(0,n._)([(0,a.MZ)({type:Date,json:{type:Number,write:!0}})],H.prototype,"min",void 0),(0,n._)([(0,c.w)("min")],H.prototype,"readMin",null),(0,n._)([(0,u.K)("min")],H.prototype,"writeMin",null),(0,n._)([(0,a.MZ)({type:["datetime-picker"],json:{read:!1,write:!0}})],H.prototype,"type",void 0),H=G=(0,n._)([(0,h.$)("esri.form.elements.inputs.DateTimePickerInput")],H);const q=H;var W;let K=W=class extends S{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new W({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],K.prototype,"noValueOptionLabel",void 0),(0,n._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],K.prototype,"showNoValueOption",void 0),(0,n._)([(0,a.MZ)({type:["radio-buttons"],json:{read:!1,write:!0}})],K.prototype,"type",void 0),K=W=(0,n._)([(0,h.$)("esri.form.elements.inputs.RadioButtonsInput")],K);const Y=K;var J;let X=J=class extends S{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new J({offValue:this.offValue,onValue:this.onValue})}};(0,n._)([(0,a.MZ)({type:[String,Number],json:{write:!0}})],X.prototype,"offValue",void 0),(0,n._)([(0,a.MZ)({type:[String,Number],json:{write:!0}})],X.prototype,"onValue",void 0),(0,n._)([(0,a.MZ)({type:["switch"],json:{read:!1,write:!0}})],X.prototype,"type",void 0),X=J=(0,n._)([(0,h.$)("esri.form.elements.inputs.SwitchInput")],X);const Q=X;var ee;let te=ee=class extends E{constructor(e){super(e),this.type="text-area"}clone(){return new ee({maxLength:this.maxLength,minLength:this.minLength})}};(0,n._)([(0,a.MZ)({type:["text-area"],json:{read:!1,write:!0}})],te.prototype,"type",void 0),te=ee=(0,n._)([(0,h.$)("esri.form.elements.inputs.TextAreaInput")],te);const ie=te;var re;let ne=re=class extends E{constructor(e){super(e),this.type="text-box"}clone(){return new re({maxLength:this.maxLength,minLength:this.minLength})}};(0,n._)([(0,a.MZ)({type:["text-box"],json:{read:!1,write:!0}})],ne.prototype,"type",void 0),ne=re=(0,n._)([(0,h.$)("esri.form.elements.inputs.TextBoxInput")],ne);const se=ne;var oe;function ae(e){return null!=e?e:null}function le(e){return null!=e?e:null}let ce=oe=class extends S{constructor(e){super(e),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(e,t){return ae(t.max)}writeMax(e,t){t.max=le(e)}readMin(e,t){return ae(t.min)}writeMin(e,t){t.min=le(e)}readTimeResolution(e,t){return ae(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=le(e)}clone(){return new oe({max:this.max,min:this.min,timeResolution:this.timeResolution})}};(0,n._)([(0,a.MZ)({type:String,json:{type:String,write:!0}})],ce.prototype,"max",void 0),(0,n._)([(0,c.w)("max")],ce.prototype,"readMax",null),(0,n._)([(0,u.K)("max")],ce.prototype,"writeMax",null),(0,n._)([(0,a.MZ)({type:String,json:{type:String,write:!0}})],ce.prototype,"min",void 0),(0,n._)([(0,c.w)("min")],ce.prototype,"readMin",null),(0,n._)([(0,u.K)("min")],ce.prototype,"writeMin",null),(0,n._)([(0,a.MZ)({type:String,json:{type:String,write:!0}})],ce.prototype,"timeResolution",void 0),(0,n._)([(0,c.w)("timeResolution")],ce.prototype,"readTimeResolution",null),(0,n._)([(0,u.K)("timeResolution")],ce.prototype,"writeTimeResolution",null),(0,n._)([(0,a.MZ)({type:["time-picker"],json:{read:!1,write:!0}})],ce.prototype,"type",void 0),ce=oe=(0,n._)([(0,h.$)("esri.form.elements.inputs.TimePickerInput")],ce);const he={base:S,key:"type",typeMap:{"barcode-scanner":C,"combo-box":L,"date-picker":F,"datetime-picker":q,"datetimeoffset-picker":V,"radio-buttons":Y,switch:Q,"text-area":ie,"text-box":se,"time-picker":ce}};var ue,pe=i(19907);let de=ue=class extends y{constructor(e){super(e),this.domain=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}get editable(){return this._get("editable")??!0}set editable(e){this._set("editable",e)}clone(){return new ue({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};(0,n._)([(0,a.MZ)({types:pe.gK,json:{read:{reader:pe.rS},write:!0}})],de.prototype,"domain",void 0),(0,n._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],de.prototype,"editable",null),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],de.prototype,"editableExpression",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],de.prototype,"fieldName",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],de.prototype,"hint",void 0),(0,n._)([(0,a.MZ)({types:he,json:{read:{source:"inputType"},write:{target:"inputType"}}})],de.prototype,"input",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],de.prototype,"requiredExpression",void 0),(0,n._)([(0,a.MZ)({type:String,json:{read:!1,write:!0}})],de.prototype,"type",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],de.prototype,"valueExpression",void 0),de=ue=(0,n._)([(0,h.$)("esri.form.elements.FieldElement")],de);const fe=de;var ye,me=i(10357);let ge=ye=class extends y{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new ye({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:(0,o.o8)(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};(0,n._)([(0,a.MZ)({type:Number,json:{write:!0}})],ge.prototype,"displayCount",void 0),(0,n._)([(0,a.MZ)({type:["list"],json:{write:!0}})],ge.prototype,"displayType",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],ge.prototype,"editableExpression",void 0),(0,n._)([(0,a.MZ)({type:[me.A],json:{write:!0}})],ge.prototype,"orderByFields",void 0),(0,n._)([(0,a.MZ)({type:Number,json:{write:!0}})],ge.prototype,"relationshipId",void 0),(0,n._)([(0,a.MZ)({type:["relationship"],json:{read:!1,write:!0}})],ge.prototype,"type",void 0),ge=ye=(0,n._)([(0,h.$)("esri.form.elements.RelationshipElement")],ge);const ve=ge;var _e;let be=_e=class extends y{constructor(e){super(e),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new _e({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],be.prototype,"text",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],be.prototype,"textFormat",void 0),(0,n._)([(0,a.MZ)({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],be.prototype,"type",void 0),be=_e=(0,n._)([(0,h.$)("esri.form.elements.TextElement")],be);const we=be;function Me(e){return{typesWithGroup:{base:y,key:"type",typeMap:{attachment:M,field:fe,group:e,relationship:ve,text:we}},typesWithoutGroup:{base:y,key:"type",typeMap:{attachment:M,field:fe,relationship:ve,text:we}}}}function Te(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((e=>r[e.type])).map((e=>r[e.type].fromJSON(e)))}function Se(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((e=>r[e.type])).map((e=>e.toJSON()))}function Ae(e,t,i=!0){return e?e.map((e=>(0,g.aq)(i?t.typesWithGroup:t.typesWithoutGroup,e))):null}var Ee;let xe=Ee=class extends y{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return Ae(e,Ie,!1)}readElements(e,t){return Te(t.formElements,Ie,!1)}writeElements(e,t){t.formElements=Se(e,Ie,!1)}clone(){return new Ee({description:this.description,elements:(0,o.o8)(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};(0,n._)([(0,a.MZ)({json:{write:!0}})],xe.prototype,"elements",void 0),(0,n._)([(0,l.w)("elements")],xe.prototype,"castElements",null),(0,n._)([(0,c.w)("elements",["formElements"])],xe.prototype,"readElements",null),(0,n._)([(0,u.K)("elements")],xe.prototype,"writeElements",null),(0,n._)([(0,a.MZ)({type:["collapsed","expanded"],json:{write:!0}})],xe.prototype,"initialState",void 0),(0,n._)([(0,a.MZ)({type:String,json:{read:!1,write:!0}})],xe.prototype,"type",void 0),xe=Ee=(0,n._)([(0,h.$)("esri.form.elements.GroupElement")],xe);const Ie=Me(xe);var Ce;const ke=Me(xe);let Ne=Ce=class extends s.oY{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return Ae(e,ke)}readElements(e,t){return Te(t.formElements,ke)}writeElements(e,t){t.formElements=Se(e,ke)}clone(){return new Ce({description:this.description,expressionInfos:(0,o.o8)(this.expressionInfos),elements:(0,o.o8)(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}};(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],Ne.prototype,"description",void 0),(0,n._)([(0,a.MZ)({json:{write:!0}})],Ne.prototype,"elements",void 0),(0,n._)([(0,l.w)("elements")],Ne.prototype,"castElements",null),(0,n._)([(0,c.w)("elements",["formElements"])],Ne.prototype,"readElements",null),(0,n._)([(0,u.K)("elements")],Ne.prototype,"writeElements",null),(0,n._)([(0,a.MZ)({type:[d],json:{write:!0}})],Ne.prototype,"expressionInfos",void 0),(0,n._)([(0,a.MZ)({type:Boolean,json:{default:!1,write:!0}})],Ne.prototype,"preserveFieldValuesWhenHidden",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],Ne.prototype,"title",void 0),Ne=Ce=(0,n._)([(0,h.$)("esri.form.FormTemplate")],Ne);const Le=Ne},3313:(e,t,i)=>{"use strict";i.d(t,{yR:()=>h});var r=i(8636),n=i(8e3),s=i(61064),o=i(67709),a=i(8977),l=i(65648),c=i(38648);i(44153),i(54483),i(56053);const h={base:s.A,key:"type",typeMap:{extent:n.A,multipoint:o.A,point:a.A,polyline:c.A,polygon:l.A}};(0,r.aq)(h)},48648:(e,t,i)=>{"use strict";i.d(t,{A:()=>m});var r,n=i(82392),s=i(5262),o=i(81482),a=(i(6273),i(80861),i(67498),i(26325)),l=i(34670),c=i(8977),h=i(65648),u=i(44153),p=i(22538),d=i(64672),f=i(40969);let y=r=class extends h.A{constructor(...e){super(...e),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}normalizeCtorArgs(e,t){let i;if(e?.center)i=e;else{if(e?.rings)return super.normalizeCtorArgs(e,t);i={center:e}}return{...super.normalizeCtorArgs(),...i,...t}}initialize(){const e=this.center,t=this.numberOfPoints;if(this.hasZ=e?.hasZ??!1,0!==this.rings.length||!e)return;const i=(0,s.oU)(this.radius,this.radiusUnit,"meters"),r=e.spatialReference;let n,o="geographic";if(r.isWebMercator?o="webMercator":(null!=(r.wkid&&f.A[r.wkid])||(r.wkt2||r.wkt)&&(0,s.x1)(r.wkt2||r.wkt))&&(o="projected"),this.geodesic){let r;switch(o){case"webMercator":r=(0,d.ci)(e);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":r=e}n=this._createGeodesicCircle(r,i,t),"webMercator"===o&&(n=(0,d.Gh)(n))}else{let r;"webMercator"===o||"projected"===o?r=i/(0,s.Ao)(e.spatialReference):"geographic"===o&&(r=(0,s.vl)(i,"meters",(0,l.tO)(e.spatialReference).radius)),n=this._createPlanarCircle(e,r,t)}this.spatialReference=n.spatialReference,this.addRing(n.rings[0])}clone(){const{center:e,numberOfPoints:t,radius:i,radiusUnit:n,geodesic:s}=this;return new r({center:e?.clone(),numberOfPoints:t,radius:i,radiusUnit:n,geodesic:s})}_createGeodesicCircle(e,t,i){let r=0;const n=[];for(;r<360;){const s=[0,0],o=[e.x,e.y];(0,p.vN)(s,o,r,t,u.A.WGS84),this.hasZ&&s.push(e.z),n.push(s),r+=360/i}return n.push(n[0]),new h.A(n)}_createPlanarCircle(e,t,i){const r=[],n=2*Math.PI/i;for(let s=0;s<i;++s){const i=n*s,o=[e.x+Math.cos(-i)*t,e.y+Math.sin(-i)*t];this.hasZ&&o.push(e.z),r.push(o)}return r.push(r[0]),new h.A({spatialReference:e.spatialReference,rings:[r]})}};(0,n._)([(0,o.MZ)({type:c.A})],y.prototype,"center",void 0),(0,n._)([(0,o.MZ)()],y.prototype,"geodesic",void 0),(0,n._)([(0,o.MZ)()],y.prototype,"numberOfPoints",void 0),(0,n._)([(0,o.MZ)()],y.prototype,"radius",void 0),(0,n._)([(0,o.MZ)()],y.prototype,"radiusUnit",void 0),y=r=(0,n._)([(0,a.$)("esri.geometry.Circle")],y);const m=y},8e3:(e,t,i)=>{"use strict";i.d(t,{A:()=>g});var r,n=i(82392),s=i(21332),o=i(81482),a=(i(6273),i(80861),i(67498),i(26325)),l=i(61064),c=i(8977),h=i(44153),u=i(10805),p=i(19387),d=i(67488),f=i(64672);function y(e,t,i){return null==t?i:null==i?t:e(t,i)}let m=r=class extends l.A{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,i,r,n){return function(e){return e&&("esri.geometry.SpatialReference"===e.declaredClass||null!=e.wkid)}(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:"object"==typeof e?(e.spatialReference=null==e.spatialReference?h.A.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:i,ymax:r,spatialReference:n??h.A.WGS84}}static fromBounds(e,t){return new r({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new r({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new c.A({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return null!=this.mmin&&null!=this.mmax}get hasZ(){return null!=this.zmin&&null!=this.zmax}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return null!=e.z&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new r;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,null!=this.zmin&&(e.zmin=this.zmin,e.zmax=this.zmax),null!=this.mmin&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&(0,f.y7)(t,i)&&(e=t.isWebMercator?(0,f.Gh)(e):(0,f.ci)(e,!0)),"point"===e.type?(0,u.qz)(this,e):"extent"===e.type&&(0,u.gH)(this,e)}equals(e){if(this===e)return!0;if(null==e)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&(0,f.y7)(t,i)&&(e=t.isWebMercator?(0,f.Gh)(e):(0,f.ci)(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),i=this.width*t,r=this.height*t;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const e=(this.zmax-this.zmin)*t;this.zmin+=e,this.zmax-=e}if(this.hasM){const e=(this.mmax-this.mmin)*t;this.mmin+=e,this.mmax-=e}return this}intersects(e){if(null==e)return!1;"mesh"===e.type&&(e=e.extent);const t=this.spatialReference,i=e.spatialReference;return t&&i&&!(0,d.aI)(t,i)&&(0,f.y7)(t,i)&&(e=t.isWebMercator?(0,f.Gh)(e):(0,f.ci)(e,!0)),(0,p.xK)(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,i){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,null!=i&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=y(Math.min,this.zmin,e.zmin),this.zmax=y(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=y(Math.min,this.mmin,e.mmin),this.mmax=y(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:null!=e&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=y(Math.max,this.zmin,e.zmin),this.zmax=y(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=y(Math.max,this.mmin,e.mmin),this.mmax=y(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=(0,d.Vp)(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,i=this._getCM(e);if(i){const r=t.isWebMercator?(0,f.ci)(i):i;this.xmin-=i.x,this.xmax-=i.x,t.isWebMercator||(r.x=this._normalizeX(r.x,e).x),this.spatialReference=new h.A((0,s.HC)((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(e){let t=null;const[i,r]=e.valid,n=this.xmin,s=this.xmax;return n>=i&&n<=r&&s>=i&&s<=r||(t=this.center),t}_normalize(e,t,i){const r=this.spatialReference;if(!r)return this;const n=i??(0,d.Vp)(r);if(null==n)return this;const s=this._getParts(n).map((e=>e.extent));if(s.length<2)return s[0]||this;if(s.length>2)return e?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(e)return this._shiftCM(n);if(t)return s;let o=!0,a=!0;return s.forEach((e=>{e.hasZ||(o=!1),e.hasM||(a=!1)})),{rings:s.map((e=>{const t=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(o){const i=(e.zmax-e.zmin)/2;for(let e=0;e<t.length;e++)t[e].push(i)}if(a){const i=(e.mmax-e.mmin)/2;for(let e=0;e<t.length;e++)t[e].push(i)}return t})),hasZ:o,hasM:a,spatialReference:r}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:i,ymax:n,spatialReference:s}=this,o=this.width,a=this.xmin,l=this.xmax;let c;e=e||(0,d.Vp)(s);const[h,u]=e.valid;c=this._normalizeX(this.xmin,e);const p=c.x,f=c.frameId;c=this._normalizeX(this.xmax,e);const y=c.x,m=c.frameId,g=p===y&&o>0;if(o>2*u){const e=new r(a<l?p:y,i,u,n,s),o=new r(h,i,a<l?y:p,n,s),c=new r(0,i,u,n,s),d=new r(h,i,0,n,s),g=[],v=[];e.contains(c)&&g.push(f),e.contains(d)&&v.push(f),o.contains(c)&&g.push(m),o.contains(d)&&v.push(m);for(let e=f+1;e<m;e++)g.push(e),v.push(e);t.push({extent:e,frameIds:[f]},{extent:o,frameIds:[m]},{extent:c,frameIds:g},{extent:d,frameIds:v})}else p>y||g?t.push({extent:new r(p,i,u,n,s),frameIds:[f]},{extent:new r(h,i,y,n,s),frameIds:[m]}):t.push({extent:new r(p,i,y,n,s),frameIds:[f]});this.cache._parts=t}const i=this.hasZ,n=this.hasM;if(i||n){const e={};i&&(e.zmin=this.zmin,e.zmax=this.zmax),n&&(e.mmin=this.mmin,e.mmax=this.mmax);for(let i=0;i<t.length;i++)t[i].extent.set(e)}return t}_normalizeX(e,t){const[i,r]=t.valid,n=2*r;let s,o=0;return e>r?(s=Math.ceil(Math.abs(e-r)/n),e-=s*n,o=s):e<i&&(s=Math.ceil(Math.abs(e-i)/n),e+=s*n,o=-s),{x:e,frameId:o}}};(0,n._)([(0,o.MZ)({readOnly:!0})],m.prototype,"cache",null),(0,n._)([(0,o.MZ)({readOnly:!0})],m.prototype,"center",null),(0,n._)([(0,o.MZ)({readOnly:!0})],m.prototype,"extent",null),(0,n._)([(0,o.MZ)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],m.prototype,"hasM",null),(0,n._)([(0,o.MZ)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],m.prototype,"hasZ",null),(0,n._)([(0,o.MZ)({readOnly:!0})],m.prototype,"height",null),(0,n._)([(0,o.MZ)({readOnly:!0})],m.prototype,"width",null),(0,n._)([(0,o.MZ)({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],m.prototype,"xmin",void 0),(0,n._)([(0,o.MZ)({type:Number,json:{write:!0}})],m.prototype,"ymin",void 0),(0,n._)([(0,o.MZ)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],m.prototype,"mmin",void 0),(0,n._)([(0,o.MZ)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],m.prototype,"zmin",void 0),(0,n._)([(0,o.MZ)({type:Number,json:{write:!0}})],m.prototype,"xmax",void 0),(0,n._)([(0,o.MZ)({type:Number,json:{write:!0}})],m.prototype,"ymax",void 0),(0,n._)([(0,o.MZ)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],m.prototype,"mmax",void 0),(0,n._)([(0,o.MZ)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],m.prototype,"zmax",void 0),m=r=(0,n._)([(0,a.$)("esri.geometry.Extent")],m),m.prototype.toJSON.isDefaultToJSON=!0;const g=m},61064:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});var r=i(82392),n=i(84977),s=i(81482),o=(i(6273),i(80861),i(67498),i(25376)),a=i(26325),l=i(44153);let c=class extends n.oY{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=l.A.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,t){if(e instanceof l.A)return e;if(null!=e){const i=new l.A;return i.read(e,t),i}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,t){this.cache[e]=t}};(0,r._)([(0,s.MZ)()],c.prototype,"type",void 0),(0,r._)([(0,s.MZ)({readOnly:!0})],c.prototype,"cache",null),(0,r._)([(0,s.MZ)({readOnly:!0})],c.prototype,"extent",null),(0,r._)([(0,s.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],c.prototype,"hasM",void 0),(0,r._)([(0,s.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],c.prototype,"hasZ",void 0),(0,r._)([(0,s.MZ)({type:l.A,json:{write:!0},value:l.A.WGS84})],c.prototype,"spatialReference",void 0),(0,r._)([(0,o.w)("spatialReference")],c.prototype,"readSpatialReference",null),c=(0,r._)([(0,a.$)("esri.geometry.Geometry")],c);const h=c},21570:(e,t,i)=>{"use strict";i.d(t,{A:()=>_});var r,n=i(82392),s=i(3223),o=i(1817),a=i(84977),l=i(5262),c=i(97629),h=i(81482),u=(i(6273),i(80861),i(25376)),p=i(26325),d=i(48524);const f=(0,o.O)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),y=f.jsonValues.slice();(0,s.Xy)(y,"orthometric");const m=(0,o.O)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let g=r=class extends a.oY{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,i){return f.write(e,t,i)}readHeightModel(e,t,i){return f.read(e)||(i?.messages&&i.messages.push(function(e,t){return new c.A("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}(e,{context:i})),null)}readHeightUnit(e,t,i){return m.read(e)||(i?.messages&&i.messages.push(v(e,{context:i})),null)}readHeightUnitService(e,t,i){return(0,l.LA)(e)||m.read(e)||(i?.messages&&i.messages.push(v(e,{context:i})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new r({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const i=(0,l.k1)(t);return new r({heightModel:e.heightModel,heightUnit:i??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new r;return t.read(e,{origin:"web-scene"}),t}};function v(e,t){return new c.A("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}(0,n._)([(0,h.MZ)({type:f.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:y,default:"ellipsoidal"}}}})],g.prototype,"heightModel",void 0),(0,n._)([(0,d.K)("web-scene","heightModel")],g.prototype,"writeHeightModel",null),(0,n._)([(0,u.w)(["web-scene","service"],"heightModel")],g.prototype,"readHeightModel",null),(0,n._)([(0,h.MZ)({type:m.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:m.jsonValues,write:m.write}}}})],g.prototype,"heightUnit",void 0),(0,n._)([(0,u.w)("web-scene","heightUnit")],g.prototype,"readHeightUnit",null),(0,n._)([(0,u.w)("service","heightUnit")],g.prototype,"readHeightUnitService",null),(0,n._)([(0,h.MZ)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],g.prototype,"vertCRS",void 0),(0,n._)([(0,u.w)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],g.prototype,"readVertCRS",null),g=r=(0,n._)([(0,p.$)("esri.geometry.HeightModelInfo")],g);const _=g},67709:(e,t,i)=>{"use strict";i.d(t,{A:()=>y});var r,n=i(82392),s=i(15565),o=i(81482),a=(i(6273),i(80861),i(26325)),l=i(48524),c=i(8e3),h=i(61064),u=i(8977),p=i(45852);function d(e){return(t,i)=>null==t?i:null==i?t:e(t,i)}let f=r=class extends h.A{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return{};const i={};Array.isArray(e)?(i.points=e,i.spatialReference=t):function(e){return e&&("esri.geometry.SpatialReference"===e.declaredClass||null!=e.wkid)}(e)?i.spatialReference=e:(e.points&&(i.points=e.points),e.spatialReference&&(i.spatialReference=e.spatialReference),e.hasZ&&(i.hasZ=e.hasZ),e.hasM&&(i.hasM=e.hasM));const r=i.points?.[0];return r&&(void 0===i.hasZ&&void 0===i.hasM?(i.hasZ=r.length>2,i.hasM=!1):void 0===i.hasZ?i.hasZ=r.length>3:void 0===i.hasM&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new c.A,i=this.hasZ,r=this.hasM,n=i?3:2,s=e[0],o=d(Math.min),a=d(Math.max);let l,h,u,p,[f,y]=s,[m,g]=s;for(let t=0,s=e.length;t<s;t++){const s=e[t],[c,d]=s;if(f=o(f,c),y=o(y,d),m=a(m,c),g=a(g,d),i&&s.length>2){const e=s[2];l=o(l,e),u=a(u,e)}if(r&&s.length>n){const e=s[n];h=o(h,e),p=a(p,e)}}return t.xmin=f,t.ymin=y,t.xmax=m,t.ymax=g,t.spatialReference=this.spatialReference,i?(t.zmin=l,t.zmax=u):(t.zmin=void 0,t.zmax=void 0),r?(t.mmin=h,t.mmax=p):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=(0,s.o8)(this.points)}addPoint(e){return(0,p.h)(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:(0,s.o8)(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new r(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],i={x:t[0],y:t[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=t[2],r=3),this.hasM&&(i.m=t[r]),new u.A(i)}removePoint(e){if(!this._validateInputs(e))return null;const t=new u.A(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?((0,p.h)(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return null!=e&&e>=0&&e<this.points.length}};(0,n._)([(0,o.MZ)({readOnly:!0})],f.prototype,"cache",null),(0,n._)([(0,o.MZ)()],f.prototype,"extent",null),(0,n._)([(0,o.MZ)({type:[[Number]],json:{write:{isRequired:!0}}})],f.prototype,"points",void 0),(0,n._)([(0,l.K)("points")],f.prototype,"writePoints",null),f=r=(0,n._)([(0,a.$)("esri.geometry.Multipoint")],f),f.prototype.toJSON.isDefaultToJSON=!0;const y=f},8977:(e,t,i)=>{"use strict";i.d(t,{A:()=>_});var r,n=i(82392),s=i(80861),o=i(81482),a=i(77380),l=(i(67498),i(6273),i(25376)),c=i(26325),h=i(48524),u=i(8636),p=i(61064),d=i(44153),f=i(67488),y=i(64672);const m=[0,0];function g(e){return e&&("esri.geometry.SpatialReference"===e.declaredClass||null!=e.wkid)}let v=r=class extends p.A{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const i=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(i)?i:i.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,i,r,n){let o;if(Array.isArray(e))o=e,n=t,e=o[0],t=o[1],i=o[2],r=o[3];else if(e&&"object"==typeof e){if(o=e,e=null!=o.x?o.x:o.longitude,t=null!=o.y?o.y:o.latitude,i=o.z,r=o.m,(n=o.spatialReference)&&"esri.geometry.SpatialReference"!==n.declaredClass&&(n=new d.A(n)),null!=o.longitude||null!=o.latitude)if(null==o.longitude)s.A.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(null==o.latitude)s.A.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!o.declaredClass&&n&&n.isWebMercator){const i=(0,y.je)(o.longitude,o.latitude,m);e=i[0],t=i[1]}}else g(i)?(n=i,i=null):g(r)&&(n=r,r=null);const a={x:e,y:t};return null==a.x&&null!=a.y?s.A.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):null==a.y&&null!=a.x&&s.A.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),null!=n&&(a.spatialReference=n),null!=i&&(a.z=i),null!=r&&(a.m=r),a}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return void 0!==this.m}set hasM(e){e!==(void 0!==this._get("m"))&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return void 0!==this.z}set hasZ(e){e!==(void 0!==this._get("z"))&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){const{spatialReference:e,x:t,y:i}=this;if(e){if(e.isWebMercator)return(0,y.tD)(t,i,m)[1];if(e.isGeographic)return i}return null}set latitude(e){const{spatialReference:t,x:i}=this;null!=e&&t&&(t.isWebMercator?this._set("y",(0,y.je)(i,e,m)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){const{x:e,y:t,spatialReference:i}=this;if(i){if(i.isWebMercator)return(0,y.tD)(e,t,m)[0];if(i.isGeographic)return e}return null}set longitude(e){const{y:t,spatialReference:i}=this;null!=e&&i&&(i.isWebMercator?this._set("x",(0,y.je)(e,t,m)[0]):i.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,i){t[i]=isNaN(e)?"NaN":e}readX(e){return"string"==typeof e?NaN:e}clone(){const e=new r;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return r.copy(e,this),this}equals(e){if(null==e)return!1;const{x:t,y:i,z:r,m:n,spatialReference:s}=this,{z:o,m:a}=e;let{x:l,y:c,spatialReference:h}=e;if(!s.equals(h))if(s.isWebMercator&&h.isWGS84)[l,c]=(0,y.je)(l,c),h=s;else{if(!s.isWGS84||!h.isWebMercator)return!1;[l,c]=(0,y.tD)(l,c),h=s}return t===l&&i===c&&r===o&&n===a&&s.wkid===h.wkid}offset(e,t,i){return this.x+=e,this.y+=t,null!=i&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const e=(0,f.Vp)(this.spatialReference);if(!e)return this;let t=this.x;const[i,r]=e.valid,n=2*r;let s;return t>r?(s=Math.ceil(Math.abs(t-r)/n),t-=s*n):t<i&&(s=Math.ceil(Math.abs(t-i)/n),t+=s*n),this._set("x",t),this}distance(e){return function(e,t){const i=e.x-t.x,r=e.y-t.y,n=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(i*i+r*r+n*n)}(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};(0,n._)([(0,o.MZ)({readOnly:!0})],v.prototype,"cache",null),(0,n._)([(0,o.MZ)({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],v.prototype,"hasM",null),(0,n._)([(0,o.MZ)({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],v.prototype,"hasZ",null),(0,n._)([(0,o.MZ)({type:Number})],v.prototype,"latitude",null),(0,n._)([(0,o.MZ)({type:Number})],v.prototype,"longitude",null),(0,n._)([(0,o.MZ)({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),(0,a.w)((e=>isNaN(e)?e:(0,u.GB)(e)))],v.prototype,"x",void 0),(0,n._)([(0,h.K)("x")],v.prototype,"writeX",null),(0,n._)([(0,l.w)("x")],v.prototype,"readX",null),(0,n._)([(0,o.MZ)({type:Number,json:{write:!0}})],v.prototype,"y",void 0),(0,n._)([(0,o.MZ)({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],v.prototype,"z",void 0),(0,n._)([(0,o.MZ)({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],v.prototype,"m",void 0),v=r=(0,n._)([(0,c.$)("esri.geometry.Point")],v),v.prototype.toJSON.isDefaultToJSON=!0;const _=v},65648:(e,t,i)=>{"use strict";i.d(t,{A:()=>T});var r,n=i(82392),s=i(3223),o=i(15565),a=i(81482),l=(i(6273),i(80861),i(26325)),c=i(48524),h=i(8e3),u=i(61064),p=i(8977),d=i(44153),f=i(23064),y=i(10805),m=i(11021),g=i(34475),v=i(19387),_=i(64672),b=i(45852);function w(e){return!Array.isArray(e[0])}let M=r=class extends u.A{static fromExtent(e){const t=e.clone().normalize(),i=e.spatialReference;let n=!1,s=!1;for(const e of t)e.hasZ&&(n=!0),e.hasM&&(s=!0);const o={rings:t.map((e=>{const t=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(n&&e.hasZ){const i=e.zmin+.5*(e.zmax-e.zmin);for(let e=0;e<t.length;e++)t[e].push(i)}if(s&&e.hasM){const i=e.mmin+.5*(e.mmax-e.mmin);for(let e=0;e<t.length;e++)t[e].push(i)}return t})),spatialReference:i};return n&&(o.hasZ=!0),s&&(o.hasM=!0),new r(o)}constructor(...e){super(...e),this.rings=[],this.type="polygon"}normalizeCtorArgs(e,t){let i,r,n=null,s=null;return e&&!Array.isArray(e)?(n=e.rings??null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),i=e.hasZ,r=e.hasM):n=e,n=n||[],t=t||d.A.WGS84,n.length&&null!=n[0]?.[0]&&"number"==typeof n[0][0]&&(n=[n]),s=n[0]?.[0],s&&(void 0===i&&void 0===r?(i=s.length>2,r=s.length>3):void 0===i?i=r?s.length>3:s.length>2:void 0===r&&(r=i?s.length>3:s.length>2)),{rings:n,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=(0,f.l8)(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new p.A;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=(0,g.v)(this);if(!t)return null;const i=new h.A(t);return i.spatialReference=e,i}get isSelfIntersecting(){return(0,v.A3)(this.rings)}writeRings(e,t){t.rings=(0,o.o8)(this.rings)}addRing(e){if(!e)return;const t=this.rings,i=t.length;if(w(e)){const r=[];for(let t=0,i=e.length;t<i;t++)r[t]=e[t].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new r;return e.spatialReference=this.spatialReference,e.rings=(0,o.o8)(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(null==e)return!1;const t=this.spatialReference,i=e.spatialReference;if(null!=t!=(null!=i))return!1;if(null!=t&&null!=i&&!t.equals(i))return!1;if(this.rings.length!==e.rings.length)return!1;const r=([e,t,i,r],[n,s,o,a])=>e===n&&t===s&&(null==i&&null==o||i===o)&&(null==r&&null==a||r===a);for(let t=0;t<this.rings.length;t++){const i=this.rings[t],n=e.rings[t];if(!(0,s.aI)(i,n,r))return!1}return!0}contains(e){if(!e)return!1;const t=(0,_.Cv)(e,this.spatialReference);return(0,y.m3)(this,null!=t?t:e)}isClockwise(e){let t;return t=w(e)?e.map((e=>this.hasZ?this.hasM?[e.x,e.y,e.z,e.m]:[e.x,e.y,e.z]:[e.x,e.y])):e,(0,m.$3)(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.rings[e][t],r=this.hasZ,n=this.hasM;return r&&!n?new p.A(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new p.A(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new p.A(i[0],i[1],i[2],i[3],this.spatialReference):new p.A(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?((0,b.h)(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e].splice(t,0,i),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new p.A(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],i=this.spatialReference,r=t.map((e=>new p.A(e,i)));return this.notifyChange("rings"),r}setPoint(e,t,i){return this._validateInputs(e,t)?((0,b.h)(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e][t]=i,this.notifyChange("rings"),this):this}_validateInputs(e,t,i=!1){if(null==e||e<0||e>=this.rings.length)return!1;if(null!=t){const r=this.rings[e];if(i&&(t<0||t>r.length))return!1;if(!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};(0,n._)([(0,a.MZ)({readOnly:!0})],M.prototype,"cache",null),(0,n._)([(0,a.MZ)({readOnly:!0})],M.prototype,"centroid",null),(0,n._)([(0,a.MZ)({readOnly:!0})],M.prototype,"extent",null),(0,n._)([(0,a.MZ)({readOnly:!0})],M.prototype,"isSelfIntersecting",null),(0,n._)([(0,a.MZ)({type:[[[Number]]],json:{write:{isRequired:!0}}})],M.prototype,"rings",void 0),(0,n._)([(0,c.K)("rings")],M.prototype,"writeRings",null),M=r=(0,n._)([(0,l.$)("esri.geometry.Polygon")],M),M.prototype.toJSON.isDefaultToJSON=!0;const T=M},38648:(e,t,i)=>{"use strict";i.d(t,{A:()=>m});var r,n=i(82392),s=i(15565),o=i(81482),a=(i(6273),i(80861),i(26325)),l=i(48524),c=i(8e3),h=i(61064),u=i(8977),p=i(44153),d=i(34475),f=i(45852);let y=r=class extends h.A{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){let i,r,n=null,s=null;return e&&!Array.isArray(e)?(n=e.paths??null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),i=e.hasZ,r=e.hasM):n=e,n=n||[],t=t||p.A.WGS84,n.length&&null!=n[0]?.[0]&&"number"==typeof n[0][0]&&(n=[n]),s=n[0]?.[0],s&&(void 0===i&&void 0===r?(i=s.length>2,r=!1):void 0===i?i=!r&&s.length>3:void 0===r&&(r=!i&&s.length>3)),{paths:n,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=(0,d.Z3)(this);if(!t)return null;const i=new c.A(t);return i.spatialReference=e,i}writePaths(e,t){t.paths=(0,s.o8)(this.paths)}addPath(e){if(!e)return;const t=this.paths,i=t.length;if(function(e){return!Array.isArray(e[0])}(e)){const r=[];for(let t=0,i=e.length;t<i;t++)r[t]=e[t].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new r;return e.spatialReference=this.spatialReference,e.paths=(0,s.o8)(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.paths[e][t],r=this.hasZ,n=this.hasM;return r&&!n?new u.A(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new u.A(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new u.A(i[0],i[1],i[2],i[3],this.spatialReference):new u.A(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?((0,f.h)(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e].splice(t,0,i),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],i=this.spatialReference,r=t.map((e=>new u.A(e,i)));return this.notifyChange("paths"),r}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new u.A(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(e,t,i){return this._validateInputs(e,t)?((0,f.h)(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e][t]=i,this.notifyChange("paths"),this):this}_validateInputs(e,t,i=!1){if(null==e||e<0||e>=this.paths.length)return!1;if(null!=t){const r=this.paths[e];if(i&&(t<0||t>r.length))return!1;if(!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};(0,n._)([(0,o.MZ)({readOnly:!0})],y.prototype,"cache",null),(0,n._)([(0,o.MZ)({readOnly:!0})],y.prototype,"extent",null),(0,n._)([(0,o.MZ)({type:[[[Number]]],json:{write:{isRequired:!0}}})],y.prototype,"paths",void 0),(0,n._)([(0,l.K)("paths")],y.prototype,"writePaths",null),y=r=(0,n._)([(0,a.$)("esri.geometry.Polyline")],y),y.prototype.toJSON.isDefaultToJSON=!0;const m=y},44153:(e,t,i)=>{"use strict";i.d(t,{A:()=>f});var r,n=i(82392),s=i(84977),o=i(15565),a=i(5262),l=i(8636),c=i(81482),h=i(26325),u=i(48524),p=i(67488);let d=r=class extends s.oY{static fromJSON(e){if(!e)return null;if(e.wkid){if(102100===e.wkid)return r.WebMercator;if(4326===e.wkid)return r.WGS84}const t=new r;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&"object"==typeof e?e:{["string"==typeof e?"wkt":"wkid"]:e}}get isWGS84(){return(0,p.oT)(this)}get isWebMercator(){return(0,p.K8)(this)}get isGeographic(){return(0,p.EA)(this)}get isWrappable(){return(0,p.d9)(this)}get metersPerUnit(){return(0,a.GA)(this)}get unit(){return(0,a.Ij)(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===r.WGS84)return new r(p.KK);if(this===r.WebMercator)return new r(p.ch);const e=new r;return null!=this.wkid?(e.wkid=this.wkid,null!=this.latestWkid&&(e.latestWkid=this.latestWkid),null!=this.vcsWkid&&(e.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(e.latestVcsWkid=this.latestVcsWkid)):(null!=this.wkt&&(e.wkt=this.wkt),null!=this.wkt2&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=(0,o.o8)(this.imageCoordinateSystem)),e}equals(e){if(null==e)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(null==this.imageCoordinateSystem||null==e.imageCoordinateSystem)return!1;const{id:t,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:r}=e.imageCoordinateSystem,n=this.imageCoordinateSystem;return null==t||r?JSON.stringify(n)===JSON.stringify(e.imageCoordinateSystem):i?n.id===t&&n.referenceServiceName===i:n.id===t}return(0,p.aI)(this,e)}toJSON(e){return this.write(void 0,e)}};d.GCS_NAD_1927=null,d.WGS84=null,d.WebMercator=null,d.PlateCarree=null,(0,n._)([(0,c.MZ)({readOnly:!0})],d.prototype,"isWGS84",null),(0,n._)([(0,c.MZ)({readOnly:!0})],d.prototype,"isWebMercator",null),(0,n._)([(0,c.MZ)({readOnly:!0})],d.prototype,"isGeographic",null),(0,n._)([(0,c.MZ)({readOnly:!0})],d.prototype,"isWrappable",null),(0,n._)([(0,c.MZ)({type:l.jz,json:{write:!0}})],d.prototype,"latestWkid",void 0),(0,n._)([(0,c.MZ)({readOnly:!0})],d.prototype,"metersPerUnit",null),(0,n._)([(0,c.MZ)({readOnly:!0})],d.prototype,"unit",null),(0,n._)([(0,c.MZ)({type:l.jz,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:null==this.wkt}}}}}}})],d.prototype,"wkid",void 0),(0,n._)([(0,c.MZ)({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:null==this.wkid}}}}}}})],d.prototype,"wkt",void 0),(0,n._)([(0,u.K)("wkt"),(0,u.K)("web-scene","wkt")],d.prototype,"writeWkt",null),(0,n._)([(0,c.MZ)({type:String,json:{write:!1}})],d.prototype,"wkt2",void 0),(0,n._)([(0,c.MZ)({type:l.jz,json:{write:!0}})],d.prototype,"vcsWkid",void 0),(0,n._)([(0,c.MZ)({type:l.jz,json:{write:!0}})],d.prototype,"latestVcsWkid",void 0),(0,n._)([(0,c.MZ)()],d.prototype,"imageCoordinateSystem",void 0),d=r=(0,n._)([(0,h.$)("esri.geometry.SpatialReference")],d),d.prototype.toJSON.isDefaultToJSON=!0,d.GCS_NAD_1927=new d({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),d.WGS84=new d(p.KK),d.WebMercator=new d(p.ch),d.PlateCarree=new d(p.tQ),Object.freeze&&(Object.freeze(d.GCS_NAD_1927),Object.freeze(d.WGS84),Object.freeze(d.WebMercator),Object.freeze(d.PlateCarree));const f=d},34670:(e,t,i)=>{"use strict";i.d(t,{FY:()=>a,LJ:()=>l,Ro:()=>c,fv:()=>o,jA:()=>f,tO:()=>p,xP:()=>y,y7:()=>d});var r=i(99263),n=i(67488);function s(e){return{wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${e.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`}}const o=s(r.$O),a=s(r.sH),l=s(r.Sw),c={wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${r.$O.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`},h=a.wkt.toUpperCase(),u=l.wkt.toUpperCase();function p(e){if(null!=e&&(0,n.fn)(e)){const t=e.wkid,i=e.wkt2??e.wkt;if((0,n.tl)(t))return r.sH;const s=i?.toUpperCase();if(i&&s===h)return r.sH;if((0,n.ZL)(t)||s&&s===u)return r.Sw}return r.$O}function d(e){return(0,n.tl)(e)?r.sH:(0,n.ZL)(e)?r.Sw:r.$O}function f(e){return(0,n.aI)(e,o)}function y(e){return f(e)||(0,n.aI)(e,a)||(0,n.aI)(e,l)}},92942:(e,t,i)=>{"use strict";i.r(t),i.d(t,{hydratedAdapter:()=>l});var r=i(8e3),n=i(67709),s=i(8977),o=i(65648),a=i(38648);const l={convertToGEGeometry:function(e,t){if(null==t)return null;let i="cache"in t?t.cache._geVersion:void 0;return null==i&&(i=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=i)),i},exportPoint:function(e,t,i){const r=e.hasZ(t),n=e.hasM(t),o=new s.A({x:e.getPointX(t),y:e.getPointY(t),spatialReference:i});return r&&(o.z=e.getPointZ(t)),n&&(o.m=e.getPointM(t)),o.cache._geVersion=t,o},exportPolygon:function(e,t,i){const r=new o.A({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return r.cache._geVersion=t,r},exportPolyline:function(e,t,i){const r=new a.A({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return r.cache._geVersion=t,r},exportMultipoint:function(e,t,i){const r=new n.A({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:i});return r.cache._geVersion=t,r},exportExtent:function(e,t,i){const n=e.hasZ(t),s=e.hasM(t),o=new r.A({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:i});if(n){const i=e.getZExtent(t);o.zmin=i.vmin,o.zmax=i.vmax}if(s){const i=e.getMExtent(t);o.mmin=i.vmin,o.mmax=i.vmax}return o.cache._geVersion=t,o}}},54481:(e,t,i)=>{"use strict";function r(e){const t=[];for(e.reset();e.nextPath();){const i=[];for(;e.nextPoint();)i.push([e.x,e.y]);t.push(i)}return e.reset(),t}function n(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}i.d(t,{A:()=>n,x:()=>r})},65670:(e,t,i)=>{"use strict";i.r(t),i.d(t,{buffer:()=>x,changeDefaultSpatialReferenceTolerance:()=>B,clearDefaultSpatialReferenceTolerance:()=>$,clip:()=>a,contains:()=>c,convexHull:()=>w,crosses:()=>h,cut:()=>l,densify:()=>F,difference:()=>M,disjoint:()=>m,distance:()=>u,equals:()=>p,extendedSpatialReferenceInfo:()=>o,flipHorizontal:()=>R,flipVertical:()=>P,generalize:()=>D,geodesicArea:()=>U,geodesicBuffer:()=>I,geodesicDensify:()=>j,geodesicLength:()=>V,intersect:()=>S,intersectLinesToPoints:()=>G,intersects:()=>d,isSimple:()=>_,nearestCoordinate:()=>C,nearestVertex:()=>k,nearestVertices:()=>N,offset:()=>E,overlaps:()=>g,planarArea:()=>Z,planarLength:()=>z,relate:()=>v,rotate:()=>O,simplify:()=>b,symmetricDifference:()=>T,touches:()=>f,union:()=>A,within:()=>y});var r=i(47313),n=i(92942);function s(e){return Array.isArray(e)?e[0].spatialReference:e&&e.spatialReference}function o(e){return r.G.extendedSpatialReferenceInfo(e)}function a(e,t){return r.G.clip(n.hydratedAdapter,s(e),e,t)}function l(e,t){return r.G.cut(n.hydratedAdapter,s(e),e,t)}function c(e,t){return r.G.contains(n.hydratedAdapter,s(e),e,t)}function h(e,t){return r.G.crosses(n.hydratedAdapter,s(e),e,t)}function u(e,t,i){return r.G.distance(n.hydratedAdapter,s(e),e,t,i)}function p(e,t){return r.G.equals(n.hydratedAdapter,s(e),e,t)}function d(e,t){return r.G.intersects(n.hydratedAdapter,s(e),e,t)}function f(e,t){return r.G.touches(n.hydratedAdapter,s(e),e,t)}function y(e,t){return r.G.within(n.hydratedAdapter,s(e),e,t)}function m(e,t){return r.G.disjoint(n.hydratedAdapter,s(e),e,t)}function g(e,t){return r.G.overlaps(n.hydratedAdapter,s(e),e,t)}function v(e,t,i){return r.G.relate(n.hydratedAdapter,s(e),e,t,i)}function _(e){return r.G.isSimple(n.hydratedAdapter,s(e),e)}function b(e){return r.G.simplify(n.hydratedAdapter,s(e),e)}function w(e,t=!1){return r.G.convexHull(n.hydratedAdapter,s(e),e,t)}function M(e,t){return r.G.difference(n.hydratedAdapter,s(e),e,t)}function T(e,t){return r.G.symmetricDifference(n.hydratedAdapter,s(e),e,t)}function S(e,t){return r.G.intersect(n.hydratedAdapter,s(e),e,t)}function A(e,t=null){return r.G.union(n.hydratedAdapter,s(e),e,t)}function E(e,t,i,o,a,l){return r.G.offset(n.hydratedAdapter,s(e),e,t,i,o,a,l)}function x(e,t,i,o=!1){return r.G.buffer(n.hydratedAdapter,s(e),e,t,i,o)}function I(e,t,i,o,a,l){return r.G.geodesicBuffer(n.hydratedAdapter,s(e),e,t,i,o,a,l)}function C(e,t,i=!0){return r.G.nearestCoordinate(n.hydratedAdapter,s(e),e,t,i)}function k(e,t){return r.G.nearestVertex(n.hydratedAdapter,s(e),e,t)}function N(e,t,i,o){return r.G.nearestVertices(n.hydratedAdapter,s(e),e,t,i,o)}function L(e){return"xmin"in e?"center"in e?e.center:null:"x"in e?e:"extent"in e?e.extent?.center??null:null}function O(e,t,i){if(null==e)throw new H;const n=e.spatialReference;if(null==(i=i??L(e)))throw new H;const s=e.constructor.fromJSON(r.G.rotate(e,t,i));return s.spatialReference=n,s}function R(e,t){if(null==e)throw new H;const i=e.spatialReference;if(null==(t=t??L(e)))throw new H;const n=e.constructor.fromJSON(r.G.flipHorizontal(e,t));return n.spatialReference=i,n}function P(e,t){if(null==e)throw new H;const i=e.spatialReference;if(null==(t=t??L(e)))throw new H;const n=e.constructor.fromJSON(r.G.flipVertical(e,t));return n.spatialReference=i,n}function D(e,t,i,o){return r.G.generalize(n.hydratedAdapter,s(e),e,t,i,o)}function F(e,t,i){return r.G.densify(n.hydratedAdapter,s(e),e,t,i)}function j(e,t,i,o=0){return r.G.geodesicDensify(n.hydratedAdapter,s(e),e,t,i,o)}function Z(e,t){return r.G.planarArea(n.hydratedAdapter,s(e),e,t)}function z(e,t){return r.G.planarLength(n.hydratedAdapter,s(e),e,t)}function U(e,t,i){return r.G.geodesicArea(n.hydratedAdapter,s(e),e,t,i)}function V(e,t,i){return r.G.geodesicLength(n.hydratedAdapter,s(e),e,t,i)}function G(e,t){return r.G.intersectLinesToPoints(n.hydratedAdapter,s(e),e,t)}function B(e,t){r.G.changeDefaultSpatialReferenceTolerance(e,t)}function $(e){r.G.clearDefaultSpatialReferenceTolerance(e)}class H extends Error{constructor(){super("Illegal Argument Exception")}}},34561:(e,t,i)=>{"use strict";i.r(t),i.d(t,{canProjectToWGS84ComparableLonLat:()=>re,canProjectWithoutEngine:()=>G,getTransformation:()=>D,getTransformations:()=>F,initializeProjection:()=>B,isLoaded:()=>x,isLoadedOrLoad:()=>I,isLoadedOrLoadFor:()=>C,load:()=>N,project:()=>L,projectExtent:()=>ee,projectMany:()=>O,projectMultipoint:()=>W,projectOrLoad:()=>R,projectOrLoadMany:()=>P,projectPoint:()=>H,projectPolygon:()=>X,projectPolyline:()=>Y,projectWithZConversion:()=>V,projectWithoutEngine:()=>$,requiresLoad:()=>k,test:()=>z,tryProjectWithZConversion:()=>U,unload:()=>Z});var r=i(62991),n=i(37623),s=i(99595),o=i(29745),a=i(19913),l=i(34670),c=i(8e3),h=i(67709),u=i(89349),p=i(8977),d=i(65648),f=i(38648),y=i(44153),m=i(88133),g=i(99269),v=i(19262),_=i(94477),b=i(67488),w=i(55792);let M=null,T=null,S=null,A={};const E=new o.I;function x(){return!!M&&(0,u.i)()}function I(){return!!x()||((0,s.gc)(E),N(),!1)}function C(e,t){return!e||!t||G(e,t)||I()}function k(e,t){return!G(e,t)&&!x()}function N(e){return null==S&&(S=Promise.all([(0,u.l)(),Promise.resolve().then(i.bind(i,47313)).then((e=>e.g)),Promise.resolve().then(i.bind(i,92942))])),S.then((([,t,{hydratedAdapter:i}])=>{(0,n.Te)(e),T=i,M=t.default,M._enableProjection(u.p),E.notify()}))}function L(e,t,i=null,r=null){return Array.isArray(e)?0===e.length?[]:O(T,e,e[0].spatialReference,t,i,r):O(T,[e],e.spatialReference,t,i,r)[0]}function O(e,t,i,r,n=null,s=null){if(null==i||null==r)return t;if(G(i,r,n))return t.map((e=>$(e,i,r)));if(null==n&&(0,l.jA)(i))return t.map((e=>$(e,i,y.A.WGS84))).map((e=>U(e,r)));if(null==n&&(0,l.jA)(r))return t.map((e=>U(e,y.A.WGS84))).map((e=>$(e,y.A.WGS84,r)));if(null==n){const e=_.A.cacheKey(i,r);void 0!==A[e]?n=A[e]:(null==(n=D(i,r,void 0))&&(n=new _.A),A[e]=n)}if(null==M||null==e)throw new j;return null!=s?M._project(e,t,i,r,n,s):M._project(e,t,i,r,n)}function R(e,t){const i=P([e],t);return null!=i.pending?{pending:i.pending,geometry:null}:null!=i.geometries?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function P(e,t){if(!x())for(const i of e)if(null!=i&&!(0,b.aI)(i.spatialReference,t)&&(0,b.fn)(i.spatialReference)&&(0,b.fn)(t)&&!G(i.spatialReference,t))return(0,s.gc)(E),{pending:N(),geometries:null};return{pending:null,geometries:e.map((e=>null==e?null:(0,b.aI)(e.spatialReference,t)?e:(0,b.fn)(e.spatialReference)&&(0,b.fn)(t)?U(e,t):null))}}function D(e,t,i=null){if(null==e||null==t)return null;if(null==M||null==T)throw new j;const r=M._getTransformation(T,e,t,i,i?.spatialReference);return null!==r?_.A.fromGE(r):null}function F(e,t,i=null){if(null==M||null==T)throw new j;const r=M._getTransformationBySuitability(T,e,t,i,i?.spatialReference);if(null!==r){const e=[];for(const t of r)e.push(_.A.fromGE(t));return e}return[]}class j extends r.A{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}function Z(){M=null,T=null,S=null,A={}}const z={get loadPromise(){return S}};function U(e,t){try{const i=L(e,t);if(null==i)return null;"xmin"in e&&"xmin"in i&&(i.zmin=e.zmin,i.zmax=e.zmax);const r=(0,w.N)(i.type,e.spatialReference,t);return null!=r&&r(i),i}catch(e){if(!(e instanceof j))throw e;return null}}async function V(e,t,i){const r=e.spatialReference;return null!=r&&null!=t&&await B(r,t,null,i),U(e,t)}function G(e,t,i){return!i&&(!!(0,b.aI)(e,t)||(0,b.fn)(e)&&(0,b.fn)(t)&&!!(0,g.jd)(e,t,g.N9))}async function B(e,t,i,r){if(x())return(0,n.NO)(r);if(Array.isArray(e)){for(const{source:t,dest:i,geographicTransformation:n}of e)if(t&&i&&!G(t,i,n))return N(r)}else if(e&&t&&!G(e,t,i))return N(r);return(0,n.NO)(r)}function $(e,t,i){return e?"x"in e?q(e,t,new p.A,i,0):"xmin"in e?te(e,t,new c.A,i,0):"rings"in e?Q(e,t,new d.A,i,0):"paths"in e?J(e,t,new f.A,i,0):"points"in e?K(e,t,new h.A,i,0):null:null}function H(e,t,i=t.spatialReference,r=0){return null!=i&&null!=e.spatialReference&&null!=q(e,e.spatialReference,t,i,r)}function q(e,t,i,r,n){ne[0]=e.x,ne[1]=e.y;const s=e.z;return ne[2]=void 0!==s?s:n,(0,m.projectBuffer)(ne,t,0,ne,r,0,1)?(i.x=ne[0],i.y=ne[1],i.spatialReference=r,void 0!==s||(0,l.xP)(r)?(i.z=ne[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),void 0===e.m?(i.m=void 0,i.hasM=!1):(i.m=e.m,i.hasM=!0),i):null}function W(e,t,i=t.spatialReference,r=0){return null!=e.spatialReference&&null!=i&&null!=K(e,e.spatialReference,t,i,r)}function K(e,t,i,r,n){const{points:s,hasZ:o,hasM:a}=e,c=[],h=s.length,u=[];for(const e of s)u.push(e[0],e[1],o?e[2]:n);if(!(0,m.projectBuffer)(u,t,0,u,r,0,h))return null;const p=o||(0,l.xP)(r);for(let e=0;e<h;++e){const t=3*e,i=u[t],r=u[t+1];p&&a?c.push([i,r,u[t+2],s[e][3]]):p?c.push([i,r,u[t+2]]):a?c.push([i,r,s[e][2]]):c.push([i,r])}return i.points=c,i.spatialReference=r,i.hasZ=o,i.hasM=a,i}function Y(e,t,i=t.spatialReference,r=0){return null!=e.spatialReference&&null!=i&&null!=J(e,e.spatialReference,t,i,r)}function J(e,t,i,r,n){const{paths:s,hasZ:o,hasM:a}=e,c=[];if(!ie(s,o??!1,a??!1,t,c,r,n))return null;const h=o||(0,l.xP)(r);return i.paths=c,i.spatialReference=r,i.hasZ=h,i.hasM=a,i}function X(e,t,i=t.spatialReference,r=0){return null!=e.spatialReference&&null!=i&&null!=Q(e,e.spatialReference,t,i,r)}function Q(e,t,i,r,n){const{rings:s,hasZ:o,hasM:a}=e,c=[];if(!ie(s,o??!1,a??!1,t,c,r,n))return null;const h=o||(0,l.xP)(r);return i.rings=c,i.spatialReference=r,i.hasZ=h,i.hasM=a,i}function ee(e,t,i=t.spatialReference,r=0){return null!=e.spatialReference&&null!=i&&null!=te(e,e.spatialReference,t,i,r)}function te(e,t,i,r,n){const{xmin:s,ymin:o,xmax:a,ymax:c,hasZ:h,hasM:u}=e,p=h?e.zmin:n;if(!(0,v.L)(s,o,p,t,ne,r))return null;const d=h||(0,l.xP)(r);i.xmin=ne[0],i.ymin=ne[1],d&&(i.zmin=ne[2]);const f=h?e.zmax:n;return(0,v.L)(a,c,f,t,ne,r)?(i.xmax=ne[0],i.ymax=ne[1],d&&(i.zmax=ne[2]),u&&(i.mmin=e.mmin,i.mmax=e.mmax),i.spatialReference=r,i):null}function ie(e,t,i,r,n,s,o=0){const a=new Array;for(const i of e)for(const e of i)a.push(e[0],e[1],t?e[2]:o);if(!(0,m.projectBuffer)(a,r,0,a,s,0,a.length/3))return!1;let c=0;n.length=0;const h=t||(0,l.xP)(s);for(const t of e){const e=new Array;for(const r of t)h&&i?e.push([a[c++],a[c++],a[c++],r[3]]):h?e.push([a[c++],a[c++],a[c++]]):i?(e.push([a[c++],a[c++],r[2]]),c++):(e.push([a[c++],a[c++]]),c++);n.push(e)}return!0}function re(e){return null!=e&&null!=(0,g.Yz)(e)}const ne=(0,a.vt)()},88133:(e,t,i)=>{"use strict";i.r(t),i.d(t,{projectBuffer:()=>n});var r=i(99269);function n(e,t,i,n,s,o,a=1){const l=(0,r.jd)(t,s,r.N9);if(null==l)return!1;if(l===r.pO){if(e===n&&i===o)return!0;const t=i+3*a;for(let r=i,s=o;r<t;r++,s++)n[s]=e[r];return!0}const c=i+3*a;for(let t=i,r=o;t<c;t+=3,r+=3)l(e,t,n,r);return!0}},64159:(e,t,i)=>{"use strict";i.d(t,{W:()=>a,g:()=>o});var r=i(19913),n=i(34561),s=i(88133);function o(e,t,i,r){if((0,n.canProjectWithoutEngine)(e.spatialReference,i)){l[0]=e.x,l[1]=e.y;const n=e.z;return l[2]=n??r??0,(0,s.projectBuffer)(l,e.spatialReference,0,t,i,0,1)}const o=(0,n.tryProjectWithZConversion)(e,i);return!!o&&(t[0]=o?.x,t[1]=o?.y,t[2]=o?.z??r??0,!0)}async function a(e,t,i,r,s){return await(0,n.initializeProjection)(e.spatialReference,i,null,s),o(e,t,i,r)}const l=(0,r.vt)()},42722:(e,t,i)=>{"use strict";i.d(t,{F:()=>s}),i(34561);var r=i(44153),n=i(64159);function s(e,t,i,r,s){return!(null==t||null==r||e.length<2)&&(o.x=e[0],o.y=e[1],o.z=e[2],o.spatialReference=t,(0,n.g)(o,i,r,s))}const o=(0,i(82320).T)(0,0,0,r.A.WGS84)},19262:(e,t,i)=>{"use strict";i.d(t,{L:()=>s});var r=i(19913),n=i(88133);function s(e,t,i,r,s,a){return o[0]=e,o[1]=t,o[2]=i,(0,n.projectBuffer)(o,r,0,s,a,0,1)}const o=(0,r.vt)()},99269:(e,t,i)=>{"use strict";i.d(t,{N9:()=>P,Qk:()=>y,RC:()=>v,Wv:()=>O,Yz:()=>d,jd:()=>f,n4:()=>E,pO:()=>m,rz:()=>r,w5:()=>p,zp:()=>R});var r,n,s=i(4506),o=i(5262),a=i(34670),l=i(99263),c=i(1138),h=i(67488),u=i(79509);(n=r||(r={}))[n.UNKNOWN=0]="UNKNOWN",n[n.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",n[n.WGS84=2]="WGS84",n[n.WEB_MERCATOR=3]="WEB_MERCATOR",n[n.WGS84_ECEF=4]="WGS84_ECEF",n[n.CGCS2000=5]="CGCS2000",n[n.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",n[n.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",n[n.GCSMARS2000=8]="GCSMARS2000",n[n.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",n[n.GCSMOON2000=10]="GCSMOON2000",n[n.LON_LAT=11]="LON_LAT",n[n.PLATE_CARREE=12]="PLATE_CARREE";const p={[r.WGS84]:{[r.CGCS2000]:null,[r.GCSMARS2000]:null,[r.GCSMOON2000]:null,[r.LON_LAT]:m,[r.WGS84_COMPARABLE_LON_LAT]:m,[r.SPHERICAL_ECEF]:A,[r.SPHERICAL_MARS_PCPF]:null,[r.SPHERICAL_MOON_PCPF]:null,[r.UNKNOWN]:null,[r.WEB_MERCATOR]:_,[r.PLATE_CARREE]:b,[r.WGS84]:m,[r.WGS84_ECEF]:k},[r.CGCS2000]:{[r.CGCS2000]:m,[r.GCSMARS2000]:null,[r.GCSMOON2000]:null,[r.LON_LAT]:m,[r.WGS84_COMPARABLE_LON_LAT]:m,[r.SPHERICAL_ECEF]:A,[r.SPHERICAL_MARS_PCPF]:null,[r.SPHERICAL_MOON_PCPF]:null,[r.UNKNOWN]:null,[r.WEB_MERCATOR]:null,[r.PLATE_CARREE]:b,[r.WGS84]:null,[r.WGS84_ECEF]:k},[r.GCSMARS2000]:{[r.CGCS2000]:null,[r.GCSMARS2000]:m,[r.GCSMOON2000]:null,[r.LON_LAT]:m,[r.WGS84_COMPARABLE_LON_LAT]:null,[r.SPHERICAL_ECEF]:null,[r.SPHERICAL_MARS_PCPF]:S,[r.SPHERICAL_MOON_PCPF]:null,[r.UNKNOWN]:null,[r.WEB_MERCATOR]:null,[r.PLATE_CARREE]:null,[r.WGS84]:null,[r.WGS84_ECEF]:null},[r.GCSMOON2000]:{[r.CGCS2000]:null,[r.GCSMARS2000]:null,[r.GCSMOON2000]:m,[r.LON_LAT]:m,[r.WGS84_COMPARABLE_LON_LAT]:null,[r.SPHERICAL_ECEF]:null,[r.SPHERICAL_MARS_PCPF]:null,[r.SPHERICAL_MOON_PCPF]:T,[r.UNKNOWN]:null,[r.WEB_MERCATOR]:null,[r.PLATE_CARREE]:null,[r.WGS84]:null,[r.WGS84_ECEF]:null},[r.WEB_MERCATOR]:{[r.CGCS2000]:null,[r.GCSMARS2000]:null,[r.GCSMOON2000]:null,[r.LON_LAT]:g,[r.WGS84_COMPARABLE_LON_LAT]:g,[r.SPHERICAL_ECEF]:function(e,t,i,r){const n=e[t]/z,s=Z-2*Math.atan(Math.exp(-e[t+1]/z)),o=z+e[t+2],a=Math.cos(s)*o;i[r]=Math.cos(n)*a,i[r+1]=Math.sin(n)*a,i[r+2]=Math.sin(s)*o},[r.SPHERICAL_MARS_PCPF]:null,[r.SPHERICAL_MOON_PCPF]:null,[r.UNKNOWN]:null,[r.WEB_MERCATOR]:m,[r.PLATE_CARREE]:function(e,t,i,r){g(e,t,i,r),b(i,r,i,r)},[r.WGS84]:g,[r.WGS84_ECEF]:function(e,t,i,r){g(e,t,i,r),k(i,r,i,r)}},[r.WGS84_ECEF]:{[r.CGCS2000]:N,[r.GCSMARS2000]:null,[r.GCSMOON2000]:null,[r.LON_LAT]:N,[r.WGS84_COMPARABLE_LON_LAT]:N,[r.SPHERICAL_ECEF]:function(e,t,i,r){N(e,t,i,r),A(i,r,i,r)},[r.SPHERICAL_MARS_PCPF]:null,[r.SPHERICAL_MOON_PCPF]:null,[r.UNKNOWN]:null,[r.WEB_MERCATOR]:function(e,t,i,r){N(e,t,i,r),_(i,r,i,r)},[r.PLATE_CARREE]:function(e,t,i,r){N(e,t,i,r),b(i,r,i,r)},[r.WGS84]:N,[r.WGS84_ECEF]:m},[r.SPHERICAL_ECEF]:{[r.CGCS2000]:C,[r.GCSMARS2000]:null,[r.GCSMOON2000]:null,[r.LON_LAT]:C,[r.WGS84_COMPARABLE_LON_LAT]:C,[r.SPHERICAL_ECEF]:m,[r.SPHERICAL_MARS_PCPF]:null,[r.SPHERICAL_MOON_PCPF]:null,[r.UNKNOWN]:null,[r.WEB_MERCATOR]:function(e,t,i,r){C(e,t,i,r),_(i,r,i,r)},[r.PLATE_CARREE]:function(e,t,i,r){C(e,t,i,r),b(i,r,i,r)},[r.WGS84]:C,[r.WGS84_ECEF]:function(e,t,i,r){C(e,t,i,r),k(i,r,i,r)}},[r.SPHERICAL_MARS_PCPF]:{[r.CGCS2000]:null,[r.GCSMARS2000]:I,[r.GCSMOON2000]:null,[r.LON_LAT]:I,[r.WGS84_COMPARABLE_LON_LAT]:null,[r.SPHERICAL_ECEF]:null,[r.SPHERICAL_MARS_PCPF]:m,[r.SPHERICAL_MOON_PCPF]:null,[r.UNKNOWN]:null,[r.WEB_MERCATOR]:null,[r.PLATE_CARREE]:null,[r.WGS84]:null,[r.WGS84_ECEF]:null},[r.SPHERICAL_MOON_PCPF]:{[r.CGCS2000]:null,[r.GCSMARS2000]:null,[r.GCSMOON2000]:x,[r.LON_LAT]:x,[r.WGS84_COMPARABLE_LON_LAT]:null,[r.SPHERICAL_ECEF]:null,[r.SPHERICAL_MARS_PCPF]:null,[r.SPHERICAL_MOON_PCPF]:m,[r.UNKNOWN]:null,[r.WEB_MERCATOR]:null,[r.PLATE_CARREE]:null,[r.WGS84]:null,[r.WGS84_ECEF]:null},[r.UNKNOWN]:{[r.CGCS2000]:null,[r.GCSMARS2000]:null,[r.GCSMOON2000]:null,[r.LON_LAT]:null,[r.WGS84_COMPARABLE_LON_LAT]:null,[r.SPHERICAL_ECEF]:null,[r.SPHERICAL_MARS_PCPF]:null,[r.SPHERICAL_MOON_PCPF]:null,[r.UNKNOWN]:m,[r.WEB_MERCATOR]:null,[r.PLATE_CARREE]:null,[r.WGS84]:null,[r.WGS84_ECEF]:null},[r.LON_LAT]:{[r.CGCS2000]:m,[r.GCSMARS2000]:m,[r.GCSMOON2000]:m,[r.LON_LAT]:m,[r.WGS84_COMPARABLE_LON_LAT]:m,[r.SPHERICAL_ECEF]:A,[r.SPHERICAL_MARS_PCPF]:S,[r.SPHERICAL_MOON_PCPF]:T,[r.UNKNOWN]:null,[r.WEB_MERCATOR]:_,[r.PLATE_CARREE]:b,[r.WGS84]:m,[r.WGS84_ECEF]:k},[r.WGS84_COMPARABLE_LON_LAT]:{[r.CGCS2000]:null,[r.GCSMARS2000]:null,[r.GCSMOON2000]:null,[r.LON_LAT]:m,[r.WGS84_COMPARABLE_LON_LAT]:m,[r.SPHERICAL_ECEF]:A,[r.SPHERICAL_MARS_PCPF]:null,[r.SPHERICAL_MOON_PCPF]:null,[r.UNKNOWN]:null,[r.WEB_MERCATOR]:null,[r.PLATE_CARREE]:b,[r.WGS84]:m,[r.WGS84_ECEF]:k},[r.PLATE_CARREE]:{[r.CGCS2000]:w,[r.GCSMARS2000]:null,[r.GCSMOON2000]:null,[r.LON_LAT]:w,[r.WGS84_COMPARABLE_LON_LAT]:w,[r.SPHERICAL_ECEF]:function(e,t,i,r){w(e,t,i,r),A(i,r,i,r)},[r.SPHERICAL_MARS_PCPF]:null,[r.SPHERICAL_MOON_PCPF]:null,[r.UNKNOWN]:null,[r.WEB_MERCATOR]:function(e,t,i,r){w(e,t,i,r),_(i,r,i,r)},[r.PLATE_CARREE]:m,[r.WGS84]:w,[r.WGS84_ECEF]:function(e,t,i,r){w(e,t,i,r),k(i,r,i,r)}}};function d(e){const t=y(e,O);return p[t][r.WGS84_COMPARABLE_LON_LAT]}function f(e,t,i=L()){return null==e||null==t?null:function(e,t,i){if(null==e||null==t||i.source.spatialReference===e&&i.dest.spatialReference===t)return i;const n=y(e,i.source),s=y(t,i.dest);return n===r.UNKNOWN&&s===r.UNKNOWN?(0,h.aI)(e,t)?i.projector=m:i.projector=null:i.projector=p[n][s],i}(e,t,i).projector}function y(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=(0,o.GA)(e,1)),(0,a.jA)(e)?t.spatialReferenceId=r.SPHERICAL_ECEF:(0,h.oT)(e)?t.spatialReferenceId=r.WGS84:(0,h.K8)(e)?t.spatialReferenceId=r.WEB_MERCATOR:(0,h.r1)(e)?t.spatialReferenceId=r.PLATE_CARREE:e.wkt===a.Ro.wkt?t.spatialReferenceId=r.WGS84_ECEF:e.wkid===u.Y.CGCS2000?t.spatialReferenceId=r.CGCS2000:e.wkt===a.FY.wkt?t.spatialReferenceId=r.SPHERICAL_MARS_PCPF:e.wkt===a.LJ.wkt?t.spatialReferenceId=r.SPHERICAL_MOON_PCPF:(0,h.q8)(e)?t.spatialReferenceId=r.GCSMARS2000:(0,h.KQ)(e)?t.spatialReferenceId=r.GCSMOON2000:t.spatialReferenceId=r.UNKNOWN):r.UNKNOWN}function m(e,t,i,r){e!==i&&(i[r++]=e[t++],i[r++]=e[t++],i[r]=e[t])}function g(e,t,i,r){i[r]=F*(e[t]/z),i[r+1]=F*(Z-2*Math.atan(Math.exp(-e[t+1]/z))),i[r+2]=e[t+2]}function v(e,t,i,r,n){const o=.4999999*j,a=(0,s.qE)(D*e[t+1],-o,o),l=Math.sin(a);i[r++]=D*e[t]*n.radius,i[r++]=n.halfSemiMajorAxis*Math.log((1+l)/(1-l)),i[r]=e[t+2]}function _(e,t,i,r){v(e,t,i,r,l.$O)}function b(e,t,i,r){i[r]=e[t]*U,i[r+1]=e[t+1]*U,i[r+2]=e[t+2]}function w(e,t,i,r){i[r]=e[t]*V,i[r+1]=e[t+1]*V,i[r+2]=e[t+2]}function M(e,t,i,r,n){const s=n+e[t+2],o=D*e[t+1],a=D*e[t],l=Math.cos(o)*s;i[r]=Math.cos(a)*l,i[r+1]=Math.sin(a)*l,i[r+2]=Math.sin(o)*s}function T(e,t,i,r){M(e,t,i,r,l.Sw.radius)}function S(e,t,i,r){M(e,t,i,r,l.sH.radius)}function A(e,t,i,r){M(e,t,i,r,l.$O.radius)}function E(e,t,i,r,n){const o=e[t],a=e[t+1],l=e[t+2],c=Math.sqrt(o*o+a*a+l*l),h=(0,s.YN)(l/(0===c?1:c)),u=Math.atan2(a,o);i[r++]=F*u,i[r++]=F*h,i[r]=c-n}function x(e,t,i,r){E(e,t,i,r,l.Sw.radius)}function I(e,t,i,r){E(e,t,i,r,l.sH.radius)}function C(e,t,i,r){E(e,t,i,r,l.$O.radius)}function k(e,t,i,r){!function(e,t,i,r,n){const s=D*e[t],o=D*e[t+1],a=e[t+2],l=Math.sin(o),c=Math.cos(o),h=n.radius/Math.sqrt(1-n.eccentricitySquared*l*l);i[r++]=(h+a)*c*Math.cos(s),i[r++]=(h+a)*c*Math.sin(s),i[r++]=(h*(1-n.eccentricitySquared)+a)*l}(e,t,i,r,l.$O)}function N(e,t,i,r){const n=c.TP,s=e[t],o=e[t+1],a=e[t+2];let h,u,p,d,f,y,m,g,v,_,b,w,M,T,S,A,E,x,I,C,k;h=Math.abs(a),u=s*s+o*o,p=Math.sqrt(u),d=u+a*a,f=Math.sqrt(d),C=Math.atan2(o,s),y=a*a/d,m=u/d,T=n.a2/f,S=n.a3-n.a4/f,m>.3?(g=h/f*(1+m*(n.a1+T+y*S)/f),I=Math.asin(g),_=g*g,v=Math.sqrt(1-_)):(v=p/f*(1-y*(n.a5-T-m*S)/f),I=Math.acos(v),_=1-v*v,g=Math.sqrt(_)),b=1-l.$O.eccentricitySquared*_,w=l.$O.radius/Math.sqrt(b),M=n.a6*w,T=p-w*v,S=h-M*g,E=v*T+g*S,A=v*S-g*T,x=A/(M/b+E),I+=x,k=E+A*x/2,a<0&&(I=-I),i[r++]=F*C,i[r++]=F*I,i[r]=k}function L(){return{source:{spatialReference:null,spatialReferenceId:r.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:r.UNKNOWN,metersPerUnit:1},projector:m}}const O={spatialReference:null,spatialReferenceId:r.UNKNOWN},R={spatialReference:null,spatialReferenceId:r.UNKNOWN},P=L(),D=(0,s.kU)(1),F=(0,s.KJ)(1),j=Math.PI,Z=.5*j,z=l.$O.radius,U=z*j/180,V=180/(z*j)},60929:(e,t,i)=>{"use strict";var r;i.d(t,{_:()=>r}),function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"}(r||(r={}))},99263:(e,t,i)=>{"use strict";i.d(t,{$O:()=>n,Sw:()=>o,sH:()=>s});class r{constructor(e,t,i,r){this.semiMajorAxis=e,this.flattening=t,this.outerAtmosphereRimWidth=i;const n=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*n,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=r||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const n=new r(6378137,1/298.257223563,3e5,.006694379990137799),s=new r(3396190,1/169.8944472236118,23e4),o=new r(1737400,0,0)},94477:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});let r=0;class n{static fromGE(e){const t=new n;return t._wkt=e.wkt,t._wkid=e.wkid,t._isInverse=e.isInverse,t}constructor(e){this.uid=r++,e?(this._wkt=null!=e.wkt?e.wkt:null,this._wkid=null!=e.wkid?e.wkid:-1,this._isInverse=null!=e.isInverse&&!0===e.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=r++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=r++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=r++}getInverse(){const e=new n;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}}class s{static cacheKey(e,t){return[e.wkid?.toString()??"-1",e.wkt?.toString()??"",e.wkt2?.toString()??"",t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??""].join()}static fromGE(e){const t=new s;let i="";for(const r of e.steps){const e=n.fromGE(r);t.steps.push(e),i+=e.uid.toString()+","}return t._cachedProjection={},t._gtlistentry=null,t._chain=i,t}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e?.steps)for(const t of e.steps)t instanceof n?this.steps.push(t):this.steps.push(new n({wkid:t.wkid,wkt:t.wkt,isInverse:t.isInverse}))}getInverse(){const e=new s;e.steps=[];for(let t=this.steps.length-1;t>=0;t--){const i=this.steps[t];e.steps.push(i.getInverse())}return e}getGTListEntry(){let e="";for(const t of this.steps)e+=t.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,t,i){this._cachedProjection[s.cacheKey(e,t)]=i}getCachedGeTransformation(e,t){let i="";for(const e of this.steps)i+=e.uid.toString()+",";i!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=i);const r=this._cachedProjection[s.cacheKey(e,t)];return void 0===r?null:r}}},58823:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});var r=i(82392),n=i(14755),s=i(84977),o=i(81482),a=(i(6273),i(80861),i(67498),i(85716)),l=i(26325);let c=class extends((0,n.O)(s.oY)){constructor(e){super(e),this.type="georeferenced",this.origin=null}};(0,r._)([(0,a.e)({georeferenced:"georeferenced"},{readOnly:!0})],c.prototype,"type",void 0),(0,r._)([(0,o.MZ)({type:[Number],nonNullable:!1,json:{write:!0}})],c.prototype,"origin",void 0),c=(0,r._)([(0,l.$)("esri.geometry.support.MeshGeoreferencedVertexSpace")],c);const h=c},93320:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var r=i(82392),n=i(14755),s=i(84977),o=i(81482),a=(i(6273),i(80861),i(67498),i(85716)),l=i(26325),c=i(19913);let h=class extends((0,n.O)(s.oY)){constructor(e){super(e),this.type="local",this.origin=(0,c.vt)()}};(0,r._)([(0,a.e)({local:"local"},{readOnly:!0})],h.prototype,"type",void 0),(0,r._)([(0,o.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],h.prototype,"origin",void 0),h=(0,r._)([(0,l.$)("esri.geometry.support.MeshLocalVertexSpace")],h);const u=h},79509:(e,t,i)=>{"use strict";var r;i.d(t,{Y:()=>r}),function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"}(r||(r={}))},40969:(e,t,i)=>{"use strict";let r;i.d(t,{A:()=>n});const n={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for(r=2e3;r<=2045;r++)n[r]=0;for(r=2056;r<=2065;r++)n[r]=0;for(r=2067;r<=2135;r++)n[r]=0;for(r=2137;r<=2154;r++)n[r]=0;for(r=2161;r<=2170;r++)n[r]=0;for(r=2172;r<=2193;r++)n[r]=0;for(r=2195;r<=2198;r++)n[r]=0;for(r=2200;r<=2203;r++)n[r]=0;for(r=2205;r<=2217;r++)n[r]=0;for(r=2222;r<=2224;r++)n[r]=1;for(r=2225;r<=2250;r++)n[r]=2;for(r=2251;r<=2253;r++)n[r]=1;for(r=2257;r<=2264;r++)n[r]=2;for(r=2274;r<=2279;r++)n[r]=2;for(r=2280;r<=2282;r++)n[r]=1;for(r=2283;r<=2289;r++)n[r]=2;for(r=2290;r<=2292;r++)n[r]=0;for(r=2308;r<=2313;r++)n[r]=0;for(r=2315;r<=2491;r++)n[r]=0;for(r=2494;r<=2866;r++)n[r]=0;for(r=2867;r<=2869;r++)n[r]=1;for(r=2870;r<=2888;r++)n[r]=2;for(r=2891;r<=2895;r++)n[r]=2;for(r=2896;r<=2898;r++)n[r]=1;for(r=2902;r<=2908;r++)n[r]=2;for(r=2915;r<=2920;r++)n[r]=2;for(r=2921;r<=2923;r++)n[r]=1;for(r=2924;r<=2930;r++)n[r]=2;for(r=2931;r<=2962;r++)n[r]=0;for(r=2964;r<=2968;r++)n[r]=2;for(r=2969;r<=2973;r++)n[r]=0;for(r=2975;r<=2991;r++)n[r]=0;for(r=2995;r<=3051;r++)n[r]=0;for(r=3054;r<=3079;r++)n[r]=0;for(r=3081;r<=3088;r++)n[r]=0;for(r=3092;r<=3101;r++)n[r]=0;for(r=3106;r<=3138;r++)n[r]=0;for(r=3146;r<=3151;r++)n[r]=0;for(r=3153;r<=3166;r++)n[r]=0;for(r=3168;r<=3172;r++)n[r]=0;for(r=3174;r<=3203;r++)n[r]=0;for(r=3294;r<=3358;r++)n[r]=0;for(r=3367;r<=3403;r++)n[r]=0;for(r=3408;r<=3416;r++)n[r]=0;for(r=3417;r<=3438;r++)n[r]=2;for(r=3441;r<=3446;r++)n[r]=2;for(r=3447;r<=3450;r++)n[r]=0;for(r=3451;r<=3459;r++)n[r]=2;for(r=3460;r<=3478;r++)n[r]=0;for(r=3554;r<=3559;r++)n[r]=0;for(r=3560;r<=3570;r++)n[r]=2;for(r=3571;r<=3581;r++)n[r]=0;for(r=3594;r<=3597;r++)n[r]=0;for(r=3601;r<=3604;r++)n[r]=0;for(r=3637;r<=3639;r++)n[r]=0;for(r=3665;r<=3667;r++)n[r]=0;for(r=3693;r<=3695;r++)n[r]=0;for(r=3701;r<=3727;r++)n[r]=0;for(r=3728;r<=3739;r++)n[r]=2;for(r=3740;r<=3751;r++)n[r]=0;for(r=3753;r<=3760;r++)n[r]=2;for(r=3761;r<=3773;r++)n[r]=0;for(r=3775;r<=3777;r++)n[r]=0;for(r=3779;r<=3781;r++)n[r]=0;for(r=3783;r<=3785;r++)n[r]=0;for(r=3788;r<=3791;r++)n[r]=0;for(r=3797;r<=3802;r++)n[r]=0;for(r=3814;r<=3816;r++)n[r]=0;for(r=3825;r<=3829;r++)n[r]=0;for(r=3832;r<=3841;r++)n[r]=0;for(r=3844;r<=3852;r++)n[r]=0;for(r=3873;r<=3885;r++)n[r]=0;for(r=3890;r<=3893;r++)n[r]=0;for(r=3907;r<=3912;r++)n[r]=0;for(r=3942;r<=3950;r++)n[r]=0;for(r=3968;r<=3970;r++)n[r]=0;for(r=3973;r<=3976;r++)n[r]=0;for(r=3986;r<=3989;r++)n[r]=0;for(r=3994;r<=3997;r++)n[r]=0;for(r=4048;r<=4051;r++)n[r]=0;for(r=4056;r<=4063;r++)n[r]=0;for(r=4093;r<=4096;r++)n[r]=0;for(r=4390;r<=4398;r++)n[r]=0;for(r=4399;r<=4413;r++)n[r]=2;for(r=4418;r<=4433;r++)n[r]=2;for(r=4455;r<=4457;r++)n[r]=2;for(r=4484;r<=4489;r++)n[r]=0;for(r=4491;r<=4554;r++)n[r]=0;for(r=4568;r<=4589;r++)n[r]=0;for(r=4652;r<=4656;r++)n[r]=0;for(r=4766;r<=4800;r++)n[r]=0;for(r=5014;r<=5016;r++)n[r]=0;for(r=5069;r<=5072;r++)n[r]=0;for(r=5105;r<=5130;r++)n[r]=0;for(r=5167;r<=5188;r++)n[r]=0;for(r=5253;r<=5259;r++)n[r]=0;for(r=5269;r<=5275;r++)n[r]=0;for(r=5292;r<=5311;r++)n[r]=0;for(r=5329;r<=5331;r++)n[r]=0;for(r=5343;r<=5349;r++)n[r]=0;for(r=5355;r<=5357;r++)n[r]=0;for(r=5387;r<=5389;r++)n[r]=0;for(r=5459;r<=5463;r++)n[r]=0;for(r=5479;r<=5482;r++)n[r]=0;for(r=5518;r<=5520;r++)n[r]=0;for(r=5530;r<=5539;r++)n[r]=0;for(r=5550;r<=5552;r++)n[r]=0;for(r=5562;r<=5583;r++)n[r]=0;for(r=5623;r<=5625;r++)n[r]=2;for(r=5631;r<=5639;r++)n[r]=0;for(r=5649;r<=5653;r++)n[r]=0;for(r=5663;r<=5680;r++)n[r]=0;for(r=5682;r<=5685;r++)n[r]=0;for(r=5875;r<=5877;r++)n[r]=0;for(r=5896;r<=5899;r++)n[r]=0;for(r=5921;r<=5940;r++)n[r]=0;for(r=6050;r<=6125;r++)n[r]=0;for(r=6244;r<=6275;r++)n[r]=0;for(r=6328;r<=6348;r++)n[r]=0;for(r=6350;r<=6356;r++)n[r]=0;for(r=6366;r<=6372;r++)n[r]=0;for(r=6381;r<=6387;r++)n[r]=0;for(r=6393;r<=6404;r++)n[r]=0;for(r=6480;r<=6483;r++)n[r]=0;for(r=6511;r<=6514;r++)n[r]=0;for(r=6579;r<=6581;r++)n[r]=0;for(r=6619;r<=6624;r++)n[r]=0;for(r=6625;r<=6627;r++)n[r]=2;for(r=6628;r<=6632;r++)n[r]=0;for(r=6634;r<=6637;r++)n[r]=0;for(r=6669;r<=6692;r++)n[r]=0;for(r=6707;r<=6709;r++)n[r]=0;for(r=6720;r<=6723;r++)n[r]=0;for(r=6732;r<=6738;r++)n[r]=0;for(r=6931;r<=6933;r++)n[r]=0;for(r=6956;r<=6959;r++)n[r]=0;for(r=7005;r<=7007;r++)n[r]=0;for(r=7057;r<=7070;r++)n[r]=2;for(r=7074;r<=7082;r++)n[r]=0;for(r=7109;r<=7118;r++)n[r]=0;for(r=7119;r<=7127;r++)n[r]=1;for(r=7374;r<=7376;r++)n[r]=0;for(r=7528;r<=7586;r++)n[r]=0;for(r=7587;r<=7645;r++)n[r]=2;for(r=7692;r<=7696;r++)n[r]=0;for(r=7755;r<=7787;r++)n[r]=0;for(r=7791;r<=7795;r++)n[r]=0;for(r=7799;r<=7801;r++)n[r]=0;for(r=7803;r<=7805;r++)n[r]=0;for(r=7825;r<=7831;r++)n[r]=0;for(r=7845;r<=7859;r++)n[r]=0;for(r=8013;r<=8032;r++)n[r]=0;for(r=8065;r<=8068;r++)n[r]=1;for(r=8518;r<=8529;r++)n[r]=2;for(r=8533;r<=8536;r++)n[r]=2;for(r=8538;r<=8540;r++)n[r]=2;for(r=8677;r<=8679;r++)n[r]=0;for(r=8836;r<=8840;r++)n[r]=0;for(r=8857;r<=8859;r++)n[r]=0;for(r=8908;r<=8910;r++)n[r]=0;for(r=9154;r<=9159;r++)n[r]=0;for(r=9205;r<=9218;r++)n[r]=0;for(r=9271;r<=9273;r++)n[r]=0;for(r=9295;r<=9297;r++)n[r]=0;for(r=9356;r<=9360;r++)n[r]=0;for(r=9404;r<=9407;r++)n[r]=0;for(r=9476;r<=9482;r++)n[r]=0;for(r=9487;r<=9494;r++)n[r]=0;for(r=9697;r<=9699;r++)n[r]=0;for(r=9821;r<=9865;r++)n[r]=0;for(r=10285;r<=10291;r++)n[r]=0;for(r=10314;r<=10317;r++)n[r]=0;for(r=10448;r<=10465;r++)n[r]=0;for(r=11114;r<=11118;r++)n[r]=0;for(r=20004;r<=20032;r++)n[r]=0;for(r=20047;r<=20049;r++)n[r]=0;for(r=20062;r<=20092;r++)n[r]=0;for(r=20135;r<=20138;r++)n[r]=0;for(r=20248;r<=20258;r++)n[r]=0;for(r=20348;r<=20358;r++)n[r]=0;for(r=20436;r<=20440;r++)n[r]=0;for(r=20822;r<=20824;r++)n[r]=0;for(r=20904;r<=20932;r++)n[r]=0;for(r=20934;r<=20936;r++)n[r]=0;for(r=21004;r<=21032;r++)n[r]=0;for(r=21035;r<=21037;r++)n[r]=0;for(r=21095;r<=21097;r++)n[r]=0;for(r=21148;r<=21150;r++)n[r]=0;for(r=21207;r<=21264;r++)n[r]=0;for(r=21307;r<=21364;r++)n[r]=0;for(r=21413;r<=21423;r++)n[r]=0;for(r=21453;r<=21463;r++)n[r]=0;for(r=21473;r<=21483;r++)n[r]=0;for(r=21780;r<=21782;r++)n[r]=0;for(r=21891;r<=21894;r++)n[r]=0;for(r=21896;r<=21899;r++)n[r]=0;for(r=22171;r<=22177;r++)n[r]=0;for(r=22181;r<=22187;r++)n[r]=0;for(r=22191;r<=22197;r++)n[r]=0;for(r=22207;r<=22222;r++)n[r]=0;for(r=22229;r<=22232;r++)n[r]=0;for(r=22234;r<=22236;r++)n[r]=0;for(r=22243;r<=22250;r++)n[r]=0;for(r=22262;r<=22265;r++)n[r]=0;for(r=22307;r<=22322;r++)n[r]=0;for(r=22348;r<=22357;r++)n[r]=0;for(r=22407;r<=22422;r++)n[r]=0;for(r=22462;r<=22465;r++)n[r]=0;for(r=22521;r<=22525;r++)n[r]=0;for(r=22607;r<=22622;r++)n[r]=0;for(r=22641;r<=22646;r++)n[r]=0;for(r=22648;r<=22657;r++)n[r]=0;for(r=22707;r<=22722;r++)n[r]=0;for(r=22762;r<=22765;r++)n[r]=0;for(r=22807;r<=22822;r++)n[r]=0;for(r=22991;r<=22994;r++)n[r]=0;for(r=23028;r<=23038;r++)n[r]=0;for(r=23301;r<=23333;r++)n[r]=2;for(r=23830;r<=23853;r++)n[r]=0;for(r=23866;r<=23872;r++)n[r]=0;for(r=23877;r<=23884;r++)n[r]=0;for(r=23886;r<=23894;r++)n[r]=0;for(r=23946;r<=23948;r++)n[r]=0;for(r=24311;r<=24313;r++)n[r]=0;for(r=24342;r<=24347;r++)n[r]=0;for(r=24370;r<=24374;r++)n[r]=10;for(r=24375;r<=24381;r++)n[r]=0;for(r=24718;r<=24721;r++)n[r]=0;for(r=24817;r<=24821;r++)n[r]=0;for(r=24877;r<=24882;r++)n[r]=0;for(r=24891;r<=24893;r++)n[r]=0;for(r=25391;r<=25395;r++)n[r]=0;for(r=25828;r<=25838;r++)n[r]=0;for(r=26191;r<=26195;r++)n[r]=0;for(r=26391;r<=26393;r++)n[r]=0;for(r=26701;r<=26722;r++)n[r]=0;for(r=26729;r<=26799;r++)n[r]=2;for(r=26801;r<=26803;r++)n[r]=2;for(r=26811;r<=26813;r++)n[r]=2;for(r=26847;r<=26870;r++)n[r]=2;for(r=26891;r<=26899;r++)n[r]=0;for(r=26901;r<=26923;r++)n[r]=0;for(r=26929;r<=26946;r++)n[r]=0;for(r=26948;r<=26998;r++)n[r]=0;for(r=27037;r<=27040;r++)n[r]=0;for(r=27205;r<=27232;r++)n[r]=0;for(r=27258;r<=27260;r++)n[r]=0;for(r=27391;r<=27398;r++)n[r]=0;for(r=27561;r<=27564;r++)n[r]=0;for(r=27571;r<=27574;r++)n[r]=0;for(r=27581;r<=27584;r++)n[r]=0;for(r=27591;r<=27594;r++)n[r]=0;for(r=28191;r<=28193;r++)n[r]=0;for(r=28348;r<=28358;r++)n[r]=0;for(r=28402;r<=28432;r++)n[r]=0;for(r=28462;r<=28492;r++)n[r]=0;for(r=29118;r<=29122;r++)n[r]=0;for(r=29168;r<=29172;r++)n[r]=0;for(r=29177;r<=29185;r++)n[r]=0;for(r=29187;r<=29195;r++)n[r]=0;for(r=29900;r<=29903;r++)n[r]=0;for(r=30161;r<=30179;r++)n[r]=0;for(r=30491;r<=30494;r++)n[r]=0;for(r=30729;r<=30732;r++)n[r]=0;for(r=31251;r<=31259;r++)n[r]=0;for(r=31265;r<=31268;r++)n[r]=0;for(r=31275;r<=31279;r++)n[r]=0;for(r=31281;r<=31297;r++)n[r]=0;for(r=31461;r<=31469;r++)n[r]=0;for(r=31491;r<=31495;r++)n[r]=0;for(r=31917;r<=31922;r++)n[r]=0;for(r=31965;r<=32e3;r++)n[r]=0;for(r=32001;r<=32003;r++)n[r]=2;for(r=32005;r<=32031;r++)n[r]=2;for(r=32033;r<=32060;r++)n[r]=2;for(r=32064;r<=32067;r++)n[r]=2;for(r=32074;r<=32077;r++)n[r]=2;for(r=32081;r<=32086;r++)n[r]=0;for(r=32107;r<=32130;r++)n[r]=0;for(r=32133;r<=32159;r++)n[r]=0;for(r=32164;r<=32167;r++)n[r]=2;for(r=32180;r<=32199;r++)n[r]=0;for(r=32201;r<=32260;r++)n[r]=0;for(r=32301;r<=32360;r++)n[r]=0;for(r=32401;r<=32460;r++)n[r]=0;for(r=32501;r<=32560;r++)n[r]=0;for(r=32601;r<=32662;r++)n[r]=0;for(r=32664;r<=32667;r++)n[r]=2;for(r=32701;r<=32761;r++)n[r]=0;for(r=53001;r<=53004;r++)n[r]=0;for(r=53008;r<=53019;r++)n[r]=0;for(r=53021;r<=53032;r++)n[r]=0;for(r=53034;r<=53037;r++)n[r]=0;for(r=53042;r<=53046;r++)n[r]=0;for(r=53074;r<=53080;r++)n[r]=0;for(r=54001;r<=54004;r++)n[r]=0;for(r=54008;r<=54019;r++)n[r]=0;for(r=54021;r<=54032;r++)n[r]=0;for(r=54034;r<=54037;r++)n[r]=0;for(r=54042;r<=54046;r++)n[r]=0;for(r=54048;r<=54053;r++)n[r]=0;for(r=54074;r<=54080;r++)n[r]=0;for(r=54098;r<=54101;r++)n[r]=0;for(r=102001;r<=102040;r++)n[r]=0;for(r=102042;r<=102063;r++)n[r]=0;for(r=102065;r<=102067;r++)n[r]=0;for(r=102070;r<=102117;r++)n[r]=0;for(r=102122;r<=102216;r++)n[r]=0;for(r=102221;r<=102377;r++)n[r]=0;for(r=102382;r<=102388;r++)n[r]=0;for(r=102389;r<=102398;r++)n[r]=2;for(r=102399;r<=102444;r++)n[r]=0;for(r=102445;r<=102447;r++)n[r]=2;for(r=102448;r<=102458;r++)n[r]=0;for(r=102459;r<=102468;r++)n[r]=2;for(r=102469;r<=102499;r++)n[r]=0;for(r=102500;r<=102519;r++)n[r]=1;for(r=102520;r<=102524;r++)n[r]=0;for(r=102525;r<=102529;r++)n[r]=2;for(r=102530;r<=102588;r++)n[r]=0;for(r=102590;r<=102598;r++)n[r]=0;for(r=102601;r<=102603;r++)n[r]=0;for(r=102605;r<=102628;r++)n[r]=0;for(r=102629;r<=102646;r++)n[r]=2;for(r=102648;r<=102700;r++)n[r]=2;for(r=102701;r<=102703;r++)n[r]=0;for(r=102707;r<=102730;r++)n[r]=2;for(r=102733;r<=102758;r++)n[r]=2;for(r=102767;r<=102900;r++)n[r]=0;for(r=102901;r<=102933;r++)n[r]=2;for(r=102934;r<=102950;r++)n[r]=13;for(r=102951;r<=102955;r++)n[r]=0;for(r=102961;r<=102963;r++)n[r]=0;for(r=102965;r<=102969;r++)n[r]=0;for(r=102971;r<=102973;r++)n[r]=0;for(r=102975;r<=102989;r++)n[r]=0;for(r=102990;r<=102992;r++)n[r]=1;for(r=102997;r<=103002;r++)n[r]=0;for(r=103003;r<=103008;r++)n[r]=2;for(r=103009;r<=103011;r++)n[r]=0;for(r=103012;r<=103014;r++)n[r]=2;for(r=103019;r<=103021;r++)n[r]=0;for(r=103022;r<=103024;r++)n[r]=2;for(r=103029;r<=103031;r++)n[r]=0;for(r=103032;r<=103034;r++)n[r]=2;for(r=103065;r<=103068;r++)n[r]=0;for(r=103074;r<=103076;r++)n[r]=0;for(r=103077;r<=103079;r++)n[r]=1;for(r=103080;r<=103082;r++)n[r]=0;for(r=103083;r<=103085;r++)n[r]=2;for(r=103090;r<=103093;r++)n[r]=0;for(r=103097;r<=103099;r++)n[r]=0;for(r=103100;r<=103102;r++)n[r]=2;for(r=103107;r<=103109;r++)n[r]=0;for(r=103110;r<=103112;r++)n[r]=2;for(r=103113;r<=103116;r++)n[r]=0;for(r=103117;r<=103120;r++)n[r]=2;for(r=103153;r<=103157;r++)n[r]=0;for(r=103158;r<=103162;r++)n[r]=2;for(r=103163;r<=103165;r++)n[r]=0;for(r=103166;r<=103168;r++)n[r]=1;for(r=103169;r<=103171;r++)n[r]=2;for(r=103186;r<=103188;r++)n[r]=0;for(r=103189;r<=103191;r++)n[r]=2;for(r=103192;r<=103195;r++)n[r]=0;for(r=103196;r<=103199;r++)n[r]=2;for(r=103200;r<=103224;r++)n[r]=0;for(r=103225;r<=103227;r++)n[r]=1;for(r=103232;r<=103237;r++)n[r]=0;for(r=103238;r<=103243;r++)n[r]=2;for(r=103244;r<=103246;r++)n[r]=0;for(r=103247;r<=103249;r++)n[r]=2;for(r=103254;r<=103256;r++)n[r]=0;for(r=103257;r<=103259;r++)n[r]=2;for(r=103264;r<=103266;r++)n[r]=0;for(r=103267;r<=103269;r++)n[r]=2;for(r=103300;r<=103375;r++)n[r]=0;for(r=103381;r<=103383;r++)n[r]=0;for(r=103384;r<=103386;r++)n[r]=1;for(r=103387;r<=103389;r++)n[r]=0;for(r=103390;r<=103392;r++)n[r]=2;for(r=103397;r<=103399;r++)n[r]=0;for(r=103400;r<=103471;r++)n[r]=2;for(r=103476;r<=103478;r++)n[r]=0;for(r=103479;r<=103481;r++)n[r]=2;for(r=103486;r<=103488;r++)n[r]=0;for(r=103489;r<=103491;r++)n[r]=2;for(r=103492;r<=103495;r++)n[r]=0;for(r=103496;r<=103499;r++)n[r]=2;for(r=103528;r<=103543;r++)n[r]=0;for(r=103544;r<=103548;r++)n[r]=2;for(r=103549;r<=103551;r++)n[r]=0;for(r=103552;r<=103554;r++)n[r]=1;for(r=103555;r<=103557;r++)n[r]=2;for(r=103558;r<=103560;r++)n[r]=0;for(r=103571;r<=103573;r++)n[r]=0;for(r=103574;r<=103576;r++)n[r]=2;for(r=103577;r<=103580;r++)n[r]=0;for(r=103581;r<=103583;r++)n[r]=2;for(r=103595;r<=103694;r++)n[r]=0;for(r=103696;r<=103699;r++)n[r]=0;for(r=103700;r<=103793;r++)n[r]=2;for(r=103794;r<=103890;r++)n[r]=0;for(r=103891;r<=103896;r++)n[r]=2;for(r=103900;r<=103971;r++)n[r]=2;for(r=103972;r<=103977;r++)n[r]=0;for(r=112e3;r<=112101;r++)n[r]=0},46373:(e,t,i)=>{"use strict";i.d(t,{BI:()=>N,DC:()=>c,ES:()=>C,Ej:()=>_,Hq:()=>u,Ie:()=>I,Jf:()=>p,Jt:()=>k,KG:()=>w,Ne:()=>A,RF:()=>l,Uc:()=>b,VL:()=>f,_F:()=>g,aI:()=>R,cY:()=>M,fA:()=>o,fT:()=>O,gX:()=>v,hZ:()=>x,hs:()=>T,iT:()=>h,is:()=>L,pg:()=>S,qv:()=>P,uJ:()=>m,vI:()=>E,vQ:()=>d,v_:()=>D,vt:()=>s,w1:()=>a,yr:()=>y});var r=i(8e3),n=i(2532);function s(e=D){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function o(e,t,i,r,n,o,a=s()){return a[0]=e,a[1]=t,a[2]=i,a[3]=r,a[4]=n,a[5]=o,a}function a(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new r.A(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function l(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function c(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function h(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function u(e,t,i=0,r=t.length/3){let n=e[0],s=e[1],o=e[2],a=e[3],l=e[4],c=e[5];for(let e=0;e<r;e++)n=Math.min(n,t[i+3*e]),s=Math.min(s,t[i+3*e+1]),o=Math.min(o,t[i+3*e+2]),a=Math.max(a,t[i+3*e]),l=Math.max(l,t[i+3*e+1]),c=Math.max(c,t[i+3*e+2]);e[0]=n,e[1]=s,e[2]=o,e[3]=a,e[4]=l,e[5]=c}function p(e,t,i){const r=t.length;let n=e[0],s=e[1],o=e[2],a=e[3],l=e[4],c=e[5];if(i)for(let e=0;e<r;e++){const i=t[e];n=Math.min(n,i[0]),s=Math.min(s,i[1]),o=Math.min(o,i[2]),a=Math.max(a,i[0]),l=Math.max(l,i[1]),c=Math.max(c,i[2])}else for(let e=0;e<r;e++){const i=t[e];n=Math.min(n,i[0]),s=Math.min(s,i[1]),a=Math.max(a,i[0]),l=Math.max(l,i[1])}e[0]=n,e[1]=s,e[2]=o,e[3]=a,e[4]=l,e[5]=c}function d(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function f(e){return e[0]>=e[3]?0:e[3]-e[0]}function y(e){return e[1]>=e[4]?0:e[4]-e[1]}function m(e){return e[2]>=e[5]?0:e[5]-e[2]}function g(e){const t=f(e),i=m(e),r=y(e);return Math.sqrt(t*t+i*i+r*r)}function v(e,t=[0,0,0]){return t[0]=e[0]+f(e)/2,t[1]=e[1]+y(e)/2,t[2]=e[2]+m(e)/2,t}function _(e,t=[0,0,0]){return t[0]=f(e),t[1]=y(e),t[2]=m(e),t}function b(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function w(e,t){return null==t||function(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}(e,t)}function M(e,t,i,r,n=e){return n[0]=e[0]+t,n[1]=e[1]+i,n[2]=e[2]+r,n[3]=e[3]+t,n[4]=e[4]+i,n[5]=e[5]+r,n}function T(e,t,i=e){const r=e[0]+f(e)/2,n=e[1]+y(e)/2,s=e[2]+m(e)/2;return i[0]=r+(e[0]-r)*t,i[1]=n+(e[1]-n)*t,i[2]=s+(e[2]-s)*t,i[3]=r+(e[3]-r)*t,i[4]=n+(e[4]-n)*t,i[5]=s+(e[5]-s)*t,i}function S(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function A(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function E(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function x(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function I(e){return e?x(e,P):s(P)}function C(e,t){return t||(t=(0,n.vt)()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function k(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function N(e,t,i,r,n){return e[0]=t,e[1]=i,e[2]=Number.NEGATIVE_INFINITY,e[3]=r,e[4]=n,e[5]=Number.POSITIVE_INFINITY,e}function L(e){return 6===e.length}function O(e){return 0===f(e)&&0===y(e)&&0===m(e)}function R(e,t,i){if(null==e||null==t)return e===t;if(!L(e)||!L(t))return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}const P=[1/0,1/0,1/0,-1/0,-1/0,-1/0],D=[0,0,0,0,0,0];s()},2532:(e,t,i)=>{"use strict";i.d(t,{C:()=>s,HY:()=>w,Ie:()=>A,Jf:()=>u,Rj:()=>_,Uc:()=>g,VL:()=>d,VY:()=>a,Wc:()=>y,aI:()=>x,cY:()=>T,eV:()=>S,fA:()=>o,fT:()=>h,gR:()=>M,gX:()=>m,k$:()=>b,qv:()=>I,tK:()=>c,uJ:()=>f,vQ:()=>p,vR:()=>v,vt:()=>n,w1:()=>l}),i(6273),i(4506);var r=i(8e3);function n(e=C){return[e[0],e[1],e[2],e[3]]}function s(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function o(e,t,i,r,s=n()){return s[0]=e,s[1]=t,s[2]=i,s[3]=r,s}function a(e,t=n()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function l(e,t){return new r.A({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function c(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function h(e,t,i){if(null!=t)if("length"in t)E(t)?(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[2]),i[3]=Math.max(e[3],t[3])):2!==t.length&&3!==t.length||(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[0]),i[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":i[0]=Math.min(e[0],t.xmin),i[1]=Math.min(e[1],t.ymin),i[2]=Math.max(e[2],t.xmax),i[3]=Math.max(e[3],t.ymax);break;case"point":i[0]=Math.min(e[0],t.x),i[1]=Math.min(e[1],t.y),i[2]=Math.max(e[2],t.x),i[3]=Math.max(e[3],t.y)}else s(i,e)}function u(e,t,i=e){const r=t.length;let n=e[0],s=e[1],o=e[2],a=e[3];for(let e=0;e<r;e++){const i=t[e];n=Math.min(n,i[0]),s=Math.min(s,i[1]),o=Math.max(o,i[0]),a=Math.max(a,i[1])}return i[0]=n,i[1]=s,i[2]=o,i[3]=a,i}function p(e){for(let t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0}function d(e){return null==e||e[0]>=e[2]?0:e[2]-e[0]}function f(e){return null==e||e[1]>=e[3]?0:e[3]-e[1]}function y(e){return d(e)*f(e)}function m(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function g(e,t){return _(e,t[0],t[1])}function v(e,t){return _(e,t.x,t.y)}function _(e,t,i){return t>=e[0]&&i>=e[1]&&t<=e[2]&&i<=e[3]}function b(e,t,i){return t[0]>=e[0]-i&&t[1]>=e[1]-i&&t[0]<=e[2]+i&&t[1]<=e[3]+i}function w(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function M(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function T(e,t,i,r=e){return r[0]=e[0]+t,r[1]=e[1]+i,r[2]=e[2]+t,r[3]=e[3]+i,r}function S(e,t,i=e){return i[0]=e[0]-t,i[1]=e[1]-t,i[2]=e[2]+t,i[3]=e[3]+t,i}function A(e){return e?s(e,I):n(I)}function E(e){return null!=e&&4===e.length}function x(e,t){return E(e)&&E(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const I=[1/0,1/0,-1/0,-1/0],C=[0,0,0,0]},70040:(e,t,i)=>{"use strict";i.d(t,{B$:()=>f,LJ:()=>y,Pj:()=>v,Rg:()=>p,Yz:()=>m,z8:()=>d});var r=i(2532);function n(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}function s(e){return void 0!==e.points}function o(e){return void 0!==e.x&&void 0!==e.y}function a(e){return void 0!==e.paths}function l(e){return void 0!==e.rings}function c(e){return function(t,i){return null==t?i:null==i?t:e(t,i)}}const h=c(Math.min),u=c(Math.max);function p(e,t){return a(t)?m(e,t.paths,!1,!1):l(t)?m(e,t.rings,!1,!1):s(t)?v(e,t.points,!1,!1,!1,!1):n(t)?g(e,t):(o(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function d(e){let t,i,n,s;for(e.reset(),t=n=1/0,i=s=-1/0;e.nextPath();){const r=f(e);t=Math.min(r[0],t),n=Math.min(r[1],n),i=Math.max(r[2],i),s=Math.max(r[3],s)}return(0,r.vt)([t,n,i,s])}function f(e){let t,i,n,s;for(t=n=1/0,i=s=-1/0;e.nextPoint();)t=Math.min(e.x,t),n=Math.min(e.y,n),i=Math.max(e.x,i),s=Math.max(e.y,s);return(0,r.vt)([t,n,i,s])}function y(e,t){return a(t)?m(e,t.paths,!0,!1):l(t)?m(e,t.rings,!0,!1):s(t)?v(e,t.points,!0,!1,!0,!1):n(t)?g(e,t,0,0,!0,!1):(o(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function m(e,t,i,r){const n=i?3:2;if(!t.length||!t[0].length)return null;let s,o,a,l,[c,p]=t[0][0],[d,f]=t[0][0];for(let e=0;e<t.length;e++){const y=t[e];for(let e=0;e<y.length;e++){const t=y[e],[m,g]=t;if(c=h(c,m),p=h(p,g),d=u(d,m),f=u(f,g),i&&t.length>2){const e=t[2];s=h(s,e),o=u(o,e)}if(r&&t.length>n){const e=t[n];a=h(s,e),l=u(o,e)}}}return i?r?(e[0]=c,e[1]=p,e[2]=s,e[3]=a,e[4]=d,e[5]=f,e[6]=o,e[7]=l,e.length=8,e):(e[0]=c,e[1]=p,e[2]=s,e[3]=d,e[4]=f,e[5]=o,e.length=6,e):r?(e[0]=c,e[1]=p,e[2]=a,e[3]=d,e[4]=f,e[5]=l,e.length=6,e):(e[0]=c,e[1]=p,e[2]=d,e[3]=f,e.length=4,e)}function g(e,t,i,r,n,s){const o=t.xmin,a=t.xmax,l=t.ymin,c=t.ymax;let h=t.zmin,u=t.zmax,p=t.mmin,d=t.mmax;return n?(h=h||0,u=u||0,s?(p=p||0,d=d||0,e[0]=o,e[1]=l,e[2]=h,e[3]=p,e[4]=a,e[5]=c,e[6]=u,e[7]=d,e):(e[0]=o,e[1]=l,e[2]=h,e[3]=a,e[4]=c,e[5]=u,e)):s?(p=p||0,d=d||0,e[0]=o,e[1]=l,e[2]=p,e[3]=a,e[4]=c,e[5]=d,e):(e[0]=o,e[1]=l,e[2]=a,e[3]=c,e)}function v(e,t,i,r,n,s){const o=i?3:2,a=r&&s,l=i&&n;if(!t.length||!t[0].length)return null;let c,p,d,f,[y,m]=t[0],[g,v]=t[0];for(let e=0;e<t.length;e++){const i=t[e],[r,n]=i;if(y=h(y,r),m=h(m,n),g=u(g,r),v=u(v,n),l&&i.length>2){const e=i[2];c=h(c,e),p=u(p,e)}if(a&&i.length>o){const e=i[o];d=h(c,e),f=u(p,e)}}return n?(c=c||0,p=p||0,s?(d=d||0,f=f||0,e[0]=y,e[1]=m,e[2]=c,e[3]=d,e[4]=g,e[5]=v,e[6]=p,e[7]=f,e):(e[0]=y,e[1]=m,e[2]=c,e[3]=g,e[4]=v,e[5]=p,e)):s?(d=d||0,f=f||0,e[0]=y,e[1]=m,e[2]=d,e[3]=g,e[4]=v,e[5]=f,e):(e[0]=y,e[1]=m,e[2]=g,e[3]=v,e)}},83851:(e,t,i)=>{"use strict";i.d(t,{j:()=>n});var r=i(80861);const n=()=>r.A.getLogger("esri.views.3d.support.buffer.math")},23064:(e,t,i)=>{"use strict";i.d(t,{S8:()=>a,TP:()=>u,Z4:()=>s,l8:()=>o,w2:()=>c});var r=i(54481),n=i(11021);function s(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function o(e){return e?a(e.rings,e.hasZ??!1):null}function a(e,t){if(!e?.length)return null;const i=[],r=[],s=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let i=0,n=e.length;i<n;i++){const n=l(e[i],t,s);n&&r.push(n)}if(r.sort(((e,i)=>{let r=e[2]-i[2];return 0===r&&t&&(r=e[4]-i[4]),r})),r.length&&(i[0]=r[0][0],i[1]=r[0][1],t&&(i[2]=r[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||t&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){const r=e[0]&&e[0].length?function(e,t){const i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let s=0,o=0,a=0,l=0;for(let c=0,h=e.length;c<h-1;c++){const h=e[c],u=e[c+1];if(h&&u){i[0]=h[0],i[1]=h[1],r[0]=u[0],r[1]=u[1],t&&h.length>2&&u.length>2&&(i[2]=h[2],r[2]=u[2]);const e=(0,n.R3)(i,r);if(e){s+=e;const i=(0,n.t9)(h,u);o+=e*i[0],a+=e*i[1],t&&i.length>2&&(l+=e*i[2])}}}return s>0?t?[o/s,a/s,l/s]:[o/s,a/s]:e.length?e[0]:null}(e[0],t):null;if(!r)return null;i[0]=r[0],i[1]=r[1],t&&r.length>2&&(i[2]=r[2])}return i}function l(e,t,i){let r=0,n=0,s=0,o=0,a=0;const l=e.length?e[0][0]:0,c=e.length?e[0][1]:0,h=e.length&&t?e[0][2]:0;for(let u=0;u<e.length;u++){const p=e[u],d=e[(u+1)%e.length],[f,y,m]=p,g=f-l,v=y-c,[_,b,w]=d,M=_-l,T=b-c,S=g*T-M*v;if(o+=S,r+=(g+M)*S,n+=(v+T)*S,t&&p.length>2&&d.length>2){const e=m-h,t=w-h,i=g*t-M*e;s+=(e+t)*i,a+=i}f<i[0]&&(i[0]=f),f>i[1]&&(i[1]=f),y<i[2]&&(i[2]=y),y>i[3]&&(i[3]=y),t&&(m<i[4]&&(i[4]=m),m>i[5]&&(i[5]=m))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const u=[r/(6*o)+l,n/(6*o)+c,o];return t&&(i[4]===i[5]||0===a?(u[3]=(i[4]+i[5])/2,u[4]=0):(u[3]=s/(6*a)+h,u[4]=a)),u}function c(e,t){let i=0,r=0,n=0;e.nextPoint();const s=e.pathSize?e.x:0,o=e.pathSize?e.y:0;for(let a=0;a<e.pathSize;a++){e.seekInPath(a);const l=[e.x,e.y];e.seekInPath((a+1)%e.pathSize);const c=[e.x,e.y],[h,u]=l,p=h-s,d=u-o,[f,y]=c,m=f-s,g=y-o,v=p*g-m*d;n+=v,i+=(p+m)*v,r+=(d+g)*v,h<t[0]&&(t[0]=h),h>t[1]&&(t[1]=h),u<t[2]&&(t[2]=u),u>t[3]&&(t[3]=u)}return n>0&&(n*=-1),n?(n*=.5,[i/(6*n)+s,r/(6*n)+o,n]):null}const h=1e-6;function u(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<h){const t=function(e){const{hasZ:t,totalSize:i}=e;if(0===i)return null;const s=[],o=[],a=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const t=l((0,r.A)(e),e.hasZ,a);t&&o.push(t)}if(o.sort(((e,i)=>{let r=e[2]-i[2];return 0===r&&t&&(r=e[4]-i[4]),r})),o.length&&(s[0]=o[0][0],s[1]=o[0][1],t&&(s[2]=o[0][3]),(s[0]<a[0]||s[0]>a[1]||s[1]<a[2]||s[1]>a[3]||t&&(s[2]<a[4]||s[2]>a[5]))&&(s.length=0)),!s.length){e.reset(),e.nextPath();const i=e.pathSize?function(e){const{hasZ:t}=e,i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let s=0,o=0,a=0,l=0;if(e.nextPoint()){let c=e.x,h=e.y,u=e.z;for(;e.nextPoint();){const p=e.x,d=e.y,f=e.z;i[0]=c,i[1]=h,r[0]=p,r[1]=d,t&&(i[2]=u,r[2]=f);const y=(0,n.R3)(i,r);if(y){s+=y;const e=(0,n.t9)(i,r);o+=y*e[0],a+=y*e[1],t&&e.length>2&&(l+=y*e[2])}c=p,h=d,u=f}}return s>0?t?[o/s,a/s,l/s]:[o/s,a/s]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}(e):null;if(!i)return null;s[0]=i[0],s[1]=i[1],t&&i.length>2&&(s[2]=i[2])}return s}(e);return t?[t[0],t[1]]:null}const i=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const s=[e.x,e.y];for(e.reset();e.nextPath();)d(i,s,e);return i[0]*=1/t,i[1]*=1/t,i[0]+=s[0],i[1]+=s[1],i}const p=1/3;function d(e,t,i){if(!e||!i||i.pathSize<3)return null;i.nextPoint();const r=i.x,n=i.y;i.nextPoint();let s,o=i.x-r,a=i.y-n,l=0,c=0;for(;i.nextPoint();)l=i.x-r,c=i.y-n,s=.5*p*(l*a-c*o),e[0]+=s*(o+l),e[1]+=s*(a+c),o=l,a=c;const h=i.getCurrentRingArea(),u=[r,n];return u[0]-=t[0],u[1]-=t[1],u[0]*=h,u[1]*=h,e[0]+=u[0],e[1]+=u[1],e}},10805:(e,t,i)=>{"use strict";i.d(t,{CW:()=>a,F8:()=>l,gH:()=>o,m3:()=>h,qz:()=>n,rL:()=>s,t1:()=>u});const r=[0,0];function n(e,t){return null!=t&&c(e,t.x,t.y,t.z)}function s(e,t){if(!t.points||t.points.length)return!1;for(const i of t.points)if(!a(e,i))return!1;return!0}function o(e,t){const{xmin:i,ymin:r,zmin:n,xmax:s,ymax:o,zmax:a}=t;return e.hasZ&&t.hasZ?c(e,i,r,n)&&c(e,i,o,n)&&c(e,s,o,n)&&c(e,s,r,n)&&c(e,i,r,a)&&c(e,i,o,a)&&c(e,s,o,a)&&c(e,s,r,a):c(e,i,r)&&c(e,i,o)&&c(e,s,o)&&c(e,s,r)}function a(e,t){return c(e,t[0],t[1])}function l(e,t){return c(e,t[0],t[1],t[2])}function c(e,t,i,r){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax&&(null==r||!e.hasZ||r>=e.zmin&&r<=e.zmax)}function h(e,t){return r[1]=t.y,r[0]=t.x,function(e,t){return u(e.rings,t)}(e,r)}function u(e,t){if(!e)return!1;if(function(e){return!Array.isArray(e[0][0])}(e))return p(!1,e,t);let i=!1;for(let r=0,n=e.length;r<n;r++)i=p(i,e[r],t);return i}function p(e,t,i){const[r,n]=i;let s=e,o=0;for(let e=0,i=t.length;e<i;e++){o++,o===i&&(o=0);const[a,l]=t[e],[c,h]=t[o];(l<n&&h>=n||h<n&&l>=n)&&a+(n-l)/(h-l)*(c-a)<r&&(s=!s)}return s}},11021:(e,t,i)=>{"use strict";i.d(t,{$3:()=>y,$H:()=>f,$K:()=>o,B1:()=>c,It:()=>M,JM:()=>b,Ng:()=>u,R3:()=>a,Yl:()=>d,_7:()=>_,gR:()=>h,m3:()=>v,t9:()=>p,uC:()=>g});var r=i(3223),n=i(60929),s=i(67488);function o(e){if(!e)return null;if(Array.isArray(e))return e;const t=e.hasZ,i=e.hasM;if("point"===e.type)return i&&t?[e.x,e.y,e.z,e.m]:t?[e.x,e.y,e.z]:i?[e.x,e.y,e.m]:[e.x,e.y];if("polygon"===e.type)return e.rings.slice(0);if("polyline"===e.type)return e.paths.slice(0);if("multipoint"===e.type)return e.points.slice(0);if("extent"===e.type){const t=e.clone().normalize();if(!t)return null;let i=!1,r=!1;return t.forEach((e=>{e.hasZ&&(i=!0),e.hasM&&(r=!0)})),t.map((e=>{const t=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(i&&e.hasZ){const i=.5*(e.zmax-e.zmin);for(let e=0;e<t.length;e++)t[e].push(i)}if(r&&e.hasM){const i=.5*(e.mmax-e.mmin);for(let e=0;e<t.length;e++)t[e].push(i)}return t}))}return null}function a(e,t){const i=t[0]-e[0],r=t[1]-e[1];if(e.length>2&&t.length>2){const n=e[2]-t[2];return Math.sqrt(i*i+r*r+n*n)}return Math.sqrt(i*i+r*r)}function l(e,t,i){const r=e[0]+i*(t[0]-e[0]),n=e[1]+i*(t[1]-e[1]);return e.length>2&&t.length>2?[r,n,e[2]+i*(t[2]-e[2])]:[r,n]}function c(e,t,i,r){return h(e,t,i[r],i[r+1])}function h(e,t,i,r){const[n,s]=t,[o,a]=i,[l,c]=r,h=l-o,u=c-a,p=h*h+u*u,d=(n-o)*h+(s-a)*u,f=Math.min(1,Math.max(0,d/p));return e[0]=o+h*f,e[1]=a+u*f,e}function u(e,t,i,r,n,s){let o=i,a=r,l=n-o,c=s-a;if(0!==l||0!==c){const i=((e-o)*l+(t-a)*c)/(l*l+c*c);i>1?(o=n,a=s):i>0&&(o+=l*i,a+=c*i)}return l=e-o,c=t-a,l*l+c*c}function p(e,t){return l(e,t,.5)}function d(e){const t=e.length;let i=0;for(let r=0;r<t-1;++r)i+=a(e[r],e[r+1]);return i}function f(e,t){if(t<=0)return e[0];const i=e.length;let r=0;for(let n=0;n<i-1;++n){const i=a(e[n],e[n+1]);if(t-r<i){const s=(t-r)/i;return l(e[n],e[n+1],s)}r+=i}return e[i-1]}function y(e,t=n._.X,i=n._.Y){let r=0;const s=e.length;let o=e[0];for(let n=0;n<s-1;n++){const s=e[n+1];r+=(s[t]-o[t])*(s[i]+o[i]),o=s}return r>=0}function m(e){const t=e.length;return t>2&&(0,r.aI)(e[0],e[t-1])}function g(e){if("rings"in e&&(v(e),e.rings.length>0&&!y(e.rings[0])))for(const t of e.rings)t.reverse()}function v(e){if("rings"in e)for(const t of e.rings)m(t)||t.push(t[0].slice())}function _(e){return"polygon"!==e.type&&"polyline"!==e.type||b("polygon"===e.type?e.rings:e.paths,e.spatialReference),e}function b(e,t){const i=(0,s.Vp)(t);if(!i)return;const r=i.valid[0],n=i.valid[1],o=n-r;for(const t of e){let e=1/0,i=-1/0;for(const s of t){const t=w(s[0],r,n);e=Math.min(e,t),i=Math.max(i,t),s[0]=t}const s=i-e;o-s<s&&t.forEach((e=>{e[0]<0&&(e[0]+=o)}))}}function w(e,t,i){const r=i-t;return e<t?i-(t-e)%r:e>i?t+(e-t)%r:e}function M(e,t){if(e===t)return!0;if(e.type!==t.type)return!1;if("point"===e.type||"mesh"===e.type||"extent"===e.type)return!0;if("multipoint"===e.type)return e.points.length===t.points.length;const[i,r]="polyline"===e.type?[e.paths,t.paths]:[e.rings,t.rings];return i.length===r.length&&i.every(((e,t)=>e.length===r[t].length))}},34475:(e,t,i)=>{"use strict";i.d(t,{HA:()=>h,Z3:()=>p,v:()=>u});var r=i(70040);const n=[];function s(e,t,i,r){return{xmin:e,ymin:t,xmax:i,ymax:r}}function o(e,t,i,r,n,s){return{xmin:e,ymin:t,zmin:i,xmax:r,ymax:n,zmax:s}}function a(e,t,i,r,n,s){return{xmin:e,ymin:t,mmin:i,xmax:r,ymax:n,mmax:s}}function l(e,t,i,r,n,s,o,a){return{xmin:e,ymin:t,zmin:i,mmin:r,xmax:n,ymax:s,zmax:o,mmax:a}}function c(e,t=!1,i=!1){return t?i?l(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):o(e[0],e[1],e[2],e[3],e[4],e[5]):i?a(e[0],e[1],e[2],e[3],e[4],e[5]):s(e[0],e[1],e[2],e[3])}function h(e){return e?function(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}(e)?e:function(e){return void 0!==e.x&&void 0!==e.y}(e)?function(e){const{x:t,y:i,z:r,m:n}=e,c=null!=n;return null!=r?c?l(t,i,r,n,t,i,r,n):o(t,i,r,t,i,r):c?a(t,i,n,t,i,n):s(t,i,t,i)}(e):function(e){return void 0!==e.rings}(e)?u(e):function(e){return void 0!==e.paths}(e)?p(e):function(e){return void 0!==e.points}(e)?function(e){const{hasZ:t,hasM:i,points:s}=e;return c((0,r.Pj)(n,s,t??!1,i??!1),t,i)}(e):null:null}function u(e){const{hasZ:t,hasM:i,rings:s}=e,o=(0,r.Yz)(n,s,t??!1,i??!1);return o?c(o,t,i):null}function p(e){const{hasZ:t,hasM:i,paths:s}=e,o=(0,r.Yz)(n,s,t??!1,i??!1);return o?c(o,t,i):null}},1138:(e,t,i)=>{"use strict";i.d(t,{TP:()=>l,_f:()=>s,eh:()=>n,uw:()=>c});var r=i(99263);const n=Math.PI/180,s=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,o=r.$O.radius,a=r.$O.eccentricitySquared,l={a1:o*a,a2:o*a*o*a,a3:o*a*a/2,a4:o*a*o*a*2.5,a5:o*a+o*a*a/2,a6:1-a},c={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:r.$O.radius,f:r.$O.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:r.Sw.radius,f:r.Sw.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:r.sH.radius,f:r.sH.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:r.sH.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}}},22538:(e,t,i)=>{"use strict";i.d(t,{TT:()=>d,Xn:()=>b,Zj:()=>g,_3:()=>_,l1:()=>y,qy:()=>f,vN:()=>v}),i(3313);var r=i(62991),n=i(5262),s=i(1138),o=i(67488),a=i(38648),l=i(65648),c=(i(8977),i(44153));function h(e){if(!e)return null;if((0,o.EA)(e)&&e.wkid){const t=s.uw[e.wkid];if(t)return t}const t=e.wkt2||e.wkt;if(t){const e=function(e){const t=s._f.exec(e);if(!t||2!==t.length)return null;const i=t[1].split(",");if(!i||i.length<3)return null;const r=parseFloat(i[1]),n=parseFloat(i[2]);return isNaN(r)||isNaN(n)?null:{a:r,f:0===n?0:1/n}}(t);if(e)return e}return null}function u(e){const t=h(e);if(function(e){return null!=e&&"b"in e&&"eSq"in e&&"radius"in e}(t))return t;const i=t.a*(1-t.f);return Object.assign(t,{b:i,eSq:1-(i/t.a)**2,radius:(2*t.a+i)/3,densificationRatio:1e4/((2*t.a+i)/3)})}function p(e,t,i){const{a:r,eSq:n}=u(i),o=Math.sqrt(n),a=Math.sin(t[1]*s.eh),l=r*t[0]*s.eh;let c;return c=n>0?r*((1-n)*(a/(1-n*(a*a))-1/(2*o)*Math.log((1-o*a)/(1+o*a))))*.5:r*a,e[0]=l,e[1]=c,e}function d(e){return null!==h(e)}function f(e,t="square-meters"){if(e.some((e=>!d(e.spatialReference))))throw new r.A("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let t=0;t<e.length;t++){const r=e[t],n=r.spatialReference,{radius:s,densificationRatio:o}=u(n),a=s*o;i.push(m(r,a))}const s=[],o=[0,0],a=[0,0];for(let e=0;e<i.length;e++){const{rings:r,spatialReference:l}=i[e];let c=0;for(let e=0;e<r.length;e++){const t=r[e];p(o,t[0],l),p(a,t[t.length-1],l);let i=a[0]*o[1]-o[0]*a[1];for(let e=0;e<t.length-1;e++)p(o,t[e+1],l),p(a,t[e],l),i+=a[0]*o[1]-o[0]*a[1];c+=i}c=(0,n.oU)(c,"square-meters",t),s.push(c/-2)}return s}function y(e,t="meters"){if(!e)throw new r.A("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(e.some((e=>!d(e.spatialReference))))throw new r.A("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let r=0;r<e.length;r++){const s=e[r],{spatialReference:o}=s,a="polyline"===s.type?s.paths:s.rings;let l=0;for(let e=0;e<a.length;e++){const t=a[e];let i=0;for(let e=1;e<t.length;e++){const r=t[e-1][0],n=t[e][0],s=t[e-1][1],a=t[e][1];if(s!==a||r!==n){const e=new g;_(e,[r,s],[n,a],o),i+=e.distance}}l+=i}l=(0,n.oU)(l,"meters",t),i.push(l)}return i}function m(e,t){if("polyline"!==e.type&&"polygon"!==e.type)throw new r.A("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:i}=e;if(!d(i))throw new r.A("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const n="polyline"===e.type?e.paths:e.rings,s=[],o=[0,0],c=new g;for(const e of n){const r=[];s.push(r),r.push([e[0][0],e[0][1]]);let n,a,l=e[0][0],h=e[0][1];for(let s=0;s<e.length-1;s++){if(n=e[s+1][0],a=e[s+1][1],l===n&&h===a)continue;const u=[l,h];_(c,[l,h],[n,a],i);const{azimuth:p,distance:d}=c,f=d/t;if(f>1){for(let e=1;e<=f-1;e++)v(o,u,p,e*t,i),r.push(o.slice(0));v(o,u,p,(d+Math.floor(f-1)*t)/2,i),r.push(o.slice(0))}v(o,u,p,d,i),r.push(o.slice(0)),l=o[0],h=o[1]}}return"polyline"===e.type?new a.A({paths:s,spatialReference:i}):new l.A({rings:s,spatialReference:i})}class g{constructor(e=0,t=void 0,i=void 0){this.distance=e,this.azimuth=t,this.reverseAzimuth=i}}function v(e,t,i,r,n){const o=t[0],a=t[1],l=o*s.eh,c=a*s.eh,h=(i??0)*s.eh,{a:p,b:d,f}=u(n),y=Math.sin(h),m=Math.cos(h),g=(1-f)*Math.tan(c),v=1/Math.sqrt(1+g*g),_=g*v,b=Math.atan2(g,m),w=v*y,M=w*w,T=1-M,S=T*(p*p-d*d)/(d*d),A=1+S/16384*(4096+S*(S*(320-175*S)-768)),E=S/1024*(256+S*(S*(74-47*S)-128));let x,I,C,k,N=r/(d*A),L=2*Math.PI;for(;Math.abs(N-L)>1e-12;)C=Math.cos(2*b+N),x=Math.sin(N),I=Math.cos(N),k=E*x*(C+E/4*(I*(2*C*C-1)-E/6*C*(4*x*x-3)*(4*C*C-3))),L=N,N=r/(d*A)+k;const O=_*x-v*I*m,R=Math.atan2(_*I+v*x*m,(1-f)*Math.sqrt(M+O*O)),P=Math.atan2(x*y,v*I-_*x*m),D=f/16*T*(4+f*(4-3*T)),F=R/s.eh,j=(l+(P-(1-D)*f*w*(N+D*x*(C+D*I*(2*C*C-1)))))/s.eh;return e[0]=j,e[1]=F,e}function _(e,t,i,r){const n=t[0]*s.eh,o=t[1]*s.eh,a=i[0]*s.eh,l=i[1]*s.eh,{a:c,b:h,f:p,radius:d}=u(r),f=a-n,y=Math.atan((1-p)*Math.tan(o)),m=Math.atan((1-p)*Math.tan(l)),g=Math.sin(y),v=Math.cos(y),_=Math.sin(m),b=Math.cos(m);let w,M,T,S,A,E,x,I,C,k,N=1e3,L=f;do{if(x=Math.sin(L),I=Math.cos(L),T=Math.sqrt(b*x*(b*x)+(v*_-g*b*I)*(v*_-g*b*I)),0===T)return e.distance=0,e.azimuth=void 0,e.reverseAzimuth=void 0,e;A=g*_+v*b*I,E=Math.atan2(T,A),C=v*b*x/T,M=1-C*C,S=A-2*g*_/M,isNaN(S)&&(S=0),k=p/16*M*(4+p*(4-3*M)),w=L,L=f+(1-k)*p*C*(E+k*T*(S+k*A*(2*S*S-1)))}while(Math.abs(L-w)>1e-12&&--N>0);if(0===N){const t=d,i=Math.acos(Math.sin(o)*Math.sin(l)+Math.cos(o)*Math.cos(l)*Math.cos(a-n))*t,r=a-n,c=Math.sin(r)*Math.cos(l),h=Math.cos(o)*Math.sin(l)-Math.sin(o)*Math.cos(l)*Math.cos(r),u=Math.atan2(c,h);return e.azimuth=u/s.eh,e.distance=i,e.reverseAzimuth=void 0,e}const O=M*(c*c-h*h)/(h*h),R=O/1024*(256+O*(O*(74-47*O)-128)),P=h*(1+O/16384*(4096+O*(O*(320-175*O)-768)))*(E-R*T*(S+R/4*(A*(2*S*S-1)-R/6*S*(4*T*T-3)*(4*S*S-3)))),D=Math.atan2(b*Math.sin(L),v*_-g*b*Math.cos(L)),F=Math.atan2(v*Math.sin(L),v*_*Math.cos(L)-g*b);return e.azimuth=D/s.eh,e.distance=P,e.reverseAzimuth=F/s.eh,e}function b(e){return d(e)?e:(0,o.K8)(e)?c.A.WGS84:null}},4197:(e,t,i)=>{"use strict";i.d(t,{Hu:()=>l,jI:()=>y,zy:()=>u}),i(6273);var r,n,s=i(62991),o=i(21570),a=i(63457);function l(e,t,i){const n=u(e),a=t,l=c(n,a,i);if(n){const t=o.A.deriveUnitFromSR(n,e.spatialReference).heightUnit;if(!i&&t!==n.heightUnit){const e=new s.A("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${t})`,{horizontalUnit:t});return new s.A("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:n,error:e})}}if(!("heightModelInfo"in(h=e)&&null!=h.heightModelInfo||null!=h.spatialReference)&&f(h)||l===r.Unsupported)return new s.A("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:n});var h;switch(l){case r.Units:{const e=n?.heightUnit||"unknown",t=a?.heightUnit||"unknown",i=new s.A("layerview:incompatible-height-unit",`The vertical units of the layer (${e}) must match the vertical units of the scene (${t})`,{layerUnit:e,sceneUnit:t});return new s.A("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:n,sceneHeightModelInfo:a,error:i})}case r.HeightModel:{const e=n?.heightModel||"unknown",t=a?.heightModel||"unknown",i=new s.A("layerview:incompatible-height-model",`The height model of the layer (${e}) must match the height model of the scene (${t})`,{layerHeightModel:e,sceneHeightModel:t});return new s.A("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:n,sceneHeightModelInfo:a,error:i})}case r.CRS:{const e=n?.vertCRS||"unknown",t=a?.vertCRS||"unknown",i=new s.A("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${e}) must match the vertical datum of the scene (${t})`,{layerDatum:e,sceneDatum:t});return new s.A("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:n,sceneHeightModelInfo:a,error:i})}}return null}function c(e,t,i){if(!h(e)||!h(t))return r.Unsupported;if(null==e||null==t)return r.Ok;if(!i&&e.heightUnit!==t.heightUnit)return r.Units;if(e.heightModel!==t.heightModel)return r.HeightModel;switch(e.heightModel){case"gravity-related-height":return r.Ok;case"ellipsoidal":return e.vertCRS===t.vertCRS?r.Ok:r.CRS;default:return r.Unsupported}}function h(e){return null==e||null!=e.heightModel&&null!=e.heightUnit}function u(e){if("integrated-mesh-3dtiles"===e.type)return null;const t=e.url?(0,a.qg)(e.url):void 0,i=e.spatialReference?.vcsWkid;return(null!=i||null==t||"ImageServer"!==t.serverType)&&p(e)&&e.heightModelInfo?e.heightModelInfo:f(e)?o.A.deriveUnitFromSR(g,e.spatialReference):null}function p(e){return"heightModelInfo"in e}function d(e){if("unknown"===e.type||!("capabilities"in e))return!1;switch(e.type){case"catalog":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function f(e){return d(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):m(e)}function y(e){return null!=e.layers||m(e)||d(e)||p(e)}function m(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(n=r||(r={}))[n.Ok=0]="Ok",n[n.Units=1]="Units",n[n.HeightModel=2]="HeightModel",n[n.CRS=3]="CRS",n[n.Unsupported=4]="Unsupported";const g=new o.A({heightModel:"gravity-related-height"})},19387:(e,t,i)=>{"use strict";i.d(t,{A3:()=>m,Ql:()=>v,fA:()=>d,xB:()=>s,xK:()=>_});var r=i(10805);function n(e,t){return(0,r.qz)(e,t)}function s(e,t){const i=e.hasZ&&t.hasZ;let r,n,s;if(e.xmin<=t.xmin){if(r=t.xmin,e.xmax<r)return!1}else if(r=e.xmin,t.xmax<r)return!1;if(e.ymin<=t.ymin){if(n=t.ymin,e.ymax<n)return!1}else if(n=e.ymin,t.ymax<n)return!1;if(i&&t.hasZ)if(e.zmin<=t.zmin){if(s=t.zmin,e.zmax<s)return!1}else if(s=e.zmin,t.zmax<s)return!1;return!0}function o(e,t){const{points:i,hasZ:n}=t,s=n?r.F8:r.CW;for(const t of i)if(s(e,t))return!0;return!1}const a=[0,0],l=[0,0],c=[0,0],h=[0,0],u=[a,l,c,h],p=[[c,a],[a,l],[l,h],[h,c]];function d(e,t){return function(e,t){a[0]=e.xmin,a[1]=e.ymax,l[0]=e.xmax,l[1]=e.ymax,c[0]=e.xmin,c[1]=e.ymin,h[0]=e.xmax,h[1]=e.ymin;for(const e of u)if((0,r.t1)(t,e))return!0;for(const i of t){if(!i.length)continue;let t=i[0];if((0,r.CW)(e,t))return!0;for(let n=1;n<i.length;n++){const s=i[n];if((0,r.CW)(e,s)||g(t,s,p))return!0;t=s}}return!1}(e,t.rings)}function f(e,t){a[0]=e.xmin,a[1]=e.ymax,l[0]=e.xmax,l[1]=e.ymax,c[0]=e.xmin,c[1]=e.ymin,h[0]=e.xmax,h[1]=e.ymin;const i=t.paths;for(const t of i){if(!i.length)continue;let n=t[0];if((0,r.CW)(e,n))return!0;for(let i=1;i<t.length;i++){const s=t[i];if((0,r.CW)(e,s)||g(n,s,p))return!0;n=s}}return!1}const y=[0,0];function m(e){for(let t=0;t<e.length;t++){const i=e[t];for(let r=0;r<i.length-1;r++){const n=i[r],s=i[r+1];for(let i=t+1;i<e.length;i++)for(let t=0;t<e[i].length-1;t++){const r=e[i][t],o=e[i][t+1];if(v(n,s,r,o,y)&&!(y[0]===n[0]&&y[1]===n[1]||y[0]===r[0]&&y[1]===r[1]||y[0]===s[0]&&y[1]===s[1]||y[0]===o[0]&&y[1]===o[1]))return!0}}const r=i.length;if(!(r<=4))for(let e=0;e<r-3;e++){let t=r-1;0===e&&(t=r-2);const n=i[e],s=i[e+1];for(let r=e+2;r<t;r++){const e=i[r],t=i[r+1];if(v(n,s,e,t,y)&&!(y[0]===n[0]&&y[1]===n[1]||y[0]===e[0]&&y[1]===e[1]||y[0]===s[0]&&y[1]===s[1]||y[0]===t[0]&&y[1]===t[1]))return!0}}}return!1}function g(e,t,i){for(let r=0;r<i.length;r++)if(v(e,t,i[r][0],i[r][1]))return!0;return!1}function v(e,t,i,r,n){const[s,o]=e,[a,l]=t,[c,h]=i,[u,p]=r,d=u-c,f=s-c,y=a-s,m=p-h,g=o-h,v=l-o,_=m*y-d*v;if(0===_)return!1;const b=(d*g-m*f)/_,w=(y*g-v*f)/_;return b>=0&&b<=1&&w>=0&&w<=1&&(n&&(n[0]=s+b*(a-s),n[1]=o+b*(l-o)),!0)}function _(e){switch(e){case"esriGeometryEnvelope":case"extent":return s;case"esriGeometryMultipoint":case"multipoint":return o;case"esriGeometryPoint":case"point":return n;case"esriGeometryPolygon":case"polygon":return d;case"esriGeometryPolyline":case"polyline":return f}}},56053:(e,t,i)=>{"use strict";i.d(t,{$B:()=>y,Bi:()=>d,Rg:()=>p,U9:()=>h,ZC:()=>c,fT:()=>u,rS:()=>f,xD:()=>g});var r=i(8e3),n=i(61064),s=i(67709),o=i(8977),a=i(65648),l=i(38648);function c(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}function h(e){return void 0!==e.points}function u(e){return void 0!==e.x&&void 0!==e.y}function p(e){return void 0!==e.paths}function d(e){return void 0!==e.rings}function f(e){return null==e?null:e instanceof n.A?e:u(e)?o.A.fromJSON(e):p(e)?l.A.fromJSON(e):d(e)?a.A.fromJSON(e):h(e)?s.A.fromJSON(e):c(e)?r.A.fromJSON(e):null}function y(e){return e?u(e)?"esriGeometryPoint":p(e)?"esriGeometryPolyline":d(e)?"esriGeometryPolygon":c(e)?"esriGeometryEnvelope":h(e)?"esriGeometryMultipoint":null:null}const m={esriGeometryPoint:o.A,esriGeometryPolyline:l.A,esriGeometryPolygon:a.A,esriGeometryEnvelope:r.A,esriGeometryMultipoint:s.A};function g(e){return e&&m[e]||null}},28364:(e,t,i)=>{"use strict";i.d(t,{CK:()=>p,Hq:()=>u,MW:()=>d,TE:()=>f,Uj:()=>y,by:()=>m,kp:()=>h});var r=i(61090),n=i(80861),s=i(8977),o=i(58823),a=i(93320),l=i(72449);function c(){return n.A.getLogger("esri.geometry.Mesh")}function h(e){const{vertexSpace:t}=e;if(null!=t.origin)return e.clone();const{anchor:i}=e,r=i.clone(),n=new o.A({origin:[r.x,r.y,r.z]}),s=e.cloneWithVertexSpace(n),{position:a}=s.vertexAttributes;return s.vertexAttributes.position=(0,l.t)(new Float64Array(a.length),a,[-r.x,-r.y,-(r.z??0)]),s.vertexAttributesChanged(),s}function u(e){return null!=e.origin}function p(e){return u(e.vertexSpace)}function d(e,t){if(!u(e))return null;const[i,r,n]=e.origin;return new s.A({x:i,y:r,z:n,spatialReference:t})}function f(e,t){const{x:i,y:n,z:s,spatialReference:l}=e,h=[i,n,s??0];if(void 0!==t?.geographic){if((0,r.io)(c(),"option: geographic",{replacement:"use vertexSpace option instead",version:"4.29",warnOnce:!0}),!t?.vertexSpace)return t?.geographic?new a.A({origin:h}):new o.A({origin:h});c().warn("Deprecated geographic flag ignored since vertexSpace option is provided.")}if(!t?.vertexSpace)return l.isGeographic||l.isWebMercator?new a.A({origin:h}):new o.A({origin:h});switch(t.vertexSpace){case"local":return new a.A({origin:h});case"georeferenced":return new o.A({origin:h});case"georeferenced-absolute":return new o.A}}function y(e){return e.isGeographic||e.isWebMercator?"local":"georeferenced"}function m(e,t){return"local"===e?new a.A({origin:t}):new o.A({origin:t})}},87249:(e,t,i)=>{"use strict";i.d(t,{O7:()=>A,Hr:()=>S,el:()=>T,mT:()=>E});var r=i(32083),n=i(62991),s=i(80861),o=i(65648),a=i(38648),l=i(75981),c=i(67488),h=i(64672),u=(i(3313),i(38116)),p=i(56053),d=i(36321),f=i(19759),y=i(96905);const m=()=>s.A.getLogger("esri.geometry.support.normalizeUtils");function g(e){return"polygon"===e[0].type}function v(e){return"polyline"===e[0].type}function _(e){const t=[];let i=0,r=0;for(let n=0;n<e.length;n++){const s=e[n];let o=null;for(let e=0;e<s.length;e++)o=s[e],t.push(o),0===e?(i=o[0],r=i):(i=Math.min(i,o[0]),r=Math.max(r,o[0]));o&&t.push([(i+r)/2,0])}return t}function b(e,t,i){if(t){const t=function(e,t){if(!(e instanceof a.A||e instanceof o.A)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw m().error(e),new n.A(e)}const i=(0,l.r8)(e),r=[];for(const e of i){const i=[];r.push(i),i.push([e[0][0],e[0][1]]);for(let r=0;r<e.length-1;r++){const n=e[r][0],s=e[r][1],o=e[r+1][0],a=e[r+1][1],l=Math.sqrt((o-n)*(o-n)+(a-s)*(a-s)),c=(a-s)/l,h=(o-n)/l,u=l/t;if(u>1){for(let e=1;e<=u-1;e++){const r=e*t,o=h*r+n,a=c*r+s;i.push([o,a])}const e=(l+Math.floor(u-1)*t)/2,r=h*e+n,o=c*e+s;i.push([r,o])}i.push([o,a])}}return function(e){return"polygon"===e.type}(e)?new o.A({rings:r,spatialReference:e.spatialReference}):new a.A({paths:r,spatialReference:e.spatialReference})}(e,1e6);e=(0,h.ci)(t,!0)}return i&&(e=(0,l.kS)(e,i)),e}function w(e,t,i){if(Array.isArray(e)){const r=e[0];if(r>t){const i=(0,l.kd)(r,t);e[0]=r+i*(-2*t)}else if(r<i){const t=(0,l.kd)(r,i);e[0]=r+t*(-2*i)}}else{const r=e.x;if(r>t){const i=(0,l.kd)(r,t);e=e.clone().offset(i*(-2*t),0)}else if(r<i){const t=(0,l.kd)(r,i);e=e.clone().offset(t*(-2*i),0)}}return e}function M(e,t){let i=-1;for(let r=0;r<t.cutIndexes.length;r++){const n=t.cutIndexes[r],s=t.geometries[r],o=(0,l.r8)(s);for(let e=0;e<o.length;e++){const t=o[e];t.some((i=>{if(i[0]<180)return!0;{let i=0;for(let e=0;e<t.length;e++){const r=t[e][0];i=r>i?r:i}i=Number(i.toFixed(9));const r=-360*(0,l.kd)(i,180);for(let i=0;i<t.length;i++){const t=s.getPoint(e,i);s.setPoint(e,i,t.clone().offset(r,0))}return!0}}))}if(n===i){if(g(e))for(const t of(0,l.r8)(s))e[n]=e[n].addRing(t);else if(v(e))for(const t of(0,l.r8)(s))e[n]=e[n].addPath(t)}else i=n,e[n]=s}return e}async function T(e,t,i){if(!Array.isArray(e))return T([e],t);t&&"string"!=typeof t&&m().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const n="string"==typeof t?t:t?.url??r.A.geometryServiceUrl;let s,g,v,_,S,A,E,x,I=0;const C=[],k=[];for(const t of e)if(null!=t)if(s||(s=t.spatialReference,g=(0,c.Vp)(s),v=s.isWebMercator,A=v?102100:4326,_=l.j7[A].maxX,S=l.j7[A].minX,E=l.j7[A].plus180Line,x=l.j7[A].minus180Line),g)if("mesh"===t.type)k.push(t);else if("point"===t.type)k.push(w(t.clone(),_,S));else if("multipoint"===t.type){const e=t.clone();e.points=e.points.map((e=>w(e,_,S))),k.push(e)}else if("extent"===t.type){const e=t.clone()._normalize(!1,!1,g);k.push(e.rings?new o.A(e):e)}else if(t.extent){const e=t.extent,i=(0,l.kd)(e.xmin,S)*(2*_);let r=0===i?t.clone():(0,l.kS)(t.clone(),i);e.offset(i,0),e.intersects(E)&&e.xmax!==_?(I=e.xmax>I?e.xmax:I,r=b(r,v),C.push(r),k.push("cut")):e.intersects(x)&&e.xmin!==S?(I=e.xmax*(2*_)>I?e.xmax*(2*_):I,r=b(r,v,360),C.push(r),k.push("cut")):k.push(r)}else k.push(t.clone());else k.push(t);else k.push(t);let N=(0,l.kd)(I,_),L=-90;const O=N,R=new a.A;for(;N>0;){const e=360*N-180;R.addPath([[e,L],[e,-1*L]]),L*=-1,N--}if(C.length>0&&O>0){const t=M(C,await async function(e,t,i,r){const n=(0,d.Dl)(e),s=t[0].spatialReference,o={...r,responseType:"json",query:{...n.query,f:"json",sr:(0,c.YX)(s),target:JSON.stringify({geometryType:(0,p.$B)(t[0]),geometries:t}),cutter:JSON.stringify(i)}},a=await(0,u.A)(n.path+"/cut",o),{cutIndexes:l,geometries:h=[]}=a.data;return{cutIndexes:l,geometries:h.map((e=>{const t=(0,p.rS)(e);return t.spatialReference=s,t}))}}(n,C,R,i)),r=[],s=[];for(let i=0;i<k.length;i++){const n=k[i];if("cut"!==n)s.push(n);else{const n=t.shift(),o=e[i];null!=o&&"polygon"===o.type&&o.rings&&o.rings.length>1&&n.rings.length>=o.rings.length?(r.push(n),s.push("simplify")):s.push(v?(0,h.Gh)(n):n)}}if(!r.length)return s;const o=await async function(e,t,i){const r="string"==typeof e?(0,f.An)(e):e,n=t[0].spatialReference,s=(0,p.$B)(t[0]),o={...i,query:{...r.query,f:"json",sr:(0,c.YX)(n),geometries:JSON.stringify((0,y.X)(t))}},{data:a}=await(0,u.A)(r.path+"/simplify",o);return(0,y.V)(a.geometries,s,n)}(n,r,i),a=[];for(let e=0;e<s.length;e++){const t=s[e];"simplify"!==t?a.push(t):a.push(v?(0,h.Gh)(o.shift()):o.shift())}return a}const P=[];for(let e=0;e<k.length;e++){const t=k[e];if("cut"!==t)P.push(t);else{const e=C.shift();P.push(!0===v?(0,h.Gh)(e):e)}}return P}function S(e){if(!e)return null;const t=e.extent;if(!t)return null;const i=e.spatialReference&&(0,c.Vp)(e.spatialReference);if(!i)return t;const[r,n]=i.valid,s=2*n,{width:o}=t;let a,{xmin:l,xmax:h}=t;if([l,h]=[h,l],"extent"===e.type||0===o||o<=n||o>s||l<r||h>n)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;a=_(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;a=_(e.paths);break;case"multipoint":a=e.points}const u=t.clone();for(let e=0;e<a.length;e++){let t=a[e][0];t<0?(t+=n,h=Math.max(t,h)):(t-=n,l=Math.min(t,l))}return u.xmin=l,u.xmax=h,u.width<o?(u.xmin-=n,u.xmax-=n,u):t}function A(e,t,i){const r=(0,c.Vp)(i);if(null==r)return e;const[n,s]=r.valid,o=2*s;let a=0,l=0;t>s?a=Math.ceil(Math.abs(t-s)/o):t<n&&(a=-Math.ceil(Math.abs(t-n)/o)),e>s?l=Math.ceil(Math.abs(e-s)/o):e<n&&(l=-Math.ceil(Math.abs(e-n)/o));let h=e+(a-l)*o;const u=h-t;return u>s?h-=o:u<n&&(h+=o),h}function E(e,t){const i=(0,c.Vp)(t);if(i){const[t,r]=i.valid,n=r-t;if(e<t)for(;e<t;)e+=n;if(e>r)for(;e>r;)e-=n}return e}},75981:(e,t,i)=>{"use strict";i.d(t,{j7:()=>o,kS:()=>l,kd:()=>a,r8:()=>c});var r=i(38648),n=i(44153),s=i(56053);const o={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new r.A({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:n.A.WebMercator}),minus180Line:new r.A({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:n.A.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new r.A({paths:[[[180,-180],[180,180]]],spatialReference:n.A.WGS84}),minus180Line:new r.A({paths:[[[-180,-180],[-180,180]]],spatialReference:n.A.WGS84})}};function a(e,t){return Math.ceil((e-t)/(2*t))}function l(e,t){const i=c(e);for(const e of i)for(const i of e)i[0]+=t;return e}function c(e){return(0,s.Bi)(e)?e.rings:e.paths}},87368:(e,t,i)=>{"use strict";i.d(t,{C:()=>u,Cr:()=>y,Io:()=>P,LV:()=>h,O_:()=>f,Qj:()=>p,T7:()=>C,Tj:()=>N,U5:()=>x,Ui:()=>I,Z1:()=>R,_I:()=>O,b6:()=>L,ci:()=>g,fA:()=>d,gv:()=>k,lU:()=>m,mN:()=>D,mP:()=>S,mR:()=>E,vt:()=>c,ze:()=>A});var r=i(4506),n=i(80347),s=i(19913),o=(i(74772),i(74695)),a=i(11631),l=i(45773);function c(e=j){return[e[0],e[1],e[2],e[3]]}function h(e=j[0],t=j[1],i=j[2],r=j[3]){return d(e,t,i,r,a.Km.get())}function u(e,t){return d(t[0],t[1],t[2],t[3],e)}function p(e){return e}function d(e,t,i,r,n=c()){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n}function f(e,t,i){const r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=Math.abs(r-1)>1e-5&&r>1e-12?1/Math.sqrt(r):1;return i[0]=t[0]*n,i[1]=t[1]*n,i[2]=t[2]*n,i[3]=-(i[0]*e[0]+i[1]*e[1]+i[2]*e[2]),i}function y(e,t,i,r=c()){const n=i[0]-t[0],s=i[1]-t[1],o=i[2]-t[2],a=e[0]-t[0],l=e[1]-t[1],h=e[2]-t[2],u=s*h-o*l,p=o*a-n*h,d=n*l-s*a,f=u*u+p*p+d*d,y=Math.abs(f-1)>1e-5&&f>1e-12?1/Math.sqrt(f):1;return r[0]=u*y,r[1]=p*y,r[2]=d*y,r[3]=-(r[0]*e[0]+r[1]*e[1]+r[2]*e[2]),r}function m(e,t,i,r=0,s=Math.floor(i*(1/3)),o=Math.floor(i*(2/3))){if(i<3)return!1;t(_,r);let a=s,l=!1;for(;a<i-1&&!l;)t(b,a),a++,l=!(0,n.j)(_,b);if(!l)return!1;for(a=Math.max(a,o),l=!1;a<i&&!l;)t(w,a),a++,(0,n.f)(M,_,b),(0,n.n)(M,M),(0,n.f)(T,b,w),(0,n.n)(T,T),l=!(0,n.j)(_,w)&&!(0,n.j)(b,w)&&Math.abs((0,n.k)(M,T))<v;return l?(y(_,b,w,e),!0):(0!==r||1!==s||2!==o)&&m(e,t,i,0,1,2)}function g(e,t,i=!0){const r=t.length/3;return m(e,((e,i)=>(0,n.s)(e,t[3*i+0],t[3*i+1],t[3*i+2])),i?r-1:r)}const v=.99619469809,_=(0,s.vt)(),b=(0,s.vt)(),w=(0,s.vt)(),M=(0,s.vt)(),T=(0,s.vt)();function S(e,t,i){return t!==e&&u(e,t),e[3]=-(0,n.k)(e,i),e}function A(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function E(e,t,i,r){return(0,n.b)(w,t,e),f(i,w,r)}function x(e,t,i,r){return F(e,t,(0,n.f)(a.rq.get(),i,t),U,r)}function I(e,t,i){return null!=t&&F(e,t.origin,t.direction,V,i)}function C(e,t,i){return F(e,t.origin,t.vector,Z.NONE,i)}function k(e,t,i){return F(e,t.origin,t.vector,Z.CLAMP,i)}function N(e,t){return D(e,t)>=0}function L(e,t){const i=(0,n.k)(e,t.ray.direction),r=-D(e,t.ray.origin);if(i>-1e-6&&i<1e-6)return r>0;const s=r/i;return i>0?s<t.c1&&(t.c1=s):s>t.c0&&(t.c0=s),t.c0<=t.c1}function O(e,t,i){const r=(0,n.h)(a.rq.get(),e,-e[3]),s=function(e,t,i){const r=(0,n.h)(a.rq.get(),e,(0,n.k)(e,t));return(0,n.f)(i,t,r),i}(e,(0,n.f)(a.rq.get(),t,r),a.rq.get());return(0,n.g)(i,s,r),i}function R(e,t,i,r){const s=e,c=a.rq.get(),h=a.rq.get();(0,l.VV)(s,c,h);const u=(0,n.f)(a.rq.get(),i,t),p=(0,o.gr)(c,u),d=(0,o.gr)(h,u),f=(0,o.gr)(s,u);return(0,n.s)(r,p,d,f)}function P(e,t){return Math.abs(D(e,t))}function D(e,t){return(0,n.k)(e,t)+e[3]}function F(e,t,i,s,o){const a=(0,n.k)(e,i);if(0===a)return!1;let l=-((0,n.k)(e,t)+e[3])/a;return s&Z.CLAMP&&(l=(0,r.qE)(l,0,1)),!(!(s&Z.INFINITE_MIN)&&l<0||!(s&Z.INFINITE_MAX)&&l>1||((0,n.g)(o,t,(0,n.h)(o,i,l)),0))}const j=[0,0,1,0];var Z,z;(z=Z||(Z={}))[z.NONE=0]="NONE",z[z.CLAMP=1]="CLAMP",z[z.INFINITE_MIN=4]="INFINITE_MIN",z[z.INFINITE_MAX=8]="INFINITE_MAX";const U=Z.INFINITE_MIN|Z.INFINITE_MAX,V=Z.INFINITE_MAX},66220:(e,t,i)=>{"use strict";i.d(t,{$X:()=>f,Gy:()=>u,P5:()=>y,SW:()=>p,Tr:()=>d,VV:()=>o}),i(56053);const r=(e,t,i)=>[t,i],n=(e,t,i)=>[t,i,e[2]],s=(e,t,i)=>[t,i,e[2],e[3]];function o(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:null!=e.extent?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function a({scale:e,translate:t},i){return i*e[0]+t[0]}function l({scale:e,translate:t},i){return t[1]-i*e[1]}function c(e,t,i){const r=new Array(i.length);if(!i.length)return r;const[n,s]=e.scale;let o=a(e,i[0][0]),c=l(e,i[0][1]);r[0]=t(i[0],o,c);for(let e=1;e<i.length;e++){const a=i[e];o+=a[0]*n,c-=a[1]*s,r[e]=t(a,o,c)}return r}function h(e,t,i){const r=new Array(i.length);for(let n=0;n<i.length;n++)r[n]=c(e,t,i[n]);return r}function u(e,t,i,r,n){return t.x=function({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}(e,i.x),t.y=function({scale:e,translate:t},i){return Math.round((t[1]-i)/e[1])}(e,i.y),t!==i&&(r&&(t.z=i.z),n&&(t.m=i.m)),t}function p(e,t,i,o,a){return null!=i&&(t.points=function(e,t,i,o){return c(e,i?o?s:n:o?n:r,t)}(e,i.points,o,a)),t}function d(e,t,i,r,n){return null==i||(t.x=a(e,i.x),t.y=l(e,i.y),t!==i&&(r&&(t.z=i.z),n&&(t.m=i.m))),t}function f(e,t,i,o,a){return null!=i&&(t.rings=function(e,t,i,o){return h(e,i?o?s:n:o?n:r,t)}(e,i.rings,o,a)),t}function y(e,t,i,o,a){return null!=i&&(t.paths=function(e,t,i,o){return h(e,i?o?s:n:o?n:r,t)}(e,i.paths,o,a)),t}},63918:(e,t,i)=>{"use strict";i.d(t,{C:()=>h,Cr:()=>u,LV:()=>c,kb:()=>p,oC:()=>d,vt:()=>a}),i(3223);var r=i(82444),n=i(80347),s=i(19913),o=i(11631);function a(e){return e?l((0,s.o8)(e.origin),(0,s.o8)(e.direction)):l((0,s.vt)(),(0,s.vt)())}function l(e,t){return{origin:e,direction:t}}function c(e,t){const i=f.get();return i.origin=e,i.direction=t,i}function h(e,t=a()){return function(e,t,i=a()){return(0,n.c)(i.origin,e),(0,n.c)(i.direction,t),i}(e.origin,e.direction,t)}function u(e,t,i=a()){return(0,n.c)(i.origin,e),(0,n.f)(i.direction,t,e),i}function p(e,t){const i=(0,n.b)(o.rq.get(),(0,n.n)(o.rq.get(),e.direction),(0,n.f)(o.rq.get(),t,e.origin));return(0,n.k)(i,i)}function d(e,t,i){const r=(0,n.k)(e.direction,(0,n.f)(i,t,e.origin));return(0,n.g)(i,e.origin,(0,n.h)(i,e.direction,r)),i}const f=new r.I((()=>a()))},84459:(e,t,i)=>{"use strict";i.d(t,{X_:()=>o,i1:()=>a,zx:()=>l});var r=i(4506),n=i(5262);const s=96;function o(e,t){const i=t||e.extent,r=e.width,o=(0,n.GA)(i?.spatialReference);return i&&r?i.width/r*o*n.dy*s:0}function a(e,t){return e/((0,n.GA)(t)*n.dy*s)}function l(e,t,i){return function(e,t){return 0===t||(0,r.Sp)(e,t)||e<t}(e,t)&&function(e,t){return 0===t||(0,r.Sp)(e,t)||e>t}(e,i)}},67488:(e,t,i)=>{"use strict";i.d(t,{B3:()=>m,EA:()=>y,K8:()=>b,KK:()=>I,KQ:()=>A,Vp:()=>d,YX:()=>f,ZL:()=>S,aI:()=>p,ch:()=>C,d9:()=>E,fn:()=>x,jp:()=>v,oT:()=>g,q8:()=>T,r1:()=>w,tQ:()=>k,tl:()=>M,x1:()=>_});var r=i(21332),n=(i(89349),i(79509)),s=i(40969);const o=[102100,102113,3857,3785],a=[4326,...o,104905,104971],l='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',c=[-20037508.342788905,20037508.342788905],h=[-20037508.342787,20037508.342787],u={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:c,origin:h,dx:1e-5},102100:{wkTemplate:l,valid:c,origin:h,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:c,origin:h,dx:1e-5},3857:{wkTemplate:l,valid:c,origin:h,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function p(e,t){if(e===t)return!0;if(null==e||null==t)return!1;const i=e.wkid,r=t.wkid;if(null!=i||null!=r){if(i===r)return!0;if(b(e)&&b(t))return!0;const n=e.latestWkid;if(null!=n&&r===n)return!0;const s=t.latestWkid;return null!=s&&i===s}let n,s;return e.wkt2&&t.wkt2?(n=e.wkt2,s=t.wkt2):e.wkt&&t.wkt&&(n=e.wkt,s=t.wkt),!(!n||!s)&&n.toUpperCase()===s.toUpperCase()}function d(e){const t=e?.wkid;return null!=t&&t>=2e3&&u[t]||null}function f(e){if(!e)return;const{wkid:t,vcsWkid:i}=e;if(t)return i?JSON.stringify({wkid:t,vcsWkid:i}):String(t);const r=e.wkt||e.wkt2;return JSON.stringify(r?i?{wkt:r,vcsWkid:i}:{wkt:r}:{})}function y(e){if(!x(e))return!1;const{wkid:t}=e;if(t)return null==s.A[t];const i=e.wkt2||e.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function m(e){return!(T(e)||A(e))}function g(e){return 4326===e?.wkid}function v(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function _(e){return e?.wkid===n.Y.CGCS2000}function b(e){const t=e?.wkid;return null!=t&&t>=2e3&&o.includes(t)}function w(e){return 32662===e?.wkid}function M(e){return e===n.Y.GCSMARS2000||e===n.Y.GCSMARS2000_SPHERE}function T(e){return M(e?.wkid)}function S(e){return e===n.Y.GCSMOON2000}function A(e){return S(e?.wkid)}function E(e){const t=e?.wkid;return null!=t&&t>=2e3&&a.includes(t)}function x(e){if(null==e)return!1;const t=e.wkid;return null!=t&&t>=2e3||null!=e.wkt2||null!=e.wkt}const I={wkid:4326,wkt:(0,r.HC)(u[4326].wkTemplate,{Central_Meridian:"0.0"})},C={wkid:102100,latestWkid:3857},k={wkid:32662}},54483:(e,t,i)=>{"use strict";i.d(t,{Y:()=>s,g:()=>n});var r=i(1817);const n=(0,r.O)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),s=(0,r.O)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"})},74695:(e,t,i)=>{"use strict";i.d(t,{_I:()=>o,g7:()=>l,gr:()=>a});var r=i(4506),n=i(80347),s=i(19913);function o(e,t,i){const r=(0,n.k)(e,t)/(0,n.k)(e,e);return(0,n.h)(i,e,r)}function a(e,t){return(0,n.k)(e,t)/(0,n.l)(e)}function l(e,t){const i=(0,n.k)(e,t)/((0,n.l)(e)*(0,n.l)(t));return-(0,r.XM)(i)}(0,s.vt)(),(0,s.vt)()},11631:(e,t,i)=>{"use strict";i.d(t,{Rc:()=>f,J8:()=>y,oG:()=>u,rq:()=>p,Km:()=>d});var r=i(71709),n=i(79441),s=i(26110),o=i(19165),a=i(56560),l=i(19913),c=i(76982);class h{constructor(e){this._create=e,this._items=new Array,this._itemsPtr=0}get(){return 0===this._itemsPtr&&(0,r.d)((()=>this._reset())),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const e=2*this._itemsPtr;this._items.length>e&&(this._items.length=e),this._itemsPtr=0}static createVec2f64(){return new h(a.vt)}static createVec3f64(){return new h(l.vt)}static createVec4f64(){return new h(c.vt)}static createMat3f64(){return new h(n.vt)}static createMat4f64(){return new h(s.vt)}static createQuatf64(){return new h(o.vt)}get test(){return{length:this._items.length}}}const u=h.createVec2f64(),p=h.createVec3f64(),d=h.createVec4f64(),f=(h.createMat3f64(),h.createMat4f64()),y=h.createQuatf64()},64672:(e,t,i)=>{"use strict";i.d(t,{Cv:()=>g,Gh:()=>b,ci:()=>w,je:()=>v,jg:()=>p,tD:()=>_,y7:()=>m,yw:()=>u});var r=i(15565),n=i(44153),s=i(99263),o=i(67488);const a=57.29577951308232,l=.017453292519943;function c(e){return e*a}function h(e){return e*l}function u(e){return e/s.$O.radius}function p(e){return Math.PI/2-2*Math.atan(Math.exp(-e/s.$O.radius))}function d(e){return null!=e.wkid||null!=e.wkt}const f=[0,0];function y(e,t,i,r,n){const s=e,o=n;if(o.spatialReference=i,"x"in s&&"x"in o)[o.x,o.y]=t(s.x,s.y,f,r);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=t(s.xmin,s.ymin,f,r),[o.xmax,o.ymax]=t(s.xmax,s.ymax,f,r);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const e="paths"in s?s.paths:s.rings,i=[];let n;for(let s=0;s<e.length;s++){const o=e[s];n=[],i.push(n);for(let e=0;e<o.length;e++)n.push(t(o[e][0],o[e][1],[0,0],r)),o[e].length>2&&n[e].push(o[e][2]),o[e].length>3&&n[e].push(o[e][3])}"paths"in o?o.paths=i:o.rings=i}else if("points"in s&&"points"in o){const e=s.points,i=[];for(let n=0;n<e.length;n++)i[n]=t(e[n][0],e[n][1],[0,0],r),e[n].length>2&&i[n].push(e[n][2]),e[n].length>3&&i[n].push(e[n][3]);o.points=i}return n}function m(e,t){const i=e&&(d(e)?e:e.spatialReference),r=t&&(d(t)?t:t.spatialReference);return!(e&&"type"in e&&"mesh"===e.type||t&&"type"in t&&"mesh"===t.type||!i||!r)&&(!!(0,o.aI)(r,i)||(0,o.K8)(r)&&(0,o.oT)(i)||(0,o.K8)(i)&&(0,o.oT)(r))}function g(e,t){if(null==e)return null;const i=e.spatialReference,s=t&&(d(t)?t:t.spatialReference);return m(i,s)?(0,o.aI)(i,s)?(0,r.o8)(e):(0,o.K8)(s)?y(e,v,n.A.WebMercator,!1,(0,r.o8)(e)):(0,o.oT)(s)?y(e,_,n.A.WGS84,!1,(0,r.o8)(e)):null:null}function v(e,t,i=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const r=h(t);return i[0]=h(e)*s.$O.radius,i[1]=s.$O.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function _(e,t,i=[0,0],r=!1){const n=c(e/s.$O.radius);return i[0]=r?n:n-360*Math.floor((n+180)/360),i[1]=c(Math.PI/2-2*Math.atan(Math.exp(-t/s.$O.radius))),i}function b(e,t=!1,i=(0,r.o8)(e)){return y(e,v,n.A.WebMercator,t,i)}function w(e,t=!1,i=(0,r.o8)(e)){return y(e,_,n.A.WGS84,t,i)}},45852:(e,t,i)=>{"use strict";function r(e,t,i=!1){let{hasM:r,hasZ:n}=e;Array.isArray(t)?4!==t.length||r||n?3===t.length&&i&&!r?(n=!0,r=!1):3===t.length&&r&&n&&(r=!1,n=!1):(r=!0,n=!0):(n=!n&&t.hasZ&&(!r||t.hasM),r=!r&&t.hasM&&(!n||t.hasZ)),e.hasZ=n,e.hasM=r}i.d(t,{h:()=>r})},55792:(e,t,i)=>{"use strict";i.d(t,{N:()=>o});var r=i(5262),n=i(34670),s=i(67488);function o(e,t,i){if(null==t||null==i||i.vcsWkid||(0,s.aI)(t,i)||(0,n.xP)(t)||(0,n.xP)(i))return null;const o=(0,r.G9)(t)/(0,r.G9)(i);if(1===o)return null;switch(e){case"point":case"esriGeometryPoint":return e=>function(e,t){null!=e?.z&&(e.z*=t)}(e,o);case"polyline":case"esriGeometryPolyline":return e=>function(e,t){if(e)for(const i of e.paths)for(const e of i)e.length>2&&(e[2]*=t)}(e,o);case"polygon":case"esriGeometryPolygon":return e=>function(e,t){if(e)for(const i of e.rings)for(const e of i)e.length>2&&(e[2]*=t)}(e,o);case"multipoint":case"esriGeometryMultipoint":return e=>function(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}(e,o);case"extent":case"esriGeometryEnvelope":return e=>function(e,t){e&&null!=e.zmin&&null!=e.zmax&&(e.zmin*=t,e.zmax*=t)}(e,o);default:return null}}},83510:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>U});var r=i(6480),n=i(82392),s=i(32083),o=i(38116),a=i(62991),l=i(57888),c=i(92840),h=i(15565),u=i(21750),p=i(37623),d=i(19759),f=i(81482),y=(i(6273),i(80861),i(26325)),m=(i(39553),i(67498),i(52239)),g=i(9737),v=(i(33510),i(2153)),_=i(2110),b=i(56931),w=i(13033);const M="esri-identity-modal",T={base:M,info:`${M}__info`,notice:`${M}__notice`};let S=class extends m.A{constructor(e,t){super(e,t),this.container=document.createElement("div"),this.error=null,this.oAuthPrompt=!1,this.open=!1,this.signingIn=!1,this.server=null,this.resource=null,this._usernameInputNode=null,this._passwordInputNode=null,document.body.appendChild(this.container)}loadDependencies(){return(0,g.W)({button:()=>Promise.all([i.e(2006),i.e(7053),i.e(9091),i.e(5399)]).then(i.bind(i,45399)),input:()=>Promise.all([i.e(2006),i.e(7053),i.e(9091),i.e(9839),i.e(1512)]).then(i.bind(i,21512)),label:()=>Promise.all([i.e(2006),i.e(3448)]).then(i.bind(i,43448)),modal:()=>Promise.all([i.e(2006),i.e(7053),i.e(5566),i.e(7417)]).then(i.bind(i,47417)),notice:()=>Promise.all([i.e(2006),i.e(7053),i.e(710)]).then(i.bind(i,80710))})}get title(){return this.commonMessages?.auth.signIn}render(){const{open:e,title:t,messages:i,signingIn:r,oAuthPrompt:n,server:s,resource:o,error:a}=this,{info:l,oAuthInfo:c,lblItem:h,invalidUser:u,noAuthService:p,lblUser:d,lblPwd:f,lblCancel:y,lblSigning:m,lblOk:g}=i;return(0,_.K)("div",{class:this.classes(T.base,(0,b.fJ)())},(0,_.K)("form",{bind:this,onsubmit:this._submit},(0,_.K)("calcite-modal",{bind:this,open:e,outsideCloseDisabled:!0,scale:"s",widthScale:"s",onCalciteModalClose:this._cancel,onCalciteModalOpen:this._focusUsernameInput},(0,_.K)("div",{slot:"header"},t),(0,_.K)("div",{slot:"content"},(0,_.K)("div",{class:T.info},(0,w.V)(n?c:l,{server:s&&/\.arcgis\.com/i.test(s)?"ArcGIS Online":s,resource:`(${o||h})`})),a?(0,_.K)("calcite-notice",{class:T.notice,icon:"exclamation-mark-triangle",kind:"danger",open:!0},(0,_.K)("div",{slot:"message"},a.details?.httpStatus?u:p)):null,n?null:[(0,_.K)("calcite-label",null,d,(0,_.K)("calcite-input",{afterCreate:e=>this._usernameInputNode=e,autocomplete:"off",bind:this,name:"username",required:!0,spellcheck:!1,type:"text",value:""})),(0,_.K)("calcite-label",null,f,(0,_.K)("calcite-input",{afterCreate:e=>this._passwordInputNode=e,bind:this,name:"password",required:!0,type:"password",value:""}))]),(0,_.K)("calcite-button",{appearance:"outline",bind:this,onclick:this._cancel,slot:"secondary",type:"button",width:"full"},y),(0,_.K)("calcite-button",{loading:!!r,slot:"primary",type:"submit",width:"full"},r?m:g))))}_focusUsernameInput(){requestAnimationFrame((()=>{this._usernameInputNode?.setFocus()}))}_cancel(){this._set("signingIn",!1),this.open=!1,this._usernameInputNode&&(this._usernameInputNode.value=""),this._passwordInputNode&&(this._passwordInputNode.value=""),this.emit("cancel")}_submit(e){e.preventDefault(),this._set("signingIn",!0);const t=this.oAuthPrompt?{}:{username:this._usernameInputNode?.value,password:this._passwordInputNode?.value};this.emit("submit",t)}};(0,n._)([(0,f.MZ)({readOnly:!0})],S.prototype,"container",void 0),(0,n._)([(0,f.MZ)(),(0,v.G)("esri/t9n/common")],S.prototype,"commonMessages",void 0),(0,n._)([(0,f.MZ)()],S.prototype,"error",void 0),(0,n._)([(0,f.MZ)(),(0,v.G)("esri/identity/t9n/identity")],S.prototype,"messages",void 0),(0,n._)([(0,f.MZ)()],S.prototype,"oAuthPrompt",void 0),(0,n._)([(0,f.MZ)()],S.prototype,"open",void 0),(0,n._)([(0,f.MZ)()],S.prototype,"signingIn",void 0),(0,n._)([(0,f.MZ)()],S.prototype,"server",void 0),(0,n._)([(0,f.MZ)({readOnly:!0})],S.prototype,"title",null),(0,n._)([(0,f.MZ)()],S.prototype,"resource",void 0),S=(0,n._)([(0,y.$)("esri.identity.IdentityModal")],S);const A=S,E="esriJSAPIOAuth";class x{constructor(e,t){this.oAuthInfo=null,this.storage=null,this.appId=null,this.codeVerifier=null,this.expires=null,this.refreshToken=null,this.ssl=null,this.stateUID=null,this.token=null,this.userId=null,this.oAuthInfo=e,this.storage=t,this._init()}isValid(){let e=!1;if(this.oAuthInfo&&this.userId&&(this.refreshToken||this.token))if(null==this.expires&&this.refreshToken)e=!0;else if(this.expires){const t=Date.now();this.expires>t&&(this.expires-t)/1e3>60*this.oAuthInfo.minTimeUntilExpiration&&(e=!0)}return e}save(){if(!this.storage)return!1;const e=this._load(),t=this.oAuthInfo;if(t&&t.authNamespace&&t.portalUrl){let i=e[t.authNamespace];i||(i=e[t.authNamespace]={}),this.appId||(this.appId=t.appId),i[t.portalUrl]={appId:this.appId,codeVerifier:this.codeVerifier,expires:this.expires,refreshToken:this.refreshToken,ssl:this.ssl,stateUID:this.stateUID,token:this.token,userId:this.userId};try{this.storage.setItem(E,JSON.stringify(e))}catch(e){return console.warn(e),!1}return!0}return!1}destroy(){const e=this._load(),t=this.oAuthInfo;if(t?.appId&&t?.portalUrl&&(null==this.expires||this.expires>Date.now())&&(this.refreshToken||this.token)){const e=t.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",i=new FormData;if(i.append("f","json"),i.append("auth_token",this.refreshToken||this.token),i.append("client_id",t.appId),i.append("token_type_hint",this.refreshToken?"refresh_token":"access_token"),"function"==typeof navigator.sendBeacon)navigator.sendBeacon(e,i);else{const t=new XMLHttpRequest;t.open("POST",e),t.send(i)}}if(t&&t.authNamespace&&t.portalUrl&&this.storage){const i=e[t.authNamespace];if(i){delete i[t.portalUrl];try{this.storage.setItem(E,JSON.stringify(e))}catch(e){console.log(e)}}}t&&(t._oAuthCred=null,this.oAuthInfo=null)}_init(){const e=this._load(),t=this.oAuthInfo;if(t&&t.authNamespace&&t.portalUrl){let i=e[t.authNamespace];i&&(i=i[t.portalUrl],i&&(this.appId=i.appId,this.codeVerifier=i.codeVerifier,this.expires=i.expires,this.refreshToken=i.refreshToken,this.ssl=i.ssl,this.stateUID=i.stateUID,this.token=i.token,this.userId=i.userId))}}_load(){let e={};if(this.storage){const t=this.storage.getItem(E);if(t)try{e=JSON.parse(t)}catch(e){console.warn(e)}}return e}}x.prototype.declaredClass="esri.identity.OAuthCredential";var I=i(96295),C=i(84977);let k=class extends C.oY{constructor(e){super(e),this.adminTokenServiceUrl=null,this.currentVersion=null,this.hasPortal=null,this.hasServer=null,this.owningSystemUrl=null,this.owningTenant=null,this.server=null,this.shortLivedTokenValidity=null,this.tokenServiceUrl=null,this.webTierAuth=null}};(0,n._)([(0,f.MZ)({json:{write:!0}})],k.prototype,"adminTokenServiceUrl",void 0),(0,n._)([(0,f.MZ)({json:{write:!0}})],k.prototype,"currentVersion",void 0),(0,n._)([(0,f.MZ)({json:{write:!0}})],k.prototype,"hasPortal",void 0),(0,n._)([(0,f.MZ)({json:{write:!0}})],k.prototype,"hasServer",void 0),(0,n._)([(0,f.MZ)({json:{write:!0}})],k.prototype,"owningSystemUrl",void 0),(0,n._)([(0,f.MZ)({json:{write:!0}})],k.prototype,"owningTenant",void 0),(0,n._)([(0,f.MZ)({json:{write:!0}})],k.prototype,"server",void 0),(0,n._)([(0,f.MZ)({json:{write:!0}})],k.prototype,"shortLivedTokenValidity",void 0),(0,n._)([(0,f.MZ)({json:{write:!0}})],k.prototype,"tokenServiceUrl",void 0),(0,n._)([(0,f.MZ)({json:{write:!0}})],k.prototype,"webTierAuth",void 0),k=(0,n._)([(0,y.$)("esri.identity.ServerInfo")],k);const N=k;var L=i(9856);const O={},R=e=>{const t=new d.s0(e.owningSystemUrl).host,i=new d.s0(e.server).host,r=/.+\.arcgis\.com$/i;return r.test(t)&&r.test(i)},P=(e,t)=>!!(R(e)&&t&&t.some((t=>t.test(e.server))));let D=null,F=null;try{D=window.localStorage,F=window.sessionStorage}catch{}class j extends l.A{constructor(){super(),this._portalConfig=globalThis.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this._defaultOAuthInfo=null,this._defaultTokenValidity=60,this.dialog=null,this.tokenValidity=null,this.normalizeWebTierAuth=!1,this._appOrigin="null"!==window.origin?window.origin:window.location.origin,this._appUrlObj=(0,d.An)(window.location.href),this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthLocationParams=null,this._gwTokenUrl="/sharing/rest/generateToken",this._agsRest="/rest/services",this._agsPortal=/\/sharing(\/|$)/i,this._agsAdmin=/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i,this._adminSvcs=/\/rest\/admin\/services(\/|$)/i,this._gwDomains=[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"}],this._legacyFed=[],this._regexSDirUrl=/http.+\/rest\/services\/?/gi,this._regexServerType=/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|KnowledgeGraphServer|MapServer|MissionServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer|VideoServer)).*/gi,this._gwUser=/http.+\/users\/([^\/]+)\/?.*/i,this._gwItem=/http.+\/items\/([^\/]+)\/?.*/i,this._gwGroup=/http.+\/groups\/([^\/]+)\/?.*/i,this._rePortalTokenSvc=/\/sharing(\/rest)?\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getOAuthLocationParams(),window.addEventListener("pageshow",(e=>{this._pageShowHandler(e)}))}registerServers(e){const t=this.serverInfos;t?(e=e.filter((e=>!this.findServerInfo(e.server))),this.serverInfos=t.concat(e)):this.serverInfos=e,e.forEach((e=>{e.owningSystemUrl&&this._portals.push(e.owningSystemUrl),e.hasPortal&&this._portals.push(e.server)}))}registerOAuthInfos(e){const t=this.oAuthInfos;if(t){for(const i of e){const e=this.findOAuthInfo(i.portalUrl);e&&t.splice(t.indexOf(e),1)}this.oAuthInfos=t.concat(e)}else this.oAuthInfos=e}registerToken(e){e={...e};const t=this._sanitizeUrl(e.server),i=this._isServerRsrc(t);let r,n=this.findServerInfo(t),s=!0;n||(n=new N,n.server=this._getServerInstanceRoot(t),i?n.hasServer=!0:(n.tokenServiceUrl=this._getTokenSvcUrl(t),n.hasPortal=!0),this.registerServers([n])),r=this._findCredential(t),r?(delete e.server,Object.assign(r,e),s=!1):(r=new Z({userId:e.userId,server:n.server,token:e.token,expires:e.expires,ssl:e.ssl,scope:i?"server":"portal"}),r.resources=[t],this.credentials.push(r)),r.emitTokenChange(!1),s||r.refreshServerTokens()}toJSON(){return(0,h.oy)({serverInfos:this.serverInfos.map((e=>e.toJSON())),oAuthInfos:this.oAuthInfos.map((e=>e.toJSON())),credentials:this.credentials.map((e=>e.toJSON()))})}initialize(e){if(!e)return;"string"==typeof e&&(e=JSON.parse(e));const t=e.serverInfos,i=e.oAuthInfos,r=e.credentials;if(t){const e=[];t.forEach((t=>{t.server&&t.tokenServiceUrl&&e.push(t.declaredClass?t:new N(t))})),e.length&&this.registerServers(e)}if(i){const e=[];i.forEach((t=>{t.appId&&e.push(t.declaredClass?t:new I.A(t))})),e.length&&this.registerOAuthInfos(e)}r&&r.forEach((e=>{e.server&&e.token&&e.expires&&e.expires>Date.now()&&((e=e.declaredClass?e:new Z(e)).emitTokenChange(),this.credentials.push(e))}))}findServerInfo(e){let t;e=this._sanitizeUrl(e);for(const i of this.serverInfos)if(this._hasSameServerInstance(i.server,e)){t=i;break}return t}findOAuthInfo(e){let t;e=this._sanitizeUrl(e);for(const i of this.oAuthInfos)if(this._hasSameServerInstance(i.portalUrl,e)){t=i;break}return t}findCredential(e,t){if(!e)return;let i;e=this._sanitizeUrl(e);const r=this._isServerRsrc(e)?"server":"portal";if(t){for(const n of this.credentials)if(this._hasSameServerInstance(n.server,e)&&t===n.userId&&n.scope===r){i=n;break}}else for(const t of this.credentials)if(this._hasSameServerInstance(t.server,e)&&-1!==this._getIdenticalSvcIdx(e,t)&&t.scope===r){i=t;break}return i}getCredential(e,t){let i,r,n=!0;t&&(i=!!t.token,r=t.error,n=!1!==t.prompt),t={...t},e=this._sanitizeUrl(e);const s=new AbortController,o=(0,p.Tw)();if(t.signal&&(0,p.u7)(t.signal,(()=>{s.abort()})),(0,p.u7)(s,(()=>{o.reject(new a.A("identity-manager:user-aborted","ABORTED"))})),(0,p.G4)(s))return o.promise;t.signal=s.signal;const l=this._isAdminResource(e),c=i?this.findCredential(e):null;let h;if(c&&r&&r.details&&498===r.details.httpStatus)c.destroy();else if(c)return h=new a.A("identity-manager:not-authorized","You are currently signed in as: '"+c.userId+"'. You do not have access to this resource: "+e,{error:r}),o.reject(h),o.promise;const u=this._findCredential(e,t);if(u)return o.resolve(u),o.promise;let f=this.findServerInfo(e);if(f)!f.hasPortal&&f.server&&f.owningSystemUrl&&this._hasSameServerInstance(f.server,f.owningSystemUrl)&&(f.hasPortal=!0),!f.hasServer&&this._isServerRsrc(e)&&(f._restInfoPms=this._getTokenSvcUrl(e),f.hasServer=!0);else{const t=this._getTokenSvcUrl(e);if(!t)return h=new a.A("identity-manager:unknown-resource","Unknown resource - could not find token service endpoint."),o.reject(h),o.promise;f=new N,f.server=this._getServerInstanceRoot(e),"string"==typeof t?(f.tokenServiceUrl=t,f.hasPortal=!0):(f._restInfoPms=t,f.hasServer=!0),this.registerServers([f])}return f.hasPortal&&void 0===f._selfReq&&(n||(0,d.FX)(f.tokenServiceUrl,this._appOrigin)||this._gwDomains.some((e=>e.tokenServiceUrl===f.tokenServiceUrl)))&&(f._selfReq={owningTenant:t?.owningTenant,selfDfd:this._getPortalSelf(f.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),e)}),this._enqueue(e,f,t,o,l)}getResourceName(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(e)&&e.replace(this._gwUser,"$1")||this._gwItem.test(e)&&e.replace(this._gwItem,"$1")||this._gwGroup.test(e)&&e.replace(this._gwGroup,"$1")||""}generateToken(e,t,i){const r=this._rePortalTokenSvc.test(e.tokenServiceUrl),n=new d.s0(this._appOrigin),s=e.shortLivedTokenValidity;let l,c,h,u,p,f,y,m;t&&(m=this.tokenValidity||s||this._defaultTokenValidity,m>s&&s>0&&(m=s)),i&&(l=i.isAdmin,c=i.serverUrl,h=i.token,f=i.signal,y=i.ssl,e.customParameters=i.customParameters),l?u=e.adminTokenServiceUrl:(u=e.tokenServiceUrl,p=new d.s0(u.toLowerCase()),e.webTierAuth&&i?.serverUrl&&!y&&"http"===n.scheme&&((0,d.FX)(n.uri,u,!0)||"https"===p.scheme&&n.host===p.host&&"7080"===n.port&&"7443"===p.port)&&(u=u.replace(/^https:/i,"http:").replace(/:7443/i,":7080")));const g={query:{request:"getToken",username:t?.username,password:t?.password,serverUrl:c,token:h,expiration:m,referer:l||r?this._appOrigin:null,client:l?"referer":null,f:"json",...e.customParameters},method:"post",authMode:"anonymous",useProxy:this._useProxy(e,i),signal:f,...i?.ioArgs};return r||(g.withCredentials=!1),(0,o.A)(u,g).then((i=>{const r=i.data;if(!r?.token)return new a.A("identity-manager:authentication-failed","Unable to generate token");const n=e.server;return O[n]||(O[n]={}),t&&(O[n][t.username]=t.password),r.validity=m,r}))}isBusy(){return!!this._busy}checkSignInStatus(e){return this.checkAppAccess(e,"").then((e=>e.credential))}checkAppAccess(e,t,i){let r=!1;return this.getCredential(e,{prompt:!1}).then((n=>{let s;const l={f:"json"};if("portal"===n.scope)if(t&&(this._doPortalSignIn(e)||i?.force))s=n.server+"/sharing/rest/oauth2/validateAppAccess",l.client_id=t;else{if(!n.token)return{credential:n};s=n.server+"/sharing/rest"}else{if(!n.token)return{credential:n};s=n.server+"/rest/services"}return n.token&&(l.token=n.token),(0,o.A)(s,{query:l,authMode:"anonymous"}).then((e=>{if(!1===e.data.valid)throw new a.A("identity-manager:not-authorized",`You are currently signed in as: '${n.userId}'.`,e.data);return r=!!e.data.viewOnlyUserTypeApp,{credential:n}})).catch((e=>{if("identity-manager:not-authorized"===e.name)throw e;const t=e.details?.httpStatus;if(498===t)throw n.destroy(),new a.A("identity-manager:not-authenticated","User is not signed in.");if(400===t)throw new a.A("identity-manager:invalid-request");return{credential:n}}))})).then((e=>({credential:e.credential,viewOnly:r})))}setOAuthResponseHash(e){e&&("#"===e.charAt(0)&&(e=e.substring(1)),this._processOAuthPopupParams((0,d.zf)(e)))}setOAuthRedirectionHandler(e){this._oAuthRedirectFunc=e}setProtocolErrorHandler(e){this._protocolFunc=e}signIn(e,t,i={}){const r=(0,p.Tw)(),n=()=>{l?.remove(),c?.remove(),this.dialog?.destroy(),this.dialog=l=c=null},s=()=>{n(),this._oAuthDfd=null,r.reject(new a.A("identity-manager:user-aborted","ABORTED"))};i.signal&&(0,p.u7)(i.signal,(()=>{s()}));const o=new A({open:!0,resource:this.getResourceName(e),server:t.server});this.dialog=o,this.emit("dialog-create");let l=o.on("cancel",s),c=o.on("submit",(e=>{this.generateToken(t,e,{isAdmin:i.isAdmin,signal:i.signal}).then((s=>{n();const o=new Z({userId:e.username,server:t.server,token:s.token,expires:null!=s.expires?Number(s.expires):null,ssl:!!s.ssl,isAdmin:i.isAdmin,validity:s.validity});r.resolve(o)})).catch((e=>{o.error=e,o.signingIn=!1}))}));return r.promise}oAuthSignIn(e,t,i,r){this._oAuthDfd=(0,p.Tw)();const n=this._oAuthDfd;let s;r?.signal&&(0,p.u7)(r.signal,(()=>{const e=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;e&&!e.closed?e.close():this.dialog&&h()})),n.resUrl_=e,n.sinfo_=t,n.oinfo_=i;const o=i._oAuthCred;if(o.storage&&("authorization-code"===i.flowType||"auto"===i.flowType&&t.currentVersion>=8.4)){let e=crypto.getRandomValues(new Uint8Array(32));s=(0,d.$1)(e),o.codeVerifier=s,e=crypto.getRandomValues(new Uint8Array(32)),o.stateUID=(0,d.$1)(e),o.save()||(o.codeVerifier=s=null)}else o.codeVerifier=null;let l,c;this._getCodeChallenge(s).then((n=>{const s=!r||!1!==r.oAuthPopupConfirmation;if(!i.popup||!s)return void this._doOAuthSignIn(e,t,i,n);const o=new A({oAuthPrompt:!0,server:t.server,open:!0});this.dialog=o,this.emit("dialog-create"),l=o.on("cancel",h),c=o.on("submit",(()=>{u(),this._doOAuthSignIn(e,t,i,n)}))}));const h=()=>{u(),this._oAuthDfd=null,n.reject(new a.A("identity-manager:user-aborted","ABORTED"))},u=()=>{l?.remove(),c?.remove(),this.dialog?.destroy(),this.dialog=null};return n.promise}destroyCredentials(){this.credentials&&this.credentials.slice().forEach((e=>{e.destroy()})),this.emit("credentials-destroy")}enablePostMessageAuth(e="https://www.arcgis.com/sharing/rest"){this._postMessageAuthHandle&&this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=(0,c.on)(window,"message",(t=>{if((t.origin===this._appOrigin||t.origin.endsWith(".arcgis.com"))&&"arcgis:auth:requestCredential"===t.data?.type){const i=t.source;this.getCredential(e).then((e=>{i.postMessage({type:"arcgis:auth:credential",credential:{expires:e.expires,server:e.server,ssl:e.ssl,token:e.token,userId:e.userId}},t.origin)})).catch((e=>{i.postMessage({type:"arcgis:auth:error",error:{name:e.name,message:e.message}},t.origin)}))}}))}disablePostMessageAuth(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)}_getOAuthLocationParams(){let e=window.location.hash;if(e){"#"===e.charAt(0)&&(e=e.substring(1));const t=(0,d.zf)(e);let i=!1;if(t.access_token&&t.expires_in&&t.state&&t.hasOwnProperty("username"))try{t.state=JSON.parse(t.state),t.state.portalUrl&&(this._oAuthLocationParams=t,i=!0)}catch{}else if(t.error&&t.error_description&&(console.log("IdentityManager OAuth Error: ",t.error," - ",t.error_description),"access_denied"===t.error&&(i=!0,t.state)))try{t.state=JSON.parse(t.state)}catch{}i&&(window.location.hash=t.state?.hash||"")}let t=window.location.search;if(t){"?"===t.charAt(0)&&(t=t.substring(1));const e=(0,d.zf)(t);let i=!1;if(e.code&&e.state)try{e.state=JSON.parse(e.state),e.state.portalUrl&&e.state.uid&&(this._oAuthLocationParams=e,i=!0)}catch{}else if(e.error&&e.error_description&&(console.log("IdentityManager OAuth Error: ",e.error," - ",e.error_description),"access_denied"===e.error&&(i=!0,e.state)))try{e.state=JSON.parse(e.state)}catch{}if(i){const t={...e};["code","error","error_description","message_code","persist","state"].forEach((e=>{delete t[e]}));const i=(0,d.x0)(t),r=window.location.pathname+(i?`?${i}`:"")+(e.state?.hash||"");window.history.replaceState(window.history.state,"",r)}}}_getOAuthToken(e,t,i,r,n){return e=e.replace(/^http:/i,"https:"),(0,o.A)(`${e}/sharing/rest/oauth2/token`,{authMode:"anonymous",method:"post",query:r&&n?{grant_type:"authorization_code",code:t,redirect_uri:r,client_id:i,code_verifier:n}:{grant_type:"refresh_token",refresh_token:t,client_id:i}}).then((e=>e.data))}_getCodeChallenge(e){if(e&&globalThis.isSecureContext){const t=(new TextEncoder).encode(e);return crypto.subtle.digest("SHA-256",t).then((e=>(0,d.$1)(new Uint8Array(e))))}return Promise.resolve(null)}_pageShowHandler(e){if(e.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const e=new a.A("identity-manager:user-aborted","ABORTED");this._errbackFunc(e)}}_findCredential(e,t){let i,r,n,s,o=-1;const a=t?.token,l=t?.resource,c=this._isServerRsrc(e)?"server":"portal",h=this.credentials.filter((t=>this._hasSameServerInstance(t.server,e)&&t.scope===c));if(e=l||e,h.length)if(1===h.length){if(i=h[0],n=this.findServerInfo(i.server),r=n?.owningSystemUrl,s=r?this.findCredential(r,i.userId):void 0,o=this._getIdenticalSvcIdx(e,i),!a)return-1===o&&i.resources.push(e),this._addResource(e,s),i;-1!==o&&(i.resources.splice(o,1),this._removeResource(e,s))}else{let t,i;if(h.some((a=>(i=this._getIdenticalSvcIdx(e,a),-1!==i&&(t=a,n=this.findServerInfo(t.server),r=n?.owningSystemUrl,s=r?this.findCredential(r,t.userId):void 0,o=i,!0)))),a)t&&(t.resources.splice(o,1),this._removeResource(e,s));else if(t)return this._addResource(e,s),t}}_findOAuthInfo(e){let t=this.findOAuthInfo(e);if(!t)for(const i of this.oAuthInfos)if(this._isIdProvider(i.portalUrl,e)){t=i;break}return t}_addResource(e,t){t&&-1===this._getIdenticalSvcIdx(e,t)&&t.resources.push(e)}_removeResource(e,t){let i=-1;t&&(i=this._getIdenticalSvcIdx(e,t),i>-1&&t.resources.splice(i,1))}_useProxy(e,t){return t?.isAdmin&&!(0,d.FX)(e.adminTokenServiceUrl,this._appOrigin)||!this._isPortalDomain(e.tokenServiceUrl)&&"10.1"===String(e.currentVersion)&&!(0,d.FX)(e.tokenServiceUrl,this._appOrigin)}_getOrigin(e){const t=new d.s0(e);return t.scheme+"://"+t.host+(null!=t.port?":"+t.port:"")}_getServerInstanceRoot(e){const t=e.toLowerCase();let i=t.indexOf(this._agsRest);return-1===i&&this._isAdminResource(e)&&(i=this._agsAdmin.test(e)?e.replace(this._agsAdmin,"$1").length:e.search(this._adminSvcs)),-1!==i||(0,L.$)(t)||(i=t.indexOf("/sharing")),-1===i&&"/"===t.substr(-1)&&(i=t.length-1),i>-1?e.substring(0,i):e}_hasSameServerInstance(e,t){return"/"===e.substr(-1)&&(e=e.slice(0,-1)),e=e.toLowerCase(),t=this._getServerInstanceRoot(t).toLowerCase(),e=this._normalizeAGOLorgDomain(e),t=this._normalizeAGOLorgDomain(t),(e=e.substr(e.indexOf(":")))===t.substr(t.indexOf(":"))}_normalizeAGOLorgDomain(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):i.test(e)?e=e.replace(i,"https://devext.arcgis.com"):r.test(e)&&(e=e.replace(r,"https://qaext.arcgis.com")),e}_sanitizeUrl(e){const t=(s.A.request.proxyUrl||"").toLowerCase(),i=t?e.toLowerCase().indexOf(t+"?"):-1;return-1!==i&&(e=e.substring(i+t.length+1)),e=(0,d.S8)(e),(0,d.An)(e).path}_isRESTService(e){return e.includes(this._agsRest)}_isAdminResource(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)}_isServerRsrc(e){return this._isRESTService(e)||this._isAdminResource(e)}_isIdenticalService(e,t){let i=!1;if(this._isRESTService(e)&&this._isRESTService(t)){const r=this._getSuffix(e).toLowerCase(),n=this._getSuffix(t).toLowerCase();if(i=r===n,!i){const e=/(.*)\/(MapServer|FeatureServer|UtilityNetworkServer).*/gi;i=r.replaceAll(e,"$1")===n.replaceAll(e,"$1")}}else this._isAdminResource(e)&&this._isAdminResource(t)?i=!0:this._isServerRsrc(e)||this._isServerRsrc(t)||!this._isPortalDomain(e)||(i=!0);return i}_isPortalDomain(e){const t=new d.s0(e.toLowerCase()),i=this._portalConfig;let r=this._gwDomains.some((e=>e.regex.test(t.uri)));return!r&&i&&(r=this._hasSameServerInstance(this._getServerInstanceRoot(i.restBaseUrl),t.uri)),r||s.A.portalUrl&&(r=(0,d.FX)(t,s.A.portalUrl,!0)),r||(r=this._portals.some((e=>this._hasSameServerInstance(e,t.uri)))),r=r||this._agsPortal.test(t.path),r}_isIdProvider(e,t){let i=-1,r=-1;this._gwDomains.forEach(((n,s)=>{-1===i&&n.regex.test(e)&&(i=s),-1===r&&n.regex.test(t)&&(r=s)}));let n=!1;if(i>-1&&r>-1&&(0===i||4===i?0!==r&&4!==r||(n=!0):1===i?1!==r&&2!==r||(n=!0):2===i?2===r&&(n=!0):3===i&&3===r&&(n=!0)),!n){const i=this.findServerInfo(t),r=i?.owningSystemUrl;r&&R(i)&&this._isPortalDomain(r)&&this._isIdProvider(e,r)&&(n=!0)}return n}_getIdenticalSvcIdx(e,t){let i=-1;for(let r=0;r<t.resources.length;r++){const n=t.resources[r];if(this._isIdenticalService(e,n)){i=r;break}}return i}_getSuffix(e){return e.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")}_getTokenSvcUrl(e){let t,i,r;if(this._isRESTService(e)||this._isAdminResource(e)){const r=this._getServerInstanceRoot(e);return t=r+"/admin/generateToken",i=(0,o.A)(e=r+"/rest/info",{query:{f:"json"}}).then((e=>e.data)),{adminUrl:t,promise:i}}if(this._isPortalDomain(e)){let t="";if(this._gwDomains.some((i=>(i.regex.test(e)&&(t=i.tokenServiceUrl),!!t))),t||this._portals.some((i=>(this._hasSameServerInstance(i,e)&&(t=i+this._gwTokenUrl),!!t))),t||(r=e.toLowerCase().indexOf("/sharing"),-1!==r&&(t=e.substring(0,r)+this._gwTokenUrl)),t||(t=this._getOrigin(e)+this._gwTokenUrl),t){const i=new d.s0(e).port;/^http:\/\//i.test(e)&&"7080"===i&&(t=t.replace(/:7080/i,":7443")),t=t.replace(/http:/i,"https:")}return t}if(e.toLowerCase().includes("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"}_processOAuthResponseParams(e,t,i){const r=t._oAuthCred;if(e.code){const n=r.codeVerifier;return r.codeVerifier=null,r.stateUID=null,r.save(),this._getOAuthToken(i.server,e.code,t.appId,this._getRedirectURI(t,!0),n).then((n=>{const s=new Z({userId:n.username,server:i.server,token:n.access_token,expires:Date.now()+1e3*n.expires_in,ssl:n.ssl,oAuthState:e.state,_oAuthCred:r});return t.userId=s.userId,r.storage=n.persist?D:F,r.refreshToken=n.refresh_token,r.token=null,r.expires=n.refresh_token_expires_in?Date.now()+1e3*n.refresh_token_expires_in:null,r.userId=s.userId,r.ssl=s.ssl,r.save(),s}))}const n=new Z({userId:e.username,server:i.server,token:e.access_token,expires:Date.now()+1e3*Number(e.expires_in),ssl:"true"===e.ssl,oAuthState:e.state,_oAuthCred:r});return t.userId=n.userId,r.storage=e.persist?D:F,r.refreshToken=null,r.token=n.token,r.expires=n.expires,r.userId=n.userId,r.ssl=n.ssl,r.save(),Promise.resolve(n)}_processOAuthPopupParams(e){const t=this._oAuthDfd;if(this._oAuthDfd=null,t)if(clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle?.remove(),e.error){const i="access_denied"===e.error,r=new a.A(i?"identity-manager:user-aborted":"identity-manager:authentication-failed",i?"ABORTED":"OAuth: "+e.error+" - "+e.error_description);t.reject(r)}else this._processOAuthResponseParams(e,t.oinfo_,t.sinfo_).then((e=>{t.resolve(e)})).catch((e=>{t.reject(e)}))}_setOAuthResponseQueryString(e){e&&("?"===e.charAt(0)&&(e=e.substring(1)),this._processOAuthPopupParams((0,d.zf)(e)))}_exchangeToken(e,t,i){return(0,o.A)(`${e}/sharing/rest/oauth2/exchangeToken`,{authMode:"anonymous",method:"post",query:{f:"json",client_id:t,token:i}}).then((e=>e.data.token))}_getPlatformSelf(e,t){return e=e.replace(/^http:/i,"https:"),(0,o.A)(`${e}/sharing/rest/oauth2/platformSelf`,{authMode:"anonymous",headers:{"X-Esri-Auth-Client-Id":t,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},method:"post",query:{f:"json",expiration:30},withCredentials:!0}).then((e=>e.data))}_getPortalSelf(e,t){let i;return this._gwDomains.some((t=>(t.regex.test(e)&&(i=t.customBaseUrl),!!i))),i?Promise.resolve({allSSL:!0,currentVersion:"8.4",customBaseUrl:i,portalMode:"multitenant",supportsOAuth:!0}):(this._appOrigin.startsWith("https:")?e=e.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(t)&&(e=e.replace(/^https:/i,"http:").replace(/:7443/i,":7080")),(0,o.A)(e,{query:{f:"json"},authMode:"anonymous",withCredentials:!0}).then((e=>e.data)))}_doPortalSignIn(e){const t=this._portalConfig,i=window.location.href,r=this.findServerInfo(e);return!(!t&&!this._isPortalDomain(i)||!(r?r.hasPortal||r.owningSystemUrl&&this._isPortalDomain(r.owningSystemUrl):this._isPortalDomain(e))||!(this._isIdProvider(i,e)||t&&(this._hasSameServerInstance(this._getServerInstanceRoot(t.restBaseUrl),e)||this._isIdProvider(t.restBaseUrl,e))||(0,d.FX)(i,e,!0)))}_checkProtocol(e,t,i,r){let n=!0;const s=r?t.adminTokenServiceUrl:t.tokenServiceUrl;return s.trim().toLowerCase().startsWith("https:")&&!this._appOrigin.startsWith("https:")&&(0,d.zs)(s)&&(n=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:e,serverInfo:t}),!n)&&i(new a.A("identity-manager:aborted","Aborted the Sign-In process to avoid sending password over insecure connection.")),n}_enqueue(e,t,i,r,n,s){return r||(r=(0,p.Tw)()),r.resUrl_=e,r.sinfo_=t,r.options_=i,r.admin_=n,r.refresh_=s,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(e),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(r)):this._xoReqs.push(r):this._doSignIn(r),r.promise}_doSignIn(e){this._busy=e,this._rejectOnPersistedPageShow=!1;const t=t=>{const i=e.options_?.resource,r=e.resUrl_,n=e.refresh_;let s=!1;this.credentials.includes(t)||(n&&this.credentials.includes(n)?(n.userId=t.userId,n.token=t.token,n.expires=t.expires,n.validity=t.validity,n.ssl=t.ssl,n.creationTime=t.creationTime,s=!0,t=n):this.credentials.push(t)),t.resources||(t.resources=[]),t.resources.includes(i||r)||t.resources.push(i||r),t.scope=this._isServerRsrc(r)?"server":"portal",t.emitTokenChange();const o=this._soReqs,a={};this._soReqs=[],o.forEach((e=>{if(!this._isIdenticalService(r,e.resUrl_)){const i=this._getSuffix(e.resUrl_);a[i]||(a[i]=!0,t.resources.push(e.resUrl_))}})),e.resolve(t),o.forEach((e=>{this._hasSameServerInstance(this._getServerInstanceRoot(r),e.resUrl_)?e.resolve(t):this._soReqs.push(e)})),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,s||this.emit("credential-create",{credential:t}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},i=t=>{e.reject(t),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},r=(n,s,o,l)=>{const h=e.sinfo_,u=!e.options_||!1!==e.options_.prompt,f=h.hasPortal&&this._findOAuthInfo(e.resUrl_);let y,m;if(n)t(new Z({userId:n,server:h.server,token:o||null,expires:null!=l?Number(l):null,ssl:!!s}));else if(window!==window.parent&&this._appUrlObj.query?.["arcgis-auth-origin"]&&this._appUrlObj.query?.["arcgis-auth-portal"]&&this._hasSameServerInstance(this._getServerInstanceRoot(this._appUrlObj.query["arcgis-auth-portal"]),e.resUrl_)){window.parent.postMessage({type:"arcgis:auth:requestCredential"},this._appUrlObj.query["arcgis-auth-origin"]);const r=(0,c.on)(window,"message",(e=>{e.source===window.parent&&e.data&&("arcgis:auth:credential"===e.data.type?(r.remove(),e.data.credential.expires<Date.now()?i(new a.A("identity-manager:credential-request-failed","Parent application's token has expired.")):t(new Z(e.data.credential))):"arcgis:auth:error"===e.data.type&&(r.remove(),"tokenExpiredError"===e.data.error.name?i(new a.A("identity-manager:credential-request-failed","Parent application's token has expired.")):i(a.A.fromJSON(e.data.error))))}));(0,p.u7)(e.options_?.signal,(()=>{r.remove()}))}else if(f){let n=f._oAuthCred;if(!n){const e=new x(f,D),t=new x(f,F);e.isValid()&&t.isValid()?e.expires>t.expires?(n=e,t.destroy()):(n=t,e.destroy()):n=e.isValid()?e:t,f._oAuthCred=n}if(n.isValid()){y=new Z({userId:n.userId,server:h.server,token:n.token,expires:n.expires,ssl:n.ssl,_oAuthCred:n});const i=f.appId!==n.appId&&this._doPortalSignIn(e.resUrl_);i||n.refreshToken?(e._pendingDfd=n.refreshToken?this._getOAuthToken(h.server,n.refreshToken,n.appId).then((e=>(y.expires=Date.now()+1e3*e.expires_in,y.token=e.access_token,y))):Promise.resolve(y),e._pendingDfd.then((e=>i?this._exchangeToken(e.server,f.appId,e.token).then((t=>(e.token=t,e))).catch((()=>e)):e)).then((e=>{t(e)})).catch((()=>{n?.destroy(),r()}))):t(y)}else if(this._oAuthLocationParams&&this._hasSameServerInstance(f.portalUrl,this._oAuthLocationParams.state.portalUrl)&&(this._oAuthLocationParams.access_token||this._oAuthLocationParams.code&&this._oAuthLocationParams.state.uid===n.stateUID&&n.codeVerifier)){const r=this._oAuthLocationParams;this._oAuthLocationParams=null,e._pendingDfd=this._processOAuthResponseParams(r,f,h).then((e=>{t(e)})).catch(i)}else{const r=()=>{u?e._pendingDfd=this.oAuthSignIn(e.resUrl_,h,f,e.options_).then(t,i):(m=new a.A("identity-manager:not-authenticated","User is not signed in."),i(m))};this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._getPlatformSelf(h.server,f.appId).then((e=>{(0,d.FX)(e.portalUrl,this._appOrigin,!0)?(y=new Z({userId:e.username,server:h.server,expires:Date.now()+1e3*e.expires_in,token:e.token}),t(y)):r()})).catch(r):r()}}else if(u){if(this._checkProtocol(e.resUrl_,h,i,e.admin_)){let r=e.options_;e.admin_&&(r=r||{},r.isAdmin=!0),e._pendingDfd=this.signIn(e.resUrl_,h,r).then(t,i)}}else m=new a.A("identity-manager:not-authenticated","User is not signed in."),i(m)},n=()=>{const r=e.sinfo_,n=r.owningSystemUrl,s=e.options_;let o,a,l,c;if(s&&(o=s.token,a=s.error,l=s.prompt),c=this._findCredential(n,{token:o,resource:e.resUrl_}),!c)for(const e of this.credentials)if(this._isIdProvider(n,e.server)){c=e;break}if(c){const n=this.findCredential(e.resUrl_,c.userId);if(n)t(n);else if(P(r,this._legacyFed)){const e=c.toJSON();e.server=r.server,e.resources=null,t(new Z(e))}else(e._pendingDfd=this.generateToken(this.findServerInfo(c.server),null,{serverUrl:e.resUrl_,token:c.token,signal:e.options_.signal,ssl:c.ssl})).then((i=>{t(new Z({userId:c?.userId,server:r.server,token:i.token,expires:null!=i.expires?Number(i.expires):null,ssl:!!i.ssl,isAdmin:e.admin_,validity:i.validity}))}),i)}else this._busy=null,o&&(e.options_.token=null),(e._pendingDfd=this.getCredential(n.replace(/\/?$/,"/sharing"),{resource:e.resUrl_,owningTenant:r.owningTenant,signal:e.options_.signal,token:o,error:a,prompt:l})).then((()=>{this._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_)}),(t=>{e.resUrl_=e.sinfo_=e.refresh_=null,e.reject(t)}))};this._errbackFunc=i;const s=e.sinfo_.owningSystemUrl,o=this._isServerRsrc(e.resUrl_),l=e.sinfo_._restInfoPms;l?l.promise.then((t=>{const i=e.sinfo_;if(i._restInfoPms){i.adminTokenServiceUrl=i._restInfoPms.adminUrl,i._restInfoPms=null,i.tokenServiceUrl=((0,u.wc)("authInfo.tokenServicesUrl",t)||(0,u.wc)("authInfo.tokenServiceUrl",t)||(0,u.wc)("tokenServiceUrl",t))??null,i.shortLivedTokenValidity=(0,u.wc)("authInfo.shortLivedTokenValidity",t)??null,i.currentVersion=t.currentVersion,i.owningTenant=t.owningTenant;const e=i.owningSystemUrl=t.owningSystemUrl;e&&this._portals.push(e)}o&&i.owningSystemUrl?n():r()}),(()=>{e.sinfo_._restInfoPms=null;const t=new a.A("identity-manager:server-identification-failed","Unknown resource - could not find token service endpoint.");i(t)})):o&&s?n():e.sinfo_._selfReq?e.sinfo_._selfReq.selfDfd.then((t=>{const i={};let r,n,s,o;return t&&(r=t.user?.username,i.username=r,i.allSSL=t.allSSL,n=t.supportsOAuth,o=parseFloat(t.currentVersion),"multitenant"===t.portalMode&&(s=t.customBaseUrl),e.sinfo_.currentVersion=o),e.sinfo_.webTierAuth=!!r,r&&this.normalizeWebTierAuth?this.generateToken(e.sinfo_,null,{ssl:i.allSSL}).catch((()=>null)).then((e=>(i.portalToken=e&&e.token,i.tokenExpiration=e&&e.expires,i))):!r&&n&&o>=4.4&&!this._findOAuthInfo(e.resUrl_)?this._generateOAuthInfo({portalUrl:e.sinfo_.server,customBaseUrl:s,owningTenant:e.sinfo_._selfReq.owningTenant}).catch((()=>null)).then((()=>i)):i})).catch((()=>null)).then((t=>{e.sinfo_._selfReq=null,t?r(t.username,t.allSSL,t.portalToken,t.tokenExpiration):r()})):r()}_generateOAuthInfo(e){let t,i=null,r=e.portalUrl;const n=e.customBaseUrl,s=e.owningTenant,a=!this._defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(a){i=window.location.href;let e=i.indexOf("?");e>-1&&(i=i.slice(0,e)),e=i.search(/\/(apps|home)\//),i=e>-1?i.slice(0,e):null}return a&&i?(this._hasTestedIfAppIsOnPortal=!0,t=(0,o.A)(i+"/sharing/rest",{query:{f:"json"}}).then((()=>{this._defaultOAuthInfo=new I.A({appId:"arcgisonline",popupCallbackUrl:i+"/home/oauth-callback.html"})}))):t=Promise.resolve(),t.then((()=>{if(this._defaultOAuthInfo)return r=r.replace(/^http:/i,"https:"),(0,o.A)(r+"/sharing/rest/oauth2/validateRedirectUri",{query:{accountId:s,client_id:this._defaultOAuthInfo.appId,redirect_uri:(0,d.s2)(this._defaultOAuthInfo.popupCallbackUrl),f:"json"}}).then((e=>{if(e.data.valid){const t=this._defaultOAuthInfo.clone();e.data.urlKey&&n?t.portalUrl="https://"+e.data.urlKey.toLowerCase()+"."+n:t.portalUrl=r,t.popup=window!==window.top||!((0,d.FX)(r,this._appOrigin)||this._gwDomains.some((e=>e.regex.test(r)&&e.regex.test(this._appOrigin)))),this.oAuthInfos.push(t)}}))}))}_doOAuthSignIn(e,t,i,r){const n=i._oAuthCred,s={portalUrl:i.portalUrl};!i.popup&&i.preserveUrlHash&&window.location.hash&&(s.hash=window.location.hash),n.stateUID&&(s.uid=n.stateUID);const o={client_id:i.appId,response_type:n.codeVerifier?"code":"token",state:JSON.stringify(s),expiration:i.expiration,locale:i.locale,redirect_uri:this._getRedirectURI(i,!!n.codeVerifier)};i.forceLogin&&(o.force_login=!0),i.forceUserId&&i.userId&&(o.prepopulatedusername=i.userId),!i.popup&&this._doPortalSignIn(e)&&(o.redirectToUserOrgUrl=!0),n.codeVerifier&&(o.code_challenge=r||n.codeVerifier,o.code_challenge_method=r?"S256":"plain");const l=i.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",h=l+"?"+(0,d.x0)(o);if(i.popup){const e=window.open(h,"esriJSAPIOAuth",i.popupWindowFeatures);if(e)e.focus(),this._oAuthDfd.oAuthWin_=e,this._oAuthIntervalId=setInterval((()=>{if(e.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle.remove();const e=this._oAuthDfd;if(e){const t=new a.A("identity-manager:user-aborted","ABORTED");e.reject(t)}}}),500),this._oAuthOnPopupHandle=(0,c.on)(window,["arcgis:auth:hash","arcgis:auth:location:search"],(e=>{"arcgis:auth:hash"===e.type?this.setOAuthResponseHash(e.detail):this._setOAuthResponseQueryString(e.detail)}));else{const e=new a.A("identity-manager:popup-blocked","ABORTED");this._oAuthDfd.reject(e)}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:o,authorizeUrl:l,resourceUrl:e,serverInfo:t,oAuthInfo:i}):window.location.href=h}_getRedirectURI(e,t){const i=window.location.href.replace(/#.*$/,"");if(e.popup)return(0,d.s2)(e.popupCallbackUrl);if(t){const e=(0,d.An)(i);return e.query&&["code","error","error_description","message_code","persist","state"].forEach((t=>{delete e.query[t]})),(0,d.a6)(e.path,e.query)}return i}}j.prototype.declaredClass="esri.identity.IdentityManagerBase";let Z=class extends l.A.EventedAccessor{constructor(e){super(e),this._oAuthCred=null,this.tokenRefreshBuffer=2,e?._oAuthCred&&(this._oAuthCred=e._oAuthCred)}initialize(){this.resources=this.resources||[],null==this.creationTime&&(this.creationTime=Date.now())}refreshToken(){const e=r.id.findServerInfo(this.server),t=e?.owningSystemUrl,i=!!t&&"server"===this.scope,n=i&&P(e,r.id._legacyFed),s=e.webTierAuth,o=s&&r.id.normalizeWebTierAuth,a=O[this.server],l=a?.[this.userId];let c,h=this.resources&&this.resources[0],u=i?r.id.findServerInfo(t):null,p={username:this.userId,password:l};if(s&&!o)return;i&&!u&&r.id.serverInfos.some((e=>(r.id._isIdProvider(t,e.server)&&(u=e),!!u)));const d=u?r.id.findCredential(u.server,this.userId):null;if(!i||d){if(!n){if(i)c={serverUrl:h,token:d?.token,ssl:d&&d.ssl};else if(o)p=null,c={ssl:this.ssl};else{if(!l){let t;return h&&(h=r.id._sanitizeUrl(h),this._enqueued=1,t=r.id._enqueue(h,e,null,null,this.isAdmin,this),t.then((()=>{this._enqueued=0,this.refreshServerTokens()})).catch((()=>{this._enqueued=0}))),t}this.isAdmin&&(c={isAdmin:!0})}return r.id.generateToken(i?u:e,i?null:p,c).then((e=>{this.token=e.token,this.expires=null!=e.expires?Number(e.expires):null,this.creationTime=Date.now(),this.validity=e.validity,this.emitTokenChange(),this.refreshServerTokens()})).catch((()=>{}))}d?.refreshToken()}}refreshServerTokens(){"portal"===this.scope&&r.id.credentials.forEach((e=>{const t=r.id.findServerInfo(e.server),i=t?.owningSystemUrl;e!==this&&e.userId===this.userId&&i&&"server"===e.scope&&(r.id._hasSameServerInstance(this.server,i)||r.id._isIdProvider(i,this.server))&&(P(t,r.id._legacyFed)?(e.token=this.token,e.expires=this.expires,e.creationTime=this.creationTime,e.validity=this.validity,e.emitTokenChange()):e.refreshToken())}))}emitTokenChange(e){clearTimeout(this._refreshTimer);const t=this.server?r.id.findServerInfo(this.server):null,i=t?.owningSystemUrl,n=i?r.id.findServerInfo(i):null;!1===e||i&&"portal"!==this.scope&&(!n?.webTierAuth||r.id.normalizeWebTierAuth)||null==this.expires&&null==this.validity||this._startRefreshTimer(),this.emit("token-change")}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const e=r.id.credentials.indexOf(this);e>-1&&r.id.credentials.splice(e,1),this.emitTokenChange(),this.emit("destroy")}toJSON(){const e=(0,h.oy)({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),t=this.resources;return t&&t.length>0&&(e.resources=t.slice()),e}_startRefreshTimer(){clearTimeout(this._refreshTimer);const e=6e4*this.tokenRefreshBuffer,t=2**31-1;let i=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();i<0?i=0:i>t&&(i=t),this._refreshTimer=setTimeout(this.refreshToken.bind(this),i>e?i-e:i)}};(0,n._)([(0,f.MZ)()],Z.prototype,"creationTime",void 0),(0,n._)([(0,f.MZ)()],Z.prototype,"expires",void 0),(0,n._)([(0,f.MZ)()],Z.prototype,"isAdmin",void 0),(0,n._)([(0,f.MZ)()],Z.prototype,"oAuthState",void 0),(0,n._)([(0,f.MZ)()],Z.prototype,"resources",void 0),(0,n._)([(0,f.MZ)()],Z.prototype,"scope",void 0),(0,n._)([(0,f.MZ)()],Z.prototype,"server",void 0),(0,n._)([(0,f.MZ)()],Z.prototype,"ssl",void 0),(0,n._)([(0,f.MZ)()],Z.prototype,"token",void 0),(0,n._)([(0,f.MZ)()],Z.prototype,"tokenRefreshBuffer",void 0),(0,n._)([(0,f.MZ)()],Z.prototype,"userId",void 0),(0,n._)([(0,f.MZ)()],Z.prototype,"validity",void 0),Z=(0,n._)([(0,y.$)("esri.identity.Credential")],Z);class z extends j{}z.prototype.declaredClass="esri.identity.IdentityManager";const U=new z;(0,r.Aq)(U)},96295:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var r,n=i(82392),s=i(84977),o=i(81482),a=(i(6273),i(80861),i(67498),i(26325));let l=r=class extends s.oY{constructor(e){super(e),this._oAuthCred=null,this.appId=null,this.authNamespace="/",this.expiration=20160,this.flowType="auto",this.forceLogin=!1,this.forceUserId=!1,this.locale=null,this.minTimeUntilExpiration=30,this.popup=!1,this.popupCallbackUrl="oauth-callback.html",this.popupWindowFeatures="height=490,width=800,resizable,scrollbars,status",this.portalUrl="https://www.arcgis.com",this.preserveUrlHash=!1,this.userId=null}clone(){return r.fromJSON(this.toJSON())}};(0,n._)([(0,o.MZ)({json:{write:!0}})],l.prototype,"appId",void 0),(0,n._)([(0,o.MZ)({json:{write:!0}})],l.prototype,"authNamespace",void 0),(0,n._)([(0,o.MZ)({json:{write:!0}})],l.prototype,"expiration",void 0),(0,n._)([(0,o.MZ)({json:{write:!0}})],l.prototype,"flowType",void 0),(0,n._)([(0,o.MZ)({json:{write:!0}})],l.prototype,"forceLogin",void 0),(0,n._)([(0,o.MZ)({json:{write:!0}})],l.prototype,"forceUserId",void 0),(0,n._)([(0,o.MZ)({json:{write:!0}})],l.prototype,"locale",void 0),(0,n._)([(0,o.MZ)({json:{write:!0}})],l.prototype,"minTimeUntilExpiration",void 0),(0,n._)([(0,o.MZ)({json:{write:!0}})],l.prototype,"popup",void 0),(0,n._)([(0,o.MZ)({json:{write:!0}})],l.prototype,"popupCallbackUrl",void 0),(0,n._)([(0,o.MZ)({json:{write:!0}})],l.prototype,"popupWindowFeatures",void 0),(0,n._)([(0,o.MZ)({json:{write:!0}})],l.prototype,"portalUrl",void 0),(0,n._)([(0,o.MZ)({json:{write:!0}})],l.prototype,"preserveUrlHash",void 0),(0,n._)([(0,o.MZ)({json:{write:!0}})],l.prototype,"userId",void 0),l=r=(0,n._)([(0,a.$)("esri.identity.OAuthInfo")],l);const c=l},39553:(e,t,i)=>{"use strict";i(50189),i(18632),i(13033),i(4631);var r=i(10709),n=i(38116),s=i(62991);async function o(e){if(null!=l.fetchBundleAsset)return l.fetchBundleAsset(e);const t=await(0,n.A)(e,{responseType:"text"});return JSON.parse(t.data)}class a{constructor({base:e="",pattern:t,location:i=new URL(window.location.href)}){let r;r="string"==typeof i?e=>new URL(e,new URL(i,window.location.href)).href:i instanceof URL?e=>new URL(e,i).href:i,this.pattern="string"==typeof t?new RegExp(`^${t}`):t,this.getAssetUrl=r,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)/)?(.*)$`)}fetchMessageBundle(e,t){return async function(e,t,i,n){const a=t.exec(i);if(!a)throw new s.A("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${t}"`);const l=a[1]?`${a[1]}/`:"",c=a[2],h=(0,r.xO)(n),u=`${l}${c}.json`,p=h?`${l}${c}_${h}.json`:u;let d;try{d=await o(e(p))}catch(t){if(p===u)throw new s.A("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:t});try{d=await o(e(u))}catch(e){throw new s.A("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:e})}}return d}(this.getAssetUrl,this.matcher,e,t)}}const l={};var c,h=i(44764);(0,r.ao)((c={pattern:"esri/",location:h.s},new a(c)))},50189:(e,t,i)=>{"use strict";i.d(t,{Ey:()=>I,F8:()=>x,J2:()=>S,Yq:()=>A,_v:()=>b,iS:()=>E,wj:()=>C});var r=i(1817),n=i(4631),s=i(23375),o=i(96285);const a={year:void 0,month:void 0,day:void 0,weekday:void 0},l={hour:void 0,minute:void 0,second:void 0},c={timeZone:s.n$},h={year:"numeric",month:"numeric",day:"numeric"},u={year:"numeric",month:"long",day:"numeric"},p={year:"numeric",month:"short",day:"numeric"},d={year:"numeric",month:"long",weekday:"long",day:"numeric"},f={hour:"numeric",minute:"numeric"},y={...f,second:"numeric"},m={hourCycle:"h23"},g={...f,...m},v={...y,...m},_={"short-date":h,"short-date-short-time":{...h,...f},"short-date-short-time-24":{...h,...g},"short-date-long-time":{...h,...y},"short-date-long-time-24":{...h,...v},"short-date-le":h,"short-date-le-short-time":{...h,...f},"short-date-le-short-time-24":{...h,...g},"short-date-le-long-time":{...h,...y},"short-date-le-long-time-24":{...h,...v},"long-month-day-year":u,"long-month-day-year-short-time":{...u,...f},"long-month-day-year-short-time-24":{...u,...g},"long-month-day-year-long-time":{...u,...y},"long-month-day-year-long-time-24":{...u,...v},"day-short-month-year":p,"day-short-month-year-short-time":{...p,...f},"day-short-month-year-short-time-24":{...p,...g},"day-short-month-year-long-time":{...p,...y},"day-short-month-year-long-time-24":{...p,...v},"long-date":d,"long-date-short-time":{...d,...f},"long-date-short-time-24":{...d,...g},"long-date-long-time":{...d,...y},"long-date-long-time-24":{...d,...v},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":f,"long-time":y},b=(0,r.O)()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),w={ar:"ar-u-nu-latn-ca-gregory"};let M=new WeakMap;const T=_["short-date-short-time"];function S(e){return _[e]}function A(e,t=T){return function(e){let t=M.get(e);if(!t){const i=(0,n.JK)(),r=w[i]||i,o=C(e.timeZone??s.qU),a={...e,timeZone:o};t=new Intl.DateTimeFormat(r,a),M.set(e,t)}return t}(t).format(e)}function E(e,t=T){return A(new Date(e),{...t,...c,...l})}function x(e,t=T){return A(new Date(`1970-01-01T${e}Z`),{...t,...c,...a})}function I(e,t=T){if(t.timeZone)return A(new Date(e),t);const i=o.c9.fromISO(e,{setZone:!0}),r=(0,n.JK)(),a=w[r]??r,l=0===i.offset?s.n$:t.timeZone,c={...t,timeZone:l};return i.toLocaleString(c,{locale:a})}function C(e){switch(e){case s.qU:return s.N5;case s.L5:return s.n$;default:return e}}(0,n.Ml)((()=>{M=new WeakMap}))},4631:(e,t,i)=>{"use strict";i.d(t,{JK:()=>a,Ml:()=>p,Z0:()=>l,oQ:()=>h});var r=i(70214);let n;const s=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale;function o(){return s??globalThis.navigator?.language??"en"}function a(){return void 0===n&&(n=o()),n}function l(e=a()){const t=/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(e);return t?.[1].toLowerCase()}const c=[];function h(e){return c.push(e),(0,r.hA)((()=>c.splice(c.indexOf(e),1)))}const u=[];function p(e){return u.push(e),(0,r.hA)((()=>c.splice(u.indexOf(e),1)))}globalThis.addEventListener?.("languagechange",(function(){const e=o();n!==e&&(n=e,[...u].forEach((t=>{t.call(null,e)})),[...c].forEach((t=>{t.call(null,e)})))}))},10709:(e,t,i)=>{"use strict";i.d(t,{ao:()=>d,ud:()=>f,xO:()=>y});var r=i(62991),n=i(70214),s=i(37623),o=i(4631);const a=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,l={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function c(e){return e in l}const h=[],u=new Map;function p(e){for(const t of u.keys())m(e.pattern,t)&&u.delete(t)}function d(e){return h.includes(e)||(p(e),h.unshift(e)),(0,n.hA)((()=>{const t=h.indexOf(e);t>-1&&(h.splice(t,1),p(e))}))}async function f(e){const t=(0,o.JK)();u.has(e)||u.set(e,async function(e,t){const i=[];for(const r of h)if(m(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(e){i.push(e)}if(i.length)throw new r.A("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:i});throw new r.A("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}(e,t));const i=u.get(e);return i&&await g.add(i),i}function y(e){if(!a.test(e))return null;const t=a.exec(e);if(null===t)return null;const[,i,r]=t,n=i+(r?"-"+r.toUpperCase():"");return c(n)?n:c(i)?i:null}function m(e,t){return"string"==typeof e?t.startsWith(e):e.test(t)}(0,o.Ml)((()=>{u.clear()}));const g=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then((()=>this._decrease()),(()=>this._decrease())),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=(0,s.Tw)())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)}}},18632:(e,t,i)=>{"use strict";i.d(t,{ZV:()=>l,yx:()=>a});var r=i(4631);const n={ar:"ar-u-nu-latn"};let s=new WeakMap,o={};function a(e={}){const t={};return null!=e.digitSeparator&&(t.useGrouping=e.digitSeparator),null!=e.places&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function l(e,t){return Object.is(e,-0)&&(e=0),function(e){const t=e||o;if(!s.has(t)){const i=(0,r.JK)(),o=n[(0,r.JK)()]||i;s.set(t,new Intl.NumberFormat(o,e))}return s.get(t)}(t).format(e)}(0,r.Ml)((()=>{s=new WeakMap,o={}}))},13033:(e,t,i)=>{"use strict";i.d(t,{V:()=>c});var r=i(80861),n=i(21750),s=i(21332),o=i(50189),a=i(18632);const l=()=>r.A.getLogger("esri.intl.substitute");function c(e,t,i={}){const{format:r={}}=i;return(0,s.HC)(e,(e=>function(e,t,i){let r,s;const o=e.indexOf(":");if(-1===o?r=e.trim():(r=e.slice(0,o).trim(),s=e.slice(o+1).trim()),!r)return"";const a=(0,n.wc)(r,t);if(null==a)return"";const l=(s?i?.[s]:null)??i?.[r];return l?h(a,l):s?u(a,s):p(a)}(e,t,r)))}function h(e,t){switch(t.type){case"date":return(0,o.Yq)(e,t.intlOptions);case"number":return(0,a.ZV)(e,t.intlOptions);default:return l().warn("missing format descriptor for key {key}"),p(e)}}function u(e,t){switch(t.toLowerCase()){case"dateformat":return(0,o.Yq)(e);case"numberformat":return(0,a.ZV)(e);default:return l().warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?(0,o.Yq)(e):/^numberformat/i.test(t)?(0,a.ZV)(e):p(e)}}function p(e){switch(typeof e){case"string":return e;case"number":return(0,a.ZV)(e);case"boolean":return""+e;default:return e instanceof Date?(0,o.Yq)(e):""}}},6480:(e,t,i)=>{"use strict";i.d(t,{Aq:()=>l,Y3:()=>c,id:()=>o,ol:()=>a,rE:()=>s});var r=i(6273),n=i(19759);Symbol.dispose??=Symbol("Symbol.dispose"),Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");const s="4.29";let o,a=s;function l(e){o=e}function c(e){const t=o?.findCredential(e);return t?.token?(0,n.rs)(e,"token",t.token):e}a="4.29.10",(0,r.A)("host-webworker")},85049:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>Re});var r=i(82392),n=i(20879),s=(i(42957),i(8499),i(72502),i(2394),i(52721),i(46243),i(79645),i(1851),i(29221)),o=i(83015),a=i(38116),l=i(3438),c=i(14755),h=i(58842),u=i(62991),p=i(15565),d=i(80861),f=i(67214),y=i(21750),m=i(37623),g=i(80189),v=i(19759),_=i(81482),b=i(77380),w=i(25376),M=i(26325),T=i(48524),S=i(63910),A=i(82495),E=i(44153),x=i(45449),I=(i(3313),i(20857)),C=i(6273),k=i(11965),N=i(71004),L=i(73462),O=i(8636),R=(i(67498),i(50078)),P=i(29323),D=i(11378),F=i(74704),j=i(8e3),Z=i(65648),z=i(54483);let U=0,V=class extends(k.A.LoadableMixin((0,N.g)(h.A))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const t=null!=e?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}get _workerGeometryType(){const e=this.layer?.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then((()=>this._applyEdits(e)))}openPorts(){return this.load().then((()=>this._connection.openPorts()))}async queryFeatures(e,t={}){await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);(0,D.q)(e,this.layer.spatialReference,i);const r=F.A.fromJSON(i);if(!this._requiresClientGraphicMapping())return r;const n=this.layer.objectIdField;for(const e of r.features){const t=e.attributes[n],i=this._idToClientGraphic.get(t);i&&(e.geometry=i.geometry)}return r.geometryType=this.layer.geometryType,r}async queryFeaturesJSON(e,t={}){if(this._requiresClientGraphicMapping())throw new u.A("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);return(0,D.q)(e,this.layer.spatialReference,i),i}queryFeatureCount(e,t={}){return this.load(t).then((()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t)))}queryObjectIds(e,t={}){return this.load(t).then((()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t)))}queryExtent(e,t={}){return this.load(t).then((()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t))).then((e=>({count:e.count,extent:j.A.fromJSON(e.extent)})))}querySnapping(e,t={}){return this.load(t).then((()=>this._connection.invoke("querySnapping",e,t)))}async _applyEdits(e){if(!this._connection)throw new u.A("feature-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField;let i=null;const r=[],n=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const s=e=>"objectId"in e&&null!=e.objectId?e.objectId:"attributes"in e&&null!=e.attributes[t]?e.attributes[t]:null;if(e.addFeatures&&(i=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const t of e.deleteFeatures){const e=s(t);null!=e&&r.push(e)}const o=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures)for(const t of e.updateFeatures)if(n.push(this._serializeFeature(t)),o){const e=s(t);null!=e&&o.set(e,t)}(0,P.u)(i?i.features:null,n,this.layer.spatialReference);const{fullExtent:a,featureEditResults:l}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:n,deletes:r});return this.fullExtent=a,i&&i.finish(l.uidToObjectId),this._updateClientGraphicIds(o,l),this._createEditsResult(l)}async _prepareClientMapping(e,t){if("mesh"!==this._layerOrSourceGeometryType||null==e)return;const i=[];for(const{geometry:r}of e)null==r||"mesh"!==r.type||r.hasExtent||r.loaded||i.push(r.load({signal:t}));i.length&&await Promise.all(i)}_updateClientGraphicIds(e,t){if(this._idToClientGraphic){if(e)for(const i of t.updateResults){if(!i.success)continue;const t=e.get(i.objectId);null!=t&&this._addIdToClientGraphic(t)}for(const e of t.deleteResults)e.success&&this._idToClientGraphic.delete(e.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new u.A("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_prepareAddFeatures(e){const t=new Map,i=new Array(e.length);let r=null;for(let n=0;n<e.length;n++){const s=e[n],o=this._serializeFeature(s);r||null==s.geometry||(r=s.geometry.type),i[n]=o,t.set(`${o.uid}`,s)}const n=this;return{features:i,inferredGeometryType:r,finish(e){const i=n.sourceJSON.objectIdField;for(const r in e){const s=e[r],o=t.get(r);o&&(o.attributes||(o.attributes={}),-1===s?delete o.attributes[i]:o.attributes[i]=s,n._addIdToClientGraphic(o))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const t=this.sourceJSON.objectIdField,i=e.attributes?.[t];null!=i&&this._idToClientGraphic.set(i,e)}get _layerOrSourceGeometryType(){return this.layer?.geometryType??this.sourceJSON?.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return"mesh"===e||"multipatch"===e||"extent"===e}_serializeFeature(e){const{attributes:t}=e,i=this._geometryForSerialization(e),r=(U++).toString();return i?{uid:r,geometry:i.toJSON(),attributes:t}:{uid:r,attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return null==t?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?Z.A.fromExtent(t.extent):null:t}async _startWorker(e){this._connection=await(0,L.ho)("MemorySourceWorker",{strategy:(0,C.A)("feature-layers-workers")?"dedicated":"local",signal:e,registryTarget:this});const{fields:t,spatialReference:i,objectIdField:r,hasM:n,hasZ:s,timeInfo:o,dateFieldsTimeZone:a}=this.layer,l="defaults"===this.layer.originOf("spatialReference");await this._prepareClientMapping(this.items,e);const c=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",(e=>{d.A.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),e.preventDefault()})));const h={features:c.features,fields:t?.map((e=>e.toJSON())),geometryType:z.Y.toJSON(this._workerGeometryType),hasM:"mesh"!==this._layerOrSourceGeometryType&&n,hasZ:"mesh"===this._layerOrSourceGeometryType||s,objectIdField:r,spatialReference:l?null:i&&i.toJSON(),timeInfo:o?.toJSON()??null,dateFieldsTimeZone:a},u=await this._connection.invoke("load",h,{signal:e});for(const e of u.warnings)d.A.getLogger(this.layer).warn("#load()",`${e.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:e});u.featureErrors.length&&d.A.getLogger(this.layer).warn("#load()",`Encountered ${u.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:u.featureErrors});const p=u.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(c.inferredGeometryType)&&(p.geometryType=z.Y.toJSON(c.inferredGeometryType)),this.sourceJSON=p,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),c.finish(u.assignedObjectIds)}};(0,r._)([(0,R.u)({Type:I.A,ensureType:(0,O.dp)(I.A)})],V.prototype,"itemType",void 0),(0,r._)([(0,_.MZ)()],V.prototype,"type",void 0),(0,r._)([(0,_.MZ)({constructOnly:!0})],V.prototype,"layer",void 0),(0,r._)([(0,_.MZ)({readOnly:!0})],V.prototype,"_workerGeometryType",null),(0,r._)([(0,_.MZ)()],V.prototype,"sourceJSON",void 0),V=(0,r._)([(0,M.$)("esri.layers.graphics.sources.MemorySource")],V);var G=i(94763),B=i(30179),$=i(20923),H=i(27303),q=i(88940),W=i(23091),K=i(58637),Y=i(36576),J=i(4648),X=i(87917),Q=i(60368),ee=i(73783);let te=class extends ee.A{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};(0,r._)([(0,_.MZ)()],te.prototype,"updating",void 0),(0,r._)([(0,_.MZ)()],te.prototype,"status",void 0),te=(0,r._)([(0,M.$)("esri.layers.support.PublishingInfo")],te);const ie=te,re="esri.layers.mixins.PublishableLayer",ne=Symbol(re),se=e=>{var t;let i=class extends e{constructor(){super(...arguments),this[t]=!0}get publishingInfo(){if(this.destroyed)return null;const e=this._get("publishingInfo");if(e)return e;const t=new ie;return this._checkPublishingStatus(t),t}_checkPublishingStatus(e){let t=0;const i=async n=>{let s;e.updating=!0;try{s=await this.fetchPublishingStatus()}catch(e){s="unavailable"}"published"!==s&&"unavailable"!==s||("publishing"===e.status&&this.refresh(),r.remove()),e.status=s,e.updating=!1,r.removed||(t=setTimeout(i,n,n+125))},r={removed:!1,remove(){this.removed=!0,clearTimeout(t)}};this.when().catch((()=>r.remove())),i(250),this.addHandles(r)}};return t=ne,(0,r._)([(0,_.MZ)({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=(0,r._)([(0,M.$)(re)],i),i};var oe=i(51177),ae=i(22111),le=i(2960),ce=i(63457),he=i(41332),ue=i(16948),pe=i(84700),de=i(52202),fe=i(83693),ye=i(46227),me=i(15724),ge=i(6488),ve=i(76456),_e=i(72523),be=i(23123),we=i(17308),Me=i(99650),Te=i(10591),Se=i(83856),Ae=i(95610),Ee=i(29759),xe=i(93802);const Ie="FeatureLayer";function Ce(e,t){return new u.A("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function ke(e){return e&&e instanceof h.A}const Ne=(0,fe.p)();function Le(e,t,i){const r=!!i?.writeLayerSchema;return{enabled:r,ignoreOrigin:r}}let Oe=class extends((0,K.j)((0,Y.J)((0,W.F)(se((0,q.w6)((0,$.d)((0,X.f)((0,le.e)((0,ae.j)((0,oe.J)((0,B.b)((0,J.q)((0,Q.A)((0,f.P)((0,H.d)((0,G.p)((0,c.O)(x.A)))))))))))))))))){constructor(...e){super(...e),this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=E.A.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=(0,m.sg)((async(e,t,r)=>{const{save:n,saveAs:s}=await i.e(900).then(i.bind(i,10900));switch(e){case Ee.X.SAVE:return n(this,t);case Ee.X.SAVE_AS:return s(this,r,t)}}))}destroy(){this.source?.destroy()}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){const t=null!=e?e.signal:null;if(this.portalItem?.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(t).then((e=>this.initLayerProperties(e)))),Promise.resolve(this);const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(m.QP).then((async()=>{if(this.url&&null==this.layerId&&/FeatureServer|MapServer\/*$/i.test(this.url)){const e=await this._fetchFirstValidLayerId(t);null!=e&&(this.layerId=e)}if(!this.url&&!this._hasMemorySource())throw new u.A("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(t))})).then((()=>(0,ue.VA)(this,"load",e)));return this.addResolvingPromise(i),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,(0,ve.S)(t,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities?.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,i){return this._readEditingEnabled(t,!0,i)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,i,r){this._writeEditingEnabled(e,t,!0,r)}get effectiveEditingEnabled(){return(0,ue.C$)(this)}readIsTable(e,t){return"Table"===(t=t?.layerDefinition??t).type||!t.geometryType}writeIsTable(e,t,i,r){r?.writeLayerSchema&&(0,y.sM)(i,e?"Table":"Feature Layer",t)}readGlobalIdField(e,t){return(0,ue.jD)(t.layerDefinition||t)}readObjectIdField(e,t){return(0,ue.Zm)(t.layerDefinition||t)}get parsedUrl(){const e=(0,v.An)(this.url);return null!=e&&(null!=this.dynamicDataSource?e.path=(0,v.fj)(e.path,"dynamicLayer"):null!=this.layerId&&(e.path=(0,v.fj)(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){(0,ye.yp)(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,i){t=t.layerDefinition||t;const r=t.drawingInfo?.renderer;if(r){const e=(0,s.L)(r,t,i)??void 0;return e||d.A.getLogger(this).error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:i}),e}return(0,ue.PD)(t,i)}set source(e){const t=this._get("source");t!==e&&(ke(t)&&this._resetMemorySource(t),ke(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof h.A?new V({layer:this,items:e}):e:null}readSource(e,t){const i=F.A.fromJSON(t.featureSet);return new V({layer:this,items:i?.features??[]})}readTemplates(e,t){const i=t.editFieldsInfo,r=i?.creatorField,n=i?.editorField;return e=e?.map((e=>pe.A.fromJSON(e))),this._fixTemplates(e,r),this._fixTemplates(e,n),e}readTitle(e,t){const i=t.layerDefinition?.name??t.name,r=t.title||t.layerDefinition?.title;if(i){const e=this.portalItem?.title;if("item-title"===this.sublayerTitleMode)return this.url?(0,ce.yG)(this.url,i):i;let t=i;if(!t&&this.url){const e=(0,ce.qg)(this.url);null!=e&&(t=e.title)}if(!t)return;return"item-title-and-service-name"===this.sublayerTitleMode&&e&&e!==t&&(t=e+" - "+t),(0,ce.cr)(t)}if("item-title"===this.sublayerTitleMode&&r)return r}readTitleFromWebMap(e,t){return t.title||t.layerDefinition?.name}readTypeIdField(e,t){let i=(t=t.layerDefinition||t).typeIdField;if(i&&t.fields){i=i.toLowerCase();const e=t.fields.find((e=>e.name.toLowerCase()===i));e&&(i=e.name)}return i}readTypes(e,t){e=(t=t.layerDefinition||t).types;const i=t.editFieldsInfo,r=i?.creatorField,n=i?.editorField;return e?.map((e=>(e=de.A.fromJSON(e),this._fixTemplates(e.templates,r),this._fixTemplates(e.templates,n),e)))}readVisible(e,t){return null!=t.layerDefinition?.defaultVisibility?!!t.layerDefinition.defaultVisibility:null!=t.visibility?!!t.visibility:void 0}async addAttachment(e,t){return(0,ue.Xl)(this,e,t,Ie)}async updateAttachment(e,t,i){return(0,ue.bt)(this,e,t,i,Ie)}async applyEdits(e,t){return(0,ue.ct)(this,e,t)}async uploadAssets(e,t){return(0,ue.rn)(this,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return(0,Ae.tn)(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:t}=await(0,m.qr)(Promise.all([i.e(500),i.e(6263),i.e(2886)]).then(i.bind(i,52886)),e);return new t({layer:this}).load({signal:e})}createQuery(){const e=(0,ue.VZ)(this);e.dynamicDataSource=this.dynamicDataSource;const t=null!=this.subtypeCode?`${this.subtypeField} = ${this.subtypeCode}`:null,i=(0,g.m)(this.definitionExpression,t);return e.where=i||"1=1",e}async deleteAttachments(e,t){return(0,ue.mm)(this,e,t,Ie)}async fetchRecomputedExtents(e){return(0,ue.WP)(this,e,Ie)}getFeatureType(e){const{typeIdField:t,types:i}=this;if(!t||!e)return null;const r=e.attributes?e.attributes[t]:void 0;if(null==r)return null;let n=null;return i?.some((e=>{const{id:t}=e;return null!=t&&(t.toString()===r.toString()&&(n=e),!!n)})),n}getFieldDomain(e,t){const i=t?.feature,r=this.getFeatureType(i);if(r){const t=r.domains&&r.domains[e];if(t&&"inherited"!==t.type)return t}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}async queryAttachments(e,t){return(0,ue.lV)(this,e,t,Ie)}async queryFeatures(e,t){const i=await this.load(),r=await i.source.queryFeatures(Te.A.from(e)??i.createQuery(),t);if(r?.features)for(const e of r.features)e.layer=e.sourceLayer=i;return r}async queryObjectIds(e,t){return(0,ue.sg)(this,e,t,Ie)}async queryFeatureCount(e,t){return(0,ue.Ye)(this,e,t,Ie)}async queryExtent(e,t){return(0,ue.B5)(this,e,t,Ie)}async queryRelatedFeatures(e,t){return(0,ue.hM)(this,e,t,Ie)}async queryRelatedFeaturesCount(e,t){return(0,ue.S2)(this,e,t,Ie)}async queryTopFeatures(e,t){const{source:i,capabilities:r}=await this.load();if(!i.queryTopFeatures||!r?.query?.supportsTopFeaturesQuery)throw new u.A(Ie,"Layer source does not support queryTopFeatures capability");const n=await i.queryTopFeatures(Se.A.from(e),t);if(n?.features)for(const e of n.features)e.layer=e.sourceLayer=this;return n}async queryTopObjectIds(e,t){const{source:i,capabilities:r}=await this.load();if(!i.queryTopObjectIds||!r?.query.supportsTopFeaturesQuery)throw new u.A(Ie,"Layer source does not support queryTopObjectIds capability");return i.queryTopObjectIds(Se.A.from(e),t)}async queryTopFeaturesExtent(e,t){const{source:i,capabilities:r}=await this.load();if(!i.queryTopExtents||!r?.query?.supportsTopFeaturesQuery)throw new u.A(Ie,"Layer source does not support queryTopExtents capability");return i.queryTopExtents(Se.A.from(e),t)}async queryTopFeatureCount(e,t){const{source:i,capabilities:r}=await this.load();if(!i.queryTopCount||!r?.query?.supportsTopFeaturesQuery)throw new u.A(Ie,"Layer source does not support queryFeatureCount capability");return i.queryTopCount(Se.A.from(e),t)}read(e,t){const i=e.featureCollection;if((i||"Feature Collection"===e.type)&&(this.resourceInfo=e),i){const e=i.layers;e&&1===e.length&&(super.read(e[0],t),null!=i.showLegend&&super.read({showLegend:i.showLegend},t))}super.read(e,t),t&&"service"===t.origin&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,t){t={...t,origin:t?.origin??void 0,writeLayerSchema:t?.writeLayerSchema??this._hasMemorySource()};const{origin:i,layerContainerType:r,messages:n}=t;if(this.dynamicDataSource)return n?.push(Ce(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(("web-map"===i||"web-scene"===i)&&"tables"!==r)return n?.push(Ce(this,`a table source can only be written to tables, not ${r}`)),null;if(this._hasMemorySource())return n?.push(Ce(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&("web-map"===i||"web-scene"===i)&&"tables"===r)return n?.push(Ce(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new u.A(Ie,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&("memory"===this.source?.type||(0,be.D)(this,e))}async save(e){return this._debouncedSaveOperations(Ee.X.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(Ee.X.SAVE_AS,t,e)}_readEditingEnabled(e,t,i){let r=e.layerDefinition?.capabilities;return r?this._hasEditingCapability(r):(r=e.capabilities,t&&"web-map"===i?.origin&&!this._hasMemorySource()&&r?this._hasEditingCapability(r):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map((e=>e.trim())).includes("editing")}_writeEditingEnabled(e,t,i,r){if(!e){const e=this.capabilities?.operations?.supportsSync?"Query,Sync":"Query";(0,y.sM)("layerDefinition.capabilities",e,t),i&&!r?.writeLayerSchema&&(t.capabilities=e)}}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstValidLayerId(e){return(0,a.A)(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then((e=>{const t=e.data;if(t)return this.findFirstValidLayerId(t)}))}async initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),(0,ye.yp)(this.renderer,this.fieldsIndex),(0,ye.sv)(this.timeInfo,this.fieldsIndex),(0,Me.L)(this,{origin:"service"})}async hasDataChanged(){return(0,ue.jp)(this)}async fetchPublishingStatus(){const e=this.source;return e?.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){const e=this.parsedUrl?.path??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||-1!==e.search(/\/FeatureServer\//i)||this.fields?.some((e=>"geometry"===e.type))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach((e=>{const i=e.prototype?.attributes;i&&t&&delete i[t]}))}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new u.A("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new u.A("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach((e=>{e.layer=this,e.sourceLayer=this})),this.addHandles([e.on("after-add",(e=>{e.item.layer=this,e.item.sourceLayer=this})),e.on("after-remove",(e=>{e.item.layer=null,e.item.sourceLayer=null}))],"fl-source")}_resetMemorySource(e){e.forEach((e=>{e.layer=null,e.sourceLayer=null})),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};(0,r._)([(0,w.w)("service","capabilities")],Oe.prototype,"readCapabilities",null),(0,r._)([(0,_.MZ)({json:{origins:{"web-scene":{write:!1}},write:!0}})],Oe.prototype,"charts",void 0),(0,r._)([(0,_.MZ)({readOnly:!0})],Oe.prototype,"createQueryVersion",null),(0,r._)([(0,_.MZ)({json:{read:{source:"layerDefinition.copyrightText"}}})],Oe.prototype,"copyright",void 0),(0,r._)([(0,_.MZ)({json:{read:{source:"layerDefinition.displayField"}}})],Oe.prototype,"displayField",void 0),(0,r._)([(0,_.MZ)({types:l.Es,readOnly:!0})],Oe.prototype,"defaultSymbol",void 0),(0,r._)([(0,_.MZ)({type:we.L})],Oe.prototype,"dynamicDataSource",void 0),(0,r._)([(0,_.MZ)({type:Boolean})],Oe.prototype,"editingEnabled",null),(0,r._)([(0,w.w)(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Oe.prototype,"readEditingEnabled",null),(0,r._)([(0,w.w)("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Oe.prototype,"readEditingEnabledFromWebMap",null),(0,r._)([(0,T.K)(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Oe.prototype,"writeEditingEnabled",null),(0,r._)([(0,T.K)("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Oe.prototype,"writeEditingEnabledToWebMap",null),(0,r._)([(0,_.MZ)({readOnly:!0})],Oe.prototype,"effectiveEditingEnabled",null),(0,r._)([(0,_.MZ)({...Ne.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:Le}}}}})],Oe.prototype,"fields",void 0),(0,r._)([(0,_.MZ)(Ne.fieldsIndex)],Oe.prototype,"fieldsIndex",void 0),(0,r._)([(0,_.MZ)({type:A.A,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Oe.prototype,"formTemplate",void 0),(0,r._)([(0,_.MZ)({json:{read:{source:"layerDefinition.extent"}}})],Oe.prototype,"fullExtent",void 0),(0,r._)([(0,_.MZ)({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:Le,writer(e,t,i){const r=e?ue.iX.toJSON(e):null;r&&(0,y.sM)(i,r,t)}}}},read:{source:"layerDefinition.geometryType",reader:ue.iX.read}}})],Oe.prototype,"geometryType",void 0),(0,r._)([(0,_.MZ)({json:{read:{source:"layerDefinition.hasM"}}})],Oe.prototype,"hasM",void 0),(0,r._)([(0,_.MZ)({json:{read:{source:"layerDefinition.hasZ"}}})],Oe.prototype,"hasZ",void 0),(0,r._)([(0,_.MZ)(he.id)],Oe.prototype,"id",void 0),(0,r._)([(0,_.MZ)({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Oe.prototype,"infoFor3D",void 0),(0,r._)([(0,_.MZ)({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Oe.prototype,"isTable",void 0),(0,r._)([(0,w.w)("service","isTable",["type","geometryType"]),(0,w.w)("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Oe.prototype,"readIsTable",null),(0,r._)([(0,T.K)("web-map","isTable")],Oe.prototype,"writeIsTable",null),(0,r._)([(0,_.MZ)(he.kF)],Oe.prototype,"labelsVisible",void 0),(0,r._)([(0,_.MZ)({type:[me.A],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:ge.w,write:!1},"web-scene":{name:"layerDefinition.drawingInfo.labelingInfo",read:ge.w,write:{enabled:!0,layerContainerTypes:S.K}}},name:"layerDefinition.drawingInfo.labelingInfo",read:ge.w,write:!0}})],Oe.prototype,"labelingInfo",void 0),(0,r._)([(0,_.MZ)((()=>{const e=(0,p.o8)(he.Ih);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,t,i){(0,y.sM)(i,(0,xe.p)(e),t)}}},e})())],Oe.prototype,"opacity",void 0),(0,r._)([(0,_.MZ)(he.fV)],Oe.prototype,"legendEnabled",void 0),(0,r._)([(0,_.MZ)({type:["show","hide"],json:(()=>{const e=(0,p.o8)(he.C1.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],Oe.prototype,"listMode",void 0),(0,r._)([(0,w.w)("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Oe.prototype,"readGlobalIdField",null),(0,r._)([(0,_.MZ)({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:Le}}}}})],Oe.prototype,"objectIdField",void 0),(0,r._)([(0,w.w)("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Oe.prototype,"readObjectIdField",null),(0,r._)([(0,_.MZ)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Oe.prototype,"operationalLayerType",void 0),(0,r._)([(0,_.MZ)(Ne.outFields)],Oe.prototype,"outFields",void 0),(0,r._)([(0,_.MZ)({readOnly:!0})],Oe.prototype,"parsedUrl",null),(0,r._)([(0,_.MZ)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Oe.prototype,"path",void 0),(0,r._)([(0,_.MZ)(he.M6)],Oe.prototype,"popupEnabled",void 0),(0,r._)([(0,_.MZ)({type:n.A,json:{name:"popupInfo",write:!0}})],Oe.prototype,"popupTemplate",void 0),(0,r._)([(0,_.MZ)({readOnly:!0})],Oe.prototype,"defaultPopupTemplate",null),(0,r._)([(0,_.MZ)({types:o.H,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:o.X,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:S.K,overridePolicy:(e,t,i)=>({ignoreOrigin:i?.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,i)=>({ignoreOrigin:i?.writeLayerSchema})}}})],Oe.prototype,"renderer",null),(0,r._)([(0,w.w)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),(0,w.w)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Oe.prototype,"readRenderer",null),(0,r._)([(0,_.MZ)()],Oe.prototype,"resourceInfo",void 0),(0,r._)([(0,_.MZ)((()=>{const e=(0,p.o8)(he.PY);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],Oe.prototype,"screenSizePerspectiveEnabled",void 0),(0,r._)([(0,_.MZ)({clonable:!1})],Oe.prototype,"source",null),(0,r._)([(0,b.w)("source")],Oe.prototype,"castSource",null),(0,r._)([(0,w.w)("portal-item","source",["featureSet"]),(0,w.w)("web-map","source",["featureSet"])],Oe.prototype,"readSource",null),(0,r._)([(0,_.MZ)({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Oe.prototype,"spatialReference",void 0),(0,r._)([(0,_.MZ)({type:Number})],Oe.prototype,"subtypeCode",void 0),(0,r._)([(0,_.MZ)({type:[pe.A]})],Oe.prototype,"templates",void 0),(0,r._)([(0,w.w)("templates",["editFieldsInfo","creatorField","editorField","templates"])],Oe.prototype,"readTemplates",null),(0,r._)([(0,_.MZ)({type:_e.A})],Oe.prototype,"timeInfo",void 0),(0,r._)([(0,_.MZ)()],Oe.prototype,"title",void 0),(0,r._)([(0,w.w)("service","title",["name"]),(0,w.w)("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Oe.prototype,"readTitle",null),(0,r._)([(0,w.w)("web-map","title",["layerDefinition.name","title"])],Oe.prototype,"readTitleFromWebMap",null),(0,r._)([(0,_.MZ)({type:String})],Oe.prototype,"sublayerTitleMode",void 0),(0,r._)([(0,_.MZ)({json:{read:!1}})],Oe.prototype,"type",void 0),(0,r._)([(0,_.MZ)({type:String})],Oe.prototype,"typeIdField",void 0),(0,r._)([(0,w.w)("service","typeIdField"),(0,w.w)("typeIdField",["layerDefinition.typeIdField"])],Oe.prototype,"readTypeIdField",null),(0,r._)([(0,_.MZ)({type:[de.A]})],Oe.prototype,"types",void 0),(0,r._)([(0,w.w)("service","types",["types"]),(0,w.w)("types",["layerDefinition.types"])],Oe.prototype,"readTypes",null),(0,r._)([(0,_.MZ)({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Oe.prototype,"visible",void 0),(0,r._)([(0,w.w)("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Oe.prototype,"readVisible",null),Oe=(0,r._)([(0,M.$)("esri.layers.FeatureLayer")],Oe);const Re=Oe},11682:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var r=i(82392),n=i(81482),s=(i(6273),i(80861),i(67498),i(26325)),o=i(15909),a=i(45449),l=i(20923),c=i(22111),h=i(52796),u=i(44223);let p=class extends((0,l.d)((0,c.j)(a.A))){constructor(e){super(e),this.elevationInfo=null,this.graphics=new h.Y,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};(0,r._)([(0,n.MZ)({type:u.A})],p.prototype,"elevationInfo",void 0),(0,r._)([(0,n.MZ)((0,o.C)(h.Y,"graphics"))],p.prototype,"graphics",void 0),(0,r._)([(0,n.MZ)({type:["show","hide"]})],p.prototype,"listMode",void 0),(0,r._)([(0,n.MZ)()],p.prototype,"screenSizePerspectiveEnabled",void 0),(0,r._)([(0,n.MZ)({readOnly:!0})],p.prototype,"type",void 0),(0,r._)([(0,n.MZ)({constructOnly:!0})],p.prototype,"internal",void 0),p=(0,r._)([(0,s.$)("esri.layers.GraphicsLayer")],p);const d=p},45449:(e,t,i)=>{"use strict";i.d(t,{A:()=>_});var r=i(82392),n=(i(3313),i(38116)),s=i(62991),o=i(57888),a=i(23377),l=i(11965),c=i(80861),h=i(37623),u=i(19759),p=i(81482),d=(i(6273),i(67498),i(26325)),f=i(32083),y=i(8e3),m=i(44153);let g=0,v=class extends(o.A.EventedMixin((0,a.sA)(l.A))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new y.A(-180,-90,180,90,m.A.WGS84),this.id=Date.now().toString(16)+"-layer-"+g++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=m.A.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t="string"==typeof e?{url:e}:e;return(await i.e(653).then(i.bind(i,653))).fromUrl(t)}static fromPortalItem(e){return async function(e){const t="portalItem"in e?e:{portalItem:e},{fromItem:r}=await i.e(5302).then(i.bind(i,25302));try{return await r(t)}catch(e){const i=t&&t.portalItem,r=i?.id||"unset",n=i&&i.portal&&i.portal.url||f.A.portalUrl;throw c.A.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+n+"', id: '"+r+"')",e),e}}(e)}initialize(){this.when().catch((e=>{(0,h.zf)(e)||c.A.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})}))}destroy(){const e=this.parent;if(e){const t=this;"layers"in e&&e.layers.includes(t)?e.layers.remove(t):"tables"in e&&e.tables.includes(t)?e.tables.remove(t):"baseLayers"in e&&e.baseLayers.includes(t)?e.baseLayers.remove(t):"referenceLayers"in e&&e.referenceLayers.includes(t)&&e.referenceLayers.remove(t),this._set("parent",null)}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){return(0,u.An)(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await(0,n.A)(e,{query:{f:"json"},responseType:"json"})).data;throw new s.A("layer:no-attribution-data","Layer does not have attribution data")}};(0,r._)([(0,p.MZ)({type:String})],v.prototype,"attributionDataUrl",void 0),(0,r._)([(0,p.MZ)({type:y.A})],v.prototype,"fullExtent",void 0),(0,r._)([(0,p.MZ)({readOnly:!0})],v.prototype,"hasAttributionData",null),(0,r._)([(0,p.MZ)({type:String,clonable:!1})],v.prototype,"id",void 0),(0,r._)([(0,p.MZ)({type:Boolean,nonNullable:!0})],v.prototype,"legendEnabled",void 0),(0,r._)([(0,p.MZ)({type:["show","hide","hide-children"]})],v.prototype,"listMode",void 0),(0,r._)([(0,p.MZ)({type:Number,range:{min:0,max:1},nonNullable:!0})],v.prototype,"opacity",void 0),(0,r._)([(0,p.MZ)({clonable:!1})],v.prototype,"parent",void 0),(0,r._)([(0,p.MZ)({readOnly:!0})],v.prototype,"parsedUrl",null),(0,r._)([(0,p.MZ)({type:Boolean,readOnly:!0})],v.prototype,"persistenceEnabled",void 0),(0,r._)([(0,p.MZ)({type:Boolean})],v.prototype,"popupEnabled",void 0),(0,r._)([(0,p.MZ)({type:Boolean})],v.prototype,"attributionVisible",void 0),(0,r._)([(0,p.MZ)({type:m.A})],v.prototype,"spatialReference",void 0),(0,r._)([(0,p.MZ)({type:String})],v.prototype,"title",void 0),(0,r._)([(0,p.MZ)({readOnly:!0,json:{read:!1}})],v.prototype,"type",void 0),(0,r._)([(0,p.MZ)()],v.prototype,"url",void 0),(0,r._)([(0,p.MZ)({type:Boolean,nonNullable:!0})],v.prototype,"visible",void 0),v=(0,r._)([(0,d.$)("esri.layers.Layer")],v);const _=v},24085:(e,t,i)=>{"use strict";i.d(t,{$B:()=>p});var r=i(82392),n=i(73783),s=i(6273),o=i(15565),a=i(80861),l=i(81482),c=i(26325),h=i(78598),u=i(62436);let p=class extends n.A{constructor(e){super(e),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=(0,s.A)("mapview-transitions-duration"),this.effects=[]}set effect(e){if(this._get("effect")!==(e=e||"")){this._set("effect",e);try{this._transitionTo(d(e))}catch(t){this._transitionTo([]),a.A.getLogger(this).warn("Invalid Effect",{effect:e,error:t})}}}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(e){this._updateForScale(e)}get transitioning(){return null!==this._to}canTransitionTo(e){try{return this.scale>0&&f(this._current,d(e),this.scale)}catch{return!1}}transitionStep(e,t){this._applyTimeTransition(e),this._updateForScale(t)}endTransitions(){this._applyTimeTransition(this.duration)}_transitionTo(e){this.scale>0&&f(this._current,e,this.scale)?(this._final=e,this._to=(0,o.o8)(e),function(e,t,i){const r=e.length>t.length?e:t,n=e.length>t.length?t:e,s=n[n.length-1],o=s?.scale??i,a=s?.effects??[];for(let e=n.length;e<r.length;e++)n.push({scale:o,effects:[...a]});for(let e=0;e<r.length;e++)n[e].scale=-1===n[e].scale?i:n[e].scale,r[e].scale=-1===r[e].scale?i:r[e].scale,(0,u.O9)(n[e].effects,r[e].effects)}(this._current,this._to,this.scale),this._from=(0,o.o8)(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=e),this._set("effects",this._current[0]?(0,o.o8)(this._current[0].effects):[])}_applyTimeTransition(e){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=e;const t=Math.min(1,this._time/this.duration);for(let e=0;e<this._current.length;e++){const i=this._current[e],r=this._from[e],n=this._to[e];i.scale=y(r.scale,n.scale,t);for(let e=0;e<i.effects.length;e++){const s=i.effects[e],o=r.effects[e],a=n.effects[e];s.interpolate(o,a,t)}}1===t&&(this._current=this._final,this._set("effects",this._current[0]?(0,o.o8)(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(e){if(this._set("scale",e),0===this._current.length)return;const t=this._current,i=this._current.length-1;let r,n,s=1;if(1===t.length||e>=t[0].scale)n=r=t[0].effects;else if(e<=t[i].scale)n=r=t[i].effects;else for(let o=0;o<i;o++){const i=t[o],a=t[o+1];if(i.scale>=e&&a.scale<=e){s=(e-i.scale)/(a.scale-i.scale),r=i.effects,n=a.effects;break}}for(let e=0;e<this.effects.length;e++)this.effects[e].interpolate(r[e],n[e],s)}};function d(e){const t=(0,h.q)(e)||[];return function(e){const t=e[0];return!!t&&"type"in t}(t)?[{scale:-1,effects:t}]:t}function f(e,t,i){return!e[0]?.effects||!t[0]?.effects||!((-1===e[0]?.scale||-1===t[0]?.scale)&&(e.length>1||t.length>1)&&i<=0)&&(0,u.mj)(e[0].effects,t[0].effects)}function y(e,t,i){return e+(t-e)*i}(0,r._)([(0,l.MZ)()],p.prototype,"_to",void 0),(0,r._)([(0,l.MZ)()],p.prototype,"duration",void 0),(0,r._)([(0,l.MZ)({value:""})],p.prototype,"effect",null),(0,r._)([(0,l.MZ)({readOnly:!0})],p.prototype,"effects",void 0),(0,r._)([(0,l.MZ)({readOnly:!0})],p.prototype,"hasEffects",null),(0,r._)([(0,l.MZ)({value:0})],p.prototype,"scale",null),(0,r._)([(0,l.MZ)({readOnly:!0})],p.prototype,"transitioning",null),p=(0,r._)([(0,c.$)("esri.layers.effects.EffectView")],p)},5856:(e,t,i)=>{"use strict";i.d(t,{bv:()=>l,Fk:()=>c,yG:()=>h,$b:()=>u,Nd:()=>p,jm:()=>d,sK:()=>m});var r=i(36137),n=i(23572);function s(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}const o=s();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:function(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},create:s,createView:function(e,t){return new Float32Array(e,t,16)},fromValues:function(e,t,i,r,n,s,o,a,l,c,h,u,p,d,f,y){const m=new Float32Array(16);return m[0]=e,m[1]=t,m[2]=i,m[3]=r,m[4]=n,m[5]=s,m[6]=o,m[7]=a,m[8]=l,m[9]=c,m[10]=h,m[11]=u,m[12]=p,m[13]=d,m[14]=f,m[15]=y,m}},Symbol.toStringTag,{value:"Module"}));var a=i(25336);class l{constructor(e,t,i){this.strength=e,this.radius=t,this.threshold=i,this.type="bloom"}interpolate(e,t,i){this.strength=f(e.strength,t.strength,i),this.radius=f(e.radius,t.radius,i),this.threshold=f(e.threshold,t.threshold,i)}clone(){return new l(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:y(this.radius),strength:this.strength,threshold:this.threshold}}}class c{constructor(e){this.radius=e,this.type="blur"}interpolate(e,t,i){this.radius=Math.round(f(e.radius,t.radius,i))}clone(){return new c(this.radius)}toJSON(){return{type:"blur",radius:y(this.radius)}}}class h{constructor(e,t){this.type=e,this.amount=t,"invert"!==this.type&&"grayscale"!==this.type&&"sepia"!==this.type||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,t,i){this.amount=f(e.amount,t.amount,i),this._updateMatrix()}clone(){return new h(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||s();switch(this.type){case"brightness":this._colorMatrix=((e,t)=>{const i=(0,a.hZ)(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return(0,a.mg)(i,i)})(e,this.amount);break;case"contrast":this._colorMatrix=((e,t)=>{const i=(0,a.hZ)(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return(0,a.mg)(i,i)})(e,this.amount);break;case"grayscale":this._colorMatrix=((e,t)=>{const i=1-this.amount,r=(0,a.hZ)(e,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return(0,a.mg)(r,r)})(e);break;case"invert":this._colorMatrix=((e,t)=>{const i=1-2*t,r=(0,a.hZ)(e,i,0,0,t,0,i,0,t,0,0,i,t,0,0,0,1);return(0,a.mg)(r,r)})(e,this.amount);break;case"saturate":this._colorMatrix=((e,t)=>{const i=(0,a.hZ)(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return(0,a.mg)(i,i)})(e,this.amount);break;case"sepia":this._colorMatrix=((e,t)=>{const i=1-this.amount,r=(0,a.hZ)(e,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return(0,a.mg)(r,r)})(e)}}}class u{constructor(e,t,i,r){this.offsetX=e,this.offsetY=t,this.blurRadius=i,this.color=r,this.type="drop-shadow"}interpolate(e,t,i){this.offsetX=f(e.offsetX,t.offsetX,i),this.offsetY=f(e.offsetY,t.offsetY,i),this.blurRadius=f(e.blurRadius,t.blurRadius,i),this.color[0]=Math.round(f(e.color[0],t.color[0],i)),this.color[1]=Math.round(f(e.color[1],t.color[1],i)),this.color[2]=Math.round(f(e.color[2],t.color[2],i)),this.color[3]=f(e.color[3],t.color[3],i)}clone(){return new u(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:y(this.offsetX),yoffset:y(this.offsetY),blurRadius:y(this.blurRadius),color:e}}}class p{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,t,i){this.angle=f(e.angle,t.angle,i),this._updateMatrix()}clone(){return new p(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||s();this._colorMatrix=((e,t)=>{const i=Math.sin(t*Math.PI/180),r=Math.cos(t*Math.PI/180),n=(0,a.hZ)(e,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return(0,a.mg)(n,n)})(e,this.angle)}}class d{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,t,i){this.amount=f(e.amount,t.amount,i)}clone(){return new d(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function f(e,t,i){return e+(t-e)*i}function y(e){return Math.round(1e3*(0,n.PN)(e))/1e3}function m(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new h(e.type,0);case"saturate":case"brightness":case"contrast":return new h(e.type,1);case"opacity":return new d(1);case"hue-rotate":return new p(0);case"blur":return new c(0);case"drop-shadow":return new u(0,0,0,[...(0,r.TS)("transparent")]);case"bloom":return new l(0,0,1)}}},77498:(e,t,i)=>{"use strict";i.d(t,{LF:()=>a,M9:()=>l,zu:()=>c});var r=i(62991),n=i(21750),s=i(78598),o=i(62436);function a(e,t,i){try{return function(e){if(!e||0===e.length)return null;if(function(e){const t=e[0];return!!t&&"scale"in t}(e)){const t=[];for(const i of e)t.push({scale:i.scale,value:c(i.value)});return t}return c(e)}(e)}catch(e){i?.messages?.push(e)}return null}function l(e,t,i,r){try{const r=function(e){const t=(0,s.q)(e);return t?(0,o.dw)(t)?t.map((e=>e.toJSON())):t.map((({scale:e,effects:t})=>({scale:e,value:t.map((e=>e.toJSON()))}))):null}(e);(0,n.sM)(i,r,t)}catch(e){r.messages&&r.messages.push(e)}}function c(e){if(!e?.length)return"";const t=[];for(const i of e){let e=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":e=[h(i,"amount")];break;case"blur":e=[h(i,"radius","pt")];break;case"hue-rotate":e=[h(i,"angle","deg")];break;case"drop-shadow":e=[h(i,"xoffset","pt"),h(i,"yoffset","pt"),h(i,"blurRadius","pt"),u(i,"color")];break;case"bloom":e=[h(i,"strength"),h(i,"radius","pt"),h(i,"threshold")]}const r=`${i.type}(${e.filter(Boolean).join(" ")})`;(0,s.q)(r),t.push(r)}return t.join(" ")}function h(e,t,i){if(null==e[t])throw new r.A("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return i?e[t]+i:""+e[t]}function u(e,t){if(null==e[t])throw new r.A("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const i=e[t];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}},78598:(e,t,i)=>{"use strict";i.d(t,{q:()=>u});var r,n,s=i(36137),o=i(62991),a=i(5856),l=(i(90618),i(62436)),c={exports:{}};n=function(){function e(t,i,r,n){var s=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(s,e.prototype),s.expected=i,s.found=r,s.location=n,s.name="SyntaxError",s}function t(e,t,i){return i=i||" ",e.length>t?e:(t-=e.length,e+(i+=i.repeat(t)).slice(0,t))}return function(e,t){function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i}(e,Error),e.prototype.format=function(e){var i="Error: "+this.message;if(this.location){var r,n=null;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){n=e[r].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,o=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(s):s,a=this.location.source+":"+o.line+":"+o.column;if(n){var l=this.location.end,c=t("",o.line.toString().length," "),h=n[s.line-1],u=(s.line===l.line?l.column:h.length+1)-s.column||1;i+="\n --\x3e "+a+"\n"+c+" |\n"+o.line+" | "+h+"\n"+c+" | "+t("",s.column-1," ")+t("",u,"^")}else i+="\n at "+a}return i},e.buildMessage=function(e,t){var i={literal:function(e){return'"'+n(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?s(e[0])+"-"+s(e[1]):s(e)}));return"["+(e.inverted?"^":"")+t.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function s(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function o(e){return i[e.type](e)}return"Expected "+function(e){var t,i,r=e.map(o);if(r.sort(),r.length>0){for(t=1,i=1;t<r.length;t++)r[t-1]!==r[t]&&(r[i]=r[t],i++);r.length=i}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+function(e){return e?'"'+n(e)+'"':"end of input"}(t)+" found."},{SyntaxError:e,parse:function(t,i){var r,n={},s=(i=void 0!==i?i:{}).grammarSource,o={start:$e},a=$e,l="none",c=")",h=",",u="(",p="%",d="px",f="cm",y="mm",m="in",g="pt",v="pc",_="deg",b="rad",w="grad",M="turn",T="#",S=".",A="e",E=/^[ \t\n\r]/,x=/^[a-z\-]/,I=/^[0-9a-fA-F]/,C=/^[+\-]/,k=/^[0-9]/,N=Ue("none"),L=Ze("none",!1),O=Ze(")",!1),R=Ze(",",!1),P=Ue("whitespace"),D=ze([" ","\t","\n","\r"],!1,!1),F=Ue("function"),j=Ze("(",!1),Z=Ue("identifier"),z=ze([["a","z"],"-"],!1,!1),U=Ue("percentage"),V=Ze("%",!1),G=Ue("length"),B=Ze("px",!1),$=Ze("cm",!1),H=Ze("mm",!1),q=Ze("in",!1),W=Ze("pt",!1),K=Ze("pc",!1),Y=Ue("angle"),J=Ze("deg",!1),X=Ze("rad",!1),Q=Ze("grad",!1),ee=Ze("turn",!1),te=Ue("number"),ie=Ue("color"),re=Ze("#",!1),ne=ze([["0","9"],["a","f"],["A","F"]],!1,!1),se=ze(["+","-"],!1,!1),oe=ze([["0","9"]],!1,!1),ae=Ze(".",!1),le=Ze("e",!1),ce=function(){return[]},he=function(e,t){return{type:"function",name:e,parameters:t||[]}},ue=function(e,t){return t.length>0?function(e,t,i){return[e].concat(function(e,t){return e.map((function(e){return e[3]}))}(t))}(e,t):[e]},pe=function(e){return{type:"quantity",value:e.value,unit:e.unit}},de=function(e){return{type:"color",colorType:e.type,value:e.value}},fe=function(e){return e},ye=function(){return je()},me=function(e){return{value:e,unit:"%"}},ge=function(e){return{value:e,unit:"px"}},ve=function(e){return{value:e,unit:"cm"}},_e=function(e){return{value:e,unit:"mm"}},be=function(e){return{value:e,unit:"in"}},we=function(e){return{value:e,unit:"pt"}},Me=function(e){return{value:e,unit:"pc"}},Te=function(e){return{value:e,unit:"deg"}},Se=function(e){return{value:e,unit:"rad"}},Ae=function(e){return{value:e,unit:"grad"}},Ee=function(e){return{value:e,unit:"turn"}},xe=function(e){return{value:e,unit:null}},Ie=function(){return{type:"hex",value:je()}},Ce=function(e){return{type:"function",value:e}},ke=function(){return{type:"named",value:je()}},Ne=function(){return parseFloat(je())},Le=0,Oe=0,Re=[{line:1,column:1}],Pe=0,De=[],Fe=0;if("startRule"in i){if(!(i.startRule in o))throw new Error("Can't start parsing from rule \""+i.startRule+'".');a=o[i.startRule]}function je(){return t.substring(Oe,Le)}function Ze(e,t){return{type:"literal",text:e,ignoreCase:t}}function ze(e,t,i){return{type:"class",parts:e,inverted:t,ignoreCase:i}}function Ue(e){return{type:"other",description:e}}function Ve(e){var i,r=Re[e];if(r)return r;for(i=e-1;!Re[i];)i--;for(r={line:(r=Re[i]).line,column:r.column};i<e;)10===t.charCodeAt(i)?(r.line++,r.column=1):r.column++,i++;return Re[e]=r,r}function Ge(e,t,i){var r=Ve(e),n=Ve(t),o={source:s,start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}};return i&&s&&"function"==typeof s.offset&&(o.start=s.offset(o.start),o.end=s.offset(o.end)),o}function Be(e){Le<Pe||(Le>Pe&&(Pe=Le,De=[]),De.push(e))}function $e(){var e;return(e=He())===n&&(e=function(){var e,t;if(e=[],(t=qe())!==n)for(;t!==n;)e.push(t),t=qe();else e=n;return e}()),e}function He(){var e,i;return Fe++,e=Le,Ke(),t.substr(Le,4)===l?(i=l,Le+=4):(i=n,0===Fe&&Be(L)),i!==n?(Ke(),Oe=e,e=ce()):(Le=e,e=n),Fe--,e===n&&0===Fe&&Be(N),e}function qe(){var e,i,r,s;return e=Le,Ke(),(i=function(){var e,i,r;return Fe++,e=Le,(i=Ye())!==n?(40===t.charCodeAt(Le)?(r=u,Le++):(r=n,0===Fe&&Be(j)),r!==n?(Oe=e,e=fe(i)):(Le=e,e=n)):(Le=e,e=n),Fe--,e===n&&(i=n,0===Fe&&Be(F)),e}())!==n?(Ke(),(r=function(){var e,i,r,s,o,a,l,c;if(e=Le,(i=We())!==n){for(r=[],s=Le,o=Ke(),44===t.charCodeAt(Le)?(a=h,Le++):(a=n,0===Fe&&Be(R)),a===n&&(a=null),l=Ke(),(c=We())!==n?s=o=[o,a,l,c]:(Le=s,s=n);s!==n;)r.push(s),s=Le,o=Ke(),44===t.charCodeAt(Le)?(a=h,Le++):(a=n,0===Fe&&Be(R)),a===n&&(a=null),l=Ke(),(c=We())!==n?s=o=[o,a,l,c]:(Le=s,s=n);Oe=e,e=ue(i,r)}else Le=e,e=n;return e}())===n&&(r=null),Ke(),41===t.charCodeAt(Le)?(s=c,Le++):(s=n,0===Fe&&Be(O)),s!==n?(Ke(),Oe=e,e=he(i,r)):(Le=e,e=n)):(Le=e,e=n),e}function We(){var e,t;return e=Le,(t=Je())===n&&(t=Xe())===n&&(t=Qe())===n&&(t=function(){var e,t;return Fe++,e=Le,Ke(),(t=tt())!==n?(Oe=e,e=xe(t)):(Le=e,e=n),Fe--,e===n&&0===Fe&&Be(te),e}()),t!==n&&(Oe=e,t=pe(t)),(e=t)===n&&(e=Le,(t=et())!==n&&(Oe=e,t=de(t)),e=t),e}function Ke(){var e,i;for(Fe++,e=[],E.test(t.charAt(Le))?(i=t.charAt(Le),Le++):(i=n,0===Fe&&Be(D));i!==n;)e.push(i),E.test(t.charAt(Le))?(i=t.charAt(Le),Le++):(i=n,0===Fe&&Be(D));return Fe--,i=n,0===Fe&&Be(P),e}function Ye(){var e,i,r;if(Fe++,e=Le,i=[],x.test(t.charAt(Le))?(r=t.charAt(Le),Le++):(r=n,0===Fe&&Be(z)),r!==n)for(;r!==n;)i.push(r),x.test(t.charAt(Le))?(r=t.charAt(Le),Le++):(r=n,0===Fe&&Be(z));else i=n;return i!==n&&(Oe=e,i=ye()),Fe--,(e=i)===n&&(i=n,0===Fe&&Be(Z)),e}function Je(){var e,i,r;return Fe++,e=Le,Ke(),(i=tt())!==n?(37===t.charCodeAt(Le)?(r=p,Le++):(r=n,0===Fe&&Be(V)),r!==n?(Oe=e,e=me(i)):(Le=e,e=n)):(Le=e,e=n),Fe--,e===n&&0===Fe&&Be(U),e}function Xe(){var e,i,r;return Fe++,e=Le,Ke(),(i=tt())!==n?(t.substr(Le,2)===d?(r=d,Le+=2):(r=n,0===Fe&&Be(B)),r!==n?(Oe=e,e=ge(i)):(Le=e,e=n)):(Le=e,e=n),e===n&&(e=Le,Ke(),(i=tt())!==n?(t.substr(Le,2)===f?(r=f,Le+=2):(r=n,0===Fe&&Be($)),r!==n?(Oe=e,e=ve(i)):(Le=e,e=n)):(Le=e,e=n),e===n&&(e=Le,Ke(),(i=tt())!==n?(t.substr(Le,2)===y?(r=y,Le+=2):(r=n,0===Fe&&Be(H)),r!==n?(Oe=e,e=_e(i)):(Le=e,e=n)):(Le=e,e=n),e===n&&(e=Le,Ke(),(i=tt())!==n?(t.substr(Le,2)===m?(r=m,Le+=2):(r=n,0===Fe&&Be(q)),r!==n?(Oe=e,e=be(i)):(Le=e,e=n)):(Le=e,e=n),e===n&&(e=Le,Ke(),(i=tt())!==n?(t.substr(Le,2)===g?(r=g,Le+=2):(r=n,0===Fe&&Be(W)),r!==n?(Oe=e,e=we(i)):(Le=e,e=n)):(Le=e,e=n),e===n&&(e=Le,Ke(),(i=tt())!==n?(t.substr(Le,2)===v?(r=v,Le+=2):(r=n,0===Fe&&Be(K)),r!==n?(Oe=e,e=Me(i)):(Le=e,e=n)):(Le=e,e=n)))))),Fe--,e===n&&0===Fe&&Be(G),e}function Qe(){var e,i,r;return Fe++,e=Le,(i=tt())!==n?(t.substr(Le,3)===_?(r=_,Le+=3):(r=n,0===Fe&&Be(J)),r!==n?(Oe=e,e=Te(i)):(Le=e,e=n)):(Le=e,e=n),e===n&&(e=Le,(i=tt())!==n?(t.substr(Le,3)===b?(r=b,Le+=3):(r=n,0===Fe&&Be(X)),r!==n?(Oe=e,e=Se(i)):(Le=e,e=n)):(Le=e,e=n),e===n&&(e=Le,(i=tt())!==n?(t.substr(Le,4)===w?(r=w,Le+=4):(r=n,0===Fe&&Be(Q)),r!==n?(Oe=e,e=Ae(i)):(Le=e,e=n)):(Le=e,e=n),e===n&&(e=Le,(i=tt())!==n?(t.substr(Le,4)===M?(r=M,Le+=4):(r=n,0===Fe&&Be(ee)),r!==n?(Oe=e,e=Ee(i)):(Le=e,e=n)):(Le=e,e=n)))),Fe--,e===n&&(i=n,0===Fe&&Be(Y)),e}function et(){var e,i,r,s;if(Fe++,e=Le,35===t.charCodeAt(Le)?(i=T,Le++):(i=n,0===Fe&&Be(re)),i!==n){if(r=[],I.test(t.charAt(Le))?(s=t.charAt(Le),Le++):(s=n,0===Fe&&Be(ne)),s!==n)for(;s!==n;)r.push(s),I.test(t.charAt(Le))?(s=t.charAt(Le),Le++):(s=n,0===Fe&&Be(ne));else r=n;r!==n?(Oe=e,e=Ie()):(Le=e,e=n)}else Le=e,e=n;return e===n&&(e=Le,(i=qe())!==n&&(Oe=e,i=Ce(i)),(e=i)===n&&(e=Le,(i=Ye())!==n&&(Oe=e,i=ke()),e=i)),Fe--,e===n&&(i=n,0===Fe&&Be(ie)),e}function tt(){var e,i,r,s,o,a,l;for(e=Le,C.test(t.charAt(Le))?(t.charAt(Le),Le++):0===Fe&&Be(se),i=Le,r=[],k.test(t.charAt(Le))?(s=t.charAt(Le),Le++):(s=n,0===Fe&&Be(oe));s!==n;)r.push(s),k.test(t.charAt(Le))?(s=t.charAt(Le),Le++):(s=n,0===Fe&&Be(oe));if(46===t.charCodeAt(Le)?(s=S,Le++):(s=n,0===Fe&&Be(ae)),s!==n){if(o=[],k.test(t.charAt(Le))?(a=t.charAt(Le),Le++):(a=n,0===Fe&&Be(oe)),a!==n)for(;a!==n;)o.push(a),k.test(t.charAt(Le))?(a=t.charAt(Le),Le++):(a=n,0===Fe&&Be(oe));else o=n;o!==n?i=r=[r,s,o]:(Le=i,i=n)}else Le=i,i=n;if(i===n)if(i=[],k.test(t.charAt(Le))?(r=t.charAt(Le),Le++):(r=n,0===Fe&&Be(oe)),r!==n)for(;r!==n;)i.push(r),k.test(t.charAt(Le))?(r=t.charAt(Le),Le++):(r=n,0===Fe&&Be(oe));else i=n;if(i!==n){if(r=Le,101===t.charCodeAt(Le)?(s=A,Le++):(s=n,0===Fe&&Be(le)),s!==n){if(C.test(t.charAt(Le))?(o=t.charAt(Le),Le++):(o=n,0===Fe&&Be(se)),o===n&&(o=null),a=[],k.test(t.charAt(Le))?(l=t.charAt(Le),Le++):(l=n,0===Fe&&Be(oe)),l!==n)for(;l!==n;)a.push(l),k.test(t.charAt(Le))?(l=t.charAt(Le),Le++):(l=n,0===Fe&&Be(oe));else a=n;a!==n?r=s=[s,o,a]:(Le=r,r=n)}else Le=r,r=n;r===n&&(r=null),Oe=e,e=Ne()}else Le=e,e=n;return e}if((r=a())!==n&&Le===t.length)return r;throw r!==n&&Le<t.length&&Be({type:"end"}),function(t,i,r){return new e(e.buildMessage(t,i),t,i,r)}(De,Pe<t.length?t.charAt(Pe):null,Pe<t.length?Ge(Pe,Pe+1):Ge(Pe,Pe))}}},(r=c).exports&&(r.exports=n());var h=c.exports;function u(e){if(!e||0===e.length)return null;if("string"==typeof e){const t=p(e);return t&&0!==t.length?t:null}const t=e.map((e=>{if(!Number.isFinite(e.scale)||e.scale<=0)throw new o.A("effect:invalid-scale","scale must be finite and greater than 0",{stop:e});return{scale:e.scale,effects:p(e.value)}}));t.sort(((e,t)=>t.effects.length-e.effects.length));for(let e=0;e<t.length-1;e++){if(!(0,l.mj)(t[e].effects,t[e+1].effects))throw new o.A("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[e].effects,b:t[e+1].effects});(0,l.O9)(t[e].effects,t[e+1].effects)}return t.sort(((e,t)=>t.scale-e.scale)),t}function p(e){let t;if(!e)return[];try{t=h.parse(e)}catch(t){throw new o.A("effect:invalid-syntax","Invalid effect syntax",{value:e,error:t})}return t.map((e=>function(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return function(e){let t=1;return d(e.parameters,1),1===e.parameters.length&&(t=v(e.parameters[0])),new a.yG(e.name,t)}(e);case"opacity":return function(e){let t=1;return d(e.parameters,1),1===e.parameters.length&&(t=v(e.parameters[0])),new a.jm(t)}(e);case"hue-rotate":return function(e){let t=0;return d(e.parameters,1),1===e.parameters.length&&(t=function(e){return function(e){if("quantity"!==e.type||!(0===e.value&&null===e.unit||e.unit&&null!=m[e.unit]))throw new o.A("effect:type-error",`Expected <angle>, Actual: ${f(e)}`,{term:e})}(e),e.value*m[e.unit]||0}(e.parameters[0])),new a.Nd(t)}(e);case"blur":return function(e){let t=0;return d(e.parameters,1),1===e.parameters.length&&(t=_(e.parameters[0]),y(t,e.parameters[0])),new a.Fk(t)}(e);case"drop-shadow":return function(e){const t=[];let i=null;for(const r of e.parameters)if("color"===r.type){if(t.length&&Object.freeze(t),i)throw new o.A("effect:type-error","Accepts only one color",{});i=b(r)}else{const e=_(r);if(Object.isFrozen(t))throw new o.A("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(e),3===t.length&&y(e,r)}if(t.length<2||t.length>3)throw new o.A("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new a.$b(t[0],t[1],t[2]||0,i||w("black"))}(e);case"bloom":return function(e){let t=1,i=0,r=0;return d(e.parameters,3),e.parameters[0]&&(t=v(e.parameters[0])),e.parameters[1]&&(i=_(e.parameters[1]),y(i,e.parameters[1])),e.parameters[2]&&(r=v(e.parameters[2])),new a.bv(t,i,r)}(e)}}catch(t){throw t.details.filter=e,t}throw new o.A("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}(e)))}function d(e,t){if(e.length>t)throw new o.A("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function f(e){if("color"===e.type)return"<color>";if(e.unit){if(e.unit in g)return"<length>";if(e.unit in m)return"<angle>";if("%"===e.unit)return"<percentage>"}return"<double>"}function y(e,t){if(e<0)throw new o.A("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}const m={deg:1,grad:.9,rad:180/Math.PI,turn:360},g={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function v(e){!function(e){if("quantity"!==e.type||null!==e.unit&&"%"!==e.unit)throw new o.A("effect:type-error",`Expected <double> or <percentage>, Actual: ${f(e)}`,{term:e})}(e);const t=e.value;return y(t,e),"%"===e.unit?.01*t:t}function _(e){return function(e){if("quantity"!==e.type||!(0===e.value&&null===e.unit||e.unit&&null!=g[e.unit]))throw new o.A("effect:type-error",`Expected <length>, Actual: ${f(e)}`,{term:e})}(e),e.value*g[e.unit]||0}function b(e){switch(e.colorType){case"hex":return(0,s.qh)(e.value);case"named":return w(e.value);case"function":return function(e){if(d(e.parameters,4),M.test(e.name))return[v(e.parameters[0]),v(e.parameters[1]),v(e.parameters[2]),e.parameters[3]?v(e.parameters[3]):1];if(T.test(e.name))return(0,s.z$)(function(e){return function(e){if("quantity"!==e.type||null!==e.unit)throw new o.A("effect:type-error",`Expected <double>, Actual: ${f(e)}`,{term:e})}(e),y(e.value,e),e.value}(e.parameters[0]),v(e.parameters[1]),v(e.parameters[2]),e.parameters[3]?v(e.parameters[3]):1);throw new o.A("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}(e.value)}}function w(e){if(!(0,s.V6)(e))throw new o.A("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return(0,s.c4)(e)}const M=/^rgba?/i,T=/^hsla?/i},62436:(e,t,i)=>{"use strict";i.d(t,{J2:()=>a,O9:()=>s,dw:()=>o,mj:()=>n});var r=i(5856);function n(e,t){const i=e.length>t.length?e:t;return(e.length>t.length?t:e).every(((e,t)=>e.type===i[t].type))}function s(e,t){const i=e.length>t.length?e:t,n=e.length>t.length?t:e;for(let e=n.length;e<i.length;e++)n.push((0,r.sK)(i[e]))}function o(e){const t=e[0];return!!t&&"type"in t}function a(e,t){return JSON.stringify(e??null)===JSON.stringify(t??null)}},92801:(e,t,i)=>{"use strict";i.d(t,{CI:()=>s,fk:()=>o}),i(6273);var r=i(4506),n=i(67488);function s(e,t){return e===t||null!=e&&null!=t&&(0,n.aI)(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}function o(e,t,i){return e===t||null!=e&&null!=t&&(0,n.aI)(e.spatialReference,t.spatialReference)&&(0,r.Sp)(e.x,t.x,i)&&(0,r.Sp)(e.y,t.y,i)&&(0,r.Sp)(e.z??0,t.z??0,i)&&(0,r.Sp)(e.m??0,t.m??0,i)}},82320:(e,t,i)=>{"use strict";function r(e,t,i,r){return{x:e,y:t,z:i,hasZ:null!=i,hasM:!1,spatialReference:r,type:"point"}}i.d(t,{T:()=>r})},96124:(e,t,i)=>{"use strict";i.d(t,{EL:()=>m,RS:()=>g,gr:()=>c,wP:()=>u,wZ:()=>p}),i(3313);var r=i(20857),n=(i(6273),i(15565)),s=i(62088),o=i(56053),a=i(82320),l=i(44153);function c(e){return"declaredClass"in e}function h(e){return"declaredClass"in e}function u(e,t){return e?"declaredClass"in e?e:new r.A({layer:t,sourceLayer:t,visible:e.visible,symbol:(0,n.o8)(e.symbol),attributes:(0,n.o8)(e.attributes),geometry:p(e.geometry)}):null}function p(e){return null==e?null:c(e)?e:(0,o.rS)(function(e){const{wkid:t,wkt:i,wkt2:r,latestWkid:n}=e.spatialReference,s={wkid:t,wkt:i,wkt2:r,latestWkid:n};switch(e.type){case"point":{const{x:t,y:i,z:r,m:n}=e;return{x:t,y:i,z:r,m:n,spatialReference:s}}case"polygon":{const{rings:t,hasZ:i,hasM:r}=e;return{rings:d(t),hasZ:i,hasM:r,spatialReference:s}}case"polyline":{const{paths:t,hasZ:i,hasM:r}=e;return{paths:d(t),hasZ:i,hasM:r,spatialReference:s}}case"extent":{const{xmin:t,xmax:i,ymin:r,ymax:n,zmin:o,zmax:a,mmin:l,mmax:c,hasZ:h,hasM:u}=e;return{xmin:t,xmax:i,ymin:r,ymax:n,zmin:o,zmax:a,mmin:l,mmax:c,hasZ:h,hasM:u,spatialReference:s}}case"multipoint":{const{points:t,hasZ:i,hasM:r}=e;return{points:y(t)?f(t):t,hasZ:i,hasM:r,spatialReference:s}}default:return}}(e))}function d(e){return function(e){for(const t of e)if(0!==t.length)return y(t);return!1}(e)?e.map((e=>f(e))):e}function f(e){return e.map((e=>Array.from(e)))}function y(e){return e.length>0&&((0,s.vZ)(e[0])||(0,s.aI)(e[0]))}function m(e,t){if(!e)return null;let i;if(h(e)){if(null==t)return e.clone();if(h(t))return t.copy(e)}return null!=t?(i=t,i.x=e.x,i.y=e.y,i.spatialReference=e.spatialReference,e.hasZ?(i.z=e.z,i.hasZ=e.hasZ):(i.z=void 0,i.hasZ=!1),e.hasM?(i.m=e.m,i.hasM=!0):(i.m=void 0,i.hasM=!1)):(i=(0,a.T)(e.x,e.y,e.z,e.spatialReference),e.hasM&&(i.m=e.m,i.hasM=!0)),i}function g(e){const{wkid:t,wkt:i,wkt2:r,latestWkid:n}=e,s={wkid:t,wkt:i,wkt2:r,latestWkid:n};return l.A.fromJSON(s)}},91413:(e,t,i)=>{"use strict";var r;i.d(t,{$:()=>r}),function(e){e[e.EnableFastUpdates=0]="EnableFastUpdates",e[e.DisableFastUpdates=1]="DisableFastUpdates",e[e.UpdateFastLocalOrigin=2]="UpdateFastLocalOrigin"}(r||(r={}))},94763:(e,t,i)=>{"use strict";i.d(t,{p:()=>o});var r=i(82392),n=i(81482),s=(i(6273),i(80861),i(67498),i(26325));const o=e=>{let t=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):"portalItem"in this?this.portalItem?.apiKey:null}set apiKey(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,r._)([(0,n.MZ)({type:String})],t.prototype,"apiKey",null),t=(0,r._)([(0,s.$)("esri.layers.mixins.APIKeyMixin")],t),t}},30179:(e,t,i)=>{"use strict";i.d(t,{b:()=>l});var r=i(82392),n=i(80861),s=i(81482),o=(i(6273),i(67498),i(26325)),a=i(63457);const l=e=>{let t=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=(0,a.qg)(this.url);if(null!=e&&e.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",(0,a.Jf)(e,n.A.getLogger(this)))}};return(0,r._)([(0,s.MZ)()],t.prototype,"title",null),(0,r._)([(0,s.MZ)({type:String})],t.prototype,"url",null),t=(0,r._)([(0,o.$)("esri.layers.mixins.ArcGISService")],t),t}},20923:(e,t,i)=>{"use strict";i.d(t,{d:()=>l});var r=i(82392),n=i(81482),s=(i(6273),i(80861),i(67498),i(26325)),o=i(77498);const a={read:{reader:o.LF},write:{allowNull:!0,writer:o.M9}},l=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,r._)([(0,n.MZ)({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),(0,r._)([(0,n.MZ)({json:{read:!1,write:!1,origins:{"web-map":a,"portal-item":a}}})],t.prototype,"effect",void 0),t=(0,r._)([(0,s.$)("esri.layers.mixins.BlendLayer")],t),t}},27303:(e,t,i)=>{"use strict";i.d(t,{d:()=>o});var r=i(82392),n=i(81482),s=(i(6273),i(80861),i(67498),i(26325));const o=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return(0,r._)([(0,n.MZ)({type:Object,json:{write:{overridePolicy:e=>({enabled:!!(e&&Object.keys(e).length>0)})}}})],t.prototype,"customParameters",void 0),t=(0,r._)([(0,s.$)("esri.layers.mixins.CustomParametersMixin")],t),t}},88940:(e,t,i)=>{"use strict";i.d(t,{Jz:()=>h,Mk:()=>y,Zk:()=>p,dP:()=>u,gz:()=>g,w6:()=>v});var r=i(82392),n=i(57888),s=i(15565),o=i(37623),a=(i(80861),i(6273),i(62991),i(26325)),l=i(6893);const c=new n.A.EventEmitter;function h(e){return c.on("apply-edits",new WeakRef(e))}function u(e){return c.on("update-moment",new WeakRef(e))}function p(e,t,i=null,r=!1){const n=(0,o.Tw)();return r=null==t||r,c.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:i,mayReceiveServiceEdits:r,result:n.promise}),n}const d="esri.layers.mixins.EditBusLayer",f=Symbol(d);function y(e){return null!=e&&"object"==typeof e&&f in e}function m(e){return null!=e&&"object"==typeof e&&"gdbVersion"in e}function g(e,t,i){const r=new URL(e).host,n=l.Z3.get(r),s=e=>!e||e===n;return s(t)&&s(i)||t===i}const v=e=>{var t;let i=class extends e{constructor(...e){super(...e),this[t]=!0,this._applyEditsHandler=e=>{const{serviceUrl:t,layerId:i,gdbVersion:r,mayReceiveServiceEdits:n,result:o}=e,a=t===this.url,c=null!=i&&null!=this.layerId&&i===this.layerId,h=m(this),u=m(this)&&g(t,r,this.gdbVersion);if(!a||h&&!u||!c&&!n)return;const p=o.then((e=>{if(c&&(e.addedFeatures.length||e.updatedFeatures.length||e.deletedFeatures.length||e.addedAttachments.length||e.updatedAttachments.length||e.deletedAttachments.length))return this.emit("edits",(0,s.o8)(e)),e;const t=e.editedFeatures?.find((({layerId:e})=>e===this.layerId));if(t){const{adds:i,updates:r,deletes:n}=t.editedFeatures,o={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:i?i.map((({attributes:e})=>({objectId:this.objectIdField&&e[this.objectIdField],globalId:this.globalIdField&&e[this.globalIdField]}))):[],deletedFeatures:n?n.map((({attributes:e})=>({objectId:this.objectIdField&&e[this.objectIdField],globalId:this.globalIdField&&e[this.globalIdField]}))):[],updatedFeatures:r?r.map((({current:{attributes:e}})=>({objectId:this.objectIdField&&e[this.objectIdField],globalId:this.globalIdField&&e[this.globalIdField]}))):[],editedFeatures:(0,s.o8)(e.editedFeatures),exceededTransferLimit:!1,historicMoment:(0,s.o8)(e.historicMoment)};return this.emit("edits",o),o}return{edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:(0,s.o8)(e.editedFeatures),exceededTransferLimit:!1,historicMoment:(0,s.o8)(e.historicMoment)}})).then((e=>("historicMoment"in this&&this.historicMoment!==e.historicMoment&&(0,l.w5)(t,r)&&(this.historicMoment=e.historicMoment),e)));this.emit("apply-edits",{result:p})},this._updateMomentHandler=e=>{const{serviceUrl:t,gdbVersion:i,moment:r}=e,n=t===this.url,s=m(this),o=m(this)&&g(t,i,this.gdbVersion),a=m(this)&&!g(t,this.gdbVersion,null);n&&s&&o&&a&&"historicMoment"in this&&this.historicMoment!==r&&(this.historicMoment=r)},this.when().then((()=>{this.addHandles(h(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(u(this._updateMomentHandler))}),(()=>{}))}};return t=f,i=(0,r._)([(0,a.$)(d)],i),i}},23091:(e,t,i)=>{"use strict";i.d(t,{F:()=>l});var r=i(82392),n=i(81482),s=(i(6273),i(80861),i(67498),i(26325)),o=i(11479);const a={write:{allowNull:!0}},l=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return(0,r._)([(0,n.MZ)({type:o.A,json:{origins:{"web-map":a,"portal-item":a}}})],t.prototype,"featureEffect",void 0),t=(0,r._)([(0,s.$)("esri.layers.mixins.FeatureEffectLayer")],t),t}},58637:(e,t,i)=>{"use strict";i.d(t,{j:()=>F});var r=i(82392),n=i(58842),s=i(15565),o=i(80861),a=i(81482),l=(i(6273),i(25376)),c=i(26325),h=i(48524),u=i(63910),p=i(8e3),d=i(21570),f=i(44153),y=i(63457),m=i(41332),g=i(14755),v=i(84977),_=(i(67498),i(23375));let b=class extends((0,g.O)(v.oY)){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};(0,r._)([(0,a.MZ)()],b.prototype,"creatorField",void 0),(0,r._)([(0,a.MZ)()],b.prototype,"creationDateField",void 0),(0,r._)([(0,a.MZ)()],b.prototype,"editorField",void 0),(0,r._)([(0,a.MZ)()],b.prototype,"editDateField",void 0),(0,r._)([(0,a.MZ)()],b.prototype,"realm",void 0),(0,r._)([(0,a.MZ)((0,_.P6)("dateFieldsTimeReference",!0))],b.prototype,"timeZone",void 0),b=(0,r._)([(0,c.$)("esri.layers.support.EditFieldsInfo")],b);const w=b;let M=class extends((0,g.O)(v.oY)){constructor(e){super(e)}};(0,r._)([(0,a.MZ)({constructOnly:!0,json:{write:!0}})],M.prototype,"name",void 0),(0,r._)([(0,a.MZ)({constructOnly:!0,json:{write:!0}})],M.prototype,"fields",void 0),(0,r._)([(0,a.MZ)({constructOnly:!0,json:{write:!0}})],M.prototype,"isAscending",void 0),(0,r._)([(0,a.MZ)({constructOnly:!0,json:{write:!0}})],M.prototype,"indexType",void 0),(0,r._)([(0,a.MZ)({constructOnly:!0,json:{write:!0}})],M.prototype,"isUnique",void 0),(0,r._)([(0,a.MZ)({constructOnly:!0,json:{write:!0}})],M.prototype,"description",void 0),M=(0,r._)([(0,c.$)("esri.layers.support.FeatureIndex")],M);var T=i(16948),S=i(5262);let A=class extends((0,g.O)(v.oY)){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};(0,r._)([(0,a.MZ)({type:String,json:{read:{source:"shapeAreaFieldName"}}})],A.prototype,"shapeAreaField",void 0),(0,r._)([(0,a.MZ)({type:String,json:{read:{source:"shapeLengthFieldName"}}})],A.prototype,"shapeLengthField",void 0),(0,r._)([(0,a.MZ)({type:String,json:{read:e=>S.dk.read(e)||S.Sk.read(e)}})],A.prototype,"units",void 0),A=(0,r._)([(0,c.$)("esri.layers.support.GeometryFieldsInfo")],A);const E=A;var x=i(76591),I=i(1817);const C=new I.J({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),k=new I.J({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let N=class extends((0,g.O)(v.oY)){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};(0,r._)([(0,a.MZ)({json:{read:C.read,write:C.write}})],N.prototype,"cardinality",void 0),(0,r._)([(0,a.MZ)({json:{read:!0,write:!0}})],N.prototype,"composite",void 0),(0,r._)([(0,a.MZ)({json:{read:!0,write:!0}})],N.prototype,"id",void 0),(0,r._)([(0,a.MZ)({json:{read:!0,write:!0}})],N.prototype,"keyField",void 0),(0,r._)([(0,a.MZ)({json:{read:!0,write:!0}})],N.prototype,"keyFieldInRelationshipTable",void 0),(0,r._)([(0,a.MZ)({json:{read:!0,write:!0}})],N.prototype,"name",void 0),(0,r._)([(0,a.MZ)({json:{read:!0,write:!0}})],N.prototype,"relatedTableId",void 0),(0,r._)([(0,a.MZ)({json:{read:!0,write:!0}})],N.prototype,"relationshipTableId",void 0),(0,r._)([(0,a.MZ)({json:{read:k.read,write:k.write}})],N.prototype,"role",void 0),N=(0,r._)([(0,c.$)("esri.layers.support.Relationship")],N);const L=N;var O=i(76456),R=i(19907);let P=class extends((0,g.O)(v.oY)){constructor(e){super(e),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;const t={};for(const i of Object.keys(e))t[i]=(0,R.rS)(e[i]);return t}writeDomains(e,t){if(!e)return;const i={};for(const t of Object.keys(e))e[t]&&(i[t]=e[t]?.toJSON());t.domains=i}};(0,r._)([(0,a.MZ)({type:Number,json:{write:!0}})],P.prototype,"code",void 0),(0,r._)([(0,a.MZ)({type:Object,json:{write:!0}})],P.prototype,"defaultValues",void 0),(0,r._)([(0,a.MZ)({json:{write:!0}})],P.prototype,"domains",void 0),(0,r._)([(0,l.w)("domains")],P.prototype,"readDomains",null),(0,r._)([(0,h.K)("domains")],P.prototype,"writeDomains",null),(0,r._)([(0,a.MZ)({type:String,json:{write:!0}})],P.prototype,"name",void 0),P=(0,r._)([(0,c.$)("esri.layers.support.Subtype")],P);const D=P,F=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(n.A.ofType(M)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=f.A.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:e}=this;if(e){const{query:t,operations:i,editing:r}=e;if(!t.supportsQueryByOthers||!t.supportsQueryByAnonymous)return"load";if(i.supportsEditing&&!(r.supportsUpdateByOthers&&r.supportsUpdateByAnonymous&&r.supportsDeleteByOthers&&r.supportsDeleteByAnonymous))return"load"}if(this.userHasUpdateItemPrivileges){if((0,T.tG)(this))return"load";if(this.hasUpdateItemRestrictions)return e.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const t=this.editFieldsInfo;return(t?.creatorField||t?.editorField)&&e?.operations.supportsEditing?"editing":null}readCapabilitiesFromService(e,t){return(0,O.S)(t,this.url)}readEditingInfo(e,t){const{editingInfo:i}=t;return i?{lastEditDate:null!=i.lastEditDate?new Date(i.lastEditDate):null}:null}get effectiveCapabilities(){const e=this.capabilities;if(!e)return null;const t=(0,s.o8)(e),{operations:i,editing:r}=t;return this.sourceJSON?.isMultiServicesView?(this.userHasUpdateItemPrivileges&&(i.supportsQuery=!0),t):this.userHasUpdateItemPrivileges?(i.supportsAdd=i.supportsDelete=i.supportsEditing=i.supportsQuery=i.supportsUpdate=r.supportsDeleteByOthers=r.supportsGeometryUpdate=r.supportsUpdateByOthers=!0,t):(this.userHasFullEditingPrivileges&&i.supportsEditing&&(i.supportsAdd=i.supportsDelete=i.supportsUpdate=r.supportsGeometryUpdate=!0),t)}readGlobalIdFieldFromService(e,t){return(0,T.jD)(t)}get hasFullEditingRestrictions(){const e=this.capabilities;if(!e||this.sourceJSON?.isMultiServicesView)return!1;const{operations:t,editing:i}=e;return t.supportsEditing&&!(t.supportsAdd&&t.supportsDelete&&t.supportsUpdate&&i.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const e=this.capabilities;if(!e)return!1;const{operations:t,editing:i}=e;return this.sourceJSON?.isMultiServicesView?!t.supportsQuery:!(t.supportsAdd&&t.supportsDelete&&t.supportsEditing&&t.supportsQuery&&t.supportsUpdate&&i.supportsDeleteByOthers&&i.supportsGeometryUpdate&&i.supportsUpdateByOthers)}readIsTableFromService(e,t){return"Table"===t.type}readMaxScale(e,t){return t.effectiveMaxScale||e||0}readMinScale(e,t){return t.effectiveMinScale||e||0}readObjectIdFieldFromService(e,t){return(0,T.Zm)(t)}readServiceDefinitionExpression(e,t){return t.definitionQuery||t.definitionExpression}set url(e){const t=(0,y.HZ)({layer:this,url:e,nonStandardUrlAllowed:!0,logger:o.A.getLogger(this)});this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)}writeUrl(e,t,i,r){(0,y.LS)(this,e,null,t,r)}readVersion(e,t){return(0,T.$4)(t)}};return(0,r._)([(0,a.MZ)({readOnly:!0})],t.prototype,"authenticationTriggerEvent",null),(0,r._)([(0,a.MZ)({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),(0,r._)([(0,a.MZ)({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),(0,r._)([(0,l.w)("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),(0,r._)([(0,a.MZ)((0,_.P6)("dateFieldsTimeReference"))],t.prototype,"dateFieldsTimeZone",void 0),(0,r._)([(0,a.MZ)({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),(0,r._)([(0,a.MZ)({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),(0,r._)([(0,a.MZ)({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),(0,r._)([(0,a.MZ)({readOnly:!0,type:w})],t.prototype,"editFieldsInfo",void 0),(0,r._)([(0,a.MZ)({readOnly:!0})],t.prototype,"editingInfo",void 0),(0,r._)([(0,l.w)("editingInfo")],t.prototype,"readEditingInfo",null),(0,r._)([(0,a.MZ)({readOnly:!0})],t.prototype,"effectiveCapabilities",null),(0,r._)([(0,a.MZ)((()=>{const e=(0,s.o8)(m.Yj),t=e.json.origins;return t["web-map"]={read:!1,write:!1},t["portal-item"]={read:!1,write:!1},e})())],t.prototype,"elevationInfo",void 0),(0,r._)([(0,a.MZ)({type:x.A,json:{name:"layerDefinition.floorInfo",write:!0,origins:{"web-scene":{name:"layerDefinition.floorInfo",write:{enabled:!0,layerContainerTypes:u.K}}}}})],t.prototype,"floorInfo",void 0),(0,r._)([(0,a.MZ)({type:p.A,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),(0,r._)([(0,a.MZ)()],t.prototype,"gdbVersion",void 0),(0,r._)([(0,a.MZ)({readOnly:!0,type:E,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),(0,r._)([(0,a.MZ)({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:T.iX.read}}}})],t.prototype,"geometryType",void 0),(0,r._)([(0,a.MZ)({type:String})],t.prototype,"globalIdField",void 0),(0,r._)([(0,l.w)("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),(0,r._)([(0,a.MZ)({readOnly:!0})],t.prototype,"hasFullEditingRestrictions",null),(0,r._)([(0,a.MZ)({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),(0,r._)([(0,a.MZ)({readOnly:!0})],t.prototype,"hasUpdateItemRestrictions",null),(0,r._)([(0,a.MZ)({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),(0,r._)([(0,a.MZ)({readOnly:!0,type:d.A})],t.prototype,"heightModelInfo",void 0),(0,r._)([(0,a.MZ)({type:Date})],t.prototype,"historicMoment",void 0),(0,r._)([(0,a.MZ)({type:n.A.ofType(M),readOnly:!0})],t.prototype,"indexes",void 0),(0,r._)([(0,a.MZ)({readOnly:!0})],t.prototype,"isTable",void 0),(0,r._)([(0,l.w)("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),(0,r._)([(0,a.MZ)({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),(0,r._)([(0,a.MZ)(m.hG)],t.prototype,"maxScale",void 0),(0,r._)([(0,l.w)("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),(0,r._)([(0,a.MZ)(m.hn)],t.prototype,"minScale",void 0),(0,r._)([(0,l.w)("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),(0,r._)([(0,a.MZ)({type:String})],t.prototype,"objectIdField",void 0),(0,r._)([(0,l.w)("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),(0,r._)([(0,a.MZ)((0,_.P6)("preferredTimeReference"))],t.prototype,"preferredTimeZone",void 0),(0,r._)([(0,a.MZ)({type:[L],readOnly:!0})],t.prototype,"relationships",void 0),(0,r._)([(0,a.MZ)({type:Boolean})],t.prototype,"returnM",void 0),(0,r._)([(0,a.MZ)({type:Boolean})],t.prototype,"returnZ",void 0),(0,r._)([(0,a.MZ)({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),(0,r._)([(0,a.MZ)({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),(0,r._)([(0,l.w)("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),(0,r._)([(0,a.MZ)({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"serviceItemId",void 0),(0,r._)([(0,a.MZ)()],t.prototype,"sourceJSON",void 0),(0,r._)([(0,a.MZ)({type:f.A,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),(0,r._)([(0,a.MZ)({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),(0,r._)([(0,a.MZ)({type:[D],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"subtypes",void 0),(0,r._)([(0,a.MZ)({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),(0,r._)([(0,a.MZ)(m.OZ)],t.prototype,"url",null),(0,r._)([(0,h.K)("url")],t.prototype,"writeUrl",null),(0,r._)([(0,a.MZ)({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),(0,r._)([(0,l.w)("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),t=(0,r._)([(0,c.$)("esri.layers.mixins.FeatureLayerBase")],t),t}},36576:(e,t,i)=>{"use strict";i.d(t,{J:()=>ee});var r=i(82392),n=(i(42957),i(8499),i(72502),i(2394),i(52721),i(46243),i(79645)),s=(i(1851),i(29221)),o=i(80861),a=i(61985),l=i(81482),c=i(6273),h=(i(67498),i(26325)),u=i(84977),p=i(15565),d=i(14755);let f=class extends((0,d.O)(u.oY)){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};(0,r._)([(0,l.MZ)({type:String,json:{write:!0}})],f.prototype,"expression",void 0),(0,r._)([(0,l.MZ)({type:String,json:{write:!0}})],f.prototype,"title",void 0),(0,r._)([(0,l.MZ)({type:String,json:{write:!0}})],f.prototype,"returnType",void 0),f=(0,r._)([(0,h.$)("esri.layers.support.ExpressionInfo")],f);const y=f;var m;let g=m=class extends u.oY{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new m({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:(0,p.o8)(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};(0,r._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],g.prototype,"isAutoGenerated",void 0),(0,r._)([(0,l.MZ)({type:String,json:{write:!0}})],g.prototype,"name",void 0),(0,r._)([(0,l.MZ)({type:String,json:{write:!0}})],g.prototype,"alias",void 0),(0,r._)([(0,l.MZ)({type:String,json:{write:!0}})],g.prototype,"onStatisticField",void 0),(0,r._)([(0,l.MZ)({type:y,json:{write:!0}})],g.prototype,"onStatisticExpression",void 0),(0,r._)([(0,l.MZ)({type:String,json:{write:!0}})],g.prototype,"statisticType",void 0),g=m=(0,r._)([(0,h.$)("esri.layers.support.AggregateField")],g);const v=g;var _,b=i(63910),w=i(92273),M=i(20879),T=i(83015),S=i(21750),A=i(85716),E=i(25376),x=i(48524),I=i(41332),C=i(16948),k=i(15724);let N=_=class extends w.c{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}writeFields(e,t,i){const r=e.filter((e=>"avg_angle"!==e.statisticType)).map((e=>e.toJSON()));(0,S.sM)(i,r,t)}readRenderer(e,t,i){const r=t.drawingInfo?.renderer;return r?(0,s.L)(r,t,i)??void 0:(0,C.PD)(t,i)}clone(){return new _({fields:(0,p.o8)(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:(0,p.o8)(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:(0,p.o8)(this.popupTemplate),renderer:(0,p.o8)(this.renderer)})}};(0,r._)([(0,A.e)({binning:"binning"})],N.prototype,"type",void 0),(0,r._)([(0,A.e)({geohash:"geohash"})],N.prototype,"binType",void 0),(0,r._)([(0,l.MZ)({type:Number,range:{min:1,max:9},json:{write:!0}})],N.prototype,"fixedBinLevel",void 0),(0,r._)([(0,l.MZ)({type:[k.A],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],N.prototype,"labelingInfo",void 0),(0,r._)([(0,l.MZ)(I.kF)],N.prototype,"labelsVisible",void 0),(0,r._)([(0,l.MZ)({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],N.prototype,"maxScale",void 0),(0,r._)([(0,l.MZ)(I.M6)],N.prototype,"popupEnabled",void 0),(0,r._)([(0,l.MZ)({type:M.A,json:{name:"popupInfo",write:!0}})],N.prototype,"popupTemplate",void 0),(0,r._)([(0,l.MZ)({type:[v],json:{write:!0}})],N.prototype,"fields",void 0),(0,r._)([(0,x.K)("fields")],N.prototype,"writeFields",null),(0,r._)([(0,l.MZ)({types:T.H,json:{write:{target:"drawingInfo.renderer"}}})],N.prototype,"renderer",void 0),(0,r._)([(0,E.w)("renderer",["drawingInfo.renderer"])],N.prototype,"readRenderer",null),N=_=(0,r._)([(0,h.$)("esri.layers.support.FeatureReductionBinning")],N);const L=N;var O,R=i(3438),P=i(23572);function D(e){return"simple"===e.type&&!e.visualVariables?.length}let F=O=class extends u.oY{constructor(e){super(e),this.type="cluster",this.clusterRadius=(0,P.cr)("80px"),this.clusterMinSize=(0,P.cr)("12px"),this.clusterMaxSize=(0,P.cr)("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(e,t,i){const r=t.drawingInfo?.renderer;return r?.authoringInfo?.isAutoGenerated?null:r?D(r)?null:(0,s.L)(r,t,i)??void 0:(0,C.PD)(t,i)}readSymbol(e,t,i){const r=t.drawingInfo?.renderer;if(r?.authoringInfo?.isAutoGenerated)return null;if(r&&D(r)){const e=(0,s.L)(r,t,i);return e?.symbol}return null}writeSymbol(e,t,i,r){const s=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||s){const i=new n.A({symbol:e});t.drawingInfo={renderer:i.write({},r)}}}writeFields(e,t,i){const r=e.filter((e=>"avg_angle"!==e.statisticType)).map((e=>e.toJSON()));(0,S.sM)(i,r,t)}readFields(e,t,i){return e.filter((e=>!e.isAutoGenerated)).map((e=>v.fromJSON(e)))}clone(){return new O({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:(0,p.o8)(this.labelingInfo),labelsVisible:this.labelsVisible,fields:(0,p.o8)(this.fields),maxScale:this.maxScale,renderer:(0,p.o8)(this.renderer),symbol:(0,p.o8)(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:(0,p.o8)(this.popupTemplate)})}};(0,r._)([(0,l.MZ)({type:["cluster"],readOnly:!0,json:{write:!0}})],F.prototype,"type",void 0),(0,r._)([(0,l.MZ)({type:Number,cast:e=>"auto"===e?e:(0,P.cr)(e),json:{write:!0}})],F.prototype,"clusterRadius",void 0),(0,r._)([(0,l.MZ)({type:Number,cast:P.cr,json:{write:!0}})],F.prototype,"clusterMinSize",void 0),(0,r._)([(0,l.MZ)({type:Number,cast:P.cr,json:{write:!0}})],F.prototype,"clusterMaxSize",void 0),(0,r._)([(0,l.MZ)({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],F.prototype,"maxScale",void 0),(0,r._)([(0,l.MZ)(I.M6)],F.prototype,"popupEnabled",void 0),(0,r._)([(0,l.MZ)({type:M.A,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],F.prototype,"popupTemplate",void 0),(0,r._)([(0,l.MZ)({types:T.H,json:{write:{target:"drawingInfo.renderer"}}})],F.prototype,"renderer",void 0),(0,r._)([(0,E.w)("renderer",["drawingInfo.renderer"])],F.prototype,"readRenderer",null),(0,r._)([(0,l.MZ)({types:R.q8})],F.prototype,"symbol",void 0),(0,r._)([(0,E.w)("symbol",["drawingInfo.renderer"])],F.prototype,"readSymbol",null),(0,r._)([(0,x.K)("symbol")],F.prototype,"writeSymbol",null),(0,r._)([(0,l.MZ)({type:[k.A],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],F.prototype,"labelingInfo",void 0),(0,r._)([(0,l.MZ)(I.kF)],F.prototype,"labelsVisible",void 0),(0,r._)([(0,l.MZ)({type:[v],json:{write:!0}})],F.prototype,"fields",void 0),(0,r._)([(0,x.K)("fields")],F.prototype,"writeFields",null),(0,r._)([(0,E.w)("fields")],F.prototype,"readFields",null),F=O=(0,r._)([(0,h.$)("esri.layers.support.FeatureReductionCluster")],F);const j=F;var Z=i(42567);const z={key:"type",base:w.c,typeMap:{cluster:j,binning:L}},U={types:{key:"type",base:w.c,typeMap:{selection:Z.A,cluster:j,binning:L}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:z},"portal-item":{types:z},"web-scene":{types:{key:"type",base:w.c,typeMap:{selection:Z.A}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:b.K}}}}};var V=i(41059),G=i(30347),B=i(62991),$=i(89809),H=i(51005),q=i(68231);c.A.add("esri-cluster-arcade-enabled",!0);const W=(0,c.A)("esri-cluster-arcade-enabled"),K=new Set(["simple-line","simple-fill","picture-fill"]);function Y(e,t){let i=t.clone();if(!J(i))return i;if(t.getSymbols().some((e=>K.has(e.type)))&&(i=new n.A({symbol:new q.A})),i.authoringInfo||(i.authoringInfo=new H.A),i.authoringInfo.isAutoGenerated=!0,"visualVariables"in i){const t=(i.visualVariables||[]).filter((e=>"$view.scale"!==e.valueExpression));t.forEach((t=>{"rotation"===t.type?t.field?t.field=Q(e,t.field,"avg_angle","number"):t.valueExpression&&(t.field=X(e,t.valueExpression,"avg_angle","number"),t.valueExpression=null):t.normalizationField?(t.field=Q(e,t.field,"avg_norm","number",t.normalizationField),t.normalizationField=null):t.field?t.field=Q(e,t.field,"avg","number"):t.valueExpression&&(t.field=X(e,t.valueExpression,"avg","number"),t.valueExpression=null)})),i.visualVariables=t}switch(i.type){case"simple":break;case"pie-chart":for(const t of i.attributes)t.field?t.field=Q(e,t.field,"sum","number"):t.valueExpression&&(t.field=X(e,t.valueExpression,"sum","number"),t.valueExpression=null);break;case"unique-value":i.field?i.field=Q(e,i.field,"mode","string"):i.valueExpression&&(i.field=X(e,i.valueExpression,"mode","string"),i.valueExpression=null);break;case"class-breaks":i.normalizationField?(i.field=Q(e,i.field,"avg_norm","number",i.normalizationField),i.normalizationField=null):i.field?i.field=Q(e,i.field,"avg","number"):i.valueExpression&&(i.field=X(e,i.valueExpression,"avg","number"),i.valueExpression=null)}return i}const J=e=>{const t=t=>o.A.getLogger("esri.views.2d.layers.support.clusterUtils").error(new B.A("Unsupported-renderer",t,{renderer:e}));if(!e)return!1;switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const i=e.normalizationType;if("field"!==i)return t(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!W){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some((e=>!(!("valueExpression"in e)||!e.valueExpression))))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function X(e,t,i,r){const n=(0,$.d)(t),s="mode"===i?`cluster_type_${n}`:"sum"===i?`cluster_sum_${n}`:`cluster_avg_${n}`;return e.some((e=>e.name===s))||e.push(new v({name:s,isAutoGenerated:!0,onStatisticExpression:new y({expression:t,returnType:r}),statisticType:i})),s}function Q(e,t,i,r,n){if("cluster_count"===t||e.some((e=>e.name===t)))return t;const s=function(e,t,i){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const e=i,r="field",n=t.toLowerCase()+",norm:"+r+","+e.toLowerCase();return"cluster_avg_"+(0,$.d)(n)}}}(i,t,n);return e.some((e=>e.name===s))||("avg_norm"===i?e.push(new v({name:s,isAutoGenerated:!0,onStatisticExpression:new y({expression:`$feature.${t} / $feature.${n}`,returnType:r}),statisticType:"avg"})):e.push(new v({name:s,isAutoGenerated:!0,onStatisticField:t,statisticType:i}))),s}const ee=e=>{let t=class extends e{constructor(...e){super(...e),this.addHandles((0,a.wB)((()=>this.renderer),(()=>{if(this.featureReduction){const e=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",e)}}),a.OH))}set featureReduction(e){const t=this._normalizeFeatureReduction(e);this._set("featureReduction",t)}set renderer(e){}_withClusterVariable(e,t,i){const r=e.clone();return"visualVariables"in r&&(r.visualVariables||(r.visualVariables=[]),r.visualVariables.some((e=>"size"===e.type))||r.visualVariables.push(new V.A({field:"cluster_count",stops:[new G.A({value:1}),new G.A({useMinValue:!0,size:t}),new G.A({useMaxValue:!0,size:i})]}))),r}_normalizeFeatureReduction(e){if("cluster"!==e?.type)return e;const t=e.clone(),i=[new v({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],r=(t.fields??[]).filter((e=>!e.isAutoGenerated)),s=e.renderer&&!e.renderer.authoringInfo?.isAutoGenerated,{clusterMinSize:o,clusterMaxSize:a}=t;if(s){t.fields=[...i,...r];const e=this._withClusterVariable(t.renderer,o,a);return t.effectiveFeatureRenderer=e,t.effectiveClusterRenderer=e,t}if(e.symbol){if(t.fields=[...i,...r],t.renderer=null,!this.renderer)return t.effectiveFeatureRenderer=null,t.effectiveClusterRenderer=null,t;const s=Y(i,this.renderer),l=this._withClusterVariable(s,o,a),c="visualVariables"in l&&l.visualVariables?l.visualVariables:[],h=new n.A({symbol:e.symbol,visualVariables:c});return t.fields=[...i,...r],t.effectiveFeatureRenderer=l,t.effectiveClusterRenderer=h,t}if(!this.renderer)return e;const l=Y(i,this.renderer);t.fields=[...i,...r],t.renderer=l;const c=this._withClusterVariable(l,o,a);return t.effectiveFeatureRenderer=c,t.effectiveClusterRenderer=c,t}};return(0,r._)([(0,l.MZ)(U)],t.prototype,"featureReduction",null),t=(0,r._)([(0,h.$)("esri.layers.mixins.FeatureReductionLayer")],t),t}},4648:(e,t,i)=>{"use strict";i.d(t,{q:()=>v});var r=i(82392),n=i(62991),s=i(19759),o=i(81482),a=(i(6273),i(80861),i(67498),i(25376)),l=i(26325),c=i(48524),h=i(63910),u=i(41446),p=i(34467);const d={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},f={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},y={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},m={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0,IntegratedMesh3DTilesLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":d,"web-map/basemap":f,"web-map/tables":y,"link-chart/operational-layers":{...d,LinkChartLayer:!0},"link-chart/basemap":f,"link-chart/tables":y,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISImageServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0,IntegratedMesh3DTilesLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0}};var g=i(41332);const v=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(e,t,i){return"Group Layer"===i?.portalItem?.type?void 0:e}writeListMode(e,t,i,r){(r&&"ground"===r.layerContainerType||e&&(0,p.R)(this,i,{},r))&&(t[i]=e)}writeOperationalLayerType(e,t,i,r){e&&"tables"!==r?.layerContainerType&&(t.layerType=e)}writeTitle(e,t){t.title=e??"Layer"}read(e,t){t&&(t.layer=this),(0,u.t)(this,e,(t=>super.read(e,t)),t)}write(e,t){if(!this.persistenceEnabled)return null;if(t?.origin){const e=`${t.origin}/${t.layerContainerType||"operational-layers"}`,i=m[e];let r=!!i?.[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===e&&(r=!1),"ArcGISDimensionLayer"===this.operationalLayerType&&"web-map/operational-layers"===e&&(r=!1),!r)return t.messages?.push(new n.A("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}const i=super.write(e,{...t,layer:this}),r=!!t&&!!t.messages&&!!t.messages.filter((e=>e instanceof n.A&&"web-document-write:property-required"===e.name)).length;return(0,s.w8)(i?.url)?(t?.messages?.push(new n.A("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&r?null:i}beforeSave(){}};return(0,r._)([(0,o.MZ)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),(0,r._)([(0,a.w)("id",["id"])],t.prototype,"readId",null),(0,r._)([(0,o.MZ)(g.C1)],t.prototype,"listMode",void 0),(0,r._)([(0,c.K)("listMode")],t.prototype,"writeListMode",null),(0,r._)([(0,o.MZ)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:h.K}}}}})],t.prototype,"operationalLayerType",void 0),(0,r._)([(0,c.K)("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),(0,r._)([(0,o.MZ)(g.ke)],t.prototype,"opacity",void 0),(0,r._)([(0,o.MZ)({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),(0,r._)([(0,o.MZ)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),(0,r._)([(0,c.K)("title"),(0,c.K)(["web-scene"],"title")],t.prototype,"writeTitle",null),(0,r._)([(0,o.MZ)({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:h.K}}},name:"visibility",write:!0}})],t.prototype,"visible",void 0),t=(0,r._)([(0,l.$)("esri.layers.mixins.OperationalLayer")],t),t}},87917:(e,t,i)=>{"use strict";i.d(t,{f:()=>h});var r=i(82392),n=i(21750),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),a=i(65681);function l(e,t,i){if(!e)return null;const r=e.find((e=>!!e.field));if(!r)return null;const n=new a.A;return n.read(r,i),[n]}function c(e,t,i,r){const s=e.find((e=>!!e.field));s&&(0,n.sM)(i,[s.toJSON()],t)}const h=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return(0,r._)([(0,s.MZ)({type:[a.A],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:l},write:{target:"layerDefinition.orderBy",writer:c}}})],t.prototype,"orderBy",void 0),t=(0,r._)([(0,o.$)("esri.layers.mixins.OrderedLayer")],t),t}},60368:(e,t,i)=>{"use strict";i.d(t,{A:()=>M});var r=i(82392),n=i(32083),s=i(6480),o=i(38116),a=i(3132),l=i(62991),c=i(80861),h=i(57725),u=i(37623),p=i(19759),d=i(81482),f=(i(6273),i(67498),i(25376)),y=i(26325),m=i(48524),g=i(65452),v=i(83382),_=i(43305),b=i(14395),w=i(86074);const M=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,h.pR)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,i){if(t.itemId)return new _.default({id:t.itemId,portal:i?.portal})}writePortalItem(e,t){e?.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem?.id)try{const{load:r}=await i.e(9227).then(i.bind(i,29227));return(0,u.Te)(t),await r({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData,layerModuleTypeMap:e.layerModuleTypeMap},t)}catch(e){throw(0,u.zf)(e)||c.A.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${e}`),e}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch((e=>((0,u.QP)(e),!0))))}async setUserPrivileges(e,t){if(!n.A.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(t);if(this.url)try{const{features:{edit:i,fullEdit:r},content:{updateItem:n}}=await this._fetchUserPrivileges(e,t);this._set("userHasEditingPrivileges",i),this._set("userHasFullEditingPrivileges",r),this._set("userHasUpdateItemPrivileges",n)}catch(e){(0,u.QP)(e)}}async _fetchUserPrivileges(e,t){let i=this.portalItem;if(!e||!i||!i.loaded||i.sourceUrl)return this._fetchFallbackUserPrivileges(t);const r=e===i.id;if(r&&i.portal.user)return(0,w.It)(i);let n,o;if(r)n=i.portal.url;else try{n=await(0,g.wI)(this.url,t)}catch(e){(0,u.QP)(e)}if(!n||!(0,p.b8)(n,i.portal.url))return this._fetchFallbackUserPrivileges(t);try{const e=null!=t?t.signal:null;o=await(s.id?.getCredential(`${n}/sharing`,{prompt:!1,signal:e}))}catch(e){(0,u.QP)(e)}const a=!0,l=!1,c=!1;if(!o)return{features:{edit:a,fullEdit:l},content:{updateItem:c}};try{if(r?await i.reload():(i=new _.default({id:e,portal:{url:n}}),await i.load(t)),i.portal.user)return(0,w.It)(i)}catch(e){(0,u.QP)(e)}return{features:{edit:a,fullEdit:l},content:{updateItem:c}}}async _fetchFallbackUserPrivileges(e){let t=!0;try{t=await this._fetchUserHasEditingPrivileges(e)}catch(e){(0,u.QP)(e)}return{features:{edit:t,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(e){const t=this.url?s.id?.findCredential(this.url):null;if(!t)return!0;const i=T.credential===t?T.user:await this._fetchEditingUser(e);return T.credential=t,T.user=i,null==i?.privileges||i.privileges.includes("features:user:edit")}async _fetchEditingUser(e){const t=this.portalItem?.portal?.user;if(t)return t;const i=s.id.findServerInfo(this.url??"");if(!i?.owningSystemUrl)return null;const r=`${i.owningSystemUrl}/sharing/rest`,n=v.A.getDefault();if(n&&n.loaded&&(0,p.S8)(n.restUrl)===(0,p.S8)(r))return n.user;const l=`${r}/community/self`,c=null!=e?e.signal:null,h=await(0,a.Ke)((0,o.A)(l,{authMode:"no-prompt",query:{f:"json"},signal:c}));return h.ok?b.A.fromJSON(h.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const i=t?.portal,r=this.portalItem?.id&&(this.portalItem.portal||v.A.getDefault());return i&&r&&!(0,p.ut)(r.restUrl,i.restUrl)?(t.messages&&t.messages.push(new l.A("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,r._)([(0,d.MZ)({type:_.default})],t.prototype,"portalItem",null),(0,r._)([(0,f.w)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),(0,r._)([(0,m.K)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),(0,r._)([(0,d.MZ)({clonable:!1})],t.prototype,"resourceReferences",void 0),(0,r._)([(0,d.MZ)({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),(0,r._)([(0,d.MZ)({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),(0,r._)([(0,d.MZ)({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=(0,r._)([(0,y.$)("esri.layers.mixins.PortalLayer")],t),t},T={credential:null,user:null}},51177:(e,t,i)=>{"use strict";i.d(t,{J:()=>_});var r=i(82392),n=i(80861),s=i(37623),o=i(81482),a=i(77380),l=(i(67498),i(6273),i(26325)),c=i(63910),h=i(58842),u=(i(3132),i(62991),i(10319),i(89370));const p=new h.A,d=new WeakMap;function f(e){(function(e){return null!=e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e})(e)&&p.push(new WeakRef(e))}function y(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:y(t,e%t):0}let m=0,g=0;function v(){const e=Date.now();let t=!1;for(const i of p){const r=i.deref();r?r.refreshInterval&&e-(d.get(r)??0)+5>=6e4*r.refreshInterval&&(d.set(r,e),r.refresh(e)):t=!0}if(t)for(let e=p.length-1;e>=0;e--)p.at(e).deref()||p.removeAt(e)}(0,u.fm)((()=>{const e=Date.now();let t=0;for(const i of p){const r=i.deref();r&&(t=y(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?d.get(r)||d.set(r,e):d.delete(r))}if(t!==g){if(g=t,clearInterval(m),0===g)return void(m=0);m=setInterval(v,g)}}));const _=e=>{let t=class extends e{constructor(...e){super(...e),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,s.sg)((()=>this.hasDataChanged())),this.when().then((()=>{this.destroyed||f(this)}),(()=>{}))}destroy(){!function(e){const t=p.find((t=>t.deref()===e));t&&p.remove(t)}(this)}castRefreshInterval(e){return e>=.1?e:e<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(e=Date.now()){(0,s.QZ)(this._debounceHasDataChanged()).then((t=>{t&&this._set("refreshTimestamp",e),this.emit("refresh",{dataChanged:t})}),(e=>{n.A.getLogger(this).error(e),this.emit("refresh",{dataChanged:!1,error:e})}))}async hasDataChanged(){return!0}get test(){const e=this;return{set refreshInterval(t){e._set("refreshInterval",t)}}}};return(0,r._)([(0,o.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:c.K}}}}})],t.prototype,"refreshInterval",void 0),(0,r._)([(0,a.w)("refreshInterval")],t.prototype,"castRefreshInterval",null),(0,r._)([(0,o.MZ)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),(0,r._)([(0,o.MZ)({readOnly:!0})],t.prototype,"refreshParameters",null),t=(0,r._)([(0,l.$)("esri.layers.mixins.RefreshableLayer")],t),t}},22111:(e,t,i)=>{"use strict";i.d(t,{j:()=>o});var r=i(82392),n=i(81482),s=(i(6273),i(80861),i(67498),i(26325));const o=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const e={minScale:this.minScale,maxScale:this.maxScale},t=this.parent;t&&"effectiveScaleRange"in t&&function(e,t){e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale}(e,t.effectiveScaleRange);const i=this._get("effectiveScaleRange");return i&&i.minScale===e.minScale&&i.maxScale===e.maxScale?i:e}};return(0,r._)([(0,n.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),(0,r._)([(0,n.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),(0,r._)([(0,n.MZ)({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=(0,r._)([(0,s.$)("esri.layers.mixins.ScaleRangeLayer")],t),t}},2960:(e,t,i)=>{"use strict";i.d(t,{e:()=>p});var r=i(82392),n=i(54736),s=i(85101),o=i(81482),a=(i(6273),i(80861),i(67498),i(25376)),l=i(26325),c=i(46227),h=i(72523),u=i(95752);const p=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(e,t){const i=t.timeInfo.exportOptions;if(!i)return null;const r=i.timeOffset,n=u.j.fromJSON(i.timeOffsetUnits);return r&&n?new s.A({value:r,unit:n}):null}set timeInfo(e){(0,c.sv)(e,this.fieldsIndex),this._set("timeInfo",e)}};return(0,r._)([(0,o.MZ)({type:n.A,json:{write:!1}})],t.prototype,"timeExtent",void 0),(0,r._)([(0,o.MZ)({type:s.A})],t.prototype,"timeOffset",void 0),(0,r._)([(0,a.w)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),(0,r._)([(0,o.MZ)({value:null,type:h.A,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),(0,r._)([(0,o.MZ)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=(0,r._)([(0,l.$)("esri.layers.mixins.TemporalLayer")],t),t}},12743:(e,t,i)=>{"use strict";i.d(t,{g:()=>d});var r=i(82392),n=i(73783),s=i(80189),o=i(81482),a=(i(6273),i(80861),i(67498),i(26325)),l=i(84459),c=i(41332),h=i(57179),u=i(22508);const p={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let d=class extends n.A{constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map((e=>{const t=(0,h.f)(this.floors,e);return e.toExportImageJSON(t)}));return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&(0,u.Sk)(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.removeHandles("layer"),e&&this.addHandles([e.allSublayers.on("change",(()=>this.notifyChange("visibleSublayers"))),e.on("sublayer-update",(e=>this.notifyChange(p[e.propertyName])))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map((e=>e.id)).join(","):"show:-1":null}get layerDefs(){const e=!!this.floors?.length,t=this.visibleSublayers.filter((t=>null!=t.definitionExpression||e&&null!=t.floorInfo));return t.length?JSON.stringify(t.reduce(((e,t)=>{const i=(0,h.f)(this.floors,t),r=(0,s.m)(i,t.definitionExpression);return null!=r&&(e[t.id]=r),e}),{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const t=this.layer.sublayers,i=this.scale,r=t=>{t.visible&&(0===i||(0,l.zx)(i,t.minScale,t.maxScale))&&(t.sublayers?t.sublayers.forEach(r):e.unshift(t))};t&&t.forEach(r);const n=this._get("visibleSublayers");return!n||n.length!==e.length||n.some(((t,i)=>e[i]!==t))?e:n}toJSON(){const e=this.layer;let t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t={...t,layers:this.layers,layerDefs:this.layerDefs},t}};(0,r._)([(0,o.MZ)({readOnly:!0})],d.prototype,"dynamicLayers",null),(0,r._)([(0,o.MZ)()],d.prototype,"floors",void 0),(0,r._)([(0,o.MZ)({readOnly:!0})],d.prototype,"hasDynamicLayers",null),(0,r._)([(0,o.MZ)()],d.prototype,"layer",null),(0,r._)([(0,o.MZ)({readOnly:!0})],d.prototype,"layers",null),(0,r._)([(0,o.MZ)({readOnly:!0})],d.prototype,"layerDefs",null),(0,r._)([(0,o.MZ)({type:Number})],d.prototype,"scale",void 0),(0,r._)([(0,o.MZ)(c.ui)],d.prototype,"timeExtent",void 0),(0,r._)([(0,o.MZ)({readOnly:!0})],d.prototype,"version",null),(0,r._)([(0,o.MZ)({readOnly:!0})],d.prototype,"visibleSublayers",null),d=(0,r._)([(0,a.$)("esri.layers.mixins.ExportImageParameters")],d)},11479:(e,t,i)=>{"use strict";i.d(t,{A:()=>m});var r,n=i(82392),s=i(62991),o=i(84977),a=i(21750),l=i(81482),c=(i(6273),i(80861),i(67498),i(26325)),h=i(77498),u=i(51216);const p={read:{reader:h.LF},write:{writer:h.M9,overridePolicy(){return{allowNull:null!=this.excludedEffect,isRequired:null==this.excludedEffect}}}},d={read:{reader:h.LF},write:{writer:h.M9,overridePolicy(){return{allowNull:null!=this.includedEffect,isRequired:null==this.includedEffect}}}},f={name:"showExcludedLabels",default:!0};let y=r=class extends o.oY{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){const i=super.write(e,t);if(t?.origin){if(i.filter){const e=Object.keys(i.filter);if(e.length>1||"where"!==e[0])return t.messages?.push(new s.A("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in i)return t.messages?.push(new s.A("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return i}clone(){return new r({filter:null!=this.filter?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};(0,n._)([(0,l.MZ)({type:u.A,json:{write:{allowNull:!0,writer(e,t,i,r){const n=e?.write({},r);n&&0!==Object.keys(n).length?(0,a.sM)(i,n,t):(0,a.sM)(i,null,t)}}}})],y.prototype,"filter",void 0),(0,n._)([(0,l.MZ)({json:{write:!0,origins:{"web-map":p,"portal-item":p}}})],y.prototype,"includedEffect",void 0),(0,n._)([(0,l.MZ)({json:{write:!0,origins:{"web-map":d,"portal-item":d}}})],y.prototype,"excludedEffect",void 0),(0,n._)([(0,l.MZ)({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":f,"portal-item":f}}})],y.prototype,"excludedLabelsVisible",void 0),y=r=(0,n._)([(0,c.$)("esri.layers.support.FeatureEffect")],y);const m=y},51216:(e,t,i)=>{"use strict";i.d(t,{A:()=>m});var r,n=i(82392),s=i(3313),o=i(54736),a=i(1817),l=i(84977),c=i(15565),h=i(81482),u=(i(6273),i(80861),i(26325)),p=i(10591);const d=new a.J({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),f=new a.J({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let y=r=class extends l.oY{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:r,timeExtent:n,objectIds:s,units:o,distance:a}=this;return new p.A({geometry:(0,c.o8)(i),objectIds:(0,c.o8)(s),spatialRelationship:r,timeExtent:(0,c.o8)(n),where:t,units:o,distance:a,...e})}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:n,objectIds:s,units:o,distance:a}=this;return new r({geometry:(0,c.o8)(t),objectIds:(0,c.o8)(s),spatialRelationship:i,timeExtent:(0,c.o8)(n),where:e,units:o,distance:a})}};(0,n._)([(0,h.MZ)({type:String,json:{write:!0}})],y.prototype,"where",void 0),(0,n._)([(0,h.MZ)({types:s.yR,json:{write:!0}})],y.prototype,"geometry",void 0),(0,n._)([(0,h.MZ)({type:d.apiValues,json:{name:"spatialRel",read:{reader:d.read},write:{allowNull:!1,writer:d.write,overridePolicy(){return{enabled:null!=this.geometry}}}}})],y.prototype,"spatialRelationship",void 0),(0,n._)([(0,h.MZ)({type:Number,json:{write:{overridePolicy(e){return{enabled:null!=e&&null!=this.geometry}}}}})],y.prototype,"distance",void 0),(0,n._)([(0,h.MZ)({type:[Number],json:{write:!0}})],y.prototype,"objectIds",void 0),(0,n._)([(0,h.MZ)({type:f.apiValues,json:{read:f.read,write:{writer:f.write,overridePolicy(e){return{enabled:null!=e&&null!=this.geometry}}}}})],y.prototype,"units",void 0),(0,n._)([(0,h.MZ)({type:o.A,json:{write:!0}})],y.prototype,"timeExtent",void 0),y=r=(0,n._)([(0,u.$)("esri.layers.support.FeatureFilter")],y);const m=y},92273:(e,t,i)=>{"use strict";i.d(t,{c:()=>a});var r=i(82392),n=i(84977),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325));let a=class extends n.oY{constructor(){super(...arguments),this.type=null}};(0,r._)([(0,s.MZ)({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],a.prototype,"type",void 0),a=(0,r._)([(0,o.$)("esri.layers.support.FeatureReduction")],a)},42567:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var r,n=i(82392),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),a=i(92273);let l=r=class extends a.c{constructor(e){super(e),this.type="selection"}clone(){return new r}};(0,n._)([(0,s.MZ)({type:["selection"]})],l.prototype,"type",void 0),l=r=(0,n._)([(0,o.$)("esri.layers.support.FeatureReductionSelection")],l);const c=l},84700:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var r=i(82392),n=i(14755),s=i(1817),o=i(84977),a=i(81482),l=(i(6273),i(80861),i(67498),i(26325));const c=new s.J({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let h=class extends((0,n.O)(o.oY)){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};(0,r._)([(0,a.MZ)({json:{write:!0}})],h.prototype,"name",void 0),(0,r._)([(0,a.MZ)({json:{write:!0}})],h.prototype,"description",void 0),(0,r._)([(0,a.MZ)({json:{read:c.read,write:c.write}})],h.prototype,"drawingTool",void 0),(0,r._)([(0,a.MZ)({json:{write:!0}})],h.prototype,"prototype",void 0),(0,r._)([(0,a.MZ)({json:{write:!0}})],h.prototype,"thumbnail",void 0),h=(0,r._)([(0,l.$)("esri.layers.support.FeatureTemplate")],h);const u=h},52202:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var r=i(82392),n=i(14755),s=i(84977),o=i(81482),a=(i(6273),i(80861),i(67498),i(25376)),l=i(26325),c=i(48524),h=i(19907),u=i(84700);let p=class extends((0,n.O)(s.oY)){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const i of Object.keys(e))t[i]=(0,h.rS)(e[i]);return t}writeDomains(e,t){const i={};for(const t of Object.keys(e))e[t]&&(i[t]=e[t]?.toJSON());t.domains=i}};(0,r._)([(0,o.MZ)({json:{write:!0}})],p.prototype,"id",void 0),(0,r._)([(0,o.MZ)({json:{write:!0}})],p.prototype,"name",void 0),(0,r._)([(0,o.MZ)({json:{write:!0}})],p.prototype,"domains",void 0),(0,r._)([(0,a.w)("domains")],p.prototype,"readDomains",null),(0,r._)([(0,c.K)("domains")],p.prototype,"writeDomains",null),(0,r._)([(0,o.MZ)({type:[u.A],json:{write:!0}})],p.prototype,"templates",void 0),p=(0,r._)([(0,l.$)("esri.layers.support.FeatureType")],p);const d=p},45352:(e,t,i)=>{"use strict";i.d(t,{A:()=>m});var r,n=i(82392),s=i(1817),o=i(84977),a=i(81482),l=i(8636),c=(i(67498),i(6273),i(85716)),h=i(25376),u=i(26325),p=i(19907),d=i(94832);const f=new s.J({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let y=r=class extends o.oY{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch(e){}return i?.value??null}readValueType(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch(e){}return i?f.fromJSON(i.fieldValueType):null}clone(){return new r({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],y.prototype,"alias",void 0),(0,n._)([(0,a.MZ)({type:[String,Number],json:{write:{allowNull:!0}}})],y.prototype,"defaultValue",void 0),(0,n._)([(0,a.MZ)()],y.prototype,"description",void 0),(0,n._)([(0,h.w)("description")],y.prototype,"readDescription",null),(0,n._)([(0,a.MZ)({types:p.gK,json:{read:{reader:p.rS},write:!0}})],y.prototype,"domain",void 0),(0,n._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],y.prototype,"editable",void 0),(0,n._)([(0,a.MZ)({type:l.jz,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],y.prototype,"length",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],y.prototype,"name",void 0),(0,n._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],y.prototype,"nullable",void 0),(0,n._)([(0,c.e)(d.m)],y.prototype,"type",void 0),(0,n._)([(0,a.MZ)()],y.prototype,"valueType",void 0),(0,n._)([(0,h.w)("valueType",["description"])],y.prototype,"readValueType",null),(0,n._)([(0,a.MZ)({type:Boolean,json:{read:!1}})],y.prototype,"visible",void 0),y=r=(0,n._)([(0,u.$)("esri.layers.support.Field")],y);const m=y},51387:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var r=i(62991),n=i(84977),s=i(80861),o=i(80294),a=i(69967),l=i(46227),c=i(23375),h=i(96285);const u=new Map;class p{static fromJSON(e){return new p(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new p(e.fields??[],m(e))}static fromLayerJSON(e){return new p(e.fields??[],m(e))}constructor(e=[],t){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=t?new Map(t):null;const i=[];for(const e of this.fields){const t=e?.name,r=f(t);if(t&&r){const n=d(t);this._fieldsMap.set(t,e),this._fieldsMap.set(n,e),this._normalizedFieldsMap.set(r,e),i.push(`${n}:${e.type}:${this._timeZoneByFieldName?.get(t)}`),(0,l.vE)(e)?(this.dateFields.push(e),this._dateFieldsSet.add(e)):(0,l.WA)(e)&&(this._numericFieldsSet.add(e),this.numericFields.push(e)),(0,l.te)(e)||(0,l.Xz)(e)||(e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable)}}i.sort(),this.uid=i.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)(0,l.te)(e)||(0,l.Xz)(e)||e.nullable||void 0!==(0,l.lD)(e)||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return null!=this.get(e)}get(e){if(!e)return;let t=this._fieldsMap.get(e);return t||(t=this._fieldsMap.get(d(e))??this._normalizedFieldsMap.get(f(e)),t&&this._fieldsMap.set(e,t),t)}getTimeZone(e){const t=this.get(e&&"string"!=typeof e?e.name:e);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):"date"===t.type||"esriFieldTypeDate"===t.type?(s.A.getLogger("esri.layers.support.FieldsIndex").error(new r.A("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),c.n$):y.has(t.type)?c.L5:null:null}getLuxonTimeZone(e){const t=this.getTimeZone(e);return t?t===c.L5?a.GB.instance:t===c.n$?h.mQ.utcInstance:(0,o.tE)(u,t,(()=>h.oh.create(t))):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return(0,l.OH)(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map((e=>(0,n.Wj)(e)?e.toJSON():e)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function d(e){return e.trim().toLowerCase()}function f(e){return(0,l.rS)(e)?.toLowerCase()??""}const y=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function m(e){const t=new Map;if(!e.fields)return t;const i=!0===e.datesInUnknownTimezone,{timeInfo:r,editFieldsInfo:n}=e,s=(r?"startField"in r?r.startField:r.startTimeField:"")??"",o=(r?"endField"in r?r.endField:r.endTimeField:"")??"",a=function(e){return"dateFieldsTimeZone"in e}(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?(0,c.ZS)(e.dateFieldsTimeReference):null,l=n?function(e){return"timeZone"in e}(n)?n.timeZone??a:n.dateFieldsTimeReference?(0,c.ZS)(n.dateFieldsTimeReference):a??c.n$:null,h=r?function(e){return"timeZone"in e}(r)?r.timeZone??a:r.timeReference?(0,c.ZS)(r.timeReference):a:null,u=new Map([[d(n?.creationDateField??""),l],[d(n?.editDateField??""),l],[d(s),h],[d(o),h]]);for(const{name:r,type:n}of e.fields)if(y.has(n))t.set(r,c.L5);else if("date"!==n&&"esriFieldTypeDate"!==n)t.set(r,null);else if(i)t.set(r,c.L5);else{const e=u.get(d(r??""))??a;t.set(r,e)}return t}},79083:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});var r,n=i(82392),s=i(84977),o=i(81482),a=i(8636),l=(i(67498),i(6273),i(26325));let c=r=class extends s.oY{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new r({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};(0,n._)([(0,o.MZ)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],c.prototype,"cols",void 0),(0,n._)([(0,o.MZ)({type:a.jz,json:{write:!0}})],c.prototype,"level",void 0),(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],c.prototype,"levelValue",void 0),(0,n._)([(0,o.MZ)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],c.prototype,"origin",void 0),(0,n._)([(0,o.MZ)({type:Number,json:{write:!0}})],c.prototype,"resolution",void 0),(0,n._)([(0,o.MZ)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],c.prototype,"rows",void 0),(0,n._)([(0,o.MZ)({type:Number,json:{write:!0}})],c.prototype,"scale",void 0),c=r=(0,n._)([(0,l.$)("esri.layers.support.LOD")],c);const h=c},15724:(e,t,i)=>{"use strict";i.d(t,{A:()=>E});var r,n=i(82392),s=i(3438),o=i(1817),a=i(84977),l=i(15565),c=i(23572),h=i(81482),u=(i(6273),i(80861),i(25376)),p=i(26325),d=i(48524),f=(i(67498),i(61845));let y=r=class extends a.oY{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?(0,f.mX)(t.value):e}writeExpression(e,t,i){null!=this.value&&(e=(0,f.mX)(this.value)),null!=e&&(t[i]=e)}clone(){return new r({expression:this.expression,title:this.title,value:this.value})}};(0,n._)([(0,h.MZ)({type:String,json:{write:{writerEnsuresNonNull:!0}}})],y.prototype,"expression",void 0),(0,n._)([(0,u.w)("expression",["expression","value"])],y.prototype,"readExpression",null),(0,n._)([(0,d.K)("expression")],y.prototype,"writeExpression",null),(0,n._)([(0,h.MZ)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],y.prototype,"title",void 0),(0,n._)([(0,h.MZ)({json:{read:!1,write:!1}})],y.prototype,"value",void 0),y=r=(0,n._)([(0,p.$)("esri.layers.support.LabelExpressionInfo")],y);const m=y;var g,v=i(65452),_=i(61793),b=i(4064);const w=new o.J({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function M(e,t,i){return{enabled:!(0,v.TU)(i?.layer)}}function T(e){return!e||"service"!==e.origin&&!("map-image"===e.layer?.type)}function S(e){return!!function(e){return"map-image"===e?.type}(e)&&!!e.capabilities?.exportMap?.supportsArcadeExpressionForLabeling}let A=g=class extends a.oY{static evaluateWhere(e,t){const i=(e,t,i)=>{switch(t){case"=":return e==i;case"<>":return e!=i;case">":return e>i;case">=":return e>=i;case"<":return e<i;case"<=":return e<=i}return!1};try{if(null==e)return!0;const r=e.split(" ");if(3===r.length)return i(t[r[0]],r[1],r[2]);if(7===r.length){const e=i(t[r[0]],r[1],r[2]),n=r[3],s=i(t[r[4]],r[5],r[6]);switch(n){case"AND":return e&&s;case"OR":return e||s}}return!1}catch(t){console.log("Error.: can't parse = "+e)}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=_.Hk,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,t){const i=t.labelExpressionInfo;if(!i||!i.value&&!i.expression)return e}writeLabelExpression(e,t,i){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)e=(0,f.D3)(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){const t=(0,f.tH)(this.labelExpressionInfo.expression);t&&(e="["+t+"]")}null!=e&&(t[i]=e)}writeLabelExpressionInfo(e,t,i,r){if(null==e&&null!=this.labelExpression&&T(r))e=new m({expression:this.getLabelExpressionArcade()});else if(!e)return;const n=e.toJSON(r);n.expression&&(t[i]=n)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return(0,f.XJ)(this)}getLabelExpressionArcade(){return(0,f.BI)(this)}getLabelExpressionSingleField(){return(0,f.rU)(this)}hash(){return JSON.stringify(this)}clone(){return new g({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:(0,l.o8)(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:(0,l.o8)(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};(0,n._)([(0,h.MZ)({type:String,json:{write:!0}})],A.prototype,"name",void 0),(0,n._)([(0,h.MZ)({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:M}}}}})],A.prototype,"allowOverrun",void 0),(0,n._)([(0,h.MZ)({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:M}}}}})],A.prototype,"deconflictionStrategy",void 0),(0,n._)([(0,h.MZ)({type:String,json:{write:{overridePolicy(e,t,i){return this.labelExpressionInfo&&"service"===i?.origin&&S(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],A.prototype,"labelExpression",void 0),(0,n._)([(0,u.w)("labelExpression")],A.prototype,"readLabelExpression",null),(0,n._)([(0,d.K)("labelExpression")],A.prototype,"writeLabelExpression",null),(0,n._)([(0,h.MZ)({type:m,json:{write:{overridePolicy:(e,t,i)=>function(e){return T(e)||S(e?.layer)}(i)?{allowNull:!0}:{enabled:!1}}}})],A.prototype,"labelExpressionInfo",void 0),(0,n._)([(0,d.K)("labelExpressionInfo")],A.prototype,"writeLabelExpressionInfo",null),(0,n._)([(0,h.MZ)({type:w.apiValues,json:{type:w.jsonValues,read:w.read,write:w.write}})],A.prototype,"labelPlacement",void 0),(0,n._)([(0,h.MZ)({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],A.prototype,"labelPosition",void 0),(0,n._)([(0,h.MZ)({type:Number})],A.prototype,"maxScale",void 0),(0,n._)([(0,d.K)("maxScale")],A.prototype,"writeMaxScale",null),(0,n._)([(0,h.MZ)({type:Number})],A.prototype,"minScale",void 0),(0,n._)([(0,d.K)("minScale")],A.prototype,"writeMinScale",null),(0,n._)([(0,h.MZ)({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:M}}}}})],A.prototype,"repeatLabel",void 0),(0,n._)([(0,h.MZ)({type:Number,cast:c.cr,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:M}}}}})],A.prototype,"repeatLabelDistance",void 0),(0,n._)([(0,h.MZ)({types:s.em,json:{origins:{"web-scene":{types:s.Rv,write:b.oO,default:null}},write:b.oO,default:null}})],A.prototype,"symbol",void 0),(0,n._)([(0,h.MZ)({type:Boolean,json:{write:!0}})],A.prototype,"useCodedValues",void 0),(0,n._)([(0,h.MZ)({type:String,json:{write:!0}})],A.prototype,"where",void 0),A=g=(0,n._)([(0,p.$)("esri.layers.support.LabelClass")],A);const E=A},76591:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});var r,n=i(82392),s=i(58842),o=i(84977),a=i(81482),l=(i(6273),i(80861),i(67498),i(26325));let c=r=class extends o.oY{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new s.A}clone(){return new r({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],c.prototype,"floorField",void 0),(0,n._)([(0,a.MZ)({json:{read:!1,write:!1}})],c.prototype,"viewAllMode",void 0),(0,n._)([(0,a.MZ)({json:{read:!1,write:!1}})],c.prototype,"viewAllLevelIds",void 0),c=r=(0,n._)([(0,l.$)("esri.layers.support.LayerFloorInfo")],c);const h=c},65681:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var r,n=i(82392),s=i(1817),o=i(84977),a=i(81482),l=(i(6273),i(80861),i(67498),i(26325));const c=new s.J({asc:"ascending",desc:"descending"});let h=r=class extends o.oY{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new r({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],h.prototype,"field",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],h.prototype,"valueExpression",void 0),(0,n._)([(0,a.MZ)({type:c.apiValues,json:{read:c.read,write:c.write}})],h.prototype,"order",void 0),h=r=(0,n._)([(0,l.$)("esri.layers.support.OrderByInfo")],h);const u=h},63466:(e,t,i)=>{"use strict";i.d(t,{T:()=>o});var r=i(37623),n=i(39369),s=i(50521);class o{constructor(){this._tasks=new Array,this._runningTasks=(0,n.v)(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(e){if(0===this.length)return s.G;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,t,i){return++this._runningTasks.value,new Promise(((r,n)=>this._tasks.push(new a(r,n,e,t,i)))).finally((()=>--this._runningTasks.value))}unshift(e,t,i){return++this._runningTasks.value,new Promise(((r,n)=>this._tasks.unshift(new a(r,n,e,t,i)))).finally((()=>--this._runningTasks.value))}_process(e){if(0===this._tasks.length)return!1;const t=this._tasks.shift();try{const i=(0,r.G4)(t.signal);if(i&&!t.abortCallback)t.reject((0,r.NK)());else{const n=i?t.abortCallback?.((0,r.NK)()):t.callback(e);(0,r.$X)(n)?n.then(t.resolve,t.reject):t.resolve(n)}}catch(e){t.reject(e)}return!0}cancelAll(){const e=(0,r.NK)();for(const t of this._tasks)if(t.abortCallback){const i=t.abortCallback(e);t.resolve(i)}else t.reject(e);this._tasks.length=0}}class a{constructor(e,t,i,r=void 0,n=void 0){this.resolve=e,this.reject=t,this.callback=i,this.signal=r,this.abortCallback=n}}},26574:(e,t,i)=>{"use strict";i.d(t,{A:()=>S});var r,n=i(82392),s=i(1817),o=i(84977),a=i(5262),l=i(81482),c=i(8636),h=(i(67498),i(6273),i(25376)),u=i(26325),p=i(48524),d=i(8977),f=i(44153),y=i(2532),m=i(67488),g=i(64672),v=i(79083),_=i(10259);const b=new s.J({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let w=r=class extends o.oY{static create(e={}){const{resolutionFactor:t=1,scales:i,size:n=256,spatialReference:s=f.A.WebMercator,numLODs:o=24}=e;if(!(0,m.fn)(s)){const e=[];if(i)for(let t=0;t<i.length;t++){const r=i[t];e.push(new v.A({level:t,scale:r,resolution:r}))}else{let t=5e-4;for(let i=o-1;i>=0;i--)e.unshift(new v.A({level:i,scale:t,resolution:t})),t*=2}return new r({dpi:96,lods:e,origin:new d.A(0,0,s),size:[n,n],spatialReference:s})}const l=(0,m.Vp)(s),c=e.origin?new d.A({x:e.origin.x,y:e.origin.y,spatialReference:s}):new d.A(l?{x:l.origin[0],y:l.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),h=1/(39.37*(0,a.GA)(s)*96),u=[];if(i)for(let e=0;e<i.length;e++){const t=i[e],r=t*h;u.push(new v.A({level:e,scale:t,resolution:r}))}else{let e=(0,m.EA)(s)?512/n*591657527.5917094:256/n*591657527.591555;const i=Math.ceil(o/t);u.push(new v.A({level:0,scale:e,resolution:e*h}));for(let r=1;r<i;r++){const i=e/2**t,n=i*h;u.push(new v.A({level:r,scale:i,resolution:n})),e=i}}return new r({dpi:96,lods:u,origin:c,size:[n,n],spatialReference:s})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=(0,m.Vp)(e);return e.isWrappable&&!!i&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return d.A.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const r=[],n=this._levelToLOD={};e&&(t=-1/0,i=1/0,e.forEach((e=>{r.push(e.scale),t=e.scale>t?e.scale:t,i=e.scale<i?e.scale:i,n[e.level]=e}))),this._set("scales",r),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const i=Math.floor(e),r=i+1;return t[i]/(t[i]/t[r])**(e-i)}scaleToZoom(e){const t=this.scales,i=t.length-1;let r=0;for(;r<i;r++){const i=t[r],n=t[r+1];if(i<=e)return r;if(n===e)return r+1;if(i>e&&n<e)return r+Math.log(i/e)/Math.log(i/n)}return r}snapScale(e,t=.95){const i=this.scaleToZoom(e);return i%Math.floor(i)>=t?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(e,t,i,r){const n=this.lodAt(e);if(!n)return null;let s,o;if("number"==typeof t)s=t,o=i;else if((0,m.aI)(t.spatialReference,this.spatialReference))s=t.x,o=t.y,r=i;else{const e=(0,g.Cv)(t,this.spatialReference);if(null==e)return null;s=e.x,o=e.y,r=i}const a=n.resolution*this.size[0],l=n.resolution*this.size[1];return r||(r=new _.U(null,0,0,0,(0,y.vt)())),r.level=e,r.row=Math.floor((this.origin.y-o)/l+.001),r.col=Math.floor((s-this.origin.x)/a+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=r.ExtrapolateOptions.NONE){let i=this.lodAt(e.level);if(!i&&t===r.ExtrapolateOptions.POWER_OF_TWO){const t=this.lods[this.lods.length-1];t.level<e.level&&(i=t)}if(!i)return;const n=e.level-i.level,s=i.resolution*this.size[0]/2**n,o=i.resolution*this.size[1]/2**n;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=(0,y.vt)()),e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*o,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+o}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel||(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),0))}getTileBounds(e,t){const i=this.lodAt(t.level);if(null==i)return null;const{resolution:r}=i,n=r*this.size[0],s=r*this.size[1];return e[0]=this.origin.x+t.col*n,e[1]=this.origin.y-(t.row+1)*s,e[2]=e[0]+n,e[3]=e[1]+s,e}lodAt(e){return this._levelToLOD?.[e]??null}clone(){return r.fromJSON(this.write({}))}getOrCreateCompatible(e,t){if(256===this.size[0]&&256===this.size[1])return 256===e?this:null;const i=[],n=this.lods.length;for(let e=0;e<n;e++){const r=this.lods[e],n=r.resolution*t;i.push(new v.A({level:r.level,scale:r.scale,resolution:n}))}return new r({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const r=e[i];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};var M,T;(0,n._)([(0,l.MZ)({type:Number,json:{write:!0}})],w.prototype,"compressionQuality",void 0),(0,n._)([(0,l.MZ)({type:Number,json:{write:!0}})],w.prototype,"dpi",void 0),(0,n._)([(0,l.MZ)({type:String,json:{read:b.read,write:b.write,origins:{"web-scene":{read:!1,write:!1}}}})],w.prototype,"format",void 0),(0,n._)([(0,l.MZ)({readOnly:!0})],w.prototype,"isWrappable",null),(0,n._)([(0,l.MZ)({type:d.A,json:{write:!0}})],w.prototype,"origin",void 0),(0,n._)([(0,h.w)("origin")],w.prototype,"readOrigin",null),(0,n._)([(0,l.MZ)({type:[v.A],value:null,json:{write:!0}})],w.prototype,"lods",null),(0,n._)([(0,l.MZ)({readOnly:!0})],w.prototype,"scales",void 0),(0,n._)([(0,l.MZ)({cast:e=>Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]})],w.prototype,"size",void 0),(0,n._)([(0,h.w)("size",["rows","cols"])],w.prototype,"readSize",null),(0,n._)([(0,p.K)("size",{cols:{type:c.jz},rows:{type:c.jz}})],w.prototype,"writeSize",null),(0,n._)([(0,l.MZ)({type:f.A,json:{write:!0}})],w.prototype,"spatialReference",void 0),w=r=(0,n._)([(0,u.$)("esri.layers.support.TileInfo")],w),M=w||(w={}),(T=M.ExtrapolateOptions||(M.ExtrapolateOptions={}))[T.NONE=0]="NONE",T[T.POWER_OF_TWO=1]="POWER_OF_TWO";const S=w},10259:(e,t,i)=>{"use strict";i.d(t,{U:()=>r});class r{constructor(e,t,i,r,n=void 0){this.id=e,this.level=t,this.row=i,this.col=r,this.extent=n}}},72523:(e,t,i)=>{"use strict";i.d(t,{A:()=>y});var r=i(82392),n=i(54736),s=i(85101),o=i(14755),a=i(84977),l=i(81482),c=(i(6273),i(80861),i(67498),i(25376)),h=i(26325),u=i(48524),p=i(23375);function d(e,t){return s.A.fromJSON({value:e,unit:t})}let f=class extends((0,o.O)(a.oY)){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;const i=new Date(t.timeExtent[0]),r=new Date(t.timeExtent[1]);return new n.A({start:i,end:r})}writeFullTimeExtent(e,t){null!=e?.start&&null!=e.end?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?d(t.timeInterval,t.timeIntervalUnits):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?d(t.defaultTimeInterval,t.defaultTimeIntervalUnits):null}writeInterval(e,t){t.timeInterval=e?.toJSON().value??null,t.timeIntervalUnits=e?.toJSON().unit??null}};(0,r._)([(0,l.MZ)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],f.prototype,"cumulative",void 0),(0,r._)([(0,l.MZ)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],f.prototype,"endField",void 0),(0,r._)([(0,l.MZ)({type:n.A,json:{write:{enabled:!0,allowNull:!0}}})],f.prototype,"fullTimeExtent",void 0),(0,r._)([(0,c.w)("fullTimeExtent",["timeExtent"])],f.prototype,"readFullTimeExtent",null),(0,r._)([(0,u.K)("fullTimeExtent")],f.prototype,"writeFullTimeExtent",null),(0,r._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],f.prototype,"hasLiveData",void 0),(0,r._)([(0,l.MZ)({type:s.A,json:{write:{enabled:!0,allowNull:!0}}})],f.prototype,"interval",void 0),(0,r._)([(0,c.w)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],f.prototype,"readInterval",null),(0,r._)([(0,u.K)("interval")],f.prototype,"writeInterval",null),(0,r._)([(0,l.MZ)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],f.prototype,"startField",void 0),(0,r._)([(0,l.MZ)((0,p.P6)("timeReference",!0))],f.prototype,"timeZone",void 0),(0,r._)([(0,l.MZ)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],f.prototype,"trackIdField",void 0),(0,r._)([(0,l.MZ)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],f.prototype,"useTime",void 0),f=(0,r._)([(0,h.$)("esri.layers.support.TimeInfo")],f);const y=f},63457:(e,t,i)=>{"use strict";i.d(t,{Fi:()=>h,HZ:()=>g,Jf:()=>m,LS:()=>v,Wo:()=>y,bd:()=>_,cr:()=>d,iz:()=>p,qg:()=>u,tK:()=>b,yG:()=>f});var r=i(19759),n=i(55714);const s={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer"},o=Object.values(s),a=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${o.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),l=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${o.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),c=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function h(e){return!!a.test(e)}function u(e){if(null==e)return null;const t=(0,r.An)(e),i=t?.path.match(a)||t?.path.match(l);if(!i)return null;const[,n,o,c,h]=i,u=o.indexOf("/");return{title:d(-1!==u?o.slice(u+1):o),serverType:s[c.toLowerCase()],sublayer:null!=h&&""!==h?parseInt(h,10):null,url:{path:n}}}function p(e){const t=(0,r.An)(e).path.match(c);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function d(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function f(e,t){const i=[];if(e){const t=u(e);null!=t&&t.title&&i.push(t.title)}if(t){const e=d(t);i.push(e)}if(2===i.length){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function y(e){if(!e)return!1;const t=(e=e.toLowerCase()).includes(".arcgis.com/"),i=e.includes("//services")||e.includes("//tiles")||e.includes("//features");return t&&i}function m(e,t){return e?(0,r.UC)((0,r.zi)(e,t)):e}function g(e){let{url:t}=e;if(!t)return{url:t};t=(0,r.zi)(t,e.logger);const i=(0,r.An)(t),n=u(i.path);let s;if(null!=n)null!=n.sublayer&&null==e.layer.layerId&&(s=n.sublayer),t=n.url.path;else if(e.nonStandardUrlAllowed){const e=p(i.path);null!=e&&(t=e.serviceUrl,s=e.sublayerId)}return{url:(0,r.UC)(t),layerId:s}}function v(e,t,i,s,o){(0,n.w)(t,s,"url",o),s.url&&null!=e.layerId&&(s.url=(0,r.fj)(s.url,i,e.layerId.toString()))}function _(e){if(!e)return!1;const t=e.toLowerCase(),i=t.includes("/services/"),r=t.includes("/mapserver/wmsserver"),n=t.includes("/imageserver/wmsserver"),s=t.includes("/wmsserver");return i&&(r||n||s)}function b(e){if(!e)return!1;const t=new r.s0((0,r.s2)(e)),i=t.authority?.toLowerCase();return"server.arcgisonline.com"===i||"services.arcgisonline.com"===i}},41332:(e,t,i)=>{"use strict";i.d(t,{ui:()=>w,Yj:()=>m,id:()=>T,kF:()=>d,fV:()=>y,C1:()=>E,hG:()=>A,hn:()=>S,ke:()=>_,Ih:()=>b,M6:()=>p,Qo:()=>g,Fm:()=>M,PY:()=>u,OZ:()=>f});var r=i(54736),n=i(63910),s=i(8e3),o=i(44153),a=i(55714),l=(i(3223),i(15565),i(11895)),c=i(44223),h=i(93802);const u={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:n.K}}},p={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,i){t[i]=!e}}}},d={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:n.K}}},f={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:a.w}}},y={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:n.K}}},m={value:null,type:c.A,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:n.K}}};function g(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const v={write:{enabled:!0,layerContainerTypes:n.K},read:!0},_={type:Number,json:{origins:{"web-document":v,"portal-item":{write:!0}}}},b={..._,json:{..._.json,origins:{"web-document":{...v,write:{enabled:!0,layerContainerTypes:n.K,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,i)=>i&&"service"!==i.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition?.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?(0,h.D)(t.layerDefinition.drawingInfo.transparency):void 0:(0,h.D)(t.drawingInfo.transparency)}}},w={type:r.A,readOnly:!0,get(){const e=null!=this.layer?.timeInfo?this.layer:null!=this.i3slayer?.timeInfo?this.i3slayer:null;if(null==e)return null;const{datesInUnknownTimezone:t,timeOffset:i,useViewTime:n}=e,s=this.view?.timeExtent;let o=e.timeExtent;t&&(o=function(e){if(!e)return e;const{start:t,end:i}=e;return new r.A({start:null!=t?(0,l.S1)(t,t.getTimezoneOffset(),"minutes"):t,end:null!=i?(0,l.S1)(i,i.getTimezoneOffset(),"minutes"):i})}(o));let a=n?s&&o?s.intersection(o):s||o:o;if(!a||a.isEmpty||a.isAllTime)return a;i&&(a=a.offset(-i.value,i.unit)),t&&(a=function(e){if(!e)return e;const{start:t,end:i}=e;return new r.A({start:null!=t?(0,l.S1)(t,-t.getTimezoneOffset(),"minutes"):t,end:null!=i?(0,l.S1)(i,-i.getTimezoneOffset(),"minutes"):i})}(a));const c=this._get("timeExtent");return a.equals(c)?c:a}},M={type:s.A,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const i=s.A.fromJSON(e);return null!=t.spatialReference&&"object"==typeof t.spatialReference&&(i.spatialReference=o.A.fromJSON(t.spatialReference)),i}}}},read:!1}},T={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},S={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:n.K}}},name:"layerDefinition.minScale",write:!0}},A={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:n.K}}},name:"layerDefinition.maxScale",write:!0}},E={json:{write:{ignoreOrigin:!0,layerContainerTypes:n.K},origins:{"web-map":{read:!1,write:!1}}}}},14849:(e,t,i)=>{"use strict";i.d(t,{A5:()=>p,Mh:()=>r,wb:()=>u});var r,n,s=i(30738);(n=r||(r={})).VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",n.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";const o=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function a(e){return null!=e&&o.has(e.type)}function l(e){return null!=e&&("date-only"===e.type||"esriFieldTypeDateOnly"===e.type)}function c(e){return null!=e&&("timestamp-offset"===e.type||"esriFieldTypeTimestampOffset"===e.type)}function h(e){return null!=e&&("time-only"===e.type||"esriFieldTypeTimeOnly"===e.type)}function u(e,t){const i=e?.domain;if(!i)return null;switch(i.type){case"range":{const{min:i,max:n}=p(e);if(null!=i&&+t<i||null!=n&&+t>n)return r.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==i.codedValues||i.codedValues.every((e=>null==e||e.code!==t)))return r.INVALID_CODED_VALUE}return null}function p(e,t){const i=t??e?.domain;if(!i||"range"!==i.type)return;const r="range"in i?i.range[0]:i.minValue,n="range"in i?i.range[1]:i.maxValue,s=a(e);return l(e)||h(e)||c(e)?{...d(e,n,r),isInteger:s}:{min:null!=r&&"number"==typeof r?r:null,max:null!=n&&"number"==typeof n?n:null,rawMin:r,rawMax:n,isInteger:s}}function d(e,t,i){return l(e)?{min:(0,s.Xi)(i)?.toMillis(),max:(0,s.Xi)(t)?.toMillis(),rawMin:i,rawMax:t}:h(e)?{min:(0,s.UE)(i)?.toMillis(),max:(0,s.UE)(t)?.toMillis(),rawMin:i,rawMax:t}:c(e)?{min:(0,s.gz)(i)?.toMillis(),max:(0,s.gz)(t)?.toMillis(),rawMin:i,rawMax:t}:{max:null,min:null}}},19907:(e,t,i)=>{"use strict";i.d(t,{rS:()=>S,gK:()=>T}),i(6273);var r,n=i(82392),s=i(15565),o=i(81482),a=(i(80861),i(85716)),l=i(26325),c=i(84977);i(67498);let h=r=class extends c.oY{constructor(e){super(e),this.name=null,this.code=null}clone(){return new r({name:this.name,code:this.code})}};(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],h.prototype,"name",void 0),(0,n._)([(0,o.MZ)({type:[String,Number],json:{write:!0}})],h.prototype,"code",void 0),h=r=(0,n._)([(0,l.$)("esri.layers.support.CodedValue")],h);const u=new(i(1817).J)({inherited:"inherited",codedValue:"coded-value",range:"range"});let p=class extends c.oY{constructor(e){super(e),this.name=null,this.type=null}};(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],p.prototype,"name",void 0),(0,n._)([(0,a.e)(u)],p.prototype,"type",void 0),p=(0,n._)([(0,l.$)("esri.layers.support.Domain")],p);const d=p;var f;let y=f=class extends d{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some((e=>(String(e.code)===i&&(t=e.name),!!t)))}return t}clone(){return new f({codedValues:(0,s.o8)(this.codedValues),name:this.name})}};(0,n._)([(0,o.MZ)({type:[h],json:{write:!0}})],y.prototype,"codedValues",void 0),(0,n._)([(0,a.e)({codedValue:"coded-value"})],y.prototype,"type",void 0),y=f=(0,n._)([(0,l.$)("esri.layers.support.CodedValueDomain")],y);const m=y;var g;i(62991);let v=g=class extends d{constructor(e){super(e),this.type="inherited"}clone(){return new g}};(0,n._)([(0,a.e)({inherited:"inherited"})],v.prototype,"type",void 0),v=g=(0,n._)([(0,l.$)("esri.layers.support.InheritedDomain")],v);const _=v;var b;let w=b=class extends d{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new b({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};(0,n._)([(0,o.MZ)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]}}}})],w.prototype,"maxValue",void 0),(0,n._)([(0,o.MZ)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[0]},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]}}}})],w.prototype,"minValue",void 0),(0,n._)([(0,a.e)({range:"range"})],w.prototype,"type",void 0),w=b=(0,n._)([(0,l.$)("esri.layers.support.RangeDomain")],w);const M=w,T={key:"type",base:d,typeMap:{range:w,"coded-value":m,inherited:_}};function S(e){if(!e?.type)return null;switch(e.type){case"range":return M.fromJSON(e);case"codedValue":return m.fromJSON(e);case"inherited":return _.fromJSON(e)}return null}},16948:(e,t,i)=>{"use strict";i.d(t,{$4:()=>P,B5:()=>I,C$:()=>j,GA:()=>V,PD:()=>z,S2:()=>k,VA:()=>F,VZ:()=>L,WP:()=>S,Xl:()=>v,Ye:()=>x,Zm:()=>R,bt:()=>b,ct:()=>w,hM:()=>C,iX:()=>g,jD:()=>O,jp:()=>N,lV:()=>A,mm:()=>T,rn:()=>M,sg:()=>E,tG:()=>U});var r=i(6480),n=i(3438),s=i(3132),o=i(62991),a=i(1817),l=i(80189),c=i(9283),h=i(5213),u=i(65452),p=i(79645),d=i(1851),f=i(95827),y=i(10591),m=i(63498);const g=new a.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function v(e,t,i,r){const n=await D(e);if(await _(e,t,r),!n.addAttachment)throw new o.A(r,"Layer source does not support addAttachment capability");return n.addAttachment(t,i)}function _(e,t,i){const{attributes:r}=t,{objectIdField:n}=e;return e.capabilities?.data?.supportsAttachment?t?r?n&&r[n]?Promise.resolve():Promise.reject(new o.A(i,`feature is missing the identifying attribute ${n}`)):Promise.reject(new o.A(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new o.A(i,"A feature is required to add/delete/update attachments")):Promise.reject(new o.A(i,"this layer doesn't support attachments"))}async function b(e,t,i,r,n){const s=await D(e);if(await _(e,t,n),!s.updateAttachment)throw new o.A(n,"Layer source does not support updateAttachment capability");return s.updateAttachment(t,i,r)}async function w(e,t,r){const{applyEdits:n}=await i.e(7774).then(i.bind(i,35393)),s=await e.load(),{source:o,globalIdField:a}=s;let l=r;return("feature"===s.type?s.infoFor3D:null)&&null!=t.deleteFeatures&&null!=a&&(l={...l,globalIdToObjectId:await V(e,t.deleteFeatures,a)}),n(s,o,t,r)}async function M(e,t,r){const{uploadAssets:n}=await i.e(7774).then(i.bind(i,35393)),s=await e.load();return n(s,s.source,t,r)}async function T(e,t,i,r){const n=await D(e);if(await _(e,t,r),!n.deleteAttachments)throw new o.A(r,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(t,i)}async function S(e,t,i){const r=(await e.load({signal:t?.signal})).source;if(!r.fetchRecomputedExtents)throw new o.A(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(t)}async function A(e,t,i,r){t=f.A.from(t),await e.load();const n=e.source,s=e.capabilities;if(!s?.data?.supportsAttachment)throw new o.A(r,"this layer doesn't support attachments");const{attachmentTypes:a,objectIds:l,globalIds:c,num:h,size:u,start:p,where:d}=t;if(!s?.operations?.supportsQueryAttachments&&(a?.length>0||c?.length>0||u?.length>0||h||p||d))throw new o.A(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(l?.length||c?.length||d))throw new o.A(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!n.queryAttachments)throw new o.A(r,"Layer source does not support queryAttachments capability",t);return n.queryAttachments(t)}async function E(e,t,i,r){const n=await D(e);if(!n.queryObjectIds)throw new o.A(r,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(y.A.from(t)??e.createQuery(),i)}async function x(e,t,i,r){const n=await D(e);if(!n.queryFeatureCount)throw new o.A(r,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(y.A.from(t)??e.createQuery(),i)}async function I(e,t,i,r){const n=await D(e);if(!n.queryExtent)throw new o.A(r,"Layer source does not support queryExtent capability");return n.queryExtent(y.A.from(t)??e.createQuery(),i)}async function C(e,t,i,r){const n=await D(e);if(!n.queryRelatedFeatures)throw new o.A(r,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(m.default.from(t),i)}async function k(e,t,i,r){const n=await D(e);if(!n.queryRelatedFeaturesCount)throw new o.A(r,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(m.default.from(t),i)}async function N(e){const t=e.source;if(t?.refresh)try{const{dataChanged:i,updates:r}=await t.refresh();if(null!=r&&(e.sourceJSON={...e.sourceJSON,...r},e.read(r,{origin:"service",url:e.parsedUrl})),i)return!0}catch{}if(e.definitionExpression)try{return(await(0,l.G)(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function L(e){const t=new y.A,i=e.capabilities?.data,r=e.capabilities?.query;t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,r&&(t.compactGeometryEnabled=r.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),i&&(i.supportsZ&&null!=e.returnZ&&(t.returnZ=e.returnZ),i.supportsM&&null!=e.returnM&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:n,timeExtent:s}=e;return t.timeExtent=null!=n&&null!=s?s.offset(-n.value,n.unit):s||null,t.multipatchOption="multipatch"===e.geometryType?"xyFootprint":null,t}function O(e){const{globalIdField:t,fields:i}=e;if(t)return t;if(i)for(const e of i)if("esriFieldTypeGlobalID"===e.type)return e.name}function R(e){const{objectIdField:t,fields:i}=e;if(t)return t;if(i)for(const e of i)if("esriFieldTypeOID"===e.type)return e.name}function P(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}async function D(e){return(await e.load()).source}async function F(e,t,i){const n=e.parsedUrl?.path;n&&e.authenticationTriggerEvent===t&&await async function(e,t){if(!r.id)return;if(r.id.findCredential(e))return;let i;try{const n=await(0,u.wI)(e,t);n&&(i=await r.id.checkSignInStatus(`${n}/sharing`))}catch(e){}if(i)try{const i=null!=t?t.signal:null;await r.id.getCredential(e,{signal:i})}catch(e){}}(n,i)}function j(e){return!e.sourceJSON?.isMultiServicesView&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const Z=(0,c.C)({types:n.xK});function z(e,t){if(e.defaultSymbol)return e.types?.length?new d.A({defaultSymbol:Z(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map((e=>({id:e.id,symbol:Z(e.symbol,e,t)})))}):new p.A({symbol:Z(e.defaultSymbol,e,t)})}function U(e){let t=e.sourceJSON?.cacheMaxAge;if(!t)return!1;const i=e.editingInfo?.lastEditDate?.getTime();return null==i||(t*=1e3,Date.now()-i<t)}async function V(e,t,i){if(null==t)return null;const r=[],{objectIdField:n}=e;if(t.forEach((e=>{let t=null;if("attributes"in e){const{attributes:r}=e;t={globalId:r[i],objectId:null!=r[n]&&-1!==r[n]?r[n]:null}}else t={globalId:e.globalId,objectId:null!=e.objectId&&-1!==e.objectId?e.objectId:null};null!=t.globalId&&(null!=t.objectId&&-1!==t.objectId||r.push(t.globalId))})),0===r.length)return null;const o=e.createQuery();o.where=r.map((e=>`${i}='${e}'`)).join(" OR "),o.returnGeometry=!1,o.outFields=[n,i],o.cacheHint=!1;const a=await(0,s.DZ)((0,h.SE)(e,o));if(!a.ok)return null;const l=new Map,c=a.value.features;for(const e of c){const t=e.attributes[i],r=e.attributes[n];null!=t&&null!=r&&-1!==r&&l.set(t,r)}return l}},5213:(e,t,i)=>{"use strict";i.d(t,{SE:()=>n});var r=i(10591);async function n(e,t,i){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=s(e));const r=function(e){return s(e)*function(e){return e.capabilities.query.maxRecordCount||2e3}(e)}(e),n=e.capabilities.query.supportsPagination;t.start=0,t.num=r;let o=null;for(;;){const s=await e.source.queryFeaturesJSON(t,i);if(null==o?o=s:o.features=o.features.concat(s.features),o.exceededTransferLimit=s.exceededTransferLimit,!n||!s.exceededTransferLimit)break;t.start+=r}return o}function s(e){return e.capabilities.query.supportsMaxRecordCountFactor?r.A.MAX_MAX_RECORD_COUNT_FACTOR:1}},83693:(e,t,i)=>{"use strict";i.d(t,{p:()=>l});var r=i(6273),n=i(80861),s=i(45352),o=i(51387),a=i(46227);function l(){return{fields:{type:[s.A],value:null,set:function(e){if(e&&(0,r.A)("big-integer-warning-enabled")){const t=e.filter((e=>"big-integer"===e.type||"oid"===e.type&&(e.length||0)>=8));if(t.length){const e=t.map((e=>`'${e.name}'`)).join(", ");n.A.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${e}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return o.A.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e?.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e){const i=this.fieldsIndex?.has(t);i||n.A.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e})}return(0,a.DB)(this.fieldsIndex,e)}}}}},94832:(e,t,i)=>{"use strict";i.d(t,{m:()=>r});const r=new(i(1817).J)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"})},46227:(e,t,i)=>{"use strict";i.d(t,{Ah:()=>ie,Bz:()=>j,CJ:()=>he,DB:()=>v,Dx:()=>T,Im:()=>Z,JL:()=>_e,Kl:()=>ve,NO:()=>x,OG:()=>oe,OH:()=>re,R$:()=>F,RP:()=>I,WA:()=>X,WX:()=>ce,Xz:()=>se,_b:()=>U,_w:()=>_,eX:()=>N,f:()=>k,hL:()=>w,hW:()=>M,lD:()=>z,mB:()=>A,o:()=>C,rS:()=>u,rq:()=>b,sv:()=>m,te:()=>ne,uo:()=>ge,vE:()=>ee,yM:()=>Q,yp:()=>f,zD:()=>te});var r=i(62991),n=i(21750),s=i(98592),o=i(80189),a=i(14849),l=i(83911);const c=/^([0-9_])/,h=/[^a-z0-9_\u0080-\uffff]+/gi;function u(e){return null==e?null:e.trim().replaceAll(h,"_").replace(c,"F$1")||null}const p=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],d=["field","normalizationField"];function f(e,t){if(null!=e&&null!=t)for(const i of Array.isArray(e)?e:[e])if(y(p,i,t),"visualVariables"in i&&i.visualVariables)for(const e of i.visualVariables)y(d,e,t)}function y(e,t,i){if(e)for(const r of e){const e=(0,n.wc)(r,t),s=e&&"function"!=typeof e&&i.get(e);s&&(0,n.sM)(r,s.name,t)}}function m(e,t){if(null!=e&&t?.fields?.length)if("startField"in e){const i=t.get(e.startField),r=t.get(e.endField);e.startField=i?.name??null,e.endField=r?.name??null}else{const i=t.get(e.startTimeField),r=t.get(e.endTimeField);e.startTimeField=i?.name??null,e.endTimeField=r?.name??null}}const g=new Set;function v(e,t){return e&&t?(g.clear(),_(g,e,t),Array.from(g).sort()):[]}function _(e,t,i){if(i)if(t?.fields?.length)if(i.includes("*"))for(const{name:i}of t.fields)e.add(i);else for(const r of i)b(e,t,r);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const t of i)null!=t&&e.add(t)}}function b(e,t,i){if("string"==typeof i)if(t){const r=t.get(i);r&&e.add(r.name)}else e.add(i)}function w(e,t){return null==t||null==e?[]:t.includes("*")?(e.fields??[]).map((e=>e.name)):t}function M(e,t,i=1){if(!t||!e)return[];if(t.includes("*"))return["*"];const r=v(e,t);return r.length/e.fields.length>=i?["*"]:r}async function T(e,t,i){if(!i)return;const{arcadeUtils:r}=await(0,l.lw)(),n=r.extractFieldNames(i,t?.fields?.map((e=>e.name)));for(const i of n)b(e,t,i)}async function S(e,t,i){if(i&&"1=1"!==i){const n=await(0,o.G)(i,t);if(!n.isStandardized)throw new r.A("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});_(e,t,n.fieldNames)}}function A({displayField:e,fields:t}){return e||(t?.length?E(t,"name-or-title")||E(t,"unique-identifier")||E(t,"type-or-category")||function(e){for(const t of e){if(!t?.name)continue;const e=t.name.toLowerCase();if(e.includes("name")||e.includes("title"))return t.name}return null}(t):null)}function E(e,t){for(const i of e)if(i?.valueType&&i.valueType===t)return i.name;return null}async function x(e,t){if(!t)return;const i=t.elevationInfo?.featureExpressionInfo;return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}async function I(e,t,i){if(!t||!i||!("fields"in i))return;const r=[],n=i.popupTemplate;r.push(async function(e,t,i){const r=[];i?.expressionInfos&&r.push(...i.expressionInfos.map((i=>T(e,t.fieldsIndex,i.expression))));const n=i?.content;if(Array.isArray(n))for(const i of n)"expression"===i.type&&i.expressionInfo&&r.push(T(e,t.fieldsIndex,i.expressionInfo.expression));await Promise.all(r)}(e,t,n)),i.fields&&r.push(...i.fields.map((async i=>function(e,t,i){i.onStatisticExpression?T(e,t,i.onStatisticExpression.expression):e.add(i.onStatisticField)}(e,t.fieldsIndex,i)))),await Promise.all(r)}async function C(e,t,i){t&&(t.timeInfo&&i?.timeExtent&&_(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&_(e,t.fieldsIndex,[t.floorInfo.floorField]),null!=i?.where&&await S(e,t.fieldsIndex,i.where))}async function k(e,t,i){t&&i&&await Promise.all(i.map((i=>async function(e,t,i){t&&i&&(i.valueExpression?await T(e,t.fieldsIndex,i.valueExpression):i.field&&b(e,t.fieldsIndex,i.field))}(e,t,i))))}function N(e){return e?v(e.fieldsIndex,P(e)):[]}const L=new Set(["oid","global-id","guid"]),O=new Set(["oid","global-id"]),R=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function P(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:i,creatorField:r,editDateField:n,editorField:s}=t;return[i,r,n,s].filter(Boolean)}function D(e){return P(e).map((e=>e.toLowerCase()))}function F(e,t){return e.editable&&!L.has(e.type)&&!D(t).includes(e.name?.toLowerCase()??"")}function j(e,t){const i=e.name?.toLowerCase()??"";return!(null!=t?.objectIdField&&i===t.objectIdField.toLowerCase()||null!=t?.globalIdField&&i===t.globalIdField.toLowerCase()||function(e){const t=new Set;D(e).forEach((e=>t.add(e))),function(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?v(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}(e).forEach((e=>t.add(e.toLowerCase())));const i=e&&"infoFor3D"in e?e.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach((e=>t.add(e.toLowerCase()))),Object.values(i.transformFieldRoles).forEach((e=>t.add(e.toLowerCase())))),Array.from(t)}(t).includes(i)||O.has(e.type)||R.some((e=>e.test(i))))}async function Z(e,t){const{labelingInfo:i,fieldsIndex:r}=t;i?.length&&await Promise.all(i.map((t=>async function(e,t,i){if(!i)return;const r=i.getLabelExpression(),n=i.where;if("arcade"===r.type)await T(e,t,r.expression);else{const i=r.expression.match(/{[^}]*}/g);i&&i.forEach((i=>{b(e,t,i.slice(1,-1))}))}await S(e,t,n)}(e,r,t))))}function z(e){const t=e.defaultValue;return void 0!==t&&W(e,t)?t:e.nullable?null:void 0}function U(e){const t="string"==typeof e?{type:e}:e;return Q(t)?255:"esriFieldTypeDate"===t.type||"date"===t.type?8:void 0}function V(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function G(e){return null===e||V(e)}function B(e){return null===e||Number.isInteger(e)}function $(e){return null!=e&&"string"==typeof e}function H(e){return null===e||$(e)}function q(){return!0}function W(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=e.nullable?B:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?G:V;break;case"string":case"esriFieldTypeString":i=e.nullable?H:$;break;default:i=q}return 1===arguments.length?i:i(t)}const K=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]),Y=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]),J=(0,s.KC)(K,Y);function X(e){return null!=e&&J.has(e.type)}function Q(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}function ee(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)}function te(e){return null!=e&&("date-only"===e.type||"esriFieldTypeDateOnly"===e.type)}function ie(e){return null!=e&&("timestamp-offset"===e.type||"esriFieldTypeTimestampOffset"===e.type)}function re(e){return null!=e&&("time-only"===e.type||"esriFieldTypeTimeOnly"===e.type)}function ne(e){return null!=e&&("oid"===e.type||"esriFieldTypeOID"===e.type)}function se(e){return null!=e&&("global-id"===e.type||"esriFieldTypeGlobalID"===e.type)}function oe(e,t){return null===he(e,t)}var ae,le;function ce(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function he(e,t){return null==e||e.nullable&&null===t?null:X(e)&&!function(e,t){const i="string"==typeof e?ue(e):e;if(!i)return!1;const r=i.min,n=i.max;return i.isInteger?Number.isInteger(t)&&t>=r&&t<=n:t>=r&&t<=n}(e.type,Number(t))?ae.OUT_OF_RANGE:W(e,t)?e.domain?(0,a.wb)(e,t):null:le.INVALID_TYPE}function ue(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return pe;case"esriFieldTypeInteger":case"integer":return de;case"esriFieldTypeBigInteger":case"big-integer":return fe;case"esriFieldTypeSingle":case"single":return ye;case"esriFieldTypeDouble":case"double":return me}}(ae||(ae={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range",function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(le||(le={}));const pe={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},de={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},fe={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},ye={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},me={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function ge(e,t,i){switch(e){case a.Mh.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case a.Mh.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case le.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case ae.OUT_OF_RANGE:{const{min:e,max:r}=ue(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${e} to ${r}`}}}function ve(e,t){return!function(e,t,i){if(!t?.attributes||!e)return!0;const r=new Set(Object.keys(t.attributes));let n=!1;for(const t of e)if(!r.has(t)){n=!0;break}return n}(e,t)}function _e(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some((t=>e.toLowerCase().startsWith(t)))}},57179:(e,t,i)=>{"use strict";function r(e){const t=e.layer;return"floorInfo"in t&&t.floorInfo?.floorField&&"floors"in e.view?s(e.view.floors,t.floorInfo.floorField):null}function n(e,t){return"floorInfo"in t&&t.floorInfo?.floorField?s(e,t.floorInfo.floorField):null}function s(e,t){if(!e?.length)return null;const i=e.filter((e=>""!==e)).map((e=>`'${e}'`));return i.push("''"),`${t} IN (${i.join(",")}) OR ${t} IS NULL`}i.d(t,{E:()=>r,f:()=>n})},61845:(e,t,i)=>{"use strict";i.d(t,{BI:()=>m,D3:()=>f,XJ:()=>y,lc:()=>d,mX:()=>v,rU:()=>g,tH:()=>T});var r=i(21332);const n="__begin__",s="__end__",o=new RegExp(n,"ig"),a=new RegExp(s,"ig"),l=new RegExp("^"+n,"i"),c=new RegExp(s+"$","i"),h='"',u=h+" + ",p=" + "+h;function d(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function f(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function y(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=d(e.labelExpression),t.type="conventional"),t}function m(e){const t=y(e);if(!t)return null;switch(t.type){case"conventional":return v(t.expression);case"arcade":return t.expression}return null}function g(e){const t=y(e);if(!t)return null;switch(t.type){case"conventional":return function(e){const t=e?.match(_);return t?.[1].trim()||null}(t.expression);case"arcade":return T(t.expression)}return null}function v(e){let t;return e?(t=(0,r.HC)(e,(e=>n+'$feature["'+e+'"]'+s)),t=l.test(t)?t.replace(l,""):h+t,t=c.test(t)?t.replace(c,""):t+h,t=t.replaceAll(o,u).replaceAll(a,p)):t='""',t}const _=/^\s*\{([^}]+)\}\s*$/i,b=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,w=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,M=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function T(e){if(!e)return null;let t=b.exec(e)||w.exec(e);return t?t[1]||t[3]:(t=M.exec(e),t?t[2]:null)}},6488:(e,t,i)=>{"use strict";i.d(t,{w:()=>c,z:()=>u});var r=i(62991),n=i(15565),s=i(80861),o=i(15724);const a=()=>s.A.getLogger("esri.layers.support.labelingInfo"),l=/\[([^\[\]]+)\]/gi;function c(e,t,i){return e?e.map((e=>{const r=new o.A;if(r.read(e,i),r.labelExpression){const e=t.fields||t.layerDefinition?.fields||this.fields;r.labelExpression=r.labelExpression.replaceAll(l,((t,i)=>`[${function(e,t){if(!t)return e;const i=e.toLowerCase();for(let e=0;e<t.length;e++){const r=t[e].name;if(r.toLowerCase()===i)return r}return e}(i,e)}]`))}return r})):null}const h={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};function u(e,t){const i=(0,n.o8)(e);return i.some((e=>function(e,t){const i=e.labelPlacement,n=h[t];if(!e.symbol)return a().warn("No ILabelClass symbol specified."),!0;if(!n)return a().error(new r.A("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),!0;if(!n.includes(i)){const r=n[0];i&&a().warn(`Found invalid label placement type ${i} for ${t}. Defaulting to ${r}`),e.labelPlacement=r}return!1}(e,t)))?[]:i}},65452:(e,t,i)=>{"use strict";i.d(t,{BR:()=>M,Eq:()=>g,F2:()=>u,Ov:()=>v,Qz:()=>h,Rv:()=>l,Sv:()=>p,TU:()=>m,V0:()=>a,W_:()=>_,XX:()=>y,cM:()=>c,ce:()=>s,qK:()=>f,r$:()=>d,r0:()=>b,tk:()=>T,wI:()=>w,yZ:()=>o});var r=i(6480),n=i(38116);function s(e){return d(e)||function(e){return"scene"===e?.type}(e)}function o(e){return null!=e&&"object"==typeof e&&"type"in e&&"feature"===e.type}function a(e){return null!=e&&"object"==typeof e&&"type"in e&&"graphics"===e.type}function l(e){return null!=e&&"object"==typeof e&&"type"in e&&"map-notes"===e.type&&"sublayers"in e}function c(e){return null!=e&&"object"==typeof e&&"type"in e&&"knowledge-graph"===e.type&&"layers"in e}function h(e){return null!=e&&"object"==typeof e&&"type"in e&&"link-chart"===e.type&&"layers"in e}function u(e){return null!=e&&"object"==typeof e&&"type"in e&&"subtype-group"===e.type&&"sublayers"in e}function p(e){return"subtype-sublayer"===e?.type}function d(e){const t=e?.type;return"imagery-tile"===t||"tile"===t||"open-street-map"===t||"vector-tile"===t||"web-tile"===t||"wmts"===t}function f(e){const t=e?.type;return"base-tile"===t||"tile"===t||"elevation"===t||"imagery-tile"===t||"base-elevation"===t||"open-street-map"===t||"wcs"===t||"web-tile"===t||"wmts"===t||"vector-tile"===t}const y={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function m(e){const t=e?.type;return"building-scene"===t||"integrated-mesh"===t||"point-cloud"===t||"scene"===t}function g(e){return"integrated-mesh"===e||"integrated-mesh-3dtiles"===e}function v(e){return"feature"===e?.type&&!e.url&&"memory"===e.source?.type}function _(e){return("feature"===e?.type||"subtype-group"===e?.type)&&"feature-layer"===e.source?.type}function b(e){if(e.activeLayer){const t=e.activeLayer.tileMatrixSet;if(t)return t;const i=e.activeLayer.tileMatrixSets;if(i)return i}return null}async function w(e,t){const i=r.id?.findServerInfo(e);if(null!=i?.currentVersion)return i.owningSystemUrl||null;const s=e.toLowerCase().indexOf("/rest/services");if(-1===s)return null;const o=`${e.substring(0,s)}/rest/info`,a=null!=t?t.signal:null,{data:l}=await(0,n.A)(o,{query:{f:"json"},responseType:"json",signal:a});return l?.owningSystemUrl||null}function M(e){return function(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function T(e){return!!function(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}},6246:(e,t,i)=>{"use strict";i.d(t,{Sp:()=>c,X1:()=>a,hP:()=>o,zw:()=>l});const r=9999999e31,n=2e-7,s={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function o(e){return s[e]??[-34028234663852886e22,34028234663852886e22]}function a(e,t){return null==e||null==t?"s32":e<0?e>=-128&&t<128?"s8":e>=-32768&&t<32768?"s16":"s32":t<256?"u8":t<65536?"u16":"u32"}function l(e){return(e?.startsWith("s")||e?.startsWith("u"))??!1}function c(e,t,i){if(e.depthCount&&e.depthCount>1)return;const{pixels:s,statistics:a,pixelType:l}=e,c=s[0].length,h=e.bandMasks??[],u=e.mask??new Uint8Array(c).fill(255),p="f32"===l||"f64"===l,d=o(l);let f=!1;for(let e=0;e<s.length;e++){const o="number"==typeof t?t:t[e];if(null==o)continue;const c=a?.[e]?.minValue??d[0],y=a?.[e]?.maxValue??d[1];if(c>o+Number.EPSILON||y<o-Number.EPSILON)continue;const m=h[e]||u.slice(),g=s[e],v=i?.customFloatTolerance;if(p&&0!==v){let e=v;e||(e=Math.abs(o)>=r?n*Math.abs(o):"f32"===l?2**-23:Number.EPSILON);for(let t=0;t<g.length;t++)m[t]&&Math.abs(g[t]-o)<e&&(g[t]=0,m[t]=0,u[t]=0,f=!0)}else for(let e=0;e<g.length;e++)m[e]&&g[e]===o&&(g[e]=0,m[e]=0,u[e]=0,f=!0);h[e]=m}f&&(e.bandMasks=e.bandMasks||e.pixels.length>1?h:null,e.mask=u),f&&"updateStatistics"in e&&e.updateStatistics()}},76456:(e,t,i)=>{"use strict";i.d(t,{S:()=>u});var r=i(6273),n=i(63457);function s(e,t,i){return!!a(e,t,i)}function o(e,t,i){return a(e,t,i)}function a(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i}const l={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function c(e){const t=e?.supportedSpatialAggregationStatistics?.map((e=>e.toLowerCase()));return{envelope:!!t?.includes("envelopeaggregate"),centroid:!!t?.includes("centroidaggregate"),convexHull:!!t?.includes("convexhullaggregate")}}function h(e,t){const i=e?.supportedOperationsWithCacheHint?.map((e=>e.toLowerCase()));return!!i?.includes(t.toLowerCase())}function u(e,t){return{analytics:p(e),attachment:d(e),data:f(e),metadata:y(e),operations:m(e.capabilities,e,t),query:g(e,t),queryRelated:v(e),queryTopFeatures:_(e),editing:b(e)}}function p(e){return{supportsCacheHint:h(e.advancedQueryCapabilities,"queryAnalytics")}}function d(e){const t=e.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:h(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:s(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach((e=>{const t=l[e.name];t&&(i[t]=!!e.isEnabled)})),i}function f(e){return{isVersioned:s(e,"isDataVersioned",!1),supportsAttachment:s(e,"hasAttachments",!1),supportsM:s(e,"hasM",!1),supportsZ:s(e,"hasZ",!1)}}function y(e){return{supportsAdvancedFieldProperties:s(e,"supportsFieldDescriptionProperty",!1)}}function m(e,t,i){const r=e?e.toLowerCase().split(",").map((e=>e.trim())):[],o=i?(0,n.qg)(i):null,a=r.includes(null!=o&&"MapServer"===o.serverType?"data":"query"),l=r.includes("editing")&&!t.datesInUnknownTimezone;let c=l&&r.includes("create"),h=l&&r.includes("delete"),u=l&&r.includes("update");const p=r.includes("changetracking"),d=t.advancedQueryCapabilities;return l&&!(c||h||u)&&(c=h=u=!0),{supportsCalculate:s(t,"supportsCalculate",!1),supportsTruncate:s(t,"supportsTruncate",!1),supportsValidateSql:s(t,"supportsValidateSql",!1),supportsAdd:c,supportsDelete:h,supportsEditing:l,supportsChangeTracking:p,supportsQuery:a,supportsQueryAnalytics:s(d,"supportsQueryAnalytic",!1),supportsQueryAttachments:s(d,"supportsQueryAttachments",!1),supportsQueryTopFeatures:s(d,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:s(t,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:u,supportsExceedsLimitStatistics:s(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:s(t,"supportsAsyncConvert3D",!1)}}function g(e,t){const i=e.advancedQueryCapabilities,a=e.ownershipBasedAccessControlForFeatures,l=e.archivingInfo,u=e.currentVersion,p=t?.includes("MapServer"),d=!p||u>=(0,r.A)("mapserver-pbf-version-support"),f=(0,n.Wo)(t),y=new Set((e.supportedQueryFormats??"").split(",").map((e=>e.toLowerCase().trim())));return{supportsStatistics:s(i,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:s(i,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:s(i,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:c(i),supportsCentroid:s(i,"supportsReturningGeometryCentroid",!1),supportsDistance:s(i,"supportsQueryWithDistance",!1),supportsDistinct:s(i,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:s(i,"supportsReturningQueryExtent",!1),supportsGeometryProperties:s(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:s(i,"supportsHavingClause",!1),supportsOrderBy:s(i,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:s(i,"supportsPagination",!1),supportsQuantization:s(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:s(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:s(e,"supportsReturningQueryGeometry",!1),supportsResultType:s(i,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:s(i,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:s(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:s(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:s(i,"supportsTopFeaturesQuery",!1),supportsQueryByAnonymous:s(a,"allowAnonymousToQuery",!0),supportsQueryByOthers:s(a,"allowOthersToQuery",!0),supportsHistoricMoment:s(l,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:d&&y.has("pbf"),supportsDisjointSpatialRelationship:s(i,"supportsDisjointSpatialRel",!1),supportsCacheHint:s(i,"supportsQueryWithCacheHint",!1)||h(i,"query"),supportsDefaultSpatialReference:s(i,"supportsDefaultSR",!1),supportsCompactGeometry:f,supportsFullTextSearch:s(i,"supportsFullTextSearch",!1),maxRecordCountFactor:o(e,"maxRecordCountFactor",void 0),maxRecordCount:o(e,"maxRecordCount",void 0),standardMaxRecordCount:o(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:o(e,"tileMaxRecordCount",void 0)}}function v(e){const t=e.advancedQueryCapabilities,i=s(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:s(t,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:h(t,"queryRelated")}}function _(e){return{supportsCacheHint:h(e.advancedQueryCapabilities,"queryTopFilter")}}function b(e){const t=e.ownershipBasedAccessControlForFeatures,i=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:s(e,"allowGeometryUpdates",!0),supportsGlobalId:s(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:s(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:s(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:s(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:s(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:s(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:s(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:s(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:s(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:s(i,"supportsAsyncApplyEdits",!1),zDefault:o(e,"zDefault",void 0)}}},17308:(e,t,i)=>{"use strict";i.d(t,{L:()=>L});var r,n=i(82392),s=i(1817),o=i(84977),a=i(81482),l=i(77380),c=i(85716),h=i(25376),u=i(26325),p=i(8636),d=i(9283),f=i(45352),y=i(90440),m=(i(3313),i(6273),i(80861),i(67498),i(44153)),g=i(54483);let v=r=class extends o.oY{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:i,spatialReference:n,geometryType:s}=this,o={workspaceId:e,query:t,oidFields:i,spatialReference:n?.clone()??void 0,geometryType:s};return new r(o)}};var _;(0,n._)([(0,c.e)({queryTable:"query-table"})],v.prototype,"type",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],v.prototype,"workspaceId",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],v.prototype,"query",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],v.prototype,"oidFields",void 0),(0,n._)([(0,a.MZ)({type:m.A,json:{write:!0}})],v.prototype,"spatialReference",void 0),(0,n._)([(0,c.e)(g.g)],v.prototype,"geometryType",void 0),v=r=(0,n._)([(0,u.$)("esri.layers.support.source.QueryTableDataSource")],v);let b=_=class extends o.oY{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new _({workspaceId:e,dataSourceName:t})}};var w;(0,n._)([(0,c.e)({raster:"raster"})],b.prototype,"type",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],b.prototype,"dataSourceName",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],b.prototype,"workspaceId",void 0),b=_=(0,n._)([(0,u.$)("esri.layers.support.source.RasterDataSource")],b);let M=w=class extends o.oY{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:i}=this;return new w({workspaceId:e,gdbVersion:t,dataSourceName:i})}};var T,S;(0,n._)([(0,c.e)({table:"table"})],M.prototype,"type",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],M.prototype,"workspaceId",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],M.prototype,"gdbVersion",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],M.prototype,"dataSourceName",void 0),M=w=(0,n._)([(0,u.$)("esri.layers.support.source.TableDataSource")],M);const A=(0,s.O)()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let E=T=class extends o.oY{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,i){return I()(e,t,i)}castLeftTableSource(e){return(0,p.aq)(k(),e)}readRightTableSource(e,t,i){return I()(e,t,i)}castRightTableSource(e){return(0,p.aq)(k(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:i,rightTableSource:r,joinType:n}=this,s={leftTableKey:e,rightTableKey:t,leftTableSource:i?.clone()??void 0,rightTableSource:r?.clone()??void 0,joinType:n};return new T(s)}};(0,n._)([(0,c.e)({joinTable:"join-table"})],E.prototype,"type",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],E.prototype,"leftTableKey",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],E.prototype,"rightTableKey",void 0),(0,n._)([(0,a.MZ)({json:{write:!0}})],E.prototype,"leftTableSource",void 0),(0,n._)([(0,h.w)("leftTableSource")],E.prototype,"readLeftTableSource",null),(0,n._)([(0,l.w)("leftTableSource")],E.prototype,"castLeftTableSource",null),(0,n._)([(0,a.MZ)({json:{write:!0}})],E.prototype,"rightTableSource",void 0),(0,n._)([(0,h.w)("rightTableSource")],E.prototype,"readRightTableSource",null),(0,n._)([(0,l.w)("rightTableSource")],E.prototype,"castRightTableSource",null),(0,n._)([(0,c.e)(A)],E.prototype,"joinType",void 0),E=T=(0,n._)([(0,u.$)("esri.layers.support.source.JoinTableDataSource")],E);let x=null;function I(){return x||(x=(0,d.C)({types:k()})),x}let C=null;function k(){return C||(C={key:"type",base:null,typeMap:{"data-layer":L,"map-layer":y.f}}),C}const N={key:"type",base:null,typeMap:{"join-table":E,"query-table":v,raster:b,table:M}};let L=S=class extends o.oY{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new S({fields:e,dataSource:t})}};(0,n._)([(0,c.e)({dataLayer:"data-layer"})],L.prototype,"type",void 0),(0,n._)([(0,a.MZ)({type:[f.A],json:{write:!0}})],L.prototype,"fields",void 0),(0,n._)([(0,a.MZ)({types:N,json:{write:!0}})],L.prototype,"dataSource",void 0),L=S=(0,n._)([(0,u.$)("esri.layers.support.source.DataLayerSource")],L),L.from=(0,p.dp)(L)},90440:(e,t,i)=>{"use strict";i.d(t,{f:()=>h});var r,n=i(82392),s=i(84977),o=i(81482),a=i(8636),l=(i(67498),i(6273),i(85716)),c=i(26325);let h=r=class extends s.oY{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new r({mapLayerId:e,gdbVersion:t})}};(0,n._)([(0,l.e)({mapLayer:"map-layer"})],h.prototype,"type",void 0),(0,n._)([(0,o.MZ)({type:a.jz,json:{write:!0}})],h.prototype,"mapLayerId",void 0),(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],h.prototype,"gdbVersion",void 0),h=r=(0,n._)([(0,c.$)("esri.layers.support.source.MapLayerSource")],h)},22508:(e,t,i)=>{"use strict";i.d(t,{Sk:()=>s,Zx:()=>n,_X:()=>a});var r=i(91101);function n(e,t,i){const r=t.flatten((({sublayers:e})=>e)).length;return r!==e.length||!!e.some((e=>e.originIdOf("minScale")>i||e.originIdOf("maxScale")>i||e.originIdOf("renderer")>i||e.originIdOf("labelingInfo")>i||e.originIdOf("opacity")>i||e.originIdOf("labelsVisible")>i||e.originIdOf("source")>i))||!o(e,t)}function s(e,t,i){return!!e.some((e=>{const t=e.source;return!(!t||"map-layer"===t.type&&t.mapLayerId===e.id&&(null==t.gdbVersion||t.gdbVersion===i))||e.originIdOf("renderer")>r.Gr.SERVICE||e.originIdOf("labelingInfo")>r.Gr.SERVICE||e.originIdOf("opacity")>r.Gr.SERVICE||e.originIdOf("labelsVisible")>r.Gr.SERVICE}))||!o(e,t)}function o(e,t){if(!e?.length||null==t)return!0;const i=t.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).map((e=>e.id)).toArray();if(e.length>i.length)return!1;let r=0;const n=i.length;for(const{id:t}of e){for(;r<n&&i[r]!==t;)r++;if(r>=n)return!1}return!0}function a(e){return!!e&&e.some((e=>null!=e.minScale||null!=e.layerDefinition?.minScale))}},23123:(e,t,i)=>{"use strict";i.d(t,{D:()=>s});var r=i(63457);const n=[];function s(e,t){if((0,r.Wo)(e.url??""))return!0;const{wkid:i}=t;for(const t of n){if((e.version??0)>=t[0])return!0;if("function"==typeof t[1]&&(t[1]=t[1]()),t[1].has(i))return!1}return!0}n.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),n.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),n.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),n.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),n.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]),n.push([10.7,()=>{const e=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let t=8065;t<=8068;t++)e.add(t);for(let t=8082;t<=8083;t++)e.add(t);for(let t=8379;t<=8385;t++)e.add(t);for(let t=8836;t<=8840;t++)e.add(t);for(let t=8857;t<=8860;t++)e.add(t);for(let t=53035;t<=53037;t++)e.add(t);for(let t=54090;t<=54091;t++)e.add(t);for(let t=102498;t<=102499;t++)e.add(t);return e}]),n.push([10.61,()=>new Set([102497])]),n.push([10.6,()=>{const e=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let t=7755;t<=7787;t++)e.add(t);for(let t=7791;t<=7795;t++)e.add(t);for(let t=7799;t<=7801;t++)e.add(t);for(let t=7825;t<=7831;t++)e.add(t);for(let t=7877;t<=7878;t++)e.add(t);for(let t=7882;t<=7883;t++)e.add(t);for(let t=7991;t<=7992;t++)e.add(t);for(let t=8042;t<=8043;t++)e.add(t);for(let t=8058;t<=8059;t++)e.add(t);for(let t=8311;t<=8348;t++)e.add(t);for(let t=9060;t<=9067;t++)e.add(t);for(let t=102562;t<=102568;t++)e.add(t);for(let t=102799;t<=102900;t++)e.add(t);return e}])},95665:(e,t,i)=>{"use strict";i.d(t,{R:()=>s,t:()=>o});var r=i(2980);const n={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{"-"===t.charAt(0)?e.style.setProperty(t,i):e.style[t]=i}};let s=e=>(0,r.X$)(n,e),o={create:(e,t)=>(t=s(t),(0,r.dj)(e,document.createElement("div"),void 0,t),(0,r.Av)(e,t)),append:(e,t,i)=>(i=s(i),(0,r.dj)(t,e,void 0,i),(0,r.Av)(t,i)),insertBefore:(e,t,i)=>(i=s(i),(0,r.dj)(t,e.parentNode,e,i),(0,r.Av)(t,i)),merge:(e,t,i)=>(i=s(i),t.domNode=e,(0,r.OM)(e,t,i),(0,r.Av)(t,i)),replace:(e,t,i)=>(i=s(i),(0,r.dj)(t,e.parentNode,e,i),e.parentNode.removeChild(e),(0,r.Av)(t,i))}},2980:(e,t,i)=>{"use strict";i.d(t,{Av:()=>I,OM:()=>T,X$:()=>l,dj:()=>S});var r=i(33510);const n="http://www.w3.org/",s=`${n}2000/svg`,o=`${n}1999/xlink`;let a=[],l=(e,t)=>{let i={};return Object.keys(e).forEach((t=>{i[t]=e[t]})),t&&Object.keys(t).forEach((e=>{i[e]=t[e]})),i},c=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),h=e=>{if("string"!=typeof e)throw new Error("Style values must be strings")},u=(e,t,i)=>{if(""!==t.vnodeSelector)for(let r=i;r<e.length;r++)if(c(e[r],t))return r;return-1},p=(e,t,i,r)=>{let n=e[t];if(""===n.vnodeSelector)return;let s=n.properties;if(!(s?void 0===s.key?s.bind:s.key:void 0))for(let s=0;s<e.length;s++)if(s!==t){let t=e[s];if(c(t,n))throw new Error(`${i.vnodeSelector} had a ${n.vnodeSelector} child ${"added"===r?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}},d=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},f=[],y=!1,m=e=>{(e.children||[]).forEach(m),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},g=()=>{y=!1,f.forEach(m),f.length=0},v=e=>{f.push(e),y||(y=!0,"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(g,{timeout:16}):setTimeout(g,16))},_=e=>{let t=e.domNode;if(e.properties){let i=e.properties.exitAnimation;if(i){t.style.pointerEvents="none";let r=()=>{t.parentNode&&(t.parentNode.removeChild(t),v(e))};return void i(t,r,e.properties)}}t.parentNode&&(t.parentNode.removeChild(t),v(e))},b=(e,t,i)=>{if(!t)return;let n=i.eventHandlerInterceptor,a=Object.keys(t),l=a.length;for(let c=0;c<l;c++){let l=a[c],u=t[l];if("className"===l)throw new Error('Property "className" is not supported, use "class".');if("class"===l)A(e,u,!0);else if("classes"===l){let t=Object.keys(u),i=t.length;for(let r=0;r<i;r++){let i=t[r];u[i]&&e.classList.add(i)}}else if("styles"===l){let t=Object.keys(u),r=t.length;for(let n=0;n<r;n++){let r=t[n],s=u[r];s&&(h(s),i.styleApplyer(e,r,s))}}else if("key"!==l&&null!=u){let a=typeof u;"function"===a?(0===l.lastIndexOf("on",0)&&(n&&(u=n(l,u,e,t)),"oninput"===l&&function(){let e=u;u=function(t){e.apply(this,[t]),t.target["oninput-value"]=t.target.value}}()),e[l]=u):i.namespace===s?"href"===l?e.setAttributeNS(o,l,u):e.setAttribute(l,u):"string"===a&&"value"!==l?"innerHTML"===l?e[l]=r.W5.sanitize(u):w(e)&&l in e?e[l]=u:e.setAttribute(l,u):e[l]=u}}};function w(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let M,T=(e,t,i)=>{((e,t,i)=>{if(t)for(let r of t)S(r,e,void 0,i)})(e,t.children,i),t.text&&(e.textContent=t.text),b(e,t.properties,i),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,i,t.vnodeSelector,t.properties,t.children])},S=(e,t,i,r)=>{let n,o=0,a=e.vnodeSelector,c=t.ownerDocument;if(""===a)n=e.domNode=c.createTextNode(e.text),void 0!==i?t.insertBefore(n,i):t.appendChild(n);else{for(let h=0;h<=a.length;++h){let u=a.charAt(h);if(h===a.length||"."===u||"#"===u){let u=a.charAt(o-1),p=a.slice(o,h);"."===u?n.classList.add(p):"#"===u?n.id=p:("svg"===p&&(r=l(r,{namespace:s})),void 0!==r.namespace?n=e.domNode=c.createElementNS(r.namespace,p):(n=e.domNode=e.domNode||c.createElement(p),"input"===p&&e.properties&&void 0!==e.properties.type&&n.setAttribute("type",e.properties.type)),void 0!==i?t.insertBefore(n,i):n.parentNode!==t&&t.appendChild(n)),o=h+1}}T(n,e,r)}},A=(e,t,i)=>{t&&t.split(" ").forEach((t=>{t&&e.classList.toggle(t,i)}))},E=(e,t,i,n)=>{if(!i)return;let a=!1,l=Object.keys(i),c=l.length;for(let u=0;u<c;u++){let c=l[u],p=i[c],d=t[c];if("class"===c)d!==p&&(A(e,d,!1),A(e,p,!0));else if("classes"===c){let t=e.classList,i=Object.keys(p),r=i.length;for(let e=0;e<r;e++){let r=i[e],n=!!p[r];n!==!!d[r]&&(a=!0,n?t.add(r):t.remove(r))}}else if("styles"===c){let t=Object.keys(p),i=t.length;for(let r=0;r<i;r++){let i=t[r],s=p[i];s!==d[i]&&(a=!0,s?(h(s),n.styleApplyer(e,i,s)):n.styleApplyer(e,i,""))}}else if(p||"string"!=typeof d||(p=""),"value"!==c||w(e)){if(p!==d){let t=typeof p;"function"===t&&n.eventHandlerInterceptor||(n.namespace===s?"href"===c?e.setAttributeNS(o,c,p):e.setAttribute(c,p):"string"===t?"innerHTML"===c?e[c]=r.W5.sanitize(p):"role"===c&&""===p?e.removeAttribute(c):w(e)&&c in e?e[c]=p:e.setAttribute(c,p):e[c]!==p&&(e[c]=p),a=!0)}}else{let t=e[c];t!==p&&(e["oninput-value"]?t===e["oninput-value"]:p!==d)&&(e[c]=p,e["oninput-value"]=void 0),p!==d&&(a=!0)}}return a},x=(e,t,i,r,n)=>{if(i===r)return!1;r=r||a;let s,o=(i=i||a).length,l=r.length,h=0,f=0,y=!1;for(;f<l;){let a=h<o?i[h]:void 0,l=r[f];if(void 0!==a&&c(a,l))y=M(a,l,n)||y,h++;else{let a=u(i,l,h+1);if(a>=0){for(s=h;s<a;s++)_(i[s]),p(i,s,e,"removed");y=M(i[a],l,n)||y,h=a+1}else S(l,t,h<o?i[h].domNode:void 0,n),d(l),p(r,f,e,"added")}f++}if(o>h)for(s=h;s<o;s++)_(i[s]),p(i,s,e,"removed");return y};M=(e,t,i)=>{let r=e.domNode,n=!1;if(e===t)return!1;let o=!1;if(""===t.vnodeSelector){if(t.text!==e.text){let e=r.ownerDocument.createTextNode(t.text);return r.parentNode.replaceChild(e,r),t.domNode=e,n=!0,n}t.domNode=r}else 0===t.vnodeSelector.lastIndexOf("svg",0)&&(i=l(i,{namespace:s})),e.text!==t.text&&(o=!0,void 0===t.text?r.removeChild(r.firstChild):r.textContent=t.text),t.domNode=r,o=x(t,r,e.children,t.children,i)||o,o=E(r,e.properties,t.properties,i)||o,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[r,i,t.vnodeSelector,t.properties,t.children]);return o&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(r,t.properties,e.properties),n};let I=(e,t)=>({getLastRender:()=>e,update:i=>{if(e.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=e;e=i,M(r,i,t)},domNode:e.domNode})},58133:(e,t,i)=>{"use strict";i.d(t,{F:()=>a});var r=i(95665);let n;n=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let s=(e,t)=>{let i=e;return t.forEach((e=>{i=i&&i.children?n(i.children,(t=>t.domNode===e)):void 0})),i},o=(e,t,i)=>{let r=function(r){i("domEvent",r);let n=t(),o=((e,t)=>{let i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i})(r.currentTarget,n.domNode);o.reverse();let a,l=s(n.getLastRender(),o);return e.scheduleRender(),l&&(a=l.properties[`on${r.type}`].apply(l.properties.bind||this,arguments)),i("domEventProcessed",r),a};return(e,t,i,n)=>r},a=e=>{let t,i,n=(0,r.R)(e),s=n.performanceLogger,a=!0,l=!1,c=[],h=[],u=(e,i,r)=>{let a;n.eventHandlerInterceptor=o(t,(()=>a),s),a=e(i,r(),n),c.push(a),h.push(r)},p=()=>{if(i=void 0,a){a=!1,s("renderStart",void 0);for(let e=0;e<c.length;e++){let t=h[e]();s("rendered",void 0),c[e].update(t),s("patched",void 0)}s("renderDone",void 0),a=!0}};return t={renderNow:p,scheduleRender:()=>{i||l||(i=requestAnimationFrame(p))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),l=!0},resume:()=>{l=!1,a=!0,t.scheduleRender()},append:(e,t)=>{u(r.t.append,e,t)},insertBefore:(e,t)=>{u(r.t.insertBefore,e,t)},merge:(e,t)=>{u(r.t.merge,e,t)},replace:(e,t)=>{u(r.t.replace,e,t)},detach:e=>{for(let t=0;t<h.length;t++)if(h[t]===e)return h.splice(t,1),c.splice(t,1)[0];throw new Error("renderFunction was not found")}},t}},52442:(e,t,i)=>{"use strict";i.d(t,{default:()=>J});var r=i(82392),n=i(20857),s=i(81482),o=(i(6273),i(80861)),a=(i(67498),i(26325)),l=i(85049),c=i(5213),h=(i(3313),i(38116)),u=i(62991),p=i(11965),d=i(67214),f=i(37623),y=i(19759),m=i(8e3),g=i(56053),v=i(88940),_=i(63457),b=i(1817),w=i(85716),M=i(57458);const T=(0,b.O)()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let S=class extends M.A{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const t={...e,query:{f:"json"}},{data:i}=await(0,h.A)(this.statusUrl,t);return this.read(i),this.editsResolver&&this.editsResolver.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0,historicMoment:null}),this}async waitForJobCompletion(e={}){const{interval:t=1e3,statusCallback:i}=e;return new Promise(((e,r)=>{this._clearTimer();const n=setInterval((()=>{this._timer||r((0,f.NK)()),this.checkJobStatus().then((t=>{const{status:r}=t;switch(this.status=r,r){case"job-succeeded":this._clearTimer(),e(this);break;case"job-waiting":case"job-executing":i&&i(this)}}),(e=>{this._clearTimer(),r(e)}))}),t);this._timer=n}))}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};(0,r._)([(0,s.MZ)()],S.prototype,"editsResolver",void 0),(0,r._)([(0,s.MZ)({type:String,json:{write:!0}})],S.prototype,"statusUrl",void 0),(0,r._)([(0,w.e)(T)],S.prototype,"status",void 0),(0,r._)([(0,s.MZ)({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.submissionTime=e?e.getTime():null}}}})],S.prototype,"submissionTime",void 0),(0,r._)([(0,s.MZ)({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.lastUpdatedTime=e?e.getTime():null}}}})],S.prototype,"lastUpdatedTime",void 0),S=(0,r._)([(0,a.$)("esri.networks.support.TopologyValidationJobInfo")],S);const A=S;var E=i(43305);async function x(e,t){if("Utility Network Layer"===e){const{default:e}=await Promise.resolve().then(i.bind(i,52442));return new e({layerUrl:t})}return null}i(74704);var I=i(6893),C=i(44153);let k=class extends((0,d.P)(p.A)){static fromPortalItem(e){return async function(e){let t="portalItem"in e?e:{portalItem:e};!t.portalItem||t.portalItem instanceof E.default||(t={...t,portalItem:new E.default(t.portalItem)});const i=t.portalItem;if(await i.load(),"Feature Service"!==i.type)throw new u.A("portal:unknown-item-type","Unknown item type '${type}'",{type:i.type});const r=i.url,n=await(0,h.A)(r,{responseType:"json",query:{f:"json"}}),s="Network Layer";if(n.data.type?.includes(s))return x(n.data.type,r);if(n.data.layers){const e=n.data.layers.find((e=>e.type.includes(s)));if(e){const t=`${r}/${e.id}`;return x(e.type,t)}}return null}(e)}constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null,this.gdbVersion=null,this.historicMoment=null,this._applyEditsHandler=e=>{const{serviceUrl:t,gdbVersion:i,result:r}=e,n=t===this.featureServiceUrl,s=(0,v.gz)(t,i,this.gdbVersion);n&&s&&r.then((e=>{(0,I.w5)(t,i)&&(this.historicMoment=e.historicMoment)}))},this._updateMomentHandler=e=>{const{serviceUrl:t,gdbVersion:i,moment:r}=e,n=t===this.featureServiceUrl,s=(0,v.gz)(t,i,this.gdbVersion);n&&s&&(this.historicMoment=r)},this.when().then((()=>{this.addHandles([(0,v.Jz)(this._applyEditsHandler),(0,v.dP)(this._updateMomentHandler)])}),(()=>{}))}initialize(){this.when().catch((e=>{(0,f.zf)(e)||o.A.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})}))}get datasetName(){return this.dataElement?.name??null}get owner(){return this.dataElement?.userIdentity??null}get schemaGeneration(){return this.dataElement?.schemaGeneration??null}get parsedUrl(){return(0,y.An)(this.layerUrl)}get featureServiceUrl(){return(0,_.qg)(this.parsedUrl.path).url.path}get networkServiceUrl(){return this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer")}get layerId(){return(0,_.qg)(this.parsedUrl.path).sublayer}get networkSystemLayers(){return null}async load(e){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,e)),this}getLayerIdBySourceId(e){if(this.dataElement){const t=this.dataElement.domainNetworks;for(const i of t){for(const t of i.edgeSources??[])if(t.sourceId===e)return t.layerId;for(const t of i.junctionSources??[])if(t.sourceId===e)return t.layerId}return null}return null}async queryNamedTraceConfigurations(e,t){const[{queryNamedTraceConfigurations:r},{default:n}]=await Promise.all([i.e(1939).then(i.bind(i,51939)),i.e(3067).then(i.bind(i,25448))]),s=this.networkServiceUrl,o=n.from(e);return(await r(s,o,{...t}))?.namedTraceConfigurations}async validateTopology(e,t){if(!e.validateArea)throw new u.A("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const[{validateNetworkTopology:r},{default:n}]=await Promise.all([i.e(3343).then(i.bind(i,73343)),i.e(3083).then(i.bind(i,23083))]),s=n.from(e);(0,I.w5)(this.featureServiceUrl,this.gdbVersion||null)?s.sessionID=I.TA:s.sessionID=null,s.gdbVersion=this.gdbVersion;const o=this.networkServiceUrl,a=this.featureServiceUrl,l=(0,v.Zk)(a,null,this.gdbVersion,!0),c=await r(o,s,{...t});if(c?.serviceEdits){const e=[];for(const t of c.serviceEdits){const{editedFeatures:i}=t,r=i?.spatialReference?new C.A(i.spatialReference):null;e.push({layerId:t.layerId,editedFeatures:{adds:i?.adds?.map((e=>this._createEditedFeature(e,r)))||[],updates:i?.updates?.map((e=>({original:this._createEditedFeature(e[0],r),current:this._createEditedFeature(e[1],r)})))||[],deletes:i?.deletes?.map((e=>this._createEditedFeature(e,r)))||[],spatialReference:r}})}l.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:e,exceededTransferLimit:!1,historicMoment:c.moment})}return c}async submitTopologyValidationJob(e,t){let r=null;if(!e.validateArea)throw new u.A("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");if(!this.gdbVersion){const e=this.layerUrl.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");r=(await(0,h.A)(e,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}const[{submitValidateNetworkTopologyJob:n},{default:s}]=await Promise.all([i.e(3343).then(i.bind(i,73343)),i.e(3083).then(i.bind(i,23083))]),o=s.from(e);(0,I.w5)(this.featureServiceUrl,this.gdbVersion||null)?o.sessionID=I.TA:o.sessionID=null,o.gdbVersion=this.gdbVersion||r;const a=this.networkServiceUrl,l=this.featureServiceUrl?(0,v.Zk)(this.featureServiceUrl,null,this.gdbVersion,!0):void 0,c=await n(a,o,{...t});return new A({statusUrl:c,editsResolver:l})}_createEditedFeature(e,t){return new n.A({attributes:e.attributes,geometry:(0,g.rS)({...e.geometry,spatialReference:t})})}async _fetchLayerMetaData(e,t){const i=await(0,h.A)(e,{responseType:"json",query:{f:"json"},...t});this.sourceJSON=i.data,this.read(i.data,{origin:"service"})}async _fetchDataElement(e,t,i){if(this.dataElement)return;const r=await(0,h.A)(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([t]),f:"json"},...i}).then((e=>e.data.layerDataElements?.[0]));r&&this.read(r,{origin:"service"})}};(0,r._)([(0,s.MZ)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],k.prototype,"id",void 0),(0,r._)([(0,s.MZ)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],k.prototype,"title",void 0),(0,r._)([(0,s.MZ)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],k.prototype,"layerUrl",void 0),(0,r._)([(0,s.MZ)({type:Object,json:{origins:{service:{read:!0}},read:!1}})],k.prototype,"dataElement",void 0),(0,r._)([(0,s.MZ)({type:m.A,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],k.prototype,"fullExtent",void 0),(0,r._)([(0,s.MZ)({type:C.A,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],k.prototype,"spatialReference",void 0),(0,r._)([(0,s.MZ)({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],k.prototype,"type",void 0),(0,r._)([(0,s.MZ)({readOnly:!0})],k.prototype,"datasetName",null),(0,r._)([(0,s.MZ)({readOnly:!0})],k.prototype,"owner",null),(0,r._)([(0,s.MZ)({readOnly:!0})],k.prototype,"schemaGeneration",null),(0,r._)([(0,s.MZ)({readOnly:!0})],k.prototype,"parsedUrl",null),(0,r._)([(0,s.MZ)({readOnly:!0})],k.prototype,"featureServiceUrl",null),(0,r._)([(0,s.MZ)({readOnly:!0})],k.prototype,"networkServiceUrl",null),(0,r._)([(0,s.MZ)({readOnly:!0})],k.prototype,"layerId",null),(0,r._)([(0,s.MZ)()],k.prototype,"sourceJSON",void 0),(0,r._)([(0,s.MZ)({readOnly:!0})],k.prototype,"networkSystemLayers",null),(0,r._)([(0,s.MZ)()],k.prototype,"gdbVersion",void 0),(0,r._)([(0,s.MZ)({type:Date})],k.prototype,"historicMoment",void 0),k=(0,r._)([(0,a.$)("esri.networks.Network")],k);const N=k;var L=i(84977),O=i(52300);let R=class extends((0,L.Te)(p.A)){constructor(e){super(e),this.rulesCategorized={attachment:[],containment:[],connectivity:[]},this.request=h.A}initialize(){}async load(e){const t=this.layer.load(e).then((()=>this._initializeRulesTable()));return this.addResolvingPromise(t),this}getFeatureSQL(e,t){const i=e.layerId.toString(),r=e.fieldsIndex?.normalizeFieldName("assetGroup"),n=e.fieldsIndex?.normalizeFieldName("assetType"),s=r?t.attributes[r]:null,o=n?t.attributes[n]:null,a=this.rulesHash[i];if(a){const e=a.assetGroupHash[s];if(e)return e.assetTypeHash[o]||null}return null}async _initializeRulesTable(){const e={};let t;!function(e){e[e.from=0]="from",e[e.to=1]="to",e[e.via=2]="via"}(t||(t={}));const i=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];this.rulesCategorized={attachment:[],containment:[],connectivity:[]};for(const r of this.rules){if(r.ruleType===O.D2.RTAttachment){this.rulesCategorized.attachment.push(r);continue}if(r.ruleType===O.D2.RTContainment){this.rulesCategorized.containment.push(r);continue}if(r.ruleType===O.D2.RTJunctionJunctionConnectivity){this.rulesCategorized.connectivity.push(r);continue}this.rulesCategorized.connectivity.push(r);let n=[[t.from,t.to],[t.to,t.from]];r.ruleType===O.D2.RTEdgeJunctionEdgeConnectivity&&(n=[[t.from,t.via],[t.via,t.from],[t.to,t.via],[t.via,t.to]]);for(const s of n){const n=s.shift(),o=s.shift();let a=!1;switch(r.ruleType){case O.D2.RTEdgeJunctionEdgeConnectivity:a=n===t.from||n===t.to;break;case O.D2.RTJunctionEdgeConnectivity:a=n===t.to}const l=i[n],c=r[l.networkSourceId]?.layerId.toString()??"",h=r[l.assetGroupId]?.assetGroupCode?.toString(),u=r[l.assetTypeId],p=u?.assetTypeCode?.toString(),d=i[o],f=r[d.networkSourceId]?.layerId.toString()??"",y=r[d.assetGroupId]?.assetGroupCode?.toString(),m=r[d.assetTypeId],g=m?.assetTypeCode?.toString(),v=e[c]??{assetGroupHash:{}};if(!(h&&p&&y&&g))continue;const _=v.assetGroupHash[h]??{assetTypeHash:{}},b=_.assetTypeHash[p]??{};if(b[f]=b[f]??{},a){b[c]=b[c]??{};const e=`(assetgroup = ${h} AND assettype = ${p})`;b[c].anyVertex=b[c].anyVertex?`${b[c].anyVertex}`:`${e}`,"esriNECPEndVertex"===m?.connectivityPolicy&&(b[c].endVertex=b[c]?.endVertex?`${b[c].endVertex}`:`${e}`)}const w=`(assetgroup = ${y} AND assettype = ${g})`;b[f].anyVertex=b[f]?.anyVertex?`${b[f].anyVertex} OR ${w}`:`${w}`,"esriNECPEndVertex"===m?.connectivityPolicy&&(b[f].endVertex=b[f]?.endVertex?`${b[f].endVertex} OR ${w}`:`${w}`),_.assetTypeHash[p]=b,v.assetGroupHash[h]=_,e[c]=v}}this.rulesHash=e}};(0,r._)([(0,s.MZ)({constructOnly:!0})],R.prototype,"layer",void 0),(0,r._)([(0,s.MZ)({constructOnly:!0})],R.prototype,"rules",void 0),(0,r._)([(0,s.MZ)()],R.prototype,"rulesHash",void 0),(0,r._)([(0,s.MZ)()],R.prototype,"rulesCategorized",void 0),(0,r._)([(0,s.MZ)({constructOnly:!0})],R.prototype,"request",void 0),R=(0,r._)([(0,a.$)("esri.networks.RulesTable")],R);const P=R;var D=i(44097),F=i(73783);let j=class extends F.A{constructor(e){super(e),this.rulesTableId=null,this.rulesTableUrl=null,this.subnetworksTableId=null,this.subnetworksTableUrl=null,this.dirtyAreasLayerId=null,this.dirtyAreasLayerUrl=null,this.associationsTableId=null,this.associationsTableUrl=null}};(0,r._)([(0,s.MZ)({constructOnly:!0})],j.prototype,"rulesTableId",void 0),(0,r._)([(0,s.MZ)({constructOnly:!0})],j.prototype,"rulesTableUrl",void 0),(0,r._)([(0,s.MZ)({constructOnly:!0})],j.prototype,"subnetworksTableId",void 0),(0,r._)([(0,s.MZ)({constructOnly:!0})],j.prototype,"subnetworksTableUrl",void 0),(0,r._)([(0,s.MZ)({constructOnly:!0})],j.prototype,"dirtyAreasLayerId",void 0),(0,r._)([(0,s.MZ)({constructOnly:!0})],j.prototype,"dirtyAreasLayerUrl",void 0),(0,r._)([(0,s.MZ)({constructOnly:!0})],j.prototype,"associationsTableId",void 0),(0,r._)([(0,s.MZ)({constructOnly:!0})],j.prototype,"associationsTableUrl",void 0),j=(0,r._)([(0,a.$)("esri.networks.support.NetworkSystemLayers")],j);const Z=j;let z=class extends L.oY{constructor(e){super(e),this.id=null,this.name=null}};(0,r._)([(0,s.MZ)({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],z.prototype,"id",void 0),(0,r._)([(0,s.MZ)({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],z.prototype,"name",void 0),(0,r._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],z.prototype,"isUpstreamTerminal",void 0),z=(0,r._)([(0,a.$)("esri.networks.support.Terminal")],z);const U=z,V=new b.J({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let G=class extends L.oY{constructor(e){super(e),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};(0,r._)([(0,s.MZ)({type:String,json:{write:!0}})],G.prototype,"defaultConfiguration",void 0),(0,r._)([(0,s.MZ)({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],G.prototype,"id",void 0),(0,r._)([(0,s.MZ)({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],G.prototype,"name",void 0),(0,r._)([(0,s.MZ)({type:[U],json:{write:!0}})],G.prototype,"terminals",void 0),(0,r._)([(0,s.MZ)({type:V.apiValues,json:{type:V.jsonValues,read:V.read,write:V.write}})],G.prototype,"traversabilityModel",void 0),G=(0,r._)([(0,a.$)("esri.networks.support.TerminalConfiguration")],G);const B=G;var $=i(42879);const H=(0,b.O)()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let q=class extends $.A{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const t={...e,query:{f:"json"}},{data:i}=await(0,h.A)(this.statusUrl,t),r=i.traceResults?{...i.traceResults,...i}:i;return this.read(r),this}async waitForJobCompletion(e={}){const{interval:t=1e3,statusCallback:i}=e;return new Promise(((e,r)=>{this._clearTimer();const n=setInterval((()=>{this._timer||r((0,f.NK)()),this.checkJobStatus().then((t=>{const{status:r}=t;switch(this.status=r,r){case"job-succeeded":this._clearTimer(),e(this);break;case"job-waiting":case"job-executing":i&&i(this)}}),(e=>{this._clearTimer(),r(e)}))}),t);this._timer=n}))}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};(0,r._)([(0,s.MZ)({type:String,json:{write:!0}})],q.prototype,"statusUrl",void 0),(0,r._)([(0,w.e)(H)],q.prototype,"status",void 0),(0,r._)([(0,s.MZ)({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.submissionTime=e?e.getTime():null}}}})],q.prototype,"submissionTime",void 0),(0,r._)([(0,s.MZ)({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.lastUpdatedTime=e?e.getTime():null}}}})],q.prototype,"lastUpdatedTime",void 0),q=(0,r._)([(0,a.$)("esri.networks.support.TraceJobInfo")],q);const W=q;var K=i(10591);let Y=class extends N{constructor(e){super(e),this.sharedNamedTraceConfigurations=[],this.type="utility"}get serviceTerritoryFeatureLayerId(){return this.dataElement?.serviceTerritoryFeatureLayerId??null}get networkSystemLayers(){return new Z({rulesTableId:this.sourceJSON?.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.rulesTableId}`:null,subnetworksTableId:this.sourceJSON?.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:this.sourceJSON?.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.dirtyAreasLayerId}`:null,associationsTableId:this.sourceJSON?.systemLayers.associationsTableId,associationsTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.associationsTableId}`:null})}get terminalConfigurations(){return this.dataElement?.terminalConfigurations.map((e=>B.fromJSON(e)))||[]}get domainNetworkNames(){return this.dataElement?.domainNetworks.map((e=>e.domainNetworkName))||[]}get _utilityLayerList(){const e=new Set;return this.dataElement?.domainNetworks?.map((t=>{t.edgeSources.map((t=>{e.add(t.layerId)})),t.junctionSources.map((t=>{e.add(t.layerId)}))})),e}async load(e){return this.addResolvingPromise(super.load(e)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(e)),this}getTerminalConfiguration(e){let t=null,i=null;const r=e.layer;let n=null;if("feature"===r?.type){if(n=r.layerId,null===n)return null}else{if("subtype-sublayer"!==r?.type)return null;if(n=r?.parent?.layerId??null,null===n)return null}const s=e.attributes;if(null==s)return null;for(const r of Object.keys(s))"ASSETGROUP"===r.toUpperCase()&&(t=e.getAttribute(r)),"ASSETTYPE"===r.toUpperCase()&&(i=e.getAttribute(r));if(!this.dataElement)return null;let o=null;const a=this.dataElement.domainNetworks;for(const e of a){const r=e.junctionSources?.find((e=>e.layerId===n));if(r){const e=r.assetGroups?.find((e=>e.assetGroupCode===t));if(e){const t=e.assetTypes?.find((e=>e.assetTypeCode===i));if(t){o=t.terminalConfigurationId;break}}}}if(null!=o){const e=this.dataElement.terminalConfigurations,t=e?.find((e=>e.terminalConfigurationId===o));return t?B.fromJSON(t):null}return null}getTierNames(e){const t=this.dataElement?.domainNetworks.find((t=>t.domainNetworkName===e));return t?.tiers.map((e=>e.name))||[]}async getRulesTable(){return this._sharedRulesTable||(this._sharedRulesTable=this._createRulesTable()),await this._sharedRulesTable}isUtilityLayer(e){return this._utilityLayerList.has(e.layerId)&&(e.url?.startsWith(this.featureServiceUrl)??!1)}async queryAssociations(e){const[{queryAssociations:t},{default:r}]=await Promise.all([i.e(5595).then(i.bind(i,45595)),i.e(2890).then(i.bind(i,2890))]),n=r.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,(await t(this.networkServiceUrl,n)).associations}async synthesizeAssociationGeometries(e){const[{synthesizeAssociationGeometries:t},{default:r}]=await Promise.all([i.e(6872).then(i.bind(i,6872)),i.e(1465).then(i.bind(i,41465))]),n=r.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,t(this.networkServiceUrl,n)}async trace(e){const[{trace:t},{default:r}]=await Promise.all([i.e(4515).then(i.bind(i,24515)),i.e(5991).then(i.bind(i,75991))]),n=r.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,t(this.networkServiceUrl,n)}async submitTraceJob(e){const[{submitTraceJob:t},{default:r}]=await Promise.all([i.e(4515).then(i.bind(i,24515)),i.e(5991).then(i.bind(i,75991))]),n=r.from(e);n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment;const s=await t(this.networkServiceUrl,n);return new W({statusUrl:s})}async canAddAssociation(e){const t=await this.getRulesTable();if(!t)return!1;await t.load();const i=(e,t)=>e?1===e.terminalId?!t?.terminalId||t?.terminalId===e.terminalId:e.terminalId===t?.terminalId:!t?.terminalId,r=(e,t)=>e.fromNetworkSource?.sourceId===t.fromNetworkElement?.networkSourceId&&e.toNetworkSource?.sourceId===t.toNetworkElement?.networkSourceId&&e.fromAssetGroup?.assetGroupCode===t.fromNetworkElement?.assetGroupCode&&e.fromAssetType?.assetTypeCode===t.fromNetworkElement?.assetTypeCode&&e.toAssetGroup?.assetGroupCode===t.toNetworkElement?.assetGroupCode&&e.toAssetType?.assetTypeCode===t.toNetworkElement?.assetTypeCode&&i(e.fromTerminal,t.fromNetworkElement)&&i(e.toTerminal,t.toNetworkElement);return"containment"===e.associationType?t.rulesCategorized.containment.some((t=>r(t,e))):"attachment"===e.associationType?t.rulesCategorized.attachment.some((t=>r(t,e))):t.rulesCategorized.connectivity.some((t=>t.viaNetworkSource?t.fromNetworkSource?.sourceId===e.fromNetworkElement?.networkSourceId&&t.viaNetworkSource?.sourceId===e.toNetworkElement?.networkSourceId&&t.fromAssetGroup?.assetGroupCode===e.fromNetworkElement?.assetGroupCode&&t.fromAssetType?.assetTypeCode===e.fromNetworkElement?.assetTypeCode&&t.viaAssetGroup?.assetGroupCode===e.toNetworkElement?.assetGroupCode&&t.viaAssetType?.assetTypeCode===e.toNetworkElement?.assetTypeCode&&i(t.fromTerminal,e.fromNetworkElement)&&i(t.viaTerminal,e.toNetworkElement)||t.viaNetworkSource?.sourceId===e.fromNetworkElement?.networkSourceId&&t.toNetworkSource?.sourceId===e.toNetworkElement?.networkSourceId&&t.viaAssetGroup?.assetGroupCode===e.fromNetworkElement?.assetGroupCode&&t.viaAssetType?.assetTypeCode===e.fromNetworkElement?.assetTypeCode&&t.toAssetGroup?.assetGroupCode===e.toNetworkElement?.assetGroupCode&&t.toAssetType?.assetTypeCode===e.toNetworkElement?.assetTypeCode&&i(t.viaTerminal,e.fromNetworkElement)&&i(t.toTerminal,e.toNetworkElement):r(t,e)))}generateAddAssociations(e){return{addFeatures:e.map((e=>new n.A({attributes:{fromnetworksourceid:e.fromNetworkElement?.networkSourceId,fromglobalid:e.fromNetworkElement?.globalId,fromterminalid:e.fromNetworkElement?.terminalId,tonetworksourceid:e.toNetworkElement?.networkSourceId,toglobalid:e.toNetworkElement?.globalId,toterminalid:e.toNetworkElement?.terminalId,associationtype:O.v9[e.associationType],iscontentvisible:e.isContentVisible?1:0,percentalong:e.percentAlong,globalid:e.globalId}}))),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:"globalid",objectIdField:"objectid"}}}generateDeleteAssociations(e){return{deleteFeatures:e.map((e=>({globalId:e.globalId}))),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:"globalid",objectIdField:"objectid"}}}async _loadNamedTraceConfigurationsFromNetwork(e){if(0===this.sharedNamedTraceConfigurations?.length)return;const t=this.sharedNamedTraceConfigurations.map((e=>e.globalId)),i=await this.queryNamedTraceConfigurations({globalIds:t},e);for(const e of this.sharedNamedTraceConfigurations){const t=i?.find((t=>t.globalId===e.globalId));if(t){const i=t.write({},{origin:"service"});e.read(i,{origin:"service"})}}}async _createRulesTable(){const e=this.networkSystemLayers.rulesTableUrl,t=new l.default({url:e});await t.load();const i=this.dataElement?.domainNetworks;if(!i)return null;const r=i.flatMap((e=>[...e.edgeSources||[],...e.junctionSources||[]])),n=(await this._queryRulesTable(t)).map((e=>this._hydrateRuleInfo(t,r,e)));return new P({layer:t,rules:n})}async _queryRulesTable(e){const t=new K.A({where:"1=1",outFields:["*"]});return(await(0,c.SE)(e,t)).features}_hydrateRuleInfo(e,t,i){const r=e.fieldsIndex,n=r.get("RULETYPE"),s=r.get("CREATIONDATE"),o=r.get("FROMNETWORKSOURCEID"),a=r.get("FROMASSETGROUP"),l=r.get("FROMASSETTYPE"),c=r.get("FROMTERMINALID"),h=r.get("TONETWORKSOURCEID"),u=r.get("TOASSETGROUP"),p=r.get("TOASSETTYPE"),d=r.get("TOTERMINALID"),f=r.get("VIANETWORKSOURCEID"),y=r.get("VIAASSETGROUP"),m=r.get("VIAASSETTYPE"),g=r.get("VIATERMINALID"),v=i.attributes[n.name],_=new Date(i.attributes[s.name]),b=[{networkSourceId:i.attributes[o.name],assetGroupId:i.attributes[a.name],assetTypeId:i.attributes[l.name],terminalId:i.attributes[c.name]},{networkSourceId:i.attributes[h.name],assetGroupId:i.attributes[u.name],assetTypeId:i.attributes[p.name],terminalId:i.attributes[d.name]},{networkSourceId:i.attributes[f.name],assetGroupId:i.attributes[y.name],assetTypeId:i.attributes[m.name],terminalId:i.attributes[g.name]}];let w;!function(e){e[e.from=0]="from",e[e.to=1]="to",e[e.via=2]="via"}(w||(w={}));const M={ruleType:v,creationDate:_};for(const e of[w.from,w.to,w.via]){if(v!==O.D2.RTEdgeJunctionEdgeConnectivity&&e===w.via)continue;const i=b[e],r=t.find((e=>e.sourceId===i.networkSourceId)),n=r?.assetGroups.find((e=>e.assetGroupCode===i.assetGroupId)),s=n?.assetTypes.find((e=>e.assetTypeCode===i.assetTypeId)),o=this._getTerminal(s,i);let a="";switch(e){case w.from:a="from";break;case w.to:a="to";break;case w.via:a="via"}M[`${a}NetworkSource`]=r,M[`${a}AssetGroup`]=n,M[`${a}AssetType`]=s,M[`${a}Terminal`]=o?.toJSON()}return M}_getTerminal(e,t){const i=e?.terminalConfigurationId,r=this.terminalConfigurations?.find((e=>e.id===i));return r?.terminals?.find((e=>e.id===t.terminalId))??null}};(0,r._)([(0,s.MZ)({type:[D.A],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],Y.prototype,"sharedNamedTraceConfigurations",void 0),(0,r._)([(0,s.MZ)({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],Y.prototype,"type",void 0),(0,r._)([(0,s.MZ)({readOnly:!0})],Y.prototype,"serviceTerritoryFeatureLayerId",null),(0,r._)([(0,s.MZ)({readOnly:!0})],Y.prototype,"networkSystemLayers",null),(0,r._)([(0,s.MZ)({readOnly:!0})],Y.prototype,"terminalConfigurations",null),(0,r._)([(0,s.MZ)({readOnly:!0})],Y.prototype,"domainNetworkNames",null),Y=(0,r._)([(0,a.$)("esri.networks.UtilityNetwork")],Y);const J=Y},44097:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var r=i(82392),n=i(67214),s=i(81482),o=(i(6273),i(80861),i(67498),i(25376)),a=i(26325),l=i(71276),c=i(52300),h=i(95055);let u=class extends n.L{constructor(e){super(e),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(e,t){return void 0!==e.tierName?h.A.fromJSON(e):l.A.fromJSON(e)}};(0,r._)([(0,s.MZ)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],u.prototype,"globalId",void 0),(0,r._)([(0,s.MZ)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],u.prototype,"title",void 0),(0,r._)([(0,s.MZ)({type:l.A,json:{origins:{service:{read:!0,write:!0}},read:!1}})],u.prototype,"traceConfiguration",void 0),(0,r._)([(0,o.w)("service","traceConfiguration")],u.prototype,"readTraceConfiguration",null),(0,r._)([(0,s.MZ)({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],u.prototype,"creationDate",void 0),(0,r._)([(0,s.MZ)({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],u.prototype,"creator",void 0),(0,r._)([(0,s.MZ)({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],u.prototype,"description",void 0),(0,r._)([(0,s.MZ)({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],u.prototype,"minStartingPoints",void 0),(0,r._)([(0,s.MZ)({json:{origins:{service:{read:!0,write:!0}},read:!1}})],u.prototype,"resultTypes",void 0),(0,r._)([(0,s.MZ)({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],u.prototype,"tags",void 0),(0,r._)([(0,s.MZ)({type:c.fO.apiValues,json:{type:c.fO.jsonValues,origins:{service:{read:c.fO.read,write:c.fO.write}},read:!1}})],u.prototype,"traceType",void 0),u=(0,r._)([(0,a.$)("esri.networks.support.NamedTraceConfiguration")],u);const p=u},71276:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var r=i(82392),n=i(84977),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325));let a=class extends n.oY{constructor(e){super(e),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};(0,r._)([(0,s.MZ)({type:[Object],json:{write:!0}})],a.prototype,"conditionBarriers",void 0),(0,r._)([(0,s.MZ)({type:[Object],json:{write:!0}})],a.prototype,"outputConditions",void 0),(0,r._)([(0,s.MZ)({type:[Object],json:{write:!0}})],a.prototype,"functions",void 0),(0,r._)([(0,s.MZ)({type:[Object],json:{write:!0}})],a.prototype,"functionBarriers",void 0),(0,r._)([(0,s.MZ)({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],a.prototype,"traversabilityScope",void 0),(0,r._)([(0,s.MZ)({type:String,json:{write:!0}})],a.prototype,"shortestPathNetworkAttributeName",void 0),(0,r._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"includeBarriers",void 0),(0,r._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"validateConsistency",void 0),(0,r._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"ignoreBarriersAtStartingPoints",void 0),a=(0,r._)([(0,o.$)("esri.networks.support.TraceConfiguration")],a);const l=a},95055:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var r=i(82392),n=i(81482),s=(i(6273),i(80861),i(67498),i(26325)),o=i(71276);let a=class extends o.A{constructor(e){super(e),this.filterBarriers=[],this.arcadeExpressionBarrier=null,this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.allowIndeterminateFlow=null,this.includeUpToFirstSpatialContainer=null,this.nearestNeighbor=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.diagramTemplateName=null,this.tierName=null,this.validateLocatability=null}};(0,r._)([(0,n.MZ)({type:[Object],json:{write:!0}})],a.prototype,"filterBarriers",void 0),(0,r._)([(0,n.MZ)({type:String,json:{write:!0}})],a.prototype,"arcadeExpressionBarrier",void 0),(0,r._)([(0,n.MZ)({type:String,json:{write:!0}})],a.prototype,"domainNetworkName",void 0),(0,r._)([(0,n.MZ)({type:String,json:{write:!0}})],a.prototype,"filterBitsetNetworkAttributeName",void 0),(0,r._)([(0,n.MZ)({type:[Object],json:{write:!0}})],a.prototype,"filterFunctionBarriers",void 0),(0,r._)([(0,n.MZ)({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],a.prototype,"filterScope",void 0),(0,r._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"includeContainers",void 0),(0,r._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"includeContent",void 0),(0,r._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"includeIsolated",void 0),(0,r._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"includeStructures",void 0),(0,r._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"allowIndeterminateFlow",void 0),(0,r._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"includeUpToFirstSpatialContainer",void 0),(0,r._)([(0,n.MZ)({type:Object,json:{write:!0}})],a.prototype,"nearestNeighbor",void 0),(0,r._)([(0,n.MZ)({type:[Object],json:{write:!0}})],a.prototype,"outputFilterCategories",void 0),(0,r._)([(0,n.MZ)({type:[Object],json:{write:!0}})],a.prototype,"outputFilters",void 0),(0,r._)([(0,n.MZ)({type:[Object],json:{write:!0}})],a.prototype,"propagators",void 0),(0,r._)([(0,n.MZ)({type:String,json:{write:!0}})],a.prototype,"subnetworkName",void 0),(0,r._)([(0,n.MZ)({type:String,json:{write:!0}})],a.prototype,"targetTierName",void 0),(0,r._)([(0,n.MZ)({type:String,json:{write:!0}})],a.prototype,"diagramTemplateName",void 0),(0,r._)([(0,n.MZ)({type:String,json:{write:!0}})],a.prototype,"tierName",void 0),(0,r._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"validateLocatability",void 0),a=(0,r._)([(0,s.$)("esri.networks.support.UNTraceConfiguration")],a);const l=a},52300:(e,t,i)=>{"use strict";i.d(t,{BD:()=>c,D2:()=>r,XZ:()=>a,fO:()=>o,v9:()=>l});var r,n,s=i(1817);(n=r||(r={}))[n.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity",n[n.RTAttachment=2]="RTAttachment",n[n.RTContainment=3]="RTContainment",n[n.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity",n[n.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity";const o=new s.J({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation"}),a=new s.J({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionMidspanConnectivity:"junction-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"}),l={connectivity:1,"junction-junction-connectivity":1,attachment:2,containment:3,"junction-edge-from-connectivity":4,"junction-midspan-connectivity":5,"junction-edge-to-connectivity":6},c=new s.J({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"})},49926:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var r,n=i(82392),s=i(84977),o=i(81482),a=(i(6273),i(80861),i(67498),i(26325));let l=r=class extends s.oY{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new r({title:this.title,expression:this.expression})}};(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],l.prototype,"title",void 0),(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],l.prototype,"expression",void 0),(0,n._)([(0,o.MZ)({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],l.prototype,"returnType",void 0),l=r=(0,n._)([(0,a.$)("esri.popup.ElementExpressionInfo")],l);const c=l},47096:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var r,n=i(82392),s=i(84977),o=i(81482),a=(i(6273),i(80861),i(67498),i(26325));let l=r=class extends s.oY{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new r({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],l.prototype,"name",void 0),(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],l.prototype,"title",void 0),(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],l.prototype,"expression",void 0),(0,n._)([(0,o.MZ)({type:["string","number"],json:{write:!0}})],l.prototype,"returnType",void 0),l=r=(0,n._)([(0,a.$)("esri.popup.ExpressionInfo")],l);const c=l},22980:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var r,n=i(82392),s=i(1817),o=i(84977),a=i(15565),l=i(81482),c=(i(6273),i(80861),i(85716)),h=i(26325),u=i(46495);let p=r=class extends o.oY{constructor(e){super(e),this.fieldName=null,this.format=null,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new r({fieldName:this.fieldName,format:this.format?(0,a.o8)(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};(0,n._)([(0,l.MZ)({type:String,json:{write:!0}})],p.prototype,"fieldName",void 0),(0,n._)([(0,l.MZ)({type:u.A,json:{write:!0}})],p.prototype,"format",void 0),(0,n._)([(0,l.MZ)({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],p.prototype,"isEditable",void 0),(0,n._)([(0,l.MZ)({type:String,json:{write:!0}})],p.prototype,"label",void 0),(0,n._)([(0,c.e)(new s.J({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],p.prototype,"stringFieldOption",void 0),(0,n._)([(0,l.MZ)({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],p.prototype,"statisticType",void 0),(0,n._)([(0,l.MZ)({type:String,json:{write:!0}})],p.prototype,"tooltip",void 0),(0,n._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],p.prototype,"visible",void 0),p=r=(0,n._)([(0,h.$)("esri.popup.FieldInfo")],p);const d=p},6135:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var r,n=i(82392),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),a=i(23547);let l=r=class extends a.A{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new r({description:this.description,displayType:this.displayType,title:this.title})}};(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],l.prototype,"description",void 0),(0,n._)([(0,s.MZ)({type:["auto","preview","list"],json:{write:!0}})],l.prototype,"displayType",void 0),(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],l.prototype,"title",void 0),(0,n._)([(0,s.MZ)({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],l.prototype,"type",void 0),l=r=(0,n._)([(0,o.$)("esri.popup.content.AttachmentsContent")],l);const c=l},31859:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});var r,n=i(82392),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),a=i(91010),l=i(1415);let c=r=class extends a.A{constructor(e){super(e),this.type="bar-chart"}clone(){return new r({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,n._)([(0,s.MZ)({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:l.U.write}})],c.prototype,"type",void 0),c=r=(0,n._)([(0,o.$)("esri.popup.content.BarChartMediaInfo")],c);const h=c},59594:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});var r,n=i(82392),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),a=i(91010),l=i(1415);let c=r=class extends a.A{constructor(e){super(e),this.type="column-chart"}clone(){return new r({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,n._)([(0,s.MZ)({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:l.U.write}})],c.prototype,"type",void 0),c=r=(0,n._)([(0,o.$)("esri.popup.content.ColumnChartMediaInfo")],c);const h=c},23547:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var r=i(82392),n=i(84977),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325));let a=class extends n.oY{constructor(e){super(e),this.type=null}};(0,r._)([(0,s.MZ)({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],a.prototype,"type",void 0),a=(0,r._)([(0,o.$)("esri.popup.content.Content")],a);const l=a},60854:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});var r,n=i(82392),s=i(15565),o=i(81482),a=(i(6273),i(80861),i(26325)),l=i(23547);let c=r=class extends l.A{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new r({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?(0,s.o8)(this.outFields):null})}};(0,n._)([(0,o.MZ)()],c.prototype,"creator",void 0),(0,n._)([(0,o.MZ)()],c.prototype,"destroyer",void 0),(0,n._)([(0,o.MZ)()],c.prototype,"outFields",void 0),(0,n._)([(0,o.MZ)({type:["custom"],readOnly:!0})],c.prototype,"type",void 0),c=r=(0,n._)([(0,a.$)("esri.popup.content.CustomContent")],c);const h=c},70261:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});var r,n=i(82392),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),a=i(49926),l=i(23547);let c=r=class extends l.A{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){return new r({expressionInfo:this.expressionInfo?.clone()})}};(0,n._)([(0,s.MZ)({type:a.A,json:{write:!0}})],c.prototype,"expressionInfo",void 0),(0,n._)([(0,s.MZ)({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],c.prototype,"type",void 0),c=r=(0,n._)([(0,o.$)("esri.popup.content.ExpressionContent")],c);const h=c},79640:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var r,n=i(82392),s=i(15565),o=i(81482),a=(i(6273),i(80861),i(26325)),l=i(48524),c=i(22980),h=i(23547);let u=r=class extends h.A{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map((e=>e.toJSON()))}clone(){return new r((0,s.o8)({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};(0,n._)([(0,o.MZ)({type:Object,json:{write:!0}})],u.prototype,"attributes",void 0),(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],u.prototype,"description",void 0),(0,n._)([(0,o.MZ)({type:[c.A]})],u.prototype,"fieldInfos",void 0),(0,n._)([(0,l.K)("fieldInfos")],u.prototype,"writeFieldInfos",null),(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],u.prototype,"title",void 0),(0,n._)([(0,o.MZ)({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],u.prototype,"type",void 0),u=r=(0,n._)([(0,a.$)("esri.popup.content.FieldsContent")],u);const p=u},80177:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var r,n=i(82392),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),a=i(74525),l=i(84977);let c=r=class extends l.oY{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new r({linkURL:this.linkURL,sourceURL:this.sourceURL})}};(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],c.prototype,"linkURL",void 0),(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],c.prototype,"sourceURL",void 0),c=r=(0,n._)([(0,o.$)("esri.popup.content.support.ImageMediaInfoValue")],c);const h=c;var u;let p=u=class extends a.A{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new u({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};(0,n._)([(0,s.MZ)({type:Number,json:{write:!0}})],p.prototype,"refreshInterval",void 0),(0,n._)([(0,s.MZ)({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],p.prototype,"type",void 0),(0,n._)([(0,s.MZ)({type:h,json:{write:!0}})],p.prototype,"value",void 0),p=u=(0,n._)([(0,o.$)("esri.popup.content.ImageMediaInfo")],p);const d=p},11178:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});var r,n=i(82392),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),a=i(91010),l=i(1415);let c=r=class extends a.A{constructor(e){super(e),this.type="line-chart"}clone(){return new r({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,n._)([(0,s.MZ)({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:l.U.write}})],c.prototype,"type",void 0),c=r=(0,n._)([(0,o.$)("esri.popup.content.LineChartMediaInfo")],c);const h=c},54213:(e,t,i)=>{"use strict";i.d(t,{A:()=>v});var r,n=i(82392),s=i(15565),o=i(81482),a=(i(6273),i(80861),i(25376)),l=i(26325),c=i(48524),h=i(31859),u=i(59594),p=i(23547),d=i(80177),f=i(11178),y=i(22040),m=i(71973);let g=r=class extends p.A{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map((e=>"image"===e.type?d.A.fromJSON(e):"barchart"===e.type?h.A.fromJSON(e):"columnchart"===e.type?u.A.fromJSON(e):"linechart"===e.type?f.A.fromJSON(e):"piechart"===e.type?y.A.fromJSON(e):void 0)).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map((e=>e.toJSON()))}clone(){return new r((0,s.o8)({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};(0,n._)([(0,o.MZ)()],g.prototype,"activeMediaInfoIndex",void 0),(0,n._)([(0,o.MZ)({type:Object,json:{write:!0}})],g.prototype,"attributes",void 0),(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],g.prototype,"description",void 0),(0,n._)([(0,o.MZ)({types:[m.g]})],g.prototype,"mediaInfos",void 0),(0,n._)([(0,a.w)("mediaInfos")],g.prototype,"readMediaInfos",null),(0,n._)([(0,c.K)("mediaInfos")],g.prototype,"writeMediaInfos",null),(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],g.prototype,"title",void 0),(0,n._)([(0,o.MZ)({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],g.prototype,"type",void 0),g=r=(0,n._)([(0,l.$)("esri.popup.content.MediaContent")],g);const v=g},22040:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});var r,n=i(82392),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),a=i(91010),l=i(1415);let c=r=class extends a.A{constructor(e){super(e),this.type="pie-chart"}clone(){return new r({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,n._)([(0,s.MZ)({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:l.U.write}})],c.prototype,"type",void 0),c=r=(0,n._)([(0,o.$)("esri.popup.content.PieChartMediaInfo")],c);const h=c},57705:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var r=i(82392),n=i(14755),s=i(81482),o=i(8636),a=(i(67498),i(6273),i(26325)),l=i(23547),c=i(10357);let h=class extends((0,n.O)(l.A)){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};(0,r._)([(0,s.MZ)({type:String,json:{write:!0}})],h.prototype,"description",void 0),(0,r._)([(0,s.MZ)({type:Number,json:{type:o.jz,write:!0}})],h.prototype,"displayCount",void 0),(0,r._)([(0,s.MZ)({type:["list"],json:{write:!0}})],h.prototype,"displayType",void 0),(0,r._)([(0,s.MZ)({type:[c.A],json:{write:!0}})],h.prototype,"orderByFields",void 0),(0,r._)([(0,s.MZ)({type:Number,json:{type:o.jz,write:!0}})],h.prototype,"relationshipId",void 0),(0,r._)([(0,s.MZ)({type:String,json:{write:!0}})],h.prototype,"title",void 0),(0,r._)([(0,s.MZ)({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],h.prototype,"type",void 0),h=(0,r._)([(0,a.$)("esri.popup.content.RelationshipContent")],h);const u=h},834:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var r,n=i(82392),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),a=i(23547);let l=r=class extends a.A{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new r({text:this.text})}};(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],l.prototype,"text",void 0),(0,n._)([(0,s.MZ)({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],l.prototype,"type",void 0),l=r=(0,n._)([(0,o.$)("esri.popup.content.TextContent")],l);const c=l},91010:(e,t,i)=>{"use strict";i.d(t,{A:()=>m});var r,n=i(82392),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),a=i(74525),l=i(93814),c=i(84977),h=i(15565),u=i(8636),p=i(68642);let d=r=class extends c.oY{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new r({colors:(0,h.o8)(this.colors),fields:(0,h.o8)(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};(0,n._)([(0,s.MZ)({type:[l.A],json:{type:[[u.jz]],write:!0}})],d.prototype,"colors",void 0),(0,n._)([(0,s.MZ)({type:[String],json:{write:!0}})],d.prototype,"fields",void 0),(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],d.prototype,"normalizeField",void 0),(0,n._)([(0,s.MZ)({type:[p.A],json:{read:!1}})],d.prototype,"series",void 0),(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],d.prototype,"tooltipField",void 0),d=r=(0,n._)([(0,o.$)("esri.popup.content.support.ChartMediaInfoValue")],d);const f=d;let y=class extends a.A{constructor(e){super(e),this.type=null,this.value=null}};(0,n._)([(0,s.MZ)({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],y.prototype,"type",void 0),(0,n._)([(0,s.MZ)({type:f,json:{write:!0}})],y.prototype,"value",void 0),y=(0,n._)([(0,o.$)("esri.popup.content.mixins.ChartMediaInfo")],y);const m=y},74525:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var r=i(82392),n=i(84977),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325));let a=class extends n.oY{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};(0,r._)([(0,s.MZ)({type:String,json:{write:!0}})],a.prototype,"altText",void 0),(0,r._)([(0,s.MZ)({type:String,json:{write:!0}})],a.prototype,"caption",void 0),(0,r._)([(0,s.MZ)({type:String,json:{write:!0}})],a.prototype,"title",void 0),(0,r._)([(0,s.MZ)({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],a.prototype,"type",void 0),a=(0,r._)([(0,o.$)("esri.popup.content.mixins.MediaInfo")],a);const l=a},68642:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var r,n=i(82392),s=i(73783),o=i(81482),a=(i(6273),i(80861),i(67498),i(26325));let l=r=class extends s.A{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new r({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};(0,n._)([(0,o.MZ)()],l.prototype,"color",void 0),(0,n._)([(0,o.MZ)()],l.prototype,"fieldName",void 0),(0,n._)([(0,o.MZ)()],l.prototype,"tooltip",void 0),(0,n._)([(0,o.MZ)()],l.prototype,"value",void 0),l=r=(0,n._)([(0,a.$)("esri.popup.content.support.ChartMediaInfoValueSeries")],l);const c=l},1415:(e,t,i)=>{"use strict";i.d(t,{U:()=>r});const r=(0,i(1817).O)()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"})},71973:(e,t,i)=>{"use strict";i.d(t,{g:()=>l});var r=i(31859),n=i(59594),s=i(80177),o=i(11178),a=i(22040);const l={base:i(74525).A,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":r.A,"column-chart":n.A,"line-chart":o.A,"pie-chart":a.A,image:s.A}}},46495:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var r=i(82392),n=i(14755),s=i(84977),o=i(81482),a=i(8636),l=(i(67498),i(6273),i(85716)),c=i(26325),h=i(50189);let u=class extends((0,n.O)(s.oY)){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};(0,r._)([(0,l.e)(h._v)],u.prototype,"dateFormat",void 0),(0,r._)([(0,o.MZ)({type:Boolean,json:{write:!0}})],u.prototype,"digitSeparator",void 0),(0,r._)([(0,o.MZ)({type:a.jz,json:{write:!0}})],u.prototype,"places",void 0),u=(0,r._)([(0,c.$)("esri.popup.support.FieldInfoFormat")],u);const p=u},10357:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var r,n=i(82392),s=i(84977),o=i(81482),a=(i(6273),i(80861),i(67498),i(26325));let l=r=class extends s.oY{constructor(e){super(e),this.field=null,this.order=null}clone(){return new r({field:this.field,order:this.order})}};(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],l.prototype,"field",void 0),(0,n._)([(0,o.MZ)({type:["asc","desc"],json:{write:!0}})],l.prototype,"order",void 0),l=r=(0,n._)([(0,a.$)("esri.popup.support.RelatedRecordsInfoFieldOrder")],l);const c=l},83382:(e,t,i)=>{"use strict";i.d(t,{A:()=>k});var r=i(82392),n=i(32083),s=i(6480),o=i(38116),a=i(62991),l=i(84977),c=i(11965),h=i(57725),u=i(37623),p=i(81482),d=i(8636),f=(i(67498),i(6273),i(25376)),y=i(26325),m=i(8e3),g=i(4631);let v;var _=i(45749),b=i(42268),w=i(73783);i(80861);let M=class extends w.A{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};(0,r._)([(0,p.MZ)()],M.prototype,"nextQueryParams",void 0),(0,r._)([(0,p.MZ)()],M.prototype,"queryParams",void 0),(0,r._)([(0,p.MZ)()],M.prototype,"results",void 0),(0,r._)([(0,p.MZ)()],M.prototype,"total",void 0),M=(0,r._)([(0,y.$)("esri.portal.PortalQueryResult")],M);const T=M;var S,A=i(14395),E=i(44945);let x;const I={PortalGroup:()=>Promise.resolve({default:_.A}),PortalItem:()=>Promise.resolve().then(i.bind(i,43305)),PortalUser:()=>Promise.resolve({default:A.A})};let C=S=class extends((0,l.Te)(c.A)){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=n.A.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return"string"==typeof e?{url:e}:e}destroy(){N.unregister(this),this.defaultBasemap=(0,h.pR)(this.defaultBasemap),this.defaultDevBasemap=(0,h.pR)(this.defaultDevBasemap),this.defaultVectorBasemap=(0,h.pR)(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=(0,h.xt)(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)n.A.request.trustedServers.includes(t)||n.A.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=this.user?.orgId,t=!e||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e?e.toLowerCase():e}readUser(e){let t=null;return e&&(t=A.A.fromJSON(e),t.portal=this),t}load(e){const t=Promise.resolve().then(i.bind(i,66801)).then((({default:t})=>{(0,u.Te)(e),x=t})).then((()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e))).then((e=>{if(s.id){const e=s.id;this.credential=e.findCredential(this.restUrl),this.credential||this.authMode!==S.AUTH_MODE_AUTO&&this.authMode!==S.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=e.on("credential-create",function(e){const t=s.id;return()=>{const i=e.deref();i&&t.findCredential(i.restUrl)&&i.signIn().catch((()=>{}))}}(new WeakRef(this))),N.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=e,this.read(e)}));return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await i.e(6658).then(i.bind(i,6658))).default;return e?e.map((e=>new t({id:e.id,url:e.url}))):[]}async fetchBasemaps(e,t){const i=await this._fetchBasemaps(e,t);if(!0===t?.include3d&&!1!==this.use3dBasemaps){const r=await this._fetchBasemaps3D(e,t);i.unshift(...r)}return i}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then((e=>e.categorySchema)):(0,u.G4)(e)?Promise.reject((0,u.NK)()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,i=new b.A;if(i.num=100,i.sortField="title",t&&t.length){const r=[];for(const e of t)r.push(`(title:"${e.title}" AND owner:${e.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,e).then((e=>e.results))}return(0,u.G4)(e)?Promise.reject((0,u.NK)()):Promise.resolve([])}fetchRegions(e){const t=this.user?.culture||this.culture||(0,g.JK)();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){const t=this.user?.culture||this.culture||(0,g.JK)();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return v&&!v.destroyed||(v=new S),v}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,i){const r=this.restUrl+"/portals/self",n={authMode:e,query:{culture:(0,g.JK)().toLowerCase()},withCredentials:!0,...i};return"auto"===n.authMode&&(n.authMode="no-prompt"),t&&(n.query.default=!0),this.request(r,n)}queryPortal(e,t,i,r){const n=(0,d.dp)(b.A,t),s=t=>this.request(this.restUrl+e,{...n.toRequestOptions(this),...r}).then((e=>{const i=n.clone();return i.start=e.nextStart,new T({nextQueryParams:i,queryParams:n,total:e.total,results:S._resultsToTypedArray(t,{portal:this},e,r)})})).then((e=>Promise.all(e.results.map((t=>"function"==typeof t.when?t.when():e))).then((()=>e),(t=>((0,u.QP)(t),e)))));return i&&I[i]?I[i]().then((({default:e})=>((0,u.Te)(r),s(e)))):s()}signIn(){if(this.authMode===S.AUTH_MODE_ANONYMOUS||this.authMode===S.AUTH_MODE_NO_PROMPT&&!s.id)return Promise.reject(new a.A("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const e=e=>Promise.resolve().then((()=>"not-loaded"===this.loadStatus?(e||(this.authMode="immediate"),this.load().then((()=>null))):"loading"===this.loadStatus?this.load().then((()=>this.credential?null:(this.credential=e,this.fetchSelf("immediate")))):this.user&&this.credential===e?null:(this.credential=e,this.fetchSelf("immediate")))).then((e=>{e&&(this.sourceJSON=e,this.read(e))}));return s.id?s.id.getCredential(this.restUrl,{prompt:this.authMode!==S.AUTH_MODE_NO_PROMPT}).then((t=>e(t))):e(this.credential)}normalizeUrl(e){const t=this.credential?.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,i){return this.request(e,t).then((e=>{const t=S._resultsToTypedArray(i,{portal:this},e);return Promise.all(t.map((t=>"function"==typeof t.when?t.when():e))).then((()=>t),(()=>t))}))}request(e,t={}){const i={f:"json",...t.query},{authMode:r=(this.authMode===S.AUTH_MODE_ANONYMOUS||this.authMode===S.AUTH_MODE_NO_PROMPT?this.authMode:"auto"),body:n=null,cacheBust:s=!1,method:a="auto",responseType:l="json",signal:c}=t,h={authMode:r,body:n,cacheBust:s,method:a,query:i,responseType:l,timeout:0,signal:c};return t.withCredentials&&(h.withCredentials=!0),(0,o.A)(this._normalizeSSL(e),h).then((e=>e.data))}toJSON(){throw new a.A("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new S({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new a.A("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){const i=new b.A;i.query=e||(n.A.apiKey&&(0,E.Q)(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const r=await this.queryGroups(i,t);if(!r.total)return[];const s=r.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=s.sortField||"name",i.sortOrder=s.sortOrder||"desc";const o=await s.queryItems(i,t);return o.total?o.results.filter((e=>"Web Map"===e.type)).map((e=>new x({portalItem:e}))):[]}async _fetchBasemaps3D(e,t){const i=e||this.basemapGalleryGroupQuery3D;if(!i)return[];const r=new b.A({query:i,disableExtraQuery:!0}),n=await this.queryGroups(r,t);if(!n.total)return[];const s=n.results[0];r.num=100,r.query='type:"Web Scene"',r.sortField=s.sortField||"name",r.sortOrder=s.sortOrder||"desc";const o=await s.queryItems(r,t);return o.total?o.results.filter((e=>"Web Scene"===e.type)).map((e=>new x({portalItem:e}))):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=x.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,i,r){let n=[];if(i){const s=null!=r?r.signal:null;n=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||t)&&(n=n.map((i=>{const r=Object.assign(e?e.fromJSON(i):i,t);return"function"==typeof r.load&&r.load(s),r})))}else n=[];return n}};C.AUTH_MODE_ANONYMOUS="anonymous",C.AUTH_MODE_AUTO="auto",C.AUTH_MODE_IMMEDIATE="immediate",C.AUTH_MODE_NO_PROMPT="no-prompt",(0,r._)([(0,p.MZ)()],C.prototype,"access",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"allSSL",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"authMode",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"authorizedCrossOriginDomains",void 0),(0,r._)([(0,f.w)("authorizedCrossOriginDomains")],C.prototype,"readAuthorizedCrossOriginDomains",null),(0,r._)([(0,p.MZ)()],C.prototype,"basemapGalleryGroupQuery",void 0),(0,r._)([(0,p.MZ)({json:{name:"3DBasemapGalleryGroupQuery"}})],C.prototype,"basemapGalleryGroupQuery3D",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"bingKey",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"canListApps",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"canListData",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"canListPreProvisionedItems",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"canProvisionDirectPurchase",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"canSearchPublic",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"canShareBingPublic",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"canSharePublic",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"canSignInArcGIS",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"canSignInIDP",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"colorSetsGroupQuery",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"commentsEnabled",void 0),(0,r._)([(0,p.MZ)({type:Date})],C.prototype,"created",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"credential",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"culture",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"currentVersion",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"customBaseUrl",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"defaultBasemap",void 0),(0,r._)([(0,f.w)("defaultBasemap")],C.prototype,"readDefaultBasemap",null),(0,r._)([(0,p.MZ)()],C.prototype,"defaultDevBasemap",void 0),(0,r._)([(0,f.w)("defaultDevBasemap")],C.prototype,"readDefaultDevBasemap",null),(0,r._)([(0,p.MZ)({type:m.A})],C.prototype,"defaultExtent",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"defaultVectorBasemap",void 0),(0,r._)([(0,f.w)("defaultVectorBasemap")],C.prototype,"readDefaultVectorBasemap",null),(0,r._)([(0,p.MZ)()],C.prototype,"description",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"devBasemapGalleryGroupQuery",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"eueiEnabled",void 0),(0,r._)([(0,p.MZ)({readOnly:!0})],C.prototype,"extraQuery",null),(0,r._)([(0,p.MZ)()],C.prototype,"featuredGroups",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"featuredItemsGroupQuery",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"galleryTemplatesGroupQuery",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"layoutGroupQuery",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"livingAtlasGroupQuery",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"hasCategorySchema",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"helpBase",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"helperServices",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"helpMap",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"homePageFeaturedContent",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"homePageFeaturedContentCount",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"httpPort",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"httpsPort",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"id",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"ipCntryCode",void 0),(0,r._)([(0,p.MZ)({readOnly:!0})],C.prototype,"isOrganization",null),(0,r._)([(0,p.MZ)()],C.prototype,"isPortal",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"isReadOnly",void 0),(0,r._)([(0,p.MZ)({readOnly:!0})],C.prototype,"itemPageUrl",null),(0,r._)([(0,p.MZ)()],C.prototype,"layerTemplatesGroupQuery",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"maxTokenExpirationMinutes",void 0),(0,r._)([(0,p.MZ)({type:Date})],C.prototype,"modified",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"name",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"portalHostname",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"portalMode",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"portalProperties",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"region",void 0),(0,r._)([(0,p.MZ)({readOnly:!0})],C.prototype,"restUrl",null),(0,r._)([(0,p.MZ)()],C.prototype,"rotatorPanels",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"showHomePageDescription",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"sourceJSON",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"staticImagesUrl",void 0),(0,r._)([(0,p.MZ)({json:{name:"2DStylesGroupQuery"}})],C.prototype,"stylesGroupQuery2d",void 0),(0,r._)([(0,p.MZ)({json:{name:"stylesGroupQuery"}})],C.prototype,"stylesGroupQuery3d",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"supportsHostedServices",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"symbolSetsGroupQuery",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"templatesGroupQuery",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"thumbnail",void 0),(0,r._)([(0,p.MZ)({readOnly:!0})],C.prototype,"thumbnailUrl",null),(0,r._)([(0,p.MZ)()],C.prototype,"units",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"url",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"urlKey",void 0),(0,r._)([(0,f.w)("urlKey")],C.prototype,"readUrlKey",null),(0,r._)([(0,p.MZ)()],C.prototype,"user",void 0),(0,r._)([(0,f.w)("user")],C.prototype,"readUser",null),(0,r._)([(0,p.MZ)()],C.prototype,"use3dBasemaps",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"useStandardizedQuery",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"useVectorBasemaps",void 0),(0,r._)([(0,p.MZ)()],C.prototype,"vectorBasemapGalleryGroupQuery",void 0),C=S=(0,r._)([(0,y.$)("esri.portal.Portal")],C);const k=C,N=new FinalizationRegistry((e=>{e.remove()}))},45749:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var r,n=i(82392),s=i(62991),o=i(84977),a=i(81482),l=i(8636),c=(i(67498),i(6273),i(26325)),h=i(42268);let u=r=class extends o.oY{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t&&this.portal?this.portal?.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.portal?.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then((t=>{const i=t.categorySchema||[];return i.some((e=>"contentCategorySetsGroupQuery.LivingAtlas"===e.source))?this._fetchCategorySchemaSet("LivingAtlas",e):i}))}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new s.A("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new r;return t.sourceJSON=e,t.read(e),t}queryItems(e,t){let i=(0,l.dp)(h.A,e);const r=this.portal;return parseFloat(r.currentVersion)>5?(i=i||new h.A,r.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",t)):(i=i?i.clone():new h.A,i.query="group:"+this.id+(i.query?" "+i.query:""),r.queryItems(i,t))}_fetchCategorySchemaSet(e,t){const i=this.portal;return i.fetchSelf(i.authMode,!0,t).then((e=>{const r=e.contentCategorySetsGroupQuery;if(r){const e=new h.A;return e.disableExtraQuery=!0,e.num=1,e.query=r,i.queryGroups(e,t)}throw new s.A("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")})).then((i=>{if(i.total){const r=i.results[0],n=new h.A;return n.num=1,n.query=`typekeywords:"${e}"`,r.queryItems(n,t)}throw new s.A("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")})).then((e=>e.total?e.results[0].fetchData("json",t).then((e=>{const t=e?.categorySchema;return t?.length?t:[]})):[]))}};(0,n._)([(0,a.MZ)()],u.prototype,"access",void 0),(0,n._)([(0,a.MZ)({type:Date})],u.prototype,"created",void 0),(0,n._)([(0,a.MZ)()],u.prototype,"description",void 0),(0,n._)([(0,a.MZ)()],u.prototype,"id",void 0),(0,n._)([(0,a.MZ)()],u.prototype,"isInvitationOnly",void 0),(0,n._)([(0,a.MZ)({type:Date})],u.prototype,"modified",void 0),(0,n._)([(0,a.MZ)()],u.prototype,"owner",void 0),(0,n._)([(0,a.MZ)()],u.prototype,"portal",void 0),(0,n._)([(0,a.MZ)()],u.prototype,"snippet",void 0),(0,n._)([(0,a.MZ)()],u.prototype,"sortField",void 0),(0,n._)([(0,a.MZ)()],u.prototype,"sortOrder",void 0),(0,n._)([(0,a.MZ)()],u.prototype,"sourceJSON",void 0),(0,n._)([(0,a.MZ)()],u.prototype,"tags",void 0),(0,n._)([(0,a.MZ)()],u.prototype,"thumbnail",void 0),(0,n._)([(0,a.MZ)({readOnly:!0})],u.prototype,"thumbnailUrl",null),(0,n._)([(0,a.MZ)()],u.prototype,"title",void 0),(0,n._)([(0,a.MZ)({readOnly:!0})],u.prototype,"url",null),u=r=(0,n._)([(0,c.$)("esri.portal.PortalGroup")],u);const p=u},43305:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>I});var r=i(82392),n=i(44764),s=i(62991),o=i(84977),a=i(15565),l=i(11965),c=i(19759),h=i(81482),u=i(8636),p=i(25376),d=i(26325),f=i(8e3),y=i(83382),m=i(73783),g=i(80861),v=i(77380);i(67498),i(6273);let _=class extends m.A{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e?.portalItem&&e.path?{...e,path:this._normalizePath(e.path,e.portalItem)}:e}set path(e){null!=e&&(0,c.oP)(e)?g.A.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const i=this.cdnUrl;if(null==i)throw new s.A("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(i,{responseType:e,query:{token:this.portalItem.apiKey},signal:t?.signal})}async update(e,t){const{addOrUpdateResources:r}=await i.e(81).then(i.bind(i,90081));return await r(this.portalItem,[{resource:this,content:e,compress:t?.compress,access:t?.access}],"update",t),this}hasPath(){return null!=this.path}_normalizePath(e,t){return null==e?e:(e=e.replace(/^\/+/,""),null!=t&&(0,c.oP)(e)&&(e=(0,c.V1)(e,t.itemUrl)),e?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};(0,r._)([(0,h.MZ)()],_.prototype,"portalItem",void 0),(0,r._)([(0,h.MZ)({type:String,value:null})],_.prototype,"path",null),(0,r._)([(0,v.w)("path")],_.prototype,"_castPath",null),(0,r._)([(0,h.MZ)({type:String,readOnly:!0})],_.prototype,"url",null),(0,r._)([(0,h.MZ)({type:String,readOnly:!0})],_.prototype,"cdnUrl",null),(0,r._)([(0,h.MZ)({type:String,readOnly:!0})],_.prototype,"itemRelativeUrl",null),_=(0,r._)([(0,d.$)("esri.portal.PortalItemResource")],_);const b=_;let w=class extends m.A{constructor(e){super(e),this.created=null,this.rating=null}};(0,r._)([(0,h.MZ)()],w.prototype,"created",void 0),(0,r._)([(0,h.MZ)()],w.prototype,"rating",void 0),w=(0,r._)([(0,d.$)("esri.portal.PortalRating")],w);const M=w;var T,S=i(55714);const A=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),E=new Set(["KML","GeoJson","CSV"]);let x=T=class extends((0,o.Te)(l.A)){static from(e){return(0,u.PZ)(T,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let i=e;return"Feature Service"===e||"Feature Collection"===e?i=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":"Image Service"===e?i=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===e?i="Scene Layer":"Video Service"===e?i="Video Layer":"Scene Package"===e?i="Scene Layer Package":"Stream Service"===e?i="Feature Layer":"Geoprocessing Service"===e?i=t.includes("Web Tool")?"Tool":"Geoprocessing Service":"Geoenrichment Service"===e?i="GeoEnrichment Service":"Geocoding Service"===e?i="Locator":"Microsoft Powerpoint"===e?i="Microsoft PowerPoint":"GeoJson"===e?i="GeoJSON":"Globe Service"===e?i="Globe Layer":"Vector Tile Service"===e?i="Tile Layer":"netCDF"===e?i="NetCDF":"Map Service"===e?i=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e&&e.toLowerCase().includes("add in")?i=e.replaceAll(/(add in)/gi,"Add-In"):"datastore catalog service"===e?i="Big Data File Share":"Compact Tile Package"===e?i="Tile Package (tpkx)":"Raster function template"===e?i="Raster Function Template":"OGCFeatureServer"===e?i="OGC Feature Layer":"web mapping application"===e&&t.includes("configurableApp")?i="Instant App":"Insights Page"===e?i="Insights Report":"Excalibur Imagery Project"===e?i="Excalibur Project":"3DTiles Service"===e?i="3D tiles layer":"3DTiles Package"===e&&(i="3D tiles package"),i}readExtent(e){return e&&e.length?new f.A(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type?.toLowerCase()||"",t=this.typeKeywords||[];let i,r=!1,s=!1,o=!1,a=!1,l=!1,c=!1,h=!1,u=!1;return e.indexOf("service")>0||"feature collection"===e||"kml"===e||"wms"===e||"wmts"===e||"wfs"===e?(r=t.includes("Hosted Service"),"feature service"===e||"feature collection"===e||"kml"===e||"wfs"===e?(s=t.includes("Table"),o=t.includes("Route Layer"),a=t.includes("Markup"),l=t.includes("Spatiotemporal"),c=t.includes("UtilityNetwork"),i=l&&s?"spatiotemporaltable":s?"table":o?"routelayer":a?"markup":l?"spatiotemporal":c?"utilitynetwork":r?"featureshosted":"features"):"map service"===e||"wms"===e||"wmts"===e?(l=t.includes("Spatiotemporal"),h=t.includes("Relational"),i=l||h?"mapimages":r||t.includes("Tiled")||"wmts"===e?"maptiles":"mapimages"):i="scene service"===e?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===e?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===e?"streamlayer":"vector tile service"===e?"vectortile":"datastore catalog service"===e?"datastorecollection":"geocoding service"===e?"geocodeservice":"video service"===e?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":"geoprocessing service"===e?t.includes("Web Tool")?"tool":"layers":"geodata service"===e?"geodataservice":"3dtiles service"===e?t.includes("3DObject")?"3dobjecttileslayer":t.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):"web map"===e||"cityengine web scene"===e?i="maps":"web scene"===e?i=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===e&&t.includes("configurableApp")?i="instantapps":"web mapping application"===e||"mobile application"===e||"application"===e||"operation view"===e||"desktop application"===e?i="apps":"map document"===e||"map package"===e||"published map"===e||"scene document"===e||"globe document"===e||"basemap package"===e||"mobile basemap package"===e||"mobile map package"===e||"project package"===e||"project template"===e||"pro map"===e||"layout"===e||"layer"===e&&t.includes("ArcGIS Pro")||"explorer map"===e&&t.indexOf("Explorer Document")?i="mapsgray":"service definition"===e||"shapefile"===e||"cad drawing"===e||"geojson"===e||"netcdf"===e||"administrative report"===e?i="datafiles":"360 vr experience"===e?i="360vr":"explorer add in"===e||"desktop add in"===e||"windows viewer add in"===e||"windows viewer configuration"===e?i="appsgray":"arcgis pro add in"===e||"arcgis pro configuration"===e?i="addindesktop":"pdf"===e?i="pdf":"microsoft word"===e?i="word":"microsoft excel"===e?i="excel":"microsoft powerpoint"===e?i="ppt":"rule package"===e||"file geodatabase"===e||"sqlite geodatabase"===e||"csv collection"===e||"kml collection"===e||"windows mobile package"===e||"map template"===e||"desktop application template"===e||"gml"===e||"arcpad package"===e||"code sample"===e||"document link"===e||"earth configuration"===e||"operations dashboard add in"===e||"rules package"===e||"workflow manager package"===e||"explorer map"===e&&t.includes("Explorer Mapping Application")||t.includes("Document")?i="datafilesgray":"network analysis service"===e||"geoprocessing service"===e||"geodata service"===e||"geometry service"===e||"geoprocessing package"===e||"locator package"===e||"geoprocessing sample"===e||"workflow manager service"===e?i="toolsgray":"layer"===e||"layer package"===e||"explorer layer"===e?i="layersgray":"scene package"===e?i="scenepackage":"3dtiles package"===e?i="3dtileslayerpackage":"3dtiles service"===e?i="3dtileslayer":"mobile scene package"===e?i="mobilescenepackage":"tile package"===e||"compact tile package"===e?i="tilepackage":"task file"===e?i="taskfile":"report template"===e?i="report-template":"statistical data collection"===e?i="statisticaldatacollection":"insights workbook"===e?i="workbook":"insights model"===e?i="insightsmodel":"insights page"===e?i="insightspage":"insights theme"===e?i="insightstheme":"hub initiative"===e?i="hubinitiative":"hub page"===e?i="hubpage":"hub site application"===e?i="hubsite":"hub event"===e?i="hubevent":"hub project"===e?i="hubproject":"relational database connection"===e?i="relationaldatabaseconnection":"big data file share"===e?i="datastorecollection":"image collection"===e?i="imagecollection":"desktop style"===e?i="desktopstyle":"style"===e?i="style":"dashboard"===e?i="dashboard":"raster function template"===e?i="rasterprocessingtemplate":"vector tile package"===e?i="vectortilepackage":"ortho mapping project"===e?i="orthomappingproject":"ortho mapping template"===e?i="orthomappingtemplate":"solution"===e?i="solutions":"geopackage"===e?i="geopackage":"deep learning package"===e?i="deeplearningpackage":"real time analytic"===e?i="realtimeanalytics":"big data analytic"===e?i="bigdataanalytics":"feed"===e?i="feed":"excalibur imagery project"===e?i="excaliburimageryproject":"notebook"===e?i="notebook":"storymap"===e?i="storymap":"survey123 add in"===e?i="survey123addin":"mission"===e?i="mission":"mission report"===e?i="missionreport":"mission template"===e?i="missiontemplate":"quickcapture project"===e?i="quickcaptureproject":"pro report"===e?i="proreport":"pro report template"===e?i="proreporttemplate":"urban model"===e?i="urbanmodel":"web experience"===e?i="experiencebuilder":"web experience template"===e?i="webexperiencetemplate":"experience builder widget"===e?i="experiencebuilderwidget":"experience builder widget package"===e?i="experiencebuilderwidgetpackage":"workflow"===e?i="workflow":"kernel gateway connection"===e?i="kernelgatewayconnection":"insights script"===e?i="insightsscript":"hub initiative template"===e?i="hubinitiativetemplate":"storymap theme"===e?i="storymaptheme":"knowledge graph"===e?i="knowledgegraph":"knowledge studio project"===e?i="knowledgestudio":"native application"===e?i="nativeapp":"native application installer"===e?i="nativeappinstaller":"web link chart"===e?i="linkchart":"knowledge graph web investigation"===e?i="investigation":"ogcfeatureserver"===e?i="features":"pro project"===e?i="proproject":"insights workbook package"===e?i="insightsworkbookpackage":"apache parquet"===e?i="apacheparquet":"notebook code snippets"===e||"notebook code snippet library"===e?i="notebookcodesnippets":"suitability model"===e?i="suitabilitymodel":"esri classifier definition"===e?i="classifierdefinition":"esri classification schema"===e?i="classificationschema":"insights data engineering workbook"===e?i="dataengineeringworkbook":"insights data engineering model"===e?i="dataengineeringmodel":"deep learning studio project"===e?i="deeplearningproject":"discussion"===e?i="discussion":"allsource project"===e?i="allsourceproject":"api key"===e?i="apikey":"data pipeline"===e?i="datapipelines":"group layer"===e?(u=t.includes("Map"),i=u?"layergroup2d":"layergroup"):i="media layer"===e?"onlinemedialayer":"form"===e?t.includes("Survey123")?"survey":"datafilesgray":"csv"===e?"csv":"image"===e?"image":"maps",i?(0,n.s)("esri/images/portal/"+i+"16.png"):null}get isLayer(){return null!=this.type&&A.has(this.type)}get itemCdnUrl(){return(0,S.a)(this.itemUrl)}get itemPageUrl(){const e=this.portal?.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){const e=this.portal?.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal?.normalizeUrl(`${e}/info/${t}?f=json`)??null:null}get userItemUrl(){const e=this.portal?.restUrl;if(!e)return null;const t=this.owner||this.portal?.user?.username;return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=y.A.getDefault()),i=t.load(e).then((()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:null!=e?e.signal:null,query:{token:this.apiKey}}):{})).then((e=>{this.sourceJSON=e,this.read(e)}));return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}};return e instanceof M&&(e=e.rating),null==e||isNaN(e)||"number"!=typeof e||(t.query.rating=e),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new M({rating:e,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:(0,a.o8)(this.applicationProxies),avgRating:this.avgRating,categories:(0,a.o8)(this.categories),created:(0,a.o8)(this.created),culture:this.culture,description:this.description,extent:(0,a.o8)(this.extent),groupCategories:(0,a.o8)(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:(0,a.o8)(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:(0,a.o8)(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:(0,a.o8)(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:(0,a.o8)(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new T({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){const e=this.toJSON();for(const t of["tags","typeKeywords","categories"])e[t]=e[t]?.join(", ");const{extent:t}=e;return t&&(e.extent=JSON.stringify(t)),e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return null!=t.rating?(t.created=new Date(t.created),new M(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},T)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then((e=>(this.sourceJSON=e,this.read(e),this)))}update(e){return this.id?this.load().then((()=>this.portal.signIn())).then((()=>{const t=e?.data,i={method:"post"};i.query=this.createPostQuery();for(const e in i.query)null===i.query[e]&&(i.query[e]="");return i.query.clearEmptyFields=!0,null!=t&&("string"==typeof t?i.query.text=t:"object"==typeof t&&(i.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,i).then((()=>this.reload()))})):Promise.reject(new s.A("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new s.A("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:i}=this;await t.signIn();const{copyResources:r,folder:n,tags:o,title:a}=e||{},l={method:"post",query:{copyPrivateResources:"all"===r,folder:"string"==typeof n?n:n?.id,includeResources:!!r,tags:o?.join(","),title:a}},{itemId:c}=await t.request(`${i}/copy`,l);return new T({id:c,portal:t})}updateThumbnail(e){return this.id?this.load().then((()=>this.portal.signIn())).then((()=>{const t=e.thumbnail,i=e.filename,r={method:"post"};if("string"==typeof t)(0,c.DB)(t)?r.query={data:t}:r.query={url:(0,c.s2)(t)},null!=i&&(r.query.filename=i);else{const e=new FormData;null!=i?e.append("file",t,i):e.append("file",t),r.body=e}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then((()=>this.reload()))})):Promise.reject(new s.A("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:r}=await i.e(81).then(i.bind(i,90081));return r(this,e,t)}async addResource(e,t,r){const{addOrUpdateResources:n}=await i.e(81).then(i.bind(i,90081));return e.portalItem=this,await n(this,[{resource:e,content:t,compress:r?.compress,access:r?.access}],"add",r),e}async removeResource(e,t){const{removeResource:r}=await i.e(81).then(i.bind(i,90081));if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new s.A("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await i.e(81).then(i.bind(i,90081));return t(this,e)}resourceFromPath(e){return new b({portalItem:this,path:e})}toJSON(){const e=this.extent,t={accessInformation:this.accessInformation,categories:(0,a.o8)(this.categories),created:this.created?.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:(0,a.o8)(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:(0,a.o8)(this.typeKeywords),url:this.url};return(0,a.oy)(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new T({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};(0,r._)([(0,h.MZ)({type:["private","shared","org","public"]})],x.prototype,"access",void 0),(0,r._)([(0,h.MZ)()],x.prototype,"accessInformation",void 0),(0,r._)([(0,h.MZ)({type:String})],x.prototype,"apiKey",void 0),(0,r._)([(0,h.MZ)({json:{read:{source:"appProxies"}}})],x.prototype,"applicationProxies",void 0),(0,r._)([(0,h.MZ)()],x.prototype,"avgRating",void 0),(0,r._)([(0,h.MZ)()],x.prototype,"categories",void 0),(0,r._)([(0,h.MZ)({type:Date})],x.prototype,"created",void 0),(0,r._)([(0,h.MZ)()],x.prototype,"culture",void 0),(0,r._)([(0,h.MZ)()],x.prototype,"description",void 0),(0,r._)([(0,h.MZ)({readOnly:!0})],x.prototype,"displayName",null),(0,r._)([(0,h.MZ)({type:f.A})],x.prototype,"extent",void 0),(0,r._)([(0,p.w)("extent")],x.prototype,"readExtent",null),(0,r._)([(0,h.MZ)()],x.prototype,"groupCategories",void 0),(0,r._)([(0,h.MZ)({readOnly:!0})],x.prototype,"iconUrl",null),(0,r._)([(0,h.MZ)()],x.prototype,"id",void 0),(0,r._)([(0,h.MZ)({readOnly:!0})],x.prototype,"isLayer",null),(0,r._)([(0,h.MZ)({type:Boolean,readOnly:!0})],x.prototype,"isOrgItem",void 0),(0,r._)([(0,h.MZ)()],x.prototype,"itemControl",void 0),(0,r._)([(0,h.MZ)({readOnly:!0})],x.prototype,"itemPageUrl",null),(0,r._)([(0,h.MZ)({readOnly:!0})],x.prototype,"itemUrl",null),(0,r._)([(0,h.MZ)()],x.prototype,"licenseInfo",void 0),(0,r._)([(0,h.MZ)({type:Date})],x.prototype,"modified",void 0),(0,r._)([(0,h.MZ)()],x.prototype,"name",void 0),(0,r._)([(0,h.MZ)()],x.prototype,"numComments",void 0),(0,r._)([(0,h.MZ)()],x.prototype,"numRatings",void 0),(0,r._)([(0,h.MZ)()],x.prototype,"numViews",void 0),(0,r._)([(0,h.MZ)()],x.prototype,"owner",void 0),(0,r._)([(0,h.MZ)()],x.prototype,"ownerFolder",void 0),(0,r._)([(0,h.MZ)({type:y.A})],x.prototype,"portal",void 0),(0,r._)([(0,h.MZ)()],x.prototype,"screenshots",void 0),(0,r._)([(0,h.MZ)()],x.prototype,"size",void 0),(0,r._)([(0,h.MZ)()],x.prototype,"snippet",void 0),(0,r._)([(0,h.MZ)()],x.prototype,"sourceJSON",void 0),(0,r._)([(0,h.MZ)({type:String})],x.prototype,"sourceUrl",void 0),(0,r._)([(0,h.MZ)({type:String})],x.prototype,"spatialReference",void 0),(0,r._)([(0,h.MZ)()],x.prototype,"tags",void 0),(0,r._)([(0,h.MZ)()],x.prototype,"thumbnail",void 0),(0,r._)([(0,h.MZ)({readOnly:!0})],x.prototype,"thumbnailUrl",null),(0,r._)([(0,h.MZ)()],x.prototype,"title",void 0),(0,r._)([(0,h.MZ)()],x.prototype,"type",void 0),(0,r._)([(0,h.MZ)()],x.prototype,"typeKeywords",void 0),(0,r._)([(0,h.MZ)({type:String,json:{read(e,t){if(E.has(t.type)){const t=this.portal?.restUrl;e||=t&&this.id?`${t}/content/items/${this.id}/data`:null}return e}}})],x.prototype,"url",void 0),(0,r._)([(0,h.MZ)({readOnly:!0})],x.prototype,"userItemUrl",null),x=T=(0,r._)([(0,d.$)("esri.portal.PortalItem")],x);const I=x},42268:(e,t,i)=>{"use strict";i.d(t,{A:()=>y});var r,n=i(82392),s=i(73783),o=i(1817),a=i(15565),l=i(81482),c=(i(6273),i(80861),i(26325)),h=i(8e3),u=i(44153),p=i(64672);const d=new o.J({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let f=r=class extends s.A{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){"asc"!==e&&"desc"!==e||this._set("sortOrder",e)}clone(){return new r({categories:this.categories?(0,a.o8)(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let i=[];this.categories&&(i=this.categories.map((e=>Array.isArray(e)?JSON.stringify(e):e)));let r="";if(this.extent){const e=(0,p.Cv)(this.extent,u.A.WGS84);null!=e&&(r=`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`)}let n=this.query;!this.disableExtraQuery&&e.extraQuery&&(n="("+n+")"+e.extraQuery);const s={categories:i,bbox:r,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map((e=>d.toJSON(e.trim()))).join(","),s.sortOrder=this.sortOrder),{query:{...t,...s}}}};(0,n._)([(0,l.MZ)()],f.prototype,"categories",void 0),(0,n._)([(0,l.MZ)()],f.prototype,"disableExtraQuery",void 0),(0,n._)([(0,l.MZ)({type:h.A})],f.prototype,"extent",void 0),(0,n._)([(0,l.MZ)()],f.prototype,"filter",void 0),(0,n._)([(0,l.MZ)()],f.prototype,"num",void 0),(0,n._)([(0,l.MZ)()],f.prototype,"query",void 0),(0,n._)([(0,l.MZ)()],f.prototype,"sortField",void 0),(0,n._)([(0,l.MZ)()],f.prototype,"sortOrder",null),(0,n._)([(0,l.MZ)()],f.prototype,"start",void 0),f=r=(0,n._)([(0,c.$)("esri.portal.PortalQueryParams")],f);const y=f},14395:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var r=i(82392),n=i(62991),s=i(84977),o=i(81482),a=(i(6273),i(80861),i(67498),i(26325));let l=class extends s.oY{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new n.A("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};(0,r._)([(0,o.MZ)({type:Date})],l.prototype,"created",void 0),(0,r._)([(0,o.MZ)()],l.prototype,"id",void 0),(0,r._)([(0,o.MZ)()],l.prototype,"portal",void 0),(0,r._)([(0,o.MZ)()],l.prototype,"title",void 0),(0,r._)([(0,o.MZ)({readOnly:!0})],l.prototype,"url",null),(0,r._)([(0,o.MZ)()],l.prototype,"username",void 0),l=(0,r._)([(0,a.$)("esri.portal.PortalFolder")],l);const c=l;var h,u=i(45749);let p=h=class extends s.oY{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.portal?.restUrl;return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,i=e?.data,r=e?.folder,n={method:"post"};t&&(n.query=t.createPostQuery(),null!=i&&("string"==typeof i?n.query.text=i:"object"==typeof i&&(n.query.text=JSON.stringify(i))));let s=this.userContentUrl;return r&&(s+="/"+("string"==typeof r?r:r.id)),this.portal.request(s+"/addItem",n).then((e=>(t.id=e.id,t.portal=this.portal,t.loaded?t.reload():t.load())))}deleteItem(e){let t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal.request(t+`/items/${e.id}/delete`,{method:"post"}).then((()=>{e.id=null,e.portal=null}))}deleteItems(e){const t=this.userContentUrl+"/deleteItems",i=e.map((e=>e.id));if(i.length){const r={method:"post",query:{items:i.join(",")}};return this.portal.request(t,r).then((()=>{e.forEach((e=>{e.id=null,e.portal=null}))}))}return Promise.resolve(void 0)}fetchFolders(){return this.portal.request(this.userContentUrl??"",{query:{num:1}}).then((e=>{let t;return t=e&&e.folders?e.folders.map((e=>{const t=c.fromJSON(e);return t.portal=this.portal,t})):[],t}))}fetchGroups(){return this.portal.request(this.url??"").then((e=>{let t;return t=e&&e.groups?e.groups.map((e=>{const t=u.A.fromJSON(e);return t.portal=this.portal,t})):[],t}))}fetchItems(e){const t=e??{};let r,n=this.userContentUrl??"";return t.folder&&(n+="/"+t.folder.id),Promise.resolve().then(i.bind(i,43305)).then((({default:e})=>{r=e;const i={folders:!1,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"};return this.portal.request(n,{query:i})})).then((e=>{let t;return e?.items?(t=e.items.map((e=>{const t=r.fromJSON(e);return t.portal=this.portal,t})),Promise.all(t.map((e=>e.load()))).catch((e=>e)).then((()=>({items:t,nextStart:e.nextStart,total:e.total})))):{items:[],nextStart:-1,total:0}}))}fetchTags(){return this.portal.request(this.url+"/tags").then((e=>e.tags))}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new u.A({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new n.A("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new n.A("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new h;return t.sourceJSON=e,t.read(e),t}};(0,r._)([(0,o.MZ)()],p.prototype,"access",void 0),(0,r._)([(0,o.MZ)({type:Date})],p.prototype,"created",void 0),(0,r._)([(0,o.MZ)()],p.prototype,"culture",void 0),(0,r._)([(0,o.MZ)()],p.prototype,"description",void 0),(0,r._)([(0,o.MZ)()],p.prototype,"email",void 0),(0,r._)([(0,o.MZ)()],p.prototype,"favGroupId",void 0),(0,r._)([(0,o.MZ)()],p.prototype,"fullName",void 0),(0,r._)([(0,o.MZ)({type:Date})],p.prototype,"modified",void 0),(0,r._)([(0,o.MZ)()],p.prototype,"orgId",void 0),(0,r._)([(0,o.MZ)()],p.prototype,"portal",void 0),(0,r._)([(0,o.MZ)()],p.prototype,"preferredView",void 0),(0,r._)([(0,o.MZ)()],p.prototype,"privileges",void 0),(0,r._)([(0,o.MZ)()],p.prototype,"region",void 0),(0,r._)([(0,o.MZ)()],p.prototype,"role",void 0),(0,r._)([(0,o.MZ)()],p.prototype,"roleId",void 0),(0,r._)([(0,o.MZ)()],p.prototype,"sourceJSON",void 0),(0,r._)([(0,o.MZ)()],p.prototype,"thumbnail",void 0),(0,r._)([(0,o.MZ)({readOnly:!0})],p.prototype,"thumbnailUrl",null),(0,r._)([(0,o.MZ)()],p.prototype,"units",void 0),(0,r._)([(0,o.MZ)({readOnly:!0})],p.prototype,"userContentUrl",null),(0,r._)([(0,o.MZ)({readOnly:!0})],p.prototype,"url",null),(0,r._)([(0,o.MZ)()],p.prototype,"username",void 0),(0,r._)([(0,o.MZ)()],p.prototype,"userType",void 0),p=h=(0,r._)([(0,a.$)("esri.portal.PortalUser")],p);const d=p},10069:(e,t,i)=>{"use strict";i.d(t,{m:()=>o,v:()=>s});var r=i(19759),n=i(83382);function s(e,t){return{...a(e,t),readResourcePaths:[]}}function o(e,t,i){const n=(0,r.An)(e.itemUrl);return{...a(e,t),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:n?{rootPath:n.path,writtenUrls:[]}:null,resources:i?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function a(e,t){return{origin:t,url:(0,r.An)(e.itemUrl),portal:e.portal||n.A.getDefault(),portalItem:e}}},86074:(e,t,i)=>{"use strict";i.d(t,{It:()=>p,LG:()=>o,OM:()=>c,Y:()=>a,bK:()=>l,mm:()=>u,sQ:()=>h});var r=i(34561),n=i(44153),s=i(64672);function o(e,t){if(!a(e,t)){const i=e.typeKeywords;i?i.push(t):e.typeKeywords=[t]}}function a(e,t){return!!e.typeKeywords?.includes(t)}function l(e){return a(e,u.HOSTED_SERVICE)}function c(e,t){const i=e.typeKeywords;if(i){const e=i.indexOf(t);e>-1&&i.splice(e,1)}}async function h(e){const t=e.clone().normalize();let i;if(t.length>1)for(const e of t)i?e.width>i.width&&(i=e):i=e;else i=t[0];return async function(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return(0,s.ci)(e);const i=n.A.WGS84;return await(0,r.initializeProjection)(t,i),(0,r.project)(e,i)}(i)}const u={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map"};function p(e){const{portal:t,isOrgItem:i,itemControl:r}=e,n=t.user?.privileges;let s=!n||n.includes("features:user:edit"),o=!!i&&!!n?.includes("features:user:fullEdit");const a="update"===r||"admin"===r;return a?o=s=!0:o&&(s=!0),{features:{edit:s,fullEdit:o},content:{updateItem:a}}}},9856:(e,t,i)=>{"use strict";i.d(t,{$:()=>o,p:()=>s});const r=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,n={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function s(e){const t=e?.match(r);if(!t)return null;const[,i,s,o]=t;if(!i)return null;let a=null,l=null,c=null;const{devext:h,qaext:u,www:p}=n;if(s)if(a=i,o)switch(o.toLowerCase()){case"devext":({customBaseUrl:l,portalHostname:c}=h);break;case"qa":({customBaseUrl:l,portalHostname:c}=u);break;default:return null}else({customBaseUrl:l,portalHostname:c}=p);else switch(i.toLowerCase()){case"devext":({customBaseUrl:l,portalHostname:c}=h);break;case"qaext":({customBaseUrl:l,portalHostname:c}=u);break;case"www":({customBaseUrl:l,portalHostname:c}=p);break;default:return null}return{customBaseUrl:l,isPortal:!1,portalHostname:c,urlKey:a}}function o(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}},95752:(e,t,i)=>{"use strict";i.d(t,{j:()=>r});const r=(0,i(1817).O)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},42957:(e,t,i)=>{"use strict";i.d(t,{A:()=>I});var r,n=i(82392),s=i(3438),o=i(1817),a=i(15565),l=i(80861),c=i(81482),h=i(77380),u=i(85716),p=i(25376),d=i(26325),f=i(48524),y=i(8636),m=i(46227),g=i(46243),v=i(48410),_=i(89179),b=i(19900),w=i(77299),M=i(83911);const T="percent-of-total",S="field",A=new o.J({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:T,esriNormalizeByField:S}),E=(0,y.dp)(_.A);let x=r=class extends((0,v.h)(g.A)){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,i){if(!Array.isArray(e))return;let r=t.minValue;return e.map((e=>{const t=new _.A;return t.read(e,i),null==t.minValue&&(t.minValue=r),null==t.maxValue&&(t.maxValue=t.minValue),r=t.maxValue,t}))}writeClassBreakInfos(e,t,i,r){const n=e.map((e=>e.write({},r)));this._areClassBreaksConsecutive()&&n.forEach((e=>delete e.classMinValue)),t[i]=n}castField(e){return null==e?e:"function"==typeof e?(l.A.getLogger(this).error(".field: field must be a string value"),null):(0,y.GX)(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,i=null!=this.normalizationTotal;return t||i?(e=t&&S||i&&T||null,t&&i&&l.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==S&&e!==T||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,i){let r=null;r="number"==typeof e?new _.A({minValue:e,maxValue:t,symbol:(0,s.dp)(i)}):E((0,a.o8)(e)),this.classBreakInfos.push(r),1===this.classBreakInfos.length&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const i=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(i[0]===e&&i[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return this.valueExpression&&null==t?.arcade&&l.A.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let i=t;this.valueExpression&&null==t?.arcade&&(i={...i,arcade:await(0,M.lw)()});const r=this.getBreakIndex(e,i);return-1!==r?this.classBreakInfos[r]:null}getSymbol(e,t){if(this.valueExpression&&null==t?.arcade)return void l.A.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&null==t?.arcade){const e=await(0,M.lw)(),{arcadeUtils:t}=e;t.hasGeometryOperations(this.valueExpression)&&await t.enableGeometryOperations(),i={...i,arcade:e}}const r=this.getBreakIndex(e,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach((t=>{t.symbol&&e.push(t.symbol)})),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce(((e,t)=>e+t.getMeshHash()),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new r({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,a.o8)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,a.o8)(this.visualVariables),legendOptions:(0,a.o8)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map((i=>i.collectRequiredFields(e,t))),(0,m.Dx)(e,t,this.valueExpression)];(0,m.rq)(e,t,this.field),(0,m.rq)(e,t,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:n,arcade:s,timeZone:o}=t??{},{valueExpression:a}=this;let l=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const c=s.arcadeUtils;if(!l){const e=c.createSyntaxTree(a);l=c.createFunction(e),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=a;const h=c.executeFunction(l,c.createExecContext(e,c.getViewInfo({viewingMode:i,scale:r,spatialReference:n}),o));return this._getBreakIndexfromInfos(h)}_getBreakIndexForField(e){const t=this.field,i=e.attributes,r=this.normalizationType;let n=parseFloat(i[t]);if(r){const e=this.normalizationTotal,t=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if("log"===r)n=Math.log(n)*Math.LOG10E;else if(r!==T||null==e||isNaN(e)){if(r===S&&!isNaN(t)){if(isNaN(n)||isNaN(t))return-1;n/=t}}else n=n/e*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(null!=e&&"number"==typeof e&&!isNaN(e))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return i}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}};(0,n._)([(0,c.MZ)(b.As)],x.prototype,"backgroundFillSymbol",void 0),(0,n._)([(0,c.MZ)({type:[_.A]})],x.prototype,"classBreakInfos",void 0),(0,n._)([(0,p.w)("classBreakInfos")],x.prototype,"readClassBreakInfos",null),(0,n._)([(0,f.K)("classBreakInfos")],x.prototype,"writeClassBreakInfos",null),(0,n._)([(0,c.MZ)({type:String,json:{write:!0}})],x.prototype,"defaultLabel",void 0),(0,n._)([(0,c.MZ)(b.z4)],x.prototype,"defaultSymbol",void 0),(0,n._)([(0,c.MZ)({type:String,json:{write:!0}})],x.prototype,"field",void 0),(0,n._)([(0,h.w)("field")],x.prototype,"castField",null),(0,n._)([(0,c.MZ)({type:Boolean})],x.prototype,"isMaxInclusive",void 0),(0,n._)([(0,c.MZ)({type:w.q,json:{write:!0}})],x.prototype,"legendOptions",void 0),(0,n._)([(0,c.MZ)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],x.prototype,"minValue",null),(0,n._)([(0,c.MZ)({type:String,json:{write:!0}})],x.prototype,"normalizationField",void 0),(0,n._)([(0,c.MZ)({type:Number,cast:e=>(0,y.GB)(e),json:{write:!0}})],x.prototype,"normalizationTotal",void 0),(0,n._)([(0,c.MZ)({type:A.apiValues,value:null,json:{type:A.jsonValues,read:A.read,write:A.write}})],x.prototype,"normalizationType",null),(0,n._)([(0,u.e)({classBreaks:"class-breaks"})],x.prototype,"type",void 0),(0,n._)([(0,c.MZ)({type:String,json:{write:!0}})],x.prototype,"valueExpression",void 0),(0,n._)([(0,c.MZ)({type:String,json:{write:!0}})],x.prototype,"valueExpressionTitle",void 0),x=r=(0,n._)([(0,d.$)("esri.renderers.ClassBreaksRenderer")],x);const I=x},8499:(e,t,i)=>{"use strict";i.d(t,{A:()=>I});var r=i(82392),n=i(15565),s=i(81482),o=(i(6273),i(80861)),a=i(26325),l=i(48524),c=i(46227),h=i(46243),u=i(48410),p=i(93814),d=i(38116),f=i(62991),y=i(91700),m=i(37623),g=i(27805),v=i(51387),_=i(83911),b=i(60936),w=i(9427),M=i(77234);const T="esri.renderers.support.DictionaryLoader",S={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class A{constructor(e,t,i){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new y.q(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=e,this.config=t,this.fieldMap=i}getSymbolFields(){return this._symbolFields}async getSymbolAsync(e,t){let i;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(t));try{i=await this._dictionaryPromise}catch(e){if((0,m.zf)(e))return this._dictionaryPromise=null,null}const r=this._dictionaryVersion&&this._dictionaryVersion.since(4,0),n={};if(this.fieldMap)for(const t of this._symbolFields){const i=(0,M.MO)(this.fieldMap[t],this._fieldIndex);if(i){const s=e.attributes[i];n[t]=r?s:null!=s?""+e.attributes[i]:""}else n[t]=""}let s=null;try{s=i?.(n,t)}catch(e){return null}if(!s||"string"!=typeof s||"invalid"===s)return null;const o=s.split(";"),a=[],l=[];for(const e of o)if(e)if(e.includes("po:")){const t=e.substr(3).split("|");if(3===t.length){const e=t[0],i=t[1];let r=t[2];if("DashTemplate"===i)r=r.split(" ").map((e=>Number(e)));else if("Color"===i){const e=new p.A(r).toRgba();r=[e[0],e[1],e[2],255*e[3]]}else r=Number(r);l.push({primitiveName:e,propertyName:i,value:r,defaultValue:null})}}else if(e.includes("|")){for(const t of e.split("|"))if(this._itemNames.has(t)){a.push(t);break}}else this._itemNames.has(e)&&a.push(e);const c=null==e.geometry||!e.geometry.hasZ&&"point"===e.geometry.type;return this._cimPartsToCIMSymbol(e,a,l,c,t)}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void o.A.getLogger(T).error("no valid URL!");const t=(0,d.A)(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:null!=e?e.signal:null}),[{data:i}]=await Promise.all([t,(0,_.lw)()]);if(!i)throw this._dictionaryPromise=null,new f.A("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:r,dictionary_version:n,expression:s,itemsNames:a}=i,l=s;let c=!1;n&&(this._dictionaryVersion=g.R.parse(n),c=this._dictionaryVersion.since(4,0)),this._refSymbolUrlTemplate=this.url+"/"+i.cimRefTemplateUrl,this._itemNames=new Set(a),this._symbolFields=r.symbol;const h={};if(this.config){const e=this.config;for(const t in e)h[t]=e[t]}if(r.configuration)for(const e of r.configuration)h.hasOwnProperty(e.name)||(h[e.name]=e.value);const u=[];if(e?.fields&&this.fieldMap)for(const t in this.fieldMap){const i=this.fieldMap[t],r=e.fields.filter((e=>e.name.toLowerCase()===i?.toLowerCase()));r.length>0&&u.push({...r[0],type:c?r[0].type:"esriFieldTypeString"})}u.length>0&&(this._fieldIndex=new v.A(u));const p=(0,_.xR)(l,null!=e?e.spatialReference:null,u,h).then((e=>{const t={scale:0};return(i,r)=>{if(null==e)return null;const n=e.repurposeFeature({geometry:null,attributes:i});return t.scale=null!=r?r.scale??void 0:void 0,e.evaluate({$feature:n,$view:t},e.services)}})).catch((e=>(o.A.getLogger(T).error("Creating dictinoary expression failed:",e),null)));return this._dictionaryPromise=p,p}async _cimPartsToCIMSymbol(e,t,i,r,s){const o=new Array(t.length);for(let e=0;e<t.length;e++)o[e]=this._getSymbolPart(t[e],s);let a=await Promise.all(o);const l=this.fieldMap;if(l){a=(0,n.o8)(a);for(const t of a)w.$.applyDictionaryTextOverrides(t,e,l,this._fieldIndex,(0,M.bs)(t))}return new b.A({data:this._combineSymbolParts(a,i,r)})}async _getSymbolPart(e,t){const i=this._symbolCache.get(e);if(i)return i;if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then((e=>e.data));const r=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,e),n=(0,d.A)(r,{responseType:"json",query:{f:"json"},...t});this._ongoingRequests.set(e,n),n.finally((()=>this._ongoingRequests.delete(e)));try{const t=await n;return this._symbolCache.put(e,t.data),t.data}catch(e){throw e}}_combineSymbolParts(e,t,i){if(!e||0===e.length)return null;const r={...e[0]};if(e.length>1){r.symbolLayers=[];for(const t of e){const e=t;r.symbolLayers.unshift(...e.symbolLayers)}}return i&&(r.callout=S),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:t}}}var E;let x=E=class extends((0,u.h)(h.A)){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new A(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,i,r){r?.origin||super.writeVisualVariables(e,t,i,r)}clone(){return new E({config:(0,n.o8)(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:(0,n.o8)(this.fieldMap),url:(0,n.o8)(this.url),visualVariables:(0,n.o8)(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await(0,c.Dx)(e,t,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];t.has(r)&&e.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};(0,r._)([(0,s.MZ)({type:A})],x.prototype,"_loader",null),(0,r._)([(0,s.MZ)({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],x.prototype,"config",void 0),(0,r._)([(0,s.MZ)({type:Object,json:{write:!0}})],x.prototype,"fieldMap",void 0),(0,r._)([(0,s.MZ)({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],x.prototype,"scaleExpression",void 0),(0,r._)([(0,l.K)("scaleExpression")],x.prototype,"writeData",null),(0,r._)([(0,s.MZ)({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],x.prototype,"scaleExpressionTitle",void 0),(0,r._)([(0,s.MZ)({type:String,json:{write:!0}})],x.prototype,"url",void 0),(0,r._)([(0,l.K)("visualVariables")],x.prototype,"writeVisualVariables",null),x=E=(0,r._)([(0,a.$)("esri.renderers.DictionaryRenderer")],x);const I=x},72502:(e,t,i)=>{"use strict";i.d(t,{A:()=>w});var r,n=i(82392),s=i(93814),o=i(15565),a=i(81482),l=(i(6273),i(80861),i(85716)),c=i(26325),h=i(46227),u=i(46243),p=i(48410),d=i(38927),f=i(84977);i(67498);let y=r=class extends f.oY{constructor(){super(...arguments),this.unit=null}clone(){return new r({unit:this.unit})}};(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],y.prototype,"unit",void 0),y=r=(0,n._)([(0,c.$)("esri.renderers.support.DotDensityLegendOptions")],y);const m=y;var g,v=i(55736),_=i(24826);let b=g=class extends((0,p.h)(u.A)){constructor(e){super(e),this.attributes=null,this.backgroundColor=new s.A([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new _.A,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(null==this.referenceScale)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new v.A({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes?.reduce(((e,t)=>e+t.getAttributeHash()),"")??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new g({attributes:(0,o.o8)(this.attributes),backgroundColor:(0,o.o8)(this.backgroundColor),dotBlendingEnabled:(0,o.o8)(this.dotBlendingEnabled),dotShape:(0,o.o8)(this.dotShape),dotSize:(0,o.o8)(this.dotSize),dotValue:(0,o.o8)(this.dotValue),legendOptions:(0,o.o8)(this.legendOptions),outline:(0,o.o8)(this.outline),referenceScale:(0,o.o8)(this.referenceScale),seed:(0,o.o8)(this.seed),visualVariables:(0,o.o8)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){const e=this.attributes?.map((e=>e.field||e.valueExpression||""));return`${e}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes??[])i.valueExpression&&await(0,h.Dx)(e,t,i.valueExpression),i.field&&e.add(i.field)}};(0,n._)([(0,a.MZ)({type:[d.A],json:{write:!0}})],b.prototype,"attributes",void 0),(0,n._)([(0,a.MZ)({type:s.A,json:{write:!0}})],b.prototype,"backgroundColor",void 0),(0,n._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],b.prototype,"dotBlendingEnabled",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!1}})],b.prototype,"dotShape",void 0),(0,n._)([(0,a.MZ)({type:Number,json:{write:!0}})],b.prototype,"dotSize",void 0),(0,n._)([(0,a.MZ)({type:m,json:{write:!0}})],b.prototype,"legendOptions",void 0),(0,n._)([(0,a.MZ)({type:_.A,json:{default:null,write:!0}})],b.prototype,"outline",void 0),(0,n._)([(0,a.MZ)({type:Number,json:{write:!0}})],b.prototype,"dotValue",void 0),(0,n._)([(0,a.MZ)({type:Number,json:{write:!0}})],b.prototype,"referenceScale",void 0),(0,n._)([(0,a.MZ)({type:Number,json:{write:!0}})],b.prototype,"seed",void 0),(0,n._)([(0,l.e)({dotDensity:"dot-density"})],b.prototype,"type",void 0),b=g=(0,n._)([(0,c.$)("esri.renderers.DotDensityRenderer")],b);const w=b},2394:(e,t,i)=>{"use strict";i.d(t,{A:()=>E});var r=i(82392),n=i(93814),s=(i(3438),i(61090)),o=i(15565),a=i(80861),l=i(9987),c=i(23572),h=i(81482),u=(i(6273),i(66361)),p=i(85716),d=i(26325),f=i(46227),y=i(46243),m=i(51005),g=i(39991),v=i(14755),_=i(84977);i(67498);let b=class extends((0,v.O)(_.oY)){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};(0,r._)([(0,h.MZ)({type:String,json:{write:!0}})],b.prototype,"minLabel",void 0),(0,r._)([(0,h.MZ)({type:String,json:{write:!0}})],b.prototype,"maxLabel",void 0),(0,r._)([(0,h.MZ)({type:String,json:{write:!0}})],b.prototype,"title",void 0),b=(0,r._)([(0,d.$)("esri.renderers.support.HeatmapLegendOptions")],b);var w,M=i(10961),T=i(68231);function S(e){if(null!=e){const{maxDensity:t,minDensity:i,radius:r}=e;if(null!=t||null!=i||null!=r){const{blurRadius:t,maxPixelIntensity:i,minPixelIntensity:r,...n}=e;return n}}return e}let A=w=class extends y.A{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new g.A({ratio:0,color:new n.A("rgba(255, 140, 0, 0)")}),new g.A({ratio:.75,color:new n.A("rgba(255, 140, 0, 1)")}),new g.A({ratio:.9,color:new n.A("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(e){return S(e)}get blurRadius(){return(0,M.PU)(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",(0,M.zp)(e)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(M.ex**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(e,t){this._warnedProps[e]||"user"===(0,u.oY)(this).getDefaultOrigin()&&(this._warnedProps[e]=!0,(0,l._)((()=>{(0,s.Lx)(a.A.getLogger(this),e,{replacement:`${String(t)} (suggested value: ${this._get(t)})`,version:"4.24"})})))}read(e,t){e=S(e),super.read(e,t)}getSymbol(){return new T.A}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const i=this.field,r=this.valueExpression;i&&"string"==typeof i&&(0,f.rq)(e,t,i),r&&"string"==typeof r&&await(0,f.Dx)(e,t,r)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new w({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:(0,o.o8)(this.colorStops),field:this.field,legendOptions:(0,o.o8)(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};(0,r._)([(0,h.MZ)({type:m.A,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],A.prototype,"authoringInfo",void 0),(0,r._)([(0,h.MZ)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],A.prototype,"blurRadius",null),(0,r._)([(0,h.MZ)({type:[g.A],json:{write:!0}})],A.prototype,"colorStops",void 0),(0,r._)([(0,h.MZ)({type:String,json:{write:!0}})],A.prototype,"field",void 0),(0,r._)([(0,h.MZ)({type:b,json:{write:!0}})],A.prototype,"legendOptions",void 0),(0,r._)([(0,h.MZ)({type:Number,json:{write:!0}})],A.prototype,"maxDensity",void 0),(0,r._)([(0,h.MZ)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],A.prototype,"maxPixelIntensity",null),(0,r._)([(0,h.MZ)({type:Number,json:{write:!0}})],A.prototype,"minDensity",void 0),(0,r._)([(0,h.MZ)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],A.prototype,"minPixelIntensity",null),(0,r._)([(0,h.MZ)({type:Number,cast:c.cr,json:{write:!0}})],A.prototype,"radius",void 0),(0,r._)([(0,h.MZ)({type:Number,range:{min:0},json:{default:0,write:!0}})],A.prototype,"referenceScale",void 0),(0,r._)([(0,p.e)({heatmap:"heatmap"})],A.prototype,"type",void 0),(0,r._)([(0,h.MZ)({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],A.prototype,"valueExpression",void 0),(0,r._)([(0,h.MZ)({type:String})],A.prototype,"valueExpressionTitle",void 0),(0,r._)([(0,h.MZ)({readOnly:!0})],A.prototype,"_pixelIntensityToDensity",null),A=w=(0,r._)([(0,d.$)("esri.renderers.HeatmapRenderer")],A);const E=A},52721:(e,t,i)=>{"use strict";i.d(t,{A:()=>M});var r=i(82392),n=i(93814),s=(i(3438),i(3223)),o=i(14755),a=i(23572),l=i(81482),c=(i(6273),i(80861),i(85716)),h=i(26325),u=i(46227),p=i(46243),d=i(48410),f=i(38927),y=i(84977);i(67498);let m=class extends((0,o.O)(y.oY)){constructor(){super(...arguments),this.color=new n.A([0,0,0,0]),this.label=null,this.threshold=0}};(0,r._)([(0,l.MZ)({type:n.A,json:{write:!0}})],m.prototype,"color",void 0),(0,r._)([(0,l.MZ)({type:String,json:{write:!0}})],m.prototype,"label",void 0),(0,r._)([(0,l.MZ)({type:Number,range:{min:0,max:1},json:{write:!0}})],m.prototype,"threshold",void 0),m=(0,r._)([(0,h.$)("esri.renderers.support.OthersCategory")],m);let g=class extends((0,o.O)(y.oY)){constructor(){super(...arguments),this.title=null}};(0,r._)([(0,l.MZ)({type:String,json:{write:!0}})],g.prototype,"title",void 0),g=(0,r._)([(0,h.$)("esri.renderers.support.PieChartLegendOptions")],g);var v=i(68231),_=i(55736),b=i(24826);let w=class extends((0,d.h)((0,o.O)(p.A))){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new n.A([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new m,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){return new v.A({size:this.size?this.size/2+(this.outline?.width||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(s.Ru)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return this.getSymbols().reduce(((e,t)=>e+JSON.stringify(t)),"")}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes)i.valueExpression&&await(0,u.Dx)(e,t,i.valueExpression),i.field&&e.add(i.field)}};(0,r._)([(0,l.MZ)({type:[f.A],json:{write:!0}})],w.prototype,"attributes",void 0),(0,r._)([(0,l.MZ)({type:_.A,json:{default:null,write:!0}})],w.prototype,"backgroundFillSymbol",void 0),(0,r._)([(0,l.MZ)({type:n.A,json:{write:!0}})],w.prototype,"defaultColor",void 0),(0,r._)([(0,l.MZ)({type:String,json:{write:!0}})],w.prototype,"defaultLabel",void 0),(0,r._)([(0,l.MZ)({type:Number,range:{min:0,max:1},json:{write:!0}})],w.prototype,"holePercentage",void 0),(0,r._)([(0,l.MZ)({type:m,json:{write:!0}})],w.prototype,"othersCategory",void 0),(0,r._)([(0,l.MZ)({type:g,json:{write:!0}})],w.prototype,"legendOptions",void 0),(0,r._)([(0,l.MZ)({type:b.A,json:{default:null,write:!0}})],w.prototype,"outline",void 0),(0,r._)([(0,l.MZ)({type:Number,cast:a.cr,json:{write:!0}})],w.prototype,"size",void 0),(0,r._)([(0,c.e)({pieChart:"pie-chart"})],w.prototype,"type",void 0),w=(0,r._)([(0,h.$)("esri.renderers.PieChartRenderer")],w);const M=w},46243:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var r=i(82392),n=i(1817),s=i(84977),o=i(81482),a=(i(6273),i(80861),i(67498),i(26325)),l=i(51005);const c=new n.J({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let h=class extends s.oY{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const t=new Set;return await this.collectRequiredFields(t,e),Array.from(t).sort()}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};(0,r._)([(0,o.MZ)({type:l.A,json:{write:!0}})],h.prototype,"authoringInfo",void 0),(0,r._)([(0,o.MZ)({type:c.apiValues,readOnly:!0,json:{type:c.jsonValues,read:!1,write:{writer:c.write,ignoreOrigin:!0}}})],h.prototype,"type",void 0),h=(0,r._)([(0,a.$)("esri.renderers.Renderer")],h);const u=h},79645:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var r,n=i(82392),s=i(15565),o=i(81482),a=(i(6273),i(80861),i(85716)),l=i(26325),c=i(46243),h=i(48410),u=i(19900);let p=r=class extends((0,h.h)(c.A)){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map((i=>i.collectRequiredFields(e,t))))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return this.getSymbols().reduce(((e,t)=>e+JSON.stringify(t)),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new r({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:(0,s.o8)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],p.prototype,"description",void 0),(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],p.prototype,"label",void 0),(0,n._)([(0,o.MZ)(u.Wp)],p.prototype,"symbol",void 0),(0,n._)([(0,a.e)({simple:"simple"})],p.prototype,"type",void 0),p=r=(0,n._)([(0,l.$)("esri.renderers.SimpleRenderer")],p);const d=p},1851:(e,t,i)=>{"use strict";i.d(t,{A:()=>$});var r=i(82392),n=i(3438),s=i(62991),o=i(15565),a=i(80861),l=i(21750),c=i(61985),h=i(81482),u=i(77380),p=i(85716),d=i(25376),f=i(26325),y=i(48524),m=i(58652),g=i(8636),v=i(46227),_=i(83382),b=i(46243),w=i(48410),M=i(19900),T=i(77299),S=i(14755),A=i(84977);i(6273),i(67498);let E=class extends((0,S.O)(A.oY)){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};(0,r._)([(0,h.MZ)(M.Ug)],E.prototype,"value",void 0),(0,r._)([(0,h.MZ)(M.Ug)],E.prototype,"value2",void 0),(0,r._)([(0,h.MZ)(M.Ug)],E.prototype,"value3",void 0),E=(0,r._)([(0,f.$)("esri.renderers.support.UniqueValue")],E);const x=E;var I=i(3223);let C=class extends((0,S.O)(A.oY)){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(null==e)return null;const t=typeof(e=Array.isArray(e)?e:[e])[0];return"string"===t||"number"===t?e.map((e=>new x({value:e}))):"object"===t?e[0]instanceof x?e:e.map((e=>new x(e))):null}};(0,r._)([(0,h.MZ)({type:String,json:{write:!0}})],C.prototype,"description",void 0),(0,r._)([(0,h.MZ)({type:String,json:{write:!0}})],C.prototype,"label",void 0),(0,r._)([(0,h.MZ)(M.z4)],C.prototype,"symbol",void 0),(0,r._)([(0,h.MZ)({type:[x],json:{type:[[String]],read:{reader:e=>e?e.map((e=>new x({value:e[0],value2:e[1],value3:e[2]}))):null},write:{writer:(e,t)=>{const i=[];for(const t of e){const e=[t.value,t.value2,t.value3].filter(I.Ru).map((e=>e.toString()));i.push(e)}t.values=i}}}})],C.prototype,"values",void 0),(0,r._)([(0,u.w)("values")],C.prototype,"castValues",null),C=(0,r._)([(0,f.$)("esri.renderers.support.UniqueValueClass")],C);const k=C;let N=class extends((0,S.O)(A.oY)){constructor(e){super(e),this.heading=null,this.classes=null}};(0,r._)([(0,h.MZ)({type:String,json:{write:!0}})],N.prototype,"heading",void 0),(0,r._)([(0,h.MZ)({type:[k],json:{write:!0}})],N.prototype,"classes",void 0),N=(0,r._)([(0,f.$)("esri.renderers.support.UniqueValueGroup")],N);const L=N;var O,R=i(6346),P=i(83911),D=i(55714),F=i(65949),j=i(43532);const Z="esri.renderers.UniqueValueRenderer",z=()=>a.A.getLogger(Z),U="uvInfos-watcher",V="uvGroups-watcher",G=(0,g.dp)(R.A);let B=O=class extends((0,w.h)(b.A)){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,t){if(!e&&!t)return;if(!e||!t)return{type:"complete",oldValue:e,newValue:t};let i=!1;const r={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let n=0;n<t.length;n++){const s=e.find((e=>e.value===t[n].value));s?(0,m.Ui)(s,t[n])?(r.changed.push({type:"complete",oldValue:s,newValue:t[n]}),i=!0):r.unchanged.push({oldValue:s,newValue:t[n]}):(r.added.push(t[n]),i=!0)}for(let n=0;n<e.length;n++)t.find((t=>t.value===e[n].value))||(r.removed.push(e[n]),i=!0);return i?r:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return null==e||"function"==typeof e?e:(0,g.GX)(e)}writeField(e,t,i,r){"string"==typeof e?t[i]=e:r?.messages?r.messages.push(new s.A("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):z().error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,i){return i.portal||_.A.getDefault()}readStyleOrigin(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const e=(0,D.f)(t.styleUrl,i);return Object.freeze({styleUrl:e})}}writeStyleOrigin(e,t,i,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=(0,D.t)(e.styleUrl,r))}set uniqueValueGroups(e){this.styleOrigin?z().error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?z().error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void z().error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i="object"==typeof e?G(e):new R.A({value:e,symbol:(0,n.dp)(t)}),this.uniqueValueInfos?.push(i),this._valueInfoMap[i.value]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void z().error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t)for(let i=0;i<t.length;i++){const r=t[i];if(String(r.value)===String(e)){delete this._valueInfoMap[e],t.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let i=t;return this.valueExpression&&null==t?.arcade&&(i={...i,arcade:await(0,P.lw)()}),this._getUniqueValueInfo(e,i)}getSymbol(e,t){if(this.valueExpression&&null==t?.arcade)return void z().error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(e,t);return i?.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&null==i?.arcade){const e=await(0,P.lw)(),{arcadeUtils:t}=e;t.hasGeometryOperations(this.valueExpression)&&await t.enableGeometryOperations(),i={...i,arcade:e}}const r=this._getUniqueValueInfo(e,i);return r?.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=this.uniqueValueInfos?.reduce(((e,t)=>e+t.getMeshHash()),"");return`${e}.${t}.${i}.${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}.${this.valueExpression}`}clone(){const e=new O({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:(0,o.o8)(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:(0,o.o8)(this.visualVariables),legendOptions:(0,o.o8)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:(0,o.o8)(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=(0,o.o8)(this.uniqueValueInfos),i=(0,o.o8)(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze((0,o.o8)(this.styleOrigin))),Object.freeze(t),Object.freeze(i)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",i),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map((i=>i.collectRequiredFields(e,t))),(0,v.Dx)(e,t,this.valueExpression)];(0,v.rq)(e,t,this.field),(0,v.rq)(e,t,this.field2),(0,v.rq)(e,t,this.field3),await Promise.all(i)}populateFromStyle(){return(0,F.cF)(this.styleOrigin,{portal:this.portal}).then((e=>{const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach((i=>{const r=new j.A({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==e.data.defaultItem||(this.defaultSymbol=r,this._isDefaultSymbolDerived=!0);const n=new R.A({value:i.name,symbol:r});t.push(n),this._valueInfoMap[i.name]=n})),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&this.uniqueValueInfos?.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this}))}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",",")}_updateUniqueValues(){null!=this._isInfosSource&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[t.value+""]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(U);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const i of e)t.push((0,c.wB)((()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description})),((e,t)=>{e!==t&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)}),{sync:!0}));this.addHandles(t,U)}}_watchUniqueValueGroups(){this.removeHandles(V);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const i of e){t.push((0,c.wB)((()=>({classes:i.classes})),((e,t)=>{e!==t&&(this._updateInfosFromGroups(),this._isInfosSource=!1)}),{sync:!0}));for(const e of i.classes??[])t.push((0,c.wB)((()=>({symbol:e.symbol,values:e.values,label:e.label,description:e.description})),((e,t)=>{e!==t&&(this._updateInfosFromGroups(),this._isInfosSource=!1)}),{sync:!0}))}this.addHandles(t,V)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:i,field3:r,fieldDelimiter:n,uniqueValueGroups:s,valueExpression:o}=this;if(!t&&!o)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!t||!i);for(const t of s)for(const s of t.classes??[]){const{symbol:t,label:o,values:l,description:c}=s;for(const s of l??[]){const{value:l,value2:h,value3:u}=s,p=[l];i&&p.push(h),r&&p.push(u);const d=a?p.join(n||""):p[0];e.push(new R.A({symbol:t,label:o,value:d,description:c}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:i,valueExpression:r,fieldDelimiter:n,uniqueValueInfos:s}=this;if(!t&&!r||!s.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!t||!i),a=s.map((e=>{const{symbol:t,label:i,value:r,description:s}=e,[a,l,c]=o?r?.toString()?.split(n||"")||[]:[r];return new k({symbol:t,label:i,description:s,values:[new x({value:a,value2:l,value3:c})]})})),l=[new L({classes:a})];e&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:n,arcade:s,timeZone:o}=t??{};let a=this._cache.compiledFunc;const l=s.arcadeUtils;if(!a){const e=l.createSyntaxTree(this.valueExpression);a=l.createFunction(e),this._cache.compiledFunc=a}const c=l.executeFunction(a,l.createExecContext(e,l.getViewInfo({viewingMode:i,scale:r,spatialReference:n}),o));return this._valueInfoMap[c+""]}_getUnqiueValueInfoForFields(e){const t=this.field,i=e.attributes;let r;if("function"!=typeof t&&this.field2){const e=this.field2,n=this.field3,s=[];t&&s.push(i[t]),e&&s.push(i[e]),n&&s.push(i[n]),r=s.join(this.fieldDelimiter||"")}else"function"==typeof t?r=t(e):t&&(r=i[t]);return this._valueInfoMap[r+""]}static fromPortalStyle(e,t){const i=new O(t?.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",t?.portal||_.A.getDefault());const r=i.populateFromStyle();return r.catch((t=>{z().error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",t)})),r}static fromStyleUrl(e,t){const i=new O(t?.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));const r=i.populateFromStyle();return r.catch((t=>{z().error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",t)})),r}};(0,r._)([(0,h.MZ)({readOnly:!0})],B.prototype,"_cache",null),(0,r._)([(0,p.e)({uniqueValue:"unique-value"})],B.prototype,"type",void 0),(0,r._)([(0,h.MZ)(M.As)],B.prototype,"backgroundFillSymbol",void 0),(0,r._)([(0,h.MZ)({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],B.prototype,"field",null),(0,r._)([(0,u.w)("field")],B.prototype,"castField",null),(0,r._)([(0,y.K)("field")],B.prototype,"writeField",null),(0,r._)([(0,h.MZ)({type:String,value:null,json:{write:!0}})],B.prototype,"field2",null),(0,r._)([(0,h.MZ)({type:String,value:null,json:{write:!0}})],B.prototype,"field3",null),(0,r._)([(0,h.MZ)({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],B.prototype,"orderByClassesEnabled",void 0),(0,r._)([(0,h.MZ)({type:String,value:null,json:{write:!0}})],B.prototype,"valueExpression",null),(0,r._)([(0,h.MZ)({type:String,json:{write:!0}})],B.prototype,"valueExpressionTitle",void 0),(0,r._)([(0,h.MZ)({type:T.q,json:{write:!0}})],B.prototype,"legendOptions",void 0),(0,r._)([(0,h.MZ)({type:String,json:{write:!0}})],B.prototype,"defaultLabel",void 0),(0,r._)([(0,h.MZ)((0,l.$N)({...M.z4},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],B.prototype,"defaultSymbol",null),(0,r._)([(0,h.MZ)({type:String,value:null,json:{write:!0}})],B.prototype,"fieldDelimiter",null),(0,r._)([(0,h.MZ)({type:_.A,readOnly:!0})],B.prototype,"portal",void 0),(0,r._)([(0,d.w)("portal",["styleName"])],B.prototype,"readPortal",null),(0,r._)([(0,h.MZ)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],B.prototype,"styleOrigin",void 0),(0,r._)([(0,d.w)("styleOrigin",["styleName","styleUrl"])],B.prototype,"readStyleOrigin",null),(0,r._)([(0,y.K)("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],B.prototype,"writeStyleOrigin",null),(0,r._)([(0,h.MZ)({type:[L],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,i)=>(t.uniqueValueGroups||function(e){const{field1:t,field2:i,field3:r,fieldDelimiter:n,uniqueValueInfos:s,valueExpression:o}=e,a=!(!t||!i);return[{classes:(s??[]).map((e=>{const{symbol:s,label:l,value:c,description:h}=e,[u,p,d]=a?c?.toString()?.split(n||"")||[]:[c],f=[];return(t||o)&&f.push(u),i&&f.push(p),r&&f.push(d),{symbol:s,label:l,values:[f],description:h}}))}]}(t)).map((e=>L.fromJSON(e,i)))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],B.prototype,"uniqueValueGroups",null),(0,r._)([(0,h.MZ)({type:[R.A],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],B.prototype,"uniqueValueInfos",null),B=O=(0,r._)([(0,f.$)(Z)],B);const $=B},48410:(e,t,i)=>{"use strict";i.d(t,{h:()=>D});var r=i(82392),n=i(81482),s=(i(6273),i(80861)),o=(i(67498),i(25376)),a=i(26325),l=i(48524),c=i(46227);const h=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var u,p=i(75906),d=i(36903);let f=u=class extends p.A{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter((e=>!!e))).sort(((e,t)=>e.value-t.value)),this._set("stops",e)}clone(){return new u({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((e=>e.clone())),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((e=>e.value||0))}};(0,r._)([(0,n.MZ)({readOnly:!0})],f.prototype,"cache",null),(0,r._)([(0,n.MZ)({type:["color"],json:{type:["colorInfo"]}})],f.prototype,"type",void 0),(0,r._)([(0,n.MZ)({type:String,json:{write:!0}})],f.prototype,"normalizationField",void 0),(0,r._)([(0,n.MZ)({type:[d.A],json:{write:!0}})],f.prototype,"stops",null),f=u=(0,r._)([(0,a.$)("esri.renderers.visualVariables.ColorVariable")],f);const y=f;var m,g=i(84977),v=i(8636),_=i(93802);let b=m=class extends g.oY{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return(0,_.D)(t.transparency)}writeOpacity(e,t,i){t[i]=(0,_.p)(e)}clone(){return new m({label:this.label,opacity:this.opacity,value:this.value})}};(0,r._)([(0,n.MZ)({type:String,json:{write:!0}})],b.prototype,"label",void 0),(0,r._)([(0,n.MZ)({type:Number,json:{type:v.jz,write:{target:"transparency"}}})],b.prototype,"opacity",void 0),(0,r._)([(0,o.w)("opacity",["transparency"])],b.prototype,"readOpacity",null),(0,r._)([(0,l.K)("opacity")],b.prototype,"writeOpacity",null),(0,r._)([(0,n.MZ)({type:Number,json:{write:!0}})],b.prototype,"value",void 0),b=m=(0,r._)([(0,a.$)("esri.renderers.visualVariables.support.OpacityStop")],b);const w=b;var M;let T=M=class extends p.A{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter((e=>!!e))).sort(((e,t)=>e.value-t.value)),this._set("stops",e)}clone(){return new M({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((e=>e.clone())),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((e=>e.value||0))}};(0,r._)([(0,n.MZ)({readOnly:!0})],T.prototype,"cache",null),(0,r._)([(0,n.MZ)({type:["opacity"],json:{type:["transparencyInfo"]}})],T.prototype,"type",void 0),(0,r._)([(0,n.MZ)({type:String,json:{write:!0}})],T.prototype,"normalizationField",void 0),(0,r._)([(0,n.MZ)({type:[w],json:{write:!0}})],T.prototype,"stops",null),T=M=(0,r._)([(0,a.$)("esri.renderers.visualVariables.OpacityVariable")],T);const S=T;var A=i(8112),E=i(41059),x=i(73783),I=i(1817),C=i(97629);const k={color:y,size:E.A,opacity:S,rotation:A.A},N=new I.J({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),L=/^\[([^\]]+)\]$/i;let O=class extends x.A{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),e=e&&e.filter((e=>!!e)),e?.length){for(const t of e)switch(t.type){case"color":this.colorVariables.push(t);break;case"opacity":this.opacityVariables.push(t);break;case"rotation":this.rotationVariables.push(t);break;case"size":this.sizeVariables.push(t)}this.sizeVariables.length&&this.sizeVariables.some((e=>!!e.target))&&e.sort(((e,t)=>{let i=null;return i=e.target===t.target?0:e.target?1:-1,i}));for(let t=0;t<e.length;t++)e[t].index=t;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,t,i){const{rotationExpression:r,rotationType:n}=t,o=r?.match(L),a=o?.[1];if(a&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:n,field:a})),e)return e.map((e=>{const t=N.read(e.type),r=k[t];r||(s.A.getLogger(this).warn(`Unknown variable type: ${t}`),i?.messages&&i.messages.push(new C.A("visual-variable:unsupported",`visualVariable of type '${t}' is not supported`,{definition:e,context:i})));const n=new r;return n.read(e,i),n}))}writeVariables(e,t){const i=[];for(const r of e){const e=r.toJSON(t);e&&i.push(e)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};(0,r._)([(0,n.MZ)()],O.prototype,"visualVariables",null),O=(0,r._)([(0,a.$)("esri.renderers.visualVariables.VisualVariableFactory")],O);const R=O,P={base:p.A,key:"type",typeMap:{opacity:S,color:y,rotation:A.A,size:E.A}},D=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new R}set visualVariables(e){this._vvFactory.visualVariables=e,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(e,t,i){return this._vvFactory.readVariables(e,t,i)}writeVisualVariables(e,t,i,r){t[i]=this._vvFactory.writeVariables(e,r)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const e of this.visualVariables)if(e.arcadeRequired)return!0;return!1}hasVisualVariables(e,t){return e?this.getVisualVariablesForType(e,t).length>0:this.getVisualVariablesForType("size",t).length>0||this.getVisualVariablesForType("color",t).length>0||this.getVisualVariablesForType("opacity",t).length>0||this.getVisualVariablesForType("rotation",t).length>0}getVisualVariablesForType(e,t){const i=this.visualVariables;return i?i.filter((i=>i.type===e&&("string"==typeof t?i.target===t:!1!==t||!i.target))):[]}async collectVVRequiredFields(e,t){let i=[];this.visualVariables&&(i=i.concat(this.visualVariables));for(const r of i)r&&(r.field&&(0,c.rq)(e,t,r.field),r.normalizationField&&(0,c.rq)(e,t,r.normalizationField),r.valueExpression&&(F(r.valueExpression,e,t)||await(0,c.Dx)(e,t,r.valueExpression)))}};return(0,r._)([(0,n.MZ)({types:[P],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),(0,r._)([(0,o.w)("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),(0,r._)([(0,l.K)("visualVariables")],t.prototype,"writeVisualVariables",null),t=(0,r._)([(0,a.$)("esri.renderers.mixins.VisualVariablesMixin")],t),t};function F(e,t,i){const r=(n=e,n.match(h)?.[1]?.replace(/\\'/g,"'")??null);var n;return null!=r&&((0,c.rq)(t,i,r),!0)}},38927:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var r,n=i(82392),s=i(93814),o=i(84977),a=i(80861),l=i(81482),c=i(77380),h=(i(67498),i(6273),i(26325)),u=i(8636);let p=r=class extends o.oY{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return null==e?e:"function"==typeof e?(a.A.getLogger(this).error(".field: field must be a string value"),null):(0,u.GX)(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new r({color:this.color?.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};(0,n._)([(0,l.MZ)({type:s.A,json:{type:[Number],write:!0}})],p.prototype,"color",void 0),(0,n._)([(0,l.MZ)({type:String,json:{write:!0}})],p.prototype,"field",void 0),(0,n._)([(0,c.w)("field")],p.prototype,"castField",null),(0,n._)([(0,l.MZ)({type:String,json:{write:!0}})],p.prototype,"label",void 0),(0,n._)([(0,l.MZ)({type:String,json:{write:!0}})],p.prototype,"valueExpression",void 0),(0,n._)([(0,l.MZ)({type:String,json:{write:!0}})],p.prototype,"valueExpressionTitle",void 0),p=r=(0,n._)([(0,h.$)("esri.renderers.support.AttributeColorInfo")],p);const d=p},51005:(e,t,i)=>{"use strict";i.d(t,{A:()=>L});var r,n=i(82392),s=i(1817),o=i(84977),a=i(15565),l=i(81482),c=i(8636),h=i(25376),u=i(26325);i(6273),i(80861),i(67498);let p=r=class extends o.oY{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new r({minValue:this.minValue,maxValue:this.maxValue})}};var d;(0,n._)([(0,l.MZ)({type:Number,json:{write:!0}})],p.prototype,"minValue",void 0),(0,n._)([(0,l.MZ)({type:Number,json:{write:!0}})],p.prototype,"maxValue",void 0),p=r=(0,n._)([(0,u.$)("esri.renderer.support.AuthoringInfoClassBreakInfo")],p);let f=d=class extends o.oY{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new d({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:(0,a.o8)(this.classBreakInfos)})}};(0,n._)([(0,l.MZ)({type:String,json:{write:!0}})],f.prototype,"field",void 0),(0,n._)([(0,l.MZ)({type:String,json:{write:!0}})],f.prototype,"normalizationField",void 0),(0,n._)([(0,l.MZ)({type:String,json:{write:!0}})],f.prototype,"label",void 0),(0,n._)([(0,l.MZ)({type:[p],json:{write:!0}})],f.prototype,"classBreakInfos",void 0),f=d=(0,n._)([(0,u.$)("esri.renderers.support.AuthoringInfoFieldInfo")],f);var y,m=i(77380);const g=new s.J({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),v=new s.J({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),_={key:e=>"number"==typeof e?"number":"string",typeMap:{number:Number,string:String},base:null},b=["high-to-low","above-and-below","centered-on","extremes"],w=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],M=["seconds","minutes","hours","days","months","years"];let T=y=class extends o.oY{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return"string"==typeof e||"number"==typeof e?e:null}castStartTime(e){return"string"==typeof e||"number"==typeof e?e:null}get style(){return"color"===this.type?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return"color"===this.type||"size"===this.type?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new y({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};(0,n._)([(0,l.MZ)({types:_,json:{write:!0}})],T.prototype,"endTime",void 0),(0,n._)([(0,m.w)("endTime")],T.prototype,"castEndTime",null),(0,n._)([(0,l.MZ)({type:String,json:{write:!0}})],T.prototype,"field",void 0),(0,n._)([(0,l.MZ)({type:Number,json:{write:!0}})],T.prototype,"maxSliderValue",void 0),(0,n._)([(0,l.MZ)({type:Number,json:{write:!0}})],T.prototype,"minSliderValue",void 0),(0,n._)([(0,l.MZ)({types:_,json:{write:!0}})],T.prototype,"startTime",void 0),(0,n._)([(0,m.w)("startTime")],T.prototype,"castStartTime",null),(0,n._)([(0,l.MZ)({type:g.apiValues,value:null,json:{type:g.jsonValues,read:g.read,write:g.write}})],T.prototype,"style",null),(0,n._)([(0,l.MZ)({type:w,value:null,json:{type:w,origins:{"web-scene":{type:b,write:{writer:(e,t)=>{b.includes(e)&&(t.theme=e)}}}},write:!0}})],T.prototype,"theme",null),(0,n._)([(0,l.MZ)({type:v.apiValues,json:{type:v.jsonValues,read:v.read,write:v.write}})],T.prototype,"type",void 0),(0,n._)([(0,l.MZ)({type:M,json:{type:M,write:!0}})],T.prototype,"units",void 0),T=y=(0,n._)([(0,u.$)("esri.renderers.support.AuthoringInfoVisualVariable")],T);const S=T;var A,E=i(16506);const x=new s.J({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),I=new s.J({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),C=new s.J({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),k=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"];let N=A=class extends o.oY{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&"relationship"!==t?"class-breaks-size"===t||"class-breaks-color"===t?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?(0,E.r)(e):void 0}get fields(){return this.type&&"predominance"!==this.type?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&"relationship"!==this.type?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&"relationship"!==this.type?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return"flow"===this.type?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&"relationship"!==this.type?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&"relationship"!==e&&"class-breaks-size"!==e&&"class-breaks-color"!==e||this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;"classed-size"===e?t="class-breaks-size":"classed-color"===e&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return"univariate-color-size"===this.type?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new A({classificationMethod:this.classificationMethod,colorRamp:(0,a.o8)(this.colorRamp),fadeRatio:(0,a.o8)(this.fadeRatio),fields:this.fields?.slice(0),field1:(0,a.o8)(this.field1),field2:(0,a.o8)(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map((e=>e.clone())),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};(0,n._)([(0,l.MZ)({type:x.apiValues,value:null,json:{type:x.jsonValues,read:x.read,write:x.write,origins:{"web-document":{default:"manual",type:x.jsonValues,read:x.read,write:x.write}}}})],N.prototype,"classificationMethod",null),(0,n._)([(0,l.MZ)({types:E.g,json:{write:!0}})],N.prototype,"colorRamp",void 0),(0,n._)([(0,h.w)("colorRamp")],N.prototype,"readColorRamp",null),(0,n._)([(0,l.MZ)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],N.prototype,"fadeRatio",void 0),(0,n._)([(0,l.MZ)({type:[String],value:null,json:{write:!0}})],N.prototype,"fields",null),(0,n._)([(0,l.MZ)({type:f,value:null,json:{write:!0}})],N.prototype,"field1",null),(0,n._)([(0,l.MZ)({type:f,value:null,json:{write:!0}})],N.prototype,"field2",null),(0,n._)([(0,l.MZ)({type:["flow-line","wave-front"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],N.prototype,"flowTheme",null),(0,n._)([(0,l.MZ)({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],N.prototype,"focus",null),(0,n._)([(0,l.MZ)({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],N.prototype,"isAutoGenerated",void 0),(0,n._)([(0,l.MZ)({type:Number,value:null,json:{type:c.jz,write:!0}})],N.prototype,"numClasses",null),(0,n._)([(0,l.MZ)({type:k,json:{type:k,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],N.prototype,"lengthUnit",void 0),(0,n._)([(0,l.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],N.prototype,"maxSliderValue",void 0),(0,n._)([(0,l.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],N.prototype,"minSliderValue",void 0),(0,n._)([(0,l.MZ)({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],N.prototype,"statistics",null),(0,n._)([(0,l.MZ)({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],N.prototype,"standardDeviationInterval",null),(0,n._)([(0,l.MZ)({type:I.apiValues,value:null,json:{type:I.jsonValues,read:I.read,write:I.write,origins:{"web-scene":{type:C.jsonValues,write:{writer:C.write,overridePolicy:e=>({enabled:"flow"!==e})}}}}})],N.prototype,"type",null),(0,n._)([(0,l.MZ)({type:[S],json:{write:!0}})],N.prototype,"visualVariables",void 0),(0,n._)([(0,l.MZ)({type:["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],N.prototype,"univariateSymbolStyle",null),(0,n._)([(0,l.MZ)({type:["high-to-low","above-and-below","above","below","90-10"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],N.prototype,"univariateTheme",null),N=A=(0,n._)([(0,u.$)("esri.renderers.support.AuthoringInfo")],N);const L=N},89179:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});var r,n=i(82392),s=i(84977),o=i(81482),a=(i(6273),i(80861),i(67498),i(26325)),l=i(19900);let c=r=class extends s.oY{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new r({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],c.prototype,"description",void 0),(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],c.prototype,"label",void 0),(0,n._)([(0,o.MZ)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],c.prototype,"minValue",void 0),(0,n._)([(0,o.MZ)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],c.prototype,"maxValue",void 0),(0,n._)([(0,o.MZ)(l.Wp)],c.prototype,"symbol",void 0),c=r=(0,n._)([(0,a.$)("esri.renderers.support.ClassBreakInfo")],c);const h=c},39991:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var r,n=i(82392),s=i(93814),o=i(84977),a=i(81482),l=i(8636),c=(i(67498),i(6273),i(26325));let h=r=class extends o.oY{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new r({color:this.color&&this.color.clone(),ratio:this.ratio})}};(0,n._)([(0,a.MZ)({type:s.A,json:{type:[l.jz],default:null,write:!0}})],h.prototype,"color",void 0),(0,n._)([(0,a.MZ)({type:Number,json:{write:!0}})],h.prototype,"ratio",void 0),h=r=(0,n._)([(0,c.$)("esri.renderers.support.HeatmapColorStop")],h);const u=h},77299:(e,t,i)=>{"use strict";i.d(t,{q:()=>l});var r,n=i(82392),s=i(84977),o=i(81482),a=(i(6273),i(80861),i(67498),i(26325));let l=r=class extends s.oY{constructor(){super(...arguments),this.title=null}clone(){return new r({title:this.title})}};(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],l.prototype,"title",void 0),l=r=(0,n._)([(0,a.$)("esri.renderers.support.LegendOptions")],l)},6346:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});var r,n=i(82392),s=i(84977),o=i(81482),a=(i(6273),i(80861),i(67498),i(26325)),l=i(19900);let c=r=class extends s.oY{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new r({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol?.toJSON());return`${this.value}.${e}`}};(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],c.prototype,"description",void 0),(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],c.prototype,"label",void 0),(0,n._)([(0,o.MZ)(l.Wp)],c.prototype,"symbol",void 0),(0,n._)([(0,o.MZ)(l.Ug)],c.prototype,"value",void 0),c=r=(0,n._)([(0,a.$)("esri.renderers.support.UniqueValueInfo")],c);const h=c},39990:(e,t,i)=>{"use strict";function r(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function n(e,t){return"number"==typeof e?e:e?.stops?.length?function(e){let t=0,i=0;for(let r=0;r<e.length;r++){const n=e[r].size;"number"==typeof n&&(t+=n,i++)}return t/i}(e.stops):t}function s(e,t){if(!t)return e;const i=t.filter((e=>"size"===e.type)).map((t=>{const{maxSize:i,minSize:r}=t;return(n(i,e)+n(r,e))/2}));let r=0;const s=i.length;if(0===s)return e;for(let e=0;e<s;e++)r+=i[e];const o=Math.floor(r/s);return Math.max(o,e)}function o(e){const t=e?.renderer,i=e?.pointerType,n="touch"===i?9:6;if(!t)return n;const o="visualVariables"in t?s(n,t.visualVariables):n;if("simple"===t.type)return r(o,t.symbol);if("unique-value"===t.type){let e=o;return t.uniqueValueInfos?.forEach((t=>{e=r(e,t.symbol)})),e}if("class-breaks"===t.type){let e=o;return t.classBreakInfos.forEach((t=>{e=r(e,t.symbol)})),e}return"dot-density"===t.type||t.type,o}i.d(t,{o:()=>o})},19900:(e,t,i)=>{"use strict";i.d(t,{As:()=>u,Ug:()=>p,Wp:()=>h,z4:()=>c});var r=i(3438),n=i(21750),s=i(9283),o=i(4064),a=i(999),l=i(7998);const c={types:r.xK,json:{write:{writer:o.M9},origins:{"web-scene":{types:r.On,write:{writer:o.M9},read:{reader:(0,s.C)({types:r.On})}}}}},h=(0,n.$N)({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},c),u={types:{base:a.A,key:"type",typeMap:{"simple-fill":r.Es.typeMap["simple-fill"],"picture-fill":r.Es.typeMap["picture-fill"],"polygon-3d":r.Es.typeMap["polygon-3d"]}},json:{write:{writer:o.M9},origins:{"web-scene":{type:l.A,write:{writer:o.M9}}}}},p={cast:e=>null==e||"string"==typeof e||"number"==typeof e?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e?.toString()}}}}},10961:(e,t,i)=>{"use strict";i.d(t,{O3:()=>u,PU:()=>c,YW:()=>d,ex:()=>a,hv:()=>p,zp:()=>l});var r=i(4506),n=i(23572),s=i(74772),o=i(76982);const a=2.4;function l(e){return(0,n.PN)(e*a)}function c(e){return(0,n.Lz)(e)/a}function h(e,t,i,n){let{color:o,ratio:a}=t,{color:l,ratio:c}=i;if(c===a){const e=1e-6;1===c?a-=e:c+=e}const h=(0,r.qE)((n-a)/(c-a),0,1);(0,s.l)(e,o.toArray(),l.toArray(),h)}function u(e){const t=new Uint8ClampedArray(2048);if((e=e.filter((({ratio:e})=>e>=0&&e<=1)).sort(((e,t)=>e.ratio-t.ratio)).map((({color:e,ratio:t})=>({color:e,ratio:Math.max(t,.001)})))).length<1)return t;let i=e[0],r=e[0],n=1;const s=(0,o.vt)();for(let o=0;o<512;o++){const a=(o+.5)/512;for(;a>r.ratio&&n<e.length;)i=r,r=e[n++];h(s,i,r,a),t.set(s,4*o)}return t}function p(e,t,i){const r=Math.sqrt(e**2+t**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function d(e){return"function"==typeof e?e:e?t=>+t[e]:()=>1}},29221:(e,t,i)=>{"use strict";i.d(t,{L:()=>l,r:()=>o});var r=i(97629),n=i(9283),s=i(83015);function o(e,t){return l(e,null,t)}const a=(0,n.C)({types:s.H});function l(e,t,i){return e?e&&(e.styleName||e.styleUrl)&&"uniqueValue"!==e.type?(i?.messages&&i.messages.push(new r.A("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:i})),null):a(e,t,i):null}},47195:(e,t,i)=>{"use strict";i.d(t,{j:()=>s});var r=i(5262),n=i(99263);const s={unknown:1,inches:(0,r.oU)(1,"meters","inches"),feet:(0,r.oU)(1,"meters","feet"),"us-feet":(0,r.oU)(1,"meters","us-feet"),yards:(0,r.oU)(1,"meters","yards"),miles:(0,r.oU)(1,"meters","miles"),"nautical-miles":(0,r.oU)(1,"meters","nautical-miles"),millimeters:(0,r.oU)(1,"meters","millimeters"),centimeters:(0,r.oU)(1,"meters","centimeters"),decimeters:(0,r.oU)(1,"meters","decimeters"),meters:(0,r.oU)(1,"meters","meters"),kilometers:(0,r.oU)(1,"meters","kilometers"),"decimal-degrees":1/(0,r.vl)(1,"meters",n.$O.radius)}},29604:(e,t,i)=>{"use strict";i.d(t,{GP:()=>p,LI:()=>h,lc:()=>l,u5:()=>c}),i(39553);var r=i(18632);const n=/^-?(\d+)(\.(\d+))?$/i;function s(e,t){return e-t}function o(e,t){let i,r;return i=Number(e.toFixed(t)),i<e?r=i+1/10**t:(r=i,i-=1/10**t),i=Number(i.toFixed(t)),r=Number(r.toFixed(t)),[i,r]}function a(e,t,i,r,n){const s=c(e,t,i,r),o=null==s.previous||s.previous<=n,a=null==s.next||s.next<=n;return o&&a||s.previous+s.next<=2*n}function l(e){const t=String(e),i=t.match(n);if(i&&i[1])return{integer:i[1].split("").length,fractional:i[3]?i[3].split("").length:0};if(t.toLowerCase().includes("e")){const e=t.split("e"),i=e[0],r=e[1];if(i&&r){const e=Number(i);let t=Number(r);const n=t>0;n||(t=Math.abs(t));const s=l(e);return n?(s.integer+=t,t>s.fractional?s.fractional=0:s.fractional-=t):(s.fractional+=t,t>s.integer?s.integer=1:s.integer-=t),s}}return{integer:0,fractional:0}}function c(e,t,i,r){const n={previous:null,next:null};if(null!=i){const r=e-i,s=t-i-r;n.previous=Math.floor(Math.abs(100*s/r))}if(null!=r){const i=r-e,s=r-t-i;n.next=Math.floor(Math.abs(100*s/i))}return n}function h(e,t={}){const i=e.slice(0),{tolerance:r=2,strictBounds:n=!1,indexes:c=i.map(((e,t)=>t))}=t;c.sort(s);for(let e=0;e<c.length;e++){const t=c[e],s=i[t],h=0===t?null:i[t-1],u=t===i.length-1?null:i[t+1],p=l(s).fractional;if(p){let l,c=0,d=!1;for(;c<=p&&!d;){const t=o(s,c);l=n&&0===e?t[1]:t[0],d=a(s,l,h,u,r),c++}d&&(i[t]=l)}}return i}const u={maximumFractionDigits:20};function p(e){return(0,r.ZV)(e,u)}},84155:(e,t,i)=>{"use strict";i.d(t,{b:()=>a,l:()=>o});var r=i(3223),n=(i(6273),i(62991)),s=i(14215);function o(e){return null==e||"simple"===e.type||"unique-value"===e.type||"class-breaks"===e.type||"dictionary"===e.type||"heatmap"===e.type}function a(e,t){if(null==e)return null;if(!o(e))return new n.A("renderer-conversion-3d:unsupported-renderer",`Unsupported renderer of type '${e.type||e.declaredClass}'`,{renderer:e});switch(e.type){case"simple":return function(e){return l(e,(0,s.t)(e.symbol).error)}(e);case"unique-value":return function(e,t){const i={...s.c,...t},n=e.uniqueValueInfos?.map((e=>(0,s.t)(e.symbol,i).error)).filter(r.Ru),o=(0,s.t)(e.defaultSymbol,i);return o.error&&n?.unshift(o.error),l(e,n)}(e,t);case"class-breaks":return function(e){const t=e.classBreakInfos.map((e=>(0,s.t)(e.symbol).error)).filter(r.Ru),i=(0,s.t)(e.defaultSymbol);return i.error&&t.unshift(i.error),l(e,t)}(e);case"dictionary":case"heatmap":return null}return null}function l(e,t){if(!t)return null;let i;if(i=Array.isArray(t)?t:[t],i.length>0){const t=i.map((e=>e.details.symbol.type||e.details.symbol.declaredClass)).filter((e=>!!e));t.sort();const r=[];return t.forEach(((e,i)=>{0!==i&&e===t[i-1]||r.push(e)})),new n.A("renderer-conversion-3d:unsupported-symbols",`Renderer contains symbols (${r.join(", ")}) which are not supported in 3D`,{renderer:e,symbolErrors:i})}return null}},99650:(e,t,i)=>{"use strict";i.d(t,{L:()=>o});var r=i(3132),n=i(37623),s=i(97629);async function o(e,t,i){const o=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(o&&"unique-value"===o.type&&o.styleOrigin){const a=await(0,r.Ke)(o.populateFromStyle());if((0,n.Te)(i),!1===a.ok){const i=a.error;t?.messages&&t.messages.push(new s.A("renderer:style-reference",`Failed to create unique value renderer from style reference: ${i.message}`,{error:i,context:t})),e.clear("renderer",t?.origin)}}}},83015:(e,t,i)=>{"use strict";i.d(t,{H:()=>p,X:()=>d});var r=i(80861),n=i(42957),s=i(8499),o=i(72502),a=i(2394),l=i(52721),c=i(46243),h=i(79645),u=i(1851);const p={key:"type",base:c.A,typeMap:{heatmap:a.A,simple:h.A,"unique-value":u.A,"class-breaks":n.A,"dot-density":o.A,dictionary:s.A,"pie-chart":l.A},errorContext:"renderer"},d={key:"type",base:c.A,typeMap:{simple:h.A,"unique-value":u.A,"class-breaks":n.A,heatmap:a.A},errorContext:"renderer",validate:function(e){switch(e.type){case"simple":return function(e){if(e.symbol)return e;r.A.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}(e);case"unique-value":return function(e){const t=e.uniqueValueInfos,i=t?.filter((({symbol:e,label:t},i)=>(e||r.A.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${i}] ${t}) without a symbol from web scene.`),!!e)));return i?.length!==t?.length&&(e.uniqueValueInfos=i),e}(e);case"class-breaks":return function(e){const t=e.classBreakInfos,i=t?.filter((({symbol:e,label:t},i)=>(e||r.A.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${i}] ${t}) without a symbol from web scene.`),!!e)));return i?.length!==t?.length&&(e.classBreakInfos=i),e}(e);case"heatmap":return e}}}},6779:(e,t,i)=>{"use strict";i.d(t,{iA:()=>h});var r=i(3223),n=(i(80861),i(80294)),s=i(50189),o=(i(46227),i(29604),i(36903),i(74274),i(54866)),a=i(51573),l=i(20752);async function c(e,t,i){(0,n.tE)(e,t,(()=>[])).push(...i)}async function h(e){const t=new Map;if(!e)return t;if("visualVariables"in e&&e.visualVariables){const i=e.visualVariables.filter((e=>"color"===e.type));for(const e of i){const i=(await(0,a.getRampStops)(e)??[]).map((e=>e.color));await c(t,e.field||e.valueExpression,i)}}if("heatmap"===e.type){const i=(0,l.Y)(e).map((e=>e.color));await c(t,e.field||e.valueExpression,i)}else if("pie-chart"===e.type){for(const i of e.attributes)await c(t,i.field||i.valueExpression,[i.color]);await c(t,"default",[e?.othersCategory?.color,(0,o.Sx)(e.backgroundFillSymbol,null)])}else if("dot-density"===e.type){for(const i of e.attributes)await c(t,i.field||i.valueExpression,[i.color]);await c(t,"default",[e.backgroundColor])}else if("unique-value"===e.type)if("predominance"===e.authoringInfo?.type)for(const i of e.uniqueValueInfos??[])await c(t,i.value.toString(),[(0,o.Sx)(i.symbol,null)]);else{const i=(e.uniqueValueInfos??[]).map((e=>(0,o.Sx)(e.symbol,null))),{field:r,field2:n,field3:s,valueExpression:a}=e;(r||a)&&await c(t,r||a,i),n&&await c(t,n,i),s&&await c(t,s,i)}else if("class-breaks"===e.type){const i=e.classBreakInfos.map((e=>(0,o.Sx)(e.symbol,null))),{field:r,valueExpression:n}=e;await c(t,r??n,i)}else"simple"===e.type&&await c(t,"default",[(0,o.Sx)(e.symbol,null)]);return"defaultSymbol"in e&&e.defaultSymbol&&await c(t,"default",[(0,o.Sx)(e.defaultSymbol,null)]),t.forEach(((e,i)=>{const n=(0,r.Am)(e.filter(Boolean),((e,t)=>JSON.stringify(e)===JSON.stringify(t)));t.set(i,n)})),t}(0,s.J2)("short-date")},8112:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var r,n=i(82392),s=i(62991),o=i(81482),a=(i(6273),i(80861),i(67498),i(26325)),l=i(48524),c=i(75906);let h=r=class extends c.A{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,i,r){if(r?.messages){const e=`visualVariables[${this.index}]`;r.messages.push(new s.A("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:e+".valueExpressionTitle",context:r}))}}clone(){return new r({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions?.clone()})}};(0,n._)([(0,o.MZ)({readOnly:!0})],h.prototype,"cache",null),(0,n._)([(0,o.MZ)({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],h.prototype,"axis",void 0),(0,n._)([(0,o.MZ)({type:["rotation"],json:{type:["rotationInfo"]}})],h.prototype,"type",void 0),(0,n._)([(0,o.MZ)({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],h.prototype,"rotationType",void 0),(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],h.prototype,"valueExpressionTitle",void 0),(0,n._)([(0,l.K)("web-scene","valueExpressionTitle")],h.prototype,"writeValueExpressionTitleWebScene",null),h=r=(0,n._)([(0,a.$)("esri.renderers.visualVariables.RotationVariable")],h);const u=h},41059:(e,t,i)=>{"use strict";i.d(t,{A:()=>S});var r,n=i(82392),s=i(62991),o=i(1817),a=i(80861),l=i(23572),c=i(81482),h=i(77380),u=i(25376),p=i(26325),d=i(48524),f=i(75906),y=i(30347),m=i(24102),g=i(2818),v=i(37525);const _=new o.J({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),b=new o.J({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function w(e){if(null!=e)return"string"==typeof e||"number"==typeof e?(0,l.cr)(e):"size"===e.type?(0,g.of)(e)?e:(delete(e={...e}).type,new T(e)):void 0}function M(e,t,i){if("object"!=typeof e)return e;const r=new T;return r.read(e,i),r}let T=r=class extends f.A{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:null!=this.valueExpression&&v.viewScaleRE.test(this.valueExpression)}}set expression(e){a.A.getLogger(this).warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),"view.scale"===e?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){(0,g.of)(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),(0,g.of)(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return(0,g.eh)(this)}set maxDataValue(e){e&&this.stops&&(a.A.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(a.A.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return w(e)}readMaxSize(e,t,i){return M(e,0,i)}set minDataValue(e){e&&this.stops&&(a.A.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(a.A.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return w(e)}readMinSize(e,t,i){return M(e,0,i)}get arcadeRequired(){return!!this.valueExpression||null!=this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||null!=this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired}set stops(e){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?e&&Array.isArray(e)&&(e=e.filter((e=>!!e))).sort(((e,t)=>e.value-t.value)):e&&(a.A.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return(0,g.KZ)(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,i,r){if("$view.scale"===e){if(r?.messages){const e=this.index,t="string"==typeof e?e:`visualVariables[${e}]`;r.messages.push(new s.A("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:t+".valueExpression",context:r}))}}else t[i]=e}readValueUnit(e){return e?b.read(e):null}clone(){return new r({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:(0,g.of)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:(0,g.of)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops?.map((e=>e.clone())),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions?.clone()})}flipSizes(){if(this.transformationType===g._w.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===g._w.Stops){const e=this.stops;if(!e)return this;const t=e.map((e=>e.size)).reverse(),i=e.length;for(let r=0;r<i;r++)e[r].size=t[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops?.map((e=>e.value||0))}};(0,n._)([(0,c.MZ)({readOnly:!0})],T.prototype,"cache",null),(0,n._)([(0,c.MZ)({type:_.apiValues,json:{type:_.jsonValues,origins:{"web-map":{read:!1}},read:_.read,write:_.write}})],T.prototype,"axis",void 0),(0,n._)([(0,c.MZ)({type:String,value:null,json:{read:!1}})],T.prototype,"expression",null),(0,n._)([(0,c.MZ)()],T.prototype,"index",null),(0,n._)([(0,c.MZ)({type:String,readOnly:!0})],T.prototype,"inputValueType",null),(0,n._)([(0,c.MZ)({type:m.A,json:{write:!0}})],T.prototype,"legendOptions",void 0),(0,n._)([(0,c.MZ)({type:Number,value:null,json:{write:!0}})],T.prototype,"maxDataValue",null),(0,n._)([(0,c.MZ)({type:Number,value:null,json:{write:!0}})],T.prototype,"maxSize",null),(0,n._)([(0,h.w)("maxSize")],T.prototype,"castMaxSize",null),(0,n._)([(0,u.w)("maxSize")],T.prototype,"readMaxSize",null),(0,n._)([(0,c.MZ)({type:Number,value:null,json:{write:!0}})],T.prototype,"minDataValue",null),(0,n._)([(0,c.MZ)({type:Number,value:null,json:{write:!0}})],T.prototype,"minSize",null),(0,n._)([(0,h.w)("minSize")],T.prototype,"castMinSize",null),(0,n._)([(0,u.w)("minSize")],T.prototype,"readMinSize",null),(0,n._)([(0,c.MZ)({type:String,json:{write:!0}})],T.prototype,"normalizationField",void 0),(0,n._)([(0,c.MZ)({readOnly:!0})],T.prototype,"arcadeRequired",null),(0,n._)([(0,c.MZ)({type:String})],T.prototype,"scaleBy",void 0),(0,n._)([(0,c.MZ)({type:[y.A],value:null,json:{write:!0}})],T.prototype,"stops",null),(0,n._)([(0,c.MZ)({type:["outline"],json:{write:!0}})],T.prototype,"target",void 0),(0,n._)([(0,c.MZ)({type:String,readOnly:!0})],T.prototype,"transformationType",null),(0,n._)([(0,c.MZ)({type:["size"],json:{type:["sizeInfo"]}})],T.prototype,"type",void 0),(0,n._)([(0,c.MZ)({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],T.prototype,"useSymbolValue",void 0),(0,n._)([(0,c.MZ)({type:String,json:{write:!0}})],T.prototype,"valueExpression",void 0),(0,n._)([(0,u.w)("valueExpression",["valueExpression","expression"])],T.prototype,"readValueExpression",null),(0,n._)([(0,d.K)("web-scene","valueExpression")],T.prototype,"writeValueExpressionWebScene",null),(0,n._)([(0,c.MZ)({type:["radius","diameter","area","width","distance"],json:{write:!0}})],T.prototype,"valueRepresentation",void 0),(0,n._)([(0,c.MZ)({type:b.apiValues,json:{write:b.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],T.prototype,"valueUnit",void 0),(0,n._)([(0,u.w)("valueUnit")],T.prototype,"readValueUnit",null),T=r=(0,n._)([(0,p.$)("esri.renderers.visualVariables.SizeVariable")],T);const S=T},75906:(e,t,i)=>{"use strict";i.d(t,{A:()=>f});var r=i(82392),n=i(1817),s=i(84977),o=i(80861),a=i(81482),l=i(77380),c=i(26325),h=i(8636),u=i(5785);const p=new n.J({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let d=class extends s.oY{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return null==e?e:"function"==typeof e?(o.A.getLogger(this).error(".field: field must be a string value"),null):(0,h.GX)(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};(0,r._)([(0,a.MZ)()],d.prototype,"index",void 0),(0,r._)([(0,a.MZ)({type:p.apiValues,readOnly:!0,json:{read:p.read,write:p.write}})],d.prototype,"type",void 0),(0,r._)([(0,a.MZ)({type:String,json:{write:!0}})],d.prototype,"field",void 0),(0,r._)([(0,l.w)("field")],d.prototype,"castField",null),(0,r._)([(0,a.MZ)({type:String,json:{write:!0}})],d.prototype,"valueExpression",void 0),(0,r._)([(0,a.MZ)({type:String,json:{write:!0}})],d.prototype,"valueExpressionTitle",void 0),(0,r._)([(0,a.MZ)({readOnly:!0})],d.prototype,"arcadeRequired",null),(0,r._)([(0,a.MZ)({type:u.A,json:{write:!0}})],d.prototype,"legendOptions",void 0),d=(0,r._)([(0,c.$)("esri.renderers.visualVariables.VisualVariable")],d);const f=d},36903:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var r,n=i(82392),s=i(93814),o=i(84977),a=i(81482),l=i(8636),c=(i(67498),i(6273),i(26325)),h=i(48524);let u=r=class extends o.oY{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,i){t[i]=e??0}clone(){return new r({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};(0,n._)([(0,a.MZ)({type:s.A,json:{type:[l.jz],write:!0}})],u.prototype,"color",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],u.prototype,"label",void 0),(0,n._)([(0,a.MZ)({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],u.prototype,"value",void 0),(0,n._)([(0,h.K)("value")],u.prototype,"writeValue",null),u=r=(0,n._)([(0,c.$)("esri.renderers.visualVariables.support.ColorStop")],u);const p=u},30347:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});var r,n=i(82392),s=i(84977),o=i(23572),a=i(81482),l=(i(6273),i(80861),i(67498),i(26325));let c=r=class extends s.oY{constructor(e){super(e),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new r({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],c.prototype,"label",void 0),(0,n._)([(0,a.MZ)({type:Number,cast:o.cr,json:{write:!0}})],c.prototype,"size",void 0),(0,n._)([(0,a.MZ)({type:Number,json:{write:!0}})],c.prototype,"value",void 0),(0,n._)([(0,a.MZ)({type:Boolean,json:{write:!1}})],c.prototype,"useMinValue",void 0),(0,n._)([(0,a.MZ)({type:Boolean,json:{write:!1}})],c.prototype,"useMaxValue",void 0),c=r=(0,n._)([(0,l.$)("esri.renderers.visualVariables.support.SizeStop")],c);const h=c},24102:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var r,n=i(82392),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),a=i(5785);let l=r=class extends a.A{constructor(){super(...arguments),this.customValues=null}clone(){return new r({title:this.title,showLegend:this.showLegend,customValues:this.customValues?.slice(0)})}};(0,n._)([(0,s.MZ)({type:[Number],json:{write:!0}})],l.prototype,"customValues",void 0),l=r=(0,n._)([(0,o.$)("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],l);const c=l},5785:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var r,n=i(82392),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),a=i(77299);let l=r=class extends a.q{constructor(){super(...arguments),this.showLegend=null}clone(){return new r({title:this.title,showLegend:this.showLegend})}};(0,n._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],l.prototype,"showLegend",void 0),l=r=(0,n._)([(0,o.$)("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],l);const c=l},2818:(e,t,i)=>{"use strict";var r,n;function s(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function o(e){return null!=e&&!isNaN(e)&&isFinite(e)}function a(e){return e.valueExpression?r.Expression:e.field&&"string"==typeof e.field?r.Field:r.Unknown}function l(e,t){const i=t||a(e),s=e.valueUnit||"unknown";return i===r.Unknown?n.Constant:e.stops?n.Stops:null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?n.ClampedLinear:"unknown"===s?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?n.Proportional:n.Additive:n.Identity:n.RealWorldSize}i.d(t,{KZ:()=>l,Yf:()=>r,_w:()=>n,eh:()=>a,gf:()=>o,of:()=>s}),function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"}(r||(r={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(n||(n={}))},37525:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getAllSizes:()=>T,getColor:()=>d,getOpacity:()=>f,getRotationAngle:()=>y,getSize:()=>m,getSizeForValue:()=>_,getSizeFromNumberOrVariable:()=>g,getSizeRangeAtScale:()=>b,getVisualVariableValues:()=>w,viewScaleRE:()=>p});var r=i(93814),n=i(20857),s=i(95039),o=i(80861),a=i(47195),l=i(2818);const c=()=>o.A.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),h=new n.A,u=Math.PI,p=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function d(e,t,i){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"color"===e.type)):e;if(!n)return;if("esri.renderers.visualVariables.ColorVariable"!==n.declaredClass)return void c().warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const s="number"==typeof t,o=s?null:t,a=o?.attributes;let l=s?t:null;const h=n.field,{ipData:u,hasExpression:p}=n.cache;let d=n.cache.compiledFunc;if(!h&&!p){const e=n.stops;return e&&e[0]&&e[0].color}if("number"!=typeof l)if(p){if(null==i?.arcade)return void c().error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},t=i.arcade.arcadeUtils,r=t.getViewInfo(e),s=t.createExecContext(o,r,i.timeZone);if(!d){const e=t.createSyntaxTree(n.valueExpression);d=t.createFunction(e),n.cache.compiledFunc=d}l=t.executeFunction(d,s)}else a&&(l=a[h]);const f=n.normalizationField,y=null!=a&&null!=f?parseFloat(a[f]):void 0;if(null!=l&&(!f||s||!isNaN(y)&&0!==y)){isNaN(y)||s||(l/=y);const e=M(l,u);if(e){const t=e[0],s=e[1],o=t===s?n.stops[t].color:r.A.blendColors(n.stops[t].color,n.stops[s].color,e[2],null!=i?i.color:void 0);return new r.A(o)}}}function f(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"opacity"===e.type)):e;if(!r)return;if("esri.renderers.visualVariables.OpacityVariable"!==r.declaredClass)return void c().warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const n="number"==typeof t,s=n?null:t,o=s?.attributes;let a=n?t:null;const l=r.field,{ipData:h,hasExpression:u}=r.cache;let p=r.cache.compiledFunc;if(!l&&!u){const e=r.stops;return e&&e[0]&&e[0].opacity}if("number"!=typeof a)if(u){if(null==i?.arcade)return void c().error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},t=i.arcade.arcadeUtils,n=t.getViewInfo(e),o=t.createExecContext(s,n,i.timeZone);if(!p){const e=t.createSyntaxTree(r.valueExpression);p=t.createFunction(e),r.cache.compiledFunc=p}a=t.executeFunction(p,o)}else o&&(a=o[l]);const d=r.normalizationField,f=null!=o&&null!=d?parseFloat(o[d]):void 0;if(null!=a&&(!d||n||!isNaN(f)&&0!==f)){isNaN(f)||n||(a/=f);const e=M(a,h);if(e){const t=e[0],i=e[1];if(t===i)return r.stops[t].opacity;{const n=r.stops[t].opacity;return n+(r.stops[i].opacity-n)*e[2]}}}}function y(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"rotation"===e.type)):e;if(!r)return;if("esri.renderers.visualVariables.RotationVariable"!==r.declaredClass)return void c().warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const n=r.axis||"heading",s="heading"===n&&"arithmetic"===r.rotationType?90:0,o="heading"===n&&"arithmetic"===r.rotationType?-1:1,a="number"==typeof t?null:t,l=a?.attributes,h=r.field,{hasExpression:u}=r.cache;let p=r.cache.compiledFunc,d=0;if(!h&&!u)return d;if(u){if(null==i?.arcade)return void c().error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},t=i.arcade.arcadeUtils,n=t.getViewInfo(e),s=t.createExecContext(a,n,i.timeZone);if(!p){const e=t.createSyntaxTree(r.valueExpression);p=t.createFunction(e),r.cache.compiledFunc=p}d=t.executeFunction(p,s)}else l&&(d=l[h]||0);return d="number"!=typeof d||isNaN(d)?null:s+o*d,d}function m(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"size"===e.type)):e;if(!r)return;if("esri.renderers.visualVariables.SizeVariable"!==r.declaredClass)return void c().warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const n=_(function(e,t,i){const r="number"==typeof t,n=r?null:t,s=n?.attributes;let o=r?t:null;const{isScaleDriven:a}=e.cache;let h=e.cache.compiledFunc;if(a){const t=null!=i?i.scale:void 0,r=null!=i?i.view:void 0;o=null==t||"3d"===r?function(e){let t=null,i=null;const r=e.stops;return r?(t=r[0].value,i=r[r.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}(e):t}else if(!r)switch(e.inputValueType){case l.Yf.Expression:{if(null==i?.arcade)return void c().error("Use of arcade expressions requires an arcade context");const t={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},r=i.arcade.arcadeUtils,s=r.getViewInfo(t),a=r.createExecContext(n,s,i.timeZone);if(!h){const t=r.createSyntaxTree(e.valueExpression);h=r.createFunction(t),e.cache.compiledFunc=h}o=r.executeFunction(h,a);break}case l.Yf.Field:s&&(o=s[e.field]);break;case l.Yf.Unknown:o=null}if(!(0,l.gf)(o))return null;if(r||!e.normalizationField)return o;const u=s?parseFloat(s[e.normalizationField]):null;return(0,l.gf)(u)&&0!==u?o/u:null}(r,t,i),r,t,i,r.cache.ipData);return null==n||isNaN(n)?0:n}function g(e,t,i){return null==e?null:(0,l.of)(e)?m(e,t,i):(0,l.gf)(e)?e:null}function v(e,t,i){return(0,l.gf)(i)&&e>i?i:(0,l.gf)(t)&&e<t?t:e}function _(e,t,i,r,n){switch(t.transformationType){case l._w.Additive:return function(e,t,i,r){return e+((g(t.minSize,i,r)||t.minDataValue)??0)}(e,t,i,r);case l._w.Constant:return function(e,t,i){const r=e.stops;let n=r?.length&&r[0].size;return null==n&&(n=e.minSize),g(n,t,i)}(t,i,r);case l._w.ClampedLinear:return function(e,t,i,r){const n=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),s=g(t.minSize,i,r),o=g(t.maxSize,i,r),a=null!=r?r.shape:void 0;if(e<=t.minDataValue)return s;if(e>=t.maxDataValue)return o;if(null==s||null==o)return null;if("area"===t.scaleBy&&a){const e="circle"===a,t=e?u*(s/2)**2:s*s,i=t+n*((e?u*(o/2)**2:o*o)-t);return e?2*Math.sqrt(i/u):Math.sqrt(i)}return s+n*(o-s)}(e,t,i,r);case l._w.Proportional:return function(e,t,i,r){const n=null!=r?r.shape:void 0,s=e/t.minDataValue,o=g(t.minSize,i,r),a=g(t.maxSize,i,r);let l=null;return l="circle"===n?2*Math.sqrt(s*(o/2)**2):"square"===n||"diamond"===n||"image"===n?Math.sqrt(s*o**2):s*o,v(l,o,a)}(e,t,i,r);case l._w.Stops:return function(e,t,i,r,n){const[s,o,a]=M(e,n);if(s===o)return g(t.stops?.[s].size,i,r);{const e=g(t.stops?.[s].size,i,r);return e+(g(t.stops?.[o].size,i,r)-e)*a}}(e,t,i,r,n);case l._w.RealWorldSize:return function(e,t,i,r){const n=(r?.resolution??1)*a.j[t.valueUnit],s=g(t.minSize,i,r),o=g(t.maxSize,i,r),{valueRepresentation:l}=t;let c=null;return c="area"===l?2*Math.sqrt(e/u)/n:"radius"===l||"distance"===l?2*e/n:e/n,v(c,s,o)}(e,t,i,r);case l._w.Identity:return e;case l._w.Unknown:return null}}function b(e,t,i){const{isScaleDriven:r}=e.cache;if(!(r&&"3d"===i||t))return null;const n={scale:t,view:i};let s=g(e.minSize,h,n),o=g(e.maxSize,h,n);if(null!=s||null!=o){if(s>o){const e=o;o=s,s=e}return{minSize:s,maxSize:o}}}function w(e,t,i){if(!e.visualVariables)return;const r=[],n=[],s=[],o=[],a=[];for(const t of e.visualVariables)switch(t.type){case"color":n.push(t);break;case"opacity":s.push(t);break;case"rotation":a.push(t);break;case"size":o.push(t)}return n.forEach((e=>{const n=d(e,t,i);r.push({variable:e,value:n})})),s.forEach((e=>{const n=f(e,t,i);r.push({variable:e,value:n})})),a.forEach((e=>{const n=y(e,t,i);r.push({variable:e,value:n})})),o.forEach((e=>{const n=m(e,t,i);r.push({variable:e,value:n})})),r.filter((e=>null!=e.value))}function M(e,t){if(!t)return;let i=0,r=t.length-1;return t.some(((t,n)=>e<t?(r=n,!0):(i=n,!1))),[i,r,(e-t[i])/(t[r]-t[i])]}function T(e,t,i){const r=["proportional","proportional","proportional"];for(const n of e){const e=n.useSymbolValue?"symbol-value":m(n,t,i);switch(n.axis){case"width":r[0]=e;break;case"depth":r[1]=e;break;case"height":r[2]=e;break;case"width-and-depth":r[0]=e,r[1]=e;break;case"all":case void 0:case null:r[0]=e,r[1]=e,r[2]=e;break;default:(0,s.Xb)(n.axis)}}return r}},38116:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var r=i(32083),n=i(6480),s=i(62991),o=i(6273),a=i(15565),l=i(37623),c=i(19759),h=i(9856),u=i(44945),p=i(25207);async function d(e,t){e instanceof URL&&(e=e.toString()),t?.query instanceof URLSearchParams&&(t.query=(0,c.zf)(t.query.toString().replaceAll("+"," ")));const a=(0,c.DB)(e),h=(0,c.w8)(e);h||a||(e=(0,c.S8)(e));const d={url:e,requestOptions:{...t}};let g=(0,c.sC)(e);if(g){const e=await async function(e,t){if(null!=e.responseData)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let i,r;try{r=await e.before(t)}catch(e){i=T("request:interceptor",e,t)}if((r instanceof Error||r instanceof s.A)&&(i=T("request:interceptor",r,t)),i)throw e.error&&e.error(i),i;return r}}(g,d);if(null!=e)return{data:e,getAllHeaders:b,getHeader:b,httpStatus:200,requestOptions:d.requestOptions,url:d.url};g.after||g.error||(g=null)}if(e=d.url,"image"===(t=d.requestOptions).responseType&&((0,o.A)("host-webworker")||(0,o.A)("host-node")))throw T("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),d);if("head"===t.method){if(t.body)throw T("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),d);if(a||h)throw T("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),d)}if(await async function(){(0,o.A)("host-webworker")&&!f&&(f=await i.e(4004).then(i.bind(i,34004)))}(),f)return f.execute(e,t);const v=new AbortController;(0,l.u7)(t,(()=>v.abort()));const _={controller:v,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:g,params:d,redoRequest:!1,useIdentity:y.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},w=await async function(e){let t,i;await async function(e){const t=e.params.url,i=e.params.requestOptions,s=e.controller.signal,o=i.body;let a=null,c=null;if(m&&"HTMLFormElement"in globalThis&&(o instanceof FormData?a=o:o instanceof HTMLFormElement&&(a=new FormData(o))),"string"==typeof o&&(c=o),e.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:"head"===i.method?"HEAD":"GET",mode:"cors",priority:y.priority,redirect:"follow",signal:s},(a||c)&&(e.fetchOptions.body=a||c),"anonymous"===i.authMode&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||i.query?.token||a?.get("token")),!e.hasToken&&r.A.apiKey&&(0,u.Q)(t)&&(i.query||(i.query={}),i.query.token=r.A.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!A(t)&&!(0,l.G4)(s)){let r;"immediate"===i.authMode?(await S(),r=await n.id.getCredential(t,{signal:s}),e.credential=r):"no-prompt"===i.authMode?(await S(),r=await n.id.getCredential(t,{prompt:!1,signal:s}).catch((()=>{})),e.credential=r):n.id&&(r=n.id.findCredential(t)),r&&(e.credentialToken=r.token,e.useSSL=!!r.ssl)}}(e);try{do{[t,i]=await E(e)}while(!await I(e,t,i))}catch(i){const r=T("request:server",i,e.params,t);throw r.details.ssl=e.useSSL,e.interceptor?.error&&e.interceptor.error(r),r}const s=e.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(s)){if(!e.hasToken&&!e.credentialToken&&i.user?.username&&!(0,c.FL)(s)){const e=(0,c.$z)(s,!0);e&&y.trustedServers.push(e)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&(0,p.tz)(i.authorizedCrossOriginNoCorsDomains)}const o=e.credential;if(o&&n.id){const e=n.id.findServerInfo(o.server);let t=e?.owningSystemUrl;if(t){t=t.replace(/\/?$/,"/sharing");const e=n.id.findCredential(t,o.userId);e&&-1===n.id._getIdenticalSvcIdx(t,e)&&e.resources.unshift(t)}}return{data:i,getAllHeaders:t?()=>Array.from(t.headers):b,getHeader:t?e=>t.headers.get(e):b,httpStatus:t?.status??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}(_);return g?.after?.(w),w}let f;const y=r.A.request,m="FormData"in globalThis,g=new Set([499,498,403,401]),v=new Set(["COM_0056","COM_0057","SB_0008"]),_=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],b=()=>null,w=Symbol();function M(e){const t=(0,c.$z)(e);return!t||t.endsWith(".arcgis.com")||d._corsServers.includes(t)||(0,c.FL)(t)}function T(e,t,i,r){let n="Error";const o={url:i.url,requestOptions:i.requestOptions,getAllHeaders:b,getHeader:b,ssl:!1};if(t instanceof s.A)return t.details?(t.details=(0,a.o8)(t.details),t.details.url=i.url,t.details.requestOptions=i.requestOptions):t.details=o,t;if(t){const e=r&&(()=>Array.from(r.headers)),i=r&&(e=>r.headers.get(e)),s=r?.status,a=t.message;a&&(n=a),e&&i&&(o.getAllHeaders=e,o.getHeader=i),o.httpStatus=(null!=t.httpCode?t.httpCode:t.code)||s||0,o.subCode=t.subcode,o.messageCode=t.messageCode,"string"==typeof t.details?o.messages=[t.details]:o.messages=t.details,o.raw=w in t?t[w]:t}return(0,l.zf)(t)?(0,l.NK)():new s.A(e,n,o)}async function S(){n.id||await Promise.resolve().then(i.bind(i,83510))}function A(e){return _.some((t=>t.test(e)))}async function E(e){let t=e.params.url;const i=e.params.requestOptions,r=e.fetchOptions??{},s=(0,c.w8)(t)||(0,c.DB)(t),a=i.responseType||"json",u=s?0:null!=i.timeout?i.timeout:y.timeout;let f=!1;if(!s){e.useSSL&&(t=(0,c.lM)(t));let s={...i.query};e.credentialToken&&(s.token=e.credentialToken);let a=(0,c.x0)(s);(0,o.A)("esri-url-encodes-apostrophe")&&(a=a.replaceAll("'","%27"));const l=t.length+1+a.length;let u;f="delete"===i.method||"post"===i.method||"put"===i.method||!!i.body||l>y.maxUrlLength;const d=i.useProxy||!!(0,c.zs)(t);if(d){const e=(0,c.s_)(t);u=e.path,!f&&u.length+1+l>y.maxUrlLength&&(f=!0),e.query&&(s={...e.query,...s})}if("HEAD"===r.method&&(f||d)){if(f){if(l>y.maxUrlLength)throw T("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params);throw T("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params)}if(d)throw T("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(f?(r.method="delete"===i.method?"DELETE":"put"===i.method?"PUT":"POST",i.body?t=(0,c.a6)(t,s):(r.body=(0,c.x0)(s),r.headers||(r.headers={}),r.headers["Content-Type"]="application/x-www-form-urlencoded")):t=(0,c.a6)(t,s),d&&(e.useProxy=!0,t=`${u}?${t}`),s.token&&m&&r.body instanceof FormData&&!(0,h.$)(t)&&r.body.set("token",s.token),i.hasOwnProperty("withCredentials"))e.withCredentials=i.withCredentials;else if(!(0,c.FX)(t,(0,c.Xq)()))if((0,c.FL)(t))e.withCredentials=!0;else if(n.id){const i=n.id.findServerInfo(t);i?.webTierAuth&&(e.withCredentials=!0)}e.withCredentials&&(r.credentials="include",(0,p.xW)(t)&&await(0,p.m3)(f?(0,c.a6)(t,s):t))}let g,v,_=0,b=!1;u>0&&(_=setTimeout((()=>{b=!0,e.controller.abort()}),u));try{if("native-request-init"===i.responseType)v=r,v.url=t;else if("image"!==i.responseType||"default"!==r.cache||"GET"!==r.method||f||function(e){if(e)for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0;return!1}(i.headers)||!s&&!e.useProxy&&y.proxyUrl&&!M(t)){if(d._beforeFetch&&await d._beforeFetch(t,r),g=await fetch(t,r),d._afterFetch&&await d._afterFetch(g),e.useProxy||function(e){const t=(0,c.$z)(e);t&&!d._corsServers.includes(t)&&d._corsServers.push(t)}(t),"native"===i.responseType)v=g;else if("HEAD"!==r.method)if(g.ok){switch(a){case"array-buffer":v=await g.arrayBuffer();break;case"blob":case"image":v=await g.blob();break;default:v=await g.text()}if(_&&(clearTimeout(_),_=0),"json"===a||"xml"===a||"document"===a)if(v)switch(a){case"json":v=JSON.parse(v);break;case"xml":v=x(v,"application/xml");break;case"document":v=x(v,"text/html")}else v=null;if(v){if("array-buffer"===a||"blob"===a){const e=g.headers.get("Content-Type");if(e&&/application\/json|text\/plain/i.test(e)&&v["blob"===a?"size":"byteLength"]<=750)try{const e=await new Response(v).json();e.error&&(v=e)}catch{}}"image"===a&&v instanceof Blob&&(v=await C(URL.createObjectURL(v),e,!0))}}else{v=await g.text();try{v=JSON.parse(v)}catch{}}}else v=await C(t,e)}catch(r){if("AbortError"===r.name){if(b)throw(0,p.ql)();throw(0,l.NK)("Request canceled")}if(!(!g&&r instanceof TypeError&&y.proxyUrl)||i.body||"delete"===i.method||"head"===i.method||"post"===i.method||"put"===i.method||e.useProxy||M(t))throw r;e.redoRequest=!0,(0,c.oy)({proxyUrl:y.proxyUrl,urlPrefix:(0,c.$z)(t)??""})}finally{_&&clearTimeout(_)}return[g,v]}function x(e,t){let i;try{i=(new DOMParser).parseFromString(e,t)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function I(e,t,i){if(e.redoRequest)return e.redoRequest=!1,!1;const r=e.params.requestOptions;if(!t||"native"===r.responseType||"native-request-init"===r.responseType)return!0;let s,o;if(i&&(i.error?s=i.error:"error"===i.status&&Array.isArray(i.messages)&&(s={...i},s[w]=i,s.details=i.messages)),!s&&!t.ok)throw s=new Error(`Unable to load ${t.url} status: ${t.status}`),s[w]=i,s;let a,l=null;s&&(o=Number(s.code),l=s.hasOwnProperty("subcode")?Number(s.subcode):null,a=s.messageCode,a=a?.toUpperCase());const c=r.authMode;if(403===o&&(4===l||s.message?.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&("no-prompt"!==c||498===o)&&void 0!==o&&g.has(o)&&!A(e.params.url)&&(403!==o||(!a||!v.has(a))&&(null==l||2===l&&e.credentialToken))){await S();try{const t=await n.id.getCredential(e.params.url,{error:T("request:server",s,e.params),prompt:"no-prompt"!==c,signal:e.controller.signal,token:e.credentialToken});return e.credential=t,e.credentialToken=t.token,e.useSSL=e.useSSL||t.ssl,!1}catch(t){if("no-prompt"===c)return e.credential=void 0,e.credentialToken=void 0,!1;s=t}}if(s)throw s;return!0}function C(e,t,i=!1){const r=t.controller.signal,n=new Image;return t.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=y.priority,n.src=e,(0,p.Sx)(n,e,i,r)}d._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],d._beforeFetch=void 0,d._afterFetch=void 0},35497:(e,t,i)=>{"use strict";i.d(t,{C:()=>h});var r=i(38116),n=i(8636),s=i(56053),o=i(36321),a=i(96905),l=i(15697);const c=(0,n.dp)(l.A);async function h(e,t,i){t=c(t);const n=(0,o.Dl)(e),l={...n.query,f:"json",...t.toJSON()},h=t.outSpatialReference,u=(0,s.$B)(t.geometries[0]),p=(0,o.jV)(l,i);return(0,r.A)(n.path+"/project",p).then((({data:{geometries:e}})=>(0,a.V)(e,u,h)))}},96905:(e,t,i)=>{"use strict";i.d(t,{V:()=>s,X:()=>n});var r=i(56053);function n(e){return{geometryType:(0,r.$B)(e[0]),geometries:e.map((e=>e.toJSON()))}}function s(e,t,i){const n=(0,r.xD)(t);return e.map((e=>{const t=n.fromJSON(e);return t.spatialReference=i,t}))}},698:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var r=i(82392),n=i(84977),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325));let a=class extends n.oY{constructor(e){super(e),this.assetGroupCode=null,this.assetTypeCode=null,this.globalId=null,this.networkSourceId=null,this.objectId=null,this.positionFrom=null,this.positionTo=null,this.terminalId=null}};(0,r._)([(0,s.MZ)({type:Number,json:{write:!0}})],a.prototype,"assetGroupCode",void 0),(0,r._)([(0,s.MZ)({type:Number,json:{write:!0}})],a.prototype,"assetTypeCode",void 0),(0,r._)([(0,s.MZ)({type:String,json:{write:!0}})],a.prototype,"globalId",void 0),(0,r._)([(0,s.MZ)({type:Number,json:{write:!0}})],a.prototype,"networkSourceId",void 0),(0,r._)([(0,s.MZ)({type:Number,json:{write:!0}})],a.prototype,"objectId",void 0),(0,r._)([(0,s.MZ)({type:Number,json:{write:!0}})],a.prototype,"positionFrom",void 0),(0,r._)([(0,s.MZ)({type:Number,json:{write:!0}})],a.prototype,"positionTo",void 0),(0,r._)([(0,s.MZ)({type:Number,json:{write:!0}})],a.prototype,"terminalId",void 0),a=(0,r._)([(0,o.$)("esri.rest.networks.support.NetworkElement")],a);const l=a},42879:(e,t,i)=>{"use strict";i.d(t,{A:()=>m});var r=i(82392),n=i(84977),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),a=i(67709),l=i(65648),c=i(38648);let h=class extends n.oY{constructor(e){super(e),this.line=null,this.multipoint=null,this.polygon=null}};(0,r._)([(0,s.MZ)({type:c.A,json:{write:!0},readOnly:!0})],h.prototype,"line",void 0),(0,r._)([(0,s.MZ)({type:a.A,json:{read:{source:"point"},write:{target:"point"}},readOnly:!0})],h.prototype,"multipoint",void 0),(0,r._)([(0,s.MZ)({type:l.A,json:{write:!0},readOnly:!0})],h.prototype,"polygon",void 0),h=(0,r._)([(0,o.$)("esri.rest.networks.support.AggregatedGeometry")],h);const u=h;let p=class extends n.oY{constructor(e){super(e),this.functionType=null,this.networkAttributeName=null,this.result=null}};(0,r._)([(0,s.MZ)({type:["add","subtract","average","count","min","max"],json:{write:!0},readOnly:!0})],p.prototype,"functionType",void 0),(0,r._)([(0,s.MZ)({type:String,json:{write:!0},readOnly:!0})],p.prototype,"networkAttributeName",void 0),(0,r._)([(0,s.MZ)({type:Number,json:{write:!0},readOnly:!0})],p.prototype,"result",void 0),p=(0,r._)([(0,o.$)("esri.rest.networks.support.FunctionResult")],p);const d=p;var f=i(698);let y=class extends n.oY{constructor(e){super(e),this.aggregatedGeometry=null,this.elements=null,this.globalFunctionResults=null,this.kFeaturesForKNNFound=!1,this.startingPointsIgnored=!1,this.warnings=null}};(0,r._)([(0,s.MZ)({type:u,json:{write:!0},readOnly:!0})],y.prototype,"aggregatedGeometry",void 0),(0,r._)([(0,s.MZ)({type:[f.A],json:{write:!0},readOnly:!0})],y.prototype,"elements",void 0),(0,r._)([(0,s.MZ)({type:[d],json:{write:!0},readOnly:!0})],y.prototype,"globalFunctionResults",void 0),(0,r._)([(0,s.MZ)({type:Boolean,json:{write:!0},readOnly:!0})],y.prototype,"kFeaturesForKNNFound",void 0),(0,r._)([(0,s.MZ)({type:Boolean,json:{write:!0},readOnly:!0})],y.prototype,"startingPointsIgnored",void 0),(0,r._)([(0,s.MZ)({type:[String],json:{write:!0},readOnly:!0})],y.prototype,"warnings",void 0),y=(0,r._)([(0,o.$)("esri.rest.networks.support.TraceResult")],y);const m=y},57458:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var r=i(82392),n=i(84977),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325));let a=class extends n.oY{constructor(e){super(e),this.moment=null,this.fullUpdate=!1,this.validateErrorsCreated=!1,this.dirtyAreaCount=null,this.exceededTransferLimit=null,this.serviceEdits=null,this.discoveredSubnetworks=null}};(0,r._)([(0,s.MZ)({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.moment=e?e.getTime():null}}}})],a.prototype,"moment",void 0),(0,r._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"fullUpdate",void 0),(0,r._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"validateErrorsCreated",void 0),(0,r._)([(0,s.MZ)({type:Number,json:{write:!0}})],a.prototype,"dirtyAreaCount",void 0),(0,r._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"exceededTransferLimit",void 0),(0,r._)([(0,s.MZ)({type:[Object],json:{write:!0}})],a.prototype,"serviceEdits",void 0),(0,r._)([(0,s.MZ)({type:[Object],json:{write:!0}})],a.prototype,"discoveredSubnetworks",void 0),a=(0,r._)([(0,o.$)("esri.rest.networks.support.ValidateNetworkTopologyResult")],a);const l=a},29323:(e,t,i)=>{"use strict";i.d(t,{u:()=>o});var r=i(5262),n=i(67488);function s(e,t,i){if(null==e.hasM||e.hasZ)for(const e of t)for(const t of e)t.length>2&&(t[2]*=i)}function o(e,t,i){if(!e&&!t||!i)return;const n=(0,r.G9)(i);a(e,i,n),a(t,i,n)}function a(e,t,i){if(e)for(const r of e)l(r.geometry,t,i)}function l(e,t,i){if(!e?.spatialReference||(0,n.aI)(e.spatialReference,t))return;const o=(0,r.G9)(e.spatialReference)/i;if(1!==o)if("x"in e)null!=e.z&&(e.z*=o);else if("rings"in e)s(e,e.rings,o);else if("paths"in e)s(e,e.paths,o);else if("points"in e&&(null==e.hasM||e.hasZ))for(const t of e.points)t.length>2&&(t[2]*=o)}},11378:(e,t,i)=>{"use strict";i.d(t,{q:()=>n});var r=i(55792);function n(e,t,i){if(!i?.features||!i.hasZ)return;const n=(0,r.N)(i.geometryType,t,e.outSpatialReference);if(null!=n)for(const e of i.features)n(e.geometry)}},25758:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var r,n=i(82392),s=i(93814),o=i(15565),a=i(81482),l=i(8636),c=i(85716),h=i(26325),u=i(77023);let p=r=class extends u.A{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new r({fromColor:(0,o.o8)(this.fromColor),toColor:(0,o.o8)(this.toColor),algorithm:this.algorithm})}};(0,n._)([(0,c.e)({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],p.prototype,"algorithm",void 0),(0,n._)([(0,a.MZ)({type:s.A,json:{type:[l.jz],write:!0}})],p.prototype,"fromColor",void 0),(0,n._)([(0,a.MZ)({type:s.A,json:{type:[l.jz],write:!0}})],p.prototype,"toColor",void 0),(0,n._)([(0,a.MZ)({type:["algorithmic"]})],p.prototype,"type",void 0),p=r=(0,n._)([(0,h.$)("esri.rest.support.AlgorithmicColorRamp")],p);const d=p},95827:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var r,n=i(82392),s=i(84977),o=i(15565),a=i(81482),l=i(8636),c=i(26325),h=i(48524);let u=r=class extends s.oY{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new r((0,o.o8)({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};(0,n._)([(0,a.MZ)({type:[String],json:{write:!0}})],u.prototype,"attachmentTypes",void 0),(0,n._)([(0,a.MZ)({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],u.prototype,"attachmentsWhere",void 0),(0,n._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],u.prototype,"cacheHint",void 0),(0,n._)([(0,a.MZ)({type:[String],json:{write:!0}})],u.prototype,"keywords",void 0),(0,n._)([(0,a.MZ)({type:[Number],json:{write:!0}})],u.prototype,"globalIds",void 0),(0,n._)([(0,a.MZ)({json:{write:!0}})],u.prototype,"name",void 0),(0,n._)([(0,a.MZ)({type:Number,json:{read:{source:"resultRecordCount"}}})],u.prototype,"num",void 0),(0,n._)([(0,a.MZ)({type:[Number],json:{write:!0}})],u.prototype,"objectIds",void 0),(0,n._)([(0,a.MZ)({type:Boolean,json:{default:!1,write:!0}})],u.prototype,"returnMetadata",void 0),(0,n._)([(0,a.MZ)({type:[Number],json:{write:!0}})],u.prototype,"size",void 0),(0,n._)([(0,a.MZ)({type:Number,json:{read:{source:"resultOffset"}}})],u.prototype,"start",void 0),(0,n._)([(0,h.K)("start"),(0,h.K)("num")],u.prototype,"writeStart",null),(0,n._)([(0,a.MZ)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],u.prototype,"where",void 0),u=r=(0,n._)([(0,c.$)("esri.rest.support.AttachmentQuery")],u),u.from=(0,l.dp)(u);const p=u},77023:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var r=i(82392),n=i(84977),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325));let a=class extends n.oY{constructor(e){super(e),this.type=null}};(0,r._)([(0,s.MZ)({readOnly:!0,json:{read:!1,write:!0}})],a.prototype,"type",void 0),a=(0,r._)([(0,o.$)("esri.rest.support.ColorRamp")],a);const l=a},74704:(e,t,i)=>{"use strict";i.d(t,{A:()=>_});var r,n=i(82392),s=i(3313),o=i(20857),a=i(1817),l=i(84977),c=i(15565),h=i(81482),u=(i(6273),i(80861),i(25376)),p=i(26325),d=i(48524),f=i(44153),y=i(56053),m=i(45352);const g=new a.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let v=r=class extends l.oY{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const i=f.A.fromJSON(t.spatialReference),r=[];for(let t=0;t<e.length;t++){const n=e[t],s=o.A.fromJSON(n),a=n.geometry?.spatialReference;null==s.geometry||a||(s.geometry.spatialReference=i);const l=n.aggregateGeometries,c=s.aggregateGeometries;if(l&&null!=c)for(const e in c){const t=c[e],r=l[e],n=r?.spatialReference;null==t||n||(t.spatialReference=i)}r.push(s)}return r}writeGeometryType(e,t,i,r){if(e)return void g.write(e,t,i,r);const{features:n}=this;if(n)for(const e of n)if(null!=e?.geometry)return void g.write(e.geometry.type,t,i,r)}readQueryGeometry(e,t){if(!e)return null;const i=!!e.spatialReference,r=(0,y.rS)(e);return r&&!i&&t.spatialReference&&(r.spatialReference=f.A.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:i}=this;if(i)for(const e of i)if(e&&null!=e.geometry&&e.geometry.spatialReference)return void(t.spatialReference=e.geometry.spatialReference.toJSON())}clone(){return new r(this.cloneProperties())}cloneProperties(){return(0,c.o8)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let i=0;i<t.features.length;i++){const r=t.features[i];if(r.geometry){const t=e?.[i];r.geometry=t?.toJSON()||r.geometry}}return t}quantize(e){const{scale:[t,i],translate:[r,n]}=e,s=this.features,o=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-r)/t)),(e=>Math.round((n-e)/i)));for(let e=0,t=s.length;e<t;e++)o?.(s[e].geometry)||(s.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:i}=this;if(!i)return this;const{translate:[r,n],scale:[s,o]}=i;let a=null,l=null;if(this.hasZ&&null!=i?.scale?.[2]){const{translate:[,,e],scale:[,,t]}=i;a=i=>i*t+e}if(this.hasM&&null!=i?.scale?.[3]){const{translate:[,,,e],scale:[,,,t]}=i;l=i=>null==i?i:i*t+e}const c=this._getHydrationFunction(e,(e=>e*s+r),(e=>n-e*o),a,l);for(const{geometry:e}of t)null!=e&&c&&c(e);return this.transform=null,this}_quantizePoints(e,t,i){let r,n;const s=[];for(let o=0,a=e.length;o<a;o++){const a=e[o];if(o>0){const e=t(a[0]),o=i(a[1]);e===r&&o===n||(s.push([e-r,o-n]),r=e,n=o)}else r=t(a[0]),n=i(a[1]),s.push([r,n])}return s.length>0?s:null}_getQuantizationFunction(e,t,i){return"point"===e?e=>(e.x=t(e.x),e.y=i(e.y),e):"polyline"===e||"polygon"===e?e=>{const r=(0,y.Bi)(e)?e.rings:e.paths,n=[];for(let e=0,s=r.length;e<s;e++){const s=r[e],o=this._quantizePoints(s,t,i);o&&n.push(o)}return n.length>0?((0,y.Bi)(e)?e.rings=n:e.paths=n,e):null}:"multipoint"===e?e=>{const r=this._quantizePoints(e.points,t,i);return r&&r.length>0?(e.points=r,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,i,r,n){return"point"===e?e=>{e.x=t(e.x),e.y=i(e.y),r&&(e.z=r(e.z))}:"polyline"===e||"polygon"===e?e=>{const s=(0,y.Bi)(e)?e.rings:e.paths;let o,a;for(let e=0,r=s.length;e<r;e++){const r=s[e];for(let e=0,n=r.length;e<n;e++){const n=r[e];e>0?(o+=n[0],a+=n[1]):(o=n[0],a=n[1]),n[0]=t(o),n[1]=i(a)}}if(r&&n)for(let e=0,t=s.length;e<t;e++){const t=s[e];for(let e=0,i=t.length;e<i;e++){const i=t[e];i[2]=r(i[2]),i[3]=n(i[3])}}else if(r)for(let e=0,t=s.length;e<t;e++){const t=s[e];for(let e=0,i=t.length;e<i;e++){const i=t[e];i[2]=r(i[2])}}else if(n)for(let e=0,t=s.length;e<t;e++){const t=s[e];for(let e=0,i=t.length;e<i;e++){const i=t[e];i[2]=n(i[2])}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=i(e.ymin),e.xmax=t(e.xmax),e.ymax=i(e.ymax),r&&null!=e.zmax&&null!=e.zmin&&(e.zmax=r(e.zmax),e.zmin=r(e.zmin)),n&&null!=e.mmax&&null!=e.mmin&&(e.mmax=n(e.mmax),e.mmin=n(e.mmin))}:"multipoint"===e?e=>{const s=e.points;let o,a;for(let e=0,r=s.length;e<r;e++){const r=s[e];e>0?(o+=r[0],a+=r[1]):(o=r[0],a=r[1]),r[0]=t(o),r[1]=i(a)}if(r&&n)for(let e=0,t=s.length;e<t;e++){const t=s[e];t[2]=r(t[2]),t[3]=n(t[3])}else if(r)for(let e=0,t=s.length;e<t;e++){const t=s[e];t[2]=r(t[2])}else if(n)for(let e=0,t=s.length;e<t;e++){const t=s[e];t[2]=n(t[2])}}:null}};(0,n._)([(0,h.MZ)({type:String,json:{write:!0}})],v.prototype,"displayFieldName",void 0),(0,n._)([(0,h.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],v.prototype,"exceededTransferLimit",void 0),(0,n._)([(0,h.MZ)({type:[o.A],json:{write:!0}})],v.prototype,"features",void 0),(0,n._)([(0,u.w)("features")],v.prototype,"readFeatures",null),(0,n._)([(0,h.MZ)({type:[m.A],json:{write:!0}})],v.prototype,"fields",void 0),(0,n._)([(0,h.MZ)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:g.read}}})],v.prototype,"geometryType",void 0),(0,n._)([(0,d.K)("geometryType")],v.prototype,"writeGeometryType",null),(0,n._)([(0,h.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],v.prototype,"hasM",void 0),(0,n._)([(0,h.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],v.prototype,"hasZ",void 0),(0,n._)([(0,h.MZ)({types:s.yR,json:{write:!0}})],v.prototype,"queryGeometry",void 0),(0,n._)([(0,u.w)("queryGeometry")],v.prototype,"readQueryGeometry",null),(0,n._)([(0,h.MZ)({type:f.A,json:{write:!0}})],v.prototype,"spatialReference",void 0),(0,n._)([(0,d.K)("spatialReference")],v.prototype,"writeSpatialReference",null),(0,n._)([(0,h.MZ)({json:{write:!0}})],v.prototype,"transform",void 0),v=r=(0,n._)([(0,p.$)("esri.rest.support.FeatureSet")],v),v.prototype.toJSON.isDefaultToJSON=!0;const _=v},62073:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var r,n=i(82392),s=i(15565),o=i(81482),a=(i(6273),i(80861),i(26325)),l=i(25758),c=i(77023);let h=r=class extends c.A{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new r({colorRamps:(0,s.o8)(this.colorRamps)})}};(0,n._)([(0,o.MZ)({type:[l.A],json:{write:!0}})],h.prototype,"colorRamps",void 0),(0,n._)([(0,o.MZ)({type:["multipart"]})],h.prototype,"type",void 0),h=r=(0,n._)([(0,a.$)("esri.rest.support.MultipartColorRamp")],h);const u=h},15697:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});var r=i(82392),n=i(84977),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),a=i(56053),l=i(67488);let c=class extends n.oY{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map((e=>e.toJSON())),t=this.geometries[0],i={};return i.outSR=(0,l.YX)(this.outSpatialReference),i.inSR=(0,l.YX)(t.spatialReference),i.geometries=JSON.stringify({geometryType:(0,a.$B)(t),geometries:e}),this.transformation&&(i.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(i.transformForward=this.transformForward),i}};(0,r._)([(0,s.MZ)()],c.prototype,"geometries",void 0),(0,r._)([(0,s.MZ)({json:{read:{source:"outSR"}}})],c.prototype,"outSpatialReference",void 0),(0,r._)([(0,s.MZ)()],c.prototype,"transformation",void 0),(0,r._)([(0,s.MZ)()],c.prototype,"transformForward",void 0),c=(0,r._)([(0,o.$)("esri.rest.support.ProjectParameters")],c);const h=c},36767:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var r,n=i(82392),s=(i(3313),i(1817)),o=i(84977),a=i(15565),l=i(81482),c=(i(6273),i(80861),i(26325)),h=i(8e3);const u=new s.J({upperLeft:"upper-left",lowerLeft:"lower-left"});let p=r=class extends o.oY{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new r((0,a.o8)({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};(0,n._)([(0,l.MZ)({type:h.A,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],p.prototype,"extent",void 0),(0,n._)([(0,l.MZ)({type:["view","edit"],json:{write:!0}})],p.prototype,"mode",void 0),(0,n._)([(0,l.MZ)({type:String,json:{read:u.read,write:u.write}})],p.prototype,"originPosition",void 0),(0,n._)([(0,l.MZ)({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],p.prototype,"tolerance",void 0),p=r=(0,n._)([(0,c.$)("esri.rest.support.QuantizationParameters")],p);const d=p},10591:(e,t,i)=>{"use strict";i.d(t,{A:()=>I});var r=i(82392),n=i(3313),s=i(54736),o=i(1817),a=i(84977),l=i(15565),c=i(81482),h=i(77380),u=i(85716),p=i(26325),d=i(48524),f=i(8636),y=i(56053),m=i(17308),g=i(14755);i(6273),i(80861),i(67498);let v=class extends((0,g.O)(a.oY)){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};(0,r._)([(0,c.MZ)({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.onFields&&this.onFields.length>0}}}}})],v.prototype,"onFields",void 0),(0,r._)([(0,c.MZ)({type:String,json:{write:!0}})],v.prototype,"operator",void 0),(0,r._)([(0,c.MZ)({type:String,json:{write:!0}})],v.prototype,"searchTerm",void 0),(0,r._)([(0,c.MZ)({type:String,json:{write:!0}})],v.prototype,"searchType",void 0),v=(0,r._)([(0,p.$)("esri.rest.support.FullTextSearch")],v);const _=v;var b,w=i(36767),M=i(24193),T=i(23271),S=i(44153),A=i(8977);const E=new o.J({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let x=b=class extends a.oY{static from(e){return(0,f.PZ)(b,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return"number"==typeof e||"object"==typeof e?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const i={};for(const t in e){const r=e[t];Array.isArray(r)?i[t]=r.map((e=>e instanceof Date?e.getTime():e)):r instanceof Date?i[t]=r.getTime():i[t]=r}t.parameterValues=i}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new b((0,l.o8)({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:null!=this.historicMoment?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};x.MAX_MAX_RECORD_COUNT_FACTOR=5,(0,r._)([(0,c.MZ)({json:{write:!0}})],x.prototype,"aggregateIds",void 0),(0,r._)([(0,c.MZ)({type:Boolean,json:{write:!0}})],x.prototype,"cacheHint",void 0),(0,r._)([(0,c.MZ)({type:Boolean,json:{default:!1,write:!0}})],x.prototype,"compactGeometryEnabled",void 0),(0,r._)([(0,c.MZ)({json:{write:!0}})],x.prototype,"datumTransformation",void 0),(0,r._)([(0,h.w)("datumTransformation")],x.prototype,"castDatumTransformation",null),(0,r._)([(0,c.MZ)({type:Boolean,json:{default:!1,write:!0}})],x.prototype,"defaultSpatialReferenceEnabled",void 0),(0,r._)([(0,c.MZ)({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],x.prototype,"distance",void 0),(0,r._)([(0,c.MZ)({type:m.L,json:{write:!0}})],x.prototype,"dynamicDataSource",void 0),(0,r._)([(0,c.MZ)({type:String,json:{write:!0}})],x.prototype,"formatOf3DObjects",void 0),(0,r._)([(0,c.MZ)({type:[_],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.fullText&&this.fullText.length>0}}}}})],x.prototype,"fullText",void 0),(0,r._)([(0,c.MZ)({type:String,json:{write:!0}})],x.prototype,"gdbVersion",void 0),(0,r._)([(0,c.MZ)({types:n.yR,json:{read:y.rS,write:!0}})],x.prototype,"geometry",void 0),(0,r._)([(0,c.MZ)({type:Number,json:{write:!0}})],x.prototype,"geometryPrecision",void 0),(0,r._)([(0,c.MZ)({type:[String],json:{write:!0}})],x.prototype,"groupByFieldsForStatistics",void 0),(0,r._)([(0,c.MZ)({type:String,json:{write:!0}})],x.prototype,"having",void 0),(0,r._)([(0,c.MZ)({type:Date})],x.prototype,"historicMoment",void 0),(0,r._)([(0,d.K)("historicMoment")],x.prototype,"writeHistoricMoment",null),(0,r._)([(0,c.MZ)({type:Number,json:{write:!0}})],x.prototype,"maxAllowableOffset",void 0),(0,r._)([(0,c.MZ)({type:Number,cast:e=>e<1?1:e>x.MAX_MAX_RECORD_COUNT_FACTOR?x.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],x.prototype,"maxRecordCountFactor",void 0),(0,r._)([(0,c.MZ)({type:["xyFootprint"],json:{write:!0}})],x.prototype,"multipatchOption",void 0),(0,r._)([(0,c.MZ)({type:Number,json:{read:{source:"resultRecordCount"}}})],x.prototype,"num",void 0),(0,r._)([(0,c.MZ)({json:{write:!0}})],x.prototype,"objectIds",void 0),(0,r._)([(0,c.MZ)({type:[String],json:{write:!0}})],x.prototype,"orderByFields",void 0),(0,r._)([(0,c.MZ)({type:[String],json:{write:!0}})],x.prototype,"outFields",void 0),(0,r._)([(0,c.MZ)({type:S.A,json:{name:"outSR",write:!0}})],x.prototype,"outSpatialReference",void 0),(0,r._)([(0,c.MZ)({type:[T.A],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.outStatistics&&this.outStatistics.length>0}}}}})],x.prototype,"outStatistics",void 0),(0,r._)([(0,c.MZ)({json:{write:!0}})],x.prototype,"parameterValues",void 0),(0,r._)([(0,d.K)("parameterValues")],x.prototype,"writeParameterValues",null),(0,r._)([(0,c.MZ)({type:A.A,json:{write:!0}})],x.prototype,"pixelSize",void 0),(0,r._)([(0,c.MZ)({type:w.A,json:{write:!0}})],x.prototype,"quantizationParameters",void 0),(0,r._)([(0,c.MZ)({type:[Object],json:{write:!0}})],x.prototype,"rangeValues",void 0),(0,r._)([(0,c.MZ)({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],x.prototype,"relationParameter",void 0),(0,r._)([(0,c.MZ)({type:String,json:{write:!0}})],x.prototype,"resultType",void 0),(0,r._)([(0,c.MZ)({type:Boolean,json:{default:!1,write:!0}})],x.prototype,"returnCentroid",void 0),(0,r._)([(0,c.MZ)({type:Boolean,json:{default:!1,write:!0}})],x.prototype,"returnDistinctValues",void 0),(0,r._)([(0,c.MZ)({type:Boolean,json:{default:!0,write:!0}})],x.prototype,"returnExceededLimitFeatures",void 0),(0,r._)([(0,c.MZ)({type:Boolean,json:{write:!0}})],x.prototype,"returnGeometry",void 0),(0,r._)([(0,c.MZ)({type:Boolean,json:{default:!1,write:!0}})],x.prototype,"returnQueryGeometry",void 0),(0,r._)([(0,c.MZ)({type:Boolean,json:{default:!1,write:!0}})],x.prototype,"returnM",void 0),(0,r._)([(0,c.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],x.prototype,"returnZ",void 0),(0,r._)([(0,c.MZ)({type:S.A,json:{write:!0}})],x.prototype,"sourceSpatialReference",void 0),(0,r._)([(0,u.e)(M.x,{ignoreUnknown:!1,name:"spatialRel"})],x.prototype,"spatialRelationship",void 0),(0,r._)([(0,c.MZ)({type:Number,json:{read:{source:"resultOffset"}}})],x.prototype,"start",void 0),(0,r._)([(0,d.K)("start"),(0,d.K)("num")],x.prototype,"writeStart",null),(0,r._)([(0,c.MZ)({type:String,json:{write:!0}})],x.prototype,"sqlFormat",void 0),(0,r._)([(0,c.MZ)({type:String,json:{write:!0}})],x.prototype,"text",void 0),(0,r._)([(0,c.MZ)({type:s.A,json:{write:!0}})],x.prototype,"timeExtent",void 0),(0,r._)([(0,c.MZ)({type:Boolean,json:{default:!1,write:!0}})],x.prototype,"timeReferenceUnknownClient",void 0),(0,r._)([(0,u.e)(E,{ignoreUnknown:!1}),(0,c.MZ)({json:{write:{overridePolicy(e){return{enabled:!!e&&null!=this.distance&&this.distance>0}}}}})],x.prototype,"units",void 0),(0,r._)([(0,c.MZ)({type:String,json:{write:{overridePolicy(e){return{enabled:null!=e||null!=this.start&&this.start>0}}}}})],x.prototype,"where",void 0),(0,r._)([(0,d.K)("where")],x.prototype,"writeWhere",null),x=b=(0,r._)([(0,p.$)("esri.rest.support.Query")],x);const I=x},63498:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>f});var r,n=i(82392),s=(i(3313),i(84977)),o=i(15565),a=i(81482),l=i(8636),c=i(26325),h=i(48524),u=i(17308),p=i(44153);let d=r=class extends s.oY{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&null==this.where&&(t.definitionExpression="1=1")}clone(){return new r((0,o.o8)({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};(0,n._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],d.prototype,"cacheHint",void 0),(0,n._)([(0,a.MZ)({type:u.L,json:{write:!0}})],d.prototype,"dynamicDataSource",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],d.prototype,"gdbVersion",void 0),(0,n._)([(0,a.MZ)({type:Number,json:{write:!0}})],d.prototype,"geometryPrecision",void 0),(0,n._)([(0,a.MZ)({type:Date})],d.prototype,"historicMoment",void 0),(0,n._)([(0,h.K)("historicMoment")],d.prototype,"_writeHistoricMoment",null),(0,n._)([(0,a.MZ)({type:Number,json:{write:!0}})],d.prototype,"maxAllowableOffset",void 0),(0,n._)([(0,a.MZ)({type:[Number],json:{write:!0}})],d.prototype,"objectIds",void 0),(0,n._)([(0,a.MZ)({type:[String],json:{write:!0}})],d.prototype,"orderByFields",void 0),(0,n._)([(0,a.MZ)({type:[String],json:{write:!0}})],d.prototype,"outFields",void 0),(0,n._)([(0,a.MZ)({type:p.A,json:{read:{source:"outSR"},write:{target:"outSR"}}})],d.prototype,"outSpatialReference",void 0),(0,n._)([(0,a.MZ)({json:{write:!0}})],d.prototype,"relationshipId",void 0),(0,n._)([(0,a.MZ)({type:Number,json:{read:{source:"resultOffset"}}})],d.prototype,"start",void 0),(0,n._)([(0,h.K)("start"),(0,h.K)("num")],d.prototype,"writeStart",null),(0,n._)([(0,a.MZ)({type:Number,json:{read:{source:"resultRecordCount"}}})],d.prototype,"num",void 0),(0,n._)([(0,a.MZ)({json:{write:!0}})],d.prototype,"returnGeometry",void 0),(0,n._)([(0,a.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d.prototype,"returnM",void 0),(0,n._)([(0,a.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d.prototype,"returnZ",void 0),(0,n._)([(0,a.MZ)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],d.prototype,"where",void 0),d=r=(0,n._)([(0,c.$)("esri.rest.support.RelationshipQuery")],d),d.from=(0,l.dp)(d);const f=d},23271:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var r,n=i(82392),s=i(1817),o=i(84977),a=i(15565),l=i(81482),c=(i(6273),i(80861),i(26325)),h=i(48524);const u=new s.J({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let p=r=class extends o.oY{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(t.statisticParameters=(0,a.o8)(e))}clone(){return new r({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:(0,a.o8)(this.statisticParameters)})}};(0,n._)([(0,l.MZ)({type:Number,json:{write:!0}})],p.prototype,"maxPointCount",void 0),(0,n._)([(0,l.MZ)({type:Number,json:{write:!0}})],p.prototype,"maxRecordCount",void 0),(0,n._)([(0,l.MZ)({type:Number,json:{write:!0}})],p.prototype,"maxVertexCount",void 0),(0,n._)([(0,l.MZ)({type:String,json:{write:!0}})],p.prototype,"onStatisticField",void 0),(0,n._)([(0,l.MZ)({type:String,json:{write:!0}})],p.prototype,"outStatisticFieldName",void 0),(0,n._)([(0,l.MZ)({type:String,json:{read:{source:"statisticType",reader:u.read},write:{target:"statisticType",writer:u.write}}})],p.prototype,"statisticType",void 0),(0,n._)([(0,l.MZ)({type:Object})],p.prototype,"statisticParameters",void 0),(0,n._)([(0,h.K)("statisticParameters")],p.prototype,"writeStatisticParameters",null),p=r=(0,n._)([(0,c.$)("esri.rest.support.StatisticDefinition")],p);const d=p},83856:(e,t,i)=>{"use strict";i.d(t,{A:()=>M});var r,n=i(82392),s=i(3313),o=i(54736),a=i(1817),l=i(84977),c=i(15565),h=i(81482),u=i(8636),p=i(26325),d=i(48524),f=i(56053);i(6273),i(80861),i(67498);let y=r=class extends l.oY{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new r({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};(0,n._)([(0,h.MZ)({type:[String],json:{write:!0}})],y.prototype,"groupByFields",void 0),(0,n._)([(0,h.MZ)({type:Number,json:{write:!0}})],y.prototype,"topCount",void 0),(0,n._)([(0,h.MZ)({type:[String],json:{write:!0}})],y.prototype,"orderByFields",void 0),y=r=(0,n._)([(0,p.$)("esri.rest.support.TopFilter")],y);const m=y;var g,v=i(44153);const _=new a.J({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),b=new a.J({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let w=g=class extends l.oY{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new g((0,c.o8)({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};(0,n._)([(0,h.MZ)({type:Boolean,json:{write:!0}})],w.prototype,"cacheHint",void 0),(0,n._)([(0,h.MZ)({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],w.prototype,"distance",void 0),(0,n._)([(0,h.MZ)({types:s.yR,json:{read:f.rS,write:!0}})],w.prototype,"geometry",void 0),(0,n._)([(0,h.MZ)({type:Number,json:{write:!0}})],w.prototype,"geometryPrecision",void 0),(0,n._)([(0,h.MZ)({type:Number,json:{write:!0}})],w.prototype,"maxAllowableOffset",void 0),(0,n._)([(0,h.MZ)({type:Number,json:{read:{source:"resultRecordCount"}}})],w.prototype,"num",void 0),(0,n._)([(0,h.MZ)({json:{write:!0}})],w.prototype,"objectIds",void 0),(0,n._)([(0,h.MZ)({type:[String],json:{write:!0}})],w.prototype,"orderByFields",void 0),(0,n._)([(0,h.MZ)({type:[String],json:{write:!0}})],w.prototype,"outFields",void 0),(0,n._)([(0,h.MZ)({type:v.A,json:{read:{source:"outSR"},write:{target:"outSR"}}})],w.prototype,"outSpatialReference",void 0),(0,n._)([(0,h.MZ)({type:String,json:{write:!0}})],w.prototype,"resultType",void 0),(0,n._)([(0,h.MZ)({json:{write:!0}})],w.prototype,"returnGeometry",void 0),(0,n._)([(0,h.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],w.prototype,"returnM",void 0),(0,n._)([(0,h.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],w.prototype,"returnZ",void 0),(0,n._)([(0,h.MZ)({type:Number,json:{read:{source:"resultOffset"}}})],w.prototype,"start",void 0),(0,n._)([(0,d.K)("start"),(0,d.K)("num")],w.prototype,"writeStart",null),(0,n._)([(0,h.MZ)({type:String,json:{read:{source:"spatialRel",reader:_.read},write:{target:"spatialRel",writer:_.write}}})],w.prototype,"spatialRelationship",void 0),(0,n._)([(0,h.MZ)({type:o.A,json:{write:!0}})],w.prototype,"timeExtent",void 0),(0,n._)([(0,h.MZ)({type:m,json:{write:!0}})],w.prototype,"topFilter",void 0),(0,n._)([(0,h.MZ)({type:String,json:{read:b.read,write:{writer:b.write,overridePolicy(e){return{enabled:null!=e&&null!=this.distance&&this.distance>0}}}}})],w.prototype,"units",void 0),(0,n._)([(0,h.MZ)({type:String,json:{write:!0}})],w.prototype,"where",void 0),w=g=(0,n._)([(0,p.$)("esri.rest.support.TopFeaturesQuery")],w),w.from=(0,u.dp)(w);const M=w},16506:(e,t,i)=>{"use strict";i.d(t,{g:()=>o,r:()=>a});var r=i(25758),n=i(77023),s=i(62073);const o={key:"type",base:n.A,typeMap:{algorithmic:r.A,multipart:s.A}};function a(e){return e?.type?"algorithmic"===e.type?r.A.fromJSON(e):"multipart"===e.type?s.A.fromJSON(e):null:null}},24193:(e,t,i)=>{"use strict";i.d(t,{x:()=>r});const r=new(i(1817).J)({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"})},36321:(e,t,i)=>{"use strict";i.d(t,{Dl:()=>o,jV:()=>s,lF:()=>a}),i(32083),i(6480);var r=i(15565),n=i(19759);function s(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function o(e){return"string"==typeof e?(0,n.An)(e):(0,r.o8)(e)}function a(e,t,i){const r={};for(const n in e){if("declaredClass"===n)continue;const s=e[n];if(null!=s&&"function"!=typeof s)if(Array.isArray(s))r[n]=s.map((e=>a({item:e},t,i).item));else if("object"==typeof s)if(s.toJSON){const e=s.toJSON(i?.[n]);r[n]=t?e:JSON.stringify(e)}else r[n]=t?s:JSON.stringify(s);else r[n]=s}return r}i(44945)},74274:(e,t,i)=>{"use strict";i.d(t,{fs:()=>o,i0:()=>a});var r=i(50189),n=i(46227),s=(i(83911),i(6183),i(23375));function o(e){return(0,n.vE)(e)||(0,n.zD)(e)||(0,n.Ah)(e)}function a(e,t){const{format:i,timeZoneOptions:n,fieldType:o}=t??{};let a,l;if(n&&({timeZone:a,timeZoneName:l}=(0,s.hv)(n.layerTimeZone,n.datesInUnknownTimezone,n.viewTimeZone,(0,r.J2)(i||"short-date-short-time"),o)),"string"==typeof e&&isNaN(Date.parse("time-only"===o?`1970-01-01T${e}Z`:e)))return e;switch(o){case"date-only":{const t=(0,r.J2)(i||"short-date");return"string"==typeof e?(0,r.iS)(e,{...t}):(0,r.Yq)(e,{...t,timeZone:s.n$})}case"time-only":{const t=(0,r.J2)(i||"short-time");return"string"==typeof e?(0,r.F8)(e,t):(0,r.Yq)(e,{...t,timeZone:s.n$})}case"timestamp-offset":{if(!a&&"string"==typeof e&&new Date(e).toISOString()!==e)return e;const t=i||n?(0,r.J2)(i||"short-date-short-time"):void 0,s=t?{...t,timeZone:a,timeZoneName:l}:void 0;return"string"==typeof e?(0,r.Ey)(e,s):(0,r.Yq)(e,s)}default:{const t=i||n?(0,r.J2)(i||"short-date-short-time"):void 0;return(0,r.Yq)("string"==typeof e?new Date(e):e,t?{...t,timeZone:a,timeZoneName:l}:void 0)}}}new Set(["integer","small-integer"])},52796:(e,t,i)=>{"use strict";i.d(t,{Y:()=>c});var r=i(82392),n=i(20857),s=(i(80861),i(8636)),o=(i(67498),i(6273),i(62991),i(50078)),a=i(26325),l=i(15909);let c=class extends l.X{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};(0,r._)([(0,o.u)({Type:n.A,ensureType:(0,s.dp)(n.A)})],c.prototype,"itemType",void 0),c=(0,r._)([(0,a.$)("esri.support.GraphicsCollection")],c)},18598:(e,t,i)=>{"use strict";i.d(t,{Q:()=>p});var r=i(82392),n=i(58842),s=i(48),o=i(80861),a=i(37623),l=i(81482),c=(i(6273),i(67498),i(26325)),h=i(45449);function u(e,t,i){let r,n;if(e)for(let s=0,o=e.length;s<o;s++){if(r=e.at(s),r?.[t]===i)return r;if("group"===r?.type&&(n=u(r.layers,t,i),n))return n}}const p=e=>{let t=class extends e{constructor(...e){super(...e),this.layers=new n.A;const t=e=>{e.parent=this,this.layerAdded(e),"elevation"!==e.type&&"base-elevation"!==e.type||o.A.getLogger(this).error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`)},i=e=>{e.parent=null,this.layerRemoved(e)};this.addHandles([this.layers.on("before-add",(e=>(e=>{e.parent&&"remove"in e.parent&&e.parent.remove(e)})(e.item))),this.layers.on("after-add",(e=>t(e.item))),this.layers.on("after-remove",(e=>i(e.item)))])}destroy(){const e=this.layers.toArray();for(const t of e)t.destroy();this.layers.destroy()}set layers(e){this._set("layers",(0,s.V)(e,this._get("layers")))}add(e,t){const i=this.layers;if(t=i.getNextIndex(t),e instanceof h.A){const r=e;r.parent===this?this.reorder(r,t):i.add(r,t)}else(0,a.$X)(e)?e.then((e=>{this.destroyed||this.add(e,t)})):o.A.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(e,t){const i=this.layers;let r=i.getNextIndex(t);e.slice().forEach((e=>{e.parent!==this?(i.add(e,r),r+=1):this.reorder(e,r)}))}findLayerById(e){return u(this.layers,"id",e)}findLayerByUid(e){return u(this.layers,"uid",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,t){return this.layers.reorder(e,t)}layerAdded(e){}layerRemoved(e){}};return(0,r._)([(0,l.MZ)()],t.prototype,"layers",null),t=(0,r._)([(0,c.$)("esri.support.LayersMixin")],t),t}},16115:(e,t,i)=>{"use strict";i.d(t,{l:()=>h});var r=i(82392),n=i(58842),s=i(48),o=i(80861),a=i(81482),l=(i(6273),i(67498),i(26325));function c(e,t,i){if(e)for(let r=0,n=e.length;r<n;r++){const n=e.at(r);if(n[t]===i)return n;if("group"===n?.type){const e=c(n.tables,t,i);if(e)return e}}}const h=e=>{let t=class extends e{constructor(...e){super(...e),this.tables=new n.A,this.addHandles([this.tables.on("after-add",(e=>{const t=e.item;t.parent&&t.parent!==this&&"tables"in t.parent&&t.parent.tables.remove(t),t.parent=this,"feature"!==t.type&&o.A.getLogger(this).error(`Layer 'title:${t.title}, id:${t.id}' of type '${t.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on("after-remove",(e=>{e.item.parent=null}))])}destroy(){const e=this.tables.toArray();for(const t of e)t.destroy();this.tables.destroy()}set tables(e){this._set("tables",(0,s.V)(e,this._get("tables")))}findTableById(e){return c(this.tables,"id",e)}findTableByUid(e){return c(this.tables,"uid",e)}};return(0,r._)([(0,a.MZ)()],t.prototype,"tables",null),t=(0,r._)([(0,l.$)("esri.support.TablesMixin")],t),t}},33262:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});var r,n=i(82392),s=i(73783),o=i(23377),a=i(81482),l=(i(6273),i(80861),i(67498),i(26325));let c=r=class extends((0,o.sA)(s.A)){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new r({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};(0,n._)([(0,a.MZ)()],c.prototype,"active",void 0),(0,n._)([(0,a.MZ)()],c.prototype,"className",void 0),(0,n._)([(0,a.MZ)()],c.prototype,"disabled",void 0),(0,n._)([(0,a.MZ)()],c.prototype,"icon",void 0),(0,n._)([(0,a.MZ)()],c.prototype,"id",void 0),(0,n._)([(0,a.MZ)()],c.prototype,"indicator",void 0),(0,n._)([(0,a.MZ)()],c.prototype,"title",void 0),(0,n._)([(0,a.MZ)()],c.prototype,"type",void 0),(0,n._)([(0,a.MZ)()],c.prototype,"visible",void 0),c=r=(0,n._)([(0,l.$)("esri.support.actions.ActionBase")],c);const h=c},56851:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var r,n=i(82392),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),a=i(33262);let l=r=class extends a.A{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new r({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};(0,n._)([(0,s.MZ)()],l.prototype,"image",void 0),l=r=(0,n._)([(0,o.$)("esri.support.Action.ActionButton")],l);const c=l},46883:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var r,n=i(82392),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),a=i(33262);let l=r=class extends a.A{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new r({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};(0,n._)([(0,s.MZ)()],l.prototype,"image",void 0),(0,n._)([(0,s.MZ)()],l.prototype,"value",void 0),l=r=(0,n._)([(0,o.$)("esri.support.Action.ActionToggle")],l);const c=l},61774:(e,t,i)=>{"use strict";i.d(t,{CA:()=>o,Yb:()=>n,p5:()=>s}),i(39553);var r=i(13033);function n(e){return e.icon?e.icon:"image"in e&&e.image||e.className?void 0:"question"}function s(e){return e?{backgroundImage:`url(${e})`}:{}}function o({action:e,feature:t}){const i=t?.attributes,n="image"in e?e.image:void 0;return n&&i?(0,r.V)(n,i):n??""}},44945:(e,t,i)=>{"use strict";i.d(t,{Q:()=>s});var r=i(19759);const n=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function s(e){const t=(0,r.$z)(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!n.has(t)&&!e.endsWith("/sharing/rest/generateToken")}},83911:(e,t,i)=>{"use strict";i.d(t,{Ad:()=>l,lw:()=>a,xR:()=>c}),i(3313);var r=i(62991),n=i(80861),s=i(44153);let o;function a(){return o||(o=(async()=>{const e=await i.e(7518).then(i.bind(i,77518));return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),o}const l=(e,t,i)=>h.create(e,t,i,null,["$feature","$view"],[]),c=(e,t,i,r)=>h.create(e,t,i,r,["$feature","$view"],[]);class h{constructor(e,t,i,r,n,s,o){this.services=null,this.script=e,this.evaluate=r;const a=Array.isArray(s)?s:s?.fields;this.fields=a??[],this._syntaxTree=i,this._arcade=t,this._arcadeFeature=n,this._spatialReference=o,this._referencesGeometry=t.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,t,i,o,l,c){const{arcade:u,Feature:p,Dictionary:d}=await a(),f=s.A.fromJSON(t);let y;try{y=u.parseScript(e,c)}catch(t){return n.A.getLogger("esri.support.arcadeOnDemand").error(new r.A("arcade-bad-expression","Failed to parse arcade script",{script:e,error:t})),null}const m=l.reduce(((e,t)=>({...e,[t]:null})),{});let g=null;null!=o&&(g=new d(o),g.immutable=!0,m.$config=null);const v=u.scriptUsesGeometryEngine(y),_=v&&u.enableGeometrySupport(),b=u.scriptUsesFeatureSet(y)&&u.enableFeatureSetSupport(),w=u.scriptIsAsync(y),M=w&&u.enableAsyncSupport(),T={vars:m,spatialReference:f,useAsync:!!M};await Promise.all([_,b,M]);const S=new Set;await u.loadDependentModules(S,y,null,w,v);const A=new d;A.immutable=!1,A.setField("scale",0);const E=u.compileScript(y,T);return new h(e,u,y,((e,t)=>{const i=e.$view?.timeZone;return"$view"in e&&e.$view&&(A.setField("scale","object"==typeof e.$view&&"scale"in e.$view?e.$view.scale:void 0),e.$view=A),g&&(e.$config=g),E({vars:e,spatialReference:f,services:t,timeZone:i})}),new p,i,f)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}}},98593:(e,t,i)=>{"use strict";function r(e){const t=atob(e),i=new Uint8Array(t.length);for(let e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return i.buffer}function n(e){const t=new Uint8Array(e);let i="";for(let e=0;e<t.length;e++)i+=String.fromCharCode(t[e]);return btoa(i)}i.d(t,{M:()=>r,Y:()=>n})},49112:(e,t,i)=>{"use strict";i.d(t,{H:()=>o,q:()=>s});var r=i(44764),n=i(10709);async function s(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,i=await(0,n.ud)("esri/t9n/basemaps");return i[e]||i[t]}const o={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return(0,r.s)("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return(0,r.s)("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return(0,r.s)("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return(0,r.s)("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return(0,r.s)("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return(0,r.s)("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return(0,r.s)("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return(0,r.s)("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return(0,r.s)("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return(0,r.s)("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return(0,r.s)("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return(0,r.s)("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return(0,r.s)("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return(0,r.s)("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return(0,r.s)("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return(0,r.s)("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return(0,r.s)("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return(0,r.s)("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return(0,r.s)("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return(0,r.s)("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return(0,r.s)("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return(0,r.s)("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return(0,r.s)("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return(0,r.s)("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return(0,r.s)("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return(0,r.s)("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return(0,r.s)("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}}},6183:(e,t,i)=>{"use strict";i.d(t,{$P:()=>m,JT:()=>M,Rc:()=>w,VC:()=>d,dp:()=>y,hA:()=>D,jU:()=>b,jj:()=>f,n8:()=>T,ns:()=>v,t5:()=>g});var r=i(66801),n=i(32083),s=i(58842),o=i(80861),a=i(57725),l=i(19759),c=i(8636),h=i(62436),u=i(49112);const p=()=>o.A.getLogger("esri.support.basemapUtils");function d(){return{}}function f(e){for(const t in e){const i=e[t];(0,a.pR)(i),delete e[t]}}function y(e,t){let i;if("string"==typeof e){const s=e in u.H,o=!s&&e.includes("/");if(!s&&!o){const t=Object.entries(u.H).filter((([e,t])=>n.A.apiKey&&!t.classic||!n.A.apiKey&&(t.classic||t.is3d))).map((([e])=>`"${e}"`)).sort().join(", ");return p().warn(`Unable to find basemap definition for: ${e}. Try one of these: ${t}`),null}t&&(i=t[e]),i||(i=s?r.default.fromId(e):new r.default({style:{id:e}}),t&&(t[e]=i))}else i=(0,c.dp)(r.default,e);return i?.destroyed&&(p().warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function m(e){return"Web Scene"===e.portalItem?.type||e.referenceLayers.some((e=>"scene"===e.type))}function g(e){return!!e?.portalItem?.tags?.some((e=>"beta"===e.toLowerCase()))}function v(e,t){return e.basemap?.referenceLayers?.some((e=>e.uid===t))||e.basemap?.baseLayers?.some((e=>e.uid===t))}let _;function b(e,t){return e===t||null!=e?.portalItem?.id&&e.portalItem.id===t?.portalItem?.id||"equal"===L(E(e),E(t),{mustMatchReferences:!0})}function w(e){return!!e?.baseLayers.concat(e.referenceLayers).some(M)}function M(e){if(A(e.url))return!0;if("vector-tile"===e.type)for(const t in e.sourceNameToSource){const i=e.sourceNameToSource[t];if(A(i?.sourceUrl))return!0}return!1}function T(e,t){if(null==t||null==e)return{spatialReference:null,updating:!1};if("not-loaded"===t.loadStatus)return t.load(),{spatialReference:null,updating:!0};if(t.spatialReference)return{spatialReference:t.spatialReference,updating:!1};if(0===t.baseLayers.length)return{spatialReference:null,updating:!1};const i=t.baseLayers.at(0);switch(i.loadStatus){case"not-loaded":i.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const r=(("supportedSpatialReferences"in i?i.supportedSpatialReferences:null)||["tileInfo"in i?i.tileInfo?.spatialReference:i.spatialReference]).filter(Boolean),n=e.spatialReference;return n?{spatialReference:r.find((e=>n.equals(e)))??r[0]??null,updating:!1}:{spatialReference:r[0],updating:!1}}const S=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function A(e){if(!e)return!1;const t=new l.s0((0,l.s2)(e));return!!t.authority&&S.test(t.authority)}function E(e){return e?!e.loaded&&e.resourceInfo?k(e.resourceInfo.data):{baseLayers:x(e.baseLayers),referenceLayers:x(e.referenceLayers)}:null}function x(e){return(s.A.isCollection(e)?e.toArray():e).map(I)}function I(e){return{type:e.type,effect:"effect"in e?e.effect:void 0,url:P("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl||""),minScale:"minScale"in e&&null!=e.minScale?e.minScale:0,maxScale:"maxScale"in e&&null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visible||!!e.visible,sublayers:"map-image"!==e.type&&"wms"!==e.type||null==e.sublayers?void 0:e.sublayers?.map((e=>({id:e.id,visible:e.visible}))),activeLayerId:"wmts"===e.type?e.activeLayer?.id:void 0}}function C(e){return e.isReference||"ArcGISSceneServiceLayer"===e.layerType}function k(e){return e?{baseLayers:N((e.baseMapLayers??[]).filter((e=>!C(e)))),referenceLayers:N((e.baseMapLayers??[]).filter((e=>C(e))))}:null}function N(e){return e.map((e=>function(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;case"ArcGISSceneServiceLayer":t="scene";break;default:t="unknown"}return{type:t,effect:e.effect,url:P(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:e.minScale??0,maxScale:e.maxScale??0,opacity:e.opacity??1,visible:null==e.visibility||!!e.visibility,sublayers:void 0,activeLayerId:void 0}}(e)))}function L(e,t,i){return null!=e!=(null!=t)?"not-equal":e&&t?O(e.baseLayers,t.baseLayers)?O(e.referenceLayers,t.referenceLayers)?"equal":i.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function O(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!R(e[i],t[i]))return!1;return!0}function R(e,t){if(e.type!==t.type||e.url!==t.url||e.minScale!==t.minScale||e.maxScale!==t.maxScale||e.visible!==t.visible||e.opacity!==t.opacity)return!1;if(!(0,h.J2)(e.effect,t.effect))return!1;if(null!=e.activeLayerId||null!=t.activeLayerId)return e.activeLayerId===t.activeLayerId;if(null!=e.sublayers||null!=t.sublayers){if(null==e.sublayers||null==t.sublayers||e.sublayers.length!==t.sublayers.length)return!1;for(let i=0;i<e.sublayers.length;i++){const r=e.sublayers.at(i),n=t.sublayers.at(i);if(r?.id!==n?.id||r?.visible!==n?.visible)return!1}}return!0}function P(e){return e?(0,l.S8)(e).replace(/^\s*https?:/i,"").toLowerCase():""}function D(e){if(!e)return null;const{thumbnailUrl:t}=e;if(t)return t;const i=function(e){if(_)return _(e);let t=null;const i=E(e),r=!i?.baseLayers.length;for(const e in u.H){const n=L(i,k(u.H[e]),{mustMatchReferences:r});if("equal"===n){t=e;break}"base-layers-equal"===n&&(t=e)}return t}(e);return i?u.H[i].thumbnailUrl:(0,a.Pb)(e.baseLayers,F)}function F(e){return"portalItem"in e?e.portalItem?.thumbnailUrl:void 0}},80652:(e,t,i)=>{"use strict";i.d(t,{X:()=>s,Z:()=>n});var r=i(53244);function n(e){return new r.A({getCollections:()=>[e.tables,e.layers],getChildrenFunction:e=>{const t=[];return"tables"in e&&t.push(e.tables),"layers"in e&&t.push(e.layers),t},itemFilterFunction:e=>{const t=e.parent;return!!t&&"tables"in t&&t.tables.includes(e)}})}function s(e){for(const t of e.values())t?.destroy();e.clear()}},19541:(e,t,i)=>{"use strict";i.d(t,{$7:()=>M,B:()=>w,Fo:()=>v,NN:()=>p,Q5:()=>_,Tq:()=>x,Up:()=>b,XF:()=>S,Ze:()=>f,bK:()=>a,bh:()=>u,id:()=>y,ky:()=>h,qt:()=>E,tW:()=>T,w7:()=>l,wF:()=>o,wS:()=>m,xS:()=>g,ze:()=>c});var r=i(5262),n=i(69172);function s(e){return e?E:x}function o(e,t){return t?.mode?t.mode:s(e).mode}function a(e,t){return null!=t?t:s(e)}function l(e,t){return o(null!=e&&e.hasZ,t)}function c(e,t){return a(null!=e&&!!e.hasZ,t)}function h(e){const t=d(e);return l(e.geometry,t)}function u(e){const t=d(e),i=l(e.geometry,t);return{mode:i,offset:null!=t&&"on-the-ground"!==i?A(t):0}}function p(e){if("on-the-ground"===h(e))return!1;const t=d(e),i=t?.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!i||"0"===i)}function d(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function f(e,t){if(!e?.offset)return 0;const{offset:i,unit:n}=e;if("decimal-degrees"===n)return 0;const s="unknown"!==n&&n?n:"meters",o=(0,r.mq)(t);return o?(0,r.oU)(i,s,o):0}function y(e,t,i){if(!i?.mode)return;const r=e.hasZ?e.z:0,n=f(i,e.spatialReference);switch(i.mode){case"absolute-height":return r-n;case"on-the-ground":return 0;case"relative-to-ground":return r-((t.elevationProvider.getElevation(e.x,e.y,r,e.spatialReference,"ground")??0)+n);case"relative-to-scene":return r-((t.elevationProvider.getElevation(e.x,e.y,r,e.spatialReference,"scene")??0)+n)}}function m(e,t,i,r=null){return v(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,i,r)}function g(e,t,i,r,n=null){return v(e,t[0],t[1],t.length>2?t[2]:0,i,r,n)}function v(e,t,i,r,n,s,o=null){if(null==s)return;const a=null!=o?o.mode:"absolute-height";if("on-the-ground"===a)return 0;const{absoluteZ:l}=_(t,i,r,n,e,s);return function(e,t,i,r,n,s,o,a){const l=f(o,n);switch(a){case"absolute-height":return e-l;case"relative-to-ground":return e-((s.elevationProvider.getElevation(t,i,r,n,"ground")??0)+l);case"relative-to-scene":return e-((s.elevationProvider.getElevation(t,i,r,n,"scene")??0)+l)}}(l,t,i,r,n,e,o,a)}function _(e,t,i,r,n,s){const o=f(s,r);switch(s.mode){case"absolute-height":return{absoluteZ:i+o,elevation:0};case"on-the-ground":{const i=n.elevationProvider.getElevation(e,t,0,r,"ground")??0;return{absoluteZ:i,elevation:i}}case"relative-to-ground":{const s=n.elevationProvider.getElevation(e,t,i,r,"ground")??0;return{absoluteZ:i+s+o,elevation:s}}case"relative-to-scene":{const s=n.elevationProvider.getElevation(e,t,i,r,"scene")??0;return{absoluteZ:i+s+o,elevation:s}}}}function b(e,t){if(null==t)return!1;const{mode:i}=t;return null!=i&&("scene"===e&&"relative-to-scene"===i||"ground"===e&&"absolute-height"!==i)}function w(e,t,i){return i&&i.mode!==t?`${e} only support ${t} elevation mode`:null}function M(e,t,i){return i?.mode===t?`${e} do not support ${t} elevation mode`:null}function T(e,t){return null!=t?.featureExpressionInfo&&"0"!==t.featureExpressionInfo.expression?`${e} do not support featureExpressionInfo`:null}function S(e,t){t&&e.warn(".elevationInfo=",t)}function A(e){return(e?.offset??0)*(0,n.Ao)(e?.unit)}const E={mode:"absolute-height",offset:0},x={mode:"on-the-ground",offset:null}},96316:(e,t,i)=>{"use strict";i.d(t,{Vd:()=>n,Vo:()=>s});var r=i(6273);const n=()=>!!(0,r.A)("enable-feature:force-wosr"),s=()=>!!(0,r.A)("enable-feature:SceneLayer-editing");((e="i3s-patching")=>{switch(r.A.add("enable-i3s-patching",!1,!0,!0),r.A.add("enable-feature:direct-3d-object-feature-layer-display",!1,!0,!0),r.A.add("enable-feature:SceneLayer-editing",!0,!0,!0),e){case"feature-layer-view":r.A.add("enable-feature:direct-3d-object-feature-layer-display",!0,!0,!0);break;case"i3s-patching":r.A.add("enable-i3s-patching",!0,!0,!0)}})("i3s-patching")},95610:(e,t,i)=>{"use strict";i.d(t,{tn:()=>c});var r=i(20879),n=i(46227),s=i(6135),o=(i(23547),i(60854),i(70261),i(79640)),a=(i(54213),i(57705),i(834),i(22980)),l=i(46495);function c({displayField:e,editFieldsInfo:t,fields:i,objectIdField:l,title:c},d){if(!i)return null;const y=function(e,t){const i=t?.visibleFieldNames;return function(e,t){const i=e;return t&&(e=e.filter((e=>!t.includes(e.type)))),e===i&&(e=e.slice()),e.sort(u),e}(e.fields??[],t?.ignoreFieldTypes||f).map((t=>new a.A({fieldName:t.name,isEditable:(0,n.R$)(t,e),label:t.alias,format:p(t),visible:h(t,{...e,visibleFieldNames:i})})))}({editFieldsInfo:t,fields:i,objectIdField:l},d);if(!y.length)return null;const m=function(e){const t=(0,n.mB)(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i??""}({titleBase:c,fields:i,displayField:e}),g=[new o.A,new s.A];return new r.A({title:m,content:g,fieldInfos:y})}const h=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):(0,n.Bz)(e,t);function u(e,t){return"oid"===e.type?-1:"oid"===t.type?1:d(e)?-1:d(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function p(e){switch(e.type){case"small-integer":case"integer":case"single":return new l.A({digitSeparator:!0,places:0});case"double":return new l.A({digitSeparator:!0,places:2});case"string":return(0,n.JL)(e.name)?new l.A({digitSeparator:!0,places:0}):null;default:return null}}function d(e){return"name"===(e.name&&e.name.toLowerCase())||"name"===(e.alias&&e.alias.toLowerCase())}const f=["geometry","blob","raster","guid","xml"]},25207:(e,t,i)=>{"use strict";i.d(t,{Sx:()=>a,m3:()=>d,ql:()=>h,tz:()=>u,xW:()=>p});var r=i(32083),n=i(6273),s=i(37623),o=i(19759);function a(e,t,i=!1,r){return new Promise(((o,a)=>{if((0,s.G4)(r))return void a(l());let c=()=>{p(),a(new Error(`Unable to load ${t}`))},h=()=>{const t=e;p(),o(t)},u=()=>{if(!e)return;const t=e;p(),t.src="",a(l())};const p=()=>{(0,n.A)("esri-image-decode")||(e.removeEventListener("error",c),e.removeEventListener("load",h)),c=null,h=null,e=null,null!=r&&r.removeEventListener("abort",u),u=null,i&&URL.revokeObjectURL(t)};null!=r&&r.addEventListener("abort",u),(0,n.A)("esri-image-decode")?e.decode().then(h,c):(e.addEventListener("error",c),e.addEventListener("load",h))}))}function l(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const c="Timeout exceeded";function h(){return new Error(c)}function u(e){r.A.request.crossOriginNoCorsDomains||(r.A.request.crossOriginNoCorsDomains={});const t=r.A.request.crossOriginNoCorsDomains;for(let i of e)i=i.toLowerCase(),/^https?:\/\//.test(i)?t[(0,o.$z)(i)??""]=0:(t[(0,o.$z)("http://"+i)??""]=0,t[(0,o.$z)("https://"+i)??""]=0)}function p(e){const t=r.A.request.crossOriginNoCorsDomains;if(t){let i=(0,o.$z)(e);if(i)return i=i.toLowerCase(),!(0,o.FX)(i,(0,o.Xq)())&&t[i]<Date.now()-36e5}return!1}async function d(e){const t=r.A.request.crossOriginNoCorsDomains,i=(0,o.$z)(e);t&&i&&(t[i.toLowerCase()]=Date.now());const n=(0,o.An)(e);e=n.path,"json"===n.query?.f&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}}},74872:(e,t,i)=>{"use strict";i.d(t,{$:()=>r,u:()=>n});const r="20240321",n="9cf5a4b8555fda94595b625a40b922e012baf071"},56931:(e,t,i)=>{"use strict";i.d(t,{fJ:()=>s,g4:()=>n,hY:()=>o});const r="calcite-mode-";function n(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"").startsWith("dark")}function s(){return`${r}${n()?"dark":"light"}`}function o(e){a(e),e.classList.add(s())}function a(e){Array.from(e.classList).forEach((t=>{t.startsWith(r)&&e.classList.remove(t)}))}},3438:(e,t,i)=>{"use strict";i.d(t,{dp:()=>j,$y:()=>C,wk:()=>k,Bu:()=>O,Es:()=>N,q8:()=>L,em:()=>P,Rv:()=>F,xK:()=>R,On:()=>D});var r,n=i(8636),s=i(9283),o=i(60936),a=(i(12508),i(90818)),l=(i(58720),i(70842),i(65076),i(94598)),c=i(85498),h=(i(28107),i(47065),i(56173)),u=(i(34450),i(61842),i(82392)),p=i(15565),d=i(23572),f=i(81482),y=(i(6273),i(80861),i(85716)),m=i(26325),g=i(34513);let v=r=class extends a.A{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,i,r){if(e&&"string"!=typeof e&&null==e.imageData)return e;const n={};return e&&(n.url=e),t&&(n.outline=t),null!=i&&(n.width=(0,d.cr)(i)),null!=r&&(n.height=(0,d.cr)(r)),n}clone(){const e=new r({color:(0,p.o8)(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",(0,p.o8)(this.source)),e}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};(0,u._)([(0,y.e)({esriPFS:"picture-fill"},{readOnly:!0})],v.prototype,"type",void 0),(0,u._)([(0,f.MZ)(g.ku)],v.prototype,"url",void 0),(0,u._)([(0,f.MZ)({type:Number,json:{write:!0}})],v.prototype,"xscale",void 0),(0,u._)([(0,f.MZ)({type:Number,json:{write:!0}})],v.prototype,"yscale",void 0),(0,u._)([(0,f.MZ)({type:Number,cast:d.cr,json:{write:!0}})],v.prototype,"width",void 0),(0,u._)([(0,f.MZ)({type:Number,cast:d.cr,json:{write:!0}})],v.prototype,"height",void 0),(0,u._)([(0,f.MZ)({type:Number,cast:d.cr,json:{write:!0}})],v.prototype,"xoffset",void 0),(0,u._)([(0,f.MZ)({type:Number,cast:d.cr,json:{write:!0}})],v.prototype,"yoffset",void 0),(0,u._)([(0,f.MZ)(g.k7)],v.prototype,"source",void 0),v=r=(0,u._)([(0,m.$)("esri.symbols.PictureFillSymbol")],v);const _=v;var b=i(11455),w=i(12862),M=i(7998),T=i(55736),S=i(24826),A=i(68231),E=i(999),x=(i(62932),i(81327),i(31864)),I=(i(31873),i(70538),i(43532));function C(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function k(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}i(97160),i(1982);const N={base:E.A,key:"type",typeMap:{"simple-fill":T.A,"picture-fill":_,"picture-marker":b.A,"simple-line":S.A,"simple-marker":A.A,text:x.A,"label-3d":l.A,"line-3d":c.A,"mesh-3d":h.A,"point-3d":w.A,"polygon-3d":M.A,"web-style":I.A,cim:o.A},errorContext:"symbol"},L={base:E.A,key:"type",typeMap:{"picture-marker":b.A,"simple-marker":A.A,text:x.A,"web-style":I.A,cim:o.A},errorContext:"symbol"},O=(0,s.C)({types:N}),R={base:E.A,key:"type",typeMap:{"simple-fill":T.A,"picture-fill":_,"picture-marker":b.A,"simple-line":S.A,"simple-marker":A.A,text:x.A,"line-3d":c.A,"mesh-3d":h.A,"point-3d":w.A,"polygon-3d":M.A,"web-style":I.A,cim:o.A},errorContext:"symbol"},P={base:E.A,key:"type",typeMap:{text:x.A,"label-3d":l.A},errorContext:"symbol"},D=(E.A,l.A,c.A,h.A,w.A,M.A,I.A,{base:E.A,key:"type",typeMap:{"line-3d":c.A,"mesh-3d":h.A,"point-3d":w.A,"polygon-3d":M.A,"web-style":I.A,cim:o.A},errorContext:"symbol"}),F={base:E.A,key:"type",typeMap:{"label-3d":l.A},errorContext:"symbol"},j=(0,n.aq)(N)},60936:(e,t,i)=>{"use strict";i.d(t,{A:()=>y});var r,n=i(82392),s=i(15565),o=i(21332),a=i(81482),l=(i(6273),i(80861),i(85716)),c=i(25376),h=i(26325),u=i(48524),p=i(46227),d=i(999);let f=r=class extends d.A{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){if("CIMSymbolReference"===this.data?.type){const i=this.data.primitiveOverrides;if(i){const r=i.map((i=>{const r=i.valueExpressionInfo;return r?(0,p.Dx)(e,t,r.expression):null}));await Promise.all(r)}}}clone(){return new r({data:(0,s.o8)(this.data)})}hash(){return(0,o.Wm)(JSON.stringify(this.data)).toString()}};(0,n._)([(0,a.MZ)({json:{write:!1}})],f.prototype,"color",void 0),(0,n._)([(0,a.MZ)({json:{write:!0}})],f.prototype,"data",void 0),(0,n._)([(0,c.w)("data",["symbol"])],f.prototype,"readData",null),(0,n._)([(0,u.K)("data",{})],f.prototype,"writeData",null),(0,n._)([(0,l.e)({CIMSymbolReference:"cim"},{readOnly:!0})],f.prototype,"type",void 0),f=r=(0,n._)([(0,h.$)("esri.symbols.CIMSymbol")],f);const y=f},12508:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var r,n=i(82392),s=i(81482),o=(i(6273),i(80861),i(67498),i(85716)),a=i(26325),l=i(81327),c=i(3219),h=i(13665);let u=r=class extends l.A{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new r({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:null!=this.material?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};(0,n._)([(0,o.e)({Extrude:"extrude"},{readOnly:!0})],u.prototype,"type",void 0),(0,n._)([(0,s.MZ)({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],u.prototype,"size",void 0),(0,n._)([(0,s.MZ)({type:h.N,json:{write:!0}})],u.prototype,"material",void 0),(0,n._)([(0,s.MZ)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],u.prototype,"castShadows",void 0),(0,n._)([(0,s.MZ)(c.J)],u.prototype,"edges",void 0),u=r=(0,n._)([(0,a.$)("esri.symbols.ExtrudeSymbol3DLayer")],u);const p=u},90818:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var r=i(82392),n=i(81482),s=(i(6273),i(80861),i(67498),i(26325)),o=i(24826),a=i(999);let l=class extends a.A{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};(0,r._)([(0,n.MZ)({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":o.A}},json:{default:null,write:!0}})],l.prototype,"outline",void 0),(0,r._)([(0,n.MZ)({type:["simple-fill","picture-fill"],readOnly:!0})],l.prototype,"type",void 0),l=(0,r._)([(0,s.$)("esri.symbols.FillSymbol")],l);const c=l},58720:(e,t,i)=>{"use strict";i.d(t,{A:()=>A});var r,n=i(82392),s=i(81482),o=(i(6273),i(80861),i(67498),i(85716)),a=i(26325),l=i(81327),c=i(3219),h=i(31656),u=i(91301),p=i(53182),d=i(66215),f=(i(62991),i(13665));let y=r=class extends f.N{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:null!=this.color?this.color.clone():null,colorMixMode:this.colorMixMode};return new r(e)}};(0,n._)([(0,o.e)({multiply:"multiply",replace:"replace",tint:"tint"})],y.prototype,"colorMixMode",void 0),y=r=(0,n._)([(0,a.$)("esri.symbols.support.Symbol3DFillMaterial")],y);var m,g=i(93814),v=i(84977),_=i(23572),b=i(30361),w=i(41394);let M=m=class extends v.oY{constructor(e){super(e),this.color=new g.A([0,0,0,1]),this.size=(0,_.PN)(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:null!=this.color?this.color.clone():null,size:this.size,pattern:null!=this.pattern?this.pattern.clone():null,patternCap:this.patternCap};return new m(e)}};var T;(0,n._)([(0,s.MZ)(b.E)],M.prototype,"color",void 0),(0,n._)([(0,s.MZ)(b.p)],M.prototype,"size",void 0),(0,n._)([(0,s.MZ)(p.v)],M.prototype,"pattern",void 0),(0,n._)([(0,s.MZ)({type:w.M4,json:{default:"butt",write:{overridePolicy(){return{enabled:null!=this.pattern}}}}})],M.prototype,"patternCap",void 0),M=m=(0,n._)([(0,a.$)("esri.symbols.support.Symbol3DOutline")],M);let S=T=class extends l.A{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:null!=this.edges?this.edges.clone():null,enabled:this.enabled,material:null!=this.material?this.material.clone():null,pattern:null!=this.pattern?this.pattern.clone():null,castShadows:this.castShadows,outline:null!=this.outline?this.outline.clone():null};return new T(e)}static fromSimpleFillSymbol(e){const t=e.outline&&e.outline.style&&"inside-frame"!==e.outline.style&&"solid"!==e.outline.style?new h.A({style:e.outline.style}):null,i={size:e.outline?.width??0,color:(e.outline?.color??d.ON).clone(),pattern:t};return t&&e.outline?.cap&&(i.patternCap=e.outline.cap),new T({material:new y({color:(e.color??d.u7).clone()}),pattern:e.style&&"solid"!==e.style?new u.A({style:e.style}):null,outline:i})}};(0,n._)([(0,o.e)({Fill:"fill"},{readOnly:!0})],S.prototype,"type",void 0),(0,n._)([(0,s.MZ)({type:y,json:{write:!0}})],S.prototype,"material",void 0),(0,n._)([(0,s.MZ)(p.r)],S.prototype,"pattern",void 0),(0,n._)([(0,s.MZ)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],S.prototype,"castShadows",void 0),(0,n._)([(0,s.MZ)({type:M,json:{write:!0}})],S.prototype,"outline",void 0),(0,n._)([(0,s.MZ)(c.J)],S.prototype,"edges",void 0),S=T=(0,n._)([(0,a.$)("esri.symbols.FillSymbol3DLayer")],S);const A=S},70842:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var r,n=i(82392),s=i(84977),o=i(23572),a=i(81482),l=i(77380),c=(i(67498),i(6273),i(26325)),h=i(70227);let u=r=class extends s.oY{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return(0,o.cr)(e)}clone(){return new r({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};(0,n._)([(0,a.MZ)({type:h.h9,json:{default:"none",write:!0}})],u.prototype,"decoration",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],u.prototype,"family",void 0),(0,n._)([(0,a.MZ)({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:!i||!i.textSymbol3D})}}})],u.prototype,"size",void 0),(0,n._)([(0,l.w)("size")],u.prototype,"castSize",null),(0,n._)([(0,a.MZ)({type:h._R,json:{default:"normal",write:!0}})],u.prototype,"style",void 0),(0,n._)([(0,a.MZ)({type:h.NM,json:{default:"normal",write:!0}})],u.prototype,"weight",void 0),u=r=(0,n._)([(0,c.$)("esri.symbols.Font")],u);const p=u},65076:(e,t,i)=>{"use strict";i.d(t,{A:()=>x});var r,n=i(82392),s=i(80861),o=i(19759),a=i(81482),l=(i(6273),i(67498),i(85716)),c=i(26325),h=i(81327),u=i(66215),p=i(36788),d=i(30361),f=i(98540),y=i(93814),m=i(84977),g=i(23572);let v=r=class extends m.oY{constructor(e){super(e),this.color=new y.A([0,0,0,1]),this.size=(0,g.PN)(1)}clone(){const e={color:null!=this.color?this.color.clone():null,size:this.size};return new r(e)}};(0,n._)([(0,a.MZ)(d.E)],v.prototype,"color",void 0),(0,n._)([(0,a.MZ)(d.p)],v.prototype,"size",void 0),v=r=(0,n._)([(0,c.$)("esri.symbols.support.Symbol3DIconOutline")],v);var _,b=i(13665);const w="esri.symbols.IconSymbol3DLayer";let M=_=class extends h.A{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new _({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:null!=this.material?this.material.clone():null,outline:null!=this.outline?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||u.ON,i=T(e),r=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||u.ON).clone()}:null;return new _({size:e.size,resource:{primitive:E(e.style)},material:{color:t},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const t=!e.color||(0,u.U9)(e.color)?u.ON:e.color,i=T(e);return new _({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new _({resource:{href:(0,o.Hg)({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};function T(e){const t="width"in e?e.width:e.size,i="height"in e?e.height:e.size,r=S(e.xoffset),n=S(e.yoffset);return(r||n)&&t&&i?{x:-r/t,y:n/i}:null}function S(e){return isFinite(e)?e:0}(0,n._)([(0,a.MZ)({type:b.N,json:{write:!0}})],M.prototype,"material",void 0),(0,n._)([(0,a.MZ)({type:p.i,json:{write:!0}})],M.prototype,"resource",void 0),(0,n._)([(0,l.e)({Icon:"icon"},{readOnly:!0})],M.prototype,"type",void 0),(0,n._)([(0,a.MZ)(d.p)],M.prototype,"size",void 0),(0,n._)([(0,l.e)({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),(0,a.MZ)({json:{default:"center"}})],M.prototype,"anchor",void 0),(0,n._)([(0,a.MZ)({type:f.Q,json:{type:[Number],read:{reader:e=>new f.Q({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],M.prototype,"anchorPosition",void 0),(0,n._)([(0,a.MZ)({type:v,json:{write:!0}})],M.prototype,"outline",void 0),M=_=(0,n._)([(0,c.$)(w)],M);const A={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function E(e){return A[e]||(s.A.getLogger(w).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const x=M},94598:(e,t,i)=>{"use strict";i.d(t,{A:()=>m});var r,n=i(82392),s=i(58842),o=i(15565),a=i(81482),l=(i(6273),i(80861),i(85716)),c=i(26325),h=i(62932),u=i(31873),p=i(884),d=i(20593);const f=s.A.ofType({base:null,key:"type",typeMap:{text:u.A}});let y=r=class extends h.A{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new f,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return(0,p.LH)(this)}hasVisibleVerticalOffset(){return(0,p.Yq)(this)}clone(){return new r({styleOrigin:(0,o.o8)(this.styleOrigin),symbolLayers:(0,o.o8)(this.symbolLayers),thumbnail:(0,o.o8)(this.thumbnail),callout:(0,o.o8)(this.callout),verticalOffset:(0,o.o8)(this.verticalOffset)})}static fromTextSymbol(e){return new r({symbolLayers:new s.A([u.A.fromTextSymbol(e)])})}};(0,n._)([(0,a.MZ)({type:d.A,json:{write:!0}})],y.prototype,"verticalOffset",void 0),(0,n._)([(0,a.MZ)(p.oG)],y.prototype,"callout",void 0),(0,n._)([(0,a.MZ)({json:{read:!1,write:!1}})],y.prototype,"styleOrigin",void 0),(0,n._)([(0,a.MZ)({type:f})],y.prototype,"symbolLayers",void 0),(0,n._)([(0,l.e)({LabelSymbol3D:"label-3d"},{readOnly:!0})],y.prototype,"type",void 0),y=r=(0,n._)([(0,c.$)("esri.symbols.LabelSymbol3D")],y);const m=y},85498:(e,t,i)=>{"use strict";i.d(t,{A:()=>m});var r,n=i(82392),s=i(58842),o=i(15565),a=i(81482),l=(i(6273),i(80861),i(85716)),c=i(26325),h=i(28107),u=i(61842),p=i(62932);const d=s.A.ofType({base:null,key:"type",typeMap:{line:h.A,path:u.A}}),f=s.A.ofType({base:null,key:"type",typeMap:{line:h.A,path:u.A}});let y=r=class extends p.A{constructor(e){super(e),this.symbolLayers=new d,this.type="line-3d"}clone(){return new r({styleOrigin:(0,o.o8)(this.styleOrigin),symbolLayers:(0,o.o8)(this.symbolLayers),thumbnail:(0,o.o8)(this.thumbnail)})}static fromSimpleLineSymbol(e){return new r({symbolLayers:new s.A([h.A.fromSimpleLineSymbol(e)])})}};(0,n._)([(0,a.MZ)({type:d,json:{type:f}})],y.prototype,"symbolLayers",void 0),(0,n._)([(0,l.e)({LineSymbol3D:"line-3d"},{readOnly:!0})],y.prototype,"type",void 0),y=r=(0,n._)([(0,c.$)("esri.symbols.LineSymbol3D")],y);const m=y},28107:(e,t,i)=>{"use strict";i.d(t,{A:()=>S});var r=i(82392),n=i(23572),s=i(81482),o=(i(6273),i(80861),i(67498),i(85716)),a=i(26325),l=i(93814),c=i(14755),h=i(84977),u=i(8636),p=i(75190);let d=class extends((0,c.O)(h.oY)){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return null!=e&&e.placement===this.placement&&e.style===this.style&&(null==this.color&&null==e.color||null!=this.color&&null!=e.color&&this.color.toJSON()===e.color.toJSON())}};(0,r._)([(0,s.MZ)({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],d.prototype,"type",void 0),(0,r._)([(0,s.MZ)({type:p.x,json:{default:"begin-end",write:!0}})],d.prototype,"placement",void 0),(0,r._)([(0,s.MZ)({type:p.z,json:{default:"arrow",write:!0}})],d.prototype,"style",void 0),(0,r._)([(0,s.MZ)({type:l.A,json:{type:[u.jz],default:null,write:!0}})],d.prototype,"color",void 0),d=(0,r._)([(0,a.$)("esri.symbols.LineStyleMarker3D")],d);const f=d;var y,m=i(81327),g=i(31656),v=i(53182),_=i(66215),b=i(30361),w=i(13665),M=i(41394);let T=y=class extends m.A{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=(0,n.PN)(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:null!=this.material?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:null!=this.pattern?this.pattern.clone():null,marker:null!=this.marker?this.marker.clone():null};return new y(e)}static fromSimpleLineSymbol(e){const t={enabled:!0,size:e.width??(0,n.PN)(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style&&"inside-frame"!==e.style?new g.A({style:e.style}):null,material:new w.N({color:(e.color||_.ON).clone()}),marker:e.marker?new f({placement:e.marker.placement,style:e.marker.style,color:e.marker.color?.clone()??null}):null};return new y(t)}};(0,r._)([(0,s.MZ)({type:w.N,json:{write:!0}})],T.prototype,"material",void 0),(0,r._)([(0,o.e)({Line:"line"},{readOnly:!0})],T.prototype,"type",void 0),(0,r._)([(0,s.MZ)({type:M.e,json:{write:!0,default:"miter"}})],T.prototype,"join",void 0),(0,r._)([(0,s.MZ)({type:M.M4,json:{write:!0,default:"butt"}})],T.prototype,"cap",void 0),(0,r._)([(0,s.MZ)(b.p)],T.prototype,"size",void 0),(0,r._)([(0,s.MZ)(v.v)],T.prototype,"pattern",void 0),(0,r._)([(0,s.MZ)({types:{key:"type",base:f,typeMap:{style:f}},json:{write:!0}})],T.prototype,"marker",void 0),T=y=(0,r._)([(0,a.$)("esri.symbols.LineSymbol3DLayer")],T);const S=T},47065:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var r=i(82392),n=i(23572),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),a=i(999);let l=class extends a.A{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};(0,r._)([(0,s.MZ)({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],l.prototype,"angle",void 0),(0,r._)([(0,s.MZ)({type:["simple-marker","picture-marker"],readOnly:!0})],l.prototype,"type",void 0),(0,r._)([(0,s.MZ)({type:Number,cast:n.cr,json:{write:!0}})],l.prototype,"xoffset",void 0),(0,r._)([(0,s.MZ)({type:Number,cast:n.cr,json:{write:!0}})],l.prototype,"yoffset",void 0),(0,r._)([(0,s.MZ)({type:Number,cast:e=>"auto"===e?e:(0,n.cr)(e),json:{write:!0}})],l.prototype,"size",void 0),l=(0,r._)([(0,o.$)("esri.symbols.MarkerSymbol")],l);const c=l},56173:(e,t,i)=>{"use strict";i.d(t,{A:()=>f});var r,n=i(82392),s=i(58842),o=i(15565),a=i(81482),l=(i(6273),i(80861),i(85716)),c=i(26325),h=i(58720),u=i(62932);const p=s.A.ofType({base:null,key:"type",typeMap:{fill:h.A}});let d=r=class extends u.A{constructor(e){super(e),this.symbolLayers=new p,this.type="mesh-3d"}clone(){return new r({styleOrigin:(0,o.o8)(this.styleOrigin),symbolLayers:(0,o.o8)(this.symbolLayers),thumbnail:(0,o.o8)(this.thumbnail)})}static fromSimpleFillSymbol(e){return new r({symbolLayers:new s.A([h.A.fromSimpleFillSymbol(e)])})}};(0,n._)([(0,a.MZ)({type:p})],d.prototype,"symbolLayers",void 0),(0,n._)([(0,l.e)({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],d.prototype,"type",void 0),d=r=(0,n._)([(0,c.$)("esri.symbols.MeshSymbol3D")],d);const f=d},34450:(e,t,i)=>{"use strict";i.d(t,{A:()=>y});var r,n=i(82392),s=i(81482),o=(i(6273),i(80861),i(67498),i(85716)),a=i(26325),l=i(81327),c=i(73962),h=i(73783);let u=r=class extends h.A{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new r({x:this.x,y:this.y,z:this.z})}};(0,n._)([(0,s.MZ)({type:Number})],u.prototype,"x",void 0),(0,n._)([(0,s.MZ)({type:Number})],u.prototype,"y",void 0),(0,n._)([(0,s.MZ)({type:Number})],u.prototype,"z",void 0),u=r=(0,n._)([(0,a.$)("esri.symbols.support.Symbol3DAnchorPosition3D")],u);var p,d=i(13665);let f=p=class extends l.A{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new p({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition?.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material?.clone()??null,castShadows:this.castShadows,resource:this.resource?.clone(),width:this.width})}get isPrimitive(){return!this.resource||"string"!=typeof this.resource.href}};(0,n._)([(0,s.MZ)({type:d.N,json:{write:!0}})],f.prototype,"material",void 0),(0,n._)([(0,s.MZ)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],f.prototype,"castShadows",void 0),(0,n._)([(0,s.MZ)({type:c.E,json:{write:!0}})],f.prototype,"resource",void 0),(0,n._)([(0,o.e)({Object:"object"},{readOnly:!0})],f.prototype,"type",void 0),(0,n._)([(0,s.MZ)({type:Number,json:{write:!0}})],f.prototype,"width",void 0),(0,n._)([(0,s.MZ)({type:Number,json:{write:!0}})],f.prototype,"height",void 0),(0,n._)([(0,s.MZ)({type:Number,json:{write:!0}})],f.prototype,"depth",void 0),(0,n._)([(0,o.e)({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),(0,s.MZ)({json:{default:"origin"}})],f.prototype,"anchor",void 0),(0,n._)([(0,s.MZ)({type:u,json:{type:[Number],read:{reader:e=>new u({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],f.prototype,"anchorPosition",void 0),(0,n._)([(0,s.MZ)({type:Number,json:{write:!0}})],f.prototype,"heading",void 0),(0,n._)([(0,s.MZ)({type:Number,json:{write:!0}})],f.prototype,"tilt",void 0),(0,n._)([(0,s.MZ)({type:Number,json:{write:!0}})],f.prototype,"roll",void 0),(0,n._)([(0,s.MZ)({readOnly:!0})],f.prototype,"isPrimitive",null),f=p=(0,n._)([(0,a.$)("esri.symbols.ObjectSymbol3DLayer")],f);const y=f},61842:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var r,n=i(82392),s=i(81482),o=(i(6273),i(80861),i(67498),i(85716)),a=i(25376),l=i(26325),c=i(81327),h=i(13665),u=i(41394);let p=r=class extends c.A{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return null!=e?e:null==t.height&&null!=t.size?t.size:void 0}readHeight(e,t){return null!=e?e:null==t.width&&null!=t.size?t.size:void 0}clone(){return new r({enabled:this.enabled,material:null!=this.material?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};(0,n._)([(0,s.MZ)({type:h.N,json:{write:!0}})],p.prototype,"material",void 0),(0,n._)([(0,s.MZ)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],p.prototype,"castShadows",void 0),(0,n._)([(0,o.e)({Path:"path"},{readOnly:!0})],p.prototype,"type",void 0),(0,n._)([(0,s.MZ)({type:["circle","quad"],json:{write:!0,default:"circle"}})],p.prototype,"profile",void 0),(0,n._)([(0,s.MZ)({type:u.e,json:{write:!0,default:"miter"}})],p.prototype,"join",void 0),(0,n._)([(0,s.MZ)({type:u.Nv,json:{write:!0,default:"butt"}})],p.prototype,"cap",void 0),(0,n._)([(0,s.MZ)({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],p.prototype,"width",void 0),(0,n._)([(0,a.w)("width",["width","size","height"])],p.prototype,"readWidth",null),(0,n._)([(0,s.MZ)({type:Number,json:{write:!0}})],p.prototype,"height",void 0),(0,n._)([(0,a.w)("height",["height","size","width"])],p.prototype,"readHeight",null),(0,n._)([(0,s.MZ)({type:["center","bottom","top"],json:{write:!0,default:"center"}})],p.prototype,"anchor",void 0),(0,n._)([(0,s.MZ)({type:["heading","all"],json:{write:!0,default:"all"}})],p.prototype,"profileRotation",void 0),p=r=(0,n._)([(0,l.$)("esri.symbols.PathSymbol3DLayer")],p);const d=p},11455:(e,t,i)=>{"use strict";i.d(t,{A:()=>f});var r,n=i(82392),s=i(15565),o=i(23572),a=i(81482),l=(i(6273),i(80861),i(85716)),c=i(25376),h=i(26325),u=i(47065),p=i(34513);let d=r=class extends u.A{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,i){if(e&&"string"!=typeof e&&null==e.imageData)return e;const r={};return e&&(r.url=e),null!=t&&(r.width=(0,o.cr)(t)),null!=i&&(r.height=(0,o.cr)(i)),r}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new r({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",(0,s.o8)(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};(0,n._)([(0,a.MZ)({json:{write:!1}})],d.prototype,"color",void 0),(0,n._)([(0,l.e)({esriPMS:"picture-marker"},{readOnly:!0})],d.prototype,"type",void 0),(0,n._)([(0,a.MZ)(p.ku)],d.prototype,"url",void 0),(0,n._)([(0,a.MZ)(p.k7)],d.prototype,"source",void 0),(0,n._)([(0,a.MZ)({type:Number,cast:o.cr,json:{write:!0}})],d.prototype,"height",void 0),(0,n._)([(0,c.w)("height",["height","size"])],d.prototype,"readHeight",null),(0,n._)([(0,a.MZ)({type:Number,cast:o.cr,json:{write:!0}})],d.prototype,"width",void 0),(0,n._)([(0,a.MZ)({json:{write:!1}})],d.prototype,"size",void 0),d=r=(0,n._)([(0,h.$)("esri.symbols.PictureMarkerSymbol")],d);const f=d},12862:(e,t,i)=>{"use strict";i.d(t,{A:()=>b});var r,n=i(82392),s=i(93814),o=i(58842),a=i(15565),l=i(81482),c=(i(6273),i(80861),i(85716)),h=i(26325),u=i(65076),p=i(34450),d=i(62932),f=i(31873),y=i(884),m=i(97160),g=i(20593);const v=o.A.ofType({base:null,key:"type",typeMap:{icon:u.A,object:p.A,text:f.A}});let _=r=class extends d.A{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new v,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return(0,y.LH)(this)}hasVisibleVerticalOffset(){return(0,y.Yq)(this)}clone(){return new r({verticalOffset:(0,a.o8)(this.verticalOffset),callout:(0,a.o8)(this.callout),styleOrigin:(0,a.o8)(this.styleOrigin),symbolLayers:(0,a.o8)(this.symbolLayers),thumbnail:(0,a.o8)(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new r({symbolLayers:new o.A([u.A.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new r({symbolLayers:new o.A([u.A.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){const t=e.data?.symbol?.type;if("CIMPointSymbol"!==t)return null;const i=e.data.symbol;return new r(i?.callout?{symbolLayers:new o.A([u.A.fromCIMSymbol(e)]),callout:new m.A({size:.5,color:new s.A([0,0,0])}),verticalOffset:new g.A({screenLength:40})}:{symbolLayers:new o.A([u.A.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new r({symbolLayers:new o.A([f.A.fromTextSymbol(e)])})}};(0,n._)([(0,l.MZ)({type:g.A,json:{write:!0}})],_.prototype,"verticalOffset",void 0),(0,n._)([(0,l.MZ)(y.oG)],_.prototype,"callout",void 0),(0,n._)([(0,l.MZ)({type:v,json:{origins:{"web-scene":{write:!0}}}})],_.prototype,"symbolLayers",void 0),(0,n._)([(0,c.e)({PointSymbol3D:"point-3d"},{readOnly:!0})],_.prototype,"type",void 0),_=r=(0,n._)([(0,h.$)("esri.symbols.PointSymbol3D")],_);const b=_},7998:(e,t,i)=>{"use strict";i.d(t,{A:()=>T});var r,n=i(82392),s=i(58842),o=i(61090),a=i(15565),l=i(80861),c=i(61985),h=i(81482),u=(i(6273),i(85716)),p=i(26325),d=i(12508),f=i(58720),y=i(65076),m=i(28107),g=i(34450),v=i(62932),_=i(31873),b=i(70538);const w=s.A.ofType({base:null,key:"type",typeMap:{extrude:d.A,fill:f.A,icon:y.A,line:m.A,object:g.A,text:_.A,water:b.A}});let M=r=class extends v.A{constructor(e){super(e),this.symbolLayers=new w,this.type="polygon-3d"}initialize(){const e=e=>{"line"===e.type&&(0,o.io)(l.A.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),"text"===e.type&&(0,o.io)(l.A.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles((0,c.on)((()=>this.symbolLayers),"after-add",(({item:t})=>e(t)),c.OH))}clone(){return new r({styleOrigin:(0,a.o8)(this.styleOrigin),symbolLayers:(0,a.o8)(this.symbolLayers),thumbnail:(0,a.o8)(this.thumbnail)})}static fromJSON(e){const t=new r;if(t.read(e),2===t.symbolLayers.length&&"fill"===t.symbolLayers.at(0).type&&"line"===t.symbolLayers.at(1).type){const i=t.symbolLayers.at(0),r=t.symbolLayers.at(1);!r.enabled||e.symbolLayers?.[1]&&!1===e.symbolLayers[1].enable||(i.outline={size:r.size,color:null!=r.material?r.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new r({symbolLayers:new s.A([f.A.fromSimpleFillSymbol(e)])})}};(0,n._)([(0,h.MZ)({type:w,json:{write:!0}})],M.prototype,"symbolLayers",void 0),(0,n._)([(0,u.e)({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],M.prototype,"type",void 0),M=r=(0,n._)([(0,p.$)("esri.symbols.PolygonSymbol3D")],M);const T=M},55736:(e,t,i)=>{"use strict";i.d(t,{A:()=>y});var r,n=i(82392),s=i(93814),o=i(1817),a=i(15565),l=i(81482),c=(i(6273),i(80861),i(85716)),h=i(26325),u=i(90818),p=i(24826);const d=new o.J({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let f=r=class extends u.A{constructor(...e){super(...e),this.color=new s.A([0,0,0,.25]),this.outline=new p.A,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,i){if(e&&"string"!=typeof e)return e;const r={};return e&&(r.style=e),t&&(r.outline=t),i&&(r.color=i),r}clone(){return new r({color:(0,a.o8)(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};(0,n._)([(0,l.MZ)()],f.prototype,"color",void 0),(0,n._)([(0,l.MZ)()],f.prototype,"outline",void 0),(0,n._)([(0,c.e)({esriSFS:"simple-fill"},{readOnly:!0})],f.prototype,"type",void 0),(0,n._)([(0,l.MZ)({type:d.apiValues,json:{read:d.read,write:d.write}})],f.prototype,"style",void 0),f=r=(0,n._)([(0,h.$)("esri.symbols.SimpleFillSymbol")],f);const y=f},24826:(e,t,i)=>{"use strict";i.d(t,{A:()=>S});var r=i(82392),n=i(1817),s=i(15565),o=i(23572),a=i(81482),l=(i(6273),i(80861),i(85716)),c=i(26325),h=(i(67498),i(999));let u=class extends h.A{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};(0,r._)([(0,l.e)({esriSLS:"simple-line"},{readOnly:!0})],u.prototype,"type",void 0),(0,r._)([(0,a.MZ)({type:Number,cast:o.cr,json:{write:!0}})],u.prototype,"width",void 0),u=(0,r._)([(0,c.$)("esri.symbols.LineSymbol")],u);const p=u;var d,f=i(93814),y=i(84977),m=i(25376),g=i(48524),v=i(75190);let _=d=class extends y.oY{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,i,r){t[i]="web-map"===r?.origin?"arrow":e}set color(e){this._set("color",e)}readColor(e){return null!=e?.[0]?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,i,r){"web-map"===r?.origin||(t[i]=e)}clone(){return new d({color:(0,s.o8)(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};(0,r._)([(0,a.MZ)({type:["begin","end","begin-end"],json:{write:!0}})],_.prototype,"placement",void 0),(0,r._)([(0,l.e)({"line-marker":"line-marker"},{readOnly:!0}),(0,a.MZ)({json:{origins:{"web-map":{write:!1}}}})],_.prototype,"type",void 0),(0,r._)([(0,a.MZ)({type:v.z})],_.prototype,"style",void 0),(0,r._)([(0,g.K)("style")],_.prototype,"writeStyle",null),(0,r._)([(0,a.MZ)({type:f.A,value:null,json:{write:{allowNull:!0}}})],_.prototype,"color",null),(0,r._)([(0,m.w)("color")],_.prototype,"readColor",null),(0,r._)([(0,g.K)("color")],_.prototype,"writeColor",null),_=d=(0,r._)([(0,c.$)("esri.symbols.LineSymbolMarker")],_);const b=_;var w;const M=new n.J({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let T=w=class extends p{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,i,r,n,s){if(e&&"string"!=typeof e)return e;const a={};return null!=e&&(a.style=e),null!=t&&(a.color=t),null!=i&&(a.width=(0,o.cr)(i)),null!=r&&(a.cap=r),null!=n&&(a.join=n),null!=s&&(a.miterLimit=(0,o.cr)(s)),a}clone(){return new w({color:(0,s.o8)(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};(0,r._)([(0,l.e)({esriSLS:"simple-line"},{readOnly:!0})],T.prototype,"type",void 0),(0,r._)([(0,a.MZ)({type:M.apiValues,json:{read:M.read,write:M.write}})],T.prototype,"style",void 0),(0,r._)([(0,a.MZ)({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,i)=>({enabled:"round"!==e&&null==i?.origin})}}})],T.prototype,"cap",void 0),(0,r._)([(0,a.MZ)({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,i)=>({enabled:"round"!==e&&null==i?.origin})}}})],T.prototype,"join",void 0),(0,r._)([(0,a.MZ)({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":b}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],T.prototype,"marker",void 0),(0,r._)([(0,a.MZ)({type:Number,json:{read:!1,write:!1}})],T.prototype,"miterLimit",void 0),T=w=(0,r._)([(0,c.$)("esri.symbols.SimpleLineSymbol")],T);const S=T},68231:(e,t,i)=>{"use strict";i.d(t,{A:()=>g});var r,n=i(82392),s=i(93814),o=i(1817),a=i(15565),l=i(23572),c=i(81482),h=(i(6273),i(80861),i(85716)),u=i(26325),p=i(48524),d=i(47065),f=i(24826);const y=new o.J({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let m=r=class extends d.A{constructor(...e){super(...e),this.color=new s.A([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new f.A}normalizeCtorArgs(e,t,i,r){if(e&&"string"!=typeof e)return e;const n={};return e&&(n.style=e),null!=t&&(n.size=(0,l.cr)(t)),i&&(n.outline=i),r&&(n.color=r),n}writeColor(e,t){e&&"x"!==this.style&&"cross"!==this.style&&(t.color=e.toJSON()),null===e&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new r({angle:this.angle,color:(0,a.o8)(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};(0,n._)([(0,c.MZ)()],m.prototype,"color",void 0),(0,n._)([(0,p.K)("color")],m.prototype,"writeColor",null),(0,n._)([(0,h.e)({esriSMS:"simple-marker"},{readOnly:!0})],m.prototype,"type",void 0),(0,n._)([(0,c.MZ)()],m.prototype,"size",void 0),(0,n._)([(0,c.MZ)({type:y.apiValues,json:{read:y.read,write:y.write}})],m.prototype,"style",void 0),(0,n._)([(0,c.MZ)({type:String,json:{write:!0}})],m.prototype,"path",null),(0,n._)([(0,c.MZ)({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":f.A}},json:{default:null,write:!0}})],m.prototype,"outline",void 0),m=r=(0,n._)([(0,u.$)("esri.symbols.SimpleMarkerSymbol")],m);const g=m},999:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var r=i(82392),n=i(93814),s=i(1817),o=i(84977),a=i(81482),l=(i(6273),i(80861),i(67498),i(25376)),c=i(26325);const h=new s.J({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let u=0,p=class extends o.oY{constructor(e){super(e),this.id="sym"+u++,this.type=null,this.color=new n.A([0,0,0,1])}readColor(e){return null!=e?.[0]?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};(0,r._)([(0,a.MZ)({type:h.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:h.write}}})],p.prototype,"type",void 0),(0,r._)([(0,a.MZ)({type:n.A,json:{write:{allowNull:!0}}})],p.prototype,"color",void 0),(0,r._)([(0,l.w)("color")],p.prototype,"readColor",null),p=(0,r._)([(0,c.$)("esri.symbols.Symbol")],p);const d=p},62932:(e,t,i)=>{"use strict";i.d(t,{A:()=>N});var r=i(82392),n=i(58842),s=i(48),o=i(80861),a=i(19759),l=i(97629),c=i(81482),h=i(77380),u=(i(67498),i(6273),i(25376)),p=i(26325),d=i(48524),f=i(83382),y=i(55714),m=i(12508),g=i(58720),v=i(65076),_=i(28107),b=i(34450),w=i(61842),M=i(999),T=i(81327),S=i(31873),A=i(70538),E=i(14176),x=i(51431);const I={icon:v.A,object:b.A,line:_.A,path:w.A,fill:g.A,extrude:m.A,text:S.A,water:A.A},C=n.A.ofType({base:T.A,key:"type",typeMap:I,errorContext:"symbol-layer"});let k=class extends M.A{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const t=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,i=t?.type,r=i||n.A;this._set("symbolLayers",new r)}get color(){return null}set color(e){this.constructed&&o.A.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){(0,s.V)(e,this._get("symbolLayers"))}readStyleOrigin(e,t,i){if(e.styleUrl&&e.name){const t=(0,y.f)(e.styleUrl,i);return new E.A({styleUrl:t,name:e.name})}if(e.styleName&&e.name)return new E.A({portal:i?.portal||f.A.getDefault(),styleName:e.styleName,name:e.name});i?.messages&&i.messages.push(new l.A("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:e}))}writeStyleOrigin(e,t,i,r){if(e.styleUrl&&e.name){let i=(0,y.t)(e.styleUrl,r);(0,a.oP)(i)&&(i=(0,a.S8)(i)),t.styleOrigin={styleUrl:i,name:e.name}}else e.styleName&&e.name&&(e.portal&&r?.portal&&!(0,a.ut)(e.portal.restUrl,r.portal.restUrl)?r?.messages&&r.messages.push(new l.A("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof T.A||e&&I[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};(0,r._)([(0,c.MZ)({json:{read:!1,write:!1}})],k.prototype,"color",null),(0,r._)([(0,c.MZ)({type:C,nonNullable:!0,json:{write:!0}}),(0,h.w)(s.H)],k.prototype,"symbolLayers",null),(0,r._)([(0,c.MZ)({type:E.A})],k.prototype,"styleOrigin",void 0),(0,r._)([(0,u.w)("styleOrigin")],k.prototype,"readStyleOrigin",null),(0,r._)([(0,d.K)("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],k.prototype,"writeStyleOrigin",null),(0,r._)([(0,c.MZ)({type:x.V,json:{read:!1}})],k.prototype,"thumbnail",void 0),(0,r._)([(0,c.MZ)({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],k.prototype,"type",void 0),k=(0,r._)([(0,p.$)("esri.symbols.Symbol3D")],k);const N=k},81327:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var r=i(82392),n=i(84977),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),a=i(48524);let l=class extends n.oY{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,t,i){e||(t[i]=e)}};(0,r._)([(0,s.MZ)({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],l.prototype,"enabled",void 0),(0,r._)([(0,a.K)("enabled")],l.prototype,"writeEnabled",null),(0,r._)([(0,s.MZ)({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],l.prototype,"type",void 0),l=(0,r._)([(0,o.$)("esri.symbols.Symbol3DLayer")],l);const c=l},31864:(e,t,i)=>{"use strict";i.d(t,{A:()=>g});var r,n=i(82392),s=i(93814),o=i(15565),a=i(23572),l=i(81482),c=i(77380),h=i(85716),u=i(26325),p=i(48524),d=i(70842),f=i(999),y=i(70227);let m=r=class extends f.A{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new d.A,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,i){if(e&&"string"!=typeof e)return e;const r={};return e&&(r.text=e),t&&(r.font=t),i&&(r.color=i),r}writeLineWidth(e,t,i,r){r&&"string"!=typeof r?r.origin:t[i]=e}castLineWidth(e){return(0,a.cr)(e)}writeLineHeight(e,t,i,r){r&&"string"!=typeof r?r.origin:t[i]=e}clone(){return new r({angle:this.angle,backgroundColor:(0,o.o8)(this.backgroundColor),borderLineColor:(0,o.o8)(this.borderLineColor),borderLineSize:this.borderLineSize,color:(0,o.o8)(this.color),font:this.font&&this.font.clone(),haloColor:(0,o.o8)(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor?.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor?.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};(0,n._)([(0,l.MZ)({type:s.A,json:{write:!0}})],m.prototype,"backgroundColor",void 0),(0,n._)([(0,l.MZ)({type:s.A,json:{write:!0}})],m.prototype,"borderLineColor",void 0),(0,n._)([(0,l.MZ)({type:Number,json:{write:!0},cast:a.cr})],m.prototype,"borderLineSize",void 0),(0,n._)([(0,l.MZ)({type:d.A,json:{write:!0}})],m.prototype,"font",void 0),(0,n._)([(0,l.MZ)({...y.rM,json:{write:!0}})],m.prototype,"horizontalAlignment",void 0),(0,n._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],m.prototype,"kerning",void 0),(0,n._)([(0,l.MZ)({type:s.A,json:{write:!0}})],m.prototype,"haloColor",void 0),(0,n._)([(0,l.MZ)({type:Number,cast:a.cr,json:{write:!0}})],m.prototype,"haloSize",void 0),(0,n._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],m.prototype,"rightToLeft",void 0),(0,n._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],m.prototype,"rotated",void 0),(0,n._)([(0,l.MZ)({type:String,json:{write:!0}})],m.prototype,"text",void 0),(0,n._)([(0,h.e)({esriTS:"text"},{readOnly:!0})],m.prototype,"type",void 0),(0,n._)([(0,l.MZ)({...y.x0,json:{write:!0}})],m.prototype,"verticalAlignment",void 0),(0,n._)([(0,l.MZ)({type:Number,cast:a.cr,json:{write:!0}})],m.prototype,"xoffset",void 0),(0,n._)([(0,l.MZ)({type:Number,cast:a.cr,json:{write:!0}})],m.prototype,"yoffset",void 0),(0,n._)([(0,l.MZ)({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],m.prototype,"angle",void 0),(0,n._)([(0,l.MZ)({type:Number,json:{write:!0}})],m.prototype,"width",void 0),(0,n._)([(0,l.MZ)({type:Number})],m.prototype,"lineWidth",void 0),(0,n._)([(0,p.K)("lineWidth")],m.prototype,"writeLineWidth",null),(0,n._)([(0,c.w)("lineWidth")],m.prototype,"castLineWidth",null),(0,n._)([(0,l.MZ)(y.Tb)],m.prototype,"lineHeight",void 0),(0,n._)([(0,p.K)("lineHeight")],m.prototype,"writeLineHeight",null),m=r=(0,n._)([(0,u.$)("esri.symbols.TextSymbol")],m);const g=m},31873:(e,t,i)=>{"use strict";i.d(t,{A:()=>T});var r,n=i(82392),s=i(15565),o=i(81482),a=(i(6273),i(80861),i(85716)),l=i(26325),c=i(48524),h=i(70842),u=i(81327),p=i(30361),d=i(93814),f=i(84977);let y=r=class extends f.oY{constructor(){super(...arguments),this.color=new d.A([0,0,0,1]),this.size=0}clone(){const e={color:(0,s.o8)(this.color),size:this.size};return new r(e)}};(0,n._)([(0,o.MZ)(p.E)],y.prototype,"color",void 0),(0,n._)([(0,o.MZ)(p.p)],y.prototype,"size",void 0),y=r=(0,n._)([(0,l.$)("esri.symbols.support.Symbol3DHalo")],y);var m=i(13665),g=i(14755);i(67498);let v=class extends((0,g.O)(f.oY)){constructor(e){super(e),this.color=null}};(0,n._)([(0,o.MZ)(p.E)],v.prototype,"color",void 0),v=(0,n._)([(0,l.$)("esri.symbols.support.Symbol3DTextBackground")],v);var _,b=i(70227);let w=_=class extends u.A{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){null!=e&&null!=this._userSize&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,i,r){const n={...r,textSymbol3D:!0};t.font=e.write({},n),delete t.font.size}get size(){return null!=this._userSize?this._userSize:null!=this.font?.size?this.font.size:9}set size(e){this._userSize=e,null!=this.font&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new _({enabled:this.enabled,font:this.font&&(0,s.o8)(this.font),halo:this.halo&&(0,s.o8)(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:null!=this.material?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:(0,s.o8)(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new _({font:null!=e.font?e.font.clone():new h.A,halo:M(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new m.N({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new v({color:e.backgroundColor.clone()}):null})}};function M(e,t){return e&&null!=t&&t>0?new y({color:(0,s.o8)(e),size:t}):null}(0,n._)([(0,o.MZ)({type:h.A,json:{write:!0}})],w.prototype,"font",null),(0,n._)([(0,c.K)("font")],w.prototype,"writeFont",null),(0,n._)([(0,o.MZ)({type:y,json:{write:!0}})],w.prototype,"halo",void 0),(0,n._)([(0,o.MZ)({...b.rM,json:{default:"center",write:!0}})],w.prototype,"horizontalAlignment",void 0),(0,n._)([(0,o.MZ)({...b.Tb,json:{default:1,write:!0}})],w.prototype,"lineHeight",void 0),(0,n._)([(0,o.MZ)({type:m.N,json:{write:!0}})],w.prototype,"material",void 0),(0,n._)([(0,o.MZ)({type:v,json:{write:!0}})],w.prototype,"background",void 0),(0,n._)([(0,o.MZ)(p.p)],w.prototype,"size",null),(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],w.prototype,"text",void 0),(0,n._)([(0,a.e)({Text:"text"},{readOnly:!0})],w.prototype,"type",void 0),(0,n._)([(0,o.MZ)({...b.x0,json:{default:"baseline",write:!0}})],w.prototype,"verticalAlignment",void 0),w=_=(0,n._)([(0,l.$)("esri.symbols.TextSymbol3DLayer")],w);const T=w},70538:(e,t,i)=>{"use strict";i.d(t,{A:()=>f});var r,n=i(82392),s=i(93814),o=i(15565),a=i(81482),l=i(8636),c=i(85716),h=i(26325),u=i(81327);let p=r=class extends u.A{constructor(e){super(e),this.color=d.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new r({color:(0,o.o8)(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};(0,n._)([(0,a.MZ)({type:s.A,nonNullable:!0,json:{type:[l.jz],write:(e,t,i)=>t[i]=e.toArray(s.A.AlphaMode.UNLESS_OPAQUE),default:()=>d.clone(),defaultEquals:e=>e.toCss(!0)===d.toCss(!0)}})],p.prototype,"color",void 0),(0,n._)([(0,c.e)({Water:"water"},{readOnly:!0})],p.prototype,"type",void 0),(0,n._)([(0,a.MZ)({type:["small","medium","large"],json:{write:!0,default:"medium"}})],p.prototype,"waterbodySize",void 0),(0,n._)([(0,a.MZ)({type:Number,json:{write:!0,default:null}})],p.prototype,"waveDirection",void 0),(0,n._)([(0,a.MZ)({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],p.prototype,"waveStrength",void 0),p=r=(0,n._)([(0,h.$)("esri.symbols.WaterSymbol3DLayer")],p);const d=new s.A([0,119,190]),f=p},43532:(e,t,i)=>{"use strict";i.d(t,{A:()=>y});var r,n=i(82392),s=i(80861),o=i(37623),a=i(81482),l=(i(6273),i(67498),i(85716)),c=i(26325),h=i(83382),u=i(55714),p=i(999),d=i(51431);let f=r=class extends p.A{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=null!=this.portal?this.portal:h.A.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t?.portal,super.read(e,t)}clone(){return new r({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const r=null!=t?t.cache:null,n=r?this._fetchCacheKey:null;if(null!=r){const e=n&&r.get(n);if(e)return e.clone()}const{resolveWebStyleSymbol:a}=await Promise.resolve().then(i.bind(i,43983));(0,o.Te)(t);const l=a(this,{portal:this.portal},e,t);l.catch((e=>{s.A.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",e)}));const c=await l;return"webRef"===e&&"point-3d"===c.type||"cimRef"===e&&"cim"===c.type?(null!=r&&r.set(n,c.clone()),c):null}};(0,n._)([(0,a.MZ)({json:{write:!1}})],f.prototype,"color",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],f.prototype,"styleName",void 0),(0,n._)([(0,a.MZ)({type:h.A,json:{write:!1}})],f.prototype,"portal",void 0),(0,n._)([(0,a.MZ)({type:String,json:{read:u.r,write:u.w}})],f.prototype,"styleUrl",void 0),(0,n._)([(0,a.MZ)({type:d.V,json:{read:!1}})],f.prototype,"thumbnail",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],f.prototype,"name",void 0),(0,n._)([(0,l.e)({styleSymbolReference:"web-style"},{readOnly:!0})],f.prototype,"type",void 0),(0,n._)([(0,a.MZ)()],f.prototype,"_fetchCacheKey",null),f=r=(0,n._)([(0,c.$)("esri.symbols.WebStyleSymbol")],f);const y=f},28566:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var r=i(82392),n=i(84977),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325));let a=class extends n.oY{constructor(e){super(e),this.visible=!0}clone(){}};(0,r._)([(0,s.MZ)({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],a.prototype,"type",void 0),(0,r._)([(0,s.MZ)({readOnly:!0})],a.prototype,"visible",void 0),a=(0,r._)([(0,o.$)("esri.symbols.callouts.Callout3D")],a);const l=a},97160:(e,t,i)=>{"use strict";i.d(t,{A:()=>y});var r,n=i(82392),s=i(93814),o=i(15565),a=i(23572),l=i(81482),c=(i(6273),i(80861),i(85716)),h=i(26325),u=i(28566),p=i(1982),d=i(30361);let f=r=class extends u.A{constructor(e){super(e),this.type="line",this.color=new s.A([0,0,0,1]),this.size=(0,a.PN)(1),this.border=null}get visible(){return this.size>0&&null!=this.color&&this.color.a>0}clone(){return new r({color:(0,o.o8)(this.color),size:this.size,border:(0,o.o8)(this.border)})}};(0,n._)([(0,c.e)({line:"line"})],f.prototype,"type",void 0),(0,n._)([(0,l.MZ)(d.E)],f.prototype,"color",void 0),(0,n._)([(0,l.MZ)(d.p)],f.prototype,"size",void 0),(0,n._)([(0,l.MZ)({type:p.A,json:{write:!0}})],f.prototype,"border",void 0),(0,n._)([(0,l.MZ)({readOnly:!0})],f.prototype,"visible",null),f=r=(0,n._)([(0,h.$)("esri.symbols.callouts.LineCallout3D")],f);const y=f},1982:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var r,n=i(82392),s=i(93814),o=i(84977),a=i(15565),l=i(81482),c=(i(6273),i(80861),i(26325)),h=i(30361);let u=r=class extends o.oY{constructor(e){super(e),this.color=new s.A("white")}clone(){return new r({color:(0,a.o8)(this.color)})}};(0,n._)([(0,l.MZ)(h.E)],u.prototype,"color",void 0),u=r=(0,n._)([(0,c.$)("esri.symbols.callouts.LineCallout3DBorder")],u);const p=u},884:(e,t,i)=>{"use strict";i.d(t,{Ie:()=>l,LH:()=>o,YX:()=>a,Yq:()=>s,oG:()=>c});var r=i(28566),n=i(97160);function s(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||null!=t.maxWorldLength&&t.maxWorldLength<=0)}function o(e){if(!e)return!1;if(!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!s(e)}function a(e){return"point-3d"===e.type||"label-3d"===e.type}function l(e){return"center"===e.horizontalAlignment}const c={types:{key:"type",base:r.A,typeMap:{line:n.A}},json:{write:!0}}},9427:(e,t,i)=>{"use strict";i.d(t,{$:()=>h});var r=i(93814),n=i(60861),s=i(15565),o=i(83911),a=i(77234),l=i(43996);const c=e=>{if(!e)return[0,0,0,0];const{r:t,g:i,b:r,a:n}=e;return[t,i,r,255*n]};class h{static findApplicableOverrides(e,t,i){if(e&&t){if(e.primitiveName){let r=!1;for(const t of i)if(t.primitiveName===e.primitiveName){r=!0;break}if(!r)for(const r of t)r.primitiveName===e.primitiveName&&i.push(r)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const r of e.effects)h.findApplicableOverrides(r,t,i);if(e.symbolLayers)for(const r of e.symbolLayers)h.findApplicableOverrides(r,t,i);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects)for(const r of e.effects)h.findApplicableOverrides(r,t,i);if(e.markerPlacement&&h.findApplicableOverrides(e.markerPlacement,t,i),"CIMVectorMarker"===e.type){if(e.markerGraphics)for(const r of e.markerGraphics)h.findApplicableOverrides(r,t,i),h.findApplicableOverrides(r.symbol,t,i)}else"CIMCharacterMarker"===e.type?h.findApplicableOverrides(e.symbol,t,i):"CIMHatchFill"===e.type?h.findApplicableOverrides(e.lineSymbol,t,i):"CIMPictureMarker"===e.type&&h.findApplicableOverrides(e.animatedSymbolProperties,t,i)}}}static findEffectOverrides(e,t){if(!e)return null;if("CIMGeometricEffectDashes"===e.type&&(0,a.K3)(e),!t||!e.primitiveName)return{type:"cim-effect-info",effect:e,overrides:[]};const i=e.primitiveName,r=[];for(const e of t)e.primitiveName===i&&r.push({...e,propertyName:(0,a.YF)(e.propertyName)});return{type:"cim-effect-info",effect:e,overrides:r}}static async resolveSymbolOverrides(e,t,i,r,n,o,l){if(!e?.symbol)return null;let{symbol:c,primitiveOverrides:u}=e;const p=!!u;if(!p&&!r)return c;c=(0,s.o8)(c),u=(0,s.o8)(u);let d=!0;if(t||(t={attributes:{}},d=!1),p){if(d||(u=u.filter((e=>!e.valueExpressionInfo?.expression.includes("$feature")))),l||(u=u.filter((e=>!e.valueExpressionInfo?.expression.includes("$view")))),u.length>0){const e={spatialReference:i,fields:(0,a.O2)(t.attributes),geometryType:n};await h.createRenderExpressions(u,e),h.evaluateOverrides(u,t,n??"esriGeometryPoint",o,l)}h.applyOverrides(c,u)}return r&&h.applyDictionaryTextOverrides(c,t,r,null),c}static async createRenderExpressions(e,t){const i=[];for(const r of e){const e=r.valueExpressionInfo;if(!e||h._expressionToRenderExpression.has(e.expression))continue;const n=(0,o.Ad)(e.expression,t.spatialReference,t.fields);i.push(n),n.then((t=>h._expressionToRenderExpression.set(e.expression,t)))}i.length>0&&await Promise.all(i)}static evaluateOverrides(e,t,i,r,s){const o={$view:{scale:s?.scale}};for(const s of e){s.value&&"object"==typeof s.value&&(0,n.IB)(s.value)&&("Color"===s.propertyName||"StrokeColor"===s.propertyName)&&(s.value=c(s.value));const e=s.valueExpressionInfo;if(!e)continue;const a=h._expressionToRenderExpression.get(e.expression);a&&(s.value=(0,l.A)(a,t,o,i,r))}}static applyDictionaryTextOverrides(e,t,i,r,n="Normal"){if(e?.type)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const s=e.symbolLayers;if(!s)return;for(const o of s)o&&"CIMVectorMarker"===o.type&&h.applyDictionaryTextOverrides(o,t,i,r,"CIMTextSymbol"===e.type?e.textCase:n)}break;case"CIMVectorMarker":{const n=e.markerGraphics;if(!n)return;for(const e of n)e&&h.applyDictionaryTextOverrides(e,t,i,r)}break;case"CIMMarkerGraphic":{const s=e.textString;if(s&&s.includes("[")){const o=(0,a.gQ)(s,i);e.textString=(0,a.FM)(t,o,r,n)}}}}static applyOverrides(e,t,i,r){if(e.primitiveName)for(const n of t)if(n.primitiveName===e.primitiveName){const t=(0,a.YF)(n.propertyName);if(r&&r.push({cim:e,nocapPropertyName:t,value:e[t]}),i){let t=!1;for(const r of i)r.primitiveName===e.primitiveName&&(t=!0);t||i.push(n)}null!=n.value&&(e[t]=n.value)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const n of e.effects)h.applyOverrides(n,t,i,r);if(e.symbolLayers)for(const n of e.symbolLayers)h.applyOverrides(n,t,i,r);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects)for(const n of e.effects)h.applyOverrides(n,t,i,r);if("CIMVectorMarker"===e.type&&e.markerGraphics)for(const n of e.markerGraphics)h.applyOverrides(n,t,i,r),h.applyOverrides(n.symbol,t,i,r)}}static restoreOverrides(e){for(const t of e)t.cim[t.nocapPropertyName]=t.value}static buildOverrideKey(e){let t="";for(const i of e)void 0!==i.value&&(t+=`${i.primitiveName}${i.propertyName}${JSON.stringify(i.value)}`);return t}static toValue(e,t){if("DashTemplate"===e)return t.split(" ").map((e=>Number(e)));if("Color"===e){const e=new r.A(t).toRgba();return e[3]*=255,e}return t}}h._expressionToRenderExpression=new Map},25001:(e,t,i)=>{"use strict";i.d(t,{D:()=>n,K:()=>r});const r={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderLineColor:[0,0,0,1]},n={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetX:0,offsetY:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMSolidFill:{enable:!0,colorocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:"Loop",repeatdelay:0}}},77234:(e,t,i)=>{"use strict";i.d(t,{Bu:()=>C,DW:()=>A,FM:()=>c,G9:()=>s,GV:()=>v,Go:()=>h,K3:()=>j,Kn:()=>T,MM:()=>d,MO:()=>U,Nl:()=>k,Ny:()=>_,O2:()=>N,UE:()=>L,YC:()=>z,YF:()=>R,ZO:()=>D,_1:()=>x,_H:()=>w,_W:()=>g,_d:()=>S,bs:()=>Z,e6:()=>u,gQ:()=>l,iA:()=>F,jn:()=>y,lW:()=>p,mA:()=>f,n5:()=>O,pM:()=>E,pV:()=>M,s4:()=>n,xo:()=>I,yH:()=>b,zb:()=>P,zr:()=>m});var r=i(25001);function n(e,t,i,r){return function(e){return"function"==typeof e}(e)?e(t,i,r):e}function s(e){return[e.r,e.g,e.b,e.a]}const o=" /-,\n";function a(e){let t=e.length;for(;t--;)if(!o.includes(e.charAt(t)))return!1;return!0}function l(e,t){const i=[];let r=0,n=-1;do{if(n=e.indexOf("[",r),n>=r){if(n>r){const t=e.substr(r,n-r);i.push([t,null,a(t)])}if(r=n+1,n=e.indexOf("]",r),n>=r){if(n>r){const s=t[e.substr(r,n-r)];s&&i.push([null,s,!1])}r=n+1}}}while(-1!==n);if(r<e.length-1){const t=e.substr(r);i.push([t,null,a(t)])}return i}function c(e,t,i,r){let n="",s=null;for(const r of t){const[t,o,a]=r;if(t)a?s=t:(s&&(n+=s,s=null),n+=t);else{let t=o;null!=i&&(t=U(o,i));const r=e.attributes[t];r&&(s&&(n+=s,s=null),n+=r)}}return function(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}(n,r)}function h(e,t,i,r,n,s,o=!0){const a=t/n,l=i/s,c=Math.ceil(a/2),h=Math.ceil(l/2);for(let i=0;i<s;i++)for(let u=0;u<n;u++){const p=4*(u+(o?s-i-1:i)*n);let d=0,f=0,y=0,m=0,g=0,v=0,_=0;const b=(i+.5)*l;for(let r=Math.floor(i*l);r<(i+1)*l;r++){const i=Math.abs(b-(r+.5))/h,n=(u+.5)*a,s=i*i;for(let i=Math.floor(u*a);i<(u+1)*a;i++){let o=Math.abs(n-(i+.5))/c;const a=Math.sqrt(s+o*o);a>=-1&&a<=1&&(d=2*a*a*a-3*a*a+1,d>0&&(o=4*(i+r*t),_+=d*e[o+3],y+=d,e[o+3]<255&&(d=d*e[o+3]/250),m+=d*e[o],g+=d*e[o+1],v+=d*e[o+2],f+=d))}}r[p]=m/f,r[p+1]=g/f,r[p+2]=v/f,r[p+3]=_/y}}function u(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function p(e){return e.data?.symbol??null}function d(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function f(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function y(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function m(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const g=(e,t=0)=>null==e||isNaN(e)?t:e,v=(e,t)=>e??t,_=e=>e.tintColor?u(e.tintColor):[255,255,255,1],b=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function w(){return i.e(7963).then(i.bind(i,30344))}function M(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function T(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function S(e){let t="normal",i="normal";if(e){const r=e.toLowerCase();r.includes("italic")?t="italic":r.includes("oblique")&&(t="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:t,weight:i}}function A(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function E(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=E(t);if(null!=e)return e}break;case"CIMTextSymbol":return E(e.symbol);case"CIMSolidFill":return e.color}return null}function x(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const e of t){const t=x(e);if(null!=t)return t}break}case"CIMTextSymbol":return x(e.symbol);case"CIMSolidStroke":return e.color}}function I(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=I(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return I(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function C(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function k(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function N(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const L=e=>e.includes("data:image/svg+xml");function O(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function R(e){return e?e.charAt(0).toLowerCase()+e.substring(1):e}function P(e,t,i,r,n,s){const{infos:o}=s;let a=1,l=0,c=0,h=0;for(const{offsetX:e,offsetY:t,rotation:i,size:r,frameHeight:n,rotateClockWise:s}of o)c=G(e,t,l,a,c),h=V(e,t,l,a,h),n&&(a*=r/n),l=B(i,s,l);const u=G(r,n,l,a,c),p=V(r,n,l,a,h);return{size:e*a,rotation:B(t,i,l),offsetX:u,offsetY:p}}function D(e){if(null==e)return!1;if(Array.isArray(e))return e.every((e=>D(e)));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function F(e,t){if("color"===t||"outlinecolor"===t||"backgroundcolor"===t||"borderLineColor"===t)return[...r.K[t]];const i=r.D[e];if(!i||"boolean"==typeof i[t])throw new Error(`InternalError: default value for type ${e}.`);return i[t]}function j(e){return e?.dashTemplate&&"string"==typeof e.dashTemplate&&(e.dashTemplate=e.dashTemplate.split(" ").map(Number)),e}function Z(e){if(null==e)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const e of t)if("CIMVectorMarker"===e.type)return Z(e)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const e of t)if(e.symbol)return Z(e.symbol)}}return"Normal"}function z(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers)for(const i of e.symbolLayers)if(i)switch(i.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const e=i.size??r.D.CIMVectorMarker.size;e>t&&(t=e);break}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers)for(const i of e.symbolLayers)if(i)switch(i.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const e=i.width;null!=e&&e>t&&(t=e);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(i.markerPlacement&&m(i.markerPlacement)){const e=i.size??r.D.CIMVectorMarker.size;e>t&&(t=e)}break;case"CIMPictureFill":{const e=i.height;null!=e&&e>t&&(t=e)}}return t}}}function U(e,t){if(null!==t){const i=t.get(e);return i?i.name:e}return e}function V(e,t,i,r,n){const s=i*Math.PI/180;if(s){const i=Math.cos(s);return(Math.sin(s)*e+i*t)*r+n}return t*r+n}function G(e,t,i,r,n){const s=i*Math.PI/180;return s?(Math.cos(s)*e-Math.sin(s)*t)*r+n:e*r+n}function B(e,t,i){return t?i-e:i+e}},83311:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var r=i(82392),n=i(93814),s=i(84977),o=i(15565),a=i(23572),l=i(81482),c=(i(6273),i(80861),i(26325)),h=i(30361);let u=class extends s.oY{constructor(e){super(e),this.color=new n.A([0,0,0,1]),this.extensionLength=0,this.size=(0,a.PN)(1)}clone(){}cloneProperties(){return{color:(0,o.o8)(this.color),size:this.size,extensionLength:this.extensionLength}}};(0,r._)([(0,l.MZ)({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],u.prototype,"type",void 0),(0,r._)([(0,l.MZ)(h.E)],u.prototype,"color",void 0),(0,r._)([(0,l.MZ)({...h.p,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],u.prototype,"extensionLength",void 0),(0,r._)([(0,l.MZ)(h.p)],u.prototype,"size",void 0),u=(0,r._)([(0,c.$)("esri.symbols.edges.Edges3D")],u);const p=u},49864:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var r,n=i(82392),s=(i(80861),i(6273),i(67498),i(62991),i(85716)),o=i(26325),a=i(83311);let l=r=class extends a.A{constructor(e){super(e),this.type="solid"}clone(){return new r(this.cloneProperties())}};(0,n._)([(0,s.e)({solid:"solid"},{readOnly:!0})],l.prototype,"type",void 0),l=r=(0,n._)([(0,o.$)("esri.symbols.support.SolidEdges3D")],l);const c=l},3219:(e,t,i)=>{"use strict";i.d(t,{J:()=>u});var r,n=i(83311),s=i(82392),o=(i(80861),i(6273),i(67498),i(62991),i(85716)),a=i(26325);let l=r=class extends n.A{constructor(e){super(e),this.type="sketch"}clone(){return new r(this.cloneProperties())}};(0,s._)([(0,o.e)({sketch:"sketch"},{readOnly:!0})],l.prototype,"type",void 0),l=r=(0,s._)([(0,a.$)("esri.symbols.edges.SketchEdges3D")],l);const c=l;var h=i(49864);const u={types:{key:"type",base:n.A,typeMap:{solid:h.A,sketch:c}},json:{write:!0}}},19228:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var r=i(82392),n=i(84977),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325));let a=class extends n.oY{constructor(e){super(e)}clone(){}};(0,r._)([(0,s.MZ)({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],a.prototype,"type",void 0),a=(0,r._)([(0,o.$)("esri.symbols.patterns.LinePattern3D")],a);const l=a},31656:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var r,n=i(82392),s=i(1817),o=i(81482),a=(i(6273),i(80861),i(67498),i(85716)),l=i(26325),c=i(19228);const h=(0,s.O)()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let u=r=class extends c.A{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new r(e)}};(0,n._)([(0,o.MZ)({type:["style"]})],u.prototype,"type",void 0),(0,n._)([(0,a.e)(h),(0,o.MZ)({type:["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"]})],u.prototype,"style",void 0),u=r=(0,n._)([(0,l.$)("esri.symbols.patterns.LineStylePattern3D")],u);const p=u},42126:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var r=i(82392),n=i(84977),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325));let a=class extends n.oY{constructor(e){super(e)}clone(){}};(0,r._)([(0,s.MZ)({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],a.prototype,"type",void 0),a=(0,r._)([(0,o.$)("esri.symbols.patterns.Pattern3D")],a);const l=a},91301:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var r,n=i(82392),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),a=i(42126);let l=r=class extends a.A{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new r(e)}};(0,n._)([(0,s.MZ)({type:["style"]})],l.prototype,"type",void 0),(0,n._)([(0,s.MZ)({type:["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"],json:{read:!0,write:!0}})],l.prototype,"style",void 0),l=r=(0,n._)([(0,o.$)("esri.symbols.patterns.StylePattern3D")],l);const c=l},53182:(e,t,i)=>{"use strict";i.d(t,{r:()=>a,v:()=>l});var r=i(19228),n=i(31656),s=i(42126),o=i(91301);const a={types:{key:"type",base:s.A,typeMap:{style:o.A}},json:{write:!0}},l={types:{key:"type",base:r.A,typeMap:{style:n.A}},json:{write:!0}}},44223:(e,t,i)=>{"use strict";i.d(t,{A:()=>b});var r,n=i(82392),s=i(1817),o=i(84977),a=i(57725),l=i(81482),c=(i(6273),i(80861),i(67498),i(25376)),h=i(26325),u=i(48524),p=i(46227);let d=r=class extends o.oY{constructor(e){super(e)}async collectRequiredFields(e,t){return(0,p.Dx)(e,t,this.expression)}clone(){return new r({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};(0,n._)([(0,l.MZ)({type:String,json:{write:!0}})],d.prototype,"expression",void 0),(0,n._)([(0,l.MZ)({type:String,json:{write:!0}})],d.prototype,"title",void 0),d=r=(0,n._)([(0,h.$)("esri.layers.support.FeatureExpressionInfo")],d);const f=d;var y,m=i(69172);const g=(0,s.O)()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),v=new s.J({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let _=y=class extends o.oY{constructor(e){super(e),this.offset=null}readFeatureExpressionInfo(e,t){return null!=e?e:t.featureExpression&&0===t.featureExpression.value?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,t,i,r){t[i]=e.write({},r),"0"===e.expression&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):null!=e||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new y({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&(0,a.CM)(this.featureExpressionInfo,e.featureExpressionInfo)}};(0,n._)([(0,l.MZ)({type:f,json:{write:!0}})],_.prototype,"featureExpressionInfo",void 0),(0,n._)([(0,c.w)("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],_.prototype,"readFeatureExpressionInfo",null),(0,n._)([(0,u.K)("featureExpressionInfo",{featureExpressionInfo:{type:f},"featureExpression.value":{type:[0]}})],_.prototype,"writeFeatureExpressionInfo",null),(0,n._)([(0,l.MZ)({type:g.apiValues,nonNullable:!0,json:{type:g.jsonValues,read:g.read,write:{writer:g.write,isRequired:!0}}})],_.prototype,"mode",null),(0,n._)([(0,l.MZ)({type:Number,json:{write:!0}})],_.prototype,"offset",void 0),(0,n._)([(0,l.MZ)({type:m.KQ,json:{type:String,read:v.read,write:v.write}})],_.prototype,"unit",null),_=y=(0,n._)([(0,h.$)("esri.layers.support.ElevationInfo")],_);const b=_},36788:(e,t,i)=>{"use strict";i.d(t,{i:()=>y,r:()=>m});var r,n=i(82392),s=i(1817),o=i(84977),a=i(19759),l=i(81482),c=(i(6273),i(80861),i(67498),i(85716)),h=i(25376),u=i(26325),p=i(48524),d=i(55714);const f=(0,s.O)()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let y=r=class extends o.oY{constructor(e){super(e)}readHref(e,t,i){return e?(0,d.f)(e,i):t.dataURI}writeHref(e,t,i,r){e&&((0,a.DB)(e)?t.dataURI=e:(t.href=(0,d.t)(e,r),(0,a.oP)(t.href)&&(t.href=(0,a.S8)(t.href))))}clone(){return new r({href:this.href,primitive:this.primitive})}};(0,n._)([(0,l.MZ)({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],y.prototype,"href",void 0),(0,n._)([(0,h.w)("href")],y.prototype,"readHref",null),(0,n._)([(0,p.K)("href",{href:{type:String},dataURI:{type:String}})],y.prototype,"writeHref",null),(0,n._)([(0,c.e)(f)],y.prototype,"primitive",void 0),y=r=(0,n._)([(0,u.$)("esri.symbols.support.IconSymbol3DLayerResource")],y);const m="circle"},73962:(e,t,i)=>{"use strict";i.d(t,{E:()=>p,r:()=>d});var r,n=i(82392),s=i(1817),o=i(84977),a=i(81482),l=(i(6273),i(80861),i(67498),i(85716)),c=i(26325),h=i(55714);const u=(0,s.O)()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let p=r=class extends o.oY{clone(){return new r({href:this.href,primitive:this.primitive})}};(0,n._)([(0,a.MZ)({type:String,json:{read:h.r,write:h.w}})],p.prototype,"href",void 0),(0,n._)([(0,l.e)(u)],p.prototype,"primitive",void 0),p=r=(0,n._)([(0,c.$)("esri.symbols.support.ObjectSymbol3DLayerResource")],p);const d="sphere"},14176:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});var r,n=i(82392),s=i(73783),o=i(81482),a=(i(6273),i(80861),i(67498),i(26325)),l=i(83382);let c=r=class extends s.A{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new r({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};(0,n._)([(0,o.MZ)({type:String})],c.prototype,"name",void 0),(0,n._)([(0,o.MZ)({type:String})],c.prototype,"styleUrl",void 0),(0,n._)([(0,o.MZ)({type:String})],c.prototype,"styleName",void 0),(0,n._)([(0,o.MZ)({type:l.A})],c.prototype,"portal",void 0),c=r=(0,n._)([(0,a.$)("esri.symbols.support.StyleOrigin")],c);const h=c},98540:(e,t,i)=>{"use strict";i.d(t,{Q:()=>l});var r,n=i(82392),s=i(73783),o=i(81482),a=(i(6273),i(80861),i(67498),i(26325));let l=r=class extends s.A{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new r({x:this.x,y:this.y})}};(0,n._)([(0,o.MZ)({type:Number})],l.prototype,"x",void 0),(0,n._)([(0,o.MZ)({type:Number})],l.prototype,"y",void 0),l=r=(0,n._)([(0,a.$)("esri.symbols.support.Symbol3DAnchorPosition2D")],l)},13665:(e,t,i)=>{"use strict";i.d(t,{N:()=>c});var r,n=i(82392),s=i(84977),o=i(81482),a=(i(6273),i(80861),i(67498),i(26325)),l=i(30361);let c=r=class extends s.oY{constructor(e){super(e),this.color=null}clone(){const e={color:null!=this.color?this.color.clone():null};return new r(e)}};(0,n._)([(0,o.MZ)(l.E)],c.prototype,"color",void 0),c=r=(0,n._)([(0,a.$)("esri.symbols.support.Symbol3DMaterial")],c)},20593:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});var r,n=i(82392),s=i(84977),o=i(81482),a=(i(6273),i(80861),i(67498),i(26325)),l=i(30361);let c=r=class extends s.oY{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new r({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};(0,n._)([(0,o.MZ)(l.p)],c.prototype,"screenLength",void 0),(0,n._)([(0,o.MZ)({type:Number,nonNullable:!0,json:{write:!0,default:0}})],c.prototype,"minWorldLength",void 0),(0,n._)([(0,o.MZ)({type:Number,json:{write:!0}})],c.prototype,"maxWorldLength",void 0),c=r=(0,n._)([(0,a.$)("esri.symbols.support.Symbol3DVerticalOffset")],c);const h=c},51431:(e,t,i)=>{"use strict";i.d(t,{V:()=>l});var r,n=i(82392),s=i(73783),o=i(81482),a=(i(6273),i(80861),i(67498),i(26325));let l=r=class extends s.A{constructor(){super(...arguments),this.url=""}clone(){return new r({url:this.url})}};(0,n._)([(0,o.MZ)({type:String})],l.prototype,"url",void 0),l=r=(0,n._)([(0,a.$)("esri.symbols.support.Thumbnail")],l)},93611:(e,t,i)=>{"use strict";i.d(t,{Fe:()=>u,Km:()=>s,Nk:()=>l});var r=i(93814),n=i(77234);function s(e,t,i,r){if(e)if("CIMTextSymbol"!==e.type){if(i&&e.effects)for(const i of e.effects)a(i,t);if(e.symbolLayers)for(const i of e.symbolLayers)switch(i.type){case"CIMPictureMarker":case"CIMVectorMarker":o(i,t,r);break;case"CIMPictureStroke":case"CIMSolidStroke":!r?.preserveOutlineWidth&&i.width&&(i.width*=t);break;case"CIMPictureFill":i.height&&(i.height*=t),i.offsetX&&(i.offsetX*=t),i.offsetY&&(i.offsetY*=t);break;case"CIMHatchFill":s(i.lineSymbol,t,!0,{...r,preserveOutlineWidth:!1}),i.offsetX&&(i.offsetX*=t),i.offsetY&&(i.offsetY*=t),i.separation&&(i.separation*=t)}}else null!=e.height&&(e.height*=t)}function o(e,t,i){if(e&&(e.markerPlacement&&function(e,t){switch((0,n.zr)(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const i=e.placementTemplate.map((e=>e*t));e.placementTemplate=i}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const i=e.placementTemplate.map((e=>e*t));e.placementTemplate=i}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=null!=e.size?e.size*t:0,"CIMVectorMarker"===e.type&&e.markerGraphics))for(const r of e.markerGraphics)e.scaleSymbolsProportionally||s(r.symbol,t,!0,i)}function a(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const i=e.dashTemplate.map((e=>e*t));e.dashTemplate=i}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function l(e){const t=[];return c((0,n.lW)(e),t),t.length?new r.A((0,n.e6)(t[0])):null}function c(e,t){if(!e)return;let i;i="CIMTextSymbol"===e.type?e.symbol:e;const r="CIMPolygonSymbol"===e.type;if(i?.symbolLayers)for(const e of i.symbolLayers)if(!(e.colorLocked||r&&((0,n.mA)(e)||(0,n.MM)(e)&&e.markerPlacement&&(0,n.zr)(e.markerPlacement))))switch(e.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":e.tintColor&&h(t,e.tintColor);break;case"CIMVectorMarker":e.markerGraphics?.forEach((e=>{c(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":h(t,e.color);break;case"CIMHatchFill":c(e.lineSymbol,t)}}function h(e,t){for(const i of e)if(i.join(".")===t.join("."))return;e.push(t)}function u(e,t,i){t instanceof r.A||(t=new r.A(t));const s=(0,n.lW)(e);s&&p(s,t,i)}function p(e,t,i){if(!e)return;let r;r="CIMTextSymbol"===e.type?e.symbol:e;const s="CIMPolygonSymbol"===r?.type;if(r?.symbolLayers)for(const e of r.symbolLayers){if(e.colorLocked)continue;if(s)if(i){const{layersToColor:t}=i;if(((0,n.mA)(e)||(0,n.MM)(e)&&e.markerPlacement&&(0,n.zr)(e.markerPlacement))&&"fill"===t||(0,n.jn)(e)&&"outline"===t)continue}else if((0,n.mA)(e)||(0,n.MM)(e)&&e.markerPlacement&&(0,n.zr)(e.markerPlacement))continue;const r=t.toArray();switch(e.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":e.tintColor=r;break;case"CIMVectorMarker":e.markerGraphics?.forEach((e=>{p(e.symbol,t,i)}));break;case"CIMSolidStroke":case"CIMSolidFill":e.color=r;break;case"CIMHatchFill":p(e.lineSymbol,t,i)}}}},66215:(e,t,i)=>{"use strict";i.d(t,{ON:()=>n,U9:()=>o,u7:()=>s});var r=i(93814);const n=new r.A("white"),s=(new r.A("black"),new r.A([255,255,255,0]));function o(e){return 0===e.r&&0===e.g&&0===e.b}},61793:(e,t,i)=>{"use strict";i.d(t,{A7:()=>c,Cx:()=>h,Hk:()=>u,JJ:()=>y,SF:()=>p,UK:()=>l,jM:()=>d,x3:()=>f}),i(6273);var r=i(55736),n=i(24826),s=i(68231),o=i(31864),a=i(51103);const l=s.A.fromJSON(a.Cb),c=n.A.fromJSON(a.yM),h=r.A.fromJSON(a.WR),u=o.A.fromJSON(a.JZ);function p(e){if(null==e)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return l;case"polyline":return c;case"polygon":case"extent":return h}return null}const d=s.A.fromJSON(a.nC),f=n.A.fromJSON(a.HW),y=r.A.fromJSON(a.b6)},51103:(e,t,i)=>{"use strict";i.d(t,{Cb:()=>s,HW:()=>h,JR:()=>n,JZ:()=>l,WR:()=>a,b6:()=>u,fT:()=>r,nC:()=>c,yM:()=>o});const r=[252,146,31,255],n=[153,153,153,255],s={type:"esriSMS",style:"esriSMSCircle",size:6,color:r,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},o={type:"esriSLS",style:"esriSLSSolid",width:.75,color:r},a={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},l={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},c={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},h={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},u={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},67175:(e,t,i)=>{"use strict";i.d(t,{$4:()=>_,O0:()=>b,O1:()=>w,Sw:()=>M,eH:()=>g,rc:()=>v});var r=i(44764),n=i(93814),s=i(38116),o=i(91700),a=i(23572),l=i(93611);const c="picture-fill",h="simple-fill",u="simple-line",p="simple-marker",d="text",f="cim",y=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),m=new o.q(1e3);function g(e){const t=e.style;let i=null;if(e)switch(e.type){case p:"cross"!==t&&"x"!==t&&(i=e.color);break;case h:t&&"solid"!==t?"none"!==t&&(i={type:"pattern",x:0,y:0,src:(0,r.s)(`esri/symbols/patterns/${t}.png`),width:5,height:5}):i=e.color;break;case c:i={type:"pattern",src:e.url,width:(0,a.Lz)(e.width)*e.xscale,height:(0,a.Lz)(e.height)*e.yscale,x:(0,a.Lz)(e.xoffset),y:(0,a.Lz)(e.yoffset)};break;case d:i=e.color;break;case f:i=(0,l.Nk)(e)}return i}function v(e,t){const i=e+"-"+t;return void 0!==m.get(i)?Promise.resolve(m.get(i)):(0,s.A)(e,{responseType:"image"}).then((e=>{const r=e.data,n=r.naturalWidth,s=r.naturalHeight,o=document.createElement("canvas");o.width=n,o.height=s;const a=o.getContext("2d");a.fillStyle=t,a.fillRect(0,0,n,s),a.globalCompositeOperation="destination-in",a.drawImage(r,0,0);const l=o.toDataURL();return m.put(i,l),l}))}function _(e){if(!e)return null;let t=null;switch(e.type){case h:case c:case p:t=_(e.outline);break;case u:{const i=(0,a.Lz)(e.width);null!=e.style&&"none"!==e.style&&0!==i&&(t={color:e.color,style:w(e.style),width:i,cap:e.cap,join:"miter"===e.join?(0,a.Lz)(e.miterLimit):e.join},t.dashArray=b(t).join(",")||"none");break}default:t=null}return t}function b(e){if(!e?.style)return[];const{dashArray:t,style:i,width:r}=e;if("string"==typeof t&&"none"!==t)return t.split(",").map((e=>Number(e)));const n=r??0,s=y.has(i)?y.get(i).map((e=>e*n)):[];if("butt"!==e.cap)for(const[e,t]of s.entries())s[e]=e%2==1?t+n:Math.max(t-n,1);return s}const w=(()=>{const e={};return t=>{if(e[t])return e[t];const i=t.replaceAll("-","");return e[t]=i,i}})(),M=new n.A([128,128,128])},4064:(e,t,i)=>{"use strict";i.d(t,{M9:()=>c,oO:()=>h,rS:()=>d});var r=i(3438),n=i(62991),s=i(65452),o=i(62932),a=i(14215),l=i(43532);function c(e,t,i,r){const n=p(e,{},{context:r,isLabelSymbol:!1});null!=n&&(t[i]=n)}function h(e,t,i,r){const n=p(e,{},{context:r,isLabelSymbol:!0});null!=n&&(t[i]=n)}function u(e){return e instanceof o.A||e instanceof l.A}function p(e,t,i){if(null==e)return null;const{context:r,isLabelSymbol:o}=i,l=r?.origin,c=r?.messages;if("web-scene"===l&&!u(e)){const i=(0,a.t)(e,{retainCIM:!0,hasLabelingContext:o});return null!=i.symbol?i.symbol.write(t,r):(c?.push(new n.A("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:i.error})),null)}return("web-map"===l||"portal-item"===l&&!(0,s.TU)(r?.layer))&&u(e)?(c?.push(new n.A("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:r})),null):e.write(t,r)}function d(e,t){return(0,r.Bu)(e,null,t)}},75190:(e,t,i)=>{"use strict";i.d(t,{x:()=>r,z:()=>n});const r=["begin","end","begin-end"],n=["arrow","circle","square","diamond","cross","x"]},30361:(e,t,i)=>{"use strict";i.d(t,{E:()=>a,p:()=>l});var r=i(93814),n=i(23572),s=i(8636),o=i(93802);const a={type:r.A,json:{type:[s.jz],default:null,read:{source:["color","transparency"],reader:function(e,t){const i=null!=t.transparency?(0,o.D)(t.transparency):1,n=t.color;return n&&Array.isArray(n)?new r.A([n[0]||0,n[1]||0,n[2]||0,i]):null}},write:{target:{color:{type:[s.jz]},transparency:{type:s.jz}},writer:function(e,t){t.color=e.toJSON().slice(0,3);const i=(0,o.p)(e.a);0!==i&&(t.transparency=i)}}}},l={type:Number,cast:n.cr,json:{write:!0}}},7448:(e,t,i)=>{"use strict";i.d(t,{R0:()=>T,previewSymbol3D:()=>k});var r=i(44764),n=i(60861),s=(i(6273),i(62991)),o=i(80861),a=i(23572),l=i(67175),c=i(36788),h=i(73962),u=i(21550),p=i(63602),d=i(54866),f=i(43983);const y=u.CB.size,m=u.CB.maxSize,g=u.CB.maxOutlineSize,v=u.CB.lineWidth,_=u.CB.tallSymbolWidth;function b(e){const t=e.outline,i=null!=e.material?e.material.color:null,r=null!=i?i.toHex():null;if(null==t||"pattern"in t&&null!=t.pattern&&"style"===t.pattern.type&&"none"===t.pattern.style)return"fill"===e.type&&"#ffffff"===r?{color:"#bdc3c7",width:.75}:null;const n=(0,a.Lz)(t.size)||0;return{color:"rgba("+(null!=t.color?t.color.toRgba():"255,255,255,1")+")",width:Math.min(n,g),style:"pattern"in t&&null!=t.pattern&&"style"===t.pattern.type?(0,l.O1)(t.pattern.style):null,join:"butt",cap:"patternCap"in t?t.patternCap:"butt"}}function w(e,t=1){const i=e.a,r=(0,n.N2)(e),s=r.h,o=r.s/t,a=100-(100-r.v)/t,{r:l,g:c,b:h}=(0,n.$)({h:s,s:o,v:a});return[l,c,h,i]}function M(e){return"water"===e.type?null==e.color?null:e.color:null==e.material?.color?null:e.material.color}function T(e,t=0){const i=M(e);if(!i){if("fill"===e.type)return null;const i=l.Sw.r,r=(0,u.dr)(i,t);return[r,r,r,100]}const r=i.toRgba();for(let e=0;e<3;e++)r[e]=(0,u.dr)(r[e],t);return r}async function S(e,t){const i=e.style;return"none"===i?null:{type:"pattern",x:0,y:0,src:await(0,l.rc)((0,r.s)(`esri/symbols/patterns/${i}.png`),t.toCss(!0)),width:5,height:5}}function A(e){return e.outline?b(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function E(e,t){const i=M(e);if(!i)return null;let r="rgba(";return r+=(0,u.dr)(i.r,t)+",",r+=(0,u.dr)(i.g,t)+",",r+=(0,u.dr)(i.b,t)+",",r+i.a+");"}function x(e,t){const i=E(e,t);return i?"pattern"in e&&null!=e.pattern&&"style"===e.pattern.type&&"none"===e.pattern.style?null:{color:i,width:Math.min(e.size?(0,a.Lz)(e.size):.75,g),style:"pattern"in e&&null!=e.pattern&&"style"===e.pattern.type?(0,l.O1)(e.pattern.style):null,cap:"cap"in e?e.cap:null,join:"join"in e?"miter"===e.join?(0,a.Lz)(2):e.join:null}:{}}function I(e,t,i){const r=null!=i?.75*i:0;return{type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function C(e){const t="number"==typeof e?.size?e?.size:null;return t?(0,a.Lz)(t):null}function k(e,t){if(0===e.symbolLayers.length)return Promise.reject(new s.A("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(e.type){case"point-3d":return async function(e,t){const i=C(t),n=t?.maxSize?(0,a.Lz)(t.maxSize):null,s=t?.disableUpsampling??!1,l=e.symbolLayers,g=[];let v=0,w=0;const M=l.at(-1);let S;M&&"icon"===M.type&&(S=M.size&&(0,a.Lz)(M.size)),l.forEach((o=>{if("icon"!==o.type&&"object"!==o.type)return;const l="icon"===o.type?o.size&&(0,a.Lz)(o.size):0,M=i||l?Math.ceil(Math.min(i||l,n||m)):y;if(o?.resource?.href){const t=async function(e,t){if(e.thumbnail?.url)return e.thumbnail.url;if("icon"===t.type){const e=t?.resource?.href;if(e)return(0,d.N7)(t)}const i=(0,r.s)("esri/images/Legend/legend3dsymboldefault.png");if(e.styleOrigin&&(e.styleOrigin.styleName||e.styleOrigin.styleUrl)){const t=await(0,f.resolveWebStyleSymbol)(e.styleOrigin,{portal:e.styleOrigin.portal},"webRef").catch((()=>null));if(t&&"thumbnail"in t&&t.thumbnail?.url)return t.thumbnail.url}return i}(e,o).then((e=>{const t=o?.material?.color,i=function(e){return"icon"===e.type?"multiply":"tint"}(o);return(0,p.UB)(e,M,t,i,s)})).then((e=>{const t=e.width,i=e.height;return v=Math.max(v,t),w=Math.max(w,i),[{shape:{type:"image",x:0,y:0,width:t,height:i,src:e.url},fill:null,stroke:null}]}));g.push(t)}else{let e=M;"icon"===o.type&&S&&i&&(e=M*(l/S));const r="tall"===t?.symbolConfig||t?.symbolConfig?.isTall||"object"===o.type&&function(e){const t=e.depth,i=e.height,r=e.width;return 0!==r&&0!==t&&0!==i&&r===t&&null!=r&&null!=i&&r<i}(o);v=Math.max(v,r?_:e),w=Math.max(w,e),g.push(Promise.resolve(function(e,t,i){const r=[];if(!e)return r;switch(e.type){case"icon":{const i=0,n=0,s=t,o=t;switch(e.resource&&e.resource.primitive||c.r){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:T(e,0),stroke:b(e)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[i,o]},{command:"L",values:[i,n]},{command:"L",values:[s,n]},{command:"L",values:[s,o]},{command:"Z",values:[]}]},fill:T(e,0),stroke:b(e)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[i,o]},{command:"L",values:[.5*s,n]},{command:"L",values:[s,o]},{command:"Z",values:[]}]},fill:T(e,0),stroke:b(e)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*s,n]},{command:"L",values:[.5*s,o]},{command:"M",values:[i,.5*o]},{command:"L",values:[s,.5*o]}]},stroke:A(e)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[i,n]},{command:"L",values:[s,o]},{command:"M",values:[s,n]},{command:"L",values:[i,o]}]},stroke:A(e)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[i,.5*o]},{command:"L",values:[.5*s,n]},{command:"L",values:[s,.5*o]},{command:"L",values:[.5*s,o]},{command:"Z",values:[]}]},fill:T(e,0),stroke:b(e)})}break}case"object":switch(e.resource&&e.resource.primitive||h.r){case"cone":{const n=I(T(e,0),T(e,-.6),i?_:t),s=(0,u.mN)(t,i);r.push({shape:s[0],fill:n},{shape:s[1],fill:n});break}case"inverted-cone":{const i=T(e,0),n=I(i,T(e,-.6),t),s=(0,u.Pc)(t);r.push({shape:s[0],fill:n},{shape:s[1],fill:i});break}case"cube":{const n=(0,u.cZ)(t,i);r.push({shape:n[0],fill:T(e,0)},{shape:n[1],fill:T(e,-.3)},{shape:n[2],fill:T(e,-.5)});break}case"cylinder":{const n=I(T(e,0),T(e,-.6),i?_:t),s=(0,u.dt)(t,i);r.push({shape:s[0],fill:n},{shape:s[1],fill:n},{shape:s[2],fill:T(e,0)});break}case"diamond":{const i=(0,u.D)(t);r.push({shape:i[0],fill:T(e,-.3)},{shape:i[1],fill:T(e,0)},{shape:i[2],fill:T(e,-.3)},{shape:i[3],fill:T(e,-.7)});break}case"sphere":{const i=I(T(e,0),T(e,-.6));i.x1=0,i.y1=0,i.x2=.25*t,i.y2=.25*t,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:i});break}case"tetrahedron":{const i=(0,u.Nz)(t);r.push({shape:i[0],fill:T(e,-.3)},{shape:i[1],fill:T(e,0)},{shape:i[2],fill:T(e,-.6)});break}}}return r}(o,e,r)))}}));const E=await Promise.allSettled(g),x=[];return E.forEach((e=>{"fulfilled"===e.status?x.push(e.value):e.reason&&o.A.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",e.reason)})),(0,p.fz)(x,[v,w],{node:t?.node,scale:!1,opacity:t?.opacity,ariaLabel:t?.ariaLabel})}(e,t);case"line-3d":return function(e,t){const i=e.symbolLayers,r=[],n=(0,d.$d)(e),s=C(t),o=(t?.maxSize?(0,a.Lz)(t.maxSize):null)||g;let l,c=0,h=0;return i.forEach(((e,t)=>{if(!e)return;if("line"!==e.type&&"path"!==e.type)return;const i=[];switch(e.type){case"line":{const r=x(e,0);if(null==r)break;const n=r?.width||0;0===t&&(l=n);const a=Math.min(s||n,o),u=0===t?a:s?a*(n/l):a,p=u>v/2?2*u:v;h=Math.max(h,u),c=Math.max(c,p),r.width=u,i.push({shape:{type:"path",path:[{command:"M",values:[0,.5*h]},{command:"L",values:[c,.5*h]}]},stroke:r});break}case"path":{const t=Math.min(s||y,o),r=T(e,0),n=T(e,-.2),a=E(e,-.4),l=a?{color:a,width:1}:{};if("quad"===e.profile){const t=e.width,s=e.height,o=(0,u.KX)(t&&s?t/s:1,0===s,0===t),a={...l,join:"bevel"};i.push({shape:o[0],fill:n,stroke:a},{shape:o[1],fill:n,stroke:a},{shape:o[2],fill:r,stroke:a})}else i.push({shape:u.nq.pathSymbol3DLayer[0],fill:n,stroke:l},{shape:u.nq.pathSymbol3DLayer[1],fill:r,stroke:l});h=Math.max(h,t),c=h}}r.push(i)})),Promise.resolve((0,p.fz)(r,[c,h],{node:t?.node,scale:n,opacity:t?.opacity,ariaLabel:t?.ariaLabel}))}(e,t);case"polygon-3d":case"mesh-3d":return async function(e,t){const i="mesh-3d"===e.type,r=e.symbolLayers,n=C(t),s=t?.maxSize?(0,a.Lz)(t.maxSize):null,o=n||y,l=[];let c=0,h=0,d=!1;for(let e=0;e<r.length;e++){const t=r.at(e),n=[];if(!i||"fill"===t.type){switch(t.type){case"fill":{const e=Math.min(o,s||m);if(c=Math.max(c,e),h=Math.max(h,e),d=!0,i){const e=u.nq.meshSymbol3DFill,i=E(t,-.4),r=i?{color:i,width:1,join:"round"}:{};n.push({shape:e[0],fill:T(t,0),stroke:r},{shape:e[1],fill:T(t,-.2),stroke:r},{shape:e[2],fill:T(t,-.6),stroke:r})}else{let e=T(t,0);const i="pattern"in t?t.pattern:null,r=b(t),s=M(t);null!=i&&"style"===i.type&&"solid"!==i.style&&s&&(e=await S(i,s)),n.push({shape:u.nq.fill[0],fill:e,stroke:r})}break}case"line":{const e=x(t,0);if(null==e)break;const i={stroke:e,shape:u.nq.fill[0]};c=Math.max(c,y),h=Math.max(h,y),n.push(i);break}case"extrude":{const e={join:"round",width:1,...x(t,-.4)},i=T(t,0),r=T(t,-.2),a=Math.min(o,s||m),l=(0,u.sU)(a);e.width=1,n.push({shape:l[0],fill:r,stroke:e},{shape:l[1],fill:r,stroke:e},{shape:l[2],fill:i,stroke:e});const p=y,d=.7*y+.5*a;c=Math.max(c,p),h=Math.max(h,d);break}case"water":{const e=M(t),i=w(e),r=w(e,2),a=w(e,3),l=(0,u.cP)();d=!0,n.push({shape:l[0],fill:i},{shape:l[1],fill:r},{shape:l[2],fill:a});const p=Math.min(o,s||m);c=Math.max(c,p),h=Math.max(h,p);break}}l.push(n)}}return(0,p.fz)(l,[c,h],{node:t?.node,scale:d,opacity:t?.opacity,ariaLabel:t?.ariaLabel})}(e,t)}return Promise.reject(new s.A("symbolPreview: swatchInfo3D","symbol not supported."))}},21550:(e,t,i)=>{"use strict";i.d(t,{CB:()=>r,D:()=>f,KX:()=>a,Nz:()=>y,Pc:()=>d,QC:()=>g,cP:()=>c,cZ:()=>h,dr:()=>m,dt:()=>u,mN:()=>p,nq:()=>o,sU:()=>l});var r,n,s=i(93814);(n=r||(r={}))[n.size=22]="size",n[n.lineWidth=50]="lineWidth",n[n.maxSize=120]="maxSize",n[n.maxOutlineSize=80]="maxOutlineSize",n[n.tallSymbolWidth=20]="tallSymbolWidth";const o={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],meshSymbol3DFill:[{type:"path",path:"M -10,-8 L 6,0 L 6,6 L -10,6 L -10,-8 Z"},{type:"path",path:"M -10,-8 L -7,-10 L 9,-2 L 6,0 L -10,-8 Z"},{type:"path",path:"M 6,0 L 9,-2 L 9,4 L 6,6 L 6,0 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function a(e,t,i){const n=r.size;let s=n,o=n;e<1?s*=.75:e>1&&(o*=1.25);let a=n,l=n;return t&&i&&(s=o=a=l=0),[{type:"path",path:[{command:"M",values:[a,0]},{command:"L",values:[i?a:.875*a,0]},{command:"L",values:[i?s-.5*a:0,o-.5*l]},{command:"L",values:[s-.5*a,o-.5*l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[a,0]},{command:"L",values:[a,t?0:.125*l]},{command:"L",values:[s-.5*a,t?o-.5*l:l]},{command:"L",values:[s-.5*a,o-.5*l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s-.5*a,o-.5*l]},{command:"L",values:[i?s-.5*a:0,o-.5*l]},{command:"L",values:[i?s-.5*a:0,t?o-.5*l:l]},{command:"L",values:[s-.5*a,t?o-.5*l:l]},{command:"Z",values:[]}]}]}function l(e){const t=r.size,i=.5*e;return[{type:"path",path:[{command:"M",values:[0,.7*t*.5]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+i]},{command:"L",values:[0,.7*t+i-.7*t*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+i]},{command:"L",values:[t,i]},{command:"L",values:[t,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,0]},{command:"L",values:[t,0]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[0,.7*t*.5]},{command:"Z",values:[]}]}]}function c(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function h(e,t){let i=t?r.tallSymbolWidth:e;const n=e,s=t?4:6;i<=r.size?i-=.5*s:i-=s;const o=t?.35*i:.5*i;return[{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,.5*o]},{command:"L",values:[.5*i,o]},{command:"L",values:[0,.5*o]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*o]},{command:"L",values:[.5*i,o]},{command:"L",values:[.5*i,n]},{command:"L",values:[0,n-.5*o]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*i,o]},{command:"L",values:[.5*i,n]},{command:"L",values:[i,n-.5*o]},{command:"L",values:[i,.5*o]},{command:"Z",values:[]}]}]}function u(e,t){let i=t?r.tallSymbolWidth:e;const n=e,s=t?4:6;i<=r.size?i-=.5*s:i-=s;const o=.5*i,a=.15*i,l=n-a;return[{type:"ellipse",cx:.5*i,cy:l,rx:o,ry:a},{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[0,l]},{command:"L",values:[i,l]},{command:"L",values:[i,a]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*i,cy:a,rx:o,ry:a}]}function p(e,t){let i=t?r.tallSymbolWidth:e;const n=e,s=t?4:6;i<=r.size?i-=.5*s:i-=s;const o=.15*i,a=n-o;return[{type:"ellipse",cx:.5*i,cy:a,rx:.5*i,ry:o},{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,a]},{command:"L",values:[0,a]},{command:"Z",values:[]}]}]}function d(e){let t=e;const i=e;t<r.size?t-=3:t-=6;const n=.15*t;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[t,0]},{command:"L",values:[.5*t,i-n]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:0,rx:.5*t,ry:n}]}function f(e){let t=e;const i=e;t<r.size?t-=2:t-=4;const n=t,s=i,o=Math.floor(e/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*n,0]},{command:"L",values:[n,.5*s-o]},{command:"L",values:[.45*n-o,.5*s+o]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*n,0]},{command:"L",values:[.45*n-o,.5*s+o]},{command:"L",values:[0,.5*s-o]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*s-o]},{command:"L",values:[.45*n-o,.5*s+o]},{command:"L",values:[.45*n,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*n,i]},{command:"L",values:[n,.5*s-o]},{command:"L",values:[.45*n-o,.5*s+o]},{command:"Z",values:[]}]}]}function y(e){const t=e;let i=e;return i<r.size?i-=1:i-=2,[{type:"path",path:[{command:"M",values:[.45*t,0]},{command:"L",values:[t,i]},{command:"L",values:[.45*t,.6*i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*t,0]},{command:"L",values:[.45*t,.6*i]},{command:"L",values:[0,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,i]},{command:"L",values:[.45*t,.6*i]},{command:"L",values:[t,i]},{command:"Z",values:[]}]}]}function m(e,t){return Math.round(Math.min(Math.max(e+255*t*.75,0),255))}function g(e,t){if(null==e)return new s.A;if("type"in e&&("linear"===e.type||"pattern"===e.type))return e;const i=new s.A(e);return new s.A([m(i.r,t),m(i.g,t),m(i.b,t),i.a])}},63602:(e,t,i)=>{"use strict";i.d(t,{UB:()=>f,fz:()=>p});var r=i(6480),n=i(38116),s=i(60861),o=i(62991),a=i(6273),l=(i(2980),i(58133)),c=i(67668),h=i(54866);const u=(0,l.F)();function p(e,t,i){const r=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!e.some((e=>!!e.length)))return null;const s=i?.node||document.createElement("div");return null!=i.opacity&&(s.style.opacity=i.opacity.toString()),null!=i.effectView&&(s.style.filter=(0,h.di)(i.effectView)),function(e,t){u.append(e,t),u.detach(t)}(s,(()=>(0,c.d8)(e,r,n,i))),s}function d(e,t,i,r,n){switch(n){case"multiply":e[t]*=i[0],e[t+1]*=i[1],e[t+2]*=i[2],e[t+3]*=i[3];break;default:{const n=(0,s.N2)({r:e[t],g:e[t+1],b:e[t+2]});n.h=r.h,n.s=r.s,n.v=n.v/100*r.v;const o=(0,s.$)(n);e[t]=o.r,e[t+1]=o.g,e[t+2]=o.b,e[t+3]*=i[3];break}}}function f(e,t,i,l,c){return function(e,t,i){return e?(0,n.A)(e,{responseType:"image"}).then((e=>{const r=e.data,n=r.width,s=r.height,o=n/s;let a=t;if(i){const e=Math.max(n,s);a=Math.min(a,e)}return{image:r,width:o<=1?Math.ceil(a*o):a,height:o<=1?a:Math.ceil(a/o)}})):Promise.reject(new o.A("renderUtils: imageDataSize","href not provided."))}(e,t,c).then((n=>{const o=n.width??t,c=n.height??t;if(n.image&&function(e,t){return!(!e||"ignore"===t||"multiply"===t&&255===e.r&&255===e.g&&255===e.b&&1===e.a)}(i,l)){let t=n.image.width,r=n.image.height;(0,a.A)("edge")&&/\.svg$/i.test(e)&&(t-=1,r-=1);const h=function(e,t){e=Math.ceil(e),t=Math.ceil(t);const i=document.createElement("canvas");i.width=e,i.height=t,i.style.width=e+"px",i.style.height=t+"px";const r=i.getContext("2d");return r.clearRect(0,0,e,t),r}(o,c);h.drawImage(n.image,0,0,t,r,0,0,o,c);const u=h.getImageData(0,0,o,c),p=[i.r/255,i.g/255,i.b/255,i.a],f=(0,s.N2)(i);for(let e=0;e<u.data.length;e+=4)d(u.data,e,p,f,l);h.putImageData(u,0,0),e=h.canvas.toDataURL("image/png")}else{const t=r.id?.findCredential(e);if(t?.token){const i=e.includes("?")?"&":"?";e=`${e}${i}token=${t.token}`}}return{url:e,width:o,height:c}})).catch((()=>({url:e,width:t,height:t})))}},65949:(e,t,i)=>{"use strict";i.d(t,{bo:()=>p,cF:()=>u,jg:()=>g,o5:()=>d,yA:()=>f});var r=i(38116),n=i(62991),s=i(37623),o=i(19759),a=i(83382),l=i(42268),c=i(96316);let h={};function u(e,t,i){return null!=e?.styleUrl?async function(e,t){try{return{data:(await f(e,t)).data,baseUrl:(0,o.nM)(e),styleUrl:e}}catch(e){return(0,s.QP)(e),null}}(e.styleUrl,i):null!=e?.styleName?function(e,t,i){const r=null!=t.portal?t.portal:a.A.getDefault();let s;const o=`${r.url} - ${r.user&&r.user.username} - ${e}`;return h[o]||(h[o]=function(e,t,i){return t.load(i).then((()=>{const r=new l.A({disableExtraQuery:!0,query:`owner:${y} AND type:${m} AND typekeywords:"${e}"`});return t.queryItems(r,i)})).then((({results:t})=>{let r=null;const s=e.toLowerCase();if(t&&Array.isArray(t))for(const e of t){const t=e.typeKeywords?.some((e=>e.toLowerCase()===s));if(t&&e.type===m&&e.owner===y){r=e;break}}if(!r)throw new n.A("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return r.load(i)}))}(e,r,i).then((e=>(s=e,e.fetchData()))).then((t=>({data:t,baseUrl:s.itemUrl??"",styleName:e})))),h[o]}(e.styleName,t,i):Promise.reject(new n.A("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function p(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function d(e,t,i=["gltf"]){if("cimRef"===t)return e.cimRef;if(e.formatInfos&&!(0,c.Vd)())for(const t of i){const i=e.formatInfos.find((e=>e.type===t));if(i)return i.href}return e.webRef}function f(e,t){const i={responseType:"json",query:{f:"json"},...t};return(0,r.A)((0,o.S8)(e),i)}const y="esri_en",m="Style",g="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json"},67668:(e,t,i)=>{"use strict";i.d(t,{CG:()=>x,G4:()=>D,Ie:()=>T,Ru:()=>P,UX:()=>R,VB:()=>A,aH:()=>S,d8:()=>F});var r=i(93814),n=i(6273),s=i(57725),o=i(68749),a=i(94464),l=i(67175),c=(i(33510),i(2110));const h="http://www.w3.org/2000/svg";let u=0,p=0;const d=(0,n.A)("android"),f=(0,n.A)("chrome")||d&&d>=4?"auto":"optimizeLegibility",y={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},m=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let g={},v={};const _=Math.PI;let b=1;function w(e,t){const i=e*(_/180);return Math.abs(t*Math.sin(i))+Math.abs(t*Math.cos(i))}function M(e){return e.map((e=>`${e.command} ${e.values.join(" ")}`)).join(" ").trim()}function T(e,t,i,r,n){if(e){if("circle"===e.type)return(0,c.K)("circle",{cx:e.cx,cy:e.cy,fill:t,"fill-rule":"evenodd",r:e.r,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if("ellipse"===e.type)return(0,c.K)("ellipse",{cx:e.cx,cy:e.cy,fill:t,"fill-rule":"evenodd",rx:e.rx,ry:e.ry,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if("rect"===e.type)return(0,c.K)("rect",{fill:t,"fill-rule":"evenodd",height:e.height,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,width:e.width,x:e.x,y:e.y});if("image"===e.type)return(0,c.K)("image",{alt:n||"image",height:e.height,href:e.src,preserveAspectRatio:"none",width:e.width,x:e.x,y:e.y});if("path"===e.type){const r="string"!=typeof e.path?M(e.path):e.path;return(0,c.K)("path",{d:r,fill:t,"fill-rule":"evenodd",stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width})}if("text"===e.type)return(0,s.Lw)(r),(0,c.K)("text",{"dominant-baseline":r.dominantBaseline,fill:t,"fill-rule":"evenodd","font-family":r.font.family,"font-size":r.font.size,"font-style":r.font.style,"font-variant":r.font.variant,"font-weight":r.font.weight,kerning:r.kerning,rotate:r.rotate,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,"text-anchor":r.align,"text-decoration":r.decoration,"text-rendering":f,x:e.x,y:e.y},e.text)}return null}function S(e){const t={fill:"none",pattern:null,linearGradient:null};if(e)if("type"in e&&"pattern"===e.type){const i="patternId-"+ ++u;t.fill=`url(#${i})`,t.pattern={id:i,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}}}else if("type"in e&&"linear"===e.type){const i="linearGradientId-"+ ++p;t.fill=`url(#${i})`,t.linearGradient={id:i,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map((e=>({offset:e.offset,color:e.color&&new r.A(e.color).toString()})))}}else if(e){const i=new r.A(e);t.fill=i.toString()}return t}function A(e){const t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return e&&(null!=e.width&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=new r.A(e.color).toString()),e.dashArray&&(t.dashArray=e.dashArray),e.dashoffset&&(t.dashOffset=e.dashoffset),e.style&&!e.dashArray&&(t.dashArray=(0,l.O0)(e).join(",")||"none")),t}function E(e,t){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(e){const r=e.alignBaseline,n="baseline"===r?"auto":"top"===r?"text-top":"bottom"===r?"hanging":r;i.align=e.align,i.dominantBaseline=n,i.decoration=e.decoration,i.kerning=e.kerning?"auto":"0",i.rotate=e.rotated?"90":"0",(0,s.Lw)(t),i.font.style=t.style||"normal",i.font.variant=t.variant||"normal",i.font.weight=t.weight||"normal",i.font.size=t.size&&t.size.toString()||"10pt",i.font.family=t.family||"serif"}return i}function x(e){const{pattern:t,linearGradient:i}=e;if(t)return(0,c.K)("pattern",{height:t.height,id:t.id,patternUnits:"userSpaceOnUse",width:t.width,x:t.x,y:t.y},(0,c.K)("image",{height:t.image.height,href:t.image.href,width:t.image.width,x:t.image.x,y:t.image.y}));if(i){const e=i.stops.map(((e,t)=>(0,c.K)("stop",{key:`${t}-stop`,offset:e.offset,"stop-color":e.color})));return(0,c.K)("linearGradient",{gradientUnits:"userSpaceOnUse",id:i.id,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2},e)}return null}function I(e,t){if(!e||0===e.length)return null;const i=[];for(const t of e){const{shape:e,fill:r,stroke:n,font:s}=t,o=S(r),a=A(n),l="text"===e.type?E(e,s):null,c=T(e,o.fill,a,l);c&&i.push(c)}return(0,c.K)("mask",{id:t,maskUnits:"userSpaceOnUse"},(0,c.K)("g",null,i))}function C(e,t,i){return(0,a.Tl)(e,(0,a.D_)(e),[t,i])}function k(e,t,i,r,n){return(0,a.hs)(e,(0,a.D_)(e),[t,i]),e[4]=e[4]*t-r*t+r,e[5]=e[5]*i-n*i+n,e}function N(e,t){g&&"left"in g?(null!=g.left&&g.left>e&&(g.left=e),(null==g.right||g.right<e)&&(g.right=e),(null==g.top||g.top>t)&&(g.top=t),(null==g.bottom||g.bottom<t)&&(g.bottom=t)):g={left:e,bottom:t,right:e,top:t}}function L(e){const t=e.args,i=t.length;let r;switch(e.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<i;r+=2)N(t[r],t[r+1]);v.x=t[i-2],v.y=t[i-1];break;case"H":for(r=0;r<i;++r)N(t[r],v.y);v.x=t[i-1];break;case"V":for(r=0;r<i;++r)N(v.x,t[r]);v.y=t[i-1];break;case"m":{let e=0;"x"in v||(N(v.x=t[0],v.y=t[1]),e=2);for(r=e;r<i;r+=2)N(v.x+=t[r],v.y+=t[r+1]);break}case"l":case"t":for(r=0;r<i;r+=2)N(v.x+=t[r],v.y+=t[r+1]);break;case"h":for(r=0;r<i;++r)N(v.x+=t[r],v.y);break;case"v":for(r=0;r<i;++r)N(v.x,v.y+=t[r]);break;case"c":for(r=0;r<i;r+=6)N(v.x+t[r],v.y+t[r+1]),N(v.x+t[r+2],v.y+t[r+3]),N(v.x+=t[r+4],v.y+=t[r+5]);break;case"s":case"q":for(r=0;r<i;r+=4)N(v.x+t[r],v.y+t[r+1]),N(v.x+=t[r+2],v.y+=t[r+3]);break;case"A":for(r=0;r<i;r+=7)N(t[r+5],t[r+6]);v.x=t[i-2],v.y=t[i-1];break;case"a":for(r=0;r<i;r+=7)N(v.x+=t[r+5],v.y+=t[r+6])}}function O(e,t,i){const r=y[e.toLowerCase()];let n;"number"==typeof r&&(r?t.length>=r&&(n={action:e,args:t.slice(0,t.length-t.length%r)},i.push(n),L(n)):(n={action:e,args:[]},i.push(n),L(n)))}function R(e){const t={x:0,y:0,width:0,height:0};if("circle"===e.type)t.x=e.cx-e.r,t.y=e.cy-e.r,t.width=2*e.r,t.height=2*e.r;else if("ellipse"===e.type)t.x=e.cx-e.rx,t.y=e.cy-e.ry,t.width=2*e.rx,t.height=2*e.ry;else if("image"===e.type||"rect"===e.type)t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height;else if("path"===e.type){const i=function(e){const t=("string"!=typeof e.path?M(e.path):e.path).match(m),i=[];if(g={},v={},!t)return null;let r="",n=[];const s=t.length;for(let e=0;e<s;++e){const s=t[e],o=parseFloat(s);isNaN(o)?(r&&O(r,n,i),n=[],r=s):n.push(o)}O(r,n,i);const o={x:0,y:0,width:0,height:0};return g&&"left"in g&&(o.x=g.left,o.y=g.top,o.width=g.right-g.left,o.height=g.bottom-g.top),o}(e);t.x=i.x,t.y=i.y,t.width=i.width,t.height=i.height}return t}function P(e){const t={x:0,y:0,width:0,height:0};let i=null,r=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(const s of e)i?(i.x=Math.min(i.x,s.x),i.y=Math.min(i.y,s.y),r=Math.max(r,s.x+s.width),n=Math.max(n,s.y+s.height)):(i=t,i.x=s.x,i.y=s.y,r=s.x+s.width,n=s.y+s.height);return i&&(i.width=r-i.x,i.height=n-i.y),i}function D(e,t,i,r,n,s,l,c,h){let u=(l&&s?w(s,t):t)/2,p=(l&&s?w(s,i):i)/2;if(h){const e=h[0],t=h[1];u=(l&&s?w(s,e):e)/2,p=(l&&s?w(s,t):t)/2}const d=e.width+r,f=e.height+r,y=(0,o.vt)(),m=(0,o.vt)();let g=!1;if(n&&0!==d&&0!==f){const e=t!==i?t/i:d/f,r=t>i?t:i;let n=1,s=1;isNaN(r)||(e>1?(n=r/d,s=r/e/f):(s=r/f,n=r*e/d)),(0,a.lw)(m,m,k(y,n,s,u,p)),g=!0}const v=e.x+(d-r)/2,_=e.y+(f-r)/2;if((0,a.lw)(m,m,C(y,u-v,p-_)),!g&&(d>t||f>i)){const e=d/t>f/i,r=(e?t:i)/(e?d:f);(0,a.lw)(m,m,k(y,r,r,v,_))}return s&&(0,a.lw)(m,m,function(e,t,i,r){const n=t%360*Math.PI/180;(0,a.e$)(e,(0,a.D_)(e),n);const s=Math.cos(n),o=Math.sin(n),l=e[4],c=e[5];return e[4]=l*s-c*o+r*o-i*s+i,e[5]=c*s+l*o-i*o-r*s+r,e}(y,s,v,_)),c&&(0,a.lw)(m,m,C(y,c[0],c[1])),`matrix(${m[0]},${m[1]},${m[2]},${m[3]},${m[4]},${m[5]})`}function F(e,t,i,r={}){const n=[],o=[],a=++b,l=function(e,t,i){const r=e?.effects.find((e=>"bloom"===e.type));if(!r)return null;const{strength:n,radius:s}=r,o=n>0?s:0,a=(n+o)*t,l=4*n+1;return(0,c.K)("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${i}`,width:"300%",x:"-100%",y:"-100%"},(0,c.K)("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(n+.5*o)*(5**(t/100)*(.4+t/100)),result:"dilate"}),(0,c.K)("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:a/25}),(0,c.K)("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:a/50}),(0,c.K)("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},(0,c.K)("feFuncR",{slope:l,type:"linear"}),(0,c.K)("feFuncG",{slope:l,type:"linear"}),(0,c.K)("feFuncB",{slope:l,type:"linear"})),(0,c.K)("feMerge",null,(0,c.K)("feMergeNode",{in:"intensityBlur"}),(0,c.K)("feMergeNode",{in:"intensityBrightness"}),(0,c.K)("feGaussianBlur",{stdDeviation:n/10})))}(r.effectView,t,a);let u=null;if(l){const e=r.effectView?.effects.find((e=>"bloom"===e.type)),n=(e.strength?e.strength+e.radius/2:0)/3,s=t+t*n,o=i+i*n;u=[Math.max(s,10),Math.max(o,10)]}for(let s=0;s<e.length;s++){const a=e[s],l=[],h=[];let p=0,d=0,f=0;for(const e of a){const{shape:t,fill:i,stroke:s,font:o,offset:a}=e;r.ignoreStrokeWidth||"text"===t.type||(p+=s?.width||0);const c=S(i),u=A(s),y="text"===t.type?E(t,o):null;n.push(x(c)),l.push(T(t,c.fill,u,y,r.ariaLabel)),h.push(R(t)),a&&(d+=a[0],f+=a[1])}const y=D(P(h),t,i,p,r.scale??!1,r.rotation,r.useRotationSize??!1,[d,f],u);let m=null;if(r.masking){const e=`mask-${s}`,t=r.masking[s];n.push(I(t,e)),m=`url(#${e})`}o.push(m?(0,c.K)("g",{mask:m},(0,c.K)("g",{transform:y},l)):(0,c.K)("g",{transform:y},l))}return r.useRotationSize&&r.rotation&&(t=w(r.rotation,t),i=w(r.rotation,i)),l&&((0,s.Lw)(u),t=u[0],i=u[1]),(0,c.K)("svg",{"aria-labelledby":r.ariaLabel,focusable:!1,height:i,role:"img",style:"display: block;",width:t,xmlns:h},l,(0,c.K)("defs",null,n),l?(0,c.K)("g",{filter:`url(#bloom${a})`},o):o)}},14215:(e,t,i)=>{"use strict";i.d(t,{c:()=>m,t:()=>g});var r=i(3438),n=i(62991),s=i(43532),o=i(12862),a=i(24826),l=i(85498),c=i(68231),h=i(11455),u=i(55736),p=i(56173),d=i(7998),f=i(31864),y=i(94598);const m={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function g(e,t=m){if(!e)return{symbol:null};const{retainId:i=m.retainId,ignoreDrivers:g=m.ignoreDrivers,hasLabelingContext:v=m.hasLabelingContext,retainCIM:_=m.retainCIM}=t;let b=null;if((0,r.wk)(e)||e instanceof s.A)b=e.clone();else if("cim"===e.type){const t=e.data?.symbol?.type;if("CIMPointSymbol"!==t)return{error:new n.A("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${t||"unknown"}' is unsupported in 3D`,{symbol:e})};b=_?e.clone():o.A.fromCIMSymbol(e)}else if(e instanceof a.A)b=l.A.fromSimpleLineSymbol(e);else if(e instanceof c.A)b=o.A.fromSimpleMarkerSymbol(e);else if(e instanceof h.A)b=o.A.fromPictureMarkerSymbol(e);else if(e instanceof u.A)b=t.geometryType&&"mesh"===t.geometryType?p.A.fromSimpleFillSymbol(e):d.A.fromSimpleFillSymbol(e);else{if(!(e instanceof f.A))return{error:new n.A("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};b=v?y.A.fromTextSymbol(e):o.A.fromTextSymbol(e)}return i&&b&&"cim"!==b.type&&(b.id=e.id),g&&(0,r.wk)(b)&&b.symbolLayers.forEach((e=>e.ignoreDrivers=!0)),{symbol:b}}},41394:(e,t,i)=>{"use strict";i.d(t,{Bb:()=>s,Fq:()=>c,M4:()=>h,Nv:()=>u,e:()=>p}),i(6273);var r=i(19913),n=i(46373);function s(e,{isPrimitive:t,width:i,depth:n,height:s}){const o=t?10:1;if(null==i&&null==s&&null==n)return[o*e[0],o*e[1],o*e[2]];const a=(0,r.fA)(i,n,s);let l;for(let t=0;t<3;t++){const i=a[t];if(null!=i){l=i/e[t];break}}for(let t=0;t<3;t++)null==a[t]&&(a[t]=e[t]*l);return a}const o=(0,n.fA)(-.5,-.5,-.5,.5,.5,.5),a=(0,n.fA)(-.5,-.5,0,.5,.5,1),l=(0,n.fA)(-.5,-.5,0,.5,.5,.5);function c(e){switch(e){case"sphere":case"cube":case"diamond":return o;case"cylinder":case"cone":case"inverted-cone":return a;case"tetrahedron":return l;default:return}}const h=["butt","square","round"],u=[...h,"none"],p=["miter","bevel","round"]},62878:(e,t,i)=>{"use strict";i.d(t,{Gr:()=>f,J0:()=>d,Kf:()=>m,es:()=>p,xg:()=>u}),i(6273);var r=i(83911),n=i(67175),s=i(21550),o=i(63602),a=i(54866);i(51695),i(92966);let l=null;const c=[255,255,255];function h(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function u(e,t,i){const{backgroundColor:r,outline:n,dotSize:o}=e,a=i?.swatchSize||s.CB.size,c=Math.round(a*a/Math.max(o,.5)**2*.8),u=window.devicePixelRatio,p=document.createElement("canvas"),d=a*u;p.width=d,p.height=d,p.style.width=p.width/u+"px",p.style.height=p.height/u+"px";const f=p.getContext("2d");if(r&&(f.fillStyle=r.toCss(!0),f.fillRect(0,0,d,d),f.fill()),f.fillStyle=t?.toCss(!0)??"",l&&l.length/2===c)for(let e=0;e<2*c;e+=2){const t=l[e],i=l[e+1];f.fillRect(t,i,o*u,o*u),f.fill()}else{l=[];for(let e=0;e<2*c;e+=2){const e=h(0,d),t=h(0,d);l.push(e,t),f.fillRect(e,t,o*u,o*u),f.fill()}}n&&(n.color&&(f.strokeStyle=n.color.toCss(!0)),f.lineWidth=n.width,f.strokeRect(0,0,d,d));const y=new Image(a,a);return y.src=p.toDataURL(),y.ariaLabel=i?.ariaLabel??null,y.alt=i?.ariaLabel??"",y}function p(e,t={}){const i=t.radius||40,r=2*Math.PI*i,s=e.length,a=r/s,l=[],h=(0,n.$4)(t.outline);null!=h?.width&&(h.width*=2),(h||t.backgroundColor)&&l.push({shape:{type:"circle",cx:i,cy:i,r:i},fill:t.backgroundColor,stroke:h,offset:[0,0]});const u=t.values,p=u&&u.length===s&&100===u.reduce(((e,t)=>e+t),0),d=[0];for(let t=0;t<s;t++){let n=null;p&&(n=u[t]*r/100,d.push(n+d[t])),l.push({shape:{type:"circle",cx:i,cy:i,r:i/2},fill:[0,0,0,0],stroke:{width:i,dashArray:`${(n??a)/2} ${r}`,dashoffset:"-"+(p?d[t]/2:t*(a/2)),color:e[t]},offset:[0,0]})}let f=null;const y=2*i+(h?.width||0),m=t.holePercentage;if(m){h&&l.push({shape:{type:"circle",cx:i,cy:i,r:i*m},fill:null,stroke:h,offset:[0,0]});const e=y/2;f=[[{shape:{type:"circle",cx:e,cy:e,r:e},fill:c,stroke:h?{...h,color:c}:null,offset:[0,0]},{shape:{type:"circle",cx:e,cy:e,r:i*m},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return(0,o.fz)([l],[y,y],{effectView:t.effectList,ignoreStrokeWidth:!0,masking:f,rotation:-90,ariaLabel:t.ariaLabel})}function d(e,t={}){const i="horizontal"===t.align,r=i?75:24,n=i?24:75,s=t.width??r,o=t.height??n,l=t.gradient??!0,c=window.devicePixelRatio,h=s*c,u=o*c,p=document.createElement("canvas");p.width=h,p.height=u,p.ariaLabel=t.ariaLabel??null,p.style.width=`${s}px`,p.style.height=`${o}px`;const d=p.getContext("2d"),f=i?h:0,y=i?0:u;if(l){const t=d.createLinearGradient(0,0,f,y),i=e.length,r=1===i?0:1/(i-1);e.forEach(((e,i)=>t.addColorStop(i*r,e.toString()))),d.fillStyle=t,d.fillRect(0,0,h,u)}else{const t=i?h/e.length:h,r=i?u:u/e.length;let n=0,s=0;for(const o of e)d.fillStyle=o.toString(),d.fillRect(n,s,t,r),n=i?n+t:0,s=i?0:s+r}const m=document.createElement("div");return m.style.width=`${s}px`,m.style.height=`${o}px`,function(e,t){if(!t)return;e.style.filter=(0,a.di)(t);const i=t.effects;if(i)for(const t of i)if("drop-shadow"===t?.type){t.offsetX<0?e.style.marginLeft=`${Math.abs(t.offsetX)}px`:e.style.marginRight=`${t.offsetX}px`;break}}(m,t?.effectList),m.appendChild(p),m}async function f(e,t){switch(e.type){case"web-style":{const{previewWebStyleSymbol:r}=await i.e(208).then(i.bind(i,40208));return r(e,f,t)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:r}=await Promise.resolve().then(i.bind(i,7448));return r(e,t)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:r}=await i.e(4613).then(i.bind(i,84613));return r(e,t)}case"cim":{const{previewCIMSymbol:r}=await Promise.all([i.e(9018),i.e(2644),i.e(177)]).then(i.bind(i,93796));return r(e,t)}default:return}}function y(e){return e&&"opacity"in e?e.opacity*y(e.parent):1}async function m(e,t){if(!e)return;const n=e.sourceLayer,s=(null!=t&&t.useSourceLayer?n:e.layer)??n,o=y(s);if(null!=e.symbol&&(null==t||!0!==t.ignoreGraphicSymbol)){const i="web-style"===e.symbol.type?await(0,a.yG)(e.symbol,{...t,cache:null!=t?t.webStyleCache:null}):e.symbol.clone();return(0,a.dt)(i,null,o),i}const l=t?.renderer??function(e){if(e)return"renderer"in e?e.renderer:void 0}(s);let c=l&&"getSymbolAsync"in l?await l.getSymbolAsync(e,t):null;if(!c)return;if(c="web-style"===c.type?await c.fetchSymbol({...t,cache:null!=t?t.webStyleCache:null}):c.clone(),!l||!("visualVariables"in l)||!l.visualVariables?.length)return(0,a.dt)(c,null,o),c;if("arcadeRequiredForVisualVariables"in l&&l.arcadeRequiredForVisualVariables&&null==t?.arcade){const e={...t};e.arcade=await(0,r.lw)(),t=e}const{getColor:h,getOpacity:u,getAllSizes:p,getRotationAngle:d}=await Promise.resolve().then(i.bind(i,37525)),f=[],m=[],g=[],v=[];for(const e of l.visualVariables)switch(e.type){case"color":f.push(e);break;case"opacity":m.push(e);break;case"rotation":v.push(e);break;case"size":e.target||g.push(e)}const _=!!f.length&&f[f.length-1],b=_?h(_,e,t):null,w=!!m.length&&m[m.length-1];let M=w?u(w,e,t):null;if(null!=o&&(M=null!=M?M*o:o),(0,a.dt)(c,b,M),g.length){const i=p(g,e,t);await(0,a.UQ)(c,i)}for(const i of v)(0,a.GG)(c,d(i,e,t),i.axis);return c}},70227:(e,t,i)=>{"use strict";i.d(t,{NM:()=>a,Tb:()=>l,_R:()=>o,h9:()=>s,rM:()=>c,x0:()=>h,y7:()=>u});var r=i(4506),n=i(8636);const s=["none","underline","line-through"],o=["normal","italic","oblique"],a=["normal","lighter","bold","bolder"],l={type:Number,cast:e=>{const t=(0,n.GB)(e);return 0===t?1:(0,r.qE)(t,.1,4)},nonNullable:!0},c={type:["left","right","center"],nonNullable:!0},h={type:["baseline","top","middle","bottom"],nonNullable:!0},u=8},69172:(e,t,i)=>{"use strict";i.d(t,{Ao:()=>s,KQ:()=>o,Tg:()=>n});var r=i(47195);function n(e){return!!e&&null!=r.j[e]}function s(e){return 1/(r.j[e]||1)}const o=function(){const e=Object.keys(r.j);return e.sort(),e}()},34513:(e,t,i)=>{"use strict";i.d(t,{k7:()=>a,ku:()=>o});var r=i(19759),n=i(55714);function s(e,t){if(!(0,r.oP)(e)){const i=function(e){if(!e)return null;const{origin:t,layer:i}=e;if("service"!==t&&"portal-item"!==t)return null;const r=i?.type;return"feature"===r||"stream"===r?i.parsedUrl?.path:"map-image"===r||"tile"===r?e.url?.path:null}(t);if(i)return(0,r.fj)(i,"images",e)}return(0,n.f)(e,t)}const o={json:{read:{source:["imageData","url"],reader:function(e,t,i){return t.imageData?(0,r.Hg)({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):s(t.url,i)}},write:{writer(e,t,i,s){!function(e,t,i,s){if((0,r.DB)(e)){const o=(0,r.r$)(e);if(!o)return;t.contentType=o.mediaType,t.imageData=o.data,i&&i.imageData===t.imageData&&i.url&&(0,n.w)(i.url,t,"url",s)}else(0,n.w)(e,t,"url",s)}(e,t,this.source,s)}}}},a={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,i){const r={};return t.imageData&&(r.imageData=t.imageData),t.contentType&&(r.contentType=t.contentType),t.url&&(r.url=s(t.url,i)),r}}}}},54866:(e,t,i)=>{"use strict";i.d(t,{$d:()=>f,GG:()=>T,N7:()=>y,Sx:()=>m,UQ:()=>M,di:()=>S,dt:()=>v,f3:()=>A,k_:()=>d,yG:()=>E});var r=i(93814),n=i(3438),s=i(3132),o=(i(6273),i(23572)),a=i(19913),l=i(77498),c=i(93611),h=i(67175),u=i(13665);const p=new r.A("white");function d(e){if(!e)return 0;if((0,n.wk)(e)){const t=function(e){const t=e.symbolLayers?.at(-1);if(t&&"outline"in t)return t?.outline?.size}(e);return null!=t?t:0}return(0,o.PN)((0,h.$4)(e)?.width)}function f(e){if(null==e||!("symbolLayers"in e)||null==e.symbolLayers)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some((e=>"object"===e.type));case"line-3d":return e.symbolLayers.some((e=>"path"===e.type));case"polygon-3d":return e.symbolLayers.some((e=>"object"===e.type||"extrude"===e.type));default:return!1}}function y(e){return e.resource?.href??""}function m(e,t){if(!e)return null;let i=null;return(0,n.wk)(e)?i=function(e){const t=e.symbolLayers;if(!t)return null;let i=null;return t.forEach((e=>{"object"===e.type&&e.resource?.href||(i="water"===e.type?e.color:e.material?e.material.color:null)})),i?new r.A(i):null}(e):(0,n.$y)(e)&&(i="cim"===e.type?(0,c.Nk)(e):e.color?new r.A(e.color):null),i?g(i,t):null}function g(e,t){if(null==t||null==e)return e;const i=e.toRgba();return i[3]=i[3]*t,new r.A(i)}function v(e,t,i){var s,o,a;e&&(t||null!=i)&&(t&&(t=new r.A(t)),(0,n.wk)(e)?function(e,t,i){const r=e.symbolLayers;if(!r)return;const n=e=>g(t=t??e??(null!=i?p:null),i);r.forEach((e=>{if("object"!==e.type||!e.resource?.href||t)if("water"===e.type)e.color=n(e.color);else{const t=null!=e.material?e.material.color:null,r=n(t);null==e.material?e.material=new u.N({color:r}):e.material.color=r,null!=i&&"outline"in e&&null!=e.outline?.color&&(e.outline.color=g(e.outline.color,i))}}))}(e,t,i):(0,n.$y)(e)&&(s=e,a=i,(o=(o=t)??s.color)&&(s.color=g(o,a)),null!=a&&"outline"in s&&s.outline?.color&&(s.outline.color=g(s.outline.color,a))))}function _(e){for(const t of e)if("number"==typeof t)return t;return null}function b(e,t,i){for(let r=0;r<3;r++){const n=e[r];switch(n){case"symbol-value":{const e=i[r];return null!=e?e/t[r]:1}case"proportional":break;default:if(n&&t[r])return n/t[r]}}return 1}function w(e,t,i,r){switch(e){case"proportional":return i*r;case"symbol-value":return null!=t?t:i;default:return e}}async function M(e,t){if(e&&t)return(0,n.wk)(e)?async function(e,t){const r=e.symbolLayers;r&&await(0,s.jJ)(r,(async e=>async function(e,t){switch(e.type){case"extrude":!function(e,t){e.size="number"==typeof t[2]?t[2]:0}(e,t);break;case"icon":case"line":case"text":!function(e,t){const i=_(t);null!=i&&(e.size=i)}(e,t);break;case"path":!function(e,t){const i=b(t,a.Un,[e.width,void 0,e.height]);e.width=w(t[0],e.width,1,i),e.height=w(t[2],e.height,1,i)}(e,t);break;case"object":await async function(e,t){const{resourceSize:r,symbolSize:n}=await async function(e){const{computeObjectLayerResourceSize:t}=await i.e(8401).then(i.bind(i,8401)),r=await t(e,10),{width:n,height:s,depth:o}=e,a=[n,o,s];let l=1;for(let e=0;e<3;e++){const t=a[e];if(null!=t){l=t/r[e];break}}for(let e=0;e<3;e++)null==a[e]&&(a[e]=r[e]*l);return{resourceSize:r,symbolSize:a}}(e),s=b(t,r,n);e.width=w(t[0],n[0],r[0],s),e.depth=w(t[1],n[1],r[1],s),e.height=w(t[2],n[2],r[2],s)}(e,t)}}(e,t)))}(e,t):void((0,n.$y)(e)&&function(e,t){const i=_(t);if(null!=i)switch(e.type){case"simple-marker":e.size=i;break;case"picture-marker":{const t=e.width/e.height;t>1?(e.width=i,e.height=i*t):(e.width=i*t,e.height=i);break}case"simple-line":e.width=i;break;case"text":e.font.size=i}}(e,t))}function T(e,t,i){if(e&&null!=t)if((0,n.wk)(e)){const r=e.symbolLayers;r&&r.forEach((e=>{if(e&&"object"===e.type)switch(i){case"tilt":e.tilt=(e.tilt??0)+t;break;case"roll":e.roll=(e.roll??0)+t;break;default:e.heading=(e.heading??0)+t}}))}else(0,n.$y)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle+=t))}function S(e){if(!e)return null;const t=e.effects.filter((e=>"bloom"!==e.type)).map((e=>e.toJSON()));return(0,l.zu)(t)}function A(e){return null!=e&&"polygon-3d"===e.type&&e.symbolLayers.some((e=>"extrude"===e.type))}async function E(e,t){return await e.fetchSymbol(t)||e.fetchCIMSymbol(t)}},43983:(e,t,i)=>{"use strict";i.d(t,{I:()=>y,p:()=>f,resolveWebStyleSymbol:()=>d});var r=i(3438),n=i(85012),s=i(62991),o=i(19759),a=i(83382),l=i(55714),c=i(4064),h=i(14176),u=i(65949),p=i(51431);function d(e,t,i,r){const n=e.name;return null==n?Promise.reject(new s.A("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName?function(e,t,i){const r=u.jg.replaceAll(/\{SymbolName\}/gi,e),n=null!=t.portal?t.portal:a.A.getDefault();return(0,u.yA)(r,i).then((e=>{const t=(0,u.bo)(e.data);return(0,c.rS)(t,{portal:n,url:(0,o.An)((0,o.nM)(r)),origin:"portal-item"})}))}(n,t,r):(0,u.cF)(e,t,r).then((e=>y(e,n,t,i,u.o5,r)))}function f(e,t){return t.items.find((t=>t.name===e))}function y(e,t,i,d,y,m){const g=null!=i?.portal?i.portal:a.A.getDefault(),v={portal:g,url:(0,o.An)(e.baseUrl),origin:"portal-item"},_=f(t,e.data);if(!_){const e=`The symbol name '${t}' could not be found`;return Promise.reject(new s.A("symbolstyleutils:symbol-name-not-found",e,{symbolName:t}))}let b=(0,l.f)(y(_,d),v),w=_.thumbnail?.href??null;const M=_.thumbnail?.imageData;(0,n.b5)()&&(b=(0,n.EM)(b)??"",w=(0,n.EM)(w));const T={portal:g,url:(0,o.An)((0,o.nM)(b)),origin:"portal-item"};return(0,u.yA)(b,m).then((n=>{const s="cimRef"===d?(0,u.bo)(n.data):n.data,o=(0,c.rS)(s,T);if(o&&(0,r.wk)(o)){if(w){const e=(0,l.f)(w,v);o.thumbnail=new p.V({url:e})}else M&&(o.thumbnail=new p.V({url:`data:image/png;base64,${M}`}));e.styleUrl?o.styleOrigin=new h.A({portal:i.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(o.styleOrigin=new h.A({portal:i.portal,styleName:e.styleName,name:t}))}return o}))}},23375:(e,t,i)=>{"use strict";i.d(t,{ZS:()=>u,hv:()=>p,qU:()=>s,N5:()=>l,P6:()=>h,L5:()=>o,n$:()=>a});const r=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Almaty"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);var n=i(96285);const s="system",o="unknown",a="UTC",l=Intl.DateTimeFormat().resolvedOptions().timeZone,c="shortOffset";function h(e,t=!1){return{json:{read:{source:e,reader:(t,i)=>i[e]?u(i[e]):null},write:!!t&&{allowNull:!0,writer(t,i){i[e]=t?function(e){return{timeZoneIANA:e}}(t):null}}}}}function u(e,t=s){return e?function(e){return"timeZoneIANA"in e}(e)?e.timeZoneIANA:function(e,t=s){if(!e||!r.has(e.timeZone))return t;const i=r.get(e.timeZone);return function(e){return e.startsWith("UTC")}(e.timeZone)||e.respectsDaylightSaving?i:function(e){const t=n.c9.local().setZone(e),i=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return 0===i?"Etc/UTC":`Etc/GMT${n.mQ.instance(-i).formatOffset(0,"narrow")}`}(i)}(e,t):t}function p(e,t,i,r,n){if(t&&"date"===n)return{timeZone:a,timeZoneName:void 0};const s=r.timeStyle||r.hour,l=i===o;return{timeZone:l?"timestamp-offset"===n?void 0:e??a:i,timeZoneName:l&&s?c:void 0}}},6893:(e,t,i)=>{"use strict";i.d(t,{TA:()=>n,We:()=>a,Z3:()=>s,ZJ:()=>l,w5:()=>c});var r=i(38116);const n=(0,i(1874).vD)(),s=new Map,o=new Map;async function a(e,t,i){if(!e||!i)return!1;if(!t)return!0;const n=new URL(e).host;let o=s.get(n);if(!o){const t=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");o=(await(0,r.A)(t,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return o===t}async function l(e,t,r=!1){if(!e||!t)return!0;const s=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),a=o.get(s)?.entries();if(a)for(const[e,o]of a)if(o.name===t){const t=!o.stack?.hasForwardEdits();if(!t&&r){const[{deleteForwardEdits:t},{default:r}]=await Promise.all([i.e(1611).then(i.bind(i,71611)),i.e(1767).then(i.bind(i,1767))]);return t(s,e,new r({sessionId:n,moment:o.moment}))}return t}return!0}function c(e,t){if(!e)return!1;const i=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),r=o.get(i)?.entries();if(r)for(const[e,i]of r)if(i.name===t)return"edit"===i.lockType;return!1}new Map},43996:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var r=i(62991),n=i(80861),s=i(66220);function o(e,t,i,r,s){if(null==e)return null;const o=e.referencesGeometry()&&s?l(t,r,s):t,a=e.repurposeFeature(o);try{return e.evaluate({...i,$feature:a},e.services)}catch(e){return n.A.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",e),null}}const a=new Map;function l(e,t,i){const{transform:o,hasZ:l,hasM:c}=i;a.has(t)||a.set(t,function(e){const t={};switch(e){case"esriGeometryPoint":return(e,i,r,n)=>(0,s.Tr)(i,t,e,r,n);case"esriGeometryPolygon":return(e,i,r,n)=>(0,s.$X)(i,t,e,r,n);case"esriGeometryPolyline":return(e,i,r,n)=>(0,s.P5)(i,t,e,r,n);case"esriGeometryMultipoint":return(e,i,r,n)=>(0,s.SW)(i,t,e,r,n);default:return n.A.getLogger("esri.views.2d.support.arcadeOnDemand").error(new r.A("mapview-arcade",`Unable to handle geometryType: ${e}`)),e=>e}}(t));const h=a.get(t)(e.geometry,o,l,c);return{...e,geometry:h}}},65294:(e,t,i)=>{"use strict";function r(e,t){const i=e.featureReduction;return i&&"selection"!==i.type&&(!("maxScale"in i)||!i.maxScale||i.maxScale<t.scale)?i:null}i.d(t,{n:()=>r})},17142:(e,t,i)=>{"use strict";i.d(t,{F:()=>l});var r=i(50398),n=i(8e3),s=i(2532),o=i(36767),a=i(39156);class l{constructor(e,t){this.key=new a.A(0,0,0,0),this.bounds=(0,s.vt)(),this.objectIds=new Set,this.key.set(t);const i=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=i.resolution,this.scale=i.scale,this.level=i.level}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return n.A.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(e){return{$view:{scale:this.scale,timeZone:e}}}createChildTiles(){const e=this.key.getChildKeys(),t=r.A.acquire();for(let i=0;i<e.length;i++)t[i]=new l(this.tileInfoView,e[i]);return t}getQuantizationParameters(){return o.A.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}},43621:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var r=i(82392),n=i(93814),s=i(73783),o=i(81482),a=(i(6273),i(80861),i(67498),i(26325));let l=class extends s.A{constructor(){super(...arguments),this.color=new n.A([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25,this.multiHighlightEnabled=!1}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity&&this.multiHighlightEnabled===e.multiHighlightEnabled}};(0,r._)([(0,o.MZ)({type:n.A})],l.prototype,"color",void 0),(0,r._)([(0,o.MZ)({type:n.A})],l.prototype,"haloColor",void 0),(0,r._)([(0,o.MZ)()],l.prototype,"haloOpacity",void 0),(0,r._)([(0,o.MZ)()],l.prototype,"fillOpacity",void 0),(0,r._)([(0,o.MZ)()],l.prototype,"multiHighlightEnabled",void 0),l=(0,r._)([(0,a.$)("esri.views.2d.support.HighlightOptions")],l);const c=l},90436:(e,t,i)=>{"use strict";i.d(t,{K:()=>r});class r{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),e.includes("Brush")&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}}},57021:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var r=i(39744),n=i(39156);class s{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}*keys(){const e=this.lodInfo;for(const{row:t,colFrom:i,colTo:r}of this.spans)for(let s=i;s<=r;s++){const i=e.getWorldForColumn(s);yield new n.A(e.level,t,e.normalizeCol(s),i)}}forEach(e,t){const{spans:i,lodInfo:r}=this,{level:n}=r;if(0!==i.length)for(const{row:s,colFrom:o,colTo:a}of i)for(let i=o;i<=a;i++)e.call(t,n,s,r.normalizeCol(i),r.getWorldForColumn(i))}}s.pool=new r.A(s)},62516:(e,t,i)=>{"use strict";i.d(t,{A:()=>f});var r=i(67488),n=i(39156);function s(e,t){return[e,t]}function o(e,t,i){return e[0]=t,e[1]=i,e}const a=new n.A("0/0/0/0");class l{static create(e,t,i=null){const n=(0,r.Vp)(e.spatialReference),a=t.origin||s(e.origin.x,e.origin.y),c=s(e.size[0]*t.resolution,e.size[1]*t.resolution),h=s(-1/0,-1/0),u=s(1/0,1/0),p=s(1/0,1/0);null!=i&&(o(h,Math.max(0,Math.floor((i.xmin-a[0])/c[0])),Math.max(0,Math.floor((a[1]-i.ymax)/c[1]))),o(u,Math.max(0,Math.floor((i.xmax-a[0])/c[0])),Math.max(0,Math.floor((a[1]-i.ymin)/c[1]))),o(p,u[0]-h[0]+1,u[1]-h[1]+1));const{cols:d,rows:f}=t;let y,m,g,v;return!i&&d&&f&&(o(h,d[0],f[0]),o(u,d[1],f[1]),o(p,d[1]-d[0]+1,f[1]-f[0]+1)),e.isWrappable?(y=s(Math.ceil(Math.round((n.valid[1]-n.valid[0])/t.resolution)/e.size[0]),p[1]),m=s(Math.floor((n.origin[0]-a[0])/c[0]),h[1]),g=s(y[0]+m[0]-1,u[1]),v=!0):(m=h,g=u,y=p,v=!1),new l(t.level,t.resolution,t.scale,a,h,u,p,c,m,g,y,v)}constructor(e,t,i,r,n,s,o,a,l,c,h,u){this.level=e,this.resolution=t,this.scale=i,this.origin=r,this.first=n,this.last=s,this.size=o,this.norm=a,this.worldStart=l,this.worldEnd=c,this.worldSize=h,this.wrap=u}normalizeCol(e){if(!this.wrap)return e;const t=this.worldSize[0];return e<0?t-1-Math.abs((e+1)%t):e%t}denormalizeCol(e,t){return this.wrap?this.worldSize[0]*t+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){return this.origin[0]+e*this.norm[0]}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,t,i=!1){a.set(t);const r=i?a.col:this.denormalizeCol(a.col,a.world),n=a.row;return function(e,t,i,r,n){e[0]=t,e[1]=i,e[2]=r,e[3]=n}(e,this.getXForColumn(r),this.getYForRow(n+1),this.getXForColumn(r+1),this.getYForRow(n)),e}getTileCoords(e,t,i=!1){a.set(t);const r=i?a.col:this.denormalizeCol(a.col,a.world);return Array.isArray(e)?o(e,this.getXForColumn(r),this.getYForRow(a.row)):(e.x=this.getXForColumn(r),e.y=this.getYForRow(a.row)),e}}var c=i(57021);class h{constructor(e,t,i){this.row=e,this.colFrom=t,this.colTo=i}}const u=new n.A("0/0/0/0");class p{static create(e,t){e[1]>t[1]&&([e,t]=[t,e]);const[i,r]=e,[n,s]=t,o=n-i,a=s-r,l=0!==a?o/a:0,c=(Math.ceil(r)-r)*l,h=(Math.floor(r)-r)*l;return new p(i,Math.floor(r),Math.ceil(s),l,o<0?c:h,o<0?h:c,o<0?n:i,o<0?i:n)}constructor(e,t,i,r,n,s,o,a){this.x=e,this.ymin=t,this.ymax=i,this.invM=r,this.leftAdjust=n,this.rightAdjust=s,this.leftBound=o,this.rightBound=a}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const d=[[0,0],[0,0],[0,0],[0,0]];class f{constructor(e,t=null,i=e.lods[0].level,r=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=t,this.scales=[],this._infoByScale={},this._infoByLevel={};const n=e.lods.filter((e=>e.level>=i&&e.level<=r));this.minScale=n[0].scale,this.maxScale=n[n.length-1].scale;const s=this._lodInfos=n.map((i=>l.create(e,i,t)));n.forEach(((e,t)=>{this._infoByLevel[e.level]=s[t],this._infoByScale[e.scale]=s[t],this.scales[t]=e.scale}),this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel["number"==typeof e?e:e.level]}getTileBounds(e,t,i=!1){u.set(t);const r=this._infoByLevel[u.level];return r?r.getTileBounds(e,u,i):e}getTileCoords(e,t,i=!1){u.set(t);const r=this._infoByLevel[u.level];return r?r.getTileCoords(e,u,i):e}getTileCoverage(e,t=192,i=!0,r="closest"){if(!i&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const n="closest"===r?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),s=c.A.pool.acquire(n),o=this._wrap;let a,l,u,f=1/0,y=-1/0;const m=s.spans;d[0][0]=d[0][1]=d[1][1]=d[3][0]=-t,d[1][0]=d[2][0]=e.size[0]+t,d[2][1]=d[3][1]=e.size[1]+t;for(const t of d)e.toMap(t,t),t[0]=n.getColumnForX(t[0]),t[1]=n.getRowForY(t[1]);const g=[];let v=3;for(let e=0;e<4;e++){if(d[e][1]===d[v][1]){v=e;continue}const t=p.create(d[e],d[v]);f=Math.min(t.ymin,f),y=Math.max(t.ymax,y),void 0===g[t.ymin]&&(g[t.ymin]=[]),g[t.ymin].push(t),v=e}if(null==f||null==y||y-f>100)return null;let _=[];for(a=f;a<y;){null!=g[a]&&(_=_.concat(g[a])),l=1/0,u=-1/0;for(let e=_.length-1;e>=0;e--){const t=_[e];l=Math.min(l,t.getLeftCol()),u=Math.max(u,t.getRightCol())}if(l=Math.floor(l),u=Math.floor(u),a>=n.first[1]&&a<=n.last[1])if(o)if(n.size[0]<n.worldSize[0]){const e=Math.floor(u/n.worldSize[0]);for(let t=Math.floor(l/n.worldSize[0]);t<=e;t++)m.push(new h(a,Math.max(n.getFirstColumnForWorld(t),l),Math.min(n.getLastColumnForWorld(t),u)))}else m.push(new h(a,l,u));else l>n.last[0]||u<n.first[0]||(l=Math.max(l,n.first[0]),u=Math.min(u,n.last[0]),m.push(new h(a,l,u)));a+=1;for(let e=_.length-1;e>=0;e--){const t=_[e];t.ymax>=a?t.incrRow():_.splice(e,1)}}return s}getTileParentId(e){u.set(e);const t=this._infoByLevel[u.level],i=this._lodInfos.indexOf(t)-1;return i<0?null:(this._getTileIdAtLOD(u,this._lodInfos[i],u),u.id)}getTileResolution(e){const t=this._infoByLevel["object"==typeof e?e.level:e];return t?t.resolution:-1}getTileScale(e){const t=this._infoByLevel[e.level];return t?t.scale:-1}intersects(e,t){u.set(t);const i=this._infoByLevel[u.level],r=e.lodInfo;if(r.resolution>i.resolution){this._getTileIdAtLOD(u,r,u);const t=r.denormalizeCol(u.col,u.world);for(const i of e.spans)if(i.row===u.row&&i.colFrom<=t&&i.colTo>=t)return!0}if(r.resolution<i.resolution){const[t,n,s,o]=e.spans.reduce(((e,t)=>(e[0]=Math.min(e[0],t.row),e[1]=Math.max(e[1],t.row),e[2]=Math.min(e[2],t.colFrom),e[3]=Math.max(e[3],t.colTo),e)),[1/0,-1/0,1/0,-1/0]),a=i.denormalizeCol(u.col,u.world),l=r.getColumnForX(i.getXForColumn(a)),c=r.getRowForY(i.getYForRow(u.row)),h=r.getColumnForX(i.getXForColumn(a+1))-1,p=r.getRowForY(i.getYForRow(u.row+1))-1;return!(l>o||h<s||c>n||p<t)}const n=r.denormalizeCol(u.col,u.world);return e.spans.some((e=>e.row===u.row&&e.colFrom<=n&&e.colTo>=n))}normalizeBounds(e,t,i){if(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],this._wrap){const t=(0,r.Vp)(this.tileInfo.spatialReference),n=-i*(t.valid[1]-t.valid[0]);e[0]+=n,e[2]+=n}return e}getSmallestInfoForScale(e){const t=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>t[0])return this._infoByScale[t[0]];for(let i=1;i<t.length-1;i++)if(e>t[i]+1e-6)return this._infoByScale[t[i-1]];return this._infoByScale[t[t.length-1]]}getClosestInfoForScale(e){const t=this.scales;return this._infoByScale[e]||(e=t.reduce(((t,i)=>Math.abs(i-e)<Math.abs(t-e)?i:t),t[0])),this._infoByScale[e]}scaleToLevel(e){const t=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let i=t.length-1;i>=0;i--)if(e<t[i])return i===t.length-1?this._infoByScale[t[t.length-1]].level:this._infoByScale[t[i]].level+(t[i]-e)/(t[i]-t[i+1]);return this._infoByScale[t[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}_getTileIdAtLOD(e,t,i){const r=this._infoByLevel[i.level];return e.set(i),t.resolution<r.resolution?null:(t.resolution===r.resolution||(e.level=t.level,e.col=Math.floor(i.col*r.resolution/t.resolution+.01),e.row=Math.floor(i.row*r.resolution/t.resolution+.01)),e)}}},39156:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});var r=i(39744);class n{static getId(e,t,i,r){return"object"==typeof e?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${t}/${i}/${r}`}constructor(e,t,i,r){this.set(e,t,i,r)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(e){this.set(e)}get hash(){const e=4095&this.row,t=4095&this.col,i=63&this.level;return(3&this.world)<<30|t<<22|e<<8|i}acquire(e,t,i,r){this.set(e,t,i,r)}contains(e){const t=e.level-this.level;return t>=0&&this.row===e.row>>t&&this.col===e.col>>t&&this.world===e.world}containsChild(e){const t=e.level-this.level;return t>0&&this.row===e.row>>t&&this.col===e.col>>t&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new n(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,t,i,r){if(null==e)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof e)this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if("string"==typeof e){const[t,i,r,n]=e.split("/");this.level=parseFloat(t),this.row=parseFloat(i),this.col=parseFloat(r),this.world=parseFloat(n)}else this.level=+e,this.row=+t,this.col=+i,this.world=+r||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new n(this.level-1,this.row>>1,this.col>>1,this.world)}getNeighborId(e,t){return`${this.level}/${this.row+t}/${this.col+e}/${this.world}`}getChildKeys(){const e=this.level+1,t=this.row<<1,i=this.col<<1,r=this.world;return[new n(e,t,i,r),new n(e,t,i+1,r),new n(e,t+1,i,r),new n(e,t+1,i+1,r)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}}n.pool=new r.A(n,null,null,25,50)},7836:(e,t,i)=>{"use strict";i.d(t,{A:()=>y});var r=i(82392),n=i(73783),s=i(57725),o=i(81482),a=(i(6273),i(80861),i(67498),i(26325)),l=i(53334),c=i(72963);const h=new Set,u=[],p=new Map,d=[0,0];let f=class extends n.A{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t,strategy:i}=this;this._queue=new c.e({concurrency:e,process:(e,i)=>{const r=this._keyToItem.get(e);return t(r,{signal:i})},peeker:"scale-first"===i?e=>this._peekByScaleFirst(e):e=>this._peekByCenterFirst(e)})}destroy(){this.clear(),this._queue=(0,s.pR)(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}abort(e){const t="string"==typeof e?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear()}has(e){return"string"==typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e){const t=e.key.id;if(this._queue.has(t))return this._queue.get(t);const i=this._queue.push(t),r=()=>{this._keyToItem.delete(t)};return this._keyToItem.set(t,e),i.then(r,r),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach((e=>{const t=this._keyToItem.get(e),n=this.tileInfoView.getTileScale(t.key);p.has(n)||(p.set(n,[]),i=Math.max(n,i),r=Math.min(n,r)),p.get(n).push(t.key),h.add(n)}));let n=this.state.scale;p.has(n)||(function(e,t){e.length=0,t.forEach((t=>e.push(t)))}(u,h),u.sort(((e,t)=>e-t)),n=u.reduce(((e,t)=>Math.abs(t-n)<Math.abs(e-n)?t:e),u[0])),n=Math.min(n,i),n=Math.max(n,r);const s=p.get(n),o=t.getClosestInfoForScale(n),a=o.getColumnForX(this.state.center[0]),l=o.getRowForY(this.state.center[1]);return s.sort(((e,t)=>{const i=o.denormalizeCol(e.col,e.world),r=o.denormalizeCol(t.col,t.world);return Math.sqrt((a-i)*(a-i)+(l-e.row)*(l-e.row))-Math.sqrt((a-r)*(a-r)+(l-t.row)*(l-t.row))})),h.clear(),p.clear(),s[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let r,n=Number.POSITIVE_INFINITY;return e.forEach((e=>{const s=this._keyToItem.get(e);t.getTileCoords(d,s.key);const o=(0,l.Io)(d,i);o<n&&(n=o,r=s.key)})),r.id}};(0,r._)([(0,o.MZ)({constructOnly:!0})],f.prototype,"concurrency",void 0),(0,r._)([(0,o.MZ)({constructOnly:!0})],f.prototype,"process",void 0),(0,r._)([(0,o.MZ)()],f.prototype,"state",void 0),(0,r._)([(0,o.MZ)({constructOnly:!0})],f.prototype,"strategy",void 0),(0,r._)([(0,o.MZ)({constructOnly:!0})],f.prototype,"tileInfoView",void 0),f=(0,r._)([(0,a.$)("esri.views.2d.tiling.TileQueue")],f);const y=f},11679:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var r=i(2532),n=i(53334);class s{constructor(e,t,i){this.maxSize=e,this._tileInfoView=t,this._removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const t=this._tilePerId.get(e);if(!t)return;const i=t.key.level,r=this._tileKeysPerLevel[i];o(this._tilePerId,e);for(let t=0;t<r.length;t++)if(r[t].id===e){r.splice(t,1);break}return t.visible=!0,t}add(e){e.visible=!1;const t=e.key,i=t.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,e);const r=t.level;this._tileKeysPerLevel[r]||(this._tileKeysPerLevel[r]=[]),this._tileKeysPerLevel[r].push(t)}prune(e,t,i){let r=this._tilePerId.size;if(r<=this.maxSize)return;let n=this._tileKeysPerLevel.length-1;for(;r>this.maxSize&&n>=0;)n!==e&&(r=this._pruneAroundCenterTile(r,t,i,n)),n--;r>this.maxSize&&(r=this._pruneAroundCenterTile(r,t,i,e))}_pruneAroundCenterTile(e,t,i,r){const s=this._tileKeysPerLevel[r];if(!s||0===s.length)return e;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=i*o[0],c=i*o[1],h=[0,0],u=[0,0];for(s.sort(((e,i)=>(h[0]=a.x+l*(e.col+.5),h[1]=a.y-c*(e.row+.5),u[0]=a.x+l*(i.col+.5),u[1]=a.y-c*(i.row+.5),(0,n.hG)(h,t)-(0,n.hG)(u,t))));s.length>0;){const t=s.pop();if(this._removeTile(t.id),--e===this.maxSize)break}return e}_removeTile(e){const t=this._tilePerId.get(e);this._removedFunc&&t&&this._removedFunc(t),o(this._tilePerId,e)}}function o(e,t){e.delete(t)}var a=i(57021);const l=new(i(39156).A)(0,0,0,0),c=new Map,h=[],u=[];class p{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,null!=e.resampling&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),null!=e.buffer&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new s(e.cacheSize,this.tileInfoView,(e=>{this.releaseTile(e)})))}destroy(){this.tileIndex.clear()}update(e){const{resampling:t,tileIndex:i}=this,{scale:r,center:n,resolution:s}=e.state,{minScale:o,maxScale:p}=this.tileInfoView,d=!e.stationary&&r>this._previousScale;if(this._previousScale=r,!t&&(r>o||r<p))return this.tiles.length=0,void this.clear();const f=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!f)return this.tiles.length=0,void this.clear();const{spans:y,lodInfo:m}=f,{level:g}=m;this.tiles.length=0,i.forEach((e=>e.visible=!0));let v=0,_=0;if(y.length>0)for(const{row:e,colFrom:t,colTo:r}of y)for(let n=t;n<=r;n++){v++;const t=l.set(g,e,m.normalizeCol(n),m.getWorldForColumn(n)).id;let r=i.get(t);if(r)r.isReady?(c.set(t,r),_++):d||this._addParentTile(t,c);else{if(this._tileCache?.has(t)){if(r=this._tileCache.pop(t),this.tileIndex.set(t,r),r.isReady){c.set(t,r),_++;continue}}else r=this.acquireTile(l),this.tileIndex.set(t,r);d||this._addParentTile(t,c)}}const b=_===v;for(const[e,t]of i){if(c.has(e))continue;l.set(e);const i=this.tileInfoView.intersects(f,l),r="purge"===this.cachePolicy?l.level!==g:l.level>g;!i||!d&&b?!r&&i||h.push(t):t.isReady?r&&"purge"===this.cachePolicy&&this._hasReadyAncestor(l,g)?h.push(t):u.push(t):r&&h.push(t)}for(const e of u)e.isReady&&c.set(e.key.id,e);for(const e of h)this._tileCache?this._tileCache.add(e):this.releaseTile(e),i.delete(e.key.id);for(const e of c.values())this.tiles.push(e);for(const e of i.values())c.has(e.key.id)||(e.visible=!1);this._tileCache?.prune(g,n,s),a.A.pool.release(f),u.length=0,h.length=0,c.clear()}clear(){const{tileIndex:e}=this;for(const t of e.values())this.releaseTile(t);e.clear()}refresh(e){for(const t of this.tileIndex.values())this.tiles.includes(t)?e(t):h.push(t);for(const e of h)this.releaseTile(e),this.tileIndex.delete(e.key.id);this._tileCache?.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,t){let i=e,r=null;for(;i=this.tileInfoView.getTileParentId(i),i;)if(this.tileIndex.has(i)){if(r=this.tileIndex.get(i),r?.isReady){t.has(r.key.id)||t.set(r.key.id,r);break}}else if(this._tileCache?.has(i)&&(r=this._tileCache.pop(i),this.tileIndex.set(i,r),r?.isReady)){t.has(r.key.id)||t.set(r.key.id,r);break}}_hasReadyAncestor(e,t){const i=(0,r.vt)();this.tileInfoView.getTileBounds(i,e,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=t&&n.key.level<e.level){const e=(0,r.vt)();if(this.tileInfoView.getTileBounds(e,n.key,!0),(0,r.gR)(e,i))return!0}return!1}}},63486:(e,t,i)=>{"use strict";function r(e,t,i,r){const n=3*e,s=3*(i-e)-n,o=1-n-s,a=3*t,l=3*(r-t)-a,c=1-a-l;function h(e){return((o*e+s)*e+n)*e}function u(e){return(3*o*e+2*s)*e+n}return function(e,t=1e-6){return function(e){return((c*e+l)*e+a)*e}(function(e,t){let i,r,n,s,o,a;for(n=e,a=0;a<8;a++){if(s=h(n)-e,Math.abs(s)<t)return n;if(o=u(n),Math.abs(o)<1e-6)break;n-=s/o}if(i=0,r=1,n=e,n<i)return i;if(n>r)return r;for(;i<r;){if(s=h(n),Math.abs(s-e)<t)return n;e>s?i=n:r=n,n=.5*(r-i)+i}return n}(e,t))}}i.d(t,{Z0:()=>s,gb:()=>r,qg:()=>o});const n=/^cubic-bezier\((.*)\)/,s={};function o(e){let t=s[e]||null;if(!t){const i=n.exec(e);if(i){const e=i[1].split(",").map((e=>parseFloat(e.trim())));4!==e.length||e.some((e=>isNaN(e)))||(t=r.apply(r,e))}}return t}s.ease=r(.25,.1,.25,1),s.linear=r(0,0,1,1),s.easeIn=s["ease-in"]=r(.42,0,1,1),s.easeOut=s["ease-out"]=r(0,0,.58,1),s.easeInOut=s["ease-in-out"]=r(.42,0,.58,1)},86757:(e,t,i)=>{"use strict";i.d(t,{$0:()=>q,AU:()=>A,C:()=>C,FT:()=>z,GL:()=>F,Hn:()=>P,Ji:()=>B,RG:()=>j,UR:()=>K,WK:()=>Y,XR:()=>$,Z7:()=>N,aA:()=>ee,b:()=>L,b8:()=>O,cp:()=>Z,hV:()=>U,iB:()=>k,nr:()=>G,qV:()=>J,s5:()=>V,tj:()=>H,vt:()=>I});var r=i(39702),n=i(58842),s=i(4506),o=i(5262),a=i(78115),l=i(94464),c=i(92374),h=i(53334),u=i(56560),p=i(8e3),d=i(61064),f=i(8977),y=i(34561),m=i(44153),g=i(87249),v=i(67488);const _=96,b=39.37,w=180/Math.PI;function M(e){return e.wkid?e:e.spatialReference||m.A.WGS84}function T(e,t){return t.type?(0,h.hZ)(e,t.x,t.y):(0,h.C)(e,t)}function S(e){return(0,o.GA)(e)}function A(e,t,i=0){let r=e.width,n=e.height;if(0!==i){const t=(0,s.kU)(i),o=Math.abs(Math.cos(t)),a=Math.abs(Math.sin(t));r=e.width*o+e.height*a,n=e.width*a+e.height*o}const o=Math.max(1,t[0]),a=Math.max(1,t[1]);return Math.max(r/o,n/a)*function(e){return(0,v.fn)(e)?S(e)*b*_:1}(e.spatialReference)}async function E(e,t,i,r){let s,o;if(!e)return null;if(Array.isArray(e)&&!e.length)return null;if(n.A.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&"object"==typeof e[0]){const n=e.every((e=>"attributes"in e)),s=e.some((e=>!e.geometry));let o=e;if(n&&s&&t&&t.allLayerViews){const i=new Map;for(const t of e){const e=t.layer,r=i.get(e)||[],n=t.attributes[e.objectIdField];null!=n&&r.push(n),i.set(e,r)}const r=[];i.forEach(((e,i)=>{const n=t.allLayerViews.find((e=>e.layer.id===i.id));if(n&&"queryFeatures"in n){const t=i.createQuery();t.objectIds=e,t.returnGeometry=!0,r.push(n.queryFeatures(t))}}));const n=await Promise.all(r),s=[];for(const e of n)if(e&&e.features&&e.features.length)for(const t of e.features)null!=t.geometry&&s.push(t.geometry);o=s}for(const e of o)r=await E(e,t,i,r);return r}if(Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1])s=new f.A(e);else if(e instanceof d.A)s=e;else if("geometry"in e)if(e.geometry)s=e.geometry;else if(e.layer){const i=e.layer,r=t.allLayerViews.find((e=>e.layer.id===i.id));if(r&&"queryFeatures"in r){const t=i.createQuery();t.objectIds=[e.attributes[i.objectIdField]],t.returnGeometry=!0;const n=await r.queryFeatures(t);s=n?.features?.[0]?.geometry}}if(null==s)return null;switch(s.type){case"point":o=new p.A({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":o=(0,g.Hr)(s);break;default:o=s.extent}if(!o)return null;(0,y.isLoaded)()||(0,y.canProjectWithoutEngine)(o.spatialReference,i)||await(0,y.load)();const a=(0,y.project)(o,i);return a?r=r?r.union(a):a:null}function x(e,t){return(0,v.aI)(M(e),t)?e:(0,y.project)(e,t)}async function I(e,t){if(!e||!t)return new r.A({targetGeometry:new f.A,scale:0,rotation:0});let i=t.spatialReference;const{constraints:n,padding:s,viewpoint:o,size:a}=t,l=[s?a[0]-s.left-s.right:a[0],s?a[1]-s.top-s.bottom:a[1]];let c=null;e instanceof r.A?c=e:e.viewpoint?c=e.viewpoint:e.target&&"esri.Viewpoint"===e.target.declaredClass&&(c=e.target);let h=null;c?.targetGeometry?h=c.targetGeometry:e instanceof p.A?h=e:(e||e&&("center"in e||"extent"in e||"target"in e))&&(h=await E(e.center,t,i)||await E(e.extent,t,i)||await E(e.target,t,i)||await E(e,t,i)),!h&&o?.targetGeometry?h=o.targetGeometry:!h&&t.extent&&(h=t.extent),i||(i=M(t.spatialReference||t.extent||h)),(0,y.isLoaded)()||(0,v.aI)(h.spatialReference,i)||(0,y.canProjectWithoutEngine)(h.spatialReference,i)||await(0,y.load)();const u=x(h,i),d="center"in u?u.center:u;!1!==t.pickClosestTarget&&"point"===d.type&&"point"===o.targetGeometry?.type&&(d.x=(0,g.O7)(d.x,o.targetGeometry.x,d.spatialReference));let m=0;c?m=c.rotation:e.hasOwnProperty("rotation")?m=e.rotation:o&&(m=o.rotation);let _=0;if(null!=c?.targetGeometry&&"point"===c.targetGeometry.type)_=c.scale;else if("scale"in e&&e.scale)_=e.scale;else if("zoom"in e&&-1!==e.zoom&&n&&n.effectiveLODs)_=n.zoomToScale(e.zoom);else if(Array.isArray(h)||"point"===h.type||"extent"===h.type&&0===h.width&&0===h.height){const e=x(t.extent,i);_=null!=e?A(e,l,m):t.extent?A(t.extent,l,m):o.scale}else _=A(x(h.extent,i),l,m);const b=function(e){if(e&&(!Array.isArray(e)||"number"!=typeof e[0])&&("object"==typeof e||Array.isArray(e)&&"object"==typeof e[0])){if("layer"in e&&null!=e.layer?.minScale&&null!=e.layer.maxScale){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every((e=>"layer"in e))){let t=0,i=0;for(const r of e){const e=r.layer;e?.minScale&&e.maxScale&&(t=e.minScale<t?e.minScale:t,i=e.maxScale>i?e.maxScale:i)}return t&&i?{min:t,max:i}:null}}}(e.target??e);b&&(b.min&&b.min<_?_=b.min:b.max&&b.max>_&&(_=b.max));let w=new r.A({targetGeometry:d,scale:_,rotation:m});return n&&(w=n.fit(w),n.constrainByGeometry(w),n.rotationEnabled||(w.rotation=o.rotation)),w}function C(e,t){const i=e.targetGeometry,r=t.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function k(e,t,i){return i?(0,h.hZ)(e,.5*(t[0]-i.right+i.left),.5*(t[1]-i.bottom+i.top)):(0,h.hs)(e,t,.5)}const N=function(){const e=(0,u.vt)();return function(t,i,r){const n=i.targetGeometry;T(e,n);const s=.5*P(i);return t.xmin=e[0]-s*r[0],t.ymin=e[1]-s*r[1],t.xmax=e[0]+s*r[0],t.ymax=e[1]+s*r[1],t.spatialReference=n.spatialReference,t}}();function L(e,t,i,r,n){return B(e,t,i.center),e.scale=A(i,r),n?.constraints?.constrain(e),e}const O=function(){const e=(0,u.vt)();return function(t,i,r){return(0,h.jb)(t,function(e,t){return(0,h.hs)(e,t,.5)}(t,i),k(e,i,r))}}(),R=function(){const e=(0,c.vt)(),t=(0,u.vt)();return function(i,r,n,s){const o=P(r),a=D(r);return(0,h.hZ)(t,o,o),(0,l.CV)(e,t),(0,l.e$)(e,e,a),(0,l.Tl)(e,e,O(t,n,s)),(0,l.Tl)(e,e,[0,s.top-s.bottom]),(0,h.hZ)(i,e[4],e[5])}}();function P(e){return e.scale*function(e){return null!=e&&(0,v.fn)(e.spatialReference)?1/(S(e.spatialReference)*b*_):1}(e.targetGeometry)}function D(e){return(0,a.DF)(e.rotation)||0}const F=function(){const e=(0,u.vt)(),t=(0,u.vt)(),i=(0,u.vt)();return function(r,n,s,o,a,c){return(0,h.ze)(e,n),(0,h.hs)(t,s,.5*c),(0,h.hZ)(i,1/o*c,-1/o*c),(0,l.kN)(r,t),a&&(0,l.e$)(r,r,a),(0,l.hs)(r,r,i),(0,l.Tl)(r,r,e),r}}(),j=function(){const e=(0,u.vt)();return function(t,i,r,n){const s=P(i),o=D(i);return T(e,i.targetGeometry),F(t,e,r,s,o,n)}}(),Z=function(){const e=(0,u.vt)();return function(t,i,r,n){const s=P(i);return T(e,i.targetGeometry),F(t,e,r,s,0,n)}}();function z(e){const t=(0,v.Vp)(e);return t?t.valid[1]-t.valid[0]:0}function U(e,t){return Math.round(z(e)/t)}const V=function(){const e=(0,u.vt)(),t=(0,u.vt)(),i=[0,0,0];return function(r,n,s){(0,h.Re)(e,r,n),(0,h.S8)(e,e),(0,h.Re)(t,r,s),(0,h.S8)(t,t),(0,h.$A)(i,e,t);let o=Math.acos((0,h.Om)(e,t)/((0,h.Bw)(e)*(0,h.Bw)(t)))*w;return i[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),G=function(){const e=(0,u.vt)();return function(t,i,r,n){const s=t.targetGeometry;return C(t,i),R(e,i,r,n),s.x+=e[0],s.y+=e[1],t}}(),B=function(e,t,i){C(e,t);const r=e.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e},$=function(){const e=(0,u.vt)();return function(t,i,r,n,s){s||(s="center"),(0,h.jb)(e,r,n),(0,h.hs)(e,e,.5);const o=e[0],a=e[1];switch(s){case"center":(0,h.hZ)(e,0,0);break;case"left":(0,h.hZ)(e,-o,0);break;case"top":(0,h.hZ)(e,0,a);break;case"right":(0,h.hZ)(e,o,0);break;case"bottom":(0,h.hZ)(e,0,-a);break;case"top-left":(0,h.hZ)(e,-o,a);break;case"bottom-left":(0,h.hZ)(e,-o,-a);break;case"top-right":(0,h.hZ)(e,o,a);break;case"bottom-right":(0,h.hZ)(e,o,-a)}return ee(t,i,e),t}}();function H(e,t,i){return C(e,t),e.rotation+=i,e}function q(e,t,i){return C(e,t),e.rotation=i,e}const W=function(){const e=(0,u.vt)();return function(t,i,r,n,s){return C(t,i),isNaN(r)||0===r||(X(e,n,i,s),t.scale=i.scale*r,Q(e,e,t,s),ee(t,t,(0,h.hZ)(e,e[0]-n[0],n[1]-e[1]))),t}}();function K(e,t,i){return C(e,t),e.scale=i,e}const Y=function(){const e=(0,u.vt)();return function(t,i,r,n,s,o){return C(t,i),isNaN(r)||0===r||(X(e,s,i,o),t.scale=i.scale*r,t.rotation+=n,Q(e,e,t,o),ee(t,t,(0,h.hZ)(e,e[0]-s[0],s[1]-e[1]))),t}}(),J=function(){const e=(0,u.vt)(),t=(0,u.vt)();return function(i,r,n,s,o,a,l){return O(t,a,l),(0,h.WQ)(e,o,t),s?Y(i,r,n,s,e,a):W(i,r,n,e,a)}}(),X=function(){const e=(0,c.vt)();return function(t,i,r,n){return(0,h.l0)(t,i,function(e,t,i,r){return j(e,t,i,1),(0,l.B8)(e,e)}(e,r,n))}}(),Q=function(){const e=(0,c.vt)();return function(t,i,r,n){return(0,h.l0)(t,i,j(e,r,n,1))}}(),ee=function(){const e=(0,u.vt)(),t=(0,c.vt)();return function(i,r,n){C(i,r);const s=P(r),o=i.targetGeometry;return(0,l.$0)(t,D(r)),(0,l.hs)(t,t,(0,u.fA)(s,s)),(0,h.l0)(e,n,t),o.x+=e[0],o.y+=e[1],i}}()},78978:(e,t,i)=>{"use strict";var r;function n(e){switch(e){case r.SUPPORTED:break;case r.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case r.GEOMETRY_MISSING:return"no geometry";case r.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case r.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case r.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""}i.d(t,{d:()=>n,e:()=>r}),i(6273),function(e){e[e.SUPPORTED=0]="SUPPORTED",e[e.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING",e[e.GEOMETRY_MISSING=2]="GEOMETRY_MISSING",e[e.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED",e[e.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED",e[e.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"}(r||(r={}))},87327:(e,t,i)=>{"use strict";i.d(t,{N:()=>s}),i(6273);var r=i(19541),n=i(78978);function s(e){if("graphics"!==e.layer?.type)return n.e.GRAPHICS_LAYER_MISSING;if(null==e.geometry)return n.e.GEOMETRY_MISSING;switch(e.geometry.type){case"polygon":case"point":case"polyline":case"mesh":break;default:return n.e.GEOMETRY_TYPE_UNSUPPORTED}return"on-the-ground"!==(0,r.ky)(e)&&(0,r.NN)(e)?n.e.ELEVATION_MODE_UNSUPPORTED:n.e.SUPPORTED}},2252:(e,t,i)=>{"use strict";i.d(t,{N:()=>o,g:()=>a});var r=i(48648),n=i(19541),s=i(78978);function o(e){return l(e).result}function a(e){return l(e).geometry}function l(e){if("graphics"!==e.layer?.type)return{result:s.e.GRAPHICS_LAYER_MISSING,geometry:null};const{geometry:t}=e;if(null==t)return{result:s.e.GEOMETRY_MISSING,geometry:null};if("on-the-ground"!==(0,n.ky)(e)&&(0,n.NN)(e))return{result:s.e.ELEVATION_MODE_UNSUPPORTED,geometry:null};const i=t.type;return"point"!==i&&"mesh"!==i&&"polyline"!==i&&("polygon"!==i||e.geometry instanceof r.A)?{result:s.e.GEOMETRY_TYPE_UNSUPPORTED,geometry:null}:{result:s.e.SUPPORTED,geometry:t}}},6443:(e,t,i)=>{"use strict";i.d(t,{M:()=>s});var r=i(47917),n=i(10319);class s{constructor(e,t){this._owner=t,this._properties={},this._afterDispatchHandle=null;for(const t in e){const i=e[t],n=new r.P(i,void 0,void 0,2,2);this._properties[t]={pool:n,acquired:[]}}this._afterDispatchHandle=(0,n.rs)((()=>this._release()))}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const t=this._properties[e];for(const e of t.acquired)(0,n.Gs)(e)||t.pool.release(e);t.pool.destroy(),t.pool=null,t.acquired=null}this._properties=null,this._owner=null}get(e){const t=this._owner._get(e),i=this._properties[e];let r=i.pool.acquire();for(i.acquired.push(r);r===t;)i.acquired.push(r),r=i.pool.acquire();return r}_release(){for(const e in this._properties){const t=this._properties[e];let i=0;for(const e of t.acquired)(0,n.Gs)(e)?t.acquired[i++]=e:t.pool.release(e);t.acquired.length=i}}}},45773:(e,t,i)=>{"use strict";i.d(t,{VV:()=>a,hG:()=>s,wp:()=>o}),i(4506);var r=i(80347),n=i(19913);function s(e){const t=e[0]*e[0]+e[4]*e[4]+e[8]*e[8],i=e[1]*e[1]+e[5]*e[5]+e[9]*e[9],r=e[2]*e[2]+e[6]*e[6]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}function o(e,t){const i=Math.sqrt(t[0]*t[0]+t[4]*t[4]+t[8]*t[8]),n=Math.sqrt(t[1]*t[1]+t[5]*t[5]+t[9]*t[9]),s=Math.sqrt(t[2]*t[2]+t[6]*t[6]+t[10]*t[10]);return(0,r.s)(e,i,n,s),e}function a(e,t,i){Math.abs(e[0])>Math.abs(e[1])?(0,r.s)(t,0,1,0):(0,r.s)(t,1,0,0),(0,r.b)(i,e,t),(0,r.b)(t,i,e),(0,r.n)(i,i),(0,r.n)(t,t)}(0,n.vt)(),(0,n.vt)(),(0,n.vt)(),(0,n.vt)(),(0,n.vt)()},26421:(e,t,i)=>{"use strict";i.d(t,{L:()=>l,MX:()=>o,M_:()=>h,O_:()=>a,kL:()=>c,vA:()=>s,zH:()=>u});var r=i(56560);i(74772),(0,i(76982).vt)();class n{constructor(e){this.message=e}toString(){return`AssertException: ${this.message}`}}function s(e,t){if(!e){t=t||"Assertion";const e=new Error(t).stack;throw new n(`${t} at ${e}`)}}function o(e,t){e||(t=t||"",console.warn("Verify failed: "+t+"\n"+new Error("verify").stack))}function a(e,t,i,r){let n,s=(i[0]-e[0])/t[0],o=(r[0]-e[0])/t[0];s>o&&(n=s,s=o,o=n);let a=(i[1]-e[1])/t[1],l=(r[1]-e[1])/t[1];if(a>l&&(n=a,a=l,l=n),s>l||a>o)return!1;a>s&&(s=a),l<o&&(o=l);let c=(i[2]-e[2])/t[2],h=(r[2]-e[2])/t[2];return c>h&&(n=c,c=h,h=n),!(s>h||c>o||(h<o&&(o=h),o<0))}function l(e,t,i,n,s,o=(0,r.vt)()){const a=(n[s]-i[s])*(t[0]-e[0])-(n[0]-i[0])*(t[s]-e[s]),l=(n[0]-i[0])*(e[s]-i[s])-(n[s]-i[s])*(e[0]-i[0]);if(0===a)return!1;const c=l/a;return o[0]=e[0]+c*(t[0]-e[0]),o[1]=e[s]+c*(t[s]-e[s]),!0}function c(e,t){return Math.log(e)/Math.log(t)}function h(e,t,i,r){e[12]=t,e[13]=i,e[14]=r}function u(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&1===e[15]}},84456:(e,t,i)=>{"use strict";var r;function n(e){return e===r.Global?"global":"local"}i.d(t,{RT:()=>r,_s:()=>n}),function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"}(r||(r={}))},50889:(e,t,i)=>{"use strict";i.d(t,{O0:()=>O});var r=i(82392),n=i(73783),s=i(57888),o=i(15565),a=i(57725),l=i(36329),c=i(37623),h=i(61985),u=i(23572),p=i(81482),d=(i(6273),i(80861),i(26325)),f=i(58652),y=i(68660),m=i(92801),g=i(19541),v=i(84456);const _="click";class b{constructor({consumesClicks:e,grabbableForEvent:t}){this.events=new s.A,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.consumesClicks=e,this.grabbableForEvent=t}destroy(){}intersectionDistance(e,t){return 0}attach(){}detach(){}onElevationChange(){}onViewChange(){}}var w=i(19793),M=i(66019),T=i(17071),S=i(60141),A=i(46984),E=i(29458),x=i(28535),I=i(51720),C=(i(67498),i(49437));let k=class extends n.A{constructor(e){super(e),this.constrainResult=e=>e,this._snapPoints=null,this._frameTask=null,this._abortController=null,this._stagedPoint=null,this._snap=(0,c.sg)((async(e,t,i,r)=>{const n=this._frameTask;if(null==n)return;const s=await n.schedule((()=>t.snap({...e,context:i,signal:r})),r);s.valid&&await n.schedule((()=>{this.stagedPoint=s.apply(),e!==this._snapPoints&&null!=this._snapPoints&&(this.stagedPoint=t.update({...this._snapPoints,context:i}))}),r)}))}get stagedPoint(){return this._stagedPoint}set stagedPoint(e){this._stagedPoint=this.constrainResult(e)}initialize(){const e="3d"===this.view.type?this.view?.resourceController?.scheduler:null;this._frameTask=null!=e?e.registerTask(C.W6.SNAPPING):C.nu}destroy(){this._abortController=(0,a.DC)(this._abortController),this._frameTask=(0,a.xt)(this._frameTask)}update(e,t,i){this._snapPoints=e;const{point:r,scenePoint:n}=e,s=t.update({point:r,scenePoint:n,context:i});return this.stagedPoint=s,s}async snap(e,t,i){const{point:r,scenePoint:n}=e;return this.stagedPoint=t.update({point:r,scenePoint:n,context:i}),this._snapPoints=e,null==this._abortController&&(this._abortController=new AbortController),this._snap(e,t,i,this._abortController.signal)}async snapAgainNearPreviousMapPoint(e,t){null!=this._snapPoints&&await this.snap(this._snapPoints,e,t)}abort(){this._abortController=(0,a.DC)(this._abortController),this._snapPoints=null}};(0,r._)([(0,p.MZ)({constructOnly:!0})],k.prototype,"view",void 0),(0,r._)([(0,p.MZ)()],k.prototype,"stagedPoint",null),(0,r._)([(0,p.MZ)()],k.prototype,"constrainResult",void 0),(0,r._)([(0,p.MZ)()],k.prototype,"_stagedPoint",void 0),k=(0,r._)([(0,d.$)("esri.views.interactive.snapping.SnappingOperation")],k);var N=i(53981),L=i(4119);let O=class extends(s.A.EventedMixin(n.A)){constructor(e){super(e),this._createOperationCompleted=!1,this._hideDefaultCursor=!1,this._pointerDownStates=new Set,this._stagedScreenPoint=null,this._stagedPointerType=null,this._stagedPointerId=null,this._updatingHandles=new y.U,this.constraintsEnabled=!1,this.constraintInfo=void 0,this._getPointConstraint=(0,l.B)(L.cx),this._getPolylineOrPolygonConstraint=(0,l.B)(L.lJ),this.constraintZ=null,this.defaultZ=null,this.isDraped=!0,this.labelOptions=new E.A,this.cursor=null,this.loading=!1,this.snapToSceneEnabled=null,this.firstVertex=null,this.lastVertex=null,this.secondToLastVertex=null,null==e.elevationInfo&&(this.elevationInfo=(0,g.bK)(!!e.hasZ))}initialize(){const{geometryType:e,view:t}=this,i=t.spatialReference,r="viewingMode"in t.state?t.state.viewingMode:v.RT.Local,n="segment"===e||"multipoint"===e?"polyline":e;this.coordinateHelper=(0,w.BV)(this.hasZ,this.hasM,i),this._editGeometryOperations=new S.p(new T.ZE(n,this.coordinateHelper)),this._snappingOperation=new k({view:t}),this.addHandles([(0,h.wB)((()=>({stagedPoint:this._snappingOperation.stagedPoint,constraint:this.constraint})),(({stagedPoint:e,constraint:t},i)=>{const{snappingOptions:r}=this;if(r&&(r.forceDisabled=null!=t&&(0,A.fT)(t),r.constraintsActive=null!=this.constraintInfo?.distance||null!=this.constraintInfo?.direction),null!=i&&e===i.stagedPoint&&t!==i.constraint)return this._onKeyboardBasedChange();this._processCursor(e??this._screenToMap(this._stagedScreenPoint))}),{sync:!0,equals:(e,t)=>e.stagedPoint===t.stagedPoint&&(0,a.CM)(e.constraint,t.constraint)}),(0,h.wB)((()=>this.view.viewpoint),((e,t)=>{e&&t&&(0,f.Ui)(e,t)&&this._onKeyboardBasedChange()}))]),this._activeComponent=new T.uA(i,r),this._editGeometryOperations.data.components.push(this._activeComponent);const s=this.segmentLabels;null!=s&&(s.context={view:t,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.addHandles((0,h.wB)((()=>this.labelOptions.enabled),(e=>{s.visible=e}),h.pc))),this.addHandles(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],(e=>{const t=e.vertices.map((e=>({componentIndex:0,vertexIndex:e.index,coordinates:this.coordinateHelper.vectorToArray(e.pos)}))),i=t.map((e=>e.coordinates)),r=this.coordinateHelper.vectorToDehydratedPoint(this._activeComponent.getFirstVertex()?.pos)??null;(0,m.CI)(r,this.firstVertex)||(this.firstVertex=r);const n=this.coordinateHelper.vectorToDehydratedPoint(this._activeComponent.getLastVertex()?.pos)??null;(0,m.CI)(n,this.lastVertex)||(this.lastVertex=n);const s=this.coordinateHelper.vectorToDehydratedPoint(this._activeComponent.edges.at(-1)?.leftVertex?.pos)??null;switch((0,m.CI)(s,this.secondToLastVertex)||(this.secondToLastVertex=s),this._processCursor(this.cursorVertex),e.type){case"vertex-add":this.emit(e.type,{...e,added:i,vertices:t});break;case"vertex-update":this.emit(e.type,{...e,updated:i,vertices:t});break;case"vertex-remove":this.emit(e.type,{...e,removed:i,vertices:t})}})));const o=this._manipulator=new b({consumesClicks:!1,grabbableForEvent:e=>"click"!==this.drawingMode||"touch"===e.pointerType&&this._snappingEnabled&&1===this._pointerDownStates.size});this.manipulators.add(o),o.grabbable="point"!==e,this.addHandles([this._createManipulatorDragPipeline(o),o.events.on("immediate-click",(e=>this._onImmediateClick(e))),o.events.on("immediate-double-click",(e=>this._onImmediateDoubleClick(e))),(0,h.wB)((()=>({effectiveCursor:this.effectiveCursor})),(({effectiveCursor:e})=>{o.cursor=e}),h.pc)]),(0,N.BY)(this,(()=>{const e=this.view.inputManager.latestPointerType??"mouse",t=this._getSnappingContext(e);null!=this.snappingManager&&this._updatingHandles.addPromise((0,c.QZ)(this._snappingOperation.snapAgainNearPreviousMapPoint(this.snappingManager,t)))}))}destroy(){(0,a.pR)(this.segmentLabels),(0,a.pR)(this._snappingOperation),this._editGeometryOperations=(0,a.pR)(this._editGeometryOperations),this._updatingHandles.destroy()}get _snappingEnabled(){return null!=this.snappingManager&&this.snappingManager.options.effectiveEnabled}get _requiresScenePoint(){const e=this._updateAndGetEffectiveDrawSurface();return"3d"===this.view.type&&this.drawSurface!==e}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map((e=>this.coordinateHelper.vectorToArray(e.pos)))}get constraint(){const{constraintInfo:e,constraintsEnabled:t}=this;if(e&&t)switch(this.geometryType){case"point":return this._getPointConstraint(e.elevation,e.context);case"polygon":case"polyline":return this._getPolylineOrPolygonConstraint(this.lastVertex,this.secondToLastVertex,e.distance,e.direction,e.elevation,e.context)}}set drawingMode(e){this._set("drawingMode",e??_)}get effectiveCursor(){return this.loading?"progress":this._hideDefaultCursor?null:this.cursor||"crosshair"}get interactive(){return this._manipulator.interactive}set interactive(e){this._manipulator.interactive=e}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get snappingOptions(){return null!=this.snappingManager?this.snappingManager.options:null}get cursorVertex(){return this._get("cursorVertex")}get visualizationCursorVertex(){return"mouse"===this._stagedPointerType?this.cursorVertex:null}get committableVertex(){const{cursorVertex:e,lastVertex:t,firstVertex:i,geometryType:r}=this;return"polygon"===r&&(0,m.fk)(e,i)||(0,m.fk)(e,t)?null:e}get updating(){return this._updatingHandles.updating}get geometryIncludingUncommittedVertices(){const{committedVertices:e,committableVertex:t,coordinateHelper:i}=this,r=e.slice();return null!=t&&r.push(i.pointToArray(t)),r}cancel(){this.complete({aborted:!0})}commitStagedVertex(){this._snappingOperation.abort();const{committableVertex:e}=this;null!=e&&this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(e))}complete(e){const t=e?.aborted||!1;this._snappingOperation.abort(),this.snappingManager?.doneSnapping();const{geometryType:i,numCommittedVertices:r}=this,n="multipoint"===i&&0===r||"polyline"===i&&r<2||"polygon"===i&&r<3;"segment"!==i&&"point"!==i||this.commitStagedVertex(),this._createOperationCompleted=!n,(this.isCompleted||t)&&(this._stagedScreenPoint=null,this._stagedPointerId=null,this._stagedPointerType=null,this._processCursor(null),this.emit("complete",{vertices:this.committedVertices.map(((e,t)=>({componentIndex:0,vertexIndex:t,coordinates:e}))),aborted:t,type:"complete"}))}onInputEvent(e){switch(e.type){case"pointer-down":this._pointerDownStates.add(e.pointerId);break;case"pointer-up":this._pointerDownStates.delete(e.pointerId)}switch(e.type){case"pointer-move":return this._onPointerMove(e);case"hold":return this._onHold(e)}}redo(){this._editGeometryOperations.redo()}undo(){null!=this.snappingManager&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}_processCursor(e){const t=(0,o.o8)(this.cursorVertex),i=(0,o.o8)(e),r=i&&(this._updateAndGetEffectiveDrawSurface()?.constrainZ(i)??i),n=this._snapToClosingVertex(r),s=this._applyConstraints(n);(0,m.fk)(t,s)||(this._set("cursorVertex",s),this.segmentLabels?.set("stagedVertex",null!=s?this.coordinateHelper.pointToVector(s):null),null==s||"mouse"!==this._stagedPointerType?this.emit("cursor-remove"):this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(s)}],operation:"apply",type:"vertex-update"}))}_snapToClosingVertex(e){if(null==e||"polygon"!==this.geometryType||this.numCommittedVertices<=2)return e;const t=this._mapToScreen(e);if(!t)return e;const i=this._activeComponent;return this._vertexWithinPointerDistance(i.vertices[0].pos,t)?this.firstVertex:this._vertexWithinPointerDistance(i.vertices.at(-1).pos,t)?this.lastVertex:e}_createManipulatorDragPipeline(e){switch(this.drawingMode){case"click":return this._createManipulatorDragPipelineClick(e);case"freehand":return this._createManipulatorDragPipelineFreehand(e);case"hybrid":return this._createManipulatorDragPipelineHybrid(e)}}_createManipulatorDragPipelineClick(e){return(0,M.Xt)(e,((e,t,i,r)=>{const n="touch"===r&&this._snappingEnabled;if(this.isCompleted||!n)return;const{snappingStep:s,cancelSnapping:o}=(0,I.L)({predicate:()=>n,snappingManager:this.snappingManager,snappingContext:new x.e({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,feature:this.graphic,pointer:r,visualizer:this.snappingVisualizer}),updatingHandles:this._updatingHandles,useZ:!this._requiresScenePoint});i=i.next((e=>(n&&null!=this.snappingManager&&this.snappingManager.doneSnapping(),e))).next(o),t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(this._processCursor(e.mapStart),("segment"===this.geometryType||n&&!this.numCommittedVertices)&&this.commitStagedVertex()),e))).next((0,M.pg)(this.view,this.elevationInfo)).next(...s).next((e=>(n&&(this._processCursor(e.mapEnd),"end"===e.action&&this.commitStagedVertex()),e))).next((e=>("end"===e.action&&("mouse"!==this._stagedPointerType&&this._snappingOperation.abort(),"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()),e)))}))}_createManipulatorDragPipelineFreehand(e){return(0,M.Xt)(e,((e,t)=>{this.isCompleted||t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(this._snappingOperation.abort(),null==this.committableVertex&&this._processCursor(e.mapStart),"segment"===this.geometryType&&this.commitStagedVertex()),e))).next((e=>{switch(e.action){case"start":case"update":this._processCursor(e.mapEnd),"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":this.complete()}return e}))}))}_createManipulatorDragPipelineHybrid(e){return(0,M.Xt)(e,((e,t)=>{this.isCompleted||t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(this._snappingOperation.abort(),this._processCursor(e.mapStart),this.commitStagedVertex()),e))).next((e=>{switch(e.action){case"start":case"update":this._processCursor(e.mapEnd),"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":"mouse"!==this._stagedPointerType&&this._snappingOperation.abort(),"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()}return e}))}))}get _drawAtFixedElevation(){const{constraintsEnabled:e,constraintZ:t,geometryType:i,numCommittedVertices:r}=this;return e?null!=t||"segment"===i&&r>0:("segment"===i||"polygon"===i)&&r>0}_updateAndGetEffectiveDrawSurface(){const{constraintsEnabled:e,coordinateHelper:t,drawSurface:i,elevationDrawSurface:r,snapToSceneEnabled:n}=this;if(null==r)return i;if(!this.hasZ)return r.defaultZ=null,r;const s=this.elevationInfo?.mode;let o=this.defaultZ,a=e||"absolute-height"===s;return null!=n&&(a=n),"on-the-ground"===s&&(a=!1),this._drawAtFixedElevation&&(o=(e?this.constraintZ:null)??t.getZ(this._activeComponent.vertices[0].pos),a=!1),a?i:(r.defaultZ=o,r)}_mapToScreen(e){return this._updateAndGetEffectiveDrawSurface()?.mapToScreen(e)}_onHold(e){this._snappingOperation.abort(),"click"===this.drawingMode&&"touch"===e.pointerType&&this._snappingEnabled&&this._processCursor(e.mapPoint),e.stopPropagation()}_onImmediateClick(e){if(!("mouse"===e.pointerType&&2===e.button||this._manipulator.dragging))try{const{drawingMode:t,geometryType:i}=this;this._stagedPointerType=e.pointerType,this._stagedScreenPoint=e.screenPoint;const r=this._screenToMap(e.screenPoint);if(null==r)return;if(null==r||"freehand"===t&&"point"!==i)return;if(this._snappingEnabled&&null!=this.cursorVertex||this._processCursor(r),null==this.committableVertex)return void this.complete();this.commitStagedVertex(),"mouse"!==e.pointerType&&this._processCursor(null),("freehand"===t||"point"===i||"segment"===i&&2===this.numCommittedVertices||"segment"===i&&"hybrid"===t&&1===this.numCommittedVertices)&&this.complete()}finally{e.stopPropagation()}}_onImmediateDoubleClick(e){this._manipulator.dragging||"point"===this.geometryType||(this.complete(),e.stopPropagation())}_onPointerMove(e){const t=(0,u.tc)(e.x,e.y);this._stagedScreenPoint=t,this._stagedPointerType=e.pointerType,this._stagedPointerId=e.pointerId;const i=this._snappingOperation,r=this._manipulator;this._pointerDownStates.has(e.pointerId)||r.grabbing||!r.interactive?i.abort():(e.stopPropagation(),this._processCursorMovementRelativeToSurface(t,e.pointerType))}_onKeyboardBasedChange(){const e=this._manipulator;"mouse"===this._stagedPointerType&&this._stagedScreenPoint&&null!=this._stagedPointerId&&!this._pointerDownStates.has(this._stagedPointerId)&&!e.grabbing&&e.interactive?this._processCursorMovementRelativeToSurface(this._stagedScreenPoint,this._stagedPointerType):this._snappingOperation.abort()}_processCursorMovementRelativeToSurface(e,t){const i=this._snappingOperation,r=this._screenToMap(e),n=this._requiresScenePoint?this.drawSurface?.screenToMap(e):null;if(null==r)return this._hideDefaultCursor=!0,this._processCursor(null),void i.abort();this._hideDefaultCursor=!1;const s=this.snappingManager;if(null==s)return this._processCursor(r),void i.abort();const o=this._getSnappingContext(t);this._updatingHandles.addPromise((0,c.QZ)(i.snap({point:r,scenePoint:n},s,o)))}_applyConstraints(e){const{constraint:t,constraintInfo:i}=this;if(!e||!i||!t)return e;const{context:r}=i,n=(0,L.dz)(e,r),s=n?t.closestTo(n):void 0;if(!s)return e;const o=(0,L.tC)(s,e,r);return null!=o&&"absolute-height"!==r.elevationInfo.mode&&null!=this.constraintZ&&this.hasZ&&(o.z=this.constraintZ),o}_screenToMap(e){return e?this._updateAndGetEffectiveDrawSurface()?.screenToMap(e):null}_screenToMapDragEventStep(){let e=null;return t=>{if("start"===t.action&&(e=this._screenToMap(t.screenStart)),null==e)return null;const i=this._screenToMap(t.screenEnd);return null!=i?{...t,mapStart:e,mapEnd:i}:null}}_vertexWithinPointerDistance(e,t){const i=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(e));return null!=i&&function(e,t,i){const r=e.x-t.x,n=e.y-t.y;return r*r+n*n<=25}(i,t)}_getSnappingContext(e){const t=this._drawAtFixedElevation?this.elevationDrawSurface?.defaultZ:null;return new x.e({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:e,feature:this.graphic,visualizer:this.snappingVisualizer,selfSnappingZ:null!=t?{value:t,elevationInfo:this.elevationInfo}:null})}};(0,r._)([(0,p.MZ)()],O.prototype,"_hideDefaultCursor",void 0),(0,r._)([(0,p.MZ)()],O.prototype,"_snappingOperation",void 0),(0,r._)([(0,p.MZ)()],O.prototype,"_snappingEnabled",null),(0,r._)([(0,p.MZ)({constructOnly:!0})],O.prototype,"graphic",void 0),(0,r._)([(0,p.MZ)()],O.prototype,"constraintsEnabled",void 0),(0,r._)([(0,p.MZ)()],O.prototype,"constraintInfo",void 0),(0,r._)([(0,p.MZ)()],O.prototype,"constraint",null),(0,r._)([(0,p.MZ)()],O.prototype,"constraintZ",void 0),(0,r._)([(0,p.MZ)()],O.prototype,"defaultZ",void 0),(0,r._)([(0,p.MZ)()],O.prototype,"isDraped",void 0),(0,r._)([(0,p.MZ)({value:_})],O.prototype,"drawingMode",null),(0,r._)([(0,p.MZ)({constructOnly:!0})],O.prototype,"elevationDrawSurface",void 0),(0,r._)([(0,p.MZ)({constructOnly:!0})],O.prototype,"elevationInfo",void 0),(0,r._)([(0,p.MZ)({constructOnly:!0,type:E.A})],O.prototype,"labelOptions",void 0),(0,r._)([(0,p.MZ)({constructOnly:!0})],O.prototype,"geometryType",void 0),(0,r._)([(0,p.MZ)({constructOnly:!0})],O.prototype,"hasM",void 0),(0,r._)([(0,p.MZ)({constructOnly:!0})],O.prototype,"hasZ",void 0),(0,r._)([(0,p.MZ)()],O.prototype,"cursor",void 0),(0,r._)([(0,p.MZ)()],O.prototype,"effectiveCursor",null),(0,r._)([(0,p.MZ)()],O.prototype,"loading",void 0),(0,r._)([(0,p.MZ)({constructOnly:!0})],O.prototype,"manipulators",void 0),(0,r._)([(0,p.MZ)({constructOnly:!0})],O.prototype,"drawSurface",void 0),(0,r._)([(0,p.MZ)({constructOnly:!0})],O.prototype,"segmentLabels",void 0),(0,r._)([(0,p.MZ)({constructOnly:!0})],O.prototype,"snappingManager",void 0),(0,r._)([(0,p.MZ)({constructOnly:!0})],O.prototype,"snappingVisualizer",void 0),(0,r._)([(0,p.MZ)()],O.prototype,"snapToSceneEnabled",void 0),(0,r._)([(0,p.MZ)({readOnly:!0})],O.prototype,"cursorVertex",null),(0,r._)([(0,p.MZ)({readOnly:!0})],O.prototype,"visualizationCursorVertex",null),(0,r._)([(0,p.MZ)()],O.prototype,"committableVertex",null),(0,r._)([(0,p.MZ)()],O.prototype,"firstVertex",void 0),(0,r._)([(0,p.MZ)()],O.prototype,"lastVertex",void 0),(0,r._)([(0,p.MZ)()],O.prototype,"secondToLastVertex",void 0),(0,r._)([(0,p.MZ)()],O.prototype,"updating",null),(0,r._)([(0,p.MZ)({constructOnly:!0})],O.prototype,"view",void 0),O=(0,r._)([(0,d.$)("esri.views.draw.DrawOperation")],O)},99517:(e,t,i)=>{"use strict";i.d(t,{IX:()=>h,Sl:()=>p,rT:()=>c,uF:()=>u}),i(3313);var r=i(23572),n=i(82320),s=i(96124),o=i(19541),a=i(44153),l=i(8977);class c{constructor(e,t,i,r=null){this._elevationInfo=e,this.defaultZ=t,this._view=i,this._excludeGraphics=r}screenToMap(e){const{defaultZ:t,_view:i}=this,n=i.sceneIntersectionHelper.intersectElevationFromScreen((0,r.gs)(e.x,e.y),this._elevationInfo,t??0,this._excludeGraphics);return null==t&&null!=n&&(n.z=void 0),n}mapToScreen(e){const t=(0,n.T)(e.x,e.y,(0,o.wS)(this._view,e,this._elevationInfo),e.spatialReference);return this._view.toScreen(t)}constrainZ(e){const{defaultZ:t}=this;return null!=t&&e.z!==t&&((e=(0,s.EL)(e)).z=t),e}}class h{constructor(e,t,i=[]){this.view=e,this.elevationInfo=t,this.exclude=i}screenToMap(e){const t=this.view.toMap(e,{exclude:this.exclude,excludeHud:!0});return null!=t&&(t.z=(0,o.id)(t,this.view,this.elevationInfo)),t}mapToScreen(e){let t=e;return null!=this.elevationInfo&&(t=(0,n.T)(e.x,e.y,(0,o.wS)(this.view,e,this.elevationInfo),e.spatialReference)),this.view.toScreen(t)}constrainZ(e){return e}}class u{constructor(e,t=!1,i=0){this.view=e,this.hasZ=t,this.defaultZ=i,this.mapToScreen=t=>e.toScreen(t),this.screenToMap=t?t=>{const r=e.toMap(t);return r.z=i,r}:t=>e.toMap(t)}constrainZ(e){const{defaultZ:t}=this;return this.hasZ&&e.z!==t&&((e=(0,s.EL)(e)).z=t),e}}class p{screenToMap(e){const{x:t,y:i}=e;return new l.A({x:t,y:i,spatialReference:p.spatialReference})}mapToScreen(e){return(0,r.tc)(e.x,e.y)}constrainZ(e){return e}}p.spatialReference=new a.A},73902:(e,t,i)=>{"use strict";i.d(t,{GF:()=>w,LZ:()=>_,N6:()=>b,_T:()=>M,eq:()=>v,zV:()=>I,zd:()=>C}),i(3313);var r=i(3223),n=i(15565),s=i(5262),o=i(80347),a=i(19913),l=i(48648),c=i(65670),h=i(11021),u=i(67488),p=i(56122),d=i(8977),f=i(67709),y=i(38648),m=i(65648);function g(e,t){const i=new d.A({x:e[0],y:e[1],spatialReference:t});return e.length>2&&(i.z=e[2]),i}function v(e,t){return new f.A({points:e,spatialReference:t})}function _(e,t,i){const r=new y.A({paths:e,spatialReference:t});return i&&(0,h._7)(r),r}function b(e,t,i,s=!0){const o=(0,n.o8)(e);o.forEach((e=>{const t=e[0],i=e[e.length-1];(0,r.aI)(t,i)&&1!==e.length||e.push(e[0])}));let a=new m.A({rings:o,spatialReference:t});return a.rings.forEach((e=>{(0,h.$3)(e)||e.reverse()})),i&&(0,h._7)(a),s&&a.isSelfIntersecting&&(0,u.fn)(t)&&(a=(0,c.simplify)(a)),a}function w(e,t,i){const n=t.mapToLocalMultiple(e),s=[],o={x:n[0].x,y:n[0].y},a=n[1].x,l=n[1].y,c=Math.round(a-o.x),h=Math.round(l-o.y),u=Math.max(Math.abs(c),Math.abs(h));if(i){const e={x:o.x+u,y:o.y+u},t={x:o.x-u,y:o.y-u};s.push((0,p.E5)(e.x,t.y),(0,p.E5)(t.x,t.y),(0,p.E5)(t.x,e.y),(0,p.E5)(e.x,e.y))}else{const e={x:c>0?o.x+u:o.x-u,y:h>0?o.y+u:o.y-u};s.push((0,p.E5)(o.x,o.y),(0,p.E5)(e.x,o.y),(0,p.E5)(e.x,e.y),(0,p.E5)(o.x,e.y))}return T(b([s.map((e=>t.localToMap(e))).filter(r.Ru)],t.spatialReference,t.doUnnormalization,!0),s,t)}function M(e,t,i){let n=t.mapToLocalMultiple(e);if(1===n.length){const e=48,t=n[0];n=[(0,p.E5)(t.x-e,t.y+e),(0,p.E5)(t.x+e,t.y-e),(0,p.E5)(t.x+e,t.y-e),(0,p.E5)(t.x-e,t.y+e)]}const s=[],o={x:n[0].x,y:n[0].y},a={x:n[1].x,y:n[1].y};if(i){const e=Math.round(a.x-o.x),t=Math.round(a.y-o.y);s.push((0,p.E5)(o.x-e,o.y-t),(0,p.E5)(a.x,o.y-t),(0,p.E5)(a.x,a.y),(0,p.E5)(o.x-e,a.y))}else s.push((0,p.E5)(o.x,o.y),(0,p.E5)(a.x,o.y),(0,p.E5)(a.x,a.y),(0,p.E5)(o.x,a.y));return T(b([s.map((e=>t.localToMap(e))).filter(r.Ru)],t.spatialReference,t.doUnnormalization,!0),s,t)}function T(e,t,i){const r=S(t[3],t[2],i),n=S(t[1],t[2],i),s=S(t[0],t[1],i),o=S(t[0],t[3],i);return{geometry:e,midpoints:null!=r&&null!=n&&null!=s&&null!=o?{top:r,right:n,bottom:s,left:o}:null}}function S(e,t,i){E[0]=e.x,E[1]=e.y,E[2]=0,x[0]=t.x,x[1]=t.y,x[2]=0,(0,o.m)(E,E,x,.5),A.x=E[0],A.y=x[1],A.z=x[2];const r=i.localToMap(A);return null!=r?g(r,i.spatialReference):null}const A=(0,p.E5)(0,0,0),E=(0,a.vt)(),x=(0,a.vt)();function I(e,t,i,r){const n=t.mapToLocalMultiple(e);let o=null,a=null;if(i)o=n[0],a=n[1];else{const e=n[0],t=n[1],i=Math.round(t.x-e.x),r=Math.round(t.y-e.y),s=Math.max(Math.abs(i),Math.abs(r));o=(0,p.E5)(i>0?e.x+s/2:e.x-s/2,r>0?e.y+s/2:e.y-s/2),a=(0,p.E5)(Math.abs(i)>Math.abs(r)?o.x-s/2:o.x,Math.abs(i)>Math.abs(r)?o.y:o.y-s/2)}const d=t.localToMap(o),f=t.localToMap(a);if(null==d||null==f)return null;t.doUnnormalization&&(0,h.JM)([[d,f]],t.spatialReference);const y=g(d,t.spatialReference),m=g(f,t.spatialReference),v=(0,s.GA)(t.spatialReference);let _=0;if((0,u.fn)(t.spatialReference))_=v*(0,c.distance)(y,m,null);else{const e=o.x-a.x,t=o.y-a.y;_=v*Math.sqrt(e*e+t*t)*(r||1)}const w=new l.A({center:y,radius:_,radiusUnit:"meters",spatialReference:t.spatialReference});return{geometry:b(w.rings,w.spatialReference,!1),center:y,edge:m}}function C(e,t,i){const n=t.mapToLocalMultiple(e),s=n[0],o=n[1],a=Math.round(o.x-s.x),l=Math.round(o.y-s.y),c=(0,p.E5)(i?s.x:s.x+a/2,i?s.y:s.y+l/2),h=i?a:a/2,u=i?l:l/2,d=[],f=2*Math.PI/60;function y(e){const t=Math.cos(e),i=Math.sin(e);return(0,p.E5)(h*t+c.x,u*i+c.y)}for(let e=0;e<60;e++)d.push(y(e*f));d.push(d[0]);const{spatialReference:m,doUnnormalization:v}=t,_=b([d.map((e=>t.localToMap(e))).filter(r.Ru)],m,v,!1),w=t.localToMap(y(Math.PI/2)),M=t.localToMap(y(0)),T=t.localToMap(y(-Math.PI/2)),S=t.localToMap(y(Math.PI));return{geometry:_,midpoints:null!=w&&null!=M&&null!=T&&null!=S?{top:g(w,m),right:g(M,m),bottom:g(T,m),left:g(S,m)}:null}}},19264:(e,t,i)=>{"use strict";i.d(t,{Cy:()=>a,UT:()=>u,hs:()=>c,lR:()=>l,wW:()=>h});var r=i(4506),n=i(2532),s=i(70040),o=i(11021);function a(e,t,i,r){if(null==r||e.hasZ||(r=void 0),"point"===e.type)return e.x+=t,e.y+=i,e.hasZ&&null!=r&&(e.z+=r),e;if("multipoint"===e.type){const n=e.points;for(let e=0;e<n.length;e++)n[e]=p(n[e],t,i,r);return e}if("extent"===e.type)return e.xmin+=t,e.xmax+=t,e.ymin+=i,e.ymax+=i,null!=r&&(e.zmin??=0,e.zmin+=r,e.zmax??=0,e.zmax+=r),e;const n=(0,o.$K)(e),s="polyline"===e.type?e.paths:e.rings;for(let e=0;e<n.length;e++){const s=n[e];for(let e=0;e<s.length;e++)s[e]=p(s[e],t,i,r)}return"paths"in e?e.paths=s:e.rings=s,e}function l(e,t,i,r,n){const s=e.clone(),l=r.resolution;if("point"===s.type){if(n)a(s,t*l,-i*l);else{const e=r.state.transform,n=r.state.inverseTransform,o=e[0]*s.x+e[2]*s.y+e[4],a=e[1]*s.x+e[3]*s.y+e[5];s.x=n[0]*(o+t)+n[2]*(a+i)+n[4],s.y=n[1]*(o+t)+n[3]*(a+i)+n[5]}return s}if("multipoint"===s.type){if(n)a(s,t*l,-i*l);else{const e=s.points,n=r.state.transform,o=r.state.inverseTransform;for(let r=0;r<e.length;r++){const s=e[r],a=n[0]*s[0]+n[2]*s[1]+n[4],l=n[1]*s[0]+n[3]*s[1]+n[5],c=o[0]*(a+t)+o[2]*(l+i)+o[4],h=o[1]*(a+t)+o[3]*(l+i)+o[5];e[r]=d(s,c,h,void 0)}}return s}if("extent"===s.type){if(n)a(s,t*l,-i*l);else{const e=r.state.transform,n=r.state.inverseTransform,o=e[0]*s.xmin+e[2]*s.ymin+e[4],a=e[1]*s.xmin+e[3]*s.ymin+e[5],l=e[0]*s.xmax+e[2]*s.ymax+e[4],c=e[1]*s.xmax+e[3]*s.ymax+e[5];s.xmin=n[0]*(o+t)+n[2]*(a+i)+n[4],s.ymin=n[1]*(o+t)+n[3]*(a+i)+n[5],s.xmax=n[0]*(l+t)+n[2]*(c+i)+n[4],s.ymax=n[1]*(l+t)+n[3]*(c+i)+n[5]}return s}if(n)a(s,t*l,-i*l);else{const e=(0,o.$K)(s),n="polyline"===s.type?s.paths:s.rings,a=r.state.transform,l=r.state.inverseTransform;for(let r=0;r<e.length;r++){const n=e[r];for(let e=0;e<n.length;e++){const r=n[e],s=a[0]*r[0]+a[2]*r[1]+a[4],o=a[1]*r[0]+a[3]*r[1]+a[5],c=l[0]*(s+t)+l[2]*(o+i)+l[4],h=l[1]*(s+t)+l[3]*(o+i)+l[5];n[e]=d(r,c,h,void 0)}}"paths"in s?s.paths=n:s.rings=n}return s}function c(e,t,i,r){if("point"===e.type){const{x:n,y:s}=e,o=r?r[0]:n,a=r?r[1]:s,l=e.clone(),c=(n-o)*t+o,h=(s-a)*i+a;return l.x=c,l.y=h,l}if("multipoint"===e.type){const a=(0,o.$K)(e),l=(0,n.vt)(),[c,h,u,p]=(0,s.Yz)(l,[a]),f=r?r[0]:(c+u)/2,y=r?r[1]:(p+h)/2,m=e.clone(),g=m.points;for(let e=0;e<g.length;e++){const r=g[e],[n,s]=r,o=(n-f)*t+f,a=(s-y)*i+y;g[e]=d(r,o,a,void 0)}return m}if("extent"===e.type){const{xmin:n,xmax:s,ymin:o,ymax:a}=e,l=r?r[0]:(n+s)/2,c=r?r[1]:(a+o)/2,h=e.clone();if(h.xmin=(n-l)*t+l,h.ymax=(a-c)*i+c,h.xmax=(s-l)*t+l,h.ymin=(o-c)*i+c,h.xmin>h.xmax){const e=h.xmin,t=h.xmax;h.xmin=t,h.xmax=e}if(h.ymin>h.ymax){const e=h.ymin,t=h.ymax;h.ymin=t,h.ymax=e}return h}const a=(0,o.$K)(e),l=(0,n.vt)(),[c,h,u,p]=(0,s.Yz)(l,a),f=r?r[0]:(c+u)/2,y=r?r[1]:(p+h)/2,m=e.clone(),g="polyline"===m.type?m.paths:m.rings;for(let e=0;e<a.length;e++){const r=a[e];for(let n=0;n<r.length;n++){const s=r[n],[o,a]=s,l=(o-f)*t+f,c=(a-y)*i+y;g[e][n]=d(s,l,c,void 0)}}return"paths"in m?m.paths=g:m.rings=g,m}function h(e,t,i,r,n,s){const o=Math.sqrt((i-e)*(i-e)+(r-t)*(r-t));return Math.sqrt((n-e)*(n-e)+(s-t)*(s-t))/o}function u(e,t,i,n=!1){const s=Math.atan2(t.y-i.y,t.x-i.x)-Math.atan2(e.y-i.y,e.x-i.x),o=Math.atan2(Math.sin(s),Math.cos(s));return n?o:(0,r.KJ)(o)}function p(e,t,i,r){return d(e,e[0]+t,e[1]+i,null!=e[2]&&null!=r?e[2]+r:void 0)}function d(e,t,i,r){const n=[t,i];return e.length>2&&n.push(null!=r?r:e[2]),e.length>3&&n.push(e[3]),n}},1277:(e,t,i)=>{"use strict";function r(e,t,i){if(!t||!e?.map)return;const{map:r}=e,n=r.layers.find((e=>e===t));n||r.add(t,i),n&&null!=i&&r.layers.reorder(n,i)}function n(e,t){const i="subtype-sublayer"===t?.type?t.parent:t;return e.allLayerViews.find((e=>{const t=e.layer;return t===i||"sublayers"in t&&null!=t.sublayers&&t.sublayers.includes(i)}))}i.d(t,{Y:()=>r,i:()=>n})},56122:(e,t,i)=>{"use strict";i.d(t,{E5:()=>d,ZP:()=>g,vz:()=>y}),i(3313);var r=i(3223),n=i(94464),s=i(92374),o=i(31753),a=i(19165),l=i(80347),c=i(19913),h=i(60929),u=i(8977);function p(e,t,i=null){return null!=i?[e,t,i]:[e,t]}function d(e,t,i=null){return null!=i?{x:e,y:t,z:i}:{x:e,y:t}}class f{constructor(e){this.spatialReference=e}mapToLocalMultiple(e){return e.map((e=>this.mapToLocal(e))).filter(r.Ru)}get doUnnormalization(){return!1}}class y extends f{constructor(e,t,i=null){super(t),this._defaultZ=i,this.transform=(0,s.vt)(),this.transformInv=(0,s.vt)(),this.transform=(0,s.o8)(e),(0,n.B8)(this.transformInv,this.transform)}makeMapPoint(e,t){return p(e,t,this._defaultZ)}mapToLocal(e){return d(this.transform[0]*e[0]+this.transform[2]*e[1]+this.transform[4],this.transform[1]*e[0]+this.transform[3]*e[1]+this.transform[5])}localToMap(e){return p(this.transformInv[0]*e.x+this.transformInv[2]*e.y+this.transformInv[4],this.transformInv[1]*e.x+this.transformInv[3]*e.y+this.transformInv[5],this._defaultZ)}}class m extends f{constructor(e,t){super(e.spatialReference),this.view=e,this.defaultZ=null,this.pWS=(0,c.vt)(),this.tangentFrameUpWS=(0,c.vt)(),this.tangentFrameRightWS=(0,c.vt)(),this.tangentFrameForwardWS=(0,c.vt)(),this.localFrameRightWS=(0,c.vt)(),this.localFrameUpWS=(0,c.vt)(),this.worldToLocalTransform=(0,a.vt)(),this.localToWorldTransform=(0,a.vt)(),this.scale=1,this.scale=e.resolution,this.referenceMapPoint=t,this.defaultZ=t.hasZ?t.z:null;const i=e.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,h._.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,h._.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,h._.Z,this.tangentFrameForwardWS);const r=(0,c.vt)();(0,l.h)(r,this.tangentFrameForwardWS,(0,l.k)(i,this.tangentFrameForwardWS)),(0,l.f)(this.localFrameRightWS,i,r),(0,l.n)(this.localFrameRightWS,this.localFrameRightWS),(0,l.b)(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),(0,o.Yc)(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),(0,o.B8)(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return"global"===this.view.viewingMode}makeMapPoint(e,t){return p(e,t,this.defaultZ)}mapToLocal(e){const t=(0,c.vt)();this.view.renderCoordsHelper.toRenderCoords(new u.A({x:e[0],y:e[1],spatialReference:this.spatialReference}),t),(0,l.u)(t,t,this.worldToLocalTransform);const i=this.view.renderCoordsHelper.fromRenderCoords(t,new u.A({spatialReference:this.view.spatialReference}));return null!=i?d(i.x/this.scale,i.y/this.scale):null}localToMap(e){const t=(0,c.vt)();this.view.renderCoordsHelper.toRenderCoords(new u.A({x:e.x*this.scale,y:e.y*this.scale,spatialReference:this.spatialReference}),t),(0,l.u)(t,t,this.localToWorldTransform);const i=this.view.renderCoordsHelper.fromRenderCoords(t,new u.A({spatialReference:this.view.spatialReference}));return null!=i?p(i.x,i.y,this.defaultZ):null}}function g(e,t){if("2d"===e.type)return new y(e.state.transform,e.spatialReference,t.length>2?t[2]:null);if("3d"===e.type){const i=t.length>2?new u.A({x:t[0],y:t[1],z:t[2],spatialReference:e.spatialReference}):new u.A({x:t[0],y:t[1],spatialReference:e.spatialReference});return new m(e,i)}return null}},98596:(e,t,i)=>{"use strict";var r;i.d(t,{w:()=>r}),function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"}(r||(r={}))},85368:(e,t,i)=>{"use strict";i.d(t,{l:()=>o});var r=i(80861);class n{constructor(e,t=[]){this.eventType=e,this.keyModifiers=t}matches(e){if(e.type!==this.eventType)return!1;if(0===this.keyModifiers.length)return!0;const t=e.modifiers;for(const e of this.keyModifiers)if(!t.has(e))return!1;return!0}}const s=()=>r.A.getLogger("esri.views.input.InputHandler");class o{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const t=this._incoming[e];for(const e of t)this._incomingEventMatches.push(e.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map((e=>e.eventType))),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager?s().error("This InputHandler has already been registered with an InputManager"):(e.setEventCallback((e=>this._handleEvent(e))),e.setUninstallCallback((()=>this._onUninstall())),this._manager=e)}onUninstall(){}registerIncoming(e,t,i){let r;"function"==typeof t?(i=t,r=[]):r=t||[];const s="string"==typeof e?new n(e,r):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},l=e=>{const t=this._incoming[e.match.eventType];if(t){const i=t.indexOf(e);t.splice(i,1),o(),this._manager&&this._manager.updateDependencies()}},c=new a(s,i,{onPause:l,onRemove:l,onResume:e=>{const t=this._incoming[e.match.eventType];t&&!t.includes(e)&&(t.push(e),o(),this._manager&&this._manager.updateDependencies())}});let h=this._incoming[s.eventType];return h||(h=[],this._incoming[s.eventType]=h),h.push(c),o(),this._manager&&this._manager.updateDependencies(),c}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const t=new l(e,{onEmit:(e,t,i,r)=>{this._manager?.emit(e.eventType,t,i,r)},onRemove:e=>{delete this._outgoing[e.eventType],this._manager?.updateDependencies()}});return this._outgoing[e]=t,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),t}startCapturingPointer(e){this._manager?.setPointerCapture(e,!0)}stopCapturingPointer(e){this._manager?.setPointerCapture(e,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):s().error("This InputHandler is not registered with an InputManager")}_handleEvent(e){const t=this._incoming[e.type];if(t)for(const i of t)if(i.match.matches(e)&&(i.callback?.(e),e.shouldStopPropagation()))break}}class a{constructor(e,t,i){this.match=e,this._callback=t,this._handler=i}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class l{constructor(e,t){this.eventType=e,this._removed=!1,this._handler=t}emit(e,t,i){this._removed||this._handler.onEmit(this,e,t,i)}remove(){this._removed=!0,this._handler.onRemove(this)}}},82795:(e,t,i)=>{"use strict";i.d(t,{e:()=>y,o:()=>_});var r=i(82392),n=i(73783),s=i(80861),o=i(57882),a=i(81482),l=(i(6273),i(67498),i(26325)),c=i(6443),h=i(26463),u=i(85368);class p extends u.l{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",(e=>{this._update(e.data)}))}_update(e){const t="touch"===e.native.pointerType?"touch":"mouse",{x:i,y:r}=e;t===this._value&&this._x===i&&this._y===r||(this._value=t,this._x=i,this._y=r,this._onChange(t,i,r))}}var d=i(39369);class f extends u.l{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=(0,d.v)(!1),this._onPointerAdd=({data:e})=>{"touch"===e.pointerType&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{"touch"===e.pointerType&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}}let y=class extends n.A{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=h.i,this._latestPointerType="mouse",this._propertiesPool=new c.M({latestPointerLocation:b},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some((e=>e.handler.hasPendingInputs))}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,t,i=_.INTERNAL){if(this._nameToGroup[e])return void s.A.getLogger(this).error("There is already an InputHandler group registered under the name `"+e+"`");if(0===t.length)return void s.A.getLogger(this).error("Can't register a group of zero handlers");const r={name:e,handlers:t.map((e=>({handler:e,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null})))};this._nameToGroup[e]=r;for(let e=r.handlers.length-1;e>=0;e--){const t=r.handlers[e];this._handlers.push(t),t.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(e,i,r,n,s)=>{this._emitInputEvent(t.priorityIndex+1,e,i,r,s,n)},setPointerCapture:(e,i)=>{this._setPointerCapture(r,t,e,i)},setEventCallback:e=>{t.eventCallback=e},setUninstallCallback:e=>{t.uninstallCallback=e},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach((e=>{e.removed=!0,e.uninstallCallback?.()})),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):s.A.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return void 0!==this._nameToGroup[e]}isModifierKeyDown(e){return this._activeKeyModifiers&&this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let e=this._handlers.length-1;e>=0;e--){const t=this._handlers[e];t.priorityIndex=e,this._handlersPriority.push(t)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const r=this._handlersPriority[i];r.priorityIndex=i;let n=r.handler.hasSideEffects;if(!n)for(const t of r.handler.outgoingEventTypes)if(e.has(t)){n=!0;break}if(n)for(const i of r.handler.incomingEventMatches){e.add(i.eventType);for(const e of i.keyModifiers)(0,h.p)(e)||t.add(e)}r.active=n}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,t,i){this._latestPointerType=e;const r=this._get("latestPointerLocation");if(null==r||r.x!==t||r.y!==i){const e=this._propertiesPool.get("latestPointerLocation");e.x=t,e.y=i,this._set("latestPointerLocation",e)}}_onEventReceived(e,t){if("pointer-capture-lost"===e){const e=t;this._pointerCaptures.delete(e.native.pointerId)}this._updateKeyModifiers(e,t);const i=null!=this.test.timestamp?this.test.timestamp:t.native?t.native.timestamp:void 0,r=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,i,r)}_updateKeyModifiers(e,t){if(!t)return;let i=!1;const r=()=>{if(!i){const e=new Set;this._activeKeyModifiers.forEach((t=>{e.add(t)})),this._activeKeyModifiers=e,i=!0}},n=(e,t)=>{t&&!this._activeKeyModifiers.has(e)?(r(),this._activeKeyModifiers.add(e)):!t&&this._activeKeyModifiers.has(e)&&(r(),this._activeKeyModifiers.delete(e))};if("key-down"===e||"key-up"===e){const i=t.key;this._keyModifiers.has(i)&&n(i,"key-down"===e)}const s=t.native;n("Alt",!(!s||!s.altKey)),n("Ctrl",!(!s||!s.ctrlKey)),n("Shift",!(!s||!s.shiftKey)),n("Meta",!(!s||!s.metaKey)),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new p(((e,t,i)=>this._setLatestPointer(e,t,i))),this._multiTouchHandler=new f,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],_.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,_.INTERNAL)}_setPointerCapture(e,t,i,r){const n=e.name+"-"+t.priorityIndex,s=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,s),r?(s.add(n),1===s.size&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):s.has(n)&&(s.delete(n),0===s.size&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter((e=>!e.removed)),this.updateDependencies()}_emitInputEventFromSource(e,t,i,r){this._emitInputEvent(0,e,t,i,r)}_emitInputEvent(e,t,i,r,n,s){const o=void 0!==r?r:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),a=void 0!==n&&n,l={event:new m(t,i,o,s||this._activeKeyModifiers,a),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(l):this._doNewPropagation(l)}_doNewPropagation(e){this._currentPropagation={events:new o.A,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:t,priorityIndex:i}=e.events.pop(),r=t.data?.eventId;if(null==r||!this._stoppedPropagationEventIds.has(r))for(e.currentHandler=this._handlersPriority[i];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!t.shouldStopPropagation()&&e.currentHandler.eventCallback?.(t),t.shouldStopPropagation()){null!=r&&this._stoppedPropagationEventIds.add(r);break}if(t.shouldPausePropagation((()=>this._continuePropagation())))return void this._pausePropagation({event:t,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const t=new o.A;t.push(e);const i=this._currentPropagation;if(i){for(;i.events.length;)t.push(i.events.pop());i.events=t,i.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const i of e.handler.incomingEventMatches)for(const e of t.handler.incomingEventMatches){if(i.eventType!==e.eventType)continue;const t=i.keyModifiers.filter((t=>e.keyModifiers.includes(t)));if(t.length===i.keyModifiers.length!=(t.length===e.keyModifiers.length))return i.keyModifiers.length>e.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const i of e){let e=0;for(;e<t.length&&this._compareHandlerPriority(i,t[e])>=0;)e++;t.splice(e,0,i)}return t}get debug(){const e=e=>{const t=this._setPointerCapture;this._setPointerCapture=()=>{},e(),this._setPointerCapture=t};return{injectEvent:(t,i)=>{e((()=>{this._onEventReceived(t,i)}))},disablePointerCapture:e}}};(0,r._)([(0,a.MZ)({readOnly:!0})],y.prototype,"hasPendingInputs",null),(0,r._)([(0,a.MZ)({constructOnly:!0})],y.prototype,"eventSource",void 0),(0,r._)([(0,a.MZ)({constructOnly:!0})],y.prototype,"recognizers",void 0),(0,r._)([(0,a.MZ)()],y.prototype,"_latestPointerType",void 0),(0,r._)([(0,a.MZ)()],y.prototype,"latestPointerType",null),(0,r._)([(0,a.MZ)()],y.prototype,"multiTouchActive",null),(0,r._)([(0,a.MZ)({readOnly:!0})],y.prototype,"latestPointerLocation",void 0),(0,r._)([(0,a.MZ)()],y.prototype,"_paused",void 0),(0,r._)([(0,a.MZ)({readOnly:!0})],y.prototype,"updating",null),y=(0,r._)([(0,l.$)("esri.views.input.InputManager")],y);class m{constructor(e,t,i,r,n){this.type=e,this.data=t,this.timestamp=i,this.modifiers=r,this.cancelable=n,this._propagationState=g.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=g.STOPPED}shouldStopPropagation(){return!!(this._propagationState&g.STOPPED)}async(e){this._propagationState|=g.PAUSED;const t=(e,t)=>{this._propagationState&=~g.PAUSED;const i=this._resumeCallback;if(this._resumeCallback=null,i&&i(),t)throw e;return e};return("function"==typeof e?e():e).then((e=>t(e,!1)),(e=>t(e,!0)))}shouldPausePropagation(e){return!!(this._propagationState&g.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}}var g,v;(v=g||(g={}))[v.NONE=0]="NONE",v[v.STOPPED=1]="STOPPED",v[v.PAUSED=2]="PAUSED";const _={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3},b=class{}},26463:(e,t,i)=>{"use strict";i.d(t,{i:()=>r,p:()=>s});const r=(0,i(6273).A)("mac")?"Meta":"Ctrl",n=new Set(["Alt","Ctrl","Meta","Shift","Primary"]),s=e=>n.has(e)},77671:(e,t,i)=>{"use strict";i.d(t,{g:()=>f});var r,n,s=i(82392),o=i(73783),a=i(80861),l=i(37623),c=i(81482),h=(i(6273),i(67498),i(26325)),u=i(10715),p=i(58842);(n=r||(r={}))[n.WhenToolEditable=0]="WhenToolEditable",n[n.WhenToolNotEditable=1]="WhenToolNotEditable",n[n.Always=2]="Always";class d{constructor(){this._isToolEditable=!0,this._manipulators=new p.A,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(e){this._isToolEditable=e}get length(){return this._manipulators.length}add(e,t=r.WhenToolEditable){this.addMany([e],t)}addMany(e,t=r.WhenToolEditable){for(const i of e){const e={manipulator:i,visibilityPredicate:t,attached:!1};this._manipulators.add(e),this._attached&&this._updateManipulatorAttachment(e)}}remove(e){for(let t=0;t<this._manipulators.length;t++)if(this._manipulators.at(t).manipulator===e){const e=this._manipulators.splice(t,1)[0];this._detachManipulator(e);break}}removeAll(){this._manipulators.forEach((e=>{this._detachManipulator(e)})),this._manipulators.removeAll()}attach(){this._manipulators.forEach((e=>{this._updateManipulatorAttachment(e)})),this._attached=!0}detach(){this._manipulators.forEach((e=>{this._detachManipulator(e)})),this._attached=!1}destroy(){this.detach(),this._manipulators.forEach((({manipulator:e})=>e.destroy())),this._manipulators.destroy(),this._resourceContexts=null}on(e,t){return this._manipulators.on(e,(e=>{t(e)}))}forEach(e){for(const t of this._manipulators.items)e(t)}some(e){return this._manipulators.items.some(e)}toArray(){const e=[];return this.forEach((t=>e.push(t.manipulator))),e}intersect(e,t){let i=null,r=Number.MAX_VALUE;return this._manipulators.forEach((({manipulator:n,attached:s})=>{if(!s||!n.interactive)return;const o=n.intersectionDistance(e,t);null!=o&&o<r&&(r=o,i=n)})),i}_updateManipulatorAttachment(e){this._isManipulatorItemVisible(e)?this._attachManipulator(e):this._detachManipulator(e)}_attachManipulator(e){e.attached||(e.manipulator.attach&&e.manipulator.attach(this._resourceContexts),e.attached=!0)}_detachManipulator(e){if(!e.attached)return;const t=e.manipulator;t.grabbing=!1,t.dragging=!1,t.hovering=!1,t.selected=!1,t.detach&&t.detach(this._resourceContexts),e.attached=!1}_isManipulatorItemVisible(e){return e.visibilityPredicate===r.Always||(this._isToolEditable?e.visibilityPredicate===r.WhenToolEditable:e.visibilityPredicate===r.WhenToolNotEditable)}}let f=class extends o.A{constructor(e){super(e),this.manipulators=new d,this.automaticManipulatorSelection=!0,this.hasGrabbedManipulators=!1,this.hasHoveredManipulators=!1,this.firstGrabbedManipulator=null,this.created=!1,this.removeIncompleteOnCancel=!0,this._editableFlags=new Map([[u.PK.MANAGER,!0],[u.PK.USER,!0]]),this._creationFinishedResolver=(0,l.Tw)()}get active(){return null!=this.view&&this.view.activeTool===this}set visible(e){this._get("visible")!==e&&(this._set("visible",e),this._syncVisible())}get editable(){return this.getEditableFlag(u.PK.USER)}set editable(e){this.setEditableFlag(u.PK.USER,e)}get updating(){return!1}get cursor(){return null}get hasFocusedManipulators(){return this.hasGrabbedManipulators||this.hasHoveredManipulators}destroy(){this.manipulators.destroy(),this._set("view",null)}onAdd(){this._syncVisible()}activate(){null!=this.view?(this.view.focus(),this.onActivate()):a.A.getLogger(this).error("Can't activate tool if view is not defined.")}deactivate(){this.onDeactivate()}handleInputEvent(e){this.onInputEvent(e)}handleInputEventAfter(e){this.onInputEventAfter(e)}setEditableFlag(e,t){this._editableFlags.set(e,t),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),e===u.PK.USER&&this.notifyChange("editable"),this.onEditableChange(),this.onManipulatorSelectionChanged()}getEditableFlag(e){return this._editableFlags.get(e)??!1}whenCreated(){return this._creationFinishedResolver.promise}onManipulatorSelectionChanged(){}onActivate(){}onDeactivate(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(e){}onInputEventAfter(e){}get internallyEditable(){return this.getEditableFlag(u.PK.USER)&&this.getEditableFlag(u.PK.MANAGER)}finishToolCreation(){this.created||this._creationFinishedResolver.resolve(this),this._set("created",!0)}_syncVisible(){if(this.initialized)if(this.visible)this._show();else if(this._hide(),this.active)return void(this.view.activeTool=null)}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.visible?this.manipulators.attach():this.manipulators.detach()}};(0,s._)([(0,c.MZ)({constructOnly:!0})],f.prototype,"view",void 0),(0,s._)([(0,c.MZ)({readOnly:!0})],f.prototype,"active",null),(0,s._)([(0,c.MZ)({value:!0})],f.prototype,"visible",null),(0,s._)([(0,c.MZ)({value:!0})],f.prototype,"editable",null),(0,s._)([(0,c.MZ)({readOnly:!0})],f.prototype,"manipulators",void 0),(0,s._)([(0,c.MZ)({readOnly:!0})],f.prototype,"updating",null),(0,s._)([(0,c.MZ)()],f.prototype,"cursor",null),(0,s._)([(0,c.MZ)({readOnly:!0})],f.prototype,"automaticManipulatorSelection",void 0),(0,s._)([(0,c.MZ)()],f.prototype,"hasFocusedManipulators",null),(0,s._)([(0,c.MZ)()],f.prototype,"hasGrabbedManipulators",void 0),(0,s._)([(0,c.MZ)()],f.prototype,"hasHoveredManipulators",void 0),(0,s._)([(0,c.MZ)()],f.prototype,"firstGrabbedManipulator",void 0),(0,s._)([(0,c.MZ)({readOnly:!0})],f.prototype,"created",void 0),(0,s._)([(0,c.MZ)({readOnly:!0})],f.prototype,"removeIncompleteOnCancel",void 0),f=(0,s._)([(0,h.$)("esri.views.interactive.InteractiveToolBase")],f)},19793:(e,t,i)=>{"use strict";i.d(t,{BV:()=>y});var r,n,s=i(53334),o=i(56560),a=i(80347),l=i(19913),c=i(74772),h=i(76982),u=i(8977);(n=r||(r={}))[n.Z=0]="Z",n[n.M=1]="M";class p{constructor(e){this.spatialReference=e}createVector(){return this._tag((0,o.vt)())}pointToVector(e){return this._tag((0,o.fA)(e.x,e.y))}arrayToVector(e){return this._tag((0,o.fA)(e[0],e[1]))}vectorToArray(e){return[e[0],e[1]]}pointToArray(e){return[e.x,e.y]}vectorToPoint(e,t=new u.A){return t.x=e[0],t.y=e[1],t.z=void 0,t.m=void 0,t.spatialReference=this.spatialReference,t}arrayToPoint(e,t=new u.A){return t.x=e[0],t.y=e[1],t.z=void 0,t.m=void 0,t.spatialReference=this.spatialReference,t}vectorToDehydratedPoint(e,t){if(e)return t??={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"},t.x=e[0],t.y=e[1],t.z=void 0,t.m=void 0,t.hasZ=!1,t.hasM=!1,t.spatialReference=this.spatialReference,t}lerp(e,t,i,r){return(0,s.Cc)(r,e,t,i)}addDelta(e,t,i){e[0]+=t,e[1]+=i}distance(e,t){return(0,s.Io)(e,t)}getZ(e,t=void 0){return t}hasZ(){return!1}getM(e,t=void 0){return t}hasM(){return!1}clone(e){return this._tag((0,o.ci)(e))}copy(e,t){return(0,s.C)(t,e)}fromXYZ(e){return this._tag((0,o.fA)(e[0],e[1]))}toXYZ(e,t=(0,l.vt)()){return(0,a.s)(t,e[0],e[1],0)}pointToXYZ(e,t=(0,l.vt)()){return(0,a.s)(t,e.x,e.y,0)}equals(e,t){return(0,s.aI)(e,t)}_tag(e){return e}}class d{constructor(e,t){this._valueType=e,this.spatialReference=t}createVector(){return this._tag((0,l.vt)())}pointToVector(e){return this._tag((0,l.fA)(e.x,e.y,this._valueType===r.Z?e.z:e.m))}arrayToVector(e){return this._tag((0,l.fA)(e[0],e[1],e[2]||0))}vectorToArray(e){return[e[0],e[1],e[2]]}pointToArray(e){return this._valueType===r.Z?[e.x,e.y,e.z]:[e.x,e.y,e.m]}vectorToPoint(e,t=new u.A){return t.x=e[0],t.y=e[1],t.z=this._valueType===r.Z?e[2]:void 0,t.m=this._valueType===r.M?e[2]:void 0,t.spatialReference=this.spatialReference,t}arrayToPoint(e,t=new u.A){return t.x=e[0],t.y=e[1],t.z=this._valueType===r.Z?e[2]:void 0,t.m=this._valueType===r.M?e[2]:void 0,t.spatialReference=this.spatialReference,t}vectorToDehydratedPoint(e,t){if(!e)return;t??={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"};const i=this._valueType===r.Z,n=this._valueType===r.M;return t.x=e[0],t.y=e[1],t.z=i?e[2]:void 0,t.m=n?e[2]:void 0,t.hasZ=i,t.hasM=n,t.spatialReference=this.spatialReference,t}lerp(e,t,i,r){return(0,a.m)(r,e,t,i)}addDelta(e,t,i,n){e[0]+=t,e[1]+=i,this._valueType===r.Z&&(e[2]+=n)}distance(e,t){return this._valueType===r.Z?(0,a.q)(e,t):(0,s.Io)(e,t)}getZ(e,t=void 0){return this._valueType===r.Z?e[2]:t}hasZ(){return this._valueType===r.Z}getM(e,t=void 0){return this._valueType===r.M?e[2]:t}hasM(){return this._valueType===r.M}clone(e){return this._tag((0,l.ci)(e))}copy(e,t){return(0,a.c)(t,e)}fromXYZ(e,t=0,i=0){return this._tag((0,l.fA)(e[0],e[1],this._valueType===r.Z?e.length>2?e[2]:t:i))}toXYZ(e,t=(0,l.vt)()){return(0,a.s)(t,e[0],e[1],this._valueType===r.Z?e[2]:0)}pointToXYZ(e,t=(0,l.vt)()){return(0,a.s)(t,e.x,e.y,this._valueType===r.Z?e.z??0:0)}equals(e,t){return(0,a.G)(e,t)}_tag(e){return e}}class f{constructor(e){this.spatialReference=e}createVector(){return this._tag((0,h.vt)())}pointToVector(e){return this._tag((0,h.fA)(e.x,e.y,e.z,e.m))}arrayToVector(e){return this._tag((0,h.fA)(e[0],e[1],e[2]||0,e[3]||0))}vectorToArray(e){return[e[0],e[1],e[2],e[3]]}pointToArray(e){return[e.x,e.y,e.z,e.m]}vectorToPoint(e,t=new u.A){return t.x=e[0],t.y=e[1],t.z=e[2],t.m=e[3],t.spatialReference=this.spatialReference,t}arrayToPoint(e,t=new u.A){return t.x=e[0],t.y=e[1],t.z=e[2],t.m=e[3],t.spatialReference=this.spatialReference,t}vectorToDehydratedPoint(e,t){if(e)return t??={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"},t.x=e[0],t.y=e[1],t.z=e[2],t.m=e[3],t.hasZ=!0,t.hasM=!0,t.spatialReference=this.spatialReference,t}lerp(e,t,i,r){return(0,c.l)(r,e,t,i)}addDelta(e,t,i,r){e[0]+=t,e[1]+=i,e[2]+=r}distance(e,t){return(0,a.q)(e,t)}getZ(e){return e[2]}hasZ(){return!0}getM(e){return e[3]}hasM(){return!0}clone(e){return this._tag((0,h.ci)(e))}copy(e,t){return(0,c.c)(t,e)}fromXYZ(e,t=0,i=0){return this._tag((0,h.fA)(e[0],e[1],e.length>2?e[2]:t,i))}toXYZ(e,t=(0,l.vt)()){return(0,a.s)(t,e[0],e[1],e[2])}pointToXYZ(e,t=(0,l.vt)()){return(0,a.s)(t,e.x,e.y,e.z??0)}equals(e,t){return(0,c.e)(e,t)}_tag(e){return e}}function y(e,t,i){return e&&t?new f(i):t?new d(r.M,i):e?new d(r.Z,i):new p(i)}},66019:(e,t,i)=>{"use strict";i.d(t,{EX:()=>T,RS:()=>k,Tp:()=>A,Xt:()=>y,Yl:()=>w,an:()=>m,n5:()=>g,ns:()=>M,pg:()=>I,qh:()=>b,rh:()=>x,sO:()=>S,y$:()=>_}),i(3313);var r=i(3223),n=(i(6273),i(15565)),s=i(4506),o=i(23572),a=i(19913),l=i(34561),c=i(28364),h=i(96124),u=i(91413),p=i(19541),d=i(19264),f=i(8977);function y(e,t){return e.events.on("drag",function(e,t){let i=null,r=null;return n=>{if("cancel"===n.action)return void(null!=r&&(r.execute({action:"cancel"}),i=null,r=null));const s={action:n.action,screenStart:n.start,screenEnd:n.screenPoint};"start"===n.action&&null==i&&(i=new x,r=new x,t(e,i,r,n.pointerType,s)),null!=i&&i.execute(s),"end"===n.action&&null!=i&&(i=null,r=null)}}(e,t))}function m(e,t){const i=[e.x,e.y,e.z??0],r=t,n=[Math.cos(r),Math.sin(r)],s=Math.sqrt(n[0]*n[0]+n[1]*n[1]);if(0===s)return null;n[0]/=s,n[1]/=s;const o=e=>{const t=(e.x-i[0])*n[0]+(e.y-i[1])*n[1];e.x=i[0]+t*n[0],e.y=i[1]+t*n[1]};return e=>(o(e.mapStart),o(e.mapEnd),{...e,axis:n})}function g(e){let t=null;return i=>{if("start"===i.action&&(t=function(e,t){const i=e.geometry,r=(0,h.RS)(t);if(null==i)return null;if("mesh"===i.type)return function(e,t,i){if((0,c.Hq)(t.vertexSpace))return function(e,t,i,r){const n=v((0,c.MW)(t.vertexSpace,t.spatialReference),r),s=t.spatialReference;return null==n?null:{move:(t,r,o,c)=>{const h=(0,d.Cy)(n.clone(),t,r,o);if(h.spatialReference.equals(s))i.origin=(0,a.fA)(h.x,h.y,h.z??0);else{const e=(0,l.project)(h,s);null!=e&&(i.origin=(0,a.fA)(e.x,e.y,e.z??0))}const p="end"===c;e.notifyMeshTransformChanged(p?{action:u.$.UpdateFastLocalOrigin}:{})}}}(e,t,t.vertexSpace,i);if(!t.spatialReference.equals(i))return null;let r=0,n=0,s=0;return{move:(i,o,a)=>{const l=i-r,c=o-n,h=a-s;if(l||c||h){const u=new f.A(t.anchor.x+l,t.anchor.y+c,(t.anchor.z??0)+h,t.anchor.spatialReference);t.centerAt(u),e.notifyGeometryChanged(),r=i,n=o,s=a}}}}(e,i,r);const n=v(i,r),s=i.spatialReference;return null==n?null:{move:(t,i,r)=>{const o=(0,d.Cy)(n.clone(),t,i,r);o.spatialReference.equals(s)?e.geometry=o:e.geometry=(0,l.project)(o,s)}}}(e,i.mapStart.spatialReference)),null==t)return null;const r=i.mapEnd.x-i.mapStart.x,n=i.mapEnd.y-i.mapStart.y,s=i.mapEnd.z-i.mapStart.z;return t.move(r,n,s,i.action),{...i,translationX:r,translationY:n,translationZ:s}}}function v(e,t){return null==e?null:e.spatialReference.equals(t)?e.clone():(0,l.project)(e,t)}function _(e,t=null,i){let r=null;const n=null==t||e.spatialReference?.equals(t)?e=>e:e=>null!=e?(0,l.project)(e,t):e,s={exclude:[],...i};return t=>{if("start"===t.action&&(r=n(e.toMap(t.screenStart,s))),null==r)return null;const i=n(e.toMap(t.screenEnd,s));return null!=i?{...t,mapStart:r,mapEnd:i}:null}}function b(e){const t=e.map((e=>g(e))).filter(r.Ru);return e=>{const i=e.mapEnd.x-e.mapStart.x,r=e.mapEnd.y-e.mapStart.y,n=e.mapEnd.z-e.mapStart.z;return t.forEach((t=>t(e))),{...e,translationX:i,translationY:r,translationZ:n}}}function w(e){return null!=e.geometry&&"mesh"===e.geometry.type?function(e,t){const{vertexSpace:i}=t;if("georeferenced"===i.type){const i=t.vertexAttributes.clonePositional();return r=>(t.vertexAttributes=i,e.notifyGeometryChanged(),r)}const r=(0,a.o8)(i.origin),n=t.transform?.clone();return i=>(t.transform=n,t.vertexSpace.origin=r,e.notifyMeshTransformChanged(),i)}(e,e.geometry):function(e,t){const i=new Map;for(const t of["geometry"])i.set(t,(0,n.o8)(e[t]));return t=>(i.forEach(((t,i)=>{e[i]=t})),t)}(e)}function M(e){const t=e.map((e=>w(e))).filter((e=>null!=e));return e=>(t.forEach((t=>t(e))),e)}function T(){let e=0,t=0,i=0;return r=>{"start"===r.action&&(e=r.mapStart.x,t=r.mapStart.y,i=r.mapStart.z);const n=r.mapEnd.x-e,s=r.mapEnd.y-t,o=r.mapEnd.z-i;return e=r.mapEnd.x,t=r.mapEnd.y,i=r.mapEnd.z,{...r,mapDeltaX:n,mapDeltaY:s,mapDeltaZ:o,mapDeltaSpatialReference:r.mapStart.spatialReference}}}function S(){let e=0,t=0;return i=>{"start"===i.action&&(e=i.screenStart.x,t=i.screenStart.y);const r=i.screenEnd.x-e,n=i.screenEnd.y-t;return e=i.screenEnd.x,t=i.screenEnd.y,{...i,screenDeltaX:r,screenDeltaY:n}}}function A(e,t){let i=null,r=0,n=0;return a=>{if("start"===a.action&&(i=e.toScreen?.(t),null!=i&&(i.x<0||i.x>e.width||i.y<0||i.y>e.height?i=null:(r=a.screenStart.x-i.x,n=a.screenStart.y-i.y))),null==i)return null;const l=(0,s.qE)(a.screenEnd.x-r,0,e.width),c=(0,s.qE)(a.screenEnd.y-n,0,e.height),h=(0,o.tc)(l,c);return a.screenStart=i,a.screenEnd=h,a}}const E=()=>{};class x{constructor(){this.execute=E}next(e,t=new x){return null!=e&&(this.execute=i=>{const r=e(i);null!=r&&t.execute(r)}),t}}function I(e,t,i=[]){if("2d"===e.type)return e=>e;let r=null;return n=>{"start"===n.action&&(r=e.toMap(n.screenStart,{exclude:i}),null!=r&&(r.z=(0,p.id)(r,e,t)));const s=e.toMap(n.screenEnd,{exclude:i});null!=s&&(s.z=(0,p.id)(s,e,t));const o=null!=r&&null!=s?{sceneStart:r,sceneEnd:s}:null;return{...n,scenePoints:o}}}function C(e,t,i){const r=t.elevationProvider.getElevation(e.x,e.y,e.z??0,e.spatialReference,"scene")??0,n=(0,h.EL)(e);return n.z=r,n.hasZ=!0,n.z=(0,p.id)(n,t,i),n}function k(e,t){if("2d"===e.type)return e=>e;let i=null;return r=>{"start"===r.action&&(i=C(r.mapStart,e,t));const n=C(r.mapEnd,e,t),s=null!=i&&null!=n?{sceneStart:i,sceneEnd:n}:null;return{...r,scenePoints:s}}}},17071:(e,t,i)=>{"use strict";i.d(t,{uA:()=>p,oH:()=>u,ZE:()=>d,Li:()=>h});var r=i(3223),n=i(57888),s=i(65648),o=i(38648),a=i(19793),l=i(67488),c=i(84456);class h{constructor(e){this.component=e,this.leftEdge=null,this.rightEdge=null,this.type="vertex",this.index=null}get pos(){return this._pos}set pos(e){this._pos=e,this.component.unnormalizeVertexPositions()}}class u{constructor(e,t,i){this.component=e,this.leftVertex=t,this.rightVertex=i,this.type="edge",t.rightEdge=this,i.leftEdge=this}}class p{constructor(e,t){this._spatialReference=e,this._viewingMode=t,this.vertices=[],this.edges=[],this.index=null}unnormalizeVertexPositions(){this.vertices.length<=1||function(e,t){if(!t.supported)return;let i=1/0,r=-1/0;const n=t.upperBoundX-t.lowerBoundX;e.forEach((e=>{let s=e.pos[0];for(;s<t.lowerBoundX;)s+=n;for(;s>t.upperBoundX;)s-=n;i=Math.min(i,s),r=Math.max(r,s),e.pos[0]=s}));const s=r-i;n-s<s&&e.forEach((e=>{e.pos[0]<0&&(e.pos[0]+=n)}))}(this.vertices,function(e,t){const i=(0,l.Vp)(e);return t===c.RT.Global&&i?{supported:!0,lowerBoundX:i.valid[0],upperBoundX:i.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}(this._spatialReference,this._viewingMode))}updateVertexIndex(e,t){if(0===this.vertices.length)return;const i=this.vertices[0];let r=null,n=e,s=t;do{r=n,r.index=s++,n=r.rightEdge?r.rightEdge.rightVertex:null}while(null!=n&&n!==i);r.leftEdge&&r!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(r),this.vertices.length-1)}getFirstVertex(){return this.vertices.at(0)}getLastVertex(){return this.vertices.at(-1)}isClosed(){return this.vertices.length>2&&null!==this.vertices[0].leftEdge}swapVertices(e,t){const i=this.vertices[e];this.vertices[e]=this.vertices[t],this.vertices[t]=i}iterateVertices(e){if(0===this.vertices.length)return;const t=this.vertices[0];let i=t;do{e(i,i.index),i=null!=i.rightEdge?i.rightEdge.rightVertex:null}while(i!==t&&null!=i)}}class d extends n.A{constructor(e,t){super(),this.type=e,this.coordinateHelper=t,this._geometry=null,this._dirty=!0,this.components=[]}get geometry(){if(this._dirty){switch(this.type){case"point":this._geometry=this._toPoint();break;case"polyline":this._geometry=this._toPolyline();break;case"polygon":this._geometry=this._toPolygon()}this._dirty=!1}return this._geometry}get spatialReference(){return this.coordinateHelper.spatialReference}notifyChanges(e){this._dirty=!0,this.emit("change",e)}_toPoint(){return 0===this.components.length||0===this.components[0].vertices.length?null:this.coordinateHelper.vectorToPoint(this.components[0].vertices[0].pos)}_toPolyline(){const e=[],t=this.coordinateHelper.vectorToArray;for(const i of this.components){if(i.vertices.length<1)continue;const r=[];let n=i.vertices.find((e=>null==e.leftEdge));const s=n;do{r.push(t(n.pos)),n=n.rightEdge?n.rightEdge.rightVertex:null}while(n&&n!==s);e.push(r)}return new o.A({paths:e,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}_toPolygon(){const e=[],t=this.coordinateHelper.vectorToArray;for(const i of this.components){if(i.vertices.length<1)continue;const r=[],n=i.vertices[0];let s=n;const o=s;do{r.push(t(s.pos)),s=null!=s.rightEdge?s.rightEdge.rightVertex:null}while(s&&s!==o);i.isClosed()&&r.push(t(n.pos)),e.push(r)}return new s.A({rings:e,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}static fromGeometry(e,t){const i=e.spatialReference,n=(0,a.BV)(e.hasZ,e.hasM,i),s=new d(e.type,n);switch(e.type){case"polygon":{const o=e.rings;for(let e=0;e<o.length;++e){const a=o[e],l=new p(i,t);l.index=e;const c=a.length>2&&(0,r.aI)(a[0],a[a.length-1]),d=c?a.length-1:a.length;for(let e=0;e<d;++e){const t=n.arrayToVector(a[e]),i=new h(l);l.vertices.push(i),i.pos=t,i.index=e}const f=l.vertices.length-1;for(let e=0;e<f;++e){const t=l.vertices[e],i=l.vertices[e+1],r=new u(l,t,i);l.edges.push(r)}if(c){const e=new u(l,l.vertices[l.vertices.length-1],l.vertices[0]);l.edges.push(e)}s.components.push(l)}break}case"polyline":{const r=e.paths;for(let e=0;e<r.length;++e){const o=r[e],a=new p(i,t);a.index=e;const l=o.length;for(let e=0;e<l;++e){const t=n.arrayToVector(o[e]),i=new h(a);a.vertices.push(i),i.pos=t,i.index=e}const c=a.vertices.length-1;for(let e=0;e<c;++e){const t=a.vertices[e],i=a.vertices[e+1],r=new u(a,t,i);a.edges.push(r)}s.components.push(a)}break}case"point":{const r=new p(i,t);r.index=0;const o=new h(r);o.index=0,o.pos=n.pointToVector(e),r.vertices.push(o),s.components.push(r);break}}return s}}},60141:(e,t,i)=>{"use strict";i.d(t,{p:()=>_});var r=i(57888),n=i(70214),s=i(17071),o=i(36826);class a{constructor(e,t,i){this._editGeometry=e,this._component=t,this._pos=i,this._addedVertex=null,this._originalEdge=null,this._left=null,this._right=null}apply(){let e="redo";null==this._addedVertex&&(e="apply",this._addedVertex=new s.Li(this._component));const t=this._component.getLastVertex();if(null==t)this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,this._addedVertex.index=0;else{let e=null;t.rightEdge&&(this._originalEdge=t.rightEdge,e=this._originalEdge.rightVertex,this._component.edges.splice(this._component.edges.indexOf(this._originalEdge),1)),this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,null==this._left&&(this._left=new s.oH(this._component,t,this._addedVertex)),this._component.edges.push(this._left),t.rightEdge=this._left,null!=this._originalEdge&&null!=e&&(null==this._right&&(this._right=new s.oH(this._component,this._addedVertex,e)),this._component.edges.push(this._right),e.leftEdge=this._right),this._component.updateVertexIndex(this._addedVertex,t.index+1)}this._editGeometry.notifyChanges({operation:e,addedVertices:[this._addedVertex]})}undo(){null!=this._addedVertex&&(this._component.vertices.splice(this._component.vertices.indexOf(this._addedVertex),1),null!=this._left&&(this._component.edges.splice(this._component.edges.indexOf(this._left),1),this._left.leftVertex.rightEdge=null),null!=this._right&&(this._component.edges.splice(this._component.edges.indexOf(this._right),1),this._right.rightVertex.leftEdge=null),null!=this._originalEdge&&(this._component.edges.push(this._originalEdge),this._originalEdge.leftVertex.rightEdge=this._originalEdge,this._originalEdge.rightVertex.leftEdge=this._originalEdge),null!=this._left?this._component.updateVertexIndex(this._left.leftVertex,this._left.leftVertex.index):this._component.updateVertexIndex(this._addedVertex,0),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this._addedVertex]}))}accumulate(){return!1}}var l=i(62853);class c{constructor(e,t,i=0){this._editGeometry=e,this._vertices=t,this._minNumberOfVertices=i,this.removedVertices=null}apply(){let e="redo";if(null==this.removedVertices){const t=this.removedVertices=[];this._vertices.forEach((e=>{const i=this._removeVertex(e);null!=i&&t.push(i)})),e="apply"}else this.removedVertices.forEach((e=>{this._removeVertex(e.removedVertex)}));this._editGeometry.notifyChanges({operation:e,removedVertices:this._vertices})}undo(){this.removedVertices?.forEach((e=>{this._undoRemoveVertex(e)})),this._editGeometry.notifyChanges({operation:"undo",addedVertices:this._vertices})}accumulate(){return!1}_removeVertex(e){const t=e.component;if(t.vertices.length<=this._minNumberOfVertices)return null;const i={removedVertex:e,createdEdge:null},r=e.leftEdge,n=e.rightEdge;return t.vertices.splice(t.vertices.indexOf(e),1),r&&(t.edges.splice(t.edges.indexOf(r),1),r.leftVertex.rightEdge=null),n&&(t.edges.splice(t.edges.indexOf(n),1),n.rightVertex.leftEdge=null),0===e.index&&n&&this._vertices.length>0&&t.swapVertices(t.vertices.indexOf(n.rightVertex),0),r&&n&&(i.createdEdge=new s.oH(t,r.leftVertex,n.rightVertex),t.edges.push(i.createdEdge)),n&&t.updateVertexIndex(n.rightVertex,n.rightVertex.index-1),i}_undoRemoveVertex(e){const t=e.removedVertex,i=e.removedVertex.component,r=t.leftEdge,n=t.rightEdge;e.createdEdge&&i.edges.splice(i.edges.indexOf(e.createdEdge),1),i.vertices.push(t),r&&(i.edges.push(r),r.leftVertex.rightEdge=r),n&&(i.edges.push(n),n.rightVertex.leftEdge=n),i.updateVertexIndex(t,t.index)}}class h{constructor(e,t,i){this._editGeometry=e,this._edge=t,this._t=i,this.createdVertex=null,this._left=null,this._right=null}apply(){let e="redo";const t=this._edge,i=t.component,r=t.leftVertex,n=t.rightVertex;i.edges.splice(i.edges.indexOf(t),1),null==this.createdVertex&&(e="apply",this.createdVertex=new s.Li(t.component)),i.vertices.push(this.createdVertex),this.createdVertex.pos=this._editGeometry.coordinateHelper.lerp(t.leftVertex.pos,t.rightVertex.pos,this._t,this._editGeometry.coordinateHelper.createVector()),null==this._left&&(this._left=new s.oH(i,r,this.createdVertex)),this._left.leftVertex.leftEdge?i.edges.push(this._left):i.edges.unshift(this._left),r.rightEdge=this._left,null==this._right&&(this._right=new s.oH(i,this.createdVertex,n)),i.edges.push(this._right),n.leftEdge=this._right,i.updateVertexIndex(this.createdVertex,r.index+1),this._editGeometry.notifyChanges({operation:e,addedVertices:[this.createdVertex]})}undo(){if(null==this.createdVertex||null==this._left||null==this._right)return null;const e=this._edge,t=e.component,i=this.createdVertex.leftEdge,r=this.createdVertex.rightEdge,n=i?.leftVertex,s=r?.rightVertex;t.vertices.splice(t.vertices.indexOf(this.createdVertex),1),t.edges.splice(t.edges.indexOf(this._left),1),t.edges.splice(t.edges.indexOf(this._right),1),this._edge.leftVertex.leftEdge?t.edges.push(this._edge):t.edges.unshift(this._edge),n&&(n.rightEdge=e),s&&(s.leftEdge=e),n&&t.updateVertexIndex(n,n.index),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this.createdVertex]})}accumulate(){return!1}}class u{constructor(e,t,i){this._editGeometry=e,this._vertex=t,this._pos=i}apply(){const e=null==this._originalPosition;e&&(this._originalPosition=this._vertex.pos),this._apply(e?"apply":"redo")}undo(){this._vertex.pos=this._originalPosition,this._editGeometry.notifyChanges({operation:"undo",updatedVertices:[this._vertex]})}accumulate(e){return e instanceof u&&e._vertex===this._vertex&&(this._pos=e._pos,this._apply("apply"),!0)}_apply(e){this._vertex.pos=this._pos,this._editGeometry.components.forEach((e=>e.unnormalizeVertexPositions())),this._editGeometry.notifyChanges({operation:e,updatedVertices:[this._vertex]})}}var p=i(3223);class d{constructor(e,t){this._editGeometry=e,this._component=t,this._createdEdge=null}apply(){let e="redo";if(null==this._createdEdge){e="apply";const t=this._component.getFirstVertex(),i=this._component.getLastVertex();if(this._component.isClosed()||this._component.vertices.length<3||null==t||null==i)return;this._createdEdge=new s.oH(this._component,i,t)}this._createdEdge.leftVertex.rightEdge=this._createdEdge,this._createdEdge.rightVertex.leftEdge=this._createdEdge,this._component.edges.push(this._createdEdge),this._editGeometry.notifyChanges({operation:e})}undo(){null!=this._createdEdge&&((0,p.TF)(this._component.edges,this._createdEdge),this._createdEdge.leftVertex.rightEdge=null,this._createdEdge.rightVertex.leftEdge=null,this._editGeometry.notifyChanges({operation:"undo"}))}accumulate(){return!1}}var f=i(91604),y=i(98947),m=i(68514),g=i(98543);class v{constructor(){this._operations=[],this._closed=!1}close(){this._closed=!0}apply(){for(const e of this._operations)e.apply()}undo(){for(let e=this._operations.length-1;e>=0;e--)this._operations[e].undo()}accumulate(e){if(this._closed)return!1;const t=this._operations.length?this._operations[this._operations.length-1]:null;return t&&t.accumulate(e)||(this._operations.push(e),e.apply()),!0}}class _ extends r.A{constructor(e){super(),this.data=e,this._undoStack=[],this._redoStack=[],this._listener=this.data.on("change",(e=>{e.addedVertices&&this.emit("vertex-add",{type:"vertex-add",vertices:e.addedVertices,operation:e.operation}),e.removedVertices&&this.emit("vertex-remove",{type:"vertex-remove",vertices:e.removedVertices,operation:e.operation}),e.updatedVertices&&this.emit("vertex-update",{type:"vertex-update",vertices:e.updatedVertices,operation:e.operation})}))}destroy(){this._listener.remove()}splitEdge(e,t){return this._apply(new h(this.data,e,t))}updateVertices(e,t,i=o.Y.ACCUMULATE_STEPS){return this._apply(new l.D(this.data,e,t),i)}moveVertices(e,t,i,r,n=o.Y.ACCUMULATE_STEPS){return this.updateVertices(e,new f.a(this.data.coordinateHelper,t,i,r),n)}scaleVertices(e,t,i,r,n,s=o.Y.ACCUMULATE_STEPS,a=l.K.CUMULATIVE){return this.updateVertices(e,new g.j(t,i,r,n,a),s)}rotateVertices(e,t,i,r=o.Y.ACCUMULATE_STEPS,n=l.K.CUMULATIVE){return this.updateVertices(e,new m.m(t,i,n),r)}removeVertices(e){return this._apply(new c(this.data,e,this._minNumVerticesPerType))}appendVertex(e){return 0===this.data.components.length?null:this._apply(new a(this.data,this.data.components[0],e))}setVertexPosition(e,t){return this._apply(new u(this.data,e,t))}offsetEdge(e,t,i,r=o.Y.ACCUMULATE_STEPS){return this.updateVertices([t.leftVertex,t.rightVertex],new y.L(this.data.coordinateHelper,e,t,i),r)}closeComponent(e){return this.data.components.includes(e)?this._apply(new d(this.data,e)):null}canRemoveVertex(e){return e.vertices.length>this._minNumVerticesPerType}createUndoGroup(){const e=new v;return this._apply(e),(0,n.hA)((()=>e.close()))}undo(){if(this._undoStack.length>0){const e=this._undoStack.pop();return e.undo(),this._redoStack.push(e),e}return null}redo(){if(this._redoStack.length>0){const e=this._redoStack.pop();return e.apply(),this._undoStack.push(e),e}return null}get canUndo(){return this._undoStack.length>0}get canRedo(){return this._redoStack.length>0}get lastOperation(){return this._undoStack.length>0?this._undoStack[this._undoStack.length-1]:null}get _minNumVerticesPerType(){switch(this.data.type){case"point":return 1;case"polyline":return 2;case"polygon":return 3;default:return 0}}_apply(e,t=o.Y.ACCUMULATE_STEPS){return t!==o.Y.NEW_STEP&&null!=this.lastOperation&&this.lastOperation.accumulate(e)||(e.apply(),this._undoStack.push(e),this._redoStack=[]),e}static fromGeometry(e,t){return new _(s.ZE.fromGeometry(e,t))}}},36826:(e,t,i)=>{"use strict";var r;i.d(t,{Y:()=>r}),function(e){e[e.NEW_STEP=0]="NEW_STEP",e[e.ACCUMULATE_STEPS=1]="ACCUMULATE_STEPS"}(r||(r={}))},91604:(e,t,i)=>{"use strict";i.d(t,{a:()=>r});class r{constructor(e,t,i,r){this._helper=e,this.dx=t,this.dy=i,this.dz=r}_move(e,t,i,r){this._helper.addDelta(e.pos,t,i,r)}apply(e){this._move(e,this.dx,this.dy,this.dz)}undo(e){this._move(e,-this.dx,-this.dy,-this.dz)}canAccumulate(e){return e instanceof r}accumulate(e,t){this._move(e,t.dx,t.dy,t.dz)}accumulateParams(e){this.dx+=e.dx,this.dy+=e.dy,this.dz+=e.dz}}},98947:(e,t,i)=>{"use strict";i.d(t,{B:()=>f,L:()=>u});var r=i(4506),n=i(53334),s=i(56560),o=i(80347),a=i(19913),l=i(87368),c=i(74695),h=i(4215);class u{get plane(){return this._plane}get requiresSplitEdgeLeft(){return!this._left.isOriginalDirection}get requiresSplitEdgeRight(){return!this._right.isOriginalDirection}get edgeDirection(){return this._edgeDirection}constructor(e,t,i,r=0,n=y.IMMEDIATE){this._helper=e,this._planeType=t,this._edge=i,this.distance=r,this._plane=(0,l.vt)(),this._offsetPlane=(0,l.vt)(),this._minDistance=-1/0,this._maxDistance=1/0,this._selectedArrow=1,n===y.IMMEDIATE&&this._initialize()}_initialize(){this._initializeNeighbors(),this._initializePlane(),this._initializeDistanceConstraints()}_initializeNeighbors(){const e=this._toXYZ(this._edge.leftVertex.pos),t=this._toXYZ(this._edge.leftVertex.leftEdge?.leftVertex?.pos),i=this._toXYZ(this._edge.rightVertex.pos),r=this._toXYZ(this._edge.rightVertex.rightEdge?.rightVertex?.pos);this._edgeDirection=(0,o.E)((0,a.vt)(),e,i),t?(this._left=this._computeNeighbor(e,t,this._edgeDirection),this._right=this._computeNeighbor(i,r,this._edgeDirection,this._left)):(this._right=this._computeNeighbor(i,r,this._edgeDirection),this._left=this._computeNeighbor(e,t,this._edgeDirection,this._right))}_toXYZ(e){return null!=e?this._helper.toXYZ(e):null}_pointToXYZ(e){return this._toXYZ(this._helper.pointToVector(e))}_computeNeighbor(e,t,i,r){const n=(0,a.vt)();if(t){(0,o.E)(n,e,t);const r=!this._passesBisectingAngleThreshold(n,i);return{start:e,end:t,direction:r?this._bisectVectorsPerpendicular(i,n):n,isOriginalDirection:!r}}return this._helper.hasZ()?r&&((0,o.b)(n,i,r.direction),(0,o.b)(n,n,i),(0,o.n)(n,n),Math.sign(n[1])!==Math.sign(i[0])&&(0,o.h)(n,n,-1)):(0,o.s)(n,-i[1],i[0],0),{start:e,end:t,direction:n,isOriginalDirection:!0}}_passesBisectingAngleThreshold(e,t){const i=Math.abs((0,c.g7)(t,e));return i>=p&&i<=Math.PI-p}_bisectVectorsPerpendicular(e,t){const i=(0,o.k)(e,t)<0?e:(0,o.F)((0,a.vt)(),e),r=Math.abs((0,o.k)(i,t));if(!(r<d||r>1-d))return this._bisectDirection(i,t);const n=(0,o.b)((0,a.vt)(),i,[0,0,1]);return(0,o.n)(n,n)}_bisectDirection(e,t){const i=(0,o.g)((0,a.vt)(),e,t);return(0,o.n)(i,i)}_initializePlane(){const e=this._computeNormalDirection(this._left),t=this._computeNormalDirection(this._right);(0,o.k)(e,t)<0&&(0,o.F)(t,t),(0,l.O_)(this._left.start,this._bisectDirection(e,t),this._plane)}_computeNormalDirection(e){const t=(0,o.b)((0,a.vt)(),e.direction,this._edgeDirection);(0,o.n)(t,t);const i=(0,o.b)((0,a.vt)(),this._edgeDirection,t);return this._planeType===f.XY&&(i[2]=0),(0,o.n)(i,i)}_initializeDistanceConstraints(){null==this._left.end||this.requiresSplitEdgeLeft||this._updateDistanceConstraint((0,l.mN)(this._plane,this._left.end)),null==this._right.end||this.requiresSplitEdgeRight||this._updateDistanceConstraint((0,l.mN)(this._plane,this._right.end)),this._updateIntersectDistanceConstraint(this._plane)}_updateDistanceConstraint(e){e<=0&&(this._minDistance=Math.max(this._minDistance,e)),e>=0&&(this._maxDistance=Math.min(this._maxDistance,e))}_updateIntersectDistanceConstraint(e){const t=(0,l.Qj)(e),i=this._edgeDirection,r=(0,o.g)((0,a.vt)(),this._left.start,this._left.direction),c=(0,o.g)((0,a.vt)(),this._right.start,this._right.direction),u=this._pointInBasis2D((0,s.vt)(),t,i,this._left.start),p=this._pointInBasis2D((0,s.vt)(),t,i,r),d=this._pointInBasis2D((0,s.vt)(),t,i,this._right.start),f=this._pointInBasis2D((0,s.vt)(),t,i,c),[y]=(0,h.jI)({start:p,end:u,type:h.Vv.LINE},{start:f,end:d,type:h.Vv.LINE});if(!y)return;const m=(0,n.Re)((0,s.vt)(),u,p);(0,n.S8)(m,m);const g=(0,n.Re)((0,s.vt)(),y,p),v=(0,n.Om)(m,g),_=(0,o.g)((0,a.vt)(),r,(0,o.h)((0,a.vt)(),this._left.direction,-v)),b=(0,l.mN)(e,_);this._updateDistanceConstraint(b)}_pointInBasis2D(e,t,i,r){return e[0]=(0,c.gr)(t,r),e[1]=(0,c.gr)(i,r),e}_offset(e,t){Number.isFinite(this._minDistance)&&(t=Math.max(this._minDistance,t)),Number.isFinite(this._maxDistance)&&(t=Math.min(this._maxDistance,t)),(0,l.C)(this._offsetPlane,this._plane),this._offsetPlane[3]-=t;const i=(e,t,i)=>null!=t&&(0,l.U5)(this._offsetPlane,e,(0,o.g)((0,a.vt)(),e,t),i),r=(0,a.vt)();(e===this._edge.leftVertex?i(this._left.start,this._left.direction,r):i(this._right.start,this._right.direction,r))&&this._helper.copy(this._helper.fromXYZ(r,void 0,this._helper.getM(e.pos)),e.pos)}selectArrowFromStartPoint(e){this._selectedArrow=(0,l.Tj)(this.plane,this._pointToXYZ(e))?1:-1}get selectedArrow(){return this._selectedArrow}signedDistanceToPoint(e){return(0,l.mN)(this.plane,this._pointToXYZ(e))}apply(e){this._offset(e,this.distance)}undo(e){this._offset(e,0)}canAccumulate(e){return e instanceof u&&this._edge.leftVertex.index===e._edge.leftVertex.index&&this._edge.rightVertex.index===e._edge.rightVertex.index&&this._edge.component===e._edge.component&&this._maybeEqualsVec3(this._left.direction,e._left.direction)&&this._maybeEqualsVec3(this._right.direction,e._right.direction)&&(0,o.G)((0,l.Qj)(this._plane),(0,l.Qj)(e._plane))}accumulate(e,t){const i=this._plane[3]-t._plane[3]+t.distance;this._offset(e,i)}accumulateParams(e){const t=e.distance-e._plane[3];this.distance=t+this._plane[3]}clone(){const e=new u(this._helper,this._planeType,this._edge,this.distance,y.DEFERRED);return(0,l.C)(e._plane,this._plane),(0,l.C)(e._offsetPlane,this._offsetPlane),e._maxDistance=this._maxDistance,e._minDistance=this._minDistance,e._left=this._cloneNeighbor(this._left),e._right=this._cloneNeighbor(this._right),e._edgeDirection=(0,o.c)((0,a.vt)(),this._edgeDirection),e}_maybeEqualsVec3(e,t){return null==e&&null==t||null!=e&&null!=t&&(0,o.G)(e,t)}_cloneNeighbor({start:e,end:t,direction:i,isOriginalDirection:r}){return{start:(0,o.c)((0,a.vt)(),e),end:null!=t?(0,o.c)((0,a.vt)(),t):null,direction:(0,o.c)((0,a.vt)(),i),isOriginalDirection:r}}}const p=(0,r.kU)(15),d=.001;var f,y,m;(m=f||(f={}))[m.XYZ=0]="XYZ",m[m.XY=1]="XY",function(e){e[e.IMMEDIATE=0]="IMMEDIATE",e[e.DEFERRED=1]="DEFERRED"}(y||(y={}))},68514:(e,t,i)=>{"use strict";i.d(t,{m:()=>o});var r=i(3223),n=i(53334),s=i(62853);class o{constructor(e,t,i=s.K.CUMULATIVE){this.origin=e,this.angle=t,this._accumulationType=i}_rotate(e,t){(0,n.e$)(e.pos,e.pos,this.origin,t)}apply(e){this._rotate(e,this.angle)}undo(e){this._rotate(e,-this.angle)}canAccumulate(e){return e instanceof o&&(0,r.aI)(this.origin,e.origin)}accumulate(e,t){const i=t._accumulationType===s.K.REPLACE;this._rotate(e,i?t.angle-this.angle:t.angle)}accumulateParams(e){const t=e._accumulationType===s.K.REPLACE;this.angle=t?e.angle:this.angle+e.angle}}},98543:(e,t,i)=>{"use strict";i.d(t,{j:()=>a});var r=i(3223),n=i(56560),s=i(53334),o=i(62853);class a{constructor(e,t,i,r,s=o.K.CUMULATIVE){this.origin=e,this.axis1=t,this.factor1=i,this.factor2=r,this._accumulationType=s,this.axis2=(0,n.fA)(t[1],-t[0])}_scale(e,t,i){(0,s.Vj)(e.pos,e.pos,this.origin,this.axis1,t),(0,s.Vj)(e.pos,e.pos,this.origin,this.axis2,i)}apply(e){this._scale(e,this.factor1,this.factor2)}undo(e){this._scale(e,1/this.factor1,1/this.factor2)}canAccumulate(e){return e instanceof a&&(0,r.aI)(this.origin,e.origin)&&(0,r.aI)(this.axis1,e.axis1)}accumulate(e,t){t._accumulationType===o.K.REPLACE?this._scale(e,t.factor1/this.factor1,t.factor2/this.factor2):this._scale(e,t.factor1,t.factor2)}accumulateParams(e){const t=e._accumulationType===o.K.REPLACE;this.factor1=t?e.factor1:this.factor1*e.factor1,this.factor2=t?e.factor2:this.factor2*e.factor2}}},62853:(e,t,i)=>{"use strict";i.d(t,{D:()=>r,K:()=>n});class r{constructor(e,t,i){this._editGeometry=e,this._vertices=t,this.operation=i,this._undone=!1}apply(){this._vertices.forEach((e=>this.operation.apply(e))),this._editGeometry.components.forEach((e=>e.unnormalizeVertexPositions())),this._editGeometry.notifyChanges({operation:this._undone?"redo":"apply",updatedVertices:this._vertices})}undo(){this._vertices.forEach((e=>this.operation.undo(e))),this._editGeometry.notifyChanges({operation:"undo",updatedVertices:this._vertices}),this._undone=!0}canAccumulate(e){if(this._undone||e._vertices.length!==this._vertices.length)return!1;for(let t=0;t<e._vertices.length;++t)if(e._vertices[t]!==this._vertices[t])return!1;return this.operation.canAccumulate(e.operation)}accumulate(e){return!!(e instanceof r&&this.canAccumulate(e))&&(this._vertices.forEach((t=>this.operation.accumulate(t,e.operation))),this.operation.accumulateParams(e.operation),this._editGeometry.components.forEach((e=>e.unnormalizeVertexPositions())),this._editGeometry.notifyChanges({operation:"apply",updatedVertices:this._vertices}),!0)}}var n;!function(e){e[e.CUMULATIVE=0]="CUMULATIVE",e[e.REPLACE=1]="REPLACE"}(n||(n={}))},10715:(e,t,i)=>{"use strict";var r,n,s;i.d(t,{PK:()=>r,SJ:()=>s,p7:()=>n}),function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"}(r||(r={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(n||(n={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(s||(s={}))},92750:(e,t,i)=>{"use strict";i.d(t,{NE:()=>r,ac:()=>s,fn:()=>n});const r={redo:"r",undo:"z",center:"Alt",constraint:"Shift",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "},n={toggle:"Control"},s={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"}},29458:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var r=i(82392),n=i(73783),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325));let a=class extends n.A{constructor(e){super(e),this.enabled=!1}};(0,r._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],a.prototype,"enabled",void 0),a=(0,r._)([(0,o.$)("esri.views.interactive.sketch.SketchLabelOptions")],a);const l=a},3130:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var r=i(82392),n=i(73783),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),a=i(29458),l=i(80507),c=i(87743);let h=class extends n.A{constructor(e){super(e),this.labels=new a.A,this.tooltips=new l.A,this.values=new c.A}};(0,r._)([(0,s.MZ)({nonNullable:!0,type:a.A})],h.prototype,"labels",void 0),(0,r._)([(0,s.MZ)({nonNullable:!0,type:l.A})],h.prototype,"tooltips",void 0),(0,r._)([(0,s.MZ)({nonNullable:!0,type:c.A})],h.prototype,"values",void 0),h=(0,r._)([(0,o.$)("esri.views.interactive.sketch.SketchOptions")],h);const u=h},80507:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var r=i(82392),n=i(73783),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325));let a=class extends n.A{constructor(e){super(e),this.mode="absolute-height"}toJSON(){return{mode:this.mode}}};(0,r._)([(0,s.MZ)({type:String,nonNullable:!0})],a.prototype,"mode",void 0),a=(0,r._)([(0,o.$)("esri.widgets.Sketch.SketchTooltipOptions.ElevationOptions")],a);let l=class extends n.A{constructor(e){super(e),this.area=!0,this.direction=!0,this.distance=!0,this.elevation=!0,this.header=!0,this.helpMessage=!1,this.orientation=!0,this.radius=!0,this.rotation=!0,this.scale=!0,this.size=!0,this.totalLength=!0}toJSON(){return{area:this.area,direction:this.direction,distance:this.distance,elevation:this.elevation,header:this.header,helpMessage:this.helpMessage,orientation:this.orientation,radius:this.radius,rotation:this.rotation,scale:this.scale,size:this.size,totalLength:this.totalLength}}};(0,r._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"area",void 0),(0,r._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"direction",void 0),(0,r._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"distance",void 0),(0,r._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"elevation",void 0),(0,r._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"header",void 0),(0,r._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"helpMessage",void 0),(0,r._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"orientation",void 0),(0,r._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"radius",void 0),(0,r._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"rotation",void 0),(0,r._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"scale",void 0),(0,r._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"size",void 0),(0,r._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"totalLength",void 0),l=(0,r._)([(0,o.$)("esri.widgets.Sketch.SketchTooltipOptions.VisibleElements")],l);const c=l;let h=class extends n.A{constructor(e){super(e),this.enabled=!1,this.forceEnabled=!1,this.inputEnabled=!0,this.elevation=new a,this.visibleElements=new c,this.visualVariables=null}get effectiveEnabled(){return this.forceEnabled||this.enabled}};(0,r._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],h.prototype,"enabled",void 0),(0,r._)([(0,s.MZ)()],h.prototype,"forceEnabled",void 0),(0,r._)([(0,s.MZ)()],h.prototype,"effectiveEnabled",null),(0,r._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],h.prototype,"inputEnabled",void 0),(0,r._)([(0,s.MZ)({type:a,nonNullable:!0})],h.prototype,"elevation",void 0),(0,r._)([(0,s.MZ)({type:c,nonNullable:!0})],h.prototype,"visibleElements",void 0),(0,r._)([(0,s.MZ)()],h.prototype,"visualVariables",void 0),h=(0,r._)([(0,o.$)("esri.widgets.sketch.SketchTooltipOptions")],h);const u=h},87743:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var r=i(82392),n=i(73783),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),a=i(96871);let l=class extends n.A{constructor(e){super(e),this.directionMode="relative",this.relativeDirectionIsBilateral=!1}get effectiveDirectionMode(){switch(this.directionMode){case"relative":return this.relativeDirectionIsBilateral?a.rZ.RelativeBilateral:a.rZ.Relative;case"absolute":return a.rZ.Absolute}}};(0,r._)([(0,s.MZ)({type:String,nonNullable:!0})],l.prototype,"directionMode",void 0),(0,r._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"relativeDirectionIsBilateral",void 0),(0,r._)([(0,s.MZ)()],l.prototype,"effectiveDirectionMode",null),l=(0,r._)([(0,o.$)("esri.views.interactive.sketch.SketchValueOptions")],l);const c=l},46984:(e,t,i)=>{"use strict";i.d(t,{FX:()=>F,Mn:()=>M,WG:()=>j,ej:()=>A,en:()=>z,fT:()=>ne,i7:()=>b,jf:()=>U,qR:()=>k,xW:()=>ie});var r=i(3223),n=i(4506),s=i(53334),o=i(56560),a=i(80347),l=i(19913),c=i(74772),h=i(76982),u=i(1138),p=i(22538),d=i(87368),f=i(69891),y=i(45773),m=i(93617),g=i(95376),v=i(4215);class _{intersect(e){return $(this,e)}closestPoints(e){return[this.closestTo(e)]}}class b extends _{constructor(e){super(),this.point=e}equals(e){return this===e||ne(e)&&(0,a.j)(this.point,e.point)}closestTo(){return(0,m.o8)(this.point)}}class w extends _{constructor(e,t,i){super(),this.start=e,this.end=t,this.lineLike={start:e,end:t,type:i}}equals(e){return this===e||se(e)&&this.lineLike.type===e.lineLike.type&&(0,a.j)(this.start,e.start)&&(0,a.j)(this.end,e.end)}closestTo(e){const t=(0,g.Yv)(e,this.lineLike);return(0,m._7)(t)}}class M extends w{constructor(e,t){super(e,t,v.Vv.LINE)}}class T extends w{constructor(e,t){super(e,t,v.Vv.RAY)}}class S extends _{constructor(e){super(),this.constraints=e}equals(e){return this===e||re(e)&&(0,r.aI)(this.constraints,e.constraints,((e,t)=>e.equals(t)))}closestTo(e){let t,i=1/0;for(const r of this.constraints){const n=r.closestTo(e),s=(0,a.a)(e,n);s<i&&(i=s,t=n)}return t?(0,m.o8)(t):e}closestPoints(e){return this.constraints.flatMap((t=>t===this?[]:t.closestPoints(e)))}}class A extends _{constructor(e,t){super(),this.center=e,this.radius=t}equals(e){return this===e||le(e)&&this.center[0]===e.center[0]&&this.center[1]===e.center[1]&&this.radius===e.radius}closestTo(e){const t=(0,g.Nm)(e,this.center,this.radius);return(0,m._7)(t)}}class E extends _{constructor(e,t){super(),this.center=e,this.radius=t}equals(e){return this===e||ce(e)&&(0,a.j)(this.center,e.center)&&this.radius===e.radius}closestTo(e){const t=(0,g.Nm)(e,this.center,this.radius);return t[2]=this.center[2],(0,m._7)(t)}asCircle(){return new x((0,m.o8)(this.center),this.radius,(0,m.fA)(0,0,1))}}class x extends _{constructor(e,t,i,r=void 0){super(),this.center=e,this.radius=t,this.normal=i,this.slicePlane=r}equals(e){return this===e||he(e)&&(0,a.j)(this.center,e.center)&&(0,a.j)(this.normal,e.normal)&&this.radius===e.radius}closestTo(e){const{center:t,radius:i}=this;(0,d._I)(this.getPlane(C),e,I);const r=(0,a.z)(I,I,t),n=(0,a.p)(r);if((0,g.Zj)(n,0))return(0,m.o8)(e);const s=i/Math.sqrt(n),o=(0,a.r)((0,l.vt)(),t,r,s),{slicePlane:c}=this;if(c&&!(0,g.F2)(c,o)){const t=q(c,this);return t?.closestTo(e)??(0,m.o8)(e)}return(0,m._7)(o)}getPlane(e=(0,d.vt)()){return(0,d.O_)(this.center,this.normal,e)}}const I=(0,l.vt)(),C=(0,d.vt)();class k extends _{constructor(e){super(),this.z=e}equals(e){return this===e||oe(e)&&this.z===e.z}closestTo(e){return(0,m._7)((0,l.fA)(e[0],e[1],this.z))}getPlane(e=(0,d.vt)()){return(0,a.s)(N,0,0,this.z),(0,d.O_)(N,l.Cb,e)}}const N=(0,l.vt)();class L extends _{constructor(e,t,i){super(),this.start=e,this.end=t,this.planeLike={start:(0,m.Xz)(e),end:(0,m.Xz)(t),type:i}}equals(e){return this===e||ae(e)&&this.planeLike.type===e.planeLike.type&&(0,a.j)(this.start,e.start)&&(0,a.j)(this.end,e.end)}closestTo(e){return(0,m._7)((0,g.r2)(e,this.planeLike))}closestEndTo(e){const{start:t,end:i}=this.planeLike;return Math.sign((0,s.Om)((0,s.Re)(O,i,t),(0,s.Re)(R,(0,m.Xz)(e),t)))>0?this.end:this.start}getPlane(e=(0,d.vt)()){const t=(0,a.c)(P,this.end);return t[2]+=1,(0,d.Cr)(this.start,this.end,t,e)}getSlicePlane(e=(0,d.vt)()){const{start:t,end:i,type:r}=this.planeLike;if(r===g.pJ.PLANE)return;const n=(0,a.s)(P,t[0],t[1],0),s=(0,a.s)(D,i[0],i[1],0),o=(0,a.f)(D,s,n);return(0,d.O_)(n,o,e),e}}const O=(0,o.vt)(),R=(0,o.vt)(),P=(0,l.vt)(),D=(0,l.vt)();class F extends L{constructor(e,t){super(e,t,g.pJ.HALF_PLANE)}}class j extends L{constructor(e,t){super(e,t,g.pJ.PLANE)}}class Z extends _{constructor(e,t){super(),this.sphere=(0,f.k)(e,t)}equals(e){return this===e||ue(e)&&(0,f.l)(this.sphere,e.sphere)}closestTo(e){const t=(0,f.p)(this.sphere,e,(0,l.vt)());return(0,m._7)(t)}get center(){return(0,f.g)(this.sphere)}get radius(){return this.sphere[3]}}class z extends _{constructor(e,t,i){super(),this.start=e,this.end=t,this.getZ=i,this.planeLike={start:(0,m.Xz)(e),end:(0,m.Xz)(t),type:g.pJ.PLANE}}equals(e){return this===e||pe(e)&&(0,a.j)(this.start,e.start)&&(0,a.j)(this.end,e.end)&&this.getZ===e.getZ}closestTo(e){return function(e,t){const i=(0,g.r2)(t,e.planeLike);return i[2]=e.getZ(i[0],i[1])??de,(0,m._7)(i)}(this,e)}addIfOnTheGround(e,t){for(const i of t){const t=this.getZ(i[0],i[1])??0;(0,g.Zj)(i[2],t)&&(i[2]=t,e.push(i))}}}class U extends _{constructor(e,t,i,r,n){super(),this._origin=e,this._spatialReference=t,this._distanceMeters=i,this._elevationMeters=r,this._directionDegrees=n}equals(e){return this===e||function(e){return e instanceof U}(e)&&(0,s.t2)(this._origin,e._origin)&&this._distanceMeters===e._distanceMeters&&this._elevationMeters===e._elevationMeters&&this._directionDegrees===e._directionDegrees}closestTo([e,t,i]){if((0,s.hZ)(V,e,t),null!=this._directionDegrees&&null!=this._distanceMeters)(0,p.vN)(V,this._origin,this._directionDegrees,this._distanceMeters,this._spatialReference);else if(null!=this._directionDegrees)!function(e,t,i,r,n){let{azimuth:s,distance:o}=(0,p._3)(B,t,r,n);s??=0;let a=o*Math.cos((s-i)*u.eh);a=Math.max(0,a),(0,p.vN)(e,t,i,a,n)}(V,this._origin,this._directionDegrees,V,this._spatialReference);else if(null!=this._distanceMeters){const{azimuth:e}=(0,p._3)(G,this._origin,V,this._spatialReference);(0,p.vN)(V,this._origin,e??0,this._distanceMeters,this._spatialReference)}return(0,m.vt)(V[0],V[1],this._elevationMeters??i)}}const V=[0,0],G=new p.Zj,B=new p.Zj;function $(e,t){if(re(e)){const i=[];for(const r of e.constraints){const e=r.intersect(t);e&&i.push(e)}return ie(i)}if(re(t))return $(t,e);if(pe(e))return X(e,t);if(pe(t))return X(t,e);if(ne(e)){const{point:i}=e;if(ne(t))return(0,a.j)(i,t.point)?e:void 0;const r=t.closestTo(i);return(0,a.G)(r,i)?e:void 0}if(se(e)){if(ne(t))return $(t,e);if(se(t))return ee((0,g.SO)(e.lineLike,t.lineLike));if(oe(t))return H(e,t);if(ae(t))return ee((0,g.Mc)(t.planeLike,e.lineLike));if(le(t))return ee((0,g.K4)(e.lineLike,t.center,t.radius));if(he(t))return ee((0,g.IB)(e.lineLike,t));if(ce(t))return function({lineLike:e},{center:t,radius:i}){const r=t[2];return ee((0,g.K4)(e,t,i).filter((e=>(0,g.Zj)(e[2],r))))}(e,t);if(ue(t))return function({lineLike:e},{sphere:t}){return ee((0,f.m)(t,e.start,e.end))}(e,t)}else if(oe(e)){if(ne(t)||se(t))return $(t,e);if(oe(t))return function(e,t){return(0,g.Zj)(e.z,t.z)?e:void 0}(e,t);if(ae(t))return function({z:e},{planeLike:t}){const[i,r]=t.start,[n,s]=t.end,o=(0,m.fA)(i,r,e),a=(0,m.fA)(n,s,e);return t.type===g.pJ.PLANE?new M(o,a):new T(o,a)}(e,t);if(le(t))return function(e,t){const[i,r]=t.center;return new E((0,m.fA)(i,r,e.z),t.radius)}(e,t);if(he(t))return W(e,t);if(ce(t))return function(e,t){return(0,g.Zj)(t.center[2],e.z)?t:void 0}(e,t);if(ue(t))return function(e,{center:t,radius:i}){const r=Math.abs(t[2]-e.z);if(r>i&&!(0,g.Zj)(r,i))return;const n=(0,m.fA)(t[0],t[1],e.z),s=Math.sqrt(i**2-r**2);return(0,g.Zj)(s,0)?void 0:new E(n,s)}(e,t)}else if(ae(e)){if(ne(t)||se(t)||oe(t))return $(t,e);if(ae(t))return Q((0,g.b_)(e.planeLike,t.planeLike));if(le(t))return Q((0,g.Bn)(e.planeLike,t.center,t.radius));if(he(t))return Y(e,t);if(ce(t))return K(e,t);if(ue(t))return J(e,t)}else if(le(e)){if(ne(t)||se(t)||oe(t)||ae(t))return $(t,e);if(le(t))return Q((0,g.t1)((0,m.Xz)(e.center),e.radius,(0,m.Xz)(t.center),t.radius));if(he(t))return;if(ce(t))return function(e,t){const i=(0,s.hG)((0,m.Xz)(e.center),(0,m.Xz)(t.center));return(0,g.Zj)(i,0)&&(0,g.Zj)(e.radius,t.radius)?t:te((0,g.t1)((0,m.Xz)(e.center),e.radius,(0,m.Xz)(t.center),t.radius),t.center[2])}(e,t);if(ue(t))return}else if(he(e)){if(ne(t)||se(t)||oe(t)||ae(t)||le(t))return $(t,e);if(he(t))return;if(ce(t))return void t.asCircle();if(ue(t))return}else if(ce(e)){if(ne(t)||se(t)||oe(t)||ae(t)||le(t)||he(t))return $(t,e);if(ce(t))return function(e,t){if(!(0,g.HG)(e.center,t.center))return;const i=(0,s.hG)((0,m.Xz)(e.center),(0,m.Xz)(t.center));return(0,g.Zj)(i,0)&&(0,g.Zj)(e.radius,t.radius)?e:te((0,g.t1)((0,m.Xz)(e.center),e.radius,(0,m.Xz)(t.center),t.radius),e.center[2])}(t,e);if(ue(t))return}else if(ue(e)){if(ne(t)||se(t)||oe(t)||ae(t)||le(t)||ce(t))return $(t,e);if(ue(t))return}}const H=(()=>{const e=(0,d.vt)();return(t,i)=>{const{start:r,end:n}=t;if((0,g.HG)(r,n)&&(0,g.Zj)(r[2],i.z))return t;const s=(0,l.vt)();return(0,d.U5)(i.getPlane(e),r,n,s)?new b((0,m._7)(s)):void 0}})(),q=(()=>{const e=(0,h.vt)(),t=(0,l.vt)(),i=(0,l.vt)();return(r,s,o)=>{const{normal:h,center:u,radius:p}=s;(0,y.VV)(h,t,i);const f=(0,d.Qj)(r),v=p*(0,a.k)(f,t),_=p*(0,a.k)(f,i);(0,c.s)(e,u[0],u[1],u[2],1);const w=(0,c.g)(r,e),M=Math.hypot(v,_),T=(0,g.Zj)(M,0);if((0,g.Zj)((0,d.Io)(r,u),0)){if(T)return s;if((0,g.Zj)(p,0))return!o||(0,g.F2)(o,u)?new b((0,m.o8)(u)):void 0;(0,a.b)(t,f,h),(0,a.n)(t,t);const e=new Array,i=(0,l.o8)(u);(0,a.r)(i,i,t,p),o&&!(0,g.F2)(o,i)||e.push(i);const r=(0,l.o8)(u);return(0,a.r)(r,r,t,-p),o&&!(0,g.F2)(o,r)||e.push(r),ee(e)}if(T)return;const S=-w/M;if(Math.abs(S)>1||(0,g.Zj)(S,1))return;const A=Math.atan(v/_),E=(0,n.YN)(S)-A,x=Math.PI-E,I=new Array,C=(0,l.vt)();(0,a.r)(C,u,t,p*Math.cos(E)),(0,a.r)(C,C,i,p*Math.sin(E)),I.push(C);const k=(0,l.vt)();return(0,a.r)(k,u,t,p*Math.cos(x)),(0,a.r)(k,k,i,p*Math.sin(x)),I.push(k),ee(o?(0,g.UL)(o,I):I)}})(),W=(()=>{const e=(0,d.vt)();return(t,i)=>q(t.getPlane(e),i,i.slicePlane)})(),K=(()=>{const e=(0,d.vt)();return(t,{center:i,radius:r})=>{const n=(0,g.Bn)(t.planeLike,i,r),s=i[2];t.getSlicePlane(e);const o=new Array;for(const[t,i]of n){const r=[t,i,s];(0,g.F2)(e,r)&&o.push(r)}return ee(o)}})(),Y=(()=>{const e=(0,d.vt)(),t=(0,d.vt)();return(i,r)=>q(i.getPlane(e),r,i.getSlicePlane(t))})(),J=(()=>{const e=(0,d.vt)();return(t,{center:i,radius:r})=>{const n=t.getPlane(e),s=(0,d.mN)(n,i),o=Math.abs(s);if(o>r&&!(0,g.Zj)(o,r))return;const c=(0,l.o8)((0,d.Qj)(n)),h=(0,a.r)((0,l.vt)(),i,c,s),u=Math.sqrt(r**2-s**2);return(0,g.Zj)(u,0)?new b((0,m._7)((0,d._I)(n,i,(0,l.vt)()))):new x((0,m._7)(h),u,c,t.getSlicePlane())}})();function X(e,t){const{planeLike:i,getZ:r}=e,n=new Array;if(ne(t))e.addIfOnTheGround(n,(0,g.VT)(i,t.point));else if(se(t))e.addIfOnTheGround(n,(0,g.Mc)(i,t.lineLike));else if(le(t))for(const[e,s]of(0,g.Bn)(i,t.center,t.radius)){const t=r(e,s);null!=t&&n.push((0,l.fA)(e,s,t))}else if(ae(t)||pe(t))for(const[e,s]of(0,g.b_)(i,t.planeLike)){const t=r(e,s)??de;n.push((0,l.fA)(e,s,t))}return ee(n)}function Q(e){return ie(e.map((([e,t])=>{const i=(0,m.fA)(e,t,0),r=(0,m.fA)(e,t,1);return new M(i,r)})))}function ee(e){return ie(e.map((e=>e?new b((0,m._7)(e)):void 0)))}function te(e,t){return ee(e.map((([e,i])=>[e,i,t])))}function ie(e){if(0!==e.length)return 1===e.length?e[0]??void 0:new S(e.filter(r.Ru))}function re(e){return e instanceof S}function ne(e){return e instanceof b}function se(e){return e instanceof w}function oe(e){return e instanceof k}function ae(e){return e instanceof L}function le(e){return e instanceof A}function ce(e){return e instanceof E}function he(e){return e instanceof x}function ue(e){return e instanceof Z}function pe(e){return e instanceof z}const de=0},93617:(e,t,i)=>{"use strict";i.d(t,{Lp:()=>u,Xz:()=>l,_7:()=>a,fA:()=>c,io:()=>d,o8:()=>h,vf:()=>p,vt:()=>o,xF:()=>f});var r=i(19913),n=i(82320),s=i(19541);function o(e,t,i){return(0,r.fA)(e,t,i)}function a(e){return e}function l(e){return e}function c(e,t,i){return(0,r.fA)(e,t,i)}function h(e){return(0,r.o8)(e)}function u(e,t,{coordinateHelper:i,elevationInfo:r}){return e?p(i.vectorToDehydratedPoint(e,y),t,r):null}function p(e,t,i){if(null==e)return null;if(null==t)return(0,r.fA)(e.x,e.y,e.z??0);if("2d"===t.type)return(0,r.fA)(e.x,e.y,0);const n=(0,s.wS)(t,e,i,s.qt)??0;return(0,r.fA)(e.x,e.y,n)}function d(e,t){return(0,n.T)(e[0],e[1],e[2],t)}function f(e,t,{z:i,m:r},o){const{spatialReference:a,elevationInfo:l}=o;let c;c=null==i&&null==r?void 0:null==t||"2d"===t.type?i??void 0:(0,s.xS)(t,e,a,s.qt,l)??0;const h=(0,n.T)(e[0],e[1],c,a);return null!=r&&(h.m=r,h.hasM=!0),h}const y=(0,n.T)(0,0,0,null)},51879:(e,t,i)=>{"use strict";i.d(t,{N:()=>h});var r=i(82392),n=i(93814),s=i(84977),o=i(81482),a=i(26325);let l=class extends s.oY{constructor(){super(...arguments),this.enabled=!0}};(0,r._)([(0,o.MZ)({type:Boolean})],l.prototype,"enabled",void 0),l=(0,r._)([(0,a.$)("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],l);let c=class extends s.oY{constructor(e){super(e),this.lineSnapper=new l,this.parallelLineSnapper=new l,this.rightAngleSnapper=new l,this.rightAngleTriangleSnapper=new l,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThresholdMeters=.3,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new n.A([255,127,0]),this.orangeTransparent=new n.A([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};(0,r._)([(0,o.MZ)({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"lineSnapper",void 0),(0,r._)([(0,o.MZ)({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"parallelLineSnapper",void 0),(0,r._)([(0,o.MZ)({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"rightAngleSnapper",void 0),(0,r._)([(0,o.MZ)({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"rightAngleTriangleSnapper",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],c.prototype,"shortLineThreshold",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],c.prototype,"distance",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"pointThreshold",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"intersectionParallelLineThreshold",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"parallelLineThreshold",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],c.prototype,"verticalLineThresholdMeters",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"touchSensitivityMultiplier",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"pointOnLineThreshold",void 0),(0,r._)([(0,o.MZ)({type:n.A,nonNullable:!0})],c.prototype,"orange",void 0),(0,r._)([(0,o.MZ)({type:n.A,nonNullable:!0})],c.prototype,"orangeTransparent",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"lineHintWidthReference",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"lineHintWidthTarget",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],c.prototype,"lineHintFadedExtensions",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"parallelLineHintWidth",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],c.prototype,"parallelLineHintLength",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],c.prototype,"parallelLineHintOffset",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],c.prototype,"rightAngleHintSize",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],c.prototype,"rightAngleHintOutlineSize",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],c.prototype,"satisfiesConstraintScreenThreshold",void 0),c=(0,r._)([(0,a.$)("esri.views.interactive.snapping.Settings.Defaults")],c);const h=new c},28535:(e,t,i)=>{"use strict";i.d(t,{e:()=>r});class r{constructor(e){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.selfSnappingZ=null,this.editGeometryOperations=e.editGeometryOperations,this.elevationInfo=e.elevationInfo,this.pointer=e.pointer,this.vertexHandle=e.vertexHandle,this.excludeFeature=e.excludeFeature,this.feature=e.feature,this.visualizer=e.visualizer,this.selfSnappingZ=e.selfSnappingZ}get coordinateHelper(){return this.editGeometryOperations.data.coordinateHelper}get spatialReference(){return this.coordinateHelper.spatialReference}}},49982:(e,t,i)=>{"use strict";var r;i.d(t,{n:()=>r}),function(e){e[e.FEATURE=1]="FEATURE",e[e.SELF=2]="SELF",e[e.ALL=3]="ALL"}(r||(r={}))},51720:(e,t,i)=>{"use strict";i.d(t,{L:()=>p});var r=i(57725),n=i(37623),s=i(61985),o=i(92801),a=i(96124),l=i(19541),c=i(66019),h=i(28535),u=i(49437);function p({predicate:e=(()=>!0),snappingManager:t,snappingContext:i,updatingHandles:a,useZ:p=!0}){const g=new c.rh;if(null==t)return{snappingStep:[m,g],cancelSnapping:m};let v,_=null,b=null,w=null;const M=()=>{_=(0,r.DC)(_),t.doneSnapping(),b?.frameTask.remove(),b=null,v=(0,r.xt)(v),w=null},T=(S=t,A=p,E=g,(0,n.sg)((async({frameTask:e,point:t,scenePoint:i,context:r,event:n,delta:s,getLastState:a},l)=>{const c=await e.schedule((()=>S.snap({point:t,scenePoint:i,context:r,signal:l})),l);if(c.valid){let i=await e.schedule((()=>c.apply()),l);const h=a();null!=h.point&&t!==h.point&&(i=S.update({point:h.point,scenePoint:h.scenePoint,context:r})),null!=h.updatePoint&&(0,o.CI)(i,h.updatePoint)||(y(n.mapEnd,i,s,A),E.execute(n))}})));var S,A,E;let x=null,I=null,C=null;return{snappingStep:[r=>{if(!e(r))return r;const{action:o}=r;if("start"===o){const{info:e}=r,n=function(e){return"3d"===e.type?e.resourceController.scheduler.registerTask(u.W6.SNAPPING):u.nu}(t.view);if(b=function(e,t,i){return{context:new h.e({editGeometryOperations:e.editGeometryOperations,elevationInfo:e.elevationInfo,pointer:e.pointer,vertexHandle:null!=t.info?t.info.handle:null,excludeFeature:e.excludeFeature,feature:e.feature,visualizer:e.visualizer}),originalPos:null!=t.snapOrigin?e.coordinateHelper.vectorToDehydratedPoint(t.snapOrigin):t.mapStart,originalScenePos:null!=t.scenePoints?t.scenePoints.sceneStart:null,frameTask:i}}(i,r,n),b.context.selfSnappingZ=null,!p&&null!=e){const t=function(e,t){if(!e.hasZ())return null;const i=t.vertices;let r=null;for(const t of i){const i=e.getZ(t.pos);if(null!=r&&null!=i&&Math.abs(i-r)>1e-6)return null;null==r&&(r=i)}return r}(i.coordinateHelper,e.handle.component);null!=t&&(b.context.selfSnappingZ={value:t,elevationInfo:i.elevationInfo??l.qt})}}if(null!=b){const{context:e,originalScenePos:i,originalPos:l}=b,{mapEnd:c,mapStart:h,scenePoints:u}=r,m=d(l,f(c,h)),g=f(h,l),M={...r,action:"update"},S=b.context,A=function(e,t){return null==e||null==t?null:d(e,f(t.sceneEnd,t.sceneStart))}(i,u),E=t.update({point:m,scenePoint:A,context:e});if(C=E,y(c,E,g,p),x=m,I=A,"end"!==o){const{frameTask:e}=b;null==_&&(_=new AbortController),w=t=>{a.addPromise((0,n.QZ)(T({frameTask:e,event:M,context:S,point:m,scenePoint:A,delta:g,getLastState:()=>({point:x,scenePoint:I,updatePoint:t.forceUpdate?null:C})},_.signal)))},w({forceUpdate:!1}),null==v&&(v=(0,s.wB)((()=>t.options.effectiveEnabled),(()=>w?.({forceUpdate:!0}))))}}return"end"===o&&M(),r},g],cancelSnapping:e=>(M(),e)}}function d(e,[t,i,r]){const n=(0,a.EL)(e);return n.x+=t,n.y+=i,n.hasZ&&(n.z+=r),n}function f(e,t){const i=e.hasZ&&t.hasZ?e.z-t.z:0;return[e.x-t.x,e.y-t.y,i]}function y(e,t,[i,r,n],s){e.x=t.x+i,e.y=t.y+r,s&&e.hasZ&&t.hasZ&&(e.z=t.z+n)}function m(e){return e}},88515:(e,t,i)=>{"use strict";i.d(t,{X:()=>a});var r=i(46984),n=i(53981),s=i(86876),o=i(56142);class a extends s.w{constructor(e){super({...e,isDraped:!0,constraint:new r.en(e.edgeStart,e.edgeEnd,e.getGroundElevation)})}get hints(){return[new o.c(n.H3.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}}},62453:(e,t,i)=>{"use strict";i.d(t,{z:()=>a});var r=i(46984),n=i(53981),s=i(86876),o=i(56142);class a extends s.w{constructor(e){super({...e,constraint:new r.Mn(e.edgeStart,e.edgeEnd)})}get hints(){return[new o.c(n.H3.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}}},86876:(e,t,i)=>{"use strict";i.d(t,{w:()=>s});var r=i(49982),n=i(15462);class s extends n.C{constructor({targetPoint:e,objectId:t,constraint:i,isDraped:n}){super(e,i,n,r.n.FEATURE),this.objectId=t}}},15462:(e,t,i)=>{"use strict";i.d(t,{C:()=>r});class r{constructor(e,t,i,r){this.targetPoint=e,this.constraint=t,this.isDraped=i,this.domain=r}}},46997:(e,t,i)=>{"use strict";i.d(t,{v:()=>o});var r=i(80347),n=i(49982),s=i(12288);class o extends s.m{constructor(e,t,i=n.n.ALL){super(t,i),this.intersectionPoint=e}equals(e){return e instanceof o&&(0,r.j)(this.intersectionPoint,e.intersectionPoint)}}},56142:(e,t,i)=>{"use strict";i.d(t,{c:()=>o}),i(6273),i(80861);var r=i(80347),n=i(49982),s=i(12288);class o extends s.m{constructor(e,t,i,r,s=n.n.ALL,o=!0,a=!0){super(r,s),this.type=e,this.lineStart=t,this.lineEnd=i,this.fadeLeft=o,this.fadeRight=a}equals(e){return e instanceof o&&this.type===e.type&&(0,r.j)(this.lineStart,e.lineStart)&&(0,r.j)(this.lineEnd,e.lineEnd)&&this.fadeLeft===e.fadeLeft&&this.fadeRight===e.fadeRight}get length(){return(0,r.q)(this.lineStart,this.lineEnd)}}},27411:(e,t,i)=>{"use strict";i.d(t,{r:()=>o}),i(6273),i(80861);var r=i(80347),n=i(49982),s=i(12288);class o extends s.m{constructor(e,t,i,r=n.n.ALL){super(i,r),this.lineStart=e,this.lineEnd=t}equals(e){return e instanceof o&&(0,r.j)(this.lineStart,e.lineStart)&&(0,r.j)(this.lineEnd,e.lineEnd)}}},43457:(e,t,i)=>{"use strict";i.d(t,{l:()=>o}),i(6273),i(80861);var r=i(80347),n=i(49982),s=i(12288);class o extends s.m{constructor(e,t,i,r,s=n.n.ALL){super(r,s),this.previousVertex=e,this.centerVertex=t,this.nextVertex=i}equals(e){return e instanceof o&&(0,r.j)(this.previousVertex,e.previousVertex)&&(0,r.j)(this.centerVertex,e.centerVertex)&&(0,r.j)(this.nextVertex,e.nextVertex)}}},12288:(e,t,i)=>{"use strict";i.d(t,{m:()=>r});class r{constructor(e,t){this.isDraped=e,this.domain=t}}},53981:(e,t,i)=>{"use strict";i.d(t,{BY:()=>T,H3:()=>r,HN:()=>w,Mo:()=>g,Tu:()=>S,is:()=>b,nf:()=>_,pM:()=>m,xX:()=>v});var r,n,s=i(61985),o=i(98592),a=i(80189),l=i(11895),c=i(80347),h=i(82320),u=i(10591),p=i(82795),d=i(92750),f=i(93617),y=i(50831);function m(e,t){const i=e.x-t.x,r=e.y-t.y;return i*i+r*r}function g(e,t){return Math.sqrt(m(e,t))}function v(e,t){t.sort(((t,i)=>(0,c.a)(t.targetPoint,e)-(0,c.a)(i.targetPoint,e)))}function _({point:e,distance:t,returnEdge:i,vertexMode:r,coordinateHelper:{spatialReference:n},filter:s},c,p){return p=null!=p?p.clone():new u.A({where:"1=1"}),s&&(p.geometry=s.geometry,p.distance=s.distance,p.spatialRelationship=s.spatialRelationship,p.where=(0,a.m)(p.where,s.where),p.timeExtent=(0,l.pJ)(p.timeExtent,s.timeExtent),p.objectIds=function(e,t){return e||t?t?e?Array.from((0,o.E$)(new Set(e),new Set(t))):t:e:null}(p.objectIds,s.objectIds)),{point:(0,h.T)(e[0],e[1],e[2],n.toJSON()),mode:c,distance:t,returnEdge:i,vertexMode:r,query:p.toJSON()}}function b(e,t,i){return{left:(0,f.Lp)(e.leftVertex.pos,t,i),right:(0,f.Lp)(e.rightVertex.pos,t,i)}}function w(e){return e.createQuery()}(n=r||(r={}))[n.TARGET=0]="TARGET",n[n.REFERENCE=1]="REFERENCE",n[n.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION";const M=Symbol("snapping-toggle");function T(e,t=(()=>{})){const i=(0,s.wB)((()=>({view:e.view,snappingOptions:e.snappingOptions})),(({view:i,snappingOptions:r})=>{if(e.removeHandles(M),!i||!r)return;const n=p.o.TOOL,s=[i.on("key-down",(e=>{e.key!==d.fn.toggle||e.repeat||(r.enabledToggled=!0,t())}),n),i.on("key-up",(e=>{e.key===d.fn.toggle&&(r.enabledToggled=!1,t())}),n),i.on("pointer-move",(e=>{const i=e.native.ctrlKey;r.enabledToggled!==i&&(r.enabledToggled=i,t())}),n)];e.addHandles(s,M)}),s.pc);e.addHandles(i)}function S(e){return(0,y.r)(e)&&"utilityNetworks"in e&&!!e.utilityNetworks?.length}},5073:(e,t,i)=>{"use strict";i.d(t,{XG:()=>l,jq:()=>c});var r=i(23572),n=(i(53334),i(80347)),s=i(19913),o=i(82320),a=i(19541);function l(e,t,i,r,o=(0,s.vt)()){const l=(0,n.c)(u,e);return l[2]=(0,a.xS)(r,l,t,i)||0,r.renderCoordsHelper.toRenderCoords(l,t,o),o}function c(e,t,i,n){return"2d"===n.type?(h.x=e[0],h.y=e[1],h.spatialReference=t,n.toScreen(h)):(l(e,t,i,n,u),n.state.camera.projectToScreen(u,p),(0,r.tc)(p[0],p[1]))}const h=(0,o.T)(0,0,0,null),u=(0,s.vt)(),p=((0,r.QG)(),(0,r.QG)(),(0,r.gs)())},58042:(e,t,i)=>{"use strict";i.d(t,{N:()=>r});const r={absolute:"absolute-direction",relative:"relative-direction"}},4119:(e,t,i)=>{"use strict";i.d(t,{cx:()=>v,dz:()=>b,hj:()=>d,lJ:()=>_,tC:()=>w});var r=i(7743),n=i(5262),s=i(80347),o=i(19913),a=i(42722),l=i(22538),c=i(19541),h=i(46984),u=i(93617),p=i(96871);function d(e,t,i,r,n,s){let o="geodesic",c=(0,l.Xn)(i);const h=(0,u.vf)(e,t,r);return h[2]=0,c&&(0,a.F)(h,i,h,c)||(o="euclidean",c=i),{mode:o,view:t,elevationInfo:r,hasZ:n,directionMode:s,spatialReference:e.spatialReference,measurementSR:c,origin:h}}function f(e,t,i){if(null==t||null==e)return;const s=(0,n._H)(i.measurementSR);if(null==s)return;const o=b(e,i);if(null==o)return;const a=(0,r.l3)(t,s);return new h.ej((0,u._7)(o),a)}function y(e,t,i,n){if(null==i||null==e)return;const s=b(e,n);if(null==s)return;const a=(0,p.hF)(i),l=e=>{if(null==e)return;const t=(0,o.vt)(),i=(0,r.Wq)(e,"degrees","geographic");return(0,p.rT)(t,s,n.measurementSR,10,i,n.mode)?new h.FX(s,t):void 0},c=()=>{if(null!=t&&null!=e)return(0,p.hF)((0,p.$h)(t,e))};switch(n.directionMode){case p.rZ.Absolute:return l(a);case p.rZ.Relative:{const e=c();if(null==e)return;return l(e+a)}case p.rZ.RelativeBilateral:{const e=c();if(null==e)return;return(0,h.xW)([l(e+a),l(e-a)])}}}function m(e,t){const i=function(e,t){return M(e,t)?.value??void 0}(e,t);return null!=i?new h.qR(i):void 0}function g(e,t,i,n,s,o){if(null==i&&null==n&&null==s)return;if(null==t)return m(n,o);const{view:l,elevationInfo:c,measurementSR:d}=o,f=(0,u.vf)(t,l,c);if(!d||!(0,a.F)(f,t.spatialReference,T,d))return;const y=[T[0],T[1]],g=null!=i?(0,r.l3)(i,"meters"):void 0,v=function(e,t){const i=M(e,t);return null!=i?(0,r.l3)(i,"meters"):void 0}(n,o),_=(0,p.hF)(s),b=e=>{const t=new h.jf(y,d,g,v,e);return null==g||null==e||null==v&&o.hasZ?t:new h.i7(t.closestTo(f))};if(null==_)return b(void 0);const w=()=>{if(null!=e&&null!=t)return(0,p.hF)((0,p.$h)(e,t))};switch(o.directionMode){case p.rZ.Absolute:return b(_);case p.rZ.Relative:{const e=w();if(null==e)return;return b(e+_)}case p.rZ.RelativeBilateral:{const e=w();if(null==e)return;return(0,h.xW)([b(e+_),b(e-_)])}}}function v(e,t){return"geodesic"===t.mode?g(null,null,null,e,null,t):m(e,t)}function _(e,t,i,r,n,s){return"geodesic"===s.mode?g(t,e,i,n,r,s):function(e){let t;for(const i of e)i&&(t=t?.intersect(i)??i);return t}([f(e,i,s),y(e,t,r,s),m(n,s)])}function b(e,t){const{view:i,elevationInfo:r,measurementSR:n,origin:o,mode:l}=t,c=(0,u.vf)(e,i,r);if((0,a.F)(c,e.spatialReference,c,n))return"geodesic"!==l&&(0,s.f)(c,c,o),c}function w(e,t,i){const{view:r,measurementSR:n,spatialReference:o,origin:l,mode:c}=i,h=T;if("geodesic"===c?(0,s.c)(h,e):(0,s.g)(h,e,l),(0,a.F)(h,n,h,o))return(0,u.xF)(h,r,t,i)}function M(e,{view:t,origin:i,elevationInfo:s,hasZ:o,measurementSR:a}){if(null==e||!o)return;const l=(0,n.mq)(a);if(null==l)return;const[h,u]=i,p=(0,r.l3)(e,l),d="3d"===t?.type?(0,c.Fo)(t,h,u,p,a,s):p;return null!=d?(0,r.d_)(d,l):void 0}const T=(0,o.vt)()},72963:(e,t,i)=>{"use strict";i.d(t,{e:()=>h});var r=i(57725),n=i(37623),s=i(57882),o=i(51074),a=i(9987),l=i(39369);class c{constructor(e,t){this.item=e,this.controller=t,this.promise=null}}class h{constructor(e){this._schedule=null,this._task=null,this._deferreds=new o.A,this._controllers=new o.A,this._processingItems=new o.A,this._pausedSignal=(0,l.v)(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new s.A(e.peeker),this.process=e.process;const t=e.scheduler;e.priority&&t&&(this._task=t.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=(0,r.xt)(this._schedule),this._task=(0,r.xt)(this._task)}get updating(){return!!this._task?.updating||this.running}get length(){return this._processingItems.size+this._queue.length}abort(e){const t=this._controllers.get(e);t&&t.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach((t=>e.push(t))),this._controllers.clear(),e.forEach((e=>e.abort())),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach(((t,i)=>e(i)))}get(e){const t=this._deferreds.get(e);return t?t.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,t){const i=this.get(e);if(i)return i;const r=new AbortController;let s=null;t&&(s=(0,n.u7)(t,(()=>r.abort())));const o=()=>{a.remove(),null!=s&&s.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},a=(0,n.NY)(r.signal,(()=>{const t=this._processingItems.get(e);t&&t.controller.abort(),o(),l.reject((0,n.NK)())})),l=(0,n.Tw)();return this._deferreds.set(e,l),this._controllers.set(e,r),l.promise.then(o,o),this._queue.push(e),this._scheduleNext(),l.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){const e=this._queue.popLast();return e&&(this._deferreds.get(e)?.reject((0,n.NK)("Removed from queue")),this._removeItem(e)),e}reset(){const e=[];this._processingItems.forEach((t=>e.push(t))),this._processingItems.clear();for(const t of e)this._queue.push(t.item),t.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=(0,a._)((()=>{this._schedule=null,this._next()})))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(t))}_processError(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(t))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(null==e)return;let t;const i=new AbortController,r=new c(e,i);this._processingItems.set(e,r);try{t=this.process(e,i.signal)}catch(e){this._processError(r,e)}(0,n.$X)(t)?(r.promise=t,t.then((e=>this._processResult(r,e)),(e=>this._processError(r,e)))):this._processResult(r,t)}get test(){return{update:e=>this.runTask(e)}}}},47273:(e,t,i)=>{"use strict";var r;i.d(t,{M:()=>r}),function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"}(r||(r={}))},49437:(e,t,i)=>{"use strict";i.d(t,{Bb:()=>x,W6:()=>r,nu:()=>I});var r,n,s=i(56802),o=(i(6273),i(80861)),a=i(57725),l=i(28335),c=i(41785),h=i(37623),u=i(61985),p=i(39369),d=i(67900),f=i(63466),y=i(65672),m=i(47273),g=i(50521);(n=r||(r={})).RESOURCE_CONTROLLER_IMMEDIATE="immediate",n.RESOURCE_CONTROLLER="schedule",n.SLIDE="slide",n.STREAM_DATA_LOADER="stream loader",n.ELEVATION_QUERY="elevation query",n.TERRAIN_SURFACE="terrain",n.SURFACE_GEOMETRY_UPDATES="surface geometry updates",n.LOD_RENDERER="LoD renderer",n.GRAPHICS_CORE="Graphics3D",n.I3S_CONTROLLER="I3S",n.POINT_CLOUD_LAYER="point cloud",n.FEATURE_TILE_FETCHER="feature fetcher",n.OVERLAY="overlay",n.STAGE="stage",n.GRAPHICS_DECONFLICTOR="graphics deconflictor",n.FILTER_VISIBILITY="Graphics3D filter visibility",n.SCALE_VISIBILITY="Graphics3D scale visibility",n.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",n.POINT_OF_INTEREST_FREQUENT="POI frequent",n.POINT_OF_INTEREST_INFREQUENT="POI infrequent",n.LABELER="labeler",n.FEATURE_QUERY_ENGINE="feature query",n.FEATURE_TILE_TREE="feature tile tree",n.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",n.ELEVATION_ALIGNMENT="elevation alignment",n.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",n.TEXT_TEXTURE_ATLAS="text texture atlas",n.TEXTURE_UNLOAD="texture unload",n.LINE_OF_SIGHT_TOOL="line of sight tool",n.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",n.ELEVATION_PROFILE="elevation profile",n.SNAPPING="snapping",n.SHADOW_ACCUMULATOR="shadow accumulator",n.CLOUDS_GENERATOR="clouds generator",n[n.NONE=0]="NONE",n[n.TEST_PRIO=1]="TEST_PRIO";const v=new Map([[r.RESOURCE_CONTROLLER_IMMEDIATE,0],[r.RESOURCE_CONTROLLER,4],[r.SLIDE,0],[r.STREAM_DATA_LOADER,0],[r.ELEVATION_QUERY,0],[r.TERRAIN_SURFACE,1],[r.SURFACE_GEOMETRY_UPDATES,1],[r.LOD_RENDERER,2],[r.GRAPHICS_CORE,2],[r.I3S_CONTROLLER,2],[r.POINT_CLOUD_LAYER,2],[r.FEATURE_TILE_FETCHER,2],[r.OVERLAY,4],[r.STAGE,4],[r.GRAPHICS_DECONFLICTOR,4],[r.FILTER_VISIBILITY,4],[r.SCALE_VISIBILITY,4],[r.FRUSTUM_VISIBILITY,4],[r.CLOUDS_GENERATOR,4],[r.POINT_OF_INTEREST_FREQUENT,6],[r.POINT_OF_INTEREST_INFREQUENT,30],[r.LABELER,8],[r.FEATURE_QUERY_ENGINE,8],[r.FEATURE_TILE_TREE,16],[r.FEATURE_TILE_TREE_ACTIVE,0],[r.ELEVATION_ALIGNMENT,12],[r.ELEVATION_ALIGNMENT_SCENE,14],[r.TEXT_TEXTURE_ATLAS,12],[r.TEXTURE_UNLOAD,12],[r.LINE_OF_SIGHT_TOOL,16],[r.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[r.SNAPPING,0],[r.SHADOW_ACCUMULATOR,30]]);function _(e){return v.has(e)?v.get(e):"number"==typeof e?e:1}const b=(0,d.l5)(6.5),w=(0,d.l5)(1),M=(0,d.l5)(30),T=(0,d.l5)(1e3/30),S=(0,d.l5)(100);var A,E;!function(e){e.Scheduler=class{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some((e=>e.needsUpdate))}constructor(){this._updating=(0,p.v)(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new l.A("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new i,this._state=m.M.INTERACTING,this._tasks=new c.A,this._runQueue=new c.A,this._load=0,this._idleStateCallbacks=new c.A,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=(0,u.wB)((()=>y.A.SCHEDULER_LOG_SLOW_TASKS),(e=>this._debug=e),u.Vh);for(const e of Object.keys(r))this.performanceInfo.tasks.set(r[e],new l.A(r[e]));const e=this;this._test={FRAME_SAFETY_BUDGET:b,INTERACTING_BUDGET:T,IDLE_BUDGET:S,get availableBudget(){return e._budget.budget},usedBudget:0,getBudget:()=>e._budget,setBudget:t=>e._budget=t,updateTask:e=>this._updateTask(e),getState:e=>this._getState(e),getRuntime:e=>this._getRuntime(e),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach((e=>e.remove())),this._tasks.clear(),(0,a.xt)(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(e){this._updatingChanged(),e&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask((()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())})))}registerTask(e,i){const r=new t(this,e,i);return this._tasks.push(r),this._updatingChanged(),this.performanceInfo.tasks.has(e)||this.performanceInfo.tasks.set(e,new l.A(e)),r}registerIdleStateCallbacks(e,t){const i={idleBegin:e,idleEnd:t};this._idleStateCallbacks.push(i),this.state===m.M.IDLE&&this._idleUpdatesStartFired&&i.idleBegin();const r=this;return{remove:()=>this._removeIdleStateCallbacks(i),set idleBegin(e){r._idleUpdatesStartFired&&(i.idleEnd(),r._state===m.M.IDLE&&e()),i.idleBegin=e},set idleEnd(e){i.idleEnd=e}}}get load(){return this._load}set state(e){this._state!==e&&(this._state=e,this.state!==m.M.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll((e=>e.idleEnd()))))}get state(){return this._state}updateBudget(e){this._test.usedBudget=0,++this._frameNumber;let t=b,i=e.frameDuration,r=w;switch(this.state){case m.M.IDLE:t=(0,d.l5)(0),i=(0,d.l5)(Math.max(S,e.frameDuration)),r=M;break;case m.M.INTERACTING:i=(0,d.l5)(Math.max(T,e.frameDuration));case m.M.ANIMATING:}return i=(0,d.l5)(i-e.elapsedFrameTime-t),this.state!==m.M.IDLE&&i<w&&!this._forceTask?(this._forceTask=!0,!1):(i=(0,d.l5)(Math.max(i,r)),this._budget.reset(i,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case m.M.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll((e=>e.idleBegin()))),this._runIdle();break;case m.M.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset((0,d.l5)(0),this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(e){this._idleUpdatesStartFired&&e.idleEnd(),this._idleStateCallbacks.removeUnordered(e)}removeTask(e){this._tasks.removeUnordered(e),this._runQueue.removeUnordered(e),this._updatingChanged()}_updateTask(e){this._tasks.forAll((t=>{t.name===e&&t.setPriority(e)}))}_getState(e){if(this._runQueue.some((t=>t.name===e)))return E.SCHEDULED;let t=E.IDLE;return this._tasks.forAll((i=>{i.name===e&&i.needsUpdate&&(i.schedulePriority<=1?t=E.READY:t!==E.READY&&(t=E.WAITING))})),t}_getRuntime(e){let t=0;return this._tasks.forAll((i=>{i.name===e&&(t+=i.runtime)})),t}_resetRuntimes(){this._tasks.forAll((e=>e.runtime=0))}_getRunning(){const e=new Map;if(this._tasks.forAll((t=>{t.needsUpdate&&e.set(t.name,(e.get(t.name)||0)+1)})),0===e.size)return null;let t="";return e.forEach(((e,i)=>{t+=e>1?` ${e}x ${i}`:` ${i}`})),t}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const e=this._tasks.reduce(((e,t)=>t.needsUpdate?++e:e),0);this._load=.9*this._load+e*(1-.9)}_schedule(){for(this._runQueue.filterInPlace((e=>!!e.needsUpdate||(e.schedulePriority=e.basePriority,!1))),this._tasks.forAll((e=>{0===e.basePriority&&e.needsUpdate&&!this._runQueue.includes(e)&&e.blockFrame!==this._frameNumber&&this._runQueue.unshift(e)}));0===this._runQueue.length;){let e=!1,t=0;if(this._tasks.forAll((i=>{i.needsUpdate&&0!==i.schedulePriority&&0!==i.basePriority&&i.blockFrame!==this._frameNumber&&(e=!0,t=Math.max(t,i.basePriority),1===i.schedulePriority?(i.schedulePriority=0,this._runQueue.push(i)):--i.schedulePriority)})),!e)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const e=this._budget.now();this._startFrameTaskTimes();do{for(;this._runQueue.length>0;){const t=this._budget.now(),i=this._runQueue.pop();this._budget.resetProgress();try{i.task.runTask(this._budget)===g.G&&(i.blockFrame=this._frameNumber)}catch(e){o.A.getLogger("esri.views.support.Scheduler").error(`Exception in task "${i.name}"`,e),i.blockFrame=this._frameNumber}!this._budget.hasProgressed&&i.blockFrame!==this._frameNumber&&i.needsUpdate&&(i.name,r.I3S_CONTROLLER,i.blockFrame=this._frameNumber),i.schedulePriority=i.basePriority;const n=this._budget.now()-t;if(i.runtime+=n,this._frameTaskTimes.set(i.priority,this._frameTaskTimes.get(i.priority)+n),this._debug&&n>2*this._budget.budget&&console.log("Task",i.name,"used",n,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-e)}}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-e)}_startFrameTaskTimes(){for(const e of Object.keys(r))this._frameTaskTimes.set(r[e],0)}_recordFrameTaskTimes(e){this._frameTaskTimes.forEach(((e,t)=>this.performanceInfo.tasks.get(t).record(e))),this.performanceInfo.total.record(e)}get test(){return this._test}};class t{get task(){return this._task.value}get updating(){return this._queue.running}constructor(e,t,i){this._scheduler=e,this.name=t,this.blockFrame=0,this.runtime=0,this._queue=new f.T,this._handles=new s.A,this._basePriority=_(t),this.schedulePriority=this._basePriority,this._task=(0,p.v)(null!=i?i:this._queue),this._handles.add((0,u.z7)((()=>this.task.running),(t=>e.taskRunningChanged(t))))}remove(){this.processQueue(x),this._scheduler.removeTask(this),this.schedule=I.schedule,this.reschedule=I.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(e){if(this.name===e)return;this.name=e;const t=_(e);0!==this._basePriority&&0===this.schedulePriority||(this.schedulePriority=t),this._basePriority=t}get priority(){return this.name}set priority(e){this.setPriority(e)}get needsUpdate(){return this.updating||this.task.running}schedule(e,t,i){return this._queue.push(e,t,i)}reschedule(e,t,i){return this._queue.unshift(e,t,i)}processQueue(e){return this._queue.runTask(e)}}class i{constructor(){this._begin="undefined"!=typeof performance?performance.now():0,this._budget=0,this._state=m.M.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(e){return!this.done&&(!0===e()&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e,t){this._begin=this.now(),this._budget=e,this._state=t,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=i}(A||(A={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(E||(E={}));const x=(()=>{const e=new A.Budget;return e.enabled=!1,e})(),I=new class{remove(){}processQueue(){}schedule(e,t,i){try{if((0,h.G4)(t)){const e=(0,h.NK)();return i?Promise.resolve(i(e)):Promise.reject(e)}return(0,h.z7)(e(x))}catch(e){return Promise.reject(e)}}reschedule(e,t,i){return this.schedule(e,t,i)}}},50521:(e,t,i)=>{"use strict";i.d(t,{G:()=>r});const r=Symbol("Yield")},96871:(e,t,i)=>{"use strict";i.d(t,{$h:()=>y,IP:()=>g,hF:()=>M,jQ:()=>b,rT:()=>w,rZ:()=>r,uR:()=>v});var r,n,s=i(80575),o=i(7743),a=i(5262),l=i(53334),c=i(56560),h=i(80347),u=i(19913),p=i(42722),d=i(22538),f=i(67488);function y(e,t){if(null==e||null==t)return;const i=m(e,t);return null!=i?(0,o.Wq)(i,"radians","geographic"):void 0}(n=r||(r={})).Absolute="absolute",n.Relative="relative",n.RelativeBilateral="relative-bilateral";const m=(()=>{const e=(0,u.vt)(),t=(0,u.vt)();return(i,r)=>((0,h.s)(e,i.x,i.y,i.z??0),(0,h.s)(t,r.x,r.y,r.z??0),g(e,t,i.spatialReference,r.spatialReference))})(),g=(()=>{const e=(0,c.vt)(),t=(0,u.vt)(),i=(0,u.vt)();return(r,n,s,o)=>{if((0,h.j)(r,n))return;const u=(0,d.Xn)(s),y=(0,d.Xn)(o);if(u&&y&&(0,f.aI)(u,y)&&(0,p.F)(r,s,t,u)&&(0,p.F)(n,o,i,y)){const{azimuth:e}=(0,d._3)(T,t,i,u);return null!=e?(0,a.oU)(e,"degrees","radians"):void 0}e[0]=n[0]-r[0],e[1]=n[1]-r[1];let m=(0,l.g7)(c.JP,e);return e[0]<0&&(m=S-m),m}})();function v(e,t,i,n=r.Absolute){if(t&&i)switch(n){case r.Absolute:return y(t,i);case r.Relative:return b(_(e,t,i),r.Relative);case r.RelativeBilateral:return b(_(e,t,i),r.RelativeBilateral)}}function _(e,t,i){if(!e||!t||!i)return;const r=m(e,t),n=m(t,i);return null!=r&&null!=n?(0,o.Wq)(n-r,"radians","geographic"):void 0}function b(e,t){if(null==e)return;const i=M(e);switch(t){case r.Absolute:{const e=A.normalize(i,0,!0);return(0,o.Wq)(e,"degrees","geographic")}case r.Relative:{let e=E.normalize(i,0,!0);return-180===e&&(e=180),(0,o.Wq)(e,"degrees","geographic")}case r.RelativeBilateral:{const e=Math.abs(E.normalize(i,0,!0));return(0,o.Wq)(e,"degrees","geographic")}}}const w=(()=>{const e=(0,u.vt)();return(t,i,r,n,s,l="geodesic")=>{(0,h.c)(e,i);const c=M(s);if("geodesic"===l){const s=(0,d.Xn)(r);if(s&&(0,p.F)(e,r,e,s))return(0,d.vN)(t,e,c,n,s),t[2]=i[2],!!(0,p.F)(t,s,t,r)}const u=(0,o.g2)(c,"geographic","arithmetic"),f=(0,a.oU)(u,"degrees","radians"),y=i[0]+n*Math.cos(f),m=i[1]+n*Math.sin(f),g=i[2];return(0,h.s)(t,y,m,g),!0}})();function M(e){return null!=e?(0,o.g2)((0,a.oU)(e.value,e.unit,"degrees"),e.rotationType,"geographic"):void 0}const T=new d.Zj,S=2*Math.PI,A=s.ie,E=new s.hr(-180,180)},65672:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var r=i(82392),n=i(73783),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325));let a=class extends n.A{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};(0,r._)([(0,s.MZ)()],a.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),(0,r._)([(0,s.MZ)()],a.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),a=(0,r._)([(0,o.$)("esri.views.support.DebugFlags")],a);const l=new a},17467:(e,t,i)=>{"use strict";i.d(t,{V:()=>o,t:()=>a}),i(3313);var r=i(5262),n=i(39990),s=i(8e3);function o(e,t,i,n=new s.A){let o=0;if("2d"===i.type)o=t*(i.resolution??0);else if("3d"===i.type){const n=i.overlayPixelSizeInMapUnits(e),s=i.basemapSpatialReference;o=null==s||s.equals(i.spatialReference)?t*n:(0,r.GA)(s)/(0,r.GA)(i.spatialReference)}const a=e.x-o,l=e.y-o,c=e.x+o,h=e.y+o,{spatialReference:u}=i;return n.xmin=Math.min(a,c),n.ymin=Math.min(l,h),n.xmax=Math.max(a,c),n.ymax=Math.max(l,h),n.spatialReference=u,n}function a(e,t,i){const r=i.toMap(e);return null!=r&&o(r,(0,n.o)(),i,l).intersects(t)}const l=new s.A},1186:(e,t,i)=>{"use strict";i.d(t,{n3:()=>g,Og:()=>m,mh:()=>y}),i(3313);var r=i(7743),n=i(19913),s=i(65670),o=i(80347),a=i(99269);const l=(0,n.vt)();function c(e,t,i){if(null==t)return!1;const r=(0,a.Yz)(t);return null!=r&&(r(e,0,h,0),i!==h&&(i[0]=h[0],i[1]=h[1],i.length>2&&(i[2]=h[2])),!0)}const h=(0,n.vt)();var u=i(22538),p=i(67488),d=i(7540),f=i(44153);function y(e){const{spatialReference:t}=e;return(0,d.M)(t,w,M,T,e)}function m(e,t){if(!(0,p.aI)(e.spatialReference,t.spatialReference))return null;const{spatialReference:i}=e;return A[0]=e.x,A[1]=e.y,A[2]=e.hasZ?e.z:0,E[0]=t.x,E[1]=t.y,E[2]=t.hasZ?t.z:0,g(A,E,i)}function g(e,t,i){return(0,d.M)(i,v,_,b,e,t,i)}function v(e,t,i){return(0,r.d_)((0,u._3)(S,e,t,i).distance,"meters")}function _(e,t,i){return(0,r.d_)((0,s.geodesicLength)(function(e,t,i){return{type:"polyline",spatialReference:i,paths:[[[...e],[...t]]]}}(e,t,i),"meters"),"meters")}function b(e,t,i){return c(e,i,x)&&c(t,i,I)?(0,r.d_)((0,u._3)(S,x,I,f.A.WGS84).distance,"meters"):null}function w(e){return(0,r.d_)((0,u.l1)([e],"meters")[0],"meters")}function M(e){return(0,r.d_)((0,s.geodesicLength)(e,"meters"),"meters")}function T(e){const t=[];if(!function({hasZ:e,spatialReference:t,paths:i},r,n=0){const s=(0,a.Yz)(t);if(null==s)return!1;const c=e?e=>e:e=>(0,o.s)(l,e[0],e[1],n);for(const e of i){const t=[];for(const i of e){const e=[0,0,n];s(c(i),0,e,0),t.push(e)}r.push(t)}return!0}(e,t))return null;let i=0;for(const e of t){let t=0;for(let i=1;i<e.length;++i)t+=(0,u._3)(S,e[i-1],e[i],f.A.WGS84).distance;i+=t}return(0,r.d_)(i,"meters")}const S=new u.Zj,A=(0,n.vt)(),E=(0,n.vt)(),x=(0,n.vt)(),I=(0,n.vt)()},7540:(e,t,i)=>{"use strict";i.d(t,{M:()=>s});var r=i(22538),n=i(67488);function s(e,t,i,s,...o){return(0,n.EA)(e)&&(0,r.TT)(e)?t.apply(void 0,o):(0,n.K8)(e)?i.apply(void 0,o):s.apply(void 0,o)}},4215:(e,t,i)=>{"use strict";i.d(t,{Dh:()=>c,IB:()=>u,Vv:()=>r,fg:()=>l,jI:()=>h}),i(4506);var r,n,s=i(53334),o=i(56560);function a(e,t){return e[0]*t[1]-e[1]*t[0]}function l(e,t,i,r,n=i){return(0,s.Re)(d,r,i),(0,s.Re)(y,t,n),function(e,t,i){const r=(0,s.Om)(i,t)/(0,s.m3)(i);(0,s.hs)(e,i,r)}(m,y,d),(0,s.WQ)(e,n,m)}function c(e,t,i,r){(0,s.Re)(d,t,i);const n=r/(0,s.Bw)(d);return(0,s.Ln)(e,i,d,n)}function h(e,t){const i=e.start,n=e.end,o=t.start,l=t.end,c=(0,s.Re)(d,n,i),h=(0,s.Re)(f,l,o),u=a(c,h);if(Math.abs(u)<=p)return[];const g=(0,s.Re)(y,i,o),v=a(h,g)/u,_=a(c,g)/u;if(v>=0){if(_>=0||t.type===r.LINE)return[(0,s.Ln)(m,i,c,v)]}else if(e.type===r.LINE&&(_>=0||t.type===r.LINE))return[(0,s.Ln)(m,i,c,v)];return[]}function u(e,t,i){const n=[],o=(0,s.Re)(d,e.end,e.start),a=(0,s.Re)(f,e.start,t),l=(0,s.m3)(o),c=2*(0,s.Om)(o,a),h=c*c-4*l*((0,s.m3)(a)-i*i);if(0===h){const t=-c/(2*l);(e.type===r.LINE||t>=0)&&n.push((0,s.Ln)(m,e.start,o,t))}else if(h>0){const t=Math.sqrt(h),i=(-c+t)/(2*l);(e.type===r.LINE||i>=0)&&n.push((0,s.Ln)(m,e.start,o,i));const a=(-c-t)/(2*l);(e.type===r.LINE||a>=0)&&n.push((0,s.Ln)(y,e.start,o,a))}return n}(n=r||(r={}))[n.RAY=0]="RAY",n[n.LINE=1]="LINE";const p=1e-6,d=(0,o.vt)(),f=(0,o.vt)(),y=(0,o.vt)(),m=(0,o.vt)()},95376:(e,t,i)=>{"use strict";i.d(t,{Bn:()=>p,F2:()=>x,HG:()=>S,IB:()=>_,K4:()=>b,Mc:()=>d,Nm:()=>g,SO:()=>w,UL:()=>E,VT:()=>f,Yv:()=>v,Zj:()=>A,b_:()=>y,pJ:()=>I,r2:()=>m,t1:()=>M});var r=i(4506),n=i(53334),s=i(56560),o=i(80347),a=i(19913),l=i(78115),c=i(87368),h=i(45773),u=i(4215);function p({start:e,end:t,type:i},r,o){const a=[],l=(0,n.Re)(N,t,e),c=(0,n.Re)(L,e,r),h=(0,n.m3)(l),u=2*(0,n.Om)(l,c),p=u*u-4*h*((0,n.m3)(c)-o*o);if(0===p){const t=-u/(2*h);(i===I.PLANE||t>=0)&&a.push((0,n.Ln)((0,s.vt)(),e,l,t))}else if(p>0){const t=Math.sqrt(p),r=(-u+t)/(2*h);(i===I.PLANE||r>=0)&&a.push((0,n.Ln)((0,s.vt)(),e,l,r));const o=(-u-t)/(2*h);(i===I.PLANE||o>=0)&&a.push((0,n.Ln)((0,s.vt)(),e,l,o))}return a}function d(e,t){const i=e.start,r=e.end,s=(0,n.Re)(N,r,i),c=(0,o.s)(R,-s[1],s[0],0),h=t.start,p=t.end,d=(0,o.z)(P,p,h),f=(0,o.k)(d,c),y=(0,o.s)(D,i[0],i[1],0),m=(0,o.z)(F,y,h),g=(0,o.k)(m,c),v=(0,l.FD)();if(Math.abs(f)<v)return Math.abs(g),[];const _=(0,o.r)(j,h,d,g/f);if(t.type===u.Vv.RAY){const e=(0,o.z)(Z,_,h);if((0,o.k)(e,d)<-v)return[]}if(e.type===I.HALF_PLANE){const e=(0,n.jb)(L,_,i);if((0,n.Om)(e,s)<-v)return[]}return[(0,a.o8)(_)]}function f(e,t){return function({start:e,end:t,type:i},r){const n=(0,o.z)(O,r,e),s=(0,o.z)(R,t,e),c=(0,o.b)(P,s,n),h=(0,o.x)(c)/(0,o.x)(s),p=(0,l.FD)();if(h<p)switch(i){case u.Vv.LINE:return[(0,a.o8)(r)];case u.Vv.RAY:return(0,o.k)(s,n)<-p?[]:[(0,a.o8)(r)]}return[]}(T(U,t[2],e),t)}function y(e,t){return w(T(U,0,e),T(V,0,t)).map((([e,t])=>(0,s.fA)(e,t)))}function m(e,t){return v(e,T(U,e[2],t))}function g(e,t,i){const r=(0,n.Re)(N,e,t),s=(0,n.Bw)(r),o=0===s?1:i/s,l=(0,a.vt)();return(0,n.Ln)(l,t,r,o),l[2]=e[2],l}function v(e,{start:t,end:i,type:r},n=(0,a.vt)()){const s=(0,o.z)(O,e,t),l=(0,o.z)(R,i,t),c=(0,o.k)(s,l)/(0,o.k)(l,l);return(0,o.r)(n,t,l,r===u.Vv.RAY?Math.max(c,0):c)}const _=(()=>{const e=(0,a.vt)(),t=(0,a.vt)(),i=(0,a.vt)();return({start:r,end:l},{center:p,radius:d,normal:f,slicePlane:y})=>{const m=(0,c.O_)(p,f,z);if(A((0,c.Io)(m,r),0)&&A((0,c.Io)(m,l),0)){(0,h.VV)(f,e,t);const c=(r,s)=>((0,o.f)(i,s,p),(0,n.hZ)(r,(0,o.k)(i,e),(0,o.k)(i,t)),r),m=(0,u.IB)({start:c(N,r),end:c(L,l),type:u.Vv.LINE},s.uY,d),g=[];for(const[i,r]of m){const n=(0,o.c)((0,a.vt)(),p);(0,o.r)(n,n,e,i),(0,o.r)(n,n,t,r),y&&!x(y,n)||g.push(n)}return g}const g=(0,a.vt)();return(0,c.U5)(m,r,l,g)?!A((0,o.q)(g,p),d)||y&&!x(y,g)?[]:[g]:[]}})();function b({start:e,end:t,type:i},r,s){const l=[],c=(0,o.f)(O,t,e),h=(0,n.Re)(L,e,r),p=(0,n.m3)(c),d=2*(0,n.Om)(c,h),f=d*d-4*p*((0,n.m3)(h)-s*s);if(0===f){const t=-d/(2*p);(i===u.Vv.LINE||t>=0)&&l.push((0,o.r)((0,a.vt)(),e,c,t))}else if(f>0){const t=Math.sqrt(f),r=(-d+t)/(2*p);(i===u.Vv.LINE||r>=0)&&l.push((0,o.r)((0,a.vt)(),e,c,r));const n=(-d-t)/(2*p);(i===u.Vv.LINE||n>=0)&&l.push((0,o.r)((0,a.vt)(),e,c,n))}return l}function w(e,t){const i=e.start,r=e.end,n=t.start,s=t.end,c=(0,o.z)(O,r,i),h=(0,o.z)(R,s,n),p=(0,o.z)(P,n,i),d=(0,o.b)(D,c,h);if(!A((0,o.k)(p,d),0))return[];const f=(0,o.x)(d);if(A(f,0))return[];const y=(0,o.b)(F,p,h),m=(0,o.k)(y,d)/f,g=(0,o.r)(j,i,c,m);if(e.type===u.Vv.RAY){const e=(0,o.z)(Z,g,i);if((0,o.k)(c,e)<-(0,l.FD)())return[]}if(t.type===u.Vv.RAY){const e=(0,o.z)(Z,g,n);if((0,o.k)(h,e)<-(0,l.FD)())return[]}return[(0,a.o8)(g)]}function M(e,t,i,r){const[o,a]=e,[l,c]=i,h=l-o,u=c-a,p=h*h+u*u,d=Math.sqrt(p);if(d>t+r)return[];if(d<Math.abs(t-r))return[];if(A(d,0)&&A(t,r))return[];const f=(t*t-r*r+p)/(2*d),y=Math.sqrt(t*t-f*f),m=y*u/d,g=y*h/d,[v,_]=(0,n.Cc)(N,e,i,f/d);return A(m,g)?[(0,s.fA)(v,_)]:[(0,s.fA)(v+m,_-g),(0,s.fA)(v-m,_+g)]}function T(e,t,{start:i,end:r,type:n}){return(0,o.s)(e.start,i[0],i[1],t),(0,o.s)(e.end,r[0],r[1],t),e.type=k[n],e}function S(e,t){return A(e[2],t[2])}function A(e,t){return(0,r.Sp)(Math.abs(e-t),0,(0,l.FD)())}function E(e,t){return t.filter((t=>x(e,t)))}function x(e,t){return(0,c.Tj)(e,t)}var I,C;(C=I||(I={}))[C.PLANE=0]="PLANE",C[C.HALF_PLANE=1]="HALF_PLANE";const k={[I.PLANE]:u.Vv.LINE,[I.HALF_PLANE]:u.Vv.RAY},N=(0,s.vt)(),L=(0,s.vt)(),O=(0,a.vt)(),R=(0,a.vt)(),P=(0,a.vt)(),D=(0,a.vt)(),F=(0,a.vt)(),j=(0,a.vt)(),Z=(0,a.vt)(),z=(0,c.vt)(),U={start:(0,a.vt)(),end:(0,a.vt)(),type:u.Vv.LINE},V={start:(0,a.vt)(),end:(0,a.vt)(),type:u.Vv.LINE}},17780:(e,t,i)=>{"use strict";function r(e){return"graphic"===e?.type}function n(e){return e.find(r)??null}i.d(t,{zF:()=>n})},96383:(e,t,i)=>{"use strict";function r(e){return e&&"function"==typeof e.highlight}function n(e,t,i){return null==e||e>i&&(0===t||e<t)}function s(e){return null!=e&&"object"==typeof e&&"createQuery"in e&&"queryFeatures"in e&&"layer"in e&&"view"in e}i.d(t,{JU:()=>n,Of:()=>r,lO:()=>s})},20405:(e,t,i)=>{"use strict";i.d(t,{FV:()=>a,Uo:()=>s,ZV:()=>n,xB:()=>o}),i(6273);var r=i(23572);function n(e){return(0,r.tc)(e.x,e.y)}function s(e,t){const i=(e instanceof HTMLElement?e:e.surface)?.getBoundingClientRect();return i?(0,r.tc)(t.clientX-i.left,t.clientY-i.top):(0,r.tc)(0,0)}function o(e,t){return t instanceof Event?s(e,t):n(t)}function a(e){if(e instanceof Event)return!0;if("object"==typeof e&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}},32549:(e,t,i)=>{"use strict";i.d(t,{Go:()=>u,Is:()=>c,Rt:()=>s,lF:()=>n,x2:()=>h}),i(6273);var r=i(4506);function n(e,t,i){const{ctx:r,canvas:n}=o(e,i),s=r.getImageData(0,0,e.width,e.height),l=function(e,t){const i=p[t.format],r=t.quality/100;return e.toDataURL(i,r)}(n,t);return a(n),{dataUrl:l,data:s}}function s(e,t){const{ctx:i,canvas:r}=o(e,t),n=i.getImageData(0,0,e.width,e.height);return a(r),n}function o(e,t){const i=(null==l&&(l=document.createElement("canvas")),l);t.premultipliedAlpha&&function(e){const t=e.data,i=t.length;for(let e=0;e<i;e+=4){const i=t[e+3];if(255!==i&&i>0){const r=255/i;t[e]=t[e]*r,t[e+1]=t[e+1]*r,t[e+2]=t[e+2]*r}}}(e),i.width=e.width,i.height=e.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(e,0,0),t.flipY&&function(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}(r),{ctx:r,canvas:i}}function a(e){e.width=0,e.height=0}i(73027);let l=null;function c(e,t){const i=function(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return d}}(e),n=f[i];return{format:i,quality:(0,r.qE)(null!=t?t:n,0,100)}}function h(e,t){return t/Math.max(e[0],e[1])}function u(e,t,i,r=0,n=0,s=e.width-r,o=e.height-n,a=!1){const{data:l}=e,{width:c,height:h,data:u}=t,p=s/c,d=o/h,f=Math.ceil(p/2),y=Math.ceil(d/2),m=e.width;for(let e=0;e<h;e++)for(let t=0;t<c;t++){const s=4*(t+(a?h-e-1:e)*c);let o=0,g=0,v=0,_=0,b=0,w=0;const M=(e+.5)*d;for(let s=Math.floor(e*d);s<(e+1)*d;s++){const e=Math.abs(M-(s+.5))/y,a=(t+.5)*p,c=e*e;for(let e=Math.floor(t*p);e<(t+1)*p;e++){const t=Math.abs(a-(e+.5))/f,h=Math.sqrt(c+t*t);if(h>=1)continue;let u=2*h*h*h-3*h*h+1;const p=4*(r+e+(n+s)*m);w+=u*l[p+3],g+=u,!i&&l[p+3]<255&&(u=u*l[p+3]/255),v+=u*l[p],_+=u*l[p+1],b+=u*l[p+2],o+=u}}u[s]=v/o,u[s+1]=_/o,u[s+2]=b/o,u[s+3]=w/g}return t}const p={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},d="png",f={png:100,jpg:98,jpeg:98}},89574:(e,t,i)=>{"use strict";i.d(t,{C:()=>s});var r=i(46480);let n;function s(){return n||(n=function(){const e=new o,t=function(e){if("undefined"==typeof WebGL2RenderingContext)return null;const t=document.createElement("canvas");if(!t)return null;let i=(0,r.q)(t,{failIfMajorPerformanceCaveat:!0});if(null==i&&(i=(0,r.q)(t),null!=i&&(e.majorPerformanceCaveat=!0)),null==i)return i;e.available=!0,e.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const n=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return n&&(e.supportsHighPrecisionFragment=n.precision>0),i}(e);return null==t||(e.supportsColorBufferFloat=null!==t.getExtension("EXT_color_buffer_float"),e.supportsColorBufferFloatBlend=null!==t.getExtension("EXT_float_blend"),e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||null!==t.getExtension("EXT_color_buffer_half_float")),e}()),n}class o{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}},46480:(e,t,i)=>{"use strict";function r(e,t={}){return e.getContext("webgl2",t)||null}i.d(t,{q:()=>r})},29759:(e,t,i)=>{"use strict";var r;i.d(t,{X:()=>r}),function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"}(r||(r={}))},93802:(e,t,i)=>{"use strict";i.d(t,{D:()=>s,p:()=>n});var r=i(8636);function n(e){const t=(0,r.Vr)(100*(1-e));return Math.max(0,Math.min(t,100))}function s(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}},52380:(e,t,i)=>{"use strict";i.d(t,{CJ:()=>p});var r=i(62991),n=i(15565),s=i(21750),o=i(18051),a=i(65452);const l=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),c=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function h(e,t){if(t.restrictedWebMapWriting){const i=function(e){return"basemap"===e.layerContainerType?l:"operational-layers"===e.layerContainerType?c:null}(t);return null==i||i.has(e.type)&&!(0,a.Ov)(e)}return!0}function u(e,t){"maxScale"in e&&(t.maxScale=(0,o.B)(e.maxScale)??void 0),"minScale"in e&&(t.minScale=(0,o.B)(e.minScale)??void 0)}function p(e,t,i){if(!e.persistenceEnabled)return null;if(!("write"in e)||!e.write)return i?.messages&&i.messages.push(new r.A("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if((0,a.Ov)(e)&&!e.isTable)t=e.resourceInfo;else if(h(e,i)){const t={};return e.write(t,i)?t:null}return null!=t&&function(e,t){if(function(e,t){if(t)if((0,a.Ov)(e)){const i=(0,s.wc)("featureCollection.layers",t),r=i?.[0]?.layerDefinition;r&&u(e,r)}else"group"!==e.type&&u(e,t)}(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,"normal"===t.blendMode&&delete t.blendMode),t.opacity=(0,o.B)(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&"wmts"!==e.type))if((0,a.Ov)(e)){const i=t.featureCollection;i&&(i.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}(e,t=(0,n.o8)(t)),t}},50831:(e,t,i)=>{"use strict";function r(e){return null!=e&&"object"==typeof e&&"declaredClass"in e&&"esri.WebMap"===e.declaredClass}i.d(t,{r:()=>r})},21083:(e,t,i)=>{"use strict";i.d(t,{default:()=>It});var r=i(82392),n=i(61985),s=i(81482),o=i(77380),a=(i(67498),i(6273),i(26325)),l=i(52239),c=(i(39553),i(73783)),h=i(58842),u=i(80861),p=i(44212),d=i(65294),f=i(93814),y=i(6480),m=i(38116),g=(i(3438),i(3223)),v=i(1817),_=i(37623),b=i(23572),w=i(19759),M=i(91101),T=i(24085),S=i(77498),A=i(12743),E=i(65452),x=i(6246),I=i(29221),C=i(84155),k=i(24102),N=i(93611),L=i(21550),O=i(63602),R=i(62878),P=i(54866),D=i(41059),F=i(51573),j=i(20752),Z=i(92966),z=i(83059),U=i(64804),V=(i(50189),i(18632));i(6779);var G=i(68231),B=i(55736),$=i(10709),H=i(13033);const q=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,W=new v.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),K=new G.A({size:6,outline:{color:[128,128,128,.5],width:.5}}),Y=new B.A({style:"solid"});function J(e){return"flow"===e.type}function X(e){return"vector-field"===e.type}function Q(e){return"raster-colormap"===e.type}function ee(e){return"raster-stretch"===e.type}function te(e){return"raster-shaded-relief"===e.type}function ie(e){return"esri.renderers.SimpleRenderer"===e.declaredClass}function re(e){return"esri.renderers.ClassBreaksRenderer"===e.declaredClass}function ne(e){return"esri.renderers.UniqueValueRenderer"===e.declaredClass}function se(e){return"esri.renderers.HeatmapRenderer"===e.declaredClass}function oe(e){return"esri.renderers.PointCloudClassBreaksRenderer"===e.declaredClass}function ae(e){return"esri.renderers.PointCloudStretchRenderer"===e.declaredClass}function le(e){return"esri.renderers.PointCloudUniqueValueRenderer"===e.declaredClass}function ce(e){return"esri.renderers.DotDensityRenderer"===e.declaredClass}function he(e){return"esri.renderers.PieChartRenderer"===e.declaredClass}function ue(e){return"esri.layers.SubtypeGroupLayer"===e.declaredClass}function pe(e){return"esri.layers.MapImageLayer"===e.declaredClass}function de(e){return"esri.layers.TileLayer"===e.declaredClass}function fe(e){return"esri.layers.ImageryLayer"===e.declaredClass}function ye(e){return"esri.layers.ImageryTileLayer"===e.declaredClass}function me(e){return"sublayers"in e}async function ge(e,t){const i=await(0,$.ud)("esri/widgets/Legend/t9n/Legend");return"previewTemplateAriaLabel"!==e||t||(e="previewAriaLabel"),(0,H.V)(i[e],{label:t})}const ve=new G.A({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let _e={},be=class extends c.A{constructor(e){super(e),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this.children=new h.A,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const e=()=>this.notifyChange("ready");this.addHandles([(0,n.on)((()=>this.children),"change",(t=>{const{added:i,removed:r}=t;i.forEach((t=>{const i=`activeLayerInfo-ready-watcher-${t.layer.uid}`;this.addHandles((0,n.wB)((()=>t.ready),e,n.Vh),i)})),r.forEach((e=>this.removeHandles(e.layer.uid))),e()}))]),this.keepCacheOnDestroy||(_e={})}destroy(){this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(_e=null)}get effectList(){const e=this.layer;let t=null;return"effect"in e&&e.effect&&(t=new T.$B,t.effect=e.effect,t.endTransitions(),t.scale=this.scale),t}get opacity(){const e=this.layer.opacity,t=this.parent?.opacity,i=this.layer.parent,r=i&&"uid"in i?this._getParentLayerOpacity(i):null;return null!=t?t*e:null!=r?r*e:e}get ready(){return null===this.layer||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){return this.view?.scale??0}get isScaleDriven(){const e=this.layer;if(null===e)return!1;if("effect"in e&&e.effect&&Array.isArray(e.effect))return!0;if("featureReduction"in e&&e.featureReduction){if("cluster"===e.featureReduction.type)return!0;if("binning"===e.featureReduction.type&&"renderer"in e.featureReduction&&e.featureReduction.renderer)return this._isRendererScaleDriven(e.featureReduction.renderer)}return"renderer"in e&&e.renderer?this._isRendererScaleDriven(e.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}async buildLegendElementsForFeatureCollections(e){if(this.hideLayersNotInCurrentView&&!await this._isLayerInCurrentView())return this.legendElements=[],void this.notifyChange("ready");const t=Array.from(e,(e=>{if((0,E.yZ)(e))return this._getRendererLegendElements(e.renderer,{title:e.title});if(e.featureSet?.features.length){const t=e.layerDefinition,i=t?.drawingInfo,r=i&&(0,I.r)(i.renderer),n=W.read(t.geometryType);return r?this._getRendererLegendElements(r,{title:e.name,geometryType:n}):(u.A.getLogger(this).warn("drawingInfo not available!"),null)}return null}));try{const e=[],i=await Promise.allSettled(t);for(const t of i)if("fulfilled"===t.status)for(const i of t.value??[])e.push(i);this.legendElements=e,this.notifyChange("ready")}catch(e){u.A.getLogger(this).warn("error while building legend for layer!",e)}}async buildLegendElementsForRenderer(e){try{const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getRendererLegendElements(e):[],this.notifyChange("ready")}catch(e){u.A.getLogger(this).warn("error while building legend for layer!",e)}}async buildLegendElementsForFeatureReduction(e){try{const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getLegendElementsForFeatureReduction(e):[],this.notifyChange("ready")}catch(e){u.A.getLogger(this).warn("error while building legend for layer!",e)}}async buildLegendElementsForTools(){const e=this.layer;if(function(e){return"esri.layers.VoxelLayer"===e.declaredClass}(e))this._constructLegendElementsForVoxelLayer();else if(function(e){return"esri.layers.WMTSLayer"===e.declaredClass}(e))this._constructLegendElementsForWMTSlayer();else if(function(e){return"esri.layers.WMSLayer"===e.declaredClass}(e))await this._constructLegendElementsForWMSSublayers();else if(function(e){return"esri.layers.BuildingSceneLayer"===e.declaredClass}(e))await this._constructLegendElementsForBuildingSceneLayer();else if(pe(e)||de(e)||ue(e))await this._constructLegendElementsForSublayers();else{this.removeHandles("imageryLayers-watcher");let t="default";if(fe(e)){const i=e;t=(i?.rasterFunction?.functionName||"default")+"_"+(e.bandIds?.length?e.bandIds.join(""):"###")}if(ye(e))return;await this._getLegendLayers(`${e.uid}-${t}`).then((async t=>{this.legendElements=[],this.notifyChange("ready");const i=t.map((async t=>{if(fe(e)){const t=(0,n.wB)((()=>["renderingRule"in e&&e.rasterFunction,e.bandIds]),(()=>(0,_.sg)((async()=>{_e.default=null,e.renderer?await this.buildLegendElementsForRenderer(e.renderer):await this.buildLegendElementsForTools()}))()));this.addHandles(t,"imageryLayers-watcher")}const i=this._generateSymbolTableElementForLegendLayer(t);i&&i.infos.length&&(fe(e)&&(i.title=e.title),this.legendElements.push(i)),this.notifyChange("ready")}));await Promise.allSettled(i)})).catch((e=>{u.A.getLogger(this).warn("Request to server for legend has failed!",e)}))}}async _isLayerInCurrentView(){const e=this.layer,t=this.layerView,i=t&&"createQuery"in t&&"queryFeatureCount"in t;if(!(i||t&&"createQuery"in e&&"queryFeatureCount"in e))return!0;await(0,n.C_)((()=>!t.updating));const r=i?"createQuery"in t&&t.createQuery():"createQuery"in e&&e.createQuery();return!r||(r.geometry=this.view.extent,0!==(i?"queryFeatureCount"in t&&await t.queryFeatureCount(r):"queryFeatureCount"in e&&await e.queryFeatureCount(r)))}_getParentLayerOpacity(e){let t=1;const i=e.parent;return i&&"uid"in i&&(t=this._getParentLayerOpacity(i)),e.opacity*t}_isGroupActive(){return this.children.some((e=>e.ready))}_isRendererScaleDriven(e){if("dot-density"===e.type)return!0;const t="valueExpression"in e?e.valueExpression:null;if(q.test(t))return!0;const i="visualVariables"in e?e.visualVariables:null;return!!i?.some((e=>this._isScaleDrivenSizeVariable(e)))||this._hasScaleDrivenSymbols(e)}_hasScaleDrivenSymbols(e){switch(e.type){case"simple":return this._isScaleDrivenSymbol(e.symbol);case"class-breaks":return this._isScaleDrivenSymbol(e.defaultSymbol)||e.classBreakInfos.some((e=>this._isScaleDrivenSymbol(e.symbol)));case"unique-value":return this._isScaleDrivenSymbol(e.defaultSymbol)||!!e.uniqueValueInfos?.some((e=>this._isScaleDrivenSymbol(e.symbol)))}return!1}_isScaleDrivenSymbol(e){if("cim"===e?.type){const{primitiveOverrides:t,minScale:i,maxScale:r}=e.data,n=t?.some((e=>/\$view\.scale/.test(e.valueExpressionInfo?.expression||"")))??!1;return null!=i||null!=r||n}return!1}_isScaleDrivenSizeVariable(e){if(e&&"size"!==e.type)return!1;const t=e,i=t.minSize,r=t.maxSize;return!("object"!=typeof i||!i||!this._isScaleDrivenSizeVariable(i))||!("object"!=typeof r||!r||!this._isScaleDrivenSizeVariable(r))||!!t.expression||q.test(t.valueExpression)}_isLayerScaleDriven(e){if("minScale"in e&&e.minScale>0||"maxScale"in e&&e.maxScale>0)return!0;if("sublayers"in e&&e.sublayers)return e.sublayers.some((e=>this._isLayerScaleDriven(e)));const t=e.parent;if(!1===e.loaded&&t&&pe(t)&&"source"in e&&e.source&&"map-layer"===e.source.type)for(const i of t.sourceJSON.layers??[])if(i.id===e.source.mapLayerId&&(i.minScale>0||i.maxScale>0))return!0;return!1}async _constructLegendElementsForVoxelLayer(){this.legendElements=[],this.removeHandles("voxel-style-watcher"),this.removeHandles("voxel-current-variable");const e=this.layer;this.addHandles((0,n.wB)((()=>e.currentVariableId),(()=>this._constructLegendElementsForVoxelLayer())),"voxel-current-variable"),this.addHandles((0,n.wB)((()=>e.getVariableStyles()),(()=>this._constructLegendElementsForVoxelLayer())),"voxel-style-watcher");const t=e.getVariableStyle(null),i=[];if(t)if(t.uniqueValues?.length){const e=[];t.uniqueValues.forEach((t=>{t.enabled&&e.push({label:t.label||`${t.value}`,value:t.value,symbol:new B.A({color:t.color,outline:null})})})),e.length&&i.push({type:"symbol-table",title:t.label,infos:e})}else if(t.transferFunction){const{colorStops:e,stretchRange:r}=t.transferFunction,n=e.toArray().reverse(),s=r.map(((e,t)=>`${0===t?U.l5:U.kC} ${function(e){const t=Math.floor(Math.log10(Math.abs(e)))+1,i=t<4||t>6?4:t,r=Math.abs(e)>=1e6?"compact":"standard";return(0,V.ZV)(e,{notation:r,minimumSignificantDigits:2,maximumSignificantDigits:i})}(e)}`)).reverse(),o=n.map((e=>({color:e.color,value:null,label:null})));o[0].label=s[0],o[o.length-1].label=s[1],i.push({type:"color-ramp",title:t.label,infos:o,preview:(0,R.J0)(n.map((e=>e.color)),{ariaLabel:await ge("previewColorRampAriaLabel")})})}const r=e.opacity,s=i.reduce(((e,t)=>[...e,...this._getAllInfos(t)]),[]).filter((e=>!!e?.symbol)).map((e=>this._getSymbolPreview(e,r)));await Promise.allSettled(s),this.legendElements=i,this.notifyChange("ready")}_constructLegendElementsForWMTSlayer(){this.legendElements=[],this.removeHandles("wmts-activeLayer-watcher");const e=this.layer.activeLayer;this.addHandles((0,n.wB)((()=>{const{layer:e}=this;return e&&"activeLayer"in e&&e.activeLayer}),(()=>this._constructLegendElementsForWMTSlayer())),"wmts-activeLayer-watcher");const t=e.styleId?e.styles?.find((({id:t})=>t===e.styleId))?.legendUrl:void 0;t&&(this.legendElements=[{type:"symbol-table",title:e.title,infos:[{src:t,opacity:this.opacity}]}]),this.notifyChange("ready")}async _constructLegendElementsForWMSSublayers(){this.legendElements=[],this.removeHandles("wms-sublayers-watcher");const e=this.layer;let t=null;(e.customParameters||e.customLayerParameters)&&(t={...e.customParameters,...e.customLayerParameters}),this.addHandles((0,n.wB)((()=>{const{layer:e}=this;return e&&"sublayers"in e&&e.sublayers}),(()=>this._constructLegendElementsForWMSSublayers())),"wms-sublayers-watcher"),this.legendElements=await this._generateLegendElementsForWMSSublayers(e.sublayers,t),this.notifyChange("ready")}async _generateLegendElementsForWMSSublayers(e,t){const i=this.layer,r=[];this.addHandles(e.on("change",(()=>this._constructLegendElementsForWMSSublayers())),"wms-sublayers-watcher");const s=this.sublayerIds?.map((e=>i.findSublayerById(e)))?.filter(g.Ru)??[],o=s.length?s:e.toArray();for(const e of o){const i=(0,n.wB)((()=>[e.title,e.visible,e.legendEnabled]),(()=>this._constructLegendElementsForWMSSublayers()));if(this.addHandles(i,"wms-sublayers-watcher"),!this.respectLayerVisibility||e.visible&&e.legendEnabled){const i=await this._generateSymbolTableElementForWMSSublayer(e,t);i?.infos.length&&r.unshift(i)}}return r}async _generateSymbolTableElementForWMSSublayer(e,t){if(!e.legendUrl&&e.sublayers){const i=(await this._generateLegendElementsForWMSSublayers(e.sublayers,t)).filter((e=>e));return{type:"symbol-table",title:e.title,infos:i}}return this._generateSymbolTableElementForLegendUrl(e,t)}async _generateSymbolTableElementForLegendUrl(e,t){let i=e.legendUrl;if(!i)return;const r={type:"symbol-table",title:e.title||e.name||String(e.id??""),infos:[]};t&&(i=(0,w.a6)(i,t));let n=null;const s=e.layer?.opacity;try{n=(await(0,m.A)(i,{responseType:"image"})).data,n&&(n.style.opacity=s)}catch{}return r.infos.push({src:i,preview:n,opacity:s}),r}_getLegendLayers(e,t){const i=_e&&_e[e];return i?Promise.resolve(i):this._legendRequest(t).then((t=>{const i=t.layers;return _e[e]=i,i}))}_legendRequest(e){const t=this.layer;let i={f:"json",dynamicLayers:e};if(fe(t)){const e=t.exportImageServiceParameters.rasterFunction;if(e&&(i.renderingRule=JSON.stringify(e.functionDefinition?.toJSON()||e.toJSON())),t.bandIds&&(i.bandIds=t.bandIds.join()),t.raster||t.viewId||t.customParameters){const{raster:e,viewId:r,customParameters:n}=t;i={raster:e,viewId:r,...i,...n}}}let r=t.url.replace(/(\/)+$/,"");if("version"in t&&+t.version>=10.01){const e=r.indexOf("?");e>-1?r=r.substring(0,e)+"/legend"+r.substring(e):r+="/legend"}else{const e=r.toLowerCase().indexOf("/rest/"),t=r.substring(0,e)+r.substring(e+5,r.length);r="https://utility.arcgis.com/sharing/tools/legend?soapUrl="+encodeURI(t)+"&returnbytes=true"}return(0,m.A)(r,{query:i}).then((e=>e.data))}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this.removeHandles("sublayers-watcher");const e=this.layer;this.addHandles((0,n.wB)((()=>e.sublayers),(()=>this._constructLegendElementsForBuildingSceneLayer())),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(e.sublayers,this.opacity),this.notifyChange("ready")}catch(e){u.A.getLogger(this).warn("Request to server for legend has failed!",e)}}async _generateLegendElementsForBuildingSublayers(e,t){let i=[];this.addHandles(e.on("change",(()=>this._constructLegendElementsForBuildingSceneLayer())),"sublayers-watcher");const r=e.toArray();for(const e of r){const r=(0,n.wB)((()=>["renderer"in e&&e.renderer,e.opacity,e.title,e.visible]),(()=>this._constructLegendElementsForBuildingSceneLayer()));if(this.addHandles(r,"sublayers-watcher"),!this.respectLayerVisibility||e.visible){const r=null!=e?.opacity?e.opacity:null,n=null!=r?r*t:t;if("building-group"===e.type){const t={type:"symbol-table",title:e.title,infos:[]},r=await this._generateLegendElementsForBuildingSublayers(e.sublayers,n);t.infos.push(...r),i=[t,...i]}else e.renderer&&(i=[...await this._getRendererLegendElements(e.renderer,{title:e.title,opacity:n,sublayer:e}),...i])}}return i.filter((e=>!!e&&(!("infos"in e)||!e.infos||e.infos.length>0)))}async _constructLegendElementsForSublayers(){this.legendElements=[],this.removeHandles("sublayers-watcher");const e=this.layer;if(pe(e)||de(e)||ue(e)){this.addHandles((0,n.wB)((()=>e.sublayers),(()=>this._constructLegendElementsForSublayers)),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForSublayers(e.sublayers,this.opacity),this.notifyChange("ready")}catch(e){u.A.getLogger(this).warn("Request to server for legend has failed!",e)}}}async _generateLegendElementsForSublayers(e,t,i){const r=this.layer;let s=[];this.addHandles(e.on("change",(()=>this._constructLegendElementsForSublayers())),"sublayers-watcher");let o=e.toArray();!i&&this.sublayerIds&&this.sublayerIds.length&&(o=ue(r)?this.sublayerIds.map((e=>r.findSublayerForSubtypeCode(e))).filter(g.Ru):this.sublayerIds.map((e=>r.findSublayerById(e))).filter(g.Ru));for(const e of o){const r=(0,n.wB)((()=>[e.renderer,e.opacity,e.title,e.visible,e.legendEnabled]),(()=>this._constructLegendElementsForSublayers()));if(this.addHandles(r,"sublayers-watcher"),!this.respectLayerVisibility||e.visible&&e.legendEnabled&&this._isSublayerInScale(e)){const r=null!=e?.opacity?e.opacity:null,n=null!=r?r*t:t,o=!me(e)||e.originIdOf("renderer")>M.Gr.SERVICE&&!e.sublayers;if(e.renderer&&o)await e.load(),s=[...await this._getRendererLegendElements(e.renderer,{title:e.title,opacity:n,sublayer:e}),...s];else if(me(e)){const t=await this._generateSymbolTableElementForSublayer(e,n,i);t&&s.unshift(t)}}}return s.filter((e=>!!e&&(!("infos"in e)||!e.infos||e.infos.length>0)))}async _generateSymbolTableElementForSublayer(e,t,i){if(!i){i=new Map;const t=this.layer,r=e.source;let n=null;if(r&&("map-layer"!==r.type||r.mapLayerId!==e.id||r.gdbVersion&&r.gdbVersion!==("gdbVersion"in t&&t.gdbVersion))||e.originIdOf("renderer")>M.Gr.SERVICE||e.originIdOf("labelingInfo")>M.Gr.SERVICE||e.originIdOf("labelsVisible")>M.Gr.SERVICE){const e=new A.g({layer:this.layer});n=e.hasDynamicLayers?e.dynamicLayers:null,e.destroy()}const s=n||`${t.uid}-default`;(await this._getLegendLayers(s,n)).forEach((e=>i.set(e.layerId,e)))}const r=i.get(e.id);if((!r||r?.subLayerIds&&r.defaultVisibility)&&e.sublayers){const r=await this._generateLegendElementsForSublayers(e.sublayers,t,i);return{type:"symbol-table",title:e.title,infos:r}}return this._generateSymbolTableElementForLegendLayer(r,e,t)}_generateSymbolTableElementForLegendLayer(e,t,i){if(!e?.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(e,t))return null;const r=t?.renderer;let n=t?.title||e.layerName;if(r&&(!t||t?.originIdOf("renderer")>M.Gr.SERVICE)){const e=t?.title||this._getRendererTitle(r,t);e&&(n&&"string"!=typeof e&&"title"in e&&(e.title=n),n=e)}const s={type:"symbol-table",title:n,legendType:e.legendType||null,infos:[]},o=t?this._sanitizeLegendForSublayer(e.legend.slice(),t):e.legend;return e.legendGroups&&e.legendGroups.length>0?e.legendGroups.forEach((t=>{const r={type:"symbol-table",title:t.heading,legendType:e.legendType||null,infos:this._generateSymbolTableElementInfosForLegendLayer(o.filter((e=>e.groupId===t.id)),e.layerId,i)};r.infos?.length>0&&s.infos.push(r)})):s.infos=this._generateSymbolTableElementInfosForLegendLayer(o,e.layerId,i),s.infos.length>0?s:null}_generateSymbolTableElementInfosForLegendLayer(e,t,i){return e.map((e=>{let r=e.url;if(e.imageData&&e.imageData.length>0)r=`data:image/png;base64,${e.imageData}`;else{if(0===r.indexOf("http"))return null;r=(0,y.Y3)(`${this.layer.url}/${t}/images/${r}`)}return{label:e.label,src:r,opacity:i??this.opacity,width:e.width,height:e.height}})).filter(g.Ru)}_isSublayerInScale(e){const t=e.minScale||0,i=e.maxScale||0;return!(t>0&&t<this.scale||i>this.scale)}_isLegendLayerInScale(e,t){const i=t||this.layer;let r=null,n=null,s=!0;return!i.minScale&&0!==i.minScale||!i.maxScale&&0!==i.maxScale?(0===e.minScale&&i.tileInfo&&(r=i.tileInfo.lods[0].scale),0===e.maxScale&&i.tileInfo&&(n=i.tileInfo.lods[i.tileInfo.lods.length-1].scale)):(r=Math.min(i.minScale,e.minScale)||i.minScale||e.minScale,n=Math.max(i.maxScale,e.maxScale)),(r>0&&r<this.scale||n>this.scale)&&(s=!1),s}_sanitizeLegendForSublayer(e,t){if("version"in this.layer&&+this.layer.version<10.1||0===e.length)return e;const i=t.renderer,r=e.some((e=>e.values));let n=0,s=null;return r&&e.some(((e,t)=>(e.values||(n=t,s=e,s.label||(s.label="others")),null!=s))),i?"unique-value"===i.type?s&&(e.splice(n,1),e.push(s)):"class-breaks"===i.type&&(s&&e.splice(n,1),e.reverse(),s&&e.push(s)):s&&(e.splice(n,1),e.push(s)),e}async _getRendererLegendElements(e,t={}){if(!function(e,t){return ie(e)||re(e)||ne(e)||se(e)||ce(e)||he(e)?"2d"===t.type||(0,C.l)(e):ee(e)||Q(e)||te(e)||oe(e)||ae(e)||le(e)||X(e)||J(e)}(e,this.view))return u.A.getLogger(this).warn(`Renderer of type '${e.type}' not supported!`),[];if(function(e){return oe(e)||ae(e)||le(e)||function(e){return"esri.renderers.PointCloudRGBRenderer"===e.declaredClass}(e)}(e))return this._constructPointCloudRendererLegendElements(e,t);if(ce(e))return this._constructDotDensityRendererLegendElements(e);const i=await this._loadRenderer(e);return he(i)?this._constructPieChartRendererLegendElements(i):this._constructRendererLegendElements(i,t)}async _getLegendElementsForFeatureReduction(e){let t=null;return"binning"===e.type?t=e.renderer:"cluster"===e.type&&(t=this._getClusterRenderer(e)),t?this._getRendererLegendElements(t):[]}_getPointCloudRendererTitle(e){return(e.legendOptions?.title||e.field)??""}async _constructPointCloudRendererLegendElements(e,t={}){const i=t.title,r=[];let n=null,s=null;if(oe(e))n={type:"symbol-table",title:i||this._getPointCloudRendererTitle(e),infos:[]},e.colorClassBreakInfos.forEach((e=>{n.infos.unshift({label:e.label||e.minValue+" - "+e.maxValue,value:[e.minValue,e.maxValue],symbol:this._getAppliedCloneSymbol(K,e.color)})}));else if(ae(e)){const t=e.stops;let r=null;if(t?.length&&(1===t.length&&(r=t[0].color),!r)){const e=t[0].value,i=t[t.length-1].value;null!=e&&null!=i&&(r=(0,F.G9)(e+(i-e)/2,t))}n={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(K,r||K.color)}]};const o=(0,F.y0)(e.stops??[])??[];s={type:"color-ramp",title:i||this._getPointCloudRendererTitle(e),infos:o,preview:(0,R.J0)(o.map((e=>e.color)),{ariaLabel:await ge("previewColorRampAriaLabel")})}}else le(e)&&(n={type:"symbol-table",title:i||this._getPointCloudRendererTitle(e),infos:[]},e.colorUniqueValueInfos?.forEach((e=>{n.infos.push({label:e.label||e.values.join(", "),value:e.values.join(", "),symbol:this._getAppliedCloneSymbol(K,e.color)})})));n&&n.infos.length&&r.push(n),s&&s.infos.length&&r.push(s);const o=r.reduce(((e,t)=>[...e,...t.infos??[]]),[]).filter((e=>!!e.symbol)).map((t=>this._getSymbolPreview(t,this.opacity,{symbolConfig:{applyColorModulation:!!e.colorModulation}})));return await Promise.allSettled(o),r}async _getElementInfoForDotDensity(e,t){const{color:i,label:r,valueExpressionTitle:n}=t,{backgroundColor:s,outline:o,dotSize:a}=e,l=this.effectList,c=l?.effects.map((e=>e.toJSON())),h=(0,S.zu)(c),u=await ge("previewTemplateAriaLabel",r||n),p=a+"-"+i+"-"+s+"-"+(o&&JSON.stringify(o.toJSON()))+"-"+h,d=this._dotDensityUrlCache,f=d.has(p)?d.get(p):(0,R.xg)(e,i,{ariaLabel:u});d.set(p,f);const y={shape:{type:"image",x:0,y:0,width:f.width,height:f.height,src:f.src},fill:null,stroke:null,offset:[0,0]},m=(0,O.fz)([[y]],[f.width,f.height],{effectView:this.effectList,ariaLabel:u});return{opacity:1,src:f.src,preview:m,width:f.width,height:f.height}}async _constructDotDensityRendererLegendElements(e){const t=e.calculateDotValue(this.view.scale),i=e.legendOptions?.unit,r={type:"symbol-table",title:{value:t&&Math.round(t),unit:i||""},infos:[]};for(const t of e.attributes){const i=await this._getElementInfoForDotDensity(e,t);i.label=t.label||t.valueExpressionTitle||t.field,r.infos.push(i)}return[r]}async _constructPieChartRendererLegendElements(e){const t=this.layer.opacity,i=[];let r=null;const n=e.outline;e.attributes.forEach((e=>{const t=new G.A({color:e.color,outline:n}),r=e.label||e.valueExpressionTitle||e.field;i.push({label:r,symbol:t})}));const s=i.length?[...i]:[];if(e.othersCategory?.color&&0!==e.othersCategory?.threshold){const t=new G.A({color:e.othersCategory.color,outline:n});r=e.othersCategory.label||"Other",i.push({label:r,symbol:t})}if(e.defaultColor?.a){const t=new G.A({color:e.defaultColor,outline:n});i.push({label:e.defaultLabel,symbol:t})}const o=await this._getVisualVariableLegendElements(e,this.layer)||[];if(i.length){o.unshift({type:"symbol-table",title:null,infos:i});const t=s.filter((e=>e.label!==r)).map((e=>e.symbol.color)).filter(Boolean),a=(0,R.es)(t,{holePercentage:e.holePercentage,backgroundColor:e.backgroundFillSymbol?.color,effectList:this.effectList,outline:n,ariaLabel:await ge("previewPieChartAriaLabel")});o.unshift({type:"pie-chart-ramp",title:this._getRendererTitle(e,this.layer),infos:i,preview:a})}const a=o.reduce(((e,t)=>[...e,...this._getAllInfos(t)]),[]).filter((e=>!!e?.symbol&&!e?.preview)).map((e=>this._getSymbolPreview(e,t,{effectList:this.effectList})));return await Promise.allSettled(a),o}async _constructRendererLegendElements(e,t={}){const{title:i,sublayer:r}=t,n=r||this.layer;this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const s=await this._getVisualVariableLegendElements(e,n)||[],o={type:"symbol-table",title:i||this._getRendererTitle(e,n),infos:[]};let a=null,l=!1;const c=new Set;if(J(e)&&!this._hasSizeRamp){const t=await(0,U.Zo)(e);o.infos.push({label:null,symbol:t})}else if(function(e){const t="authoringInfo"in e?e?.authoringInfo:null;return"univariate-color-size"===t?.type}(e)){let t=i;const r=function(e){const t="authoringInfo"in e?e?.authoringInfo:null;return"univariate-color-size"===t?.type&&"above-and-below"===t?.univariateTheme}(e)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",n=s.findIndex((e=>"color-ramp"===e.type)),o=-1!==n?s.splice(n,1)[0]:null,a=s.findIndex((e=>"size-ramp"===e.type)),l=-1!==a?s.splice(a,1)[0]:null,c=[];o&&(t=o.title,c.push(o)),l&&(t=l.title,c.push(l)),c.length>0&&s.push({type:r,title:t,infos:c})}else if(se(e)){const t=(0,j.Y)(e);s.push({type:"heatmap-ramp",title:i||this._getRendererTitle(e,n),infos:t,preview:(0,R.J0)(t.map((e=>e.color)),{effectList:this.effectList,ariaLabel:await ge("previewColorRampAriaLabel")})})}else if(ne(e)){const t=e&&e.authoringInfo;if(t&&"relationship"===t.type){const{numClasses:i,field1:r,field2:a}=t,l=t.focus;if(i&&r&&a){const t=[r,a];let h=(0,Z.zv)(l)||0;for(const e of t){const{field:t,normalizationField:i,label:r}=e,s=r||{field:this._getFieldAlias(t,n),normField:i&&this._getFieldAlias(i,n)},a=ve.clone();a.angle=h,o.infos.push({label:s,symbol:a}),c.add(a),h+=90}const u=(0,Z.Jr)({focus:l,numClasses:i,infos:e.uniqueValueInfos??[]});s.unshift(u)}}else if(fe(this.layer)||ye(this.layer))e.uniqueValueInfos?.forEach((e=>{e.symbol&&o.infos.push({label:e.label||e.value,value:e.value,symbol:e.symbol})}));else{const{field:t,field2:r,field3:s,fieldDelimiter:a,valueExpression:c,defaultSymbol:h}=e,u=!(!t&&!c||!r&&!s),p=[];if(e.uniqueValueGroups?.forEach((e=>{const i={type:"symbol-table",title:e.heading,infos:[]};e.classes?.forEach((e=>{const{symbol:o,values:l}=e;if(o){const h=[],p=[];for(const e of l??[]){const{value:i,value2:o,value3:l}=e,d=[],f=[];(t||c)&&(d.push(i),f.push(this._getDomainName(t,i,n))),r&&(d.push(o),f.push(this._getDomainName(r,o,n))),s&&(d.push(l),f.push(this._getDomainName(s,l,n))),h.push(u?d.join(a||""):d[0]),p.push(f.join(" - "))}const d=h.join(", ");let f=e.label;if(!f){const e=p.filter(Boolean);f=e.length?e.join(", "):d}i.infos.push({label:f,value:d,symbol:o})}})),i.infos.length&&p.push(i)})),p.length){const t=p[0];1===p.length&&"title"in t&&!t.title?o.infos.push(...t.infos??[]):(h&&(p.push({type:"symbol-table",infos:[{label:e.defaultLabel||"others",symbol:h}]}),l=!0),o.infos.push(...p)),i||e.legendOptions?.title||e.valueExpressionTitle||(o.title=null)}}e.defaultSymbol&&!l&&(o.infos.push({label:e.defaultLabel||"others",symbol:e.defaultSymbol}),l=!0)}else if(re(e))a=this._isUnclassedRenderer(e),(!a||!this._hasSizeRamp)&&(e.classBreakInfos.forEach((e=>{e.symbol&&o.infos.unshift({label:e.label||(a?null:e.minValue+" - "+e.maxValue),value:[e.minValue,e.maxValue],symbol:e.symbol})})),a&&(o.title=null),this._updateInfosForClassedSizeRenderer(e,o.infos)),e.defaultSymbol&&!a&&(o.infos.push({label:e.defaultLabel||"others",symbol:e.defaultSymbol}),l=!0);else if(ee(e))if(ye(this.layer)||function(e){return"esri.layers.WCSLayer"===e.declaredClass}(this.layer)){const t=await this._constructTileImageryStretchRendererElements(e);!function(e){return"stretch-ramp"===e.type}(t)?o.infos=t:s.push(t)}else{const t=this.layer;let i,r;if(e.statistics?.length){const t=e.statistics[0];(0,U.sx)(t)?(i=t.min,r=t.max):[i,r]=t}let n=[],a=t.serviceRasterInfo;if(t.rasterFunction)try{a=await t.generateRasterInfo(t.rasterFunction)}catch{}const l=(0,x.hP)(a.pixelType);if(1===a.bandCount){const n=t.bandIds?.[0]||0;i=null!=i?i:a.statistics?a.statistics[n].min:l[0],r=null!=r?r:a.statistics?a.statistics[n].max:l[1],i||r?s.push(await this._getStretchLegendElements(e,{min:i,max:r})):this._getServerSideLegend()}else if(t.bandIds&&1===t.bandIds.length)i=null!=i?i:a.statistics?a.statistics[t.bandIds[0]].min:l[0],r=null!=r?r:a.statistics?a.statistics[t.bandIds[0]].max:l[1],i||r?s.push(await this._getStretchLegendElements(e,{min:i,max:r})):this._getServerSideLegend();else if(a.bandCount>=3){const{bandInfos:e}=a,{bandIds:i}=t;e.length>=a.bandCount?3===i?.length?(n=i.map((t=>e[t].name)),o.infos=this._createSymbolTableElementMultiBand(n)):"lerc"===t.format?(n=[0,1,2].map((t=>e[t].name)),o.infos=this._createSymbolTableElementMultiBand(n)):this._getServerSideLegend():"lerc"===t.format?(n=["band1","band2","band3"],o.infos=this._createSymbolTableElementMultiBand(n)):this._getServerSideLegend()}else this._getServerSideLegend()}else if(Q(e))e.colormapInfos.forEach((e=>{o.infos.push({label:e.label,value:e.value,symbol:this._getAppliedCloneSymbol(Y,e.color)})}));else if(ie(e)){let i=e.symbol;switch(t.geometryType){case"point":i="pointSymbol"in n?n.pointSymbol:null;break;case"polyline":i="lineSymbol"in n?n.lineSymbol:null;break;case"polygon":i="polygonSymbol"in n?n.polygonSymbol:null}const r=this._hasClusterSizeVariable&&this._getClusterSymbol()||!this._hasSizeRamp;e.symbol&&r&&o.infos.push({label:e.label,symbol:i})}else if(X(e)){e.outputUnit&&(this.title="("+e.toJSON().outputUnit+")"),o.title=e.attributeField;const t=e.getClassBreakInfos();t?.length?t.forEach((e=>{o.infos.push({label:e.minValue+" - "+e.maxValue,symbol:e.symbol})})):o.infos.push({label:e.attributeField,symbol:e.getDefaultSymbol()})}else te(e)&&s.push(await this._getStretchLegendElements(e,{min:0,max:255}));const h=e.defaultSymbol;!h||l||ie(e)||a&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||s.push({type:"symbol-table",infos:[{label:e.defaultLabel||"others",symbol:h}]}),o.infos.length&&s.unshift(o);const u=null==t.opacity?this.opacity:t.opacity,p=this._isTallSymbol("visualVariables"in e?e.visualVariables:null),d=fe(this.layer)||ye(this.layer),f=s.reduce(((e,t)=>[...e,...this._getAllInfos(t)]),[]).filter((e=>!!e?.symbol)).filter((e=>{if("cim"===e.symbol.type){const{minScale:t,maxScale:i}=e.symbol.data;if(t&&t<this.scale||i&&i>this.scale)return!1}return!0})).map((e=>this._getSymbolPreview(e,u,{isDefault:e.symbol===h,applyScaleDrivenSize:!c.has(e.symbol),symbolConfig:{isTall:p,isSquareFill:d},effectList:c.has(e.symbol)?null:this.effectList})));return e=null,await Promise.allSettled(f),s}_getServerSideLegend(){setTimeout((()=>this.buildLegendElementsForTools()),0)}_getAllInfos(e){const t=e?.infos;return t?t.reduce(((e,t)=>e.concat(this._getAllInfos(t))),[]):[e]}async _constructTileImageryStretchRendererElements(e){const t=this.layer,i=t.symbolizer.rasterInfo??t.raster.rasterInfo;let r,n;const s=e?.statistics?.length?e.statistics:i?.statistics;if(s){const e=s[0];(0,U.sx)(e)?(r=e.min,n=e.max):[r,n]=e}else{const e=(0,x.hP)(i.pixelType);r=e[0],n=e[1]}if(t.hasStandardTime()&&(r=t.getStandardTimeValue(r),n=t.getStandardTimeValue(n)),1===i.bandCount||1===t.bandIds?.length)return this._getStretchLegendElements(e,{min:r,max:n});const o=(t?.bandIds?.length?t.bandIds:Array.from(Array(Math.min(i.bandCount,3)).keys())).map((e=>i.bandInfos[e].name));return o.length<3?o.push(o[1]):o.length>3&&o.splice(3),this._createSymbolTableElementMultiBand(o)}async _getStretchLegendElements(e,t){const i=e.colorRamp,r=(0,F.vt)(i,t);return{type:"stretch-ramp",title:"",infos:r,preview:(0,R.J0)(r.map((e=>e.color)),{ariaLabel:await ge("previewColorRampAriaLabel")})}}_getClusterSymbol(){const e=this.layer,t="featureReduction"in e&&e.featureReduction,i=t&&"symbol"in t&&t.renderer;return i&&!0!==i?.authoringInfo?.isAutoGenerated?null:t&&"symbol"in t?t.symbol:null}async _getSizeLegendElement(e,t,i,r){return{type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(t):e,infos:await(0,z.getRampStops)(i,t,await(0,U.uM)(i),this.scale,this.view,r,this._hasClusterSizeVariable?this._getClusterSymbol():null)}}_createSymbolTableElementMultiBand(e){const t=[],i=["red","green","blue"];return e.forEach(((e,r)=>{t.push({label:{colorName:i[r],bandName:e},src:U.E2[r],opacity:this.opacity??1})})),t}_updateInfosForClassedSizeRenderer(e,t){const i=e.authoringInfo&&"class-breaks-size"===e.authoringInfo.type,r=e.classBreakInfos.some((e=>(0,P.$d)(e.symbol)));if(i&&r){const i=z.m,r=z.O,n=e.classBreakInfos.length,s=(i-r)/(n>1?n-1:n);t.forEach(((e,t)=>{e.size=i-s*t}))}}_isTallSymbol(e){let t=!1,i=!1;if(e)for(let r=0;r<e.length&&(!t||!i);r++){const n=e[r];"size"===n.type&&("height"===n.axis&&(t=!0),"width-and-depth"===n.axis&&(i=!0))}return t&&i}async _getSymbolPreview(e,t,r){let n=!r?.isDefault&&null==e.size&&this._hasSizeRamp?(0,b.PN)(L.CB.size):e.size;if(this._scaleDrivenSizeVariable&&r?.applyScaleDrivenSize){const{getSize:t}=await Promise.resolve().then(i.bind(i,37525));n=t(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:"simple-marker"===e.symbol.type?e.symbol.style:null})}const s=!r?.isDefault&&this._hasSizeRamp||!(!this._scaleDrivenSizeVariable||!r?.applyScaleDrivenSize);return(0,R.Gr)(e.symbol,{size:n,opacity:t,scale:!1,symbolConfig:r?.symbolConfig,effectView:r?.effectList,style:"legend",cimOptions:{allowScalingUp:s,viewParams:this.isScaleDriven?{viewingMode:"2d"===this.view?.type?"map":this.view?.viewingMode,scale:this.view?.scale}:null},ariaLabel:e.label&&"string"!=typeof e.label?null:await ge("previewTemplateAriaLabel",e.label)}).then((t=>(e.preview=t,e))).catch((()=>(e.preview=null,e)))}_getClusterRenderer(e){this._hasClusterSizeVariable=!1;const t="renderer"in this.layer?this.layer.renderer:null,i=e.renderer?.clone()||t?.clone(),r=function(e,t,i){const r=e.effectiveClusterRenderer;if(!r||!("visualVariables"in r)||!r.visualVariables)return null;const n=r.visualVariables.find((e=>"size"===e.type));if(!("stops"in n)||!n.stops)return null;const s=n.stops.find((e=>e.useMinValue)),o=n.stops.find((e=>e.useMaxValue));if(null==s||null==o)return null;const a=i.featuresTilingScheme.getClosestInfoForScale(i.scale).level,l=n.field,c=t.getDisplayStatistics(a,l);return c?new D.A({field:n.field,minSize:e.clusterMinSize,minDataValue:c.minValue,maxSize:e.clusterMaxSize,maxDataValue:c.maxValue}):null}(e,this.layerView,this.view);if(r&&null!=i&&"visualVariables"in i){const t=i.visualVariables?.some((e=>"size"===e.type&&"outline"!==e.target&&!q.test(e.valueExpression)));if(!t){if("clusterMinSize"in e&&"clusterMaxSize"in e){const{clusterMinSize:t,clusterMaxSize:i}=e;r.legendOptions=new k.A({showLegend:t!==i})}const t=i.visualVariables||[];i.visualVariables=t.concat([r]),this._hasClusterSizeVariable=!0}}return i}async _loadRenderer(e){const t=[],i=e.clone(),r=await(0,U.uM)(i);if(re(i)||ne(i)){const e=(i.classBreakInfos||i.uniqueValueInfos).map((e=>this._fetchSymbol(e.symbol,r).then((t=>{e.symbol=t})).catch((()=>{e.symbol=null}))));Array.prototype.push.apply(t,e)}return t.push(this._fetchSymbol(i.symbol||i.defaultSymbol,i.defaultSymbol?null:r).then((e=>{this._applySymbolToRenderer(i,e,ie(i))})).catch((()=>{this._applySymbolToRenderer(i,null,ie(i))}))),await Promise.allSettled(t),i}_applySymbolToRenderer(e,t,i){i?e.symbol=t:e.defaultSymbol=t}async _fetchSymbol(e,t){if(!e)throw new Error;if("web-style"===e.type){const i=this._webStyleSymbolCache;try{const r=await("2d"===this.view.type?e.fetchCIMSymbol({cache:i}):e.fetchSymbol({cache:i}));return this._getAppliedCloneSymbol(r,t)}catch{throw u.A.getLogger(this).warn("Fetching web-style failed!"),new Error}}return this._getAppliedCloneSymbol(e,t)}_getAppliedCloneSymbol(e,t){if(!e||!t)return e;const i=e.clone(),r=t&&t.toRgba();return i.type.includes("3d")?this._applyColorTo3dSymbol(i,r):"cim"===i.type?(0,N.Fe)(i,t):i.color&&(i.color=new f.A(r||i.color)),i}_applyColorTo3dSymbol(e,t){t&&e.symbolLayers.forEach((e=>{e&&(e.material||(e.material={}),e.material.color=new f.A(t))}))}async _getVisualVariableLegendElements(e,t){if(!("visualVariables"in e)||!e.visualVariables||"vector-field"===e.type)return null;const i=e.visualVariables,r=[],n=[],s=[];for(const e of i)"color"===e.type?r.push(e):"size"===e.type?n.push(e):"opacity"===e.type&&s.push(e);const o=[...r,...n,...s];let a,l;if(0===r.length&&re(e)&&e.classBreakInfos&&1===e.classBreakInfos.length){const t=e.classBreakInfos[0];a=t&&t.symbol}if(0===r.length&&ie(e)&&(a=e.symbol),a)if(a.type.includes("3d")){const e=a.symbolLayers.at(0);"water"===e.type?null!=e.color&&(l=e.color):null!=e.material?.color&&(l=e.material.color)}else a.url||(l=a.color);const c=this.effectList;return(await Promise.all(o.map((async i=>{if(!i.legendOptions||!1!==i.legendOptions.showLegend){const r=J(e)?i.field:this._getRampTitle(i,t);let n=null;const s=(0,U.getDateFormatOptions)(t,i,this.view.timeZone);if("color"===i.type){const e=await(0,F.getRampStops)(i,null,s)??[];n={type:"color-ramp",title:r,infos:e,preview:(0,R.J0)(e.map((e=>e.color)),{effectList:c,ariaLabel:await ge("previewColorRampAriaLabel")})},this._hasColorRamp||(this._hasColorRamp=e.length>0)}else if("size"===i.type&&"outline"!==i.target)q.test(i.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=i):(n=await this._getSizeLegendElement(r,i,e,s),this._hasSizeRamp||(this._hasSizeRamp=!(null==n.infos||!n.infos.length)));else if("opacity"===i.type){const e=await(0,F.getRampStops)(i,l,s)??[];n={type:"opacity-ramp",title:r,infos:e,preview:(0,R.J0)(e.map((e=>e.color)),{effectList:c,ariaLabel:await ge("previewColorRampAriaLabel")})},this._hasOpacityRamp||(this._hasOpacityRamp=e.length>0)}return n&&n.infos?n:null}})))).filter(g.Ru)}_getDomainName(e,t,i){if(e&&"function"!=typeof e){const r="getField"in i&&i.getField?.(e),n=r&&"getFieldDomain"in i&&i.getFieldDomain?i.getFieldDomain(r.name):null;return"coded-value"===n?.type?n.getName(t):null}return null}_getClusterTitle(e){const t=this.layer,i=e.field;if("featureReduction"in t&&t.featureReduction&&"cluster"===t.featureReduction.type){const e=t.featureReduction,r="popupTemplate"in e&&e.popupTemplate,n=r&&r.fieldInfos;if(n)for(const e of n)if(e.fieldName===i)return"cluster_count"===i?e.label||{showCount:!0}:e.label}return{showCount:!0}}_getRampTitle(e,t){let i=e.field,r=e.normalizationField,n=!1,s=!1,o=!1,a=null;i="function"==typeof i?null:i,r="function"==typeof r?null:r;const l=e.legendOptions?.title;if(null!=l)a=l;else if(e.valueExpressionTitle)a=e.valueExpressionTitle;else{if("renderer"in t&&t.renderer&&"authoringInfo"in t.renderer&&t.renderer.authoringInfo?.visualVariables){const e=t.renderer.authoringInfo.visualVariables;for(let t=0;t<e.length;t++){const i=e[t];if("color"===i.type){if("ratio"===i.style){n=!0;break}if("percent"===i.style){s=!0;break}if("percent-of-total"===i.style){o=!0;break}}}}a={field:i&&this._getFieldAlias(i,t),normField:r&&this._getFieldAlias(r,t),ratio:n,ratioPercent:s,ratioPercentTotal:o}}return a}_getRendererTitle(e,t){const i=e;if(i.legendOptions?.title)return i.legendOptions.title;if(i.valueExpressionTitle)return i.valueExpressionTitle;let r=i.field,n=null,s=null;if(re(i)&&(n=i.normalizationField,s="percent-of-total"===i.normalizationType),r="function"==typeof r?null:r,n="function"==typeof n?null:n,ne(i)){const{field2:e,field3:n,fieldDelimiter:s}=i;let o=r&&this._getFieldAlias(r,t);return e&&(o=`<${o}>${s}<${this._getFieldAlias(e,t)}>`,n&&(o=`${o}${s}<${this._getFieldAlias(n,t)}>`)),o}let o=null;return(r||n)&&(o={field:r&&this._getFieldAlias(r,t),normField:n&&this._getFieldAlias(n,t),normByPct:s}),o}_getFieldAlias(e,t){const i="popupTemplate"in t?t.popupTemplate:null,r=i?.fieldInfos;let n=r?.find((t=>e===t.fieldName)),s=null;"getField"in t&&t.getField?s=t.getField(e):"fieldsIndex"in t&&t.fieldsIndex&&(s=t.fieldsIndex.get(e));let o=null;const a="featureReduction"in t&&t.featureReduction;a&&(n??="popupTemplate"in a?a.popupTemplate?.fieldInfos?.find((t=>e?.toLowerCase()===t.fieldName?.toLowerCase())):void 0,"fields"in a&&a.fields&&(o=a.fields.find((t=>t.name?.toLowerCase()===e?.toLowerCase()))));const l=n||s||o;let c=null;return l&&(c=n?.label||s?.alias||o?.alias||"name"in l&&l.name||"fieldName"in l&&l.fieldName||null),c}_isUnclassedRenderer(e){const t=e.visualVariables;let i=!1;return re(e)&&e.classBreakInfos&&1===e.classBreakInfos.length&&t&&(i=e.field?t.some((t=>!(!t||e.field!==t.field||(e.normalizationField||t.normalizationField)&&e.normalizationField!==t.normalizationField))):!!t.length),i}};(0,r._)([(0,s.MZ)()],be.prototype,"children",void 0),(0,r._)([(0,s.MZ)({readOnly:!0})],be.prototype,"effectList",null),(0,r._)([(0,s.MZ)()],be.prototype,"layerView",void 0),(0,r._)([(0,s.MZ)()],be.prototype,"layer",void 0),(0,r._)([(0,s.MZ)()],be.prototype,"legendElements",void 0),(0,r._)([(0,s.MZ)({readOnly:!0})],be.prototype,"opacity",null),(0,r._)([(0,s.MZ)()],be.prototype,"parent",void 0),(0,r._)([(0,s.MZ)({readOnly:!0,dependsOn:[]})],be.prototype,"ready",null),(0,r._)([(0,s.MZ)()],be.prototype,"hideLayersNotInCurrentView",void 0),(0,r._)([(0,s.MZ)()],be.prototype,"keepCacheOnDestroy",void 0),(0,r._)([(0,s.MZ)()],be.prototype,"respectLayerVisibility",void 0),(0,r._)([(0,s.MZ)({readOnly:!0})],be.prototype,"scale",null),(0,r._)([(0,s.MZ)()],be.prototype,"sublayerIds",void 0),(0,r._)([(0,s.MZ)({readOnly:!0})],be.prototype,"isScaleDriven",null),(0,r._)([(0,s.MZ)()],be.prototype,"title",void 0),(0,r._)([(0,s.MZ)({readOnly:!0,dependsOn:["ready"],value:0})],be.prototype,"version",null),(0,r._)([(0,s.MZ)()],be.prototype,"view",void 0),be=(0,r._)([(0,a.$)("esri.widgets.Legend.support.ActiveLayerInfo")],be);const we=be;var Me=i(4631);const Te="state",Se="all-layer-views",Ae="legend-properties",Ee=h.A.ofType(we),xe=new Set(["esri.layers.BuildingSceneLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.OrientedImageryLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.SubtypeGroupLayer","esri.layers.TileLayer","esri.layers.VoxelLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer","esri.layers.LinkChartLayer","esri.layers.knowledgeGraph.KnowledgeGraphSublayer"]),Ie="view.basemapView.baseLayerViews",Ce="view.groundView.layerViews",ke="view.basemapView.referenceLayerViews",Ne=[Ie,Ce,"view.layerViews",ke];let Le=class extends c.A{constructor(e){super(e),this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new h.A,this.activeLayerInfos=new Ee,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this.addHandles((0,n.wB)((()=>this.view),(()=>this._viewHandles()),n.Vh),"view"),this.addHandles((0,Me.oQ)((()=>this._refresh())))}destroy(){this._destroyViewActiveLayerInfos(),this.view=null}get state(){return this.view?.ready?"ready":"disabled"}_viewHandles(){this.removeHandles(Te),this.view&&this.addHandles((0,n.wB)((()=>this.state),(()=>this._stateHandles()),n.Vh),Te)}_stateHandles(){this._resetAll(),"ready"===this.state&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this.removeHandles([Se,Ae]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(e){this.removeHandles(e);const t=this._activeLayerInfosByLayerViewId[e];delete this._activeLayerInfosByLayerViewId[e],t?.parent&&t.parent.children.remove(t)}_watchPropertiesAndAllLayerViews(){const{view:e}=this;if(!e)return;const{allLayerViews:t}=e;t.length&&this._refresh(),this.addHandles(t.on("change",(e=>this._propertiesChangeHandle())),Se),this.addHandles((0,n.wB)((()=>[this.layerInfos,this.basemapLegendVisible,this.groundLegendVisible]),(()=>this._propertiesChangeHandle())),Ae)}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(e){const t=this.view;if(e.length<2||!t)return;const i=[];e.forEach((t=>{if(!t.parent){const r=t.layer.parent,n=r&&"uid"in r&&this._layerViewByLayerId[r.uid],s=n&&this._activeLayerInfosByLayerViewId[n.uid];s&&e.includes(s)&&(i.push(t),t.parent=s,s.children.add(t),this._sortActiveLayerInfos(s.children))}})),e.removeMany(i);const r={};t.allLayerViews.forEach(((e,t)=>r[e.layer.uid]=t)),e.sort(((e,t)=>{const i=r[e.layer.uid]||0;return(r[t.layer.uid]||0)-i}))}_generateLayerViews(){const e=[];return Ne.filter(this._filterLayerViews,this).map((e=>(0,p.Jt)(this,e))).filter((e=>null!=e)).forEach(this._collectLayerViews("layerViews",e)),e}_filterLayerViews(e){const t=!this.basemapLegendVisible&&(e===Ie||e===ke),i=!this.groundLegendVisible&&e===Ce;return!t&&!i}_collectLayerViews(e,t){const i=r=>(r&&r.forEach((r=>{t.push(r),i(r[e])})),t);return i}_filterLayerViewsByLayerInfos(e){const t=this.layerInfos;return!t||!t.length||t.some((t=>this._hasLayerInfo(t,e)))}_hasLayerInfo(e,t){const i=this._isLayerUIDMatching(e.layer,t.layer.uid);return i&&(this._layerInfosByLayerViewId[t.uid]=e),i}_isLayerUIDMatching(e,t){return e&&(e.uid===t||this._hasLayerUID(e.layers,t))}_hasLayerUID(e,t){return e&&e.some((e=>this._isLayerUIDMatching(e,t)))}_isLayerViewSupported(e){return!!xe.has(e.layer.declaredClass)&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this.removeHandles(e.uid),this.addHandles((0,n.wB)((()=>[e.legendEnabled,e.layer?.legendEnabled]),(()=>this._layerActiveHandle(e))),e.uid))}_layerActiveHandle(e){this._isLayerActive(e)&&(this.removeHandles(e.uid),this._buildActiveLayerInfo(e))}_isLayerActive(e){return!this.respectLayerVisibility||e.legendEnabled&&e.layer?.legendEnabled}_buildActiveLayerInfo(e){const t=e.layer,i=e.uid,r=this._layerInfosByLayerViewId[i];let s=this._activeLayerInfosByLayerViewId[i];if(!s){const n=void 0!==r?.title&&r.layer.uid===t.uid;s=new we({layer:t,layerView:e,title:n?r.title:t.title,view:this.view,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:r?.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[i]=s}const o=t.parent&&"uid"in t.parent?this._layerViewByLayerId[t.parent?.uid]:null;if(s.parent=this._activeLayerInfosByLayerViewId[o?.uid],!this.hasHandles(i)){const r=[(0,n.wB)((()=>t.title),(e=>this._titleHandle(e,s))),(0,n.wB)((()=>[t.opacity,"renderer"in t&&t.renderer,"pointSymbol"in t&&t.pointSymbol,"lineSymbol"in t&&t.lineSymbol,"polygonSymbol"in t&&t.polygonSymbol]),(()=>this._constructLegendElements(s))),(0,n.z7)((()=>!0===this.view?.stationary),(()=>this._scaleHandle(s)),n.Vh),(0,n.wB)((()=>e.layer?(0,d.n)(e.layer,e.view):null),(()=>this._constructLegendElements(s))),(0,n.wB)((()=>e.updating),(()=>{null!=e.layer&&null!=(0,d.n)(e.layer,e.view)&&this._constructLegendElements(s)})),(0,n.wB)((()=>"effect"in t&&t.effect),(()=>this._constructLegendElements(s))),(0,n.z7)((()=>this.view?.timeZone),(()=>this._constructLegendElements(s)),n.Vh)];if(this.respectLayerVisibility){const i=(0,n.wB)((()=>e.legendEnabled),(e=>this._legendEnabledHandle(e,s))),o=(0,n.wB)((()=>t.legendEnabled),(e=>this._legendEnabledHandle(e,s)));r.push(i,o)}this.addHandles(r,i)}s.isScaleDriven||this._constructLegendElements(s),this._addActiveLayerInfo(s)}_titleHandle(e,t){t.title=e,this._constructLegendElements(t)}_legendEnabledHandle(e,t){e?this._addActiveLayerInfo(t):this._removeActiveLayerInfo(t)}_scaleHandle(e){(e.isScaleDriven||e.hideLayersNotInCurrentView)&&this._constructLegendElements(e)}_addActiveLayerInfo(e){const{layerView:t,layer:i}=e;if(this._isLayerActive(t)&&!this.activeLayerInfos.includes(e)){const t=e.parent;if(t)t.children.includes(e)||t.children.push(e),this._sortActiveLayerInfos(t.children);else{const t=this.layerInfos?.some((e=>e.layer.uid===i.uid));i.parent&&"uid"in i.parent&&!t?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const e=[];this._activeLayerInfosWithNoParent.forEach((t=>{const i=t.layer.parent,r=i&&"uid"in i?this._layerViewByLayerId[i?.uid]:null,n=this._activeLayerInfosByLayerViewId[r?.uid];n&&(e.push(t),t.parent=n)})),e.length&&(this._activeLayerInfosWithNoParent.removeMany(e),e.forEach((e=>this._addActiveLayerInfo(e))))}}}_removeActiveLayerInfo(e){const t=e.parent;t?t.children.remove(e):this.activeLayerInfos.remove(e)}_constructLegendElements(e){const t=e.layer;"featureCollections"in t&&t.featureCollections?e.buildLegendElementsForFeatureCollections(t.featureCollections):"featureReduction"in t&&t.featureReduction&&"renderer"in t.featureReduction&&("binning"===t.featureReduction.type||"cluster"===t.featureReduction.type)&&(!this.view||t.featureReduction.maxScale<=this.view.scale)?e.buildLegendElementsForFeatureReduction(t.featureReduction):"renderer"in t&&t.renderer&&!("sublayers"in t)?e.buildLegendElementsForRenderer(t.renderer):"url"in t&&t.url?e.buildLegendElementsForTools():e.children.forEach((e=>this._constructLegendElements(e)))}};(0,r._)([(0,s.MZ)({type:Ee})],Le.prototype,"activeLayerInfos",void 0),(0,r._)([(0,s.MZ)()],Le.prototype,"basemapLegendVisible",void 0),(0,r._)([(0,s.MZ)()],Le.prototype,"groundLegendVisible",void 0),(0,r._)([(0,s.MZ)()],Le.prototype,"hideLayersNotInCurrentView",void 0),(0,r._)([(0,s.MZ)()],Le.prototype,"keepCacheOnDestroy",void 0),(0,r._)([(0,s.MZ)()],Le.prototype,"respectLayerVisibility",void 0),(0,r._)([(0,s.MZ)()],Le.prototype,"layerInfos",void 0),(0,r._)([(0,s.MZ)({readOnly:!0})],Le.prototype,"state",null),(0,r._)([(0,s.MZ)()],Le.prototype,"view",void 0),Le=(0,r._)([(0,a.$)("esri.widgets.Legend.LegendViewModel")],Le);const Oe=Le;var Re=i(67668);const Pe="esri-legend--card",De="esri-legend",Fe={activated:`${Pe}__carousel-indicator--activated`,base:Pe,stacked:`${De}--stacked`,carouselTitle:`${Pe}__carousel-title`,indicator:`${Pe}__carousel-indicator`,intervalSeparator:`${Pe}__interval-separator`,imageryLayerStretchedImage:`${Pe}__imagery-layer-image--stretched`,imageLabel:`${Pe}__image-label`,layerCaption:`${Pe}__layer-caption`,labelElement:`${Pe}__label-element`,layerRow:`${Pe}__layer-row`,labelCell:`${Pe}__label-cell`,message:`${Pe}__message`,rampLabel:`${Pe}__ramp-label`,section:`${Pe}__section`,relationshipSection:`${Pe}__relationship-section`,serviceCaptionText:`${Pe}__service-caption-text`,serviceContent:`${Pe}__service-content`,service:`${Pe}__service`,groupLayer:`${Pe}__group-layer`,groupLayerChild:`${Pe}__group-layer-child`,symbol:`${Pe}__symbol`,sizeRampRow:`${Pe}__size-ramp-row`,symbolRow:`${Pe}__symbol-row`,symbolCell:`${Pe}__symbol-cell`,indicatorContainer:`${Pe}__carousel-indicator-container`,intervalSeparatorsContainer:`${Pe}__interval-separators-container`,relationshipLabelContainer:`${Pe}__relationship-label-container`,labelContainer:`${Pe}__label-container`,serviceCaptionContainer:`${Pe}__service-caption-container`,symbolContainer:`${Pe}__symbol-container`,sizeRampContainer:`${Pe}__size-ramp-container`,sizeRampPreview:`${Pe}__size-ramp-preview`,pieChartRampPreview:`${Pe}__pie-chart-ramp-preview`,rampContainer:`${De}__ramps`,sizeRampHorizontal:`${De}__size-ramp--horizontal`,rampLabelsContainer:`${De}__ramp-labels`,layerInfo:`${De}__layer-cell ${De}__layer-cell--info`,univariateAboveAndBelowColorRamp:"esri-univariate-above-and-below-ramp__color--card"};var je=i(51695),Ze=(i(2980),i(58133)),ze=i(33510),Ue=i(2110);const Ve=(0,Ze.F)(),Ge=10,Be=20,$e=10,He=20,qe={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};function We(e="vertical"){const t="stroke:rgb(200, 200, 200);stroke-width:1";return"vertical"===e?(0,Ue.K)("svg",{height:"4",width:"10"},(0,Ue.K)("line",{style:t,x1:"0",x2:"10",y1:"2",y2:"2"})):(0,Ue.K)("svg",{height:"10",width:"10"},(0,Ue.K)("line",{style:t,x1:"5",x2:"5",y1:"0",y2:"10"}))}function Ke(e,t="vertical"){const i=document.createElement("div");return i.style.height=`${Be}px`,i.className=qe.univariateAboveAndBelowSymbol,null!=e&&(i.style.opacity=e.toString()),Ve.append(i,We.bind(null,t)),i}function Ye(e,t,i="vertical",r){e.infos.forEach(((e,n)=>{if(r&&2===n)e.preview=Ke(t,i);else{const t=(0,b.Lz)(e.size)+("horizontal"===i?He:$e),r=e.preview,n="div"===r?.tagName.toLowerCase(),s=n?r:document.createElement("div");s.className=qe.univariateAboveAndBelowSymbol,"horizontal"===i?s.style.width=`${t}px`:s.style.height=`${t}px`,!n&&r&&s.appendChild(r),e.preview=s}}))}function Je(e,t="classic"){const i=e.infos;return"classic"===t?((0,b.Lz)(i[0].size)+$e)/2:((0,b.Lz)(i[0].size)-(0,b.Lz)(i[i.length-1].size))/2}function Xe(e,t){if(!e)return null;const i=e.infos.map((e=>e.color)),r=(0,R.J0)("full"===t.type?i:"above"===t.type?i.slice(0,3):i.slice(2,5),{width:t.width,height:t.height,align:t.rampAlignment,effectList:t.effectList,ariaLabel:t.ariaLabel});return r.className=qe.colorRamp,null!=t.opacity&&(r.style.opacity=t.opacity.toString()),r}function Qe(e,t,i,r="vertical"){let n=0;const s=e.infos,o=Math.floor(s.length/2),a="full"===t||"above"===t?0:o,l="full"===t||"below"===t?s.length-1:o;for(let e=a;e<=l;e++)n+=i&&e===o?"horizontal"===r?Ge:Be:(0,b.Lz)(s[e].size)+("horizontal"===r?He:$e);return Math.round(n)}function et(e,t,i,r="vertical"){const n=Qe(e,t,i,r),s=e.infos,o=Math.floor(s.length/2),a="full"===t||"above"===t?0:o,l="full"===t||"below"===t?s.length-1:o,c="full"===t?s[a].size+s[l].size:"above"===t?s[a].size:s[l].size,h=i?"vertical"===r?Be:Ge:0,u="vertical"===r?$e*("full"===t?2:1):He*("full"===t?2:1);return Math.round(n-((0,b.Lz)(c)/2+h/2+u/2))}function tt(e,t,i="vertical"){const r=e.infos;let n=r.find((({type:e})=>"size-ramp"===e)),s=r.find((({type:e})=>"color-ramp"===e));return n&&(n={...n},n.infos=[...n.infos],Ye(n,t,i,!0)),s&&(s={...s},s.infos=[...s.infos]),"horizontal"===i&&(n?.infos.reverse(),s?.infos.reverse()),{sizeRampElement:n,colorRampElement:s}}function it(e,t="vertical"){const i=e.infos;let r=i.find((({type:e})=>"size-ramp"===e)),n=i.find((({type:e})=>"color-ramp"===e));return r&&(r={...r},r.infos=[...r.infos],Ye(r,null,t,!1)),n&&(n={...n},n.infos=[...n.infos]),"horizontal"===t&&(r?.infos.reverse(),n?.infos.reverse()),{sizeRampElement:r,colorRampElement:n}}var rt=i(21332);function nt(e){e.appendChild(this)}function st(e,t,i){if(!t)return;if("number"==typeof t)return t;if("string"==typeof t)return(0,rt._e)(t);if("value"in t||"unit"in t)return(0,H.V)(e.dotValue,t);if("colorName"in t&&"bandName"in t)return e[t.colorName]+": "+(e[t.bandName]||t.bandName);if("showCount"in t)return t.showCount?e.clusterCountTitle:void 0;let r=null;return i?r=t.ratioPercentTotal?"showRatioPercentTotal":t.ratioPercent?"showRatioPercent":t.ratio?"showRatio":t.normField?"showNormField":t.field?"showField":null:ot(0,i)&&(r=t.normField?"showNormField":t.normByPct?"showNormPct":t.field?"showField":null),r?(0,H.V)("showField"===r?"{field}":e[r],{field:t.field,normField:t.normField}):void 0}function ot(e,t){return!t}function at(e,t){return!!(t&&"Stretched"===t&&e.version>=10.3&&"esri.layers.ImageryLayer"===e.declaredClass)}function lt(e,t){return e.label?t[e.label]+": "+("string"==typeof e.value?e.value:(0,V.ZV)(e.value??0,{style:"decimal",notation:e.value?.toString().toLowerCase().includes("e")?"scientific":"standard"})):""}var ct,ht,ut=i(34017),pt=i(97944),dt=i(2153);(ht=ct||(ct={})).Auto="auto",ht.Stack="stack",ht.SideBySide="side-by-side";const ft=window.devicePixelRatio;let yt=class extends l.A{constructor(e,t){super(e,t),this._hasIndicators=!1,this._selectedSectionName=null,this._sectionNames=[],this._sectionMap=new Map,this.activeLayerInfos=null,this.headingLevel=3,this.layout=ct.Stack,this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}initialize(){this.addHandles((0,n.wB)((()=>this.activeLayerInfos),(e=>{this.removeAllHandles(),this._watchForSectionChanges(e)})))}render(){const{view:e}=this;this._hasIndicators=this.layout===ct.Auto&&e&&e.container.clientWidth<=768||this.layout===ct.Stack;const t=this.activeLayerInfos,i=t&&t.toArray().map((e=>this._renderLegendForLayer(e))).filter((e=>!!e));this._hasIndicators?this._selectedSectionName&&this._sectionNames.includes(this._selectedSectionName)||(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;const r=this._sectionNames.length,n=this._sectionNames.map(((e,t)=>{const i=(0,H.V)(this.messagesCommon.pagination.pageText,{index:t+1,total:r});return(0,Ue.K)("div",{"aria-controls":`${e}-panel`,"aria-label":i,"aria-selected":(this._selectedSectionName===e).toString(),bind:this,class:this.classes(Fe.indicator,{[Fe.activated]:this._selectedSectionName===e}),"data-section-name":e,id:e,key:e,onclick:this._selectSection,onkeydown:this._focusSection,role:"tab",tabIndex:this._selectedSectionName===e?0:-1,title:i})})),s=this._hasIndicators&&r>1?(0,Ue.K)("div",{class:Fe.indicatorContainer,key:"carousel-navigation",role:"tablist"},n):null,o=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):i&&i.length?i:null,a={[Fe.stacked]:this._hasIndicators};return(0,Ue.K)("div",{class:this.classes(Fe.base,a)},o||(0,Ue.K)("div",{class:Fe.message},this.messages.noLegend),s)}_selectSection(e){const t=e.target.getAttribute("data-section-name");t&&(this._selectedSectionName=t)}_focusSection(e){switch(e.key){case"ArrowLeft":case"ArrowRight":this._switchSectionOnArrowPress(e);break;case"Enter":case" ":this._selectSection(e)}}_switchSectionOnArrowPress(e){const t=e.key,i="ArrowLeft"===t?-1:1,r=e.target.getAttribute("data-section-name"),n=this._sectionNames.indexOf(r),s=this._sectionNames;let o=null;-1!==n&&(s[n+i]?o=document.getElementById(s[n+i]):"ArrowLeft"===t?o=document.getElementById(s[s.length-1]):"ArrowRight"===t&&(o=document.getElementById(s[0])),o?.focus())}_watchForSectionChanges(e){if(this._generateSectionNames(),e){e.forEach((e=>{const t=`activeLayerInfo-${e.layer.uid}-version-change`;this.removeHandles(t),this._watchForSectionChanges(e.children),this.addHandles((0,n.wB)((()=>e.version),(()=>this._generateSectionNames())),t)}));const t="activeLayerInfos-collection-change";this.removeHandles(t),this.addHandles(e.on("change",(()=>this._watchForSectionChanges(e))),t)}}_generateSectionNames(){this._sectionNames.length=0,this._selectedSectionName=null,this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this)}_getSectionName(e,t,i){return`${this.id}${e.uid}-type-${t.type}-${i}`}_generateSectionNamesForActiveLayerInfo(e){e.children.forEach(this._generateSectionNamesForActiveLayerInfo,this),e.legendElements&&e.legendElements.forEach(((t,i)=>{this._sectionNames.push(this._getSectionName(e.layer,t,i))}))}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const t=e.children.map((e=>this._renderLegendForLayer(e))).toArray();return(0,Ue.K)("div",{class:this.classes(Fe.service,Fe.groupLayer),key:e.layer.uid},(0,Ue.K)("div",{class:Fe.serviceCaptionContainer},e.title),t)}{const t=e.legendElements;if(t&&!t.length)return null;const i=t.some((e=>"relationship-ramp"===e.type)),r=t.map(((t,r)=>this._renderLegendForElement(t,e,r,i))).filter((e=>!!e));if(!r.length)return null;const n={[Fe.groupLayerChild]:!!e.parent};return(0,Ue.K)("div",{class:this.classes(Fe.service,n),key:e.layer.uid},(0,Ue.K)("div",{class:Fe.serviceCaptionContainer},(0,Ue.K)("div",{class:Fe.serviceCaptionText},e.title)),(0,Ue.K)("div",{class:Fe.serviceContent},r))}}_renderLegendForElement(e,t,i,r=!1,n=!1){const s="color-ramp"===e.type,o="opacity-ramp"===e.type,a=t.layer;let l=null;if("string"==typeof e.title)l=e.title;else if(e.title){const t=e.title,i=st(this.messages,t,s||o);l=t.title?`${t.title} (${i})`:i}const c=this._getSectionName(a,e,i),h=this._hasIndicators&&!n?(0,Ue.K)("div",null,(0,Ue.K)(ut.D,{class:Fe.carouselTitle,level:this.headingLevel},t.title),(0,Ue.K)(ut.D,{class:Fe.layerCaption,level:(0,ut.S)(this.headingLevel)},l)):l?(0,Ue.K)(ut.D,{class:Fe.layerCaption,level:this.headingLevel},l):null,u=t.effectList;let p=null;switch(e.type){case"symbol-table":{const i=e.infos.map(((i,r)=>this._renderLegendForElementInfo(i,t,e.legendType,r))).filter((e=>!!e));if(i.length){const e=i[0].properties.classes?.[Fe.symbolRow],t={[Fe.labelContainer]:!e&&!r,[Fe.relationshipLabelContainer]:r};p=(0,Ue.K)("div",{class:this.classes(t)},i)}break}case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":p=this._renderLegendForRamp(e,a.opacity,u);break;case"size-ramp":p=this._renderSizeRamp(e,a.opacity);break;case"pie-chart-ramp":p=this._renderPieChartRamp(e);break;case"relationship-ramp":p=(0,je.p)(e,this.id,{opacity:a.opacity,effectList:u,ariaLabel:this.messages.previewRelationshipRampAriaLabel});break;case"univariate-above-and-below-ramp":p=this._renderUnivariateAboveAndBelowRamp(e,a.opacity,u);break;case"univariate-color-size-ramp":p=this._renderUnivariateColorSizeRamp(e,a.opacity,u)}if(!p)return null;const d=(0,Ue.K)("div",{"aria-labelledby":c,class:Fe.section,id:`${c}-panel`,key:c,role:"tabpanel",tabIndex:0},[h,p]);return n||this._sectionMap.set(c,d),d}_renderPieChartRamp(e){return(0,Ue.K)("div",{afterCreate:nt,bind:e.preview,class:Fe.pieChartRampPreview})}_renderUnivariateAboveAndBelowRamp(e,t,i){const{sizeRampElement:r,colorRampElement:n}=tt(e,t,"horizontal");if(!r)return null;const s=Qe(r,"full",!0,"horizontal"),o=et(r,"above",!0,"horizontal"),a=et(r,"below",!0,"horizontal"),l=this.messages?.previewColorRampAriaLabel,c=Xe(n,{width:o,height:12,rampAlignment:"horizontal",opacity:t,type:"above",effectList:i,ariaLabel:l}),h=Xe(n,{width:a,height:12,rampAlignment:"horizontal",opacity:t,type:"below",effectList:i,ariaLabel:l}),u=Je(r,"card"),p=r.infos.map((e=>e.label)),d=p.length-1,f=p.map(((e,t)=>0===t||t===d?(0,Ue.K)("div",{key:t},e):null)),y={marginTop:"3px",display:"flex"};(0,ze.V8)(this.container)?y.marginRight=`${u}px`:y.marginLeft=`${u}px`;const m={width:`${s}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return(0,Ue.K)("div",{class:Fe.layerRow,key:"size-ramp-preview",styles:{display:"flex",flexDirection:"column"}},(0,Ue.K)("div",{class:this.classes(Fe.symbolContainer,Fe.sizeRampHorizontal),styles:{display:"flex",flexDirection:"row"}},r.infos.map(((e,t)=>(0,Ue.K)("div",{afterCreate:nt,bind:e.preview,class:Fe.symbol,key:t})))),c?(0,Ue.K)("div",{class:Fe.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:y},(0,Ue.K)("div",{afterCreate:nt,bind:c}),(0,Ue.K)("div",{afterCreate:nt,bind:h})):null,(0,Ue.K)("div",{class:Fe.layerInfo},(0,Ue.K)("div",{class:Fe.rampLabelsContainer,styles:m},f)))}_renderUnivariateColorSizeRamp(e,t,i){const{sizeRampElement:r,colorRampElement:n}=it(e,"horizontal");if(!r)return null;const s=Qe(r,"full",!1,"horizontal"),o=Xe(n,{width:et(r,"full",!1,"horizontal"),height:12,rampAlignment:"horizontal",opacity:t,type:"full",effectList:i,ariaLabel:this.messages?.previewColorRampAriaLabel}),a=Je(r,"card"),l=r.infos.length-1,c=r.infos.map(((e,t)=>0===t||t===l?(0,Ue.K)("div",{key:t},e.label):null)),h={marginTop:"3px",display:"flex"};(0,ze.V8)(this.container)?h.marginRight=`${a}px`:h.marginLeft=`${a}px`;const u={width:`${s}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return(0,Ue.K)("div",{class:Fe.layerRow,key:"size-ramp-preview",styles:{display:"flex",flexDirection:"column"}},(0,Ue.K)("div",{class:this.classes(Fe.symbolContainer,Fe.sizeRampHorizontal),styles:{display:"flex",flexDirection:"row"}},r.infos.map(((e,t)=>(0,Ue.K)("div",{afterCreate:nt,bind:e.preview,class:Fe.symbol,key:t})))),(0,Ue.K)("div",{class:Fe.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:h},(0,Ue.K)("div",{afterCreate:nt,bind:o})),(0,Ue.K)("div",{class:Fe.layerInfo},(0,Ue.K)("div",{class:Fe.rampLabelsContainer,styles:u},c)))}_renderLegendForElementInfo(e,t,i,r){const n=t.layer;if(e.type)return this._renderLegendForElement(e,t,r,!1,!0);const s=at(n,i),o=st(this.messages,e.label,!1)??"";if(e.preview){if(!e.symbol?.type.includes("simple-fill")){if(!e.label)return(0,Ue.K)("div",{afterCreate:nt,bind:e.preview,key:r});const t={[Fe.symbolCell]:this._hasIndicators};return(0,Ue.K)("div",{class:this.classes(Fe.layerRow,{[Fe.symbolRow]:this._hasIndicators}),key:r},(0,Ue.K)("div",{afterCreate:nt,bind:e.preview,class:this.classes(t)}),(0,Ue.K)("div",{class:this.classes(Fe.imageLabel,{[Fe.labelCell]:this._hasIndicators})},o))}let i=255,s=255,a=255,l=0,c=255,h=255,u=255,p=0;const d=e.symbol.color?.a,f=e.symbol.outline?.color?.a;d&&(i=e.symbol.color.r,s=e.symbol.color.g,a=e.symbol.color.b,l=e.symbol.color.a*n.opacity),f&&(c=e.symbol.outline.color.r,h=e.symbol.outline.color.g,u=e.symbol.outline.color.b,p=e.symbol.outline.color.a*n.opacity);const y=e.symbol.color?.isBright??!0,m=y?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)",g={background:d?`rgba(${i}, ${s}, ${a}, ${l})`:"none",color:y?"black":"white",textShadow:`-1px -1px 0 ${m},\n                                              1px -1px 0 ${m},\n                                              -1px 1px 0 ${m},\n                                              1px 1px 0 ${m}`,border:f?`1px solid rgba(${c}, ${h}, ${u}, ${p})`:"none",filter:(0,P.di)(t.effectList)??void 0};return(0,Ue.K)("div",{class:Fe.layerRow,key:r},(0,Ue.K)("div",{class:Fe.labelElement,styles:g},o))}if(e.src){const t=this._renderImage(e,n,s);return(0,Ue.K)("div",{class:Fe.layerRow,key:r},t,(0,Ue.K)("div",{class:Fe.imageLabel},o))}}_renderImage(e,t,i){const{label:r,src:n,opacity:s}=e,o={[Fe.imageryLayerStretchedImage]:i,[Fe.symbol]:!i},a={opacity:`${null!=s?s:t.opacity}`};return(0,Ue.K)("img",{alt:st(this.messages,r,!1),"aria-label":st(this.messages,r,!1),border:0,class:this.classes(o),height:e.height,src:n,styles:a,width:e.width})}_renderSizeRampLines(e){const t=e.infos,i=t[0],r=t[t.length-1],n=i.symbol,s=this._hasIndicators,o=(0,b.Lz)(i.size+i.outlineSize)*ft,a=(0,b.Lz)(r.size+r.outlineSize)*ft,l=s?o:o+50*ft,c=s?o/2+50*ft:o,h=function(e){if(e){if(e.type.includes("3d")){const t=e.symbolLayers?.length;if(!t)return;const i=e.symbolLayers.at(t-1).get("resource.primitive");return"triangle"===i||"cone"===i||"tetrahedron"===i}return"triangle"===e.style}}(n),u=function(e){if(e){if(e.type.includes("3d")){const t=e.symbolLayers?.length;if(!t)return;const i=e.symbolLayers.at(t-1),r=i.resource?.primitive;return"circle"===r||"cross"===r||"kite"===r||"sphere"===r||"cube"===r||"diamond"===r}{const t=e.style;return"circle"===t||"diamond"===t||"cross"===t}}}(n),p=document.createElement("canvas");p.width=l,p.height=c,p.style.width=p.width/ft+"px",p.style.height=p.height/ft+"px";const d=p.getContext("2d");if(s){d.beginPath();const e=0,t=0,i=l/2-a/2,r=c;d.moveTo(e,t),d.lineTo(i,r);const n=l,s=0,o=l/2+a/2,h=c;d.moveTo(n,s),d.lineTo(o,h)}else{d.beginPath();const e=0,t=c/2-a/2,i=l,r=0;d.moveTo(e,t),d.lineTo(i,r);const n=0,s=c/2+a/2,o=l,h=c;d.moveTo(n,s),d.lineTo(o,h)}return d.strokeStyle="#ddd",d.stroke(),(0,Ue.K)("div",{afterCreate:nt,bind:p,styles:s?{display:"flex",marginTop:`-${h?0:u?o/2:0}px`,marginBottom:`-${h?a:u?a/2:0}px`}:{display:"flex",marginRight:`-${h?0:u?o/2:0}px`,marginLeft:`-${h?0:u?a/2:0}px`}})}_renderSizeRamp(e,t){const i=e.infos,r=i[0].label,n=i[i.length-1].label;let s=i[0].preview,o=i[i.length-1].preview;const a=this._hasIndicators,l={"flex-direction":a?"column":"row-reverse"};s&&(s=s.cloneNode(!0),s.style.display="flex"),o&&(o=o.cloneNode(!0),o.style.display="flex");const c={opacity:null!=t?`${t}`:""};return(0,Ue.K)("div",{class:this.classes(Fe.layerRow,{[Fe.sizeRampRow]:a})},(0,Ue.K)("div",{class:Fe.rampLabel},a?r:n),(0,Ue.K)("div",{class:Fe.sizeRampContainer,styles:l},(0,Ue.K)("div",{afterCreate:nt,bind:s,class:Fe.sizeRampPreview,styles:c}),this._renderSizeRampLines(e),(0,Ue.K)("div",{afterCreate:nt,bind:o,class:Fe.sizeRampContainer,styles:c})),(0,Ue.K)("div",{class:Fe.rampLabel},a?n:r))}_getRampStopLabel(e,t){switch(t){case"heatmap-ramp":return this.messages[e.label];case"stretch-ramp":return lt(e,this.messages);default:return e.label}}_renderLegendForRamp(e,t,i){const r=e.infos,n=e.type,s="heatmap-ramp"===n,o=r.length-1,a=o>2&&!s?25*o:100,l=a+20,c=r.slice(0).reverse(),h=c.length-1,u=c.length%2!=0?c[c.length/2|0]:null,p=u&&(0,Ue.K)("div",{class:Fe.intervalSeparatorsContainer},(0,Ue.K)("div",{class:Fe.intervalSeparator},"|"),(0,Ue.K)("div",{class:Fe.rampLabel},this._getRampStopLabel(u,n))),d=[[{shape:{type:"path",path:"M0 12.5 L10 0 L10 25 Z"},fill:c[0].color,stroke:{width:0}},{shape:{type:"rect",x:10,y:0,width:a,height:25},fill:{type:"linear",x1:10,y1:0,x2:a+10,y2:0,colors:c.map(((e,t)=>({color:e.color,offset:s&&"ratio"in e?e.ratio:t/o})))},stroke:{width:0}},{shape:{type:"path",path:`M${a+10} 0 L${l} 12.5 L${a+10} 25 Z`},fill:c[h].color,stroke:{width:0}}]],f=(0,Re.d8)(d,l,25),y={filter:(0,P.di)(i)??void 0,opacity:null==t?void 0:`${t}`};return(0,Ue.K)("div",{class:Fe.layerRow,styles:{justifyContent:"center"}},(0,Ue.K)("div",{class:Fe.rampLabel},this._getRampStopLabel(c[0],n)),(0,Ue.K)("div",{class:Fe.symbolContainer},(0,Ue.K)("div",{styles:y},f),p),(0,Ue.K)("div",{class:Fe.rampLabel},this._getRampStopLabel(c[h],n)))}};(0,r._)([(0,s.MZ)()],yt.prototype,"activeLayerInfos",void 0),(0,r._)([(0,s.MZ)()],yt.prototype,"headingLevel",void 0),(0,r._)([(0,s.MZ)()],yt.prototype,"layout",void 0),(0,r._)([(0,s.MZ)(),(0,dt.G)("esri/widgets/Legend/t9n/Legend")],yt.prototype,"messages",void 0),(0,r._)([(0,s.MZ)(),(0,dt.G)("esri/t9n/common")],yt.prototype,"messagesCommon",void 0),(0,r._)([(0,s.MZ)({readOnly:!0})],yt.prototype,"type",void 0),(0,r._)([(0,s.MZ)()],yt.prototype,"view",void 0),(0,r._)([(0,pt.$)()],yt.prototype,"_selectSection",null),yt=(0,r._)([(0,a.$)("esri.widgets.Legend.styles.Card")],yt);const mt=yt,gt="esri-legend",vt={service:`${gt}__service`,label:`${gt}__service-label`,layer:`${gt}__layer`,groupLayer:`${gt}__group-layer`,groupLayerChild:`${gt}__group-layer-child`,layerTable:`${gt}__layer-table`,layerTableSizeRamp:`${gt}__layer-table--size-ramp`,layerChildTable:`${gt}__layer-child-table`,layerCaption:`${gt}__layer-caption`,layerBody:`${gt}__layer-body`,layerRow:`${gt}__layer-row`,layerCell:`${gt}__layer-cell`,layerInfo:`${gt}__layer-cell ${gt}__layer-cell--info`,imageryLayerStretchedImage:`${gt}__imagery-layer-image--stretched`,imageryLayerCellStretched:`${gt}__imagery-layer-cell--stretched`,imageryLayerInfoStretched:`${gt}__imagery-layer-info--stretched`,symbolContainer:`${gt}__layer-cell ${gt}__layer-cell--symbols`,symbol:`${gt}__symbol`,rampContainer:`${gt}__ramps`,sizeRamp:`${gt}__size-ramp`,colorRamp:`${gt}__color-ramp`,opacityRamp:`${gt}__opacity-ramp`,borderlessRamp:`${gt}__borderless-ramp`,rampTick:`${gt}__ramp-tick`,rampFirstTick:`${gt}__ramp-tick-first`,rampLastTick:`${gt}__ramp-tick-last`,rampLabelsContainer:`${gt}__ramp-labels`,rampLabel:`${gt}__ramp-label`,message:`${gt}__message`,univariateAboveAndBelowLabel:"esri-univariate-above-and-below-ramp__label"};var _t=i(533);const bt=`${gt}__`,wt={display:"flex",alignItems:"flex-start"},Mt={marginLeft:"3px"},Tt={display:"table-cell",verticalAlign:"middle"};let St=class extends l.A{constructor(e,t){super(e,t),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){const e=this.activeLayerInfos,t=e&&e.toArray().map((e=>this._renderLegendForLayer(e))).filter((e=>!!e));return(0,Ue.K)("div",null,t&&t.length?t:(0,Ue.K)("div",{class:vt.message},this.messages.noLegend))}_renderLegendForLayer(e){if(!e.ready)return null;const t=!!e.children.length,i=`${bt}${e.layer.uid}-version-${e.version}`,r=e.title?(0,ut.D)({level:this.headingLevel,class:this.classes(_t.D.heading,vt.label)},e.title):null;if(t){const t=e.children.map((e=>this._renderLegendForLayer(e))).toArray();return(0,Ue.K)("div",{class:this.classes(vt.service,vt.groupLayer),key:i},r,t)}{const t=e.legendElements;if(t&&!t.length)return null;const n=t.map((t=>this._renderLegendForElement(t,e.layer,e.effectList))).filter((e=>!!e));if(!n.length)return null;const s={[vt.groupLayerChild]:!!e.parent};return(0,Ue.K)("div",{class:this.classes(vt.service,s),key:i},r,(0,Ue.K)("div",{class:vt.layer},n))}}_renderLegendForElement(e,t,i,r){const n="color-ramp"===e.type,s="opacity-ramp"===e.type,o="size-ramp"===e.type;let a=null;if("symbol-table"===e.type||o){const r=e.infos.map((r=>this._renderLegendForElementInfo(r,t,i,o,e.legendType))).filter((e=>!!e));r.length&&(a=(0,Ue.K)("div",{class:vt.layerBody},r))}else"color-ramp"===e.type||"opacity-ramp"===e.type||"heatmap-ramp"===e.type||"stretch-ramp"===e.type?a=this._renderLegendForRamp(e,t.opacity):"relationship-ramp"===e.type?a=(0,je.p)(e,this.id,{opacity:t.opacity,effectList:i,ariaLabel:this.messages.previewRelationshipRampAriaLabel}):"pie-chart-ramp"===e.type?a=this._renderPieChartRamp(e):"univariate-above-and-below-ramp"===e.type?a=this._renderUnivariateAboveAndBelowRamp(e,t.opacity,i):"univariate-color-size-ramp"===e.type&&(a=this._renderUnivariateColorSizeRamp(e,t.opacity,i));if(!a)return null;const l=e.title;let c=null;if("string"==typeof l)c=l;else if(l){const e=st(this.messages,l,n||s);c=ot(0,n||s)&&l.title?`${l.title} (${e})`:e}const h=r?vt.layerChildTable:vt.layerTable,u=c?(0,Ue.K)("div",{class:vt.layerCaption},c):null,p={[vt.layerTableSizeRamp]:o||!r};return(0,Ue.K)("div",{class:this.classes(h,p)},u,a)}_renderPieChartRamp(e){return(0,Ue.K)("div",{afterCreate:nt,bind:e.preview})}_renderUnivariateAboveAndBelowRamp(e,t,i){const{sizeRampElement:r,colorRampElement:n}=tt(e,t);if(!r)return null;const s=this.messages?.previewColorRampAriaLabel,o=et(r,"above",!0),a=et(r,"below",!0),l=Xe(n,{width:12,height:o,rampAlignment:"vertical",opacity:t,type:"above",effectList:i,ariaLabel:s}),c=Xe(n,{width:12,height:a,rampAlignment:"vertical",opacity:t,type:"below",effectList:i,ariaLabel:s}),h=Je(r),u=r.infos.map((e=>e.label)),p=u.map(((e,t)=>{const i=2===t;return 0===t?(0,Ue.K)("div",{class:e?l?vt.univariateAboveAndBelowLabel:vt.rampLabel:void 0,key:t},e):i?(0,Ue.K)("div",null):null})),d=u.length-1,f=Math.floor(u.length/2),y=u.map(((e,t)=>t===f||t===d?(0,Ue.K)("div",{class:e?l?vt.univariateAboveAndBelowLabel:vt.rampLabel:void 0,key:t},e):null)),m={display:"table-cell",verticalAlign:"middle"},g={marginTop:`${h}px`},v={height:`${o}px`},_={height:`${a}px`};return(0,Ue.K)("div",{key:"univariate-above-and-below-ramp-preview",styles:wt},(0,Ue.K)("div",{class:vt.layerBody},r.infos.map(((e,t)=>(0,Ue.K)("div",{class:this.classes(vt.layerRow,vt.sizeRamp)},(0,Ue.K)("div",{afterCreate:nt,bind:e.preview,class:vt.symbol,styles:m}),l||t%2!=0?null:(0,Ue.K)("div",{class:vt.layerInfo},u[t]))))),l?(0,Ue.K)("div",{key:"color-ramp-preview",styles:g},(0,Ue.K)("div",{styles:Mt},(0,Ue.K)("div",{styles:Tt},(0,Ue.K)("div",{afterCreate:nt,bind:l,class:vt.rampContainer})),(0,Ue.K)("div",{styles:Tt},(0,Ue.K)("div",{class:vt.rampLabelsContainer,styles:v},p))),(0,Ue.K)("div",{styles:Mt},(0,Ue.K)("div",{styles:Tt},(0,Ue.K)("div",{afterCreate:nt,bind:c,class:vt.rampContainer})),(0,Ue.K)("div",{styles:Tt},(0,Ue.K)("div",{class:vt.rampLabelsContainer,styles:_},y)))):null)}_renderUnivariateColorSizeRamp(e,t,i){const{sizeRampElement:r,colorRampElement:n}=it(e);if(!r)return null;const s=Je(r),o=et(r,"full",!1),a=Xe(n,{width:12,height:o,rampAlignment:"vertical",opacity:t,type:"full",effectList:i,ariaLabel:this.messages?.previewColorRampAriaLabel}),l=r.infos.length-1,c=r.infos.map(((e,t)=>0===t||t===l?(0,Ue.K)("div",{class:e.label?n?vt.univariateAboveAndBelowLabel:vt.rampLabel:void 0,key:t},e.label):null)),h={display:"table-cell",verticalAlign:"middle"},u={marginTop:`${s}px`},p={height:`${o}px`};return(0,Ue.K)("div",{key:"univariate-above-and-below-ramp-preview",styles:wt},(0,Ue.K)("div",{class:vt.layerBody},r.infos.map((e=>(0,Ue.K)("div",{class:this.classes(vt.layerRow,vt.sizeRamp)},(0,Ue.K)("div",{afterCreate:nt,bind:e.preview,class:vt.symbol,styles:h}))))),(0,Ue.K)("div",{key:"color-ramp-preview",styles:u},(0,Ue.K)("div",{styles:Mt},(0,Ue.K)("div",{styles:Tt},(0,Ue.K)("div",{afterCreate:nt,bind:a,class:vt.rampContainer})),(0,Ue.K)("div",{styles:Tt},(0,Ue.K)("div",{class:vt.rampLabelsContainer,styles:p},c)))))}_renderLegendForRamp(e,t){const i=e.infos,r="opacity-ramp"===e.type,n="heatmap-ramp"===e.type,s="stretch-ramp"===e.type,o=e.preview,a=r?vt.opacityRamp:"";o.className=`${vt.colorRamp} ${a}`,null!=t&&(o.style.opacity=t.toString());const l=i.map((e=>(0,Ue.K)("div",{class:e.label?vt.rampLabel:void 0},n?this.messages[e.label]||e.label:s?lt(e,this.messages):e.label))),c={height:o.style.height};return(0,Ue.K)("div",{class:vt.layerRow},(0,Ue.K)("div",{class:vt.symbolContainer,styles:{width:"24px"}},(0,Ue.K)("div",{afterCreate:nt,bind:o,class:vt.rampContainer})),(0,Ue.K)("div",{class:vt.layerInfo},(0,Ue.K)("div",{class:vt.rampLabelsContainer,styles:c},l)))}_renderLegendForElementInfo(e,t,i,r,n){if(e.type)return this._renderLegendForElement(e,t,i,!0);let s=null;const o=at(t,n);if(e.preview?s=(0,Ue.K)("div",{afterCreate:nt,bind:e.preview,class:vt.symbol}):e.src&&(s=this._renderImage(e,t,o)),!s)return null;const a={[vt.imageryLayerInfoStretched]:o},l={[vt.imageryLayerInfoStretched]:o,[vt.sizeRamp]:!o&&r};return(0,Ue.K)("div",{class:vt.layerRow},(0,Ue.K)("div",{class:this.classes(vt.symbolContainer,l)},s),(0,Ue.K)("div",{class:this.classes(vt.layerInfo,a)},st(this.messages,e.label,!1)||""))}_renderImage(e,t,i){const{label:r,src:n,opacity:s}=e,o={[vt.imageryLayerStretchedImage]:i,[vt.symbol]:!i},a={opacity:`${null!=s?s:t.opacity}`};return(0,Ue.K)("img",{alt:st(this.messages,r,!1),"aria-label":st(this.messages,r,!1),border:0,class:this.classes(o),height:e.height,src:n,styles:a,width:e.width})}};(0,r._)([(0,s.MZ)()],St.prototype,"activeLayerInfos",void 0),(0,r._)([(0,s.MZ)()],St.prototype,"headingLevel",void 0),(0,r._)([(0,s.MZ)(),(0,dt.G)("esri/widgets/Legend/t9n/Legend")],St.prototype,"messages",void 0),(0,r._)([(0,s.MZ)({readOnly:!0})],St.prototype,"type",void 0),St=(0,r._)([(0,a.$)("esri.widgets.Legend.styles.Classic")],St);const At=St,Et={base:"esri-legend",widgetIcon:i(42929).T.layerList};let xt=class extends l.A{constructor(e,t){super(e,t),this.headingLevel=3,this.iconClass=Et.widgetIcon,this.icon=null,this.messages=null,this.style=new At,this.viewModel=new Oe}initialize(){this.addHandles([(0,n.on)((()=>this.view),"resize",(()=>this.scheduleRender())),(0,n.on)((()=>this.activeLayerInfos),"change",(()=>this._refreshActiveLayerInfos(this.activeLayerInfos))),(0,n.wB)((()=>this.headingLevel),(e=>{const{style:t}=this;t&&(t.headingLevel=e)})),(0,n.wB)((()=>this.style),((e,t)=>{t&&e!==t&&t.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,"card"===e.type&&(e.view=this.view),e.headingLevel=this.headingLevel)}),n.Vh)])}get activeLayerInfos(){return this.viewModel.activeLayerInfos}set activeLayerInfos(e){this.viewModel.activeLayerInfos=e}get basemapLegendVisible(){return this.viewModel.basemapLegendVisible}set basemapLegendVisible(e){this.viewModel.basemapLegendVisible=e}get groundLegendVisible(){return this.viewModel.groundLegendVisible}set groundLegendVisible(e){this.viewModel.groundLegendVisible=e}get hideLayersNotInCurrentView(){return this.viewModel.hideLayersNotInCurrentView}set hideLayersNotInCurrentView(e){this.viewModel.hideLayersNotInCurrentView=e}get keepCacheOnDestroy(){return this.viewModel.keepCacheOnDestroy}set keepCacheOnDestroy(e){this.viewModel.keepCacheOnDestroy=e}get respectLayerVisibility(){return this.viewModel.respectLayerVisibility}set respectLayerVisibility(e){this.viewModel.respectLayerVisibility=e}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(e){this.viewModel.layerInfos=e}castStyle(e){if(e instanceof mt||e instanceof At)return e;if("string"==typeof e)return"card"===e?new mt:new At;if(e&&"string"==typeof e.type){const t={...e};return delete t.type,new("card"===e.type?mt:At)(t)}return new At}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return(0,Ue.K)("div",{class:this.classes(Et.base,_t.D.widget,this.style instanceof At?_t.D.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){e.forEach((e=>{this.removeHandles(`version_${e.layer.uid}`),this._renderOnActiveLayerInfoChange(e)})),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){const t=(0,n.wB)((()=>e.version),(()=>this.scheduleRender()));this.addHandles(t,`version_${e.layer.uid}`);const i=(0,n.on)((()=>e.children),"change",(()=>e.children.forEach((e=>this._renderOnActiveLayerInfoChange(e)))),n.Vh);this.addHandles(i,`version_${e.layer.uid}`),e.children.forEach((e=>this._renderOnActiveLayerInfoChange(e)))}};(0,r._)([(0,s.MZ)()],xt.prototype,"activeLayerInfos",null),(0,r._)([(0,s.MZ)()],xt.prototype,"basemapLegendVisible",null),(0,r._)([(0,s.MZ)()],xt.prototype,"groundLegendVisible",null),(0,r._)([(0,s.MZ)()],xt.prototype,"headingLevel",void 0),(0,r._)([(0,s.MZ)()],xt.prototype,"hideLayersNotInCurrentView",null),(0,r._)([(0,s.MZ)()],xt.prototype,"keepCacheOnDestroy",null),(0,r._)([(0,s.MZ)()],xt.prototype,"respectLayerVisibility",null),(0,r._)([(0,s.MZ)()],xt.prototype,"iconClass",void 0),(0,r._)([(0,s.MZ)()],xt.prototype,"icon",void 0),(0,r._)([(0,s.MZ)()],xt.prototype,"label",null),(0,r._)([(0,s.MZ)()],xt.prototype,"layerInfos",null),(0,r._)([(0,s.MZ)(),(0,dt.G)("esri/widgets/Legend/t9n/Legend")],xt.prototype,"messages",void 0),(0,r._)([(0,s.MZ)()],xt.prototype,"style",void 0),(0,r._)([(0,o.w)("style")],xt.prototype,"castStyle",null),(0,r._)([(0,s.MZ)()],xt.prototype,"view",null),(0,r._)([(0,s.MZ)()],xt.prototype,"viewModel",void 0),xt=(0,r._)([(0,a.$)("esri.widgets.Legend")],xt);const It=xt},51695:(e,t,i)=>{"use strict";i.d(t,{p:()=>p});var r=i(67668),n=i(54866),s=i(33510),o=i(2110);const a="esri-relationship-ramp",l=`${a}--diamond`,c=`${a}--square`,h="http://www.w3.org/2000/svg",u={diamondContainer:`${l}__container`,diamondLeftCol:`${l}__left-column`,diamondRightCol:`${l}__right-column`,diamondMidCol:`${l}__middle-column`,diamondMidColLabel:`${l}__middle-column--label`,diamondMidColRamp:`${l}__middle-column--ramp`,squareTable:`${c}__table`,squareTableRow:`${c}__table-row`,squareTableCell:`${c}__table-cell`,squareTableLabel:`${c}__table-label`,squareTableLabelLeftBottom:`${c}__table-label--left-bottom`,squareTableLabelRightBottom:`${c}__table-label--right-bottom`,squareTableLabelLeftTop:`${c}__table-label--left-top`,squareTableLabelRightTop:`${c}__table-label--right-top`};function p(e,t,i={}){const{focus:a,labels:l}=e,c=!!a,p=function(e,t,i={}){const{focus:s,numClasses:a,colors:l,rotation:c}=e,{opacity:p,effectList:f,ariaLabel:y}=i,m=i.size??60,g=!!s,v=Math.sqrt(m**2+m**2)+(g?0:5),_=[],b=[],w=[],M=(m||75)/a;for(let e=0;e<a;e++){const t=e*M;for(let i=0;i<a;i++){const n=i*M,s=(0,r.aH)(l[e][i]),o=(0,r.VB)(null),a={type:"rect",x:n,y:t,width:M,height:M},c=(0,r.CG)(s);c&&_.push(c);const h=(0,r.Ie)(a,s.fill,o,null);h&&b.push(h),w.push((0,r.UX)(a))}}let T=null;g||(T="margin: -15px -15px -18px -15px");const S=d("left",s,t),A=d("right",s,t),E=(0,r.Ru)(w),x=(0,r.G4)(E,v,v,0,!1,c,!1),I=(0,r.G4)(E,v,v,0,!1,g?-45:null,!1),C={filter:(0,n.di)(f)??void 0,opacity:null==p?"":`${p}`};return(0,o.K)("div",{class:g?u.diamondMidColRamp:u.squareTableCell,styles:C},(0,o.K)("svg",{"aria-labelledBy":y,focusable:!1,height:v,role:"image",style:T,width:v,xmlns:h},(0,o.K)("defs",null,(0,o.K)("marker",{id:`${t}_arrowStart`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"5",refY:"5"},(0,o.K)("polyline",{fill:"none",points:"0,0 5,5 0,10",stroke:"#555555","stroke-width":"1"})),(0,o.K)("marker",{id:`${t}_arrowEnd`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"0",refY:"5"},(0,o.K)("polyline",{fill:"none",points:"5,0 0,5 5,10",stroke:"#555555","stroke-width":"1"})),_),(0,o.K)("g",{transform:x},b),(0,o.K)("g",{transform:I},(0,o.K)("line",{fill:"none","marker-end":S.markerEnd,"marker-start":S.markerStart,stroke:"#555555","stroke-width":"1",x1:-10,x2:-10,y1:m-15,y2:15}),(0,o.K)("line",{fill:"none","marker-end":A.markerEnd,"marker-start":A.markerStart,stroke:"#555555","stroke-width":"1",x1:15,x2:m-15,y1:m+10,y2:m+10}))))}(e,t,i),f=(0,s.V8)();return c?(0,o.K)("div",{class:u.diamondContainer,styles:{justifyContent:"center"}},(0,o.K)("div",{class:u.diamondLeftCol},f?l.right:l.left),(0,o.K)("div",{class:u.diamondMidCol},(0,o.K)("div",{class:u.diamondMidColLabel},l.top),p,(0,o.K)("div",{class:u.diamondMidColLabel},l.bottom)),(0,o.K)("div",{class:u.diamondRightCol},f?l.left:l.right)):(0,o.K)("div",{class:u.squareTable},(0,o.K)("div",{class:u.squareTableRow},(0,o.K)("div",{class:(0,s.Ly)(u.squareTableCell,u.squareTableLabel,u.squareTableLabelRightBottom)},f?l.top:l.left),(0,o.K)("div",{class:u.squareTableCell}),(0,o.K)("div",{class:(0,s.Ly)(u.squareTableCell,u.squareTableLabel,u.squareTableLabelLeftBottom)},f?l.left:l.top)),(0,o.K)("div",{class:u.squareTableRow},(0,o.K)("div",{class:u.squareTableCell}),p,(0,o.K)("div",{class:u.squareTableCell})),(0,o.K)("div",{class:u.squareTableRow},(0,o.K)("div",{class:(0,s.Ly)(u.squareTableCell,u.squareTableLabel,u.squareTableLabelRightTop)},f?l.right:l.bottom),(0,o.K)("div",{class:u.squareTableCell}),(0,o.K)("div",{class:(0,s.Ly)(u.squareTableCell,u.squareTableLabel,u.squareTableLabelLeftTop)},f?l.bottom:l.right)))}function d(e,t,i){const r=`${i}_arrowStart`,n=`${i}_arrowEnd`,s="left"===e,o={markerStart:null,markerEnd:null};switch(t){case"HL":s?o.markerStart=`url(#${n})`:o.markerEnd=`url(#${r})`;break;case"LL":o.markerStart=`url(#${n})`;break;case"LH":s?o.markerEnd=`url(#${r})`:o.markerStart=`url(#${n})`;break;default:o.markerEnd=`url(#${r})`}return o}},51573:(e,t,i)=>{"use strict";i.d(t,{G9:()=>h,getRampStops:()=>a,vt:()=>u,y0:()=>c});var r=i(93814),n=i(64804);const s=new r.A([64,64,64]);function o(e,t){const i=[],r=e.length-1;return 5===e.length?i.push(0,2,4):i.push(0,r),e.map(((e,s)=>i.includes(s)?(0,n.Dd)(e,s,r,t):null))}async function a(e,t,r){let n=!1,s=[],a=[];if(e.stops){const t=e.stops;s=t.map((e=>e.value)),n=t.some((e=>!!e.label)),n&&(a=t.map((e=>e.label)))}const c=s[0],h=s[s.length-1];if(null==c&&null==h)return null;const u=n?null:o(s,r);return(await Promise.all(s.map((async(r,s)=>({value:r,color:"opacity"===e.type?await l(r,e,t):(await Promise.resolve().then(i.bind(i,37525))).getColor(e,r),label:n?a[s]:u?.[s]??""}))))).reverse()}async function l(e,t,n){const o=new r.A(n??s),a=(await Promise.resolve().then(i.bind(i,37525))).getOpacity(t,e);return null!=a&&(o.a=a),o}function c(e){let t=!1,i=[],r=[];i=e.map((e=>e.value)),t=e.some((e=>!!e.label)),t&&(r=e.map((e=>e.label??"")));const n=i[0],s=i[i.length-1];if(null==n&&null==s)return null;const a=t?null:o(i);return i.map(((i,n)=>({value:i,color:h(i,e),label:t?r[n]:a?.[n]??""}))).reverse()}function h(e,t){const{startIndex:i,endIndex:n,weight:s}=function(e,t){let i=0,r=t.length-1;return t.some(((t,n)=>e<t.value?(r=n,!0):(i=n,!1))),{startIndex:i,endIndex:r,weight:(e-t[i].value)/(t[r].value-t[i].value)}}(e,t);if(i===n)return t[i].color;const o=r.A.blendColors(t[i].color,t[n].color,s);return new r.A(o)}function u(e,t){let i=[];if(e&&"multipart"===e.type)e.colorRamps.reverse().forEach(((n,s)=>{0===s?i.push({value:t.max,color:new r.A(n.toColor),label:"high"}):i.push({value:null,color:new r.A(n.toColor),label:""}),s===e.colorRamps.length-1?i.push({value:t.min,color:new r.A(n.fromColor),label:"low"}):i.push({value:null,color:new r.A(n.fromColor),label:""})}));else{let n,s;e&&"algorithmic"===e.type?(n=e.fromColor,s=e.toColor):(n=[0,0,0,1],s=[255,255,255,1]),i=[{value:t.max,color:new r.A(s),label:"high"},{value:t.min,color:new r.A(n),label:"low"}]}return i}},20752:(e,t,i)=>{"use strict";i.d(t,{Y:()=>n});var r=i(39991);function n(e){if(!e.colorStops)return[];const t=[...e.colorStops].filter((e=>e.color?.a>0));let i=t.length-1;if(t&&t[0]){const e=t[i];e&&1!==e.ratio&&(t.push(new r.A({ratio:1,color:e.color})),i++)}return t.map(((t,r)=>{let n="";return 0===r?n=e.legendOptions?.minLabel||"low":r===i&&(n=e.legendOptions?.maxLabel||"high"),{color:t.color,label:n,ratio:t.ratio}})).reverse()}},92966:(e,t,i)=>{"use strict";i.d(t,{Jr:()=>c,zv:()=>h}),i(15565);var r=i(67175),n=i(7448);const s={HH:315,HL:45,LL:135,LH:225},o={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function a(e){if(!e)return;const{type:t}=e;if(t.includes("3d"))return(0,n.R0)(e.symbolLayers.at(0));if("simple-line"===t){const t=(0,r.$4)(e);return t&&t.color}if("simple-marker"===e.type&&("x"===e.style||"cross"===e.style)){const t=(0,r.$4)(e);return t&&t.color}return(0,r.eH)(e)}function l(e,t){const i=t.HH.label,r=t.LL.label,n=t.HL.label,s=t.LH.label;switch(e){case"HH":default:return{top:i,bottom:r,left:n,right:s};case"HL":return{top:n,bottom:s,left:r,right:i};case"LL":return{top:r,bottom:i,left:s,right:n};case"LH":return{top:s,bottom:n,left:i,right:r}}}function c(e){const{focus:t,infos:i,numClasses:r}=e,n=o[r],s={};i.forEach((e=>{s[e.value]={label:e.label,fill:a(e.symbol)}}));const c=[];for(let e=0;e<r;e++){const t=[];for(let i=0;i<r;i++){const r=s[n[e][i]];t.push(r.fill)}c.push(t)}return{type:"relationship-ramp",numClasses:r,focus:t,colors:c,labels:l(t,s),rotation:h(t)}}function h(e){let t=s[e];return e&&null==t&&(t=s.HH),t||0}},83059:(e,t,i)=>{"use strict";i.d(t,{O:()=>d,getRampStops:()=>_,m:()=>p});var r=i(93814),n=i(3438),s=i(29604),o=i(93611),a=i(54866),l=i(64804),c=(i(33510),i(56931)),h=i(68231),u=i(24826);const p=30,d=12,f=[255,255,255],y=[200,200,200],m=[128,128,128],g=20,v=5;async function _(e,t,r,n,o,c,h){const u=t.legendOptions,p=u?.customValues,d=h||await M(e,r),f=t.stops,y=!!d,m=!!p,g=null!=t.minSize&&null!=t.maxSize,v=f&&f.length>1,_=!!t.target;if(!y||!m&&!(g||v&&!_))return;const T=(0,a.$d)(d);let S=!1,C=null,k=null;C=T&&!v?(0,s.LI)([t.minDataValue,t.maxDataValue]):p??await async function(e,t,r,n){const o=(await Promise.resolve().then(i.bind(i,37525))).getSizeRangeAtScale(e,r,n),a=o&&A(o);if(!o||!a)return;let l=a.map((t=>function(e,t,i){const r=i.minSize,n=i.maxSize,s=t.minDataValue,o=t.maxDataValue;let a;return a=e<=r?s:e>=n?o:(e-r)/(n-r)*(o-s)+s,a}(t,e,o)));l=(0,s.LI)(l);for(let i=1;i<l.length-1;i++){const s=await E(e,t,l[i],l[i-1],r,n);s&&(l[i]=s[0],a[i]=s[1])}return l}(t,d,n,o?.type);const N=e?.authoringInfo,L="univariate-color-size"===N?.type,O=L&&"above-and-below"===N?.univariateTheme;if(!C&&v&&(C=f.map((e=>e.value)),S=f.some((e=>!!e.label)),"flow"===e.type&&(C=(0,s.LI)(C)),S&&(k=f.map((e=>e.label)))),T&&null!=C&&C?.length>2&&!O&&(C=[C[0],C[C.length-1]]),!C)return null;L&&5!==C?.length&&(C=A({minSize:C[0],maxSize:C[C.length-1]}));const R=T?b(e,C):null,P=(0,a.k_)(d),D=S?null:function(e,t){const i=e.length-1;return e.map(((e,r)=>(0,l.Dd)(e,r,i,t)))}(C,c);return(await Promise.all(C.map((async(i,r)=>{const s=T?R[r]:await x(t,d,i,n,o?.type);return{value:i,symbol:I(O&&"class-breaks"===e.type?w(e,r):d,s),label:S?k[r]:D[r],size:s,outlineSize:P}})))).reverse()}function b(e,t){const i=e?.authoringInfo,r="univariate-color-size"===i?.type;let n=[d,p];if(r){const e=t[0],i=t[t.length-1],r=d,s=p;n=t.map((t=>r+(t-e)/(i-e)*(s-r)))}return r&&"below"===i?.univariateTheme&&n.reverse(),n}function w(e,t){const i=e.classBreakInfos,r=i.length,n=r<2||!(t>=2)?i[0].symbol.clone():i[r-1].symbol.clone();return e.visualVariables.some((e=>"color"===e.type))&&(n.type.includes("3d")?T(n):S(n)),n}async function M(e,t){if("flow"===e.type)return(0,l.Zo)(e,t);if("pie-chart"===e.type)return new h.A({color:null,outline:e.outline?.width?e.outline:new u.A});let i=null,r=null;if("simple"===e.type)i=e.symbol;else if("class-breaks"===e.type){const t=e.classBreakInfos;i=t&&t[0]&&t[0].symbol,r=t.length>1}else if("unique-value"===e.type){const t=e.uniqueValueInfos;i=t?.[0]?.symbol,r=null!=t&&t.length>1}return!i||function(e){return!!e&&((0,n.wk)(e)?!!e.symbolLayers&&e.symbolLayers.some((e=>e&&"fill"===e.type)):e.type.includes("fill"))}(i)?null:(i=i.clone(),(t||r)&&(i.type.includes("3d")?T(i):S(i)),i)}function T(e){"line-3d"===e.type?e.symbolLayers.forEach((e=>{e.material={color:m}})):e.symbolLayers.forEach((e=>{"icon"!==e.type||e.resource?.href?e.material={color:y}:(e.material={color:f},e.outline={color:m,size:1.5})}))}function S(e){const t=(0,c.g4)();if("cim"===e.type)(0,o.Fe)(e,new r.A(y));else if(e.type.includes("line"))e.color=m;else if(e.color=t?m:f,"simple-marker"===e.type)if(e.outline){const t=e.outline?.color?.toHex();"#ffffff"===t&&(e.outline.color=m)}else e.outline={color:m,width:1.5}}function A(e){const t=e.minSize,i=e.maxSize,r=v,n=(i-t)/(r-1),s=[];for(let e=0;e<r;e++)s.push(t+n*e);return s}async function E(e,t,i,r,n,o){const a=await x(e,t,i,n,o),l=await x(e,t,r,n,o),c=(0,s.lc)(i),h=c.fractional,u=g;let p=c.integer,d=null,f=null;i>0&&i<1&&(d=10**h,p=(0,s.lc)(i*=d).integer);for(let r=p-1;r>=0;r--){const c=10**r;let h=Math.floor(i/c)*c,p=Math.ceil(i/c)*c;null!=d&&(h/=d,p/=d);let y=(h+p)/2;[,y]=(0,s.LI)([h,y,p],{indexes:[1]});const m=await x(e,t,h,n,o),g=await x(e,t,p,n,o),v=await x(e,t,y,n,o),_=(0,s.u5)(a,m,l,null),b=(0,s.u5)(a,g,l,null),w=(0,s.u5)(a,v,l,null);let M=_.previous<=u,T=b.previous<=u;if(M&&T&&(_.previous<=b.previous?(M=!0,T=!1):(T=!0,M=!1)),M?f=[h,m]:T?f=[p,g]:w.previous<=u&&(f=[y,v]),f)break}return f}async function x(e,t,r,n,s){const{getSize:o}=await Promise.resolve().then(i.bind(i,37525));return o(e,r,{scale:n,view:s,shape:"simple-marker"===t.type?t.style:null})}function I(e,t){const i=e.clone();if((0,n.wk)(i))(0,a.$d)(i)||i.symbolLayers.forEach((e=>{"fill"!==e.type&&(e.size=t)}));else if(function(e){return"esri.symbols.SimpleMarkerSymbol"===e.declaredClass}(i))i.size=t;else if(function(e){return"esri.symbols.PictureMarkerSymbol"===e.declaredClass}(i)){const e=i.width,r=i.height;i.height=t,i.width=t*(e/r)}else!function(e){return"esri.symbols.SimpleLineSymbol"===e.declaredClass}(i)?function(e){return"esri.symbols.TextSymbol"===e.declaredClass}(i)&&i.font&&(i.font.size=t):i.width=t;return i}},64804:(e,t,i)=>{"use strict";i.d(t,{Dd:()=>h,E2:()=>u,Zo:()=>d,getDateFormatOptions:()=>y,kC:()=>c,l5:()=>l,sx:()=>f,uM:()=>p}),i(3438);var r=i(11895),n=i(46227),s=i(29604),o=i(74274),a=i(24826);const l="<",c=">";function h(e,t,i,r){let n="";return 0===t?n=`${l} `:t===i&&(n=`${c} `),n+(r?(0,o.i0)(e,r):(0,s.GP)(e))}const u=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function p(e){if(!("visualVariables"in e)||!e.visualVariables)return null;const t=e.visualVariables.find((e=>"color"===e.type));if(!t)return null;let r=null,n=null;if(t.stops){if(1===t.stops.length)return t.stops[0].color;r=t.stops[0].value,n=t.stops[t.stops.length-1].value}const s=null!=r&&null!=n?r+(n-r)/2:0,{getColor:o}=await Promise.resolve().then(i.bind(i,37525));return o(t,s)??null}async function d(e,t){const i=e.trailCap,r=e.trailWidth||1,n=t||await p(e)||e.color;return new a.A({cap:i,color:n,width:r})}function f(e){return null!=e&&"object"==typeof e&&"min"in e&&"max"in e}function y(e,t,i){const s=function(e,t){if(!t.field)return null;if("featureReduction"in e)switch(e.featureReduction?.type){case"cluster":case"binning":{const i=e.featureReduction.fields.find((({name:e})=>e.toLowerCase()===t.field.toLowerCase()));return i&&"getField"in e?e.getField(i.onStatisticField):null}}return"getField"in e?e.getField?.(t.field):null}(e,t);if(!s||!(0,o.fs)(s)&&!(0,n.OH)(s))return null;let a=function(e,t){const i="popupTemplate"in e?e.popupTemplate?.fieldInfos:null;if(i?.length&&t)return i.find((e=>e.fieldName?.toLowerCase()===t.toLowerCase()))?.format?.dateFormat}(e,s.name);if(!a&&"date"===s.type){let e=0,i=0;t.stops?(e=t.stops?.at(0)?.value??e,i=t.stops?.at(-1)?.value??i):"minDataValue"in t&&"maxDataValue"in t&&(e=t.minDataValue??e,i=t.maxDataValue??i),a=i-e>2*r.vf.days?"short-date":"short-date-short-time"}return{fieldType:s.type,format:a,timeZoneOptions:{layerTimeZone:"preferredTimeZone"in e?e.preferredTimeZone:null,viewTimeZone:i,datesInUnknownTimezone:"datesInUnknownTimezone"in e&&e.datesInUnknownTimezone}}}},52239:(e,t,i)=>{"use strict";i.d(t,{A:()=>z});var r=i(82392),n=(i(39553),i(61090)),s=i(28948),o=i(57888),a=i(92840),l=(i(6273),i(15565)),c=i(80861),h=i(57725),u=i(71004),p=i(37623),d=i(61985),f=i(1874),y=i(81482),m=i(77380),g=i(26325),v=i(99595),_=i(52140),b=i(95665);i(58133);const w={handleInterceptedEvent:(e,t,i,r)=>(e.scheduleRender(),t.properties[`on${r.type}`].apply(t.properties.bind||i,[r]))},M={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{"-"===t.charAt(0)?e.style.setProperty(t,i):e.style[t]=i}},T=(e,t,i=!1)=>{let r=e;return t.forEach(((e,n)=>{const s=r?.children?((e,t)=>e.find(t))(r.children,(t=>t.domNode===e)):void 0;i&&!s&&n!==t.length-1||(r=s)})),r};var S=i(9737),A=i(38031),E=i(42929),x=i(59734);const I=new Set;var C,k=i(58627),N=i(33510),L=i(4631),O=i(10709);let R=0;const P={widgetIcon:E.T.checkboxUnchecked};function D(e,t){for(const i in t)null!=e[i]&&("object"==typeof e[i]&&"object"==typeof t[i]?D(e[i],t?.[i]):e[i]=t[i]);return e}const F=(e=>{let t;const i={...w,...e},r=(s=i,{...M,...s}),n=r.performanceLogger;var s;let o,a=!0,l=!1;const c=[],h=[],u=(e,s,o)=>{let a;r.eventHandlerInterceptor=(e,r,s,o)=>function(e){let r;n("domEvent",e);const s=((e,t)=>{const i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i})(e.currentTarget,a.domNode),o=s.some((e=>customElements.get(e?.tagName?.toLowerCase())));if(e.eventPhase!==Event.CAPTURING_PHASE&&o){const t=e.composedPath(),i=t.slice(t.indexOf(e.currentTarget),t.indexOf(a.domNode)).reverse();r=T(a.getLastRender(),i,!0)}else s.reverse(),r=T(a.getLastRender(),s);let l;return r&&(l=i.handleInterceptedEvent(t,r,this,e)),n("domEventProcessed",e),l},i.postProcessProjectionOptions?.(r);const l=o();a=e(s,l,r),r.eventHandlerInterceptor=void 0,c.push(a),h.push(o),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(a,l)};let p=()=>{if(o=void 0,a){a=!1,n("renderStart",void 0);for(let e=0;e<c.length;e++){const t=h[e]();n("rendered",void 0),c[e].update(t),n("patched",void 0)}n("renderDone",void 0),a=!0}};return i.modifyDoRenderImplementation&&(p=i.modifyDoRenderImplementation(p,c,h)),t={renderNow:p,scheduleRender:()=>{o||l||(o=requestAnimationFrame(p))},stop:()=>{o&&(cancelAnimationFrame(o),o=void 0),l=!0},resume:()=>{l=!1,a=!0,t.scheduleRender()},append:(e,t)=>{u(b.t.append,e,t)},insertBefore:(e,t)=>{u(b.t.insertBefore,e,t)},merge:(e,t)=>{u(b.t.merge,e,t)},replace:(e,t)=>{u(b.t.replace,e,t)},detach:e=>{for(let t=0;t<h.length;t++)if(h[t]===e)return h.splice(t,1),c.splice(t,1)[0];throw new Error("renderFunction was not found")}},t})({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,i=/capture$/i;e.eventHandlerInterceptor=(e,r,n,s)=>{const o=t?.(e,r,n,s),a=i.test(e);if(!((e=e.replace(i,"")).toLowerCase()in n)||a){const t=e[2].toLowerCase()+e.slice(3),i=e=>o?.call(n,e);n.addEventListener(t,i,a);const r=()=>n.removeEventListener(t,i,a),l=s.afterRemoved;s.afterRemoved=e=>{l?.(e),r()}}return o}},handleInterceptedEvent(e,t,i,r){const{eventPhase:n,type:s}=r,o=n===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const l=t.properties;(l&&a in l||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,l&&a in l))&&((0,k.Sh)(),e.scheduleRender(),l[a].call(l.bind||i,r))}});let j=!1,Z=class extends((0,u.g)(o.A.EventedAccessor)){constructor(e,t){super(e,t),this._attached=!1,this._projector=F,this._readyForTrueRender=!1,this.iconClass=P.widgetIcon,this.icon=null,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=(0,p.sg)((async()=>{if(this._messageBundleProps?.length){const e=await Promise.allSettled(this._messageBundleProps.map((async({bundlePath:e,propertyName:t})=>{if(this.destroyed)return;let i=await(0,O.ud)(e);this.uiStrings&&Object.keys(this.uiStrings)&&(i=D((0,l.o8)(i),this.uiStrings)),this[t]=i})));if(this.destroyed)return;for(const t of e)"rejected"===t.status&&c.A.getLogger(this).error("widget-intl:locale-error",this.declaredClass,t.reason)}await this.loadLocale()})),(0,S.V)();const i="esri-widget-uid-"+(0,f.lk)(),r=this.render.bind(this);this._trackingTarget=new _.r((()=>{this.autoRenderingEnabled&&this.scheduleRender()}));const n=()=>{if(!this._readyForTrueRender||this.destroyed)return null;const e=r();let t=e.properties;t||(e.properties=t={});const{key:n}=t;if(n||(t.key=i),(0,A.b)(e.vnodeSelector)){if(!this.visible)return{vnodeSelector:"div",properties:{key:`${i}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}}else this.visible?t.styles||(t.styles={}):(t.class="",t.styles={display:"none"}),t.styles.display||(t.styles.display="");let s=0;return e.children?.forEach((e=>{if((0,A.b)(e.vnodeSelector))return;let{properties:t}=e;t||(e.properties=t={}),t.key||(t.key=`${this.id}--${s++}`)})),(0,A.d)(this,e)};this.render=()=>{if(j)return n();let e=(0,k.rE)(this)??null;if(e)return e;this._trackingTarget.clear(),j=!0;try{e=(0,v.a)(this._trackingTarget,n)}catch(e){throw console.error(e),e}finally{j=!1}return e&&(0,k.$U)(this,e),e};const s=this.beforeFirstRender();var o;s?this._resourcesFetch=s.then((()=>{this._readyForTrueRender=!0,this._postInitialize()})):(this._resourcesFetch=Promise.resolve().then((()=>{this._postInitialize()})),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),o=this._resourcesFetch,I.add(o),o.finally((()=>I.delete(o)))}normalizeCtorArgs(e,t){const i={...e};return t&&(i.container=t),i}postInitialize(){}beforeFirstRender(){const e=this.loadDependencies();return this._messageBundleProps?.length||e?Promise.all([e,this._loadLocale()]).then((()=>{})).catch(p.jH):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||((0,h.pR)(this._trackingTarget),(0,h.pR)(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,(0,k.Qw)(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return(0,s.$H)(e)}get domNode(){return this.container}set domNode(e){this.container=e}get id(){return this._get("id")||this.container?.id||Date.now().toString(16)+"-widget-"+R++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(C=x.x,x.D)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||((0,k.Qw)(this),this._projector.scheduleRender())}own(e){(0,n.eO)(c.A.getLogger(this),"`Widget.own()` is deprecated in favor of 'Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(e)}classes(...e){return N.Ly.apply(this,e)}renderNow(){(0,k.Qw)(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this.addHandles((0,d.wB)((()=>this.viewModel),((e,t)=>{t&&this.removeHandles("delegated-events"),e&&(0,a.wb)(e)&&this.addHandles(this._delegatedEventNames.map((t=>(0,a.on)(e,t,(e=>{this.emit(t,e)})))),"delegated-events")}),d.pc)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(p.jH),this.scheduleRender()};this.addHandles([(0,L.oQ)(e),(0,d.wB)((()=>this.uiStrings),e),(0,d.z7)((()=>this.container),(e=>{this.destroyed||this._attach(e)}),{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){this._attached&&(this._projector.detach(this.render),this._attached=!1),e?.parentNode?.removeChild(e)}};Z[C]=!0,(0,r._)([(0,y.MZ)()],Z.prototype,"_readyForTrueRender",void 0),(0,r._)([(0,y.MZ)({value:null})],Z.prototype,"container",null),(0,r._)([(0,m.w)("container")],Z.prototype,"castContainer",null),(0,r._)([(0,y.MZ)()],Z.prototype,"iconClass",void 0),(0,r._)([(0,y.MZ)()],Z.prototype,"icon",void 0),(0,r._)([(0,y.MZ)()],Z.prototype,"id",null),(0,r._)([(0,y.MZ)()],Z.prototype,"label",null),(0,r._)([(0,y.MZ)()],Z.prototype,"renderable",null),(0,r._)([(0,y.MZ)()],Z.prototype,"uiStrings",void 0),(0,r._)([(0,y.MZ)()],Z.prototype,"viewModel",void 0),(0,r._)([(0,y.MZ)({value:!0})],Z.prototype,"visible",null),(0,r._)([(0,y.MZ)()],Z.prototype,"key",void 0),(0,r._)([(0,y.MZ)()],Z.prototype,"children",void 0),(0,r._)([(0,y.MZ)()],Z.prototype,"afterCreate",void 0),(0,r._)([(0,y.MZ)()],Z.prototype,"afterUpdate",void 0),(0,r._)([(0,y.MZ)()],Z.prototype,"afterRemoved",void 0),Z=(0,r._)([(0,g.$)("esri.widgets.Widget")],Z);const z=Z},75e3:(e,t,i)=>{"use strict";i.d(t,{R:()=>a});var r=i(82392),n=i(57725),s=i(81482),o=(i(6273),i(80861),i(67498),i(26325));const a=e=>{let t=class extends e{constructor(...e){super(...e),this.goToOverride=null,this.view=null}callGoTo(e){const{view:t}=this;return(0,n.Lw)(t),this.goToOverride?this.goToOverride(t,e):t.goTo(e.target,e.options)}};return(0,r._)([(0,s.MZ)()],t.prototype,"goToOverride",void 0),(0,r._)([(0,s.MZ)()],t.prototype,"view",void 0),t=(0,r._)([(0,o.$)("esri.widgets.support.GoTo")],t),t}},34017:(e,t,i)=>{"use strict";i.d(t,{D:()=>a,S:()=>c});var r=i(4506),n=i(533),s=i(33510),o=i(2110);function a({level:e,class:t,...i},r){const a=l(e);return(0,o.K)(`h${a}`,{...i,"aria-level":String(a),class:(0,s.Ly)(n.D.heading,t),role:"heading"},r)}function l(e){return(0,r.qE)(Math.ceil(e),1,6)}function c(e,t=1){return l(e+t)}},9737:(e,t,i)=>{"use strict";i.d(t,{V:()=>c,W:()=>h});var r=i(96367),n=i(74815);function s(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>e.contains(r.d)||e.contains(r.a)&&t?"dark":"light",n=e=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:e}})),s=e=>{o!==e&&n(e),o=e};let o=i();n(o),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>s(e.matches?"dark":"light"))),new MutationObserver((()=>s(i()))).observe(document.body,{attributes:!0,attributeFilter:["class"]})}"undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document&&("interactive"===document.readyState?s():document.addEventListener("DOMContentLoaded",(()=>s()),{once:!0}));var o=i(44764),a=(i(6273),i(19759));let l;function c(){try{(0,n.OX)(".")}catch{(0,n.Qu)((0,a.s2)((0,o.s)(l)))}}function h(e){const t=[];for(const i of Object.keys(e))customElements.get(`calcite-${i}`)||t.push(e[i]?.());return t.length>0?Promise.all(t):null}l="components/assets"},96134:(e,t,i)=>{"use strict";function r(e){return"number"==typeof e}function n(e){return"string"==typeof e||e instanceof String}i.d(t,{E:()=>r,K:()=>n})},30738:(e,t,i)=>{"use strict";i.d(t,{UE:()=>u,Xi:()=>h,gz:()=>p}),i(39553),i(6273),i(62991),i(4506);var r=i(57725),n=(i(50189),i(23375),i(96134)),s=i(96285);i(4631),new Map([["hours",3600],["minutes",60],["seconds",1],["deciseconds",.1],["centiseconds",.01],["milliseconds",.001]]);const o="yyyy-MM-dd";var a,l;(l=a||(a={})).HM="HH:mm",l.HMS="HH:mm:ss",l.HMS_MS="HH:mm:ss.SSS";const c=[a.HMS_MS,a.HMS,a.HM,"TT"];function h(e){if(!e||!(0,n.K)(e))return null;const t=s.c9.fromFormat(e,o);return t.isValid?t:null}function u(e){return e&&(0,n.K)(e)?(0,r.Pb)(c,(t=>{const i=s.c9.fromFormat(e,t);return i.isValid?i:null}))??null:null}function p(e){if(!e||!(0,n.K)(e))return null;const t=s.c9.fromISO(e);return t.isValid?t:null}new Set(["date-only","time-only","timestamp-offset"])},97944:(e,t,i)=>{"use strict";i.d(t,{$:()=>n});var r=i(33510);function n(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:s(e[t])}}}function s(e){return function(t,...i){!function(e){const t=e?.type;return e instanceof KeyboardEvent||"keyup"===t||"keydown"===t||"keypress"===t}(t)?e.call(this,t,...i):(0,r.OU)(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click())}}},2153:(e,t,i)=>{"use strict";function r(e){return(t,i)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:i})}}i.d(t,{G:()=>r})},35017:(e,t,i)=>{"use strict";function r(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const i=t._delegatedEventNames,r=Array.isArray(e)?e:function(e){return e.split(",").map((e=>e.trim()))}(e);i.push(...r)}}i.d(t,{U:()=>r})},533:(e,t,i)=>{"use strict";i.d(t,{D:()=>r});const r={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",disabledElement:"esri-disabled-element",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",noBookmarksIcon:"esri-widget__no-bookmark-icon",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"}},2110:(e,t,i)=>{"use strict";i.d(t,{K:()=>a,w:()=>l});var r=i(38031),n=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},s=function(e,t){for(var i=0,r=e.length;i<r;i++){var o=e[i];Array.isArray(o)?s(o,t):null!=o&&!1!==o&&(o.hasOwnProperty("vnodeSelector")||(o=n(o)),t.push(o))}},o=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(1===i.length&&"string"==typeof i[0])return{vnodeSelector:e,properties:t||void 0,children:void 0,text:i[0],domNode:null};var n=[];return s(i,n),{vnodeSelector:e,properties:t||void 0,children:n,text:void 0,domNode:null}};function a(e,t,...i){return"function"!=typeof e||(0,r.b)(e)?o(e,t,...i):e(t,...i)}function l(...e){return e}},38031:(e,t,i)=>{"use strict";i.d(t,{b:()=>p,d:()=>l});var r=i(70214),n=i(59734);const s=[],o={},a=new WeakMap;function l(e,t){let i=t.children;if(i?.length)for(let t=0;t<i.length;++t)i[t]=l(e,i[t]);else i=s;const r=t.vnodeSelector;if(p(r)){const n=t.properties||o,s=n.key||r;return{vnodeSelector:"div",properties:{key:s,afterCreate:c,afterUpdate:h,afterRemoved:u,parentWidget:e,widgetConstructor:r,widgetProperties:{...n,key:s,children:i}},children:void 0,text:void 0,domNode:null}}return t}function c(e,t,i,{parentWidget:s,widgetConstructor:o,widgetProperties:l}){const c=new o(l);c.container=e,a.set(e,c),c.afterCreate?.(c,e),s.addHandles((0,r.hA)((()=>u(e)))),queueMicrotask((()=>{c[n.D].projector.renderNow()}))}function h(e,t,i,{widgetProperties:r}){const n=a.get(e);n&&(n.set(r),n.afterUpdate?.(n,e))}function u(e){const t=a.get(e);t&&(t.afterRemoved?.(t,e),t.destroy(),a.delete(e))}function p(e){return"function"==typeof e&&e[n.x]}},42929:(e,t,i)=>{"use strict";i.d(t,{T:()=>r});const r={arrowDown:"esri-icon-arrow-down",arrowUp:"esri-icon-arrow-up",basemap:"esri-icon-basemap",bookmark:"esri-icon-bookmark",calendar:"esri-icon-calendar",checkMark:"esri-icon-check-mark",checkboxUnchecked:"esri-icon-checkbox-unchecked",close:"esri-icon-close",collapse:"esri-icon-collapse",defaultAction:"esri-icon-default-action",description:"esri-icon-description",directions:"esri-icon-directions",dockBottom:"esri-icon-dock-bottom",dockLeft:"esri-icon-dock-left",dockRight:"esri-icon-dock-right",down:"esri-icon-down",downArrow:"esri-icon-down-arrow",download:"esri-icon-download",dragHorizontal:"esri-icon-drag-horizontal",dragVertical:"esri-icon-drag-vertical",duplicate:"esri-icon-duplicate",edit:"esri-icon-edit",elevationProfile:"esri-icon-elevation-profile",environmentSettings:"esri-icon-environment-settings",erase:"esri-icon-erase",error:"esri-icon-error",expand:"esri-icon-expand",fontFallbackText:"esri-icon-font-fallback-text",forward:"esri-icon-forward",gear:"esri-icon-gear",handleHorizontal:"esri-icon-handle-horizontal",handleVertical:"esri-icon-handle-vertical",home:"esri-icon-home",icon:"esri-icon",launchLinkExternal:"esri-icon-launch-link-external",layerList:"esri-icon-layer-list",layers:"esri-icon-layers",left:"esri-icon-left",leftArrows:"esri-icon-left-arrow",leftTriangleArrow:"esri-icon-left-triangle-arrow",lineOfSight:"esri-icon-line-of-sight",link:"esri-icon-link",linkExternal:"esri-icon-link-external",linkHorizontal:"esri-icon-link-horizontal",loadingIndicator:"esri-icon-loading-indicator",locate:"esri-icon-locate",locateCircled:"esri-icon-locate-circled",locked:"esri-icon-locked",mapPin:"esri-icon-map-pin",maximize:"esri-icon-maximize",measure:"esri-icon-measure",measureArea:"esri-icon-measure-area",measureBuildingHeightShadow:"esri-icon-measure-building-height-shadow",measureLine:"esri-icon-measure-line",menu:"esri-icon-menu",minimize:"esri-icon-minimize",minus:"esri-icon-minus",nonVisible:"esri-icon-non-visible",northNavigation:"esri-icon-north-navigation",noticeTriangle:"esri-icon-notice-triangle",organization:"esri-icon-organization",pan:"esri-icon-pan",pan2:"esri-icon-pan2",partlyCloudy:"esri-icon-partly-cloudy",pause:"esri-icon-pause",play:"esri-icon-play",playCircled:"esri-icon-play-circled",plus:"esri-icon-plus",polyline:"esri-icon-polyline",printer:"esri-icon-printer",radioChecked:"esri-icon-radio-checked",radioUnchecked:"esri-icon-radio-unchecked",refresh:"esri-icon-refresh",reverse:"esri-icon-reverse",right:"esri-icon-right",rightArrow:"esri-icon-right-arrow",rightTriangleArrow:"esri-icon-right-triangle-arrow",rotate:"esri-icon-rotate",save:"esri-icon-save",search:"esri-icon-search",settings2:"esri-icon-settings2",slice:"esri-icon-slice",swap:"esri-icon-swap",table:"esri-icon-table",timeClock:"esri-icon-time-clock",tracking:"esri-icon-tracking",trash:"esri-icon-trash",unlockedLinkHorizontal:"esri-icon-unlocked-link-horizontal",up:"esri-icon-up",upArrow:"esri-icon-up-arrow",upDownArrows:"esri-icon-up-down-arrows",urbanModel:"esri-icon-urban-model",vertexGps:"esri-icon-vertex-gps",visible:"esri-icon-visible",zoomInFixed:"esri-icon-zoom-in-fixed",zoomInMagnifyingGlass:"esri-icon-zoom-in-magnifying-glass",zoomOutFixed:"esri-icon-zoom-out-fixed",zoomToObject:"esri-icon-zoom-to-object"}},59734:(e,t,i)=>{"use strict";i.d(t,{D:()=>n,x:()=>r});const r=Symbol("widget"),n=Symbol("widget-test-data")},58627:(e,t,i)=>{"use strict";i.d(t,{$U:()=>o,Qw:()=>a,Sh:()=>n,rE:()=>s});const r=new Map;function n(){r.clear()}function s(e){return r.get(e)}function o(e,t){r.set(e,t)}function a(e){r.delete(e)}},3067:(e,t,i)=>{"use strict";function r(e){return e&&"function"==typeof e.render}function n(e){return e&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}i.d(t,{p4:()=>r,xk:()=>n}),i(97944),i(2110),i(33510)},33510:(e,t,i)=>{"use strict";i.d(t,{Ly:()=>ce,N_:()=>pe,OU:()=>ge,V8:()=>ue,EV:()=>he,W5:()=>me,Mb:()=>ve,cA:()=>de});var r={exports:{}},n={},s={exports:{}},o={};function a(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}var l=/javascript\s*\:/gim;o.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},o.getDefaultWhiteList=a,o.onAttr=function(e,t,i){},o.onIgnoreAttr=function(e,t,i){},o.safeAttrValue=function(e,t){return l.test(t)?"":t};var c={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,n;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,n=e.length;r<n;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},h=c,u=o,p=function(e,t){";"!==(e=h.trimRight(e))[e.length-1]&&(e+=";");var i=e.length,r=!1,n=0,s=0,o="";function a(){if(!r){var i=h.trim(e.slice(n,s)),a=i.indexOf(":");if(-1!==a){var l=h.trim(i.slice(0,a)),c=h.trim(i.slice(a+1));if(l){var u=t(n,o.length,l,c,i);u&&(o+=u+"; ")}}}n=s+1}for(;s<i;s++){var l=e[s];if("/"===l&&"*"===e[s+1]){var c=e.indexOf("*/",s+2);if(-1===c)break;n=(s=c+1)+1,r=!1}else"("===l?r=!0:")"===l?r=!1:";"===l?r||a():"\n"===l&&a()}return h.trim(o)};function d(e){return null==e}function f(e){(e=function(e){var t={};for(var i in e)t[i]=e[i];return t}(e||{})).whiteList=e.whiteList||u.whiteList,e.onAttr=e.onAttr||u.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||u.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||u.safeAttrValue,this.options=e}f.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,i=t.whiteList,r=t.onAttr,n=t.onIgnoreAttr,s=t.safeAttrValue;return p(e,(function(e,t,o,a,l){var c=i[o],h=!1;if(!0===c?h=c:"function"==typeof c?h=c(a):c instanceof RegExp&&(h=c.test(a)),!0!==h&&(h=!1),a=s(o,a)){var u,p={position:t,sourcePosition:e,source:l,isWhite:h};return h?d(u=r(o,a,p))?o+":"+a:u:d(u=n(o,a,p))?void 0:u}}))};var y=f;!function(e,t){var i=o,r=y;for(var n in(t=e.exports=function(e,t){return new r(t).process(e)}).FilterCSS=r,i)t[n]=i[n]}(s,s.exports);var m={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,n;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,n=e.length;r<n;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}},g=s.exports.FilterCSS,v=s.exports.getDefaultWhiteList,_=m;var b=new g;function w(e){return e.replace(M,"&lt;").replace(T,"&gt;")}var M=/</g,T=/>/g,S=/"/g,A=/&quot;/g,E=/&#([a-zA-Z0-9]*);?/gim,x=/&colon;?/gim,I=/&newline;?/gim,C=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,k=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,N=/u\s*r\s*l\s*\(.*/gi;function L(e){return e.replace(S,"&quot;")}function O(e){return e.replace(A,'"')}function R(e){return e.replace(E,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function P(e){return e.replace(x,":").replace(I," ")}function D(e){for(var t="",i=0,r=e.length;i<r;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return _.trim(t)}function F(e){return D(e=P(e=R(e=O(e))))}function j(e){return w(e=L(e))}n.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},n.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},n.onTag=function(e,t,i){},n.onIgnoreTag=function(e,t,i){},n.onTagAttr=function(e,t,i){},n.onIgnoreTagAttr=function(e,t,i){},n.safeAttrValue=function(e,t,i,r){if(i=F(i),"href"===t||"src"===t){if("#"===(i=_.trim(i)))return"#";if("http://"!==i.substr(0,7)&&"https://"!==i.substr(0,8)&&"mailto:"!==i.substr(0,7)&&"tel:"!==i.substr(0,4)&&"data:image/"!==i.substr(0,11)&&"ftp://"!==i.substr(0,6)&&"./"!==i.substr(0,2)&&"../"!==i.substr(0,3)&&"#"!==i[0]&&"/"!==i[0])return""}else if("background"===t){if(C.lastIndex=0,C.test(i))return""}else if("style"===t){if(k.lastIndex=0,k.test(i))return"";if(N.lastIndex=0,N.test(i)&&(C.lastIndex=0,C.test(i)))return"";!1!==r&&(i=(r=r||b).process(i))}return j(i)},n.escapeHtml=w,n.escapeQuote=L,n.unescapeQuote=O,n.escapeHtmlEntities=R,n.escapeDangerHtml5Entities=P,n.clearNonPrintableCharacter=D,n.friendlyAttrValue=F,n.escapeAttrValue=j,n.onIgnoreTagStripAll=function(){return""},n.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var i=!Array.isArray(e),r=[],n=!1;return{onIgnoreTag:function(s,o,a){if(function(t){return!!i||-1!==_.indexOf(e,t)}(s)){if(a.isClosing){var l=a.position+10;return r.push([!1!==n?n:a.position,l]),n=!1,"[/removed]"}return n||(n=a.position),"[removed]"}return t(s,o,a)},remove:function(e){var t="",i=0;return _.forEach(r,(function(r){t+=e.slice(i,r[0]),i=r[1]})),t+=e.slice(i)}}},n.stripCommentTag=function(e){for(var t="",i=0;i<e.length;){var r=e.indexOf("\x3c!--",i);if(-1===r){t+=e.slice(i);break}t+=e.slice(i,r);var n=e.indexOf("--\x3e",r);if(-1===n)break;i=n+3}return t},n.stripBlankChar=function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return!(127===t||t<=31&&10!==t&&13!==t)}))).join("")},n.cssFilter=b,n.getDefaultCSSWhiteList=v;var Z={},z=m;function U(e){var t,i=z.spaceIndex(e);return t=-1===i?e.slice(1,-1):e.slice(1,i+1),"/"===(t=z.trim(t).toLowerCase()).slice(0,1)&&(t=t.slice(1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),t}function V(e){return"</"===e.slice(0,2)}var G=/[^a-zA-Z0-9\\_:.-]/gim;function B(e,t){for(;t<e.length;t++){var i=e[t];if(" "!==i)return"="===i?t:-1}}function $(e,t){for(;t<e.length;t++){var i=e[t];if(" "!==i)return"'"===i||'"'===i?t:-1}}function H(e,t){for(;t>0;t--){var i=e[t];if(" "!==i)return"="===i?t:-1}}function q(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}Z.parseTag=function(e,t,i){var r="",n=0,s=!1,o=!1,a=0,l=e.length,c="",h="";e:for(a=0;a<l;a++){var u=e.charAt(a);if(!1===s){if("<"===u){s=a;continue}}else if(!1===o){if("<"===u){r+=i(e.slice(n,a)),s=a,n=a;continue}if(">"===u){r+=i(e.slice(n,s)),c=U(h=e.slice(s,a+1)),r+=t(s,r.length,c,h,V(h)),n=a+1,s=!1;continue}if('"'===u||"'"===u)for(var p=1,d=e.charAt(a-p);""===d.trim()||"="===d;){if("="===d){o=u;continue e}d=e.charAt(a-++p)}}else if(u===o){o=!1;continue}}return n<e.length&&(r+=i(e.substr(n))),r},Z.parseAttr=function(e,t){var i=0,r=0,n=[],s=!1,o=e.length;function a(e,i){if(!((e=(e=z.trim(e)).replace(G,"").toLowerCase()).length<1)){var r=t(e,i||"");r&&n.push(r)}}for(var l=0;l<o;l++){var c,h=e.charAt(l);if(!1!==s||"="!==h)if(!1===s||l!==r){if(/\s|\n|\t/.test(h)){if(e=e.replace(/\s|\n|\t/g," "),!1===s){if(-1===(c=B(e,l))){a(z.trim(e.slice(i,l))),s=!1,i=l+1;continue}l=c-1;continue}if(-1===(c=H(e,l-1))){a(s,q(z.trim(e.slice(i,l)))),s=!1,i=l+1;continue}}}else{if(-1===(c=e.indexOf(h,l+1)))break;a(s,z.trim(e.slice(r+1,c))),s=!1,i=(l=c)+1}else s=e.slice(i,l),i=l+1,r='"'===e.charAt(i)||"'"===e.charAt(i)?i:$(e,l+1)}return i<e.length&&(!1===s?a(e.slice(i)):a(s,q(z.trim(e.slice(i))))),z.trim(n.join(" "))};var W=s.exports.FilterCSS,K=n,Y=Z,J=Y.parseTag,X=Y.parseAttr,Q=m;function ee(e){return null==e}function te(e){(e=function(e){var t={};for(var i in e)t[i]=e[i];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=K.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=function(e){var t={};for(var i in e)Array.isArray(e[i])?t[i.toLowerCase()]=e[i].map((function(e){return e.toLowerCase()})):t[i.toLowerCase()]=e[i];return t}(e.whiteList||e.allowList):e.whiteList=K.whiteList,e.onTag=e.onTag||K.onTag,e.onTagAttr=e.onTagAttr||K.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||K.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||K.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||K.safeAttrValue,e.escapeHtml=e.escapeHtml||K.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new W(e.css))}te.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,i=t.whiteList,r=t.onTag,n=t.onIgnoreTag,s=t.onTagAttr,o=t.onIgnoreTagAttr,a=t.safeAttrValue,l=t.escapeHtml,c=this.cssFilter;t.stripBlankChar&&(e=K.stripBlankChar(e)),t.allowCommentTag||(e=K.stripCommentTag(e));var h=!1;t.stripIgnoreTagBody&&(h=K.StripTagBody(t.stripIgnoreTagBody,n),n=h.onIgnoreTag);var u=J(e,(function(e,t,h,u,p){var d={sourcePosition:e,position:t,isClosing:p,isWhite:Object.prototype.hasOwnProperty.call(i,h)},f=r(h,u,d);if(!ee(f))return f;if(d.isWhite){if(d.isClosing)return"</"+h+">";var y=function(e){var t=Q.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var i="/"===(e=Q.trim(e.slice(t+1,-1)))[e.length-1];return i&&(e=Q.trim(e.slice(0,-1))),{html:e,closing:i}}(u),m=i[h],g=X(y.html,(function(e,t){var i=-1!==Q.indexOf(m,e),r=s(h,e,t,i);return ee(r)?i?(t=a(h,e,t,c))?e+'="'+t+'"':e:ee(r=o(h,e,t,i))?void 0:r:r}));return u="<"+h,g&&(u+=" "+g),y.closing&&(u+=" /"),u+">"}return ee(f=n(h,u,d))?l(u):f}),l);return h&&(u=h.remove(u)),u};var ie=te;!function(e,t){var i=n,r=Z,s=ie;function o(e,t){return new s(t).process(e)}(t=e.exports=o).filterXSS=o,t.FilterXSS=s,function(){for(var e in i)t[e]=i[e];for(var n in r)t[n]=r[n]}(),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)}(r,r.exports);var re=function(){function e(e,t){var i,n=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(e,t,i,s){return"a"===e&&"href"===t||("img"===e||"source"===e)&&"src"===t?n.sanitizeUrl(i):r.exports.safeAttrValue(e,t,i,s)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"},e&&!t?i=e:e&&t?(i=Object.create(this.arcgisFilterOptions),Object.keys(e).forEach((function(t){"whiteList"===t?i.whiteList=n._extendObjectOfArrays([n.arcgisWhiteList,e.whiteList||{}]):i[t]=e[t]}))):(i=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList,this.xssFilterOptions=i,this._xssFilter=new r.exports.FilterXSS(i)}return e.prototype.sanitize=function(e,t){switch(void 0===t&&(t={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,t);default:if(t.allowUndefined&&void 0===e)return;return null}},e.prototype.sanitizeUrl=function(e,t){var i=(null!=t?t:{}).isProtocolRequired,n=void 0===i||i,s=this._trim(e.substring(0,e.indexOf(":"))),o="/"===e,a=/^#/.test(e),l=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||l?r.exports.escapeAttrValue(e):s||n?"":r.exports.escapeAttrValue("https://".concat(e))},e.prototype.sanitizeHTMLAttribute=function(e,t,i,n){return"function"==typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(e,t,i,n):r.exports.safeAttrValue(e,t,i,n)},e.prototype.validate=function(e,t){void 0===t&&(t={});var i=this.sanitize(e,t);return{isValid:e===i,sanitized:i}},e.prototype.encodeHTML=function(e){var t=this;return String(e).replace(/[&<>"'\/]/g,(function(e){return t._entityMap[e]}))},e.prototype.encodeAttrValue=function(e){var t=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,(function(i,r){return t.test(i)?i:"&#x".concat(Number(e.charCodeAt(r)).toString(16),";")}))},e.prototype._extendObjectOfArrays=function(e){var t={};return e.forEach((function(e){Object.keys(e).forEach((function(i){Array.isArray(e[i])&&Array.isArray(t[i])?t[i]=t[i].concat(e[i]):t[i]=e[i]}))})),t},e.prototype._iterateOverObject=function(e,t){var i=this;void 0===t&&(t={});try{var r=!1,n=void 0;if(Array.isArray(e))n=e.reduce((function(e,n){var s=i.validate(n,t);return s.isValid?e.concat([n]):(r=!0,e.concat([s.sanitized]))}),[]);else{if(!function(e){if("object"!=typeof e||null===e)return!1;if("[object Object]"!==Object.prototype.toString.call(e))return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e)){if(t.allowUndefined&&void 0===e)return;return null}n=Object.keys(e).reduce((function(n,s){var o=e[s],a=i.validate(o,t);return a.isValid?n[s]=o:(r=!0,n[s]=a.sanitized),n}),{})}return r?n:e}catch(e){return null}},e.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},e}(),ne=i(50398),se=i(70214),oe=(i(6273),i(80861)),ae=i(61985),le=i(58627);function ce(...e){const t=ne.A.acquire();for(let i=0;i<e.length;i++){const r=e[i],n=typeof r;if("string"===n)t.push(r);else if(Array.isArray(r))t.push.apply(t,r);else if("object"===n)for(const e in r)r[e]&&t.push(e)}const i=t.join(" ");return ne.A.release(t),i}const he=(()=>{const e=new Map,t=new ResizeObserver((t=>{(0,le.Sh)();for(const i of t)e.get(i.target)?.(i)})),i=(i,r,n)=>(e.has(i)&&oe.A.getLogger("esri.widgets.support.widgetUtils").error("Already observing element",i),e.set(i,r),t.observe(i,n),(0,se.hA)((()=>{t.unobserve(i),e.delete(i)})));return(e,t,r)=>{let n=null;return(0,se.vE)([(0,ae.wB)((()=>"function"==typeof e?e():e),(e=>{n?.remove(),e&&(n=i(e,t,r))}),ae.pc),(0,se.hA)((()=>n?.remove()))])}})();function ue(e){const t=e?.closest("[dir]");return null!==t&&t instanceof HTMLElement&&"rtl"===t.dir||"rtl"===document.dir}function pe(e){this[e.getAttribute("data-node-ref")]=null}function de(e){this[e.getAttribute("data-node-ref")]=e}const fe=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"].reduce(((e,t)=>(e[t]=[],e)),{}),ye=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],me=new re({whiteList:fe,onTagAttr:(e,t,i)=>{const r=`${t}="${i}"`;if(ye.includes(t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function ge(e){return"Enter"===e||" "===e}function ve(e){return Object.values(e).includes(!0)}},96367:(e,t,i)=>{"use strict";i.d(t,{C:()=>s,a:()=>r,d:()=>n});const r="calcite-mode-auto",n="calcite-mode-dark",s={autoMode:r,darkMode:n,lightMode:"calcite-mode-light",rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"}},96285:(e,t,i)=>{"use strict";i.d(t,{c9:()=>ar,mQ:()=>re,oh:()=>V,bo:()=>D});class r extends Error{}class n extends r{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class s extends r{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class o extends r{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class a extends r{}class l extends r{constructor(e){super(`Invalid unit ${e}`)}}class c extends r{}class h extends r{constructor(){super("Zone is an abstract class")}}const u="numeric",p="short",d="long",f={year:u,month:u,day:u},y={year:u,month:p,day:u},m={year:u,month:p,day:u,weekday:p},g={year:u,month:d,day:u},v={year:u,month:d,day:u,weekday:d},_={hour:u,minute:u},b={hour:u,minute:u,second:u},w={hour:u,minute:u,second:u,timeZoneName:p},M={hour:u,minute:u,second:u,timeZoneName:d},T={hour:u,minute:u,hourCycle:"h23"},S={hour:u,minute:u,second:u,hourCycle:"h23"},A={hour:u,minute:u,second:u,hourCycle:"h23",timeZoneName:p},E={hour:u,minute:u,second:u,hourCycle:"h23",timeZoneName:d},x={year:u,month:u,day:u,hour:u,minute:u},I={year:u,month:u,day:u,hour:u,minute:u,second:u},C={year:u,month:p,day:u,hour:u,minute:u},k={year:u,month:p,day:u,hour:u,minute:u,second:u},N={year:u,month:p,day:u,weekday:p,hour:u,minute:u},L={year:u,month:d,day:u,hour:u,minute:u,timeZoneName:p},O={year:u,month:d,day:u,hour:u,minute:u,second:u,timeZoneName:p},R={year:u,month:d,day:u,weekday:d,hour:u,minute:u,timeZoneName:d},P={year:u,month:d,day:u,weekday:d,hour:u,minute:u,second:u,timeZoneName:d};class D{get type(){throw new h}get name(){throw new h}get ianaName(){return this.name}get isUniversal(){throw new h}offsetName(e,t){throw new h}formatOffset(e,t){throw new h}offset(e){throw new h}equals(e){throw new h}get isValid(){throw new h}}let F=null;class j extends D{static get instance(){return null===F&&(F=new j),F}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return Je(e,t,i)}formatOffset(e,t){return tt(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return"system"===e.type}get isValid(){return!0}}let Z={};const z={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let U={};class V extends D{static create(e){return U[e]||(U[e]=new V(e)),U[e]}static resetCache(){U={},Z={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(e){return!1}}constructor(e){super(),this.zoneName=e,this.valid=V.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return Je(e,t,i,this.name)}formatOffset(e,t){return tt(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const i=(r=this.name,Z[r]||(Z[r]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:r,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Z[r]);var r;let[n,s,o,a,l,c,h]=i.formatToParts?function(e,t){const i=e.formatToParts(t),r=[];for(let e=0;e<i.length;e++){const{type:t,value:n}=i[e],s=z[t];"era"===t?r[s]=n:ke(s)||(r[s]=parseInt(n,10))}return r}(i,t):function(e,t){const i=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,n,s,o,a,l,c,h]=r;return[o,n,s,a,l,c,h]}(i,t);"BC"===a&&(n=1-Math.abs(n));let u=+t;const p=u%1e3;return u-=p>=0?p:1e3+p,(qe({year:n,month:s,day:o,hour:24===l?0:l,minute:c,second:h,millisecond:0})-u)/6e4}equals(e){return"iana"===e.type&&e.name===this.name}get isValid(){return this.valid}}let G={},B={};function $(e,t={}){const i=JSON.stringify([e,t]);let r=B[i];return r||(r=new Intl.DateTimeFormat(e,t),B[i]=r),r}let H={},q={},W=null,K={};function Y(e,t,i,r){const n=e.listingMode();return"error"===n?null:"en"===n?i(t):r(t)}class J{constructor(e,t,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:r,floor:n,...s}=i;if(!t||Object.keys(s).length>0){const t={useGrouping:!1,...i};i.padTo>0&&(t.minimumIntegerDigits=i.padTo),this.inf=function(e,t={}){const i=JSON.stringify([e,t]);let r=H[i];return r||(r=new Intl.NumberFormat(e,t),H[i]=r),r}(e,t)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}return Ze(this.floor?Math.floor(e):Ge(e,3),this.padTo)}}class X{constructor(e,t,i){let r;if(this.opts=i,this.originalZone=void 0,this.opts.timeZone)this.dt=e;else if("fixed"===e.zone.type){const t=e.offset/60*-1,i=t>=0?`Etc/GMT+${t}`:`Etc/GMT${t}`;0!==e.offset&&V.create(i).valid?(r=i,this.dt=e):(r="UTC",this.dt=0===e.offset?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else"system"===e.zone.type?this.dt=e:"iana"===e.zone.type?(this.dt=e,r=e.zone.name):(r="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const n={...this.opts};n.timeZone=n.timeZone||r,this.dtf=$(t,n)}format(){return this.originalZone?this.formatToParts().map((({value:e})=>e)).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map((e=>{if("timeZoneName"===e.type){const t=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...e,value:t}}return e})):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class Q{constructor(e,t,i){this.opts={style:"long",...i},!t&&Oe()&&(this.rtf=function(e,t={}){const{base:i,...r}=t,n=JSON.stringify([e,r]);let s=q[n];return s||(s=new Intl.RelativeTimeFormat(e,t),q[n]=s),s}(e,i))}format(e,t){return this.rtf?this.rtf.format(e,t):function(e,t,i="always",r=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===i&&s){const i="days"===e;switch(t){case 1:return i?"tomorrow":`next ${n[e][0]}`;case-1:return i?"yesterday":`last ${n[e][0]}`;case 0:return i?"today":`this ${n[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=1===a,c=n[e],h=r?l?c[1]:c[2]||c[1]:l?n[e][0]:e;return o?`${a} ${h} ago`:`in ${a} ${h}`}(t,e,this.opts.numeric,"long"!==this.opts.style)}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const ee={firstDay:1,minimalDays:4,weekend:[6,7]};class te{static fromOpts(e){return te.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,i,r,n=!1){const s=e||fe.defaultLocale,o=s||(n?"en-US":W||(W=(new Intl.DateTimeFormat).resolvedOptions().locale,W)),a=t||fe.defaultNumberingSystem,l=i||fe.defaultOutputCalendar,c=Fe(r)||fe.defaultWeekSettings;return new te(o,a,l,c,s)}static resetCache(){W=null,B={},H={},q={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:i,weekSettings:r}={}){return te.create(e,t,i,r)}constructor(e,t,i,r,n){const[s,o,a]=function(e){const t=e.indexOf("-x-");-1!==t&&(e=e.substring(0,t));const i=e.indexOf("-u-");if(-1===i)return[e];{let t,r;try{t=$(e).resolvedOptions(),r=e}catch(n){const s=e.substring(0,i);t=$(s).resolvedOptions(),r=s}const{numberingSystem:n,calendar:s}=t;return[r,n,s]}}(e);this.locale=s,this.numberingSystem=t||o||null,this.outputCalendar=i||a||null,this.weekSettings=r,this.intl=function(e,t,i){return i||t?(e.includes("-u-")||(e+="-u"),i&&(e+=`-ca-${i}`),t&&(e+=`-nu-${t}`),e):e}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}get fastNumbers(){var e;return null==this.fastNumbersCached&&(this.fastNumbersCached=(!(e=this).numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar);return e&&t?"en":"intl"}clone(e){return e&&0!==Object.getOwnPropertyNames(e).length?te.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,Fe(e.weekSettings)||this.weekSettings,e.defaultToEN||!1):this}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return Y(this,e,ot,(()=>{const i=t?{month:e,day:"numeric"}:{month:e},r=t?"format":"standalone";return this.monthsCache[r][e]||(this.monthsCache[r][e]=function(e){const t=[];for(let i=1;i<=12;i++){const r=ar.utc(2009,i,1);t.push(e(r))}return t}((e=>this.extract(e,i,"month")))),this.monthsCache[r][e]}))}weekdays(e,t=!1){return Y(this,e,ht,(()=>{const i=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},r=t?"format":"standalone";return this.weekdaysCache[r][e]||(this.weekdaysCache[r][e]=function(e){const t=[];for(let i=1;i<=7;i++){const r=ar.utc(2016,11,13+i);t.push(e(r))}return t}((e=>this.extract(e,i,"weekday")))),this.weekdaysCache[r][e]}))}meridiems(){return Y(this,void 0,(()=>ut),(()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ar.utc(2016,11,13,9),ar.utc(2016,11,13,19)].map((t=>this.extract(t,e,"dayperiod")))}return this.meridiemCache}))}eras(e){return Y(this,e,yt,(()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[ar.utc(-40,1,1),ar.utc(2017,1,1)].map((e=>this.extract(e,t,"era")))),this.eraCache[e]}))}extract(e,t,i){const r=this.dtFormatter(e,t).formatToParts().find((e=>e.type.toLowerCase()===i));return r?r.value:null}numberFormatter(e={}){return new J(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new X(e,this.intl,t)}relFormatter(e={}){return new Q(this.intl,this.isEnglish(),e)}listFormatter(e={}){return function(e,t={}){const i=JSON.stringify([e,t]);let r=G[i];return r||(r=new Intl.ListFormat(e,t),G[i]=r),r}(this.intl,e)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Re()?function(e){let t=K[e];if(!t){const i=new Intl.Locale(e);t="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,K[e]=t}return t}(this.locale):ee}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let ie=null;class re extends D{static get utcInstance(){return null===ie&&(ie=new re(0)),ie}static instance(e){return 0===e?re.utcInstance:new re(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new re(Xe(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${tt(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${tt(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return tt(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return"fixed"===e.type&&e.fixed===this.fixed}get isValid(){return!0}}class ne extends D{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function se(e,t){if(ke(e)||null===e)return t;if(e instanceof D)return e;if("string"==typeof e){const i=e.toLowerCase();return"default"===i?t:"local"===i||"system"===i?j.instance:"utc"===i||"gmt"===i?re.utcInstance:re.parseSpecifier(i)||V.create(e)}return Ne(e)?re.instance(e):"object"==typeof e&&"offset"in e&&"function"==typeof e.offset?e:new ne(e)}let oe,ae=()=>Date.now(),le="system",ce=null,he=null,ue=null,pe=60,de=null;class fe{static get now(){return ae}static set now(e){ae=e}static set defaultZone(e){le=e}static get defaultZone(){return se(le,j.instance)}static get defaultLocale(){return ce}static set defaultLocale(e){ce=e}static get defaultNumberingSystem(){return he}static set defaultNumberingSystem(e){he=e}static get defaultOutputCalendar(){return ue}static set defaultOutputCalendar(e){ue=e}static get defaultWeekSettings(){return de}static set defaultWeekSettings(e){de=Fe(e)}static get twoDigitCutoffYear(){return pe}static set twoDigitCutoffYear(e){pe=e%100}static get throwOnInvalid(){return oe}static set throwOnInvalid(e){oe=e}static resetCaches(){te.resetCache(),V.resetCache()}}class ye{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const me=[0,31,59,90,120,151,181,212,243,273,304,334],ge=[0,31,60,91,121,152,182,213,244,274,305,335];function ve(e,t){return new ye("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function _e(e,t,i){const r=new Date(Date.UTC(e,t-1,i));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const n=r.getUTCDay();return 0===n?7:n}function be(e,t,i){return i+(Be(e)?ge:me)[t-1]}function we(e,t){const i=Be(e)?ge:me,r=i.findIndex((e=>e<t));return{month:r+1,day:t-i[r]}}function Me(e,t){return(e-t+7)%7+1}function Te(e,t=4,i=1){const{year:r,month:n,day:s}=e,o=be(r,n,s),a=Me(_e(r,n,s),i);let l,c=Math.floor((o-a+14-t)/7);return c<1?(l=r-1,c=Ke(l,t,i)):c>Ke(r,t,i)?(l=r+1,c=1):l=r,{weekYear:l,weekNumber:c,weekday:a,...it(e)}}function Se(e,t=4,i=1){const{weekYear:r,weekNumber:n,weekday:s}=e,o=Me(_e(r,1,t),i),a=$e(r);let l,c=7*n+s-o-7+t;c<1?(l=r-1,c+=$e(l)):c>a?(l=r+1,c-=$e(r)):l=r;const{month:h,day:u}=we(l,c);return{year:l,month:h,day:u,...it(e)}}function Ae(e){const{year:t,month:i,day:r}=e;return{year:t,ordinal:be(t,i,r),...it(e)}}function Ee(e){const{year:t,ordinal:i}=e,{month:r,day:n}=we(t,i);return{year:t,month:r,day:n,...it(e)}}function xe(e,t){if(!ke(e.localWeekday)||!ke(e.localWeekNumber)||!ke(e.localWeekYear)){if(!ke(e.weekday)||!ke(e.weekNumber)||!ke(e.weekYear))throw new a("Cannot mix locale-based week fields with ISO-based week fields");return ke(e.localWeekday)||(e.weekday=e.localWeekday),ke(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),ke(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}return{minDaysInFirstWeek:4,startOfWeek:1}}function Ie(e){const t=Le(e.year),i=je(e.month,1,12),r=je(e.day,1,He(e.year,e.month));return t?i?!r&&ve("day",e.day):ve("month",e.month):ve("year",e.year)}function Ce(e){const{hour:t,minute:i,second:r,millisecond:n}=e,s=je(t,0,23)||24===t&&0===i&&0===r&&0===n,o=je(i,0,59),a=je(r,0,59),l=je(n,0,999);return s?o?a?!l&&ve("millisecond",n):ve("second",r):ve("minute",i):ve("hour",t)}function ke(e){return void 0===e}function Ne(e){return"number"==typeof e}function Le(e){return"number"==typeof e&&e%1==0}function Oe(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function Re(){try{return"undefined"!=typeof Intl&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch(e){return!1}}function Pe(e,t,i){if(0!==e.length)return e.reduce(((e,r)=>{const n=[t(r),r];return e&&i(e[0],n[0])===e[0]?e:n}),null)[1]}function De(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Fe(e){if(null==e)return null;if("object"!=typeof e)throw new c("Week settings must be an object");if(!je(e.firstDay,1,7)||!je(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some((e=>!je(e,1,7))))throw new c("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function je(e,t,i){return Le(e)&&e>=t&&e<=i}function Ze(e,t=2){let i;return i=e<0?"-"+(""+-e).padStart(t,"0"):(""+e).padStart(t,"0"),i}function ze(e){return ke(e)||null===e||""===e?void 0:parseInt(e,10)}function Ue(e){return ke(e)||null===e||""===e?void 0:parseFloat(e)}function Ve(e){if(!ke(e)&&null!==e&&""!==e){const t=1e3*parseFloat("0."+e);return Math.floor(t)}}function Ge(e,t,i=!1){const r=10**t;return(i?Math.trunc:Math.round)(e*r)/r}function Be(e){return e%4==0&&(e%100!=0||e%400==0)}function $e(e){return Be(e)?366:365}function He(e,t){const i=(r=t-1)-12*Math.floor(r/12)+1;var r;return 2===i?Be(e+(t-i)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function qe(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function We(e,t,i){return-Me(_e(e,1,t),i)+t-1}function Ke(e,t=4,i=1){const r=We(e,t,i),n=We(e+1,t,i);return($e(e)-r+n)/7}function Ye(e){return e>99?e:e>fe.twoDigitCutoffYear?1900+e:2e3+e}function Je(e,t,i,r=null){const n=new Date(e),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:t,...s},a=new Intl.DateTimeFormat(i,o).formatToParts(n).find((e=>"timezonename"===e.type.toLowerCase()));return a?a.value:null}function Xe(e,t){let i=parseInt(e,10);Number.isNaN(i)&&(i=0);const r=parseInt(t,10)||0;return 60*i+(i<0||Object.is(i,-0)?-r:r)}function Qe(e){const t=Number(e);if("boolean"==typeof e||""===e||Number.isNaN(t))throw new c(`Invalid unit value ${e}`);return t}function et(e,t){const i={};for(const r in e)if(De(e,r)){const n=e[r];if(null==n)continue;i[t(r)]=Qe(n)}return i}function tt(e,t){const i=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),n=e>=0?"+":"-";switch(t){case"short":return`${n}${Ze(i,2)}:${Ze(r,2)}`;case"narrow":return`${n}${i}${r>0?`:${r}`:""}`;case"techie":return`${n}${Ze(i,2)}${Ze(r,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function it(e){return function(e,t){return["hour","minute","second","millisecond"].reduce(((t,i)=>(t[i]=e[i],t)),{})}(e)}const rt=["January","February","March","April","May","June","July","August","September","October","November","December"],nt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],st=["J","F","M","A","M","J","J","A","S","O","N","D"];function ot(e){switch(e){case"narrow":return[...st];case"short":return[...nt];case"long":return[...rt];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const at=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],lt=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],ct=["M","T","W","T","F","S","S"];function ht(e){switch(e){case"narrow":return[...ct];case"short":return[...lt];case"long":return[...at];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const ut=["AM","PM"],pt=["Before Christ","Anno Domini"],dt=["BC","AD"],ft=["B","A"];function yt(e){switch(e){case"narrow":return[...ft];case"short":return[...dt];case"long":return[...pt];default:return null}}function mt(e,t){let i="";for(const r of e)r.literal?i+=r.val:i+=t(r.val);return i}const gt={D:f,DD:y,DDD:g,DDDD:v,t:_,tt:b,ttt:w,tttt:M,T,TT:S,TTT:A,TTTT:E,f:x,ff:C,fff:L,ffff:R,F:I,FF:k,FFF:O,FFFF:P};class vt{static create(e,t={}){return new vt(e,t)}static parseFormat(e){let t=null,i="",r=!1;const n=[];for(let s=0;s<e.length;s++){const o=e.charAt(s);"'"===o?(i.length>0&&n.push({literal:r||/^\s+$/.test(i),val:i}),t=null,i="",r=!r):r||o===t?i+=o:(i.length>0&&n.push({literal:/^\s+$/.test(i),val:i}),i=o,t=o)}return i.length>0&&n.push({literal:r||/^\s+$/.test(i),val:i}),n}static macroTokenToFormatOpts(e){return gt[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return Ze(e,t);const i={...this.opts};return t>0&&(i.padTo=t),this.loc.numberFormatter(i).format(e)}formatDateTimeFromString(e,t){const i="en"===this.loc.listingMode(),r=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,n=(t,i)=>this.loc.extract(e,t,i),s=t=>e.isOffsetFixed&&0===e.offset&&t.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,t.format):"",o=(t,r)=>i?function(e,t){return ot(t)[e.month-1]}(e,t):n(r?{month:t}:{month:t,day:"numeric"},"month"),a=(t,r)=>i?function(e,t){return ht(t)[e.weekday-1]}(e,t):n(r?{weekday:t}:{weekday:t,month:"long",day:"numeric"},"weekday"),l=t=>{const i=vt.macroTokenToFormatOpts(t);return i?this.formatWithSystemDefault(e,i):t},c=t=>i?function(e,t){return yt(t)[e.year<0?0:1]}(e,t):n({era:t},"era");return mt(vt.parseFormat(t),(t=>{switch(t){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12==0?12:e.hour%12);case"hh":return this.num(e.hour%12==0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return s({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return s({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return s({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return i?function(e){return ut[e.hour<12?0:1]}(e):n({hour:"numeric",hourCycle:"h12"},"dayperiod");case"d":return r?n({day:"numeric"},"day"):this.num(e.day);case"dd":return r?n({day:"2-digit"},"day"):this.num(e.day,2);case"c":case"E":return this.num(e.weekday);case"ccc":return a("short",!0);case"cccc":return a("long",!0);case"ccccc":return a("narrow",!0);case"EEE":return a("short",!1);case"EEEE":return a("long",!1);case"EEEEE":return a("narrow",!1);case"L":return r?n({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return r?n({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return o("short",!0);case"LLLL":return o("long",!0);case"LLLLL":return o("narrow",!0);case"M":return r?n({month:"numeric"},"month"):this.num(e.month);case"MM":return r?n({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return o("short",!1);case"MMMM":return o("long",!1);case"MMMMM":return o("narrow",!1);case"y":return r?n({year:"numeric"},"year"):this.num(e.year);case"yy":return r?n({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return r?n({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return r?n({year:"numeric"},"year"):this.num(e.year,6);case"G":return c("short");case"GG":return c("long");case"GGGGG":return c("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return l(t)}}))}formatDurationFromString(e,t){const i=e=>{switch(e[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=vt.parseFormat(t),n=r.reduce(((e,{literal:t,val:i})=>t?e:e.concat(i)),[]);return mt(r,(e=>t=>{const r=i(t);return r?this.num(e.get(r),t.length):t})(e.shiftTo(...n.map(i).filter((e=>e)))))}}const _t=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function bt(...e){const t=e.reduce(((e,t)=>e+t.source),"");return RegExp(`^${t}$`)}function wt(...e){return t=>e.reduce((([e,i,r],n)=>{const[s,o,a]=n(t,r);return[{...e,...s},o||i,a]}),[{},null,1]).slice(0,2)}function Mt(e,...t){if(null==e)return[null,null];for(const[i,r]of t){const t=i.exec(e);if(t)return r(t)}return[null,null]}function Tt(...e){return(t,i)=>{const r={};let n;for(n=0;n<e.length;n++)r[e[n]]=ze(t[i+n]);return[r,null,i+n]}}const St=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,At=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Et=RegExp(`${At.source}(?:${St.source}?(?:\\[(${_t.source})\\])?)?`),xt=RegExp(`(?:T${Et.source})?`),It=Tt("weekYear","weekNumber","weekDay"),Ct=Tt("year","ordinal"),kt=RegExp(`${At.source} ?(?:${St.source}|(${_t.source}))?`),Nt=RegExp(`(?: ${kt.source})?`);function Lt(e,t,i){const r=e[t];return ke(r)?i:ze(r)}function Ot(e,t){return[{hours:Lt(e,t,0),minutes:Lt(e,t+1,0),seconds:Lt(e,t+2,0),milliseconds:Ve(e[t+3])},null,t+4]}function Rt(e,t){const i=!e[t]&&!e[t+1],r=Xe(e[t+1],e[t+2]);return[{},i?null:re.instance(r),t+3]}function Pt(e,t){return[{},e[t]?V.create(e[t]):null,t+1]}const Dt=RegExp(`^T?${At.source}$`),Ft=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function jt(e){const[t,i,r,n,s,o,a,l,c]=e,h="-"===t[0],u=l&&"-"===l[0],p=(e,t=!1)=>void 0!==e&&(t||e&&h)?-e:e;return[{years:p(Ue(i)),months:p(Ue(r)),weeks:p(Ue(n)),days:p(Ue(s)),hours:p(Ue(o)),minutes:p(Ue(a)),seconds:p(Ue(l),"-0"===l),milliseconds:p(Ve(c),u)}]}const Zt={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function zt(e,t,i,r,n,s,o){const a={year:2===t.length?Ye(ze(t)):ze(t),month:nt.indexOf(i)+1,day:ze(r),hour:ze(n),minute:ze(s)};return o&&(a.second=ze(o)),e&&(a.weekday=e.length>3?at.indexOf(e)+1:lt.indexOf(e)+1),a}const Ut=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Vt(e){const[,t,i,r,n,s,o,a,l,c,h,u]=e,p=zt(t,n,r,i,s,o,a);let d;return d=l?Zt[l]:c?0:Xe(h,u),[p,new re(d)]}const Gt=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Bt=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,$t=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Ht(e){const[,t,i,r,n,s,o,a]=e;return[zt(t,n,r,i,s,o,a),re.utcInstance]}function qt(e){const[,t,i,r,n,s,o,a]=e;return[zt(t,a,i,r,n,s,o),re.utcInstance]}const Wt=bt(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,xt),Kt=bt(/(\d{4})-?W(\d\d)(?:-?(\d))?/,xt),Yt=bt(/(\d{4})-?(\d{3})/,xt),Jt=bt(Et),Xt=wt((function(e,t){return[{year:Lt(e,t),month:Lt(e,t+1,1),day:Lt(e,t+2,1)},null,t+3]}),Ot,Rt,Pt),Qt=wt(It,Ot,Rt,Pt),ei=wt(Ct,Ot,Rt,Pt),ti=wt(Ot,Rt,Pt),ii=wt(Ot),ri=bt(/(\d{4})-(\d\d)-(\d\d)/,Nt),ni=bt(kt),si=wt(Ot,Rt,Pt),oi="Invalid Duration",ai={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},li={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...ai},ci={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:4.3481250000000005,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...ai},hi=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],ui=hi.slice(0).reverse();function pi(e,t,i=!1){const r={values:i?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new yi(r)}function di(e,t){let i=t.milliseconds??0;for(const r of ui.slice(1))t[r]&&(i+=t[r]*e[r].milliseconds);return i}function fi(e,t){const i=di(e,t)<0?-1:1;hi.reduceRight(((r,n)=>{if(ke(t[n]))return r;if(r){const s=t[r]*i,o=e[n][r],a=Math.floor(s/o);t[n]+=a*i,t[r]-=a*o*i}return n}),null),hi.reduce(((i,r)=>{if(ke(t[r]))return i;if(i){const n=t[i]%1;t[i]-=n,t[r]+=n*e[i][r]}return r}),null)}class yi{constructor(e){const t="longterm"===e.conversionAccuracy||!1;let i=t?ci:li;e.matrix&&(i=e.matrix),this.values=e.values,this.loc=e.loc||te.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(e,t){return yi.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(null==e||"object"!=typeof e)throw new c("Duration.fromObject: argument expected to be an object, got "+(null===e?"null":typeof e));return new yi({values:et(e,yi.normalizeUnit),loc:te.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(Ne(e))return yi.fromMillis(e);if(yi.isDuration(e))return e;if("object"==typeof e)return yi.fromObject(e);throw new c(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[i]=function(e){return Mt(e,[Ft,jt])}(e);return i?yi.fromObject(i,t):yi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[i]=function(e){return Mt(e,[Dt,ii])}(e);return i?yi.fromObject(i,t):yi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new c("need to specify a reason the Duration is invalid");const i=e instanceof ye?e:new ye(e,t);if(fe.throwOnInvalid)throw new o(i);return new yi({invalid:i})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e?e.toLowerCase():e];if(!t)throw new l(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const i={...t,floor:!1!==t.round&&!1!==t.floor};return this.isValid?vt.create(this.loc,i).formatDurationFromString(this,e):oi}toHuman(e={}){if(!this.isValid)return oi;const t=hi.map((t=>{const i=this.values[t];return ke(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:t.slice(0,-1)}).format(i)})).filter((e=>e));return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return 0!==this.years&&(e+=this.years+"Y"),0===this.months&&0===this.quarters||(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(e+=Ge(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},ar.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?di(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=yi.fromDurationLike(e),i={};for(const e of hi)(De(t.values,e)||De(this.values,e))&&(i[e]=t.get(e)+this.get(e));return pi(this,{values:i},!0)}minus(e){if(!this.isValid)return this;const t=yi.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=Qe(e(this.values[i],i));return pi(this,{values:t},!0)}get(e){return this[yi.normalizeUnit(e)]}set(e){return this.isValid?pi(this,{values:{...this.values,...et(e,yi.normalizeUnit)}}):this}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:i,matrix:r}={}){return pi(this,{loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:r,conversionAccuracy:i})}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return fi(this.matrix,e),pi(this,{values:e},!0)}rescale(){return this.isValid?pi(this,{values:function(e){const t={};for(const[i,r]of Object.entries(e))0!==r&&(t[i]=r);return t}(this.normalize().shiftToAll().toObject())},!0):this}shiftTo(...e){if(!this.isValid)return this;if(0===e.length)return this;e=e.map((e=>yi.normalizeUnit(e)));const t={},i={},r=this.toObject();let n;for(const s of hi)if(e.indexOf(s)>=0){n=s;let e=0;for(const t in i)e+=this.matrix[t][s]*i[t],i[t]=0;Ne(r[s])&&(e+=r[s]);const o=Math.trunc(e);t[s]=o,i[s]=(1e3*e-1e3*o)/1e3}else Ne(r[s])&&(i[s]=r[s]);for(const e in i)0!==i[e]&&(t[n]+=e===n?i[e]:i[e]/this.matrix[n][e]);return fi(this.matrix,t),pi(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=0===this.values[t]?0:-this.values[t];return pi(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid)return!1;if(!this.loc.equals(e.loc))return!1;for(const r of hi)if(t=this.values[r],i=e.values[r],!(void 0===t||0===t?void 0===i||0===i:t===i))return!1;var t,i;return!0}}const mi="Invalid Interval";class gi{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new c("need to specify a reason the Interval is invalid");const i=e instanceof ye?e:new ye(e,t);if(fe.throwOnInvalid)throw new s(i);return new gi({invalid:i})}static fromDateTimes(e,t){const i=lr(e),r=lr(t),n=function(e,t){return e&&e.isValid?t&&t.isValid?t<e?gi.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null:gi.invalid("missing or invalid end"):gi.invalid("missing or invalid start")}(i,r);return null==n?new gi({start:i,end:r}):n}static after(e,t){const i=yi.fromDurationLike(t),r=lr(e);return gi.fromDateTimes(r,r.plus(i))}static before(e,t){const i=yi.fromDurationLike(t),r=lr(e);return gi.fromDateTimes(r.minus(i),r)}static fromISO(e,t){const[i,r]=(e||"").split("/",2);if(i&&r){let e,n,s,o;try{e=ar.fromISO(i,t),n=e.isValid}catch(r){n=!1}try{s=ar.fromISO(r,t),o=s.isValid}catch(r){o=!1}if(n&&o)return gi.fromDateTimes(e,s);if(n){const i=yi.fromISO(r,t);if(i.isValid)return gi.after(e,i)}else if(o){const e=yi.fromISO(i,t);if(e.isValid)return gi.before(s,e)}}return gi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const i=this.start.startOf(e,t);let r;return r=t?.useLocaleWeeks?this.end.reconfigure({locale:i.locale}):this.end,r=r.startOf(e,t),Math.floor(r.diff(i,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return!!this.isValid&&this.s>e}isBefore(e){return!!this.isValid&&this.e<=e}contains(e){return!!this.isValid&&this.s<=e&&this.e>e}set({start:e,end:t}={}){return this.isValid?gi.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(lr).filter((e=>this.contains(e))).sort(((e,t)=>e.toMillis()-t.toMillis())),i=[];let{s:r}=this,n=0;for(;r<this.e;){const e=t[n]||this.e,s=+e>+this.e?this.e:e;i.push(gi.fromDateTimes(r,s)),r=s,n+=1}return i}splitBy(e){const t=yi.fromDurationLike(e);if(!this.isValid||!t.isValid||0===t.as("milliseconds"))return[];let i,{s:r}=this,n=1;const s=[];for(;r<this.e;){const e=this.start.plus(t.mapUnits((e=>e*n)));i=+e>+this.e?this.e:e,s.push(gi.fromDateTimes(r,i)),r=i,n+=1}return s}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return!!this.isValid&&+this.e==+e.s}abutsEnd(e){return!!this.isValid&&+e.e==+this.s}engulfs(e){return!!this.isValid&&this.s<=e.s&&this.e>=e.e}equals(e){return!(!this.isValid||!e.isValid)&&this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,i=this.e<e.e?this.e:e.e;return t>=i?null:gi.fromDateTimes(t,i)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,i=this.e>e.e?this.e:e.e;return gi.fromDateTimes(t,i)}static merge(e){const[t,i]=e.sort(((e,t)=>e.s-t.s)).reduce((([e,t],i)=>t?t.overlaps(i)||t.abutsStart(i)?[e,t.union(i)]:[e.concat([t]),i]:[e,i]),[[],null]);return i&&t.push(i),t}static xor(e){let t=null,i=0;const r=[],n=e.map((e=>[{time:e.s,type:"s"},{time:e.e,type:"e"}])),s=Array.prototype.concat(...n).sort(((e,t)=>e.time-t.time));for(const e of s)i+="s"===e.type?1:-1,1===i?t=e.time:(t&&+t!=+e.time&&r.push(gi.fromDateTimes(t,e.time)),t=null);return gi.merge(r)}difference(...e){return gi.xor([this].concat(e)).map((e=>this.intersection(e))).filter((e=>e&&!e.isEmpty()))}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:mi}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=f,t={}){return this.isValid?vt.create(this.s.loc.clone(t),e).formatInterval(this):mi}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:mi}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:mi}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:mi}toFormat(e,{separator:t=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:mi}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):yi.invalid(this.invalidReason)}mapEndpoints(e){return gi.fromDateTimes(e(this.s),e(this.e))}}class vi{static hasDST(e=fe.defaultZone){const t=ar.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return V.isValidZone(e)}static normalizeZone(e){return se(e,fe.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||te.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||te.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||te.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:i=null,locObj:r=null,outputCalendar:n="gregory"}={}){return(r||te.create(t,i,n)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:r=null,outputCalendar:n="gregory"}={}){return(r||te.create(t,i,n)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:i=null,locObj:r=null}={}){return(r||te.create(t,i,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:r=null}={}){return(r||te.create(t,i,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return te.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return te.create(t,null,"gregory").eras(e)}static features(){return{relative:Oe(),localeWeek:Re()}}}function _i(e,t){const i=e=>e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(t)-i(e);return Math.floor(yi.fromMillis(r).as("days"))}const bi={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},wi={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Mi=bi.hanidec.replace(/[\[|\]]/g,"").split("");function Ti({numberingSystem:e},t=""){return new RegExp(`${bi[e||"latn"]}${t}`)}function Si(e,t=(e=>e)){return{regex:e,deser:([e])=>t(function(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);if(-1!==e[i].search(bi.hanidec))t+=Mi.indexOf(e[i]);else for(const e in wi){const[i,n]=wi[e];r>=i&&r<=n&&(t+=r-i)}}return parseInt(t,10)}return t}(e))}}const Ai=`[ ${String.fromCharCode(160)}]`,Ei=new RegExp(Ai,"g");function xi(e){return e.replace(/\./g,"\\.?").replace(Ei,Ai)}function Ii(e){return e.replace(/\./g,"").replace(Ei," ").toLowerCase()}function Ci(e,t){return null===e?null:{regex:RegExp(e.map(xi).join("|")),deser:([i])=>e.findIndex((e=>Ii(i)===Ii(e)))+t}}function ki(e,t){return{regex:e,deser:([,e,t])=>Xe(e,t),groups:t}}function Ni(e){return{regex:e,deser:([e])=>e}}const Li={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Oi=null;function Ri(e,t){return Array.prototype.concat(...e.map((e=>function(e,t){if(e.literal)return e;const i=Di(vt.macroTokenToFormatOpts(e.val),t);return null==i||i.includes(void 0)?e:i}(e,t))))}function Pi(e,t,i){const r=Ri(vt.parseFormat(i),e),n=r.map((t=>function(e,t){const i=Ti(t),r=Ti(t,"{2}"),n=Ti(t,"{3}"),s=Ti(t,"{4}"),o=Ti(t,"{6}"),a=Ti(t,"{1,2}"),l=Ti(t,"{1,3}"),c=Ti(t,"{1,6}"),h=Ti(t,"{1,9}"),u=Ti(t,"{2,4}"),p=Ti(t,"{4,6}"),d=e=>{return{regex:RegExp((t=e.val,t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"))),deser:([e])=>e,literal:!0};var t},f=(f=>{if(e.literal)return d(f);switch(f.val){case"G":return Ci(t.eras("short"),0);case"GG":return Ci(t.eras("long"),0);case"y":return Si(c);case"yy":case"kk":return Si(u,Ye);case"yyyy":case"kkkk":return Si(s);case"yyyyy":return Si(p);case"yyyyyy":return Si(o);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return Si(a);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return Si(r);case"MMM":return Ci(t.months("short",!0),1);case"MMMM":return Ci(t.months("long",!0),1);case"LLL":return Ci(t.months("short",!1),1);case"LLLL":return Ci(t.months("long",!1),1);case"o":case"S":return Si(l);case"ooo":case"SSS":return Si(n);case"u":return Ni(h);case"uu":return Ni(a);case"uuu":case"E":case"c":return Si(i);case"a":return Ci(t.meridiems(),0);case"EEE":return Ci(t.weekdays("short",!1),1);case"EEEE":return Ci(t.weekdays("long",!1),1);case"ccc":return Ci(t.weekdays("short",!0),1);case"cccc":return Ci(t.weekdays("long",!0),1);case"Z":case"ZZ":return ki(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return ki(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return Ni(/[a-z_+-/]{1,256}?/i);case" ":return Ni(/[^\S\n\r]/);default:return d(f)}})(e)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return f.token=e,f}(t,e))),s=n.find((e=>e.invalidReason));if(s)return{input:t,tokens:r,invalidReason:s.invalidReason};{const[e,i]=function(e){return[`^${e.map((e=>e.regex)).reduce(((e,t)=>`${e}(${t.source})`),"")}$`,e]}(n),s=RegExp(e,"i"),[o,l]=function(e,t,i){const r=e.match(t);if(r){const e={};let t=1;for(const n in i)if(De(i,n)){const s=i[n],o=s.groups?s.groups+1:1;!s.literal&&s.token&&(e[s.token.val[0]]=s.deser(r.slice(t,t+o))),t+=o}return[r,e]}return[r,{}]}(t,s,i),[c,h,u]=l?function(e){let t,i=null;return ke(e.z)||(i=V.create(e.z)),ke(e.Z)||(i||(i=new re(e.Z)),t=e.Z),ke(e.q)||(e.M=3*(e.q-1)+1),ke(e.h)||(e.h<12&&1===e.a?e.h+=12:12===e.h&&0===e.a&&(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),ke(e.u)||(e.S=Ve(e.u)),[Object.keys(e).reduce(((t,i)=>{const r=(e=>{switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}})(i);return r&&(t[r]=e[i]),t}),{}),i,t]}(l):[null,null,void 0];if(De(l,"a")&&De(l,"H"))throw new a("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:r,regex:s,rawMatches:o,matches:l,result:c,zone:h,specificOffset:u}}}function Di(e,t){if(!e)return null;const i=vt.create(t,e).dtFormatter((Oi||(Oi=ar.fromMillis(1555555555555)),Oi)),r=i.formatToParts(),n=i.resolvedOptions();return r.map((t=>function(e,t,i){const{type:r,value:n}=e;if("literal"===r){const e=/^\s+$/.test(n);return{literal:!e,val:e?" ":n}}const s=t[r];let o=r;"hour"===r&&(o=null!=t.hour12?t.hour12?"hour12":"hour24":null!=t.hourCycle?"h11"===t.hourCycle||"h12"===t.hourCycle?"hour12":"hour24":i.hour12?"hour12":"hour24");let a=Li[o];if("object"==typeof a&&(a=a[s]),a)return{literal:!1,val:a}}(t,e,n)))}const Fi="Invalid DateTime",ji=864e13;function Zi(e){return new ye("unsupported zone",`the zone "${e.name}" is not supported`)}function zi(e){return null===e.weekData&&(e.weekData=Te(e.c)),e.weekData}function Ui(e){return null===e.localWeekData&&(e.localWeekData=Te(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function Vi(e,t){const i={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new ar({...i,...t,old:i})}function Gi(e,t,i){let r=e-60*t*1e3;const n=i.offset(r);if(t===n)return[r,t];r-=60*(n-t)*1e3;const s=i.offset(r);return n===s?[r,n]:[e-60*Math.min(n,s)*1e3,Math.max(n,s)]}function Bi(e,t){const i=new Date(e+=60*t*1e3);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function $i(e,t,i){return Gi(qe(e),t,i)}function Hi(e,t){const i=e.o,r=e.c.year+Math.trunc(t.years),n=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),s={...e.c,year:r,month:n,day:Math.min(e.c.day,He(r,n))+Math.trunc(t.days)+7*Math.trunc(t.weeks)},o=yi.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=qe(s);let[l,c]=Gi(a,i,e.zone);return 0!==o&&(l+=o,c=e.zone.offset(l)),{ts:l,o:c}}function qi(e,t,i,r,n,s){const{setZone:o,zone:a}=i;if(e&&0!==Object.keys(e).length||t){const r=t||a,n=ar.fromObject(e,{...i,zone:r,specificOffset:s});return o?n:n.setZone(a)}return ar.invalid(new ye("unparsable",`the input "${n}" can't be parsed as ${r}`))}function Wi(e,t,i=!0){return e.isValid?vt.create(te.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Ki(e,t){const i=e.c.year>9999||e.c.year<0;let r="";return i&&e.c.year>=0&&(r+="+"),r+=Ze(e.c.year,i?6:4),t?(r+="-",r+=Ze(e.c.month),r+="-",r+=Ze(e.c.day)):(r+=Ze(e.c.month),r+=Ze(e.c.day)),r}function Yi(e,t,i,r,n,s){let o=Ze(e.c.hour);return t?(o+=":",o+=Ze(e.c.minute),0===e.c.millisecond&&0===e.c.second&&i||(o+=":")):o+=Ze(e.c.minute),0===e.c.millisecond&&0===e.c.second&&i||(o+=Ze(e.c.second),0===e.c.millisecond&&r||(o+=".",o+=Ze(e.c.millisecond,3))),n&&(e.isOffsetFixed&&0===e.offset&&!s?o+="Z":e.o<0?(o+="-",o+=Ze(Math.trunc(-e.o/60)),o+=":",o+=Ze(Math.trunc(-e.o%60))):(o+="+",o+=Ze(Math.trunc(e.o/60)),o+=":",o+=Ze(Math.trunc(e.o%60)))),s&&(o+="["+e.zone.ianaName+"]"),o}const Ji={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Xi={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Qi={ordinal:1,hour:0,minute:0,second:0,millisecond:0},er=["year","month","day","hour","minute","second","millisecond"],tr=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],ir=["year","ordinal","hour","minute","second","millisecond"];function rr(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return function(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new l(e);return t}(e)}}function nr(e,t){const i=se(t.zone,fe.defaultZone),r=te.fromObject(t),n=fe.now();let s,o;if(ke(e.year))s=n;else{for(const t of er)ke(e[t])&&(e[t]=Ji[t]);const t=Ie(e)||Ce(e);if(t)return ar.invalid(t);const r=i.offset(n);[s,o]=$i(e,r,i)}return new ar({ts:s,zone:i,loc:r,o})}function sr(e,t,i){const r=!!ke(i.round)||i.round,n=(e,n)=>(e=Ge(e,r||i.calendary?0:2,!0),t.loc.clone(i).relFormatter(i).format(e,n)),s=r=>i.calendary?t.hasSame(e,r)?0:t.startOf(r).diff(e.startOf(r),r).get(r):t.diff(e,r).get(r);if(i.unit)return n(s(i.unit),i.unit);for(const e of i.units){const t=s(e);if(Math.abs(t)>=1)return n(t,e)}return n(e>t?-0:0,i.units[i.units.length-1])}function or(e){let t,i={};return e.length>0&&"object"==typeof e[e.length-1]?(i=e[e.length-1],t=Array.from(e).slice(0,e.length-1)):t=Array.from(e),[i,t]}class ar{constructor(e){const t=e.zone||fe.defaultZone;let i=e.invalid||(Number.isNaN(e.ts)?new ye("invalid input"):null)||(t.isValid?null:Zi(t));this.ts=ke(e.ts)?fe.now():e.ts;let r=null,n=null;if(!i)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[r,n]=[e.old.c,e.old.o];else{const e=t.offset(this.ts);r=Bi(this.ts,e),i=Number.isNaN(r.year)?new ye("invalid input"):null,r=i?null:r,n=i?null:e}this._zone=t,this.loc=e.loc||te.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=r,this.o=n,this.isLuxonDateTime=!0}static now(){return new ar({})}static local(){const[e,t]=or(arguments),[i,r,n,s,o,a,l]=t;return nr({year:i,month:r,day:n,hour:s,minute:o,second:a,millisecond:l},e)}static utc(){const[e,t]=or(arguments),[i,r,n,s,o,a,l]=t;return e.zone=re.utcInstance,nr({year:i,month:r,day:n,hour:s,minute:o,second:a,millisecond:l},e)}static fromJSDate(e,t={}){const i=(r=e,"[object Date]"===Object.prototype.toString.call(r)?e.valueOf():NaN);var r;if(Number.isNaN(i))return ar.invalid("invalid input");const n=se(t.zone,fe.defaultZone);return n.isValid?new ar({ts:i,zone:n,loc:te.fromObject(t)}):ar.invalid(Zi(n))}static fromMillis(e,t={}){if(Ne(e))return e<-ji||e>ji?ar.invalid("Timestamp out of range"):new ar({ts:e,zone:se(t.zone,fe.defaultZone),loc:te.fromObject(t)});throw new c(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(Ne(e))return new ar({ts:1e3*e,zone:se(t.zone,fe.defaultZone),loc:te.fromObject(t)});throw new c("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const i=se(t.zone,fe.defaultZone);if(!i.isValid)return ar.invalid(Zi(i));const r=te.fromObject(t),n=et(e,rr),{minDaysInFirstWeek:s,startOfWeek:o}=xe(n,r),l=fe.now(),c=ke(t.specificOffset)?i.offset(l):t.specificOffset,h=!ke(n.ordinal),u=!ke(n.year),p=!ke(n.month)||!ke(n.day),d=u||p,f=n.weekYear||n.weekNumber;if((d||h)&&f)throw new a("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(p&&h)throw new a("Can't mix ordinal dates with month/day");const y=f||n.weekday&&!d;let m,g,v=Bi(l,c);y?(m=tr,g=Xi,v=Te(v,s,o)):h?(m=ir,g=Qi,v=Ae(v)):(m=er,g=Ji);let _=!1;for(const e of m)ke(n[e])?n[e]=_?g[e]:v[e]:_=!0;const b=y?function(e,t=4,i=1){const r=Le(e.weekYear),n=je(e.weekNumber,1,Ke(e.weekYear,t,i)),s=je(e.weekday,1,7);return r?n?!s&&ve("weekday",e.weekday):ve("week",e.weekNumber):ve("weekYear",e.weekYear)}(n,s,o):h?function(e){const t=Le(e.year),i=je(e.ordinal,1,$e(e.year));return t?!i&&ve("ordinal",e.ordinal):ve("year",e.year)}(n):Ie(n),w=b||Ce(n);if(w)return ar.invalid(w);const M=y?Se(n,s,o):h?Ee(n):n,[T,S]=$i(M,c,i),A=new ar({ts:T,zone:i,o:S,loc:r});return n.weekday&&d&&e.weekday!==A.weekday?ar.invalid("mismatched weekday",`you can't specify both a weekday of ${n.weekday} and a date of ${A.toISO()}`):A}static fromISO(e,t={}){const[i,r]=function(e){return Mt(e,[Wt,Xt],[Kt,Qt],[Yt,ei],[Jt,ti])}(e);return qi(i,r,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[i,r]=function(e){return Mt(function(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(e),[Ut,Vt])}(e);return qi(i,r,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[i,r]=function(e){return Mt(e,[Gt,Ht],[Bt,Ht],[$t,qt])}(e);return qi(i,r,t,"HTTP",t)}static fromFormat(e,t,i={}){if(ke(e)||ke(t))throw new c("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:n=null}=i,s=te.fromOpts({locale:r,numberingSystem:n,defaultToEN:!0}),[o,a,l,h]=function(e,t,i){const{result:r,zone:n,specificOffset:s,invalidReason:o}=Pi(e,t,i);return[r,n,s,o]}(s,e,t);return h?ar.invalid(h):qi(o,a,i,`format ${t}`,e,l)}static fromString(e,t,i={}){return ar.fromFormat(e,t,i)}static fromSQL(e,t={}){const[i,r]=function(e){return Mt(e,[ri,Xt],[ni,si])}(e);return qi(i,r,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new c("need to specify a reason the DateTime is invalid");const i=e instanceof ye?e:new ye(e,t);if(fe.throwOnInvalid)throw new n(i);return new ar({invalid:i})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const i=Di(e,te.fromObject(t));return i?i.map((e=>e?e.val:null)).join(""):null}static expandFormat(e,t={}){return Ri(vt.parseFormat(e),te.fromObject(t)).map((e=>e.val)).join("")}get(e){return this[e]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?zi(this).weekYear:NaN}get weekNumber(){return this.isValid?zi(this).weekNumber:NaN}get weekday(){return this.isValid?zi(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Ui(this).weekday:NaN}get localWeekNumber(){return this.isValid?Ui(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Ui(this).weekYear:NaN}get ordinal(){return this.isValid?Ae(this.c).ordinal:NaN}get monthShort(){return this.isValid?vi.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?vi.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?vi.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?vi.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,i=qe(this.c),r=this.zone.offset(i-e),n=this.zone.offset(i+e),s=this.zone.offset(i-r*t),o=this.zone.offset(i-n*t);if(s===o)return[this];const a=i-s*t,l=i-o*t,c=Bi(a,s),h=Bi(l,o);return c.hour===h.hour&&c.minute===h.minute&&c.second===h.second&&c.millisecond===h.millisecond?[Vi(this,{ts:a}),Vi(this,{ts:l})]:[this]}get isInLeapYear(){return Be(this.year)}get daysInMonth(){return He(this.year,this.month)}get daysInYear(){return this.isValid?$e(this.year):NaN}get weeksInWeekYear(){return this.isValid?Ke(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Ke(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:i,calendar:r}=vt.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:i,outputCalendar:r}}toUTC(e=0,t={}){return this.setZone(re.instance(e),t)}toLocal(){return this.setZone(fe.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:i=!1}={}){if((e=se(e,fe.defaultZone)).equals(this.zone))return this;if(e.isValid){let r=this.ts;if(t||i){const t=e.offset(this.ts),i=this.toObject();[r]=$i(i,t,e)}return Vi(this,{ts:r,zone:e})}return ar.invalid(Zi(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:i}={}){return Vi(this,{loc:this.loc.clone({locale:e,numberingSystem:t,outputCalendar:i})})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=et(e,rr),{minDaysInFirstWeek:i,startOfWeek:r}=xe(t,this.loc),n=!ke(t.weekYear)||!ke(t.weekNumber)||!ke(t.weekday),s=!ke(t.ordinal),o=!ke(t.year),l=!ke(t.month)||!ke(t.day),c=o||l,h=t.weekYear||t.weekNumber;if((c||s)&&h)throw new a("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&s)throw new a("Can't mix ordinal dates with month/day");let u;n?u=Se({...Te(this.c,i,r),...t},i,r):ke(t.ordinal)?(u={...this.toObject(),...t},ke(t.day)&&(u.day=Math.min(He(u.year,u.month),u.day))):u=Ee({...Ae(this.c),...t});const[p,d]=$i(u,this.o,this.zone);return Vi(this,{ts:p,o:d})}plus(e){return this.isValid?Vi(this,Hi(this,yi.fromDurationLike(e))):this}minus(e){return this.isValid?Vi(this,Hi(this,yi.fromDurationLike(e).negate())):this}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const i={},r=yi.normalizeUnit(e);switch(r){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0}if("weeks"===r)if(t){const e=this.loc.getStartOfWeek(),{weekday:t}=this;t<e&&(i.weekNumber=this.weekNumber-1),i.weekday=e}else i.weekday=1;if("quarters"===r){const e=Math.ceil(this.month/3);i.month=3*(e-1)+1}return this.set(i)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?vt.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):Fi}toLocaleString(e=f,t={}){return this.isValid?vt.create(this.loc.clone(t),e).formatDateTime(this):Fi}toLocaleParts(e={}){return this.isValid?vt.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:i=!1,includeOffset:r=!0,extendedZone:n=!1}={}){if(!this.isValid)return null;const s="extended"===e;let o=Ki(this,s);return o+="T",o+=Yi(this,s,t,i,r,n),o}toISODate({format:e="extended"}={}){return this.isValid?Ki(this,"extended"===e):null}toISOWeekDate(){return Wi(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:i=!0,includePrefix:r=!1,extendedZone:n=!1,format:s="extended"}={}){return this.isValid?(r?"T":"")+Yi(this,"extended"===s,t,e,i,n):null}toRFC2822(){return Wi(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Wi(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Ki(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:i=!0}={}){let r="HH:mm:ss.SSS";return(t||e)&&(i&&(r+=" "),t?r+="z":e&&(r+="ZZ")),Wi(this,r,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Fi}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",i={}){if(!this.isValid||!e.isValid)return yi.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...i},n=(a=t,Array.isArray(a)?a:[a]).map(yi.normalizeUnit),s=e.valueOf()>this.valueOf(),o=function(e,t,i,r){let[n,s,o,a]=function(e,t,i){const r=[["years",(e,t)=>t.year-e.year],["quarters",(e,t)=>t.quarter-e.quarter+4*(t.year-e.year)],["months",(e,t)=>t.month-e.month+12*(t.year-e.year)],["weeks",(e,t)=>{const i=_i(e,t);return(i-i%7)/7}],["days",_i]],n={},s=e;let o,a;for(const[l,c]of r)i.indexOf(l)>=0&&(o=l,n[l]=c(e,t),a=s.plus(n),a>t?(n[l]--,(e=s.plus(n))>t&&(a=e,n[l]--,e=s.plus(n))):e=a);return[e,n,a,o]}(e,t,i);const l=t-n,c=i.filter((e=>["hours","minutes","seconds","milliseconds"].indexOf(e)>=0));0===c.length&&(o<t&&(o=n.plus({[a]:1})),o!==n&&(s[a]=(s[a]||0)+l/(o-n)));const h=yi.fromObject(s,r);return c.length>0?yi.fromMillis(l,r).shiftTo(...c).plus(h):h}(s?this:e,s?e:this,n,r);var a;return s?o.negate():o}diffNow(e="milliseconds",t={}){return this.diff(ar.now(),e,t)}until(e){return this.isValid?gi.fromDateTimes(this,e):this}hasSame(e,t,i){if(!this.isValid)return!1;const r=e.valueOf(),n=this.setZone(e.zone,{keepLocalTime:!0});return n.startOf(t,i)<=r&&r<=n.endOf(t,i)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||ar.fromObject({},{zone:this.zone}),i=e.padding?this<t?-e.padding:e.padding:0;let r=["years","months","days","hours","minutes","seconds"],n=e.unit;return Array.isArray(e.unit)&&(r=e.unit,n=void 0),sr(t,this.plus(i),{...e,numeric:"always",units:r,unit:n})}toRelativeCalendar(e={}){return this.isValid?sr(e.base||ar.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(ar.isDateTime))throw new c("min requires all arguments be DateTimes");return Pe(e,(e=>e.valueOf()),Math.min)}static max(...e){if(!e.every(ar.isDateTime))throw new c("max requires all arguments be DateTimes");return Pe(e,(e=>e.valueOf()),Math.max)}static fromFormatExplain(e,t,i={}){const{locale:r=null,numberingSystem:n=null}=i;return Pi(te.fromOpts({locale:r,numberingSystem:n,defaultToEN:!0}),e,t)}static fromStringExplain(e,t,i={}){return ar.fromFormatExplain(e,t,i)}static get DATE_SHORT(){return f}static get DATE_MED(){return y}static get DATE_MED_WITH_WEEKDAY(){return m}static get DATE_FULL(){return g}static get DATE_HUGE(){return v}static get TIME_SIMPLE(){return _}static get TIME_WITH_SECONDS(){return b}static get TIME_WITH_SHORT_OFFSET(){return w}static get TIME_WITH_LONG_OFFSET(){return M}static get TIME_24_SIMPLE(){return T}static get TIME_24_WITH_SECONDS(){return S}static get TIME_24_WITH_SHORT_OFFSET(){return A}static get TIME_24_WITH_LONG_OFFSET(){return E}static get DATETIME_SHORT(){return x}static get DATETIME_SHORT_WITH_SECONDS(){return I}static get DATETIME_MED(){return C}static get DATETIME_MED_WITH_SECONDS(){return k}static get DATETIME_MED_WITH_WEEKDAY(){return N}static get DATETIME_FULL(){return L}static get DATETIME_FULL_WITH_SECONDS(){return O}static get DATETIME_HUGE(){return R}static get DATETIME_HUGE_WITH_SECONDS(){return P}}function lr(e){if(ar.isDateTime(e))return e;if(e&&e.valueOf&&Ne(e.valueOf()))return ar.fromJSDate(e);if(e&&"object"==typeof e)return ar.fromObject(e);throw new c(`Unknown datetime argument: ${e}, of type ${typeof e}`)}}},r={};function n(e){var t=r[e];if(void 0!==t)return t.exports;var s=r[e]={exports:{}};return i[e](s,s.exports,n),s.exports}n.m=i,n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,i)=>(n.f[i](e,t),t)),[])),n.u=e=>"chunks/"+e+".js",n.miniCssF=e=>"main.240375bbf67328fcc0ef.css",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="arcgis-typescript-template:",n.l=(i,r,s,o)=>{if(e[i])e[i].push(r);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),h=0;h<c.length;h++){var u=c[h];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+s){a=u;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=i),e[i]=[r];var p=(t,r)=>{a.onerror=a.onload=null,clearTimeout(d);var n=e[i];if(delete e[i],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((e=>e(r))),t)return t(r)},d=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),l&&document.head.appendChild(a)}},n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=i[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={8792:0,4229:0};n.f.j=(t,i)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var s=new Promise(((i,n)=>r=e[t]=[i,n]));i.push(r[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(i=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var s=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,r[1](a)}}),"chunk-"+t,t)}};var t=(t,i)=>{var r,s,[o,a,l]=i,c=0;if(o.some((t=>0!==e[t]))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);l&&l(n)}for(t&&t(i);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},i=self.webpackChunkarcgis_typescript_template=self.webpackChunkarcgis_typescript_template||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var s={};return(()=>{"use strict";n.r(s);var e,t=n(82392),i=n(6480),r=n(66801),o=n(93814),a=n(58842),l=n(48),c=n(95039),h=n(62991),u=n(84977),p=n(15565),d=n(11965),f=n(52686),y=n(80861),m=n(57725),g=n(37623),v=n(81482),_=n(8636),b=n(26325),w=n(48524),M=n(6273),T=(n(67498),n(85716));let S=e=class extends u.oY{constructor(e){super(e),this.type="none"}clone(){return new e({type:this.type})}};(0,t._)([(0,T.e)({none:"none",stayAbove:"stay-above"})],S.prototype,"type",void 0),S=e=(0,t._)([(0,b.$)("esri.ground.NavigationConstraint")],S);var A,E=n(93802);let x=A=class extends((0,u.Te)(d.A)){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new a.A;const t=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"!==e.type&&"base-elevation"!==e.type&&y.A.getLogger(this).error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)};this.addHandles([this.layers.on("after-add",(e=>t(e.item))),this.layers.on("after-remove",(e=>(e=>{e.parent=null})(e.item)))])}initialize(){this.when().catch((e=>{(0,g.zf)(e)||y.A.getLogger(this).error("#load()","Failed to load ground",e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)(0,m.pR)(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",(0,l.V)(e,this._get("layers")))}writeLayers(e,t,i,r){const n=[];e?(r={...r,layerContainerType:"ground"},e.forEach((e=>{if("write"in e){const t={};(0,c.GB)(e)().write(t,r)&&n.push(t)}else r?.messages&&r.messages.push(new h.A("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted in the ground`,{layer:e}))})),t.layers=n):t.layers=n}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return(0,f.g)(this,(e=>{e(this.layers)}))}async queryElevation(e,t){await this.load({signal:t?.signal});const{ElevationQuery:i}=await n.e(7513).then(n.bind(n,47513));(0,g.Te)(t);const r=new i,s=this.layers.filter(I).toArray();return r.queryAll(s,e,t)}async createElevationSampler(e,t){await this.load({signal:t?.signal});const{ElevationQuery:i}=await n.e(7513).then(n.bind(n,47513));(0,g.Te)(t);const r=new i,s=this.layers.filter(I).toArray();return r.createSamplerAll(s,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:(0,p.o8)(this.surfaceColor),navigationConstraint:(0,p.o8)(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new A({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}async _loadLayersFromJSON(e,t,i){const r=t?.origin||"web-scene",s=t?.portal||null,o=t?.url||null,{populateOperationalLayers:a}=await n.e(2387).then(n.bind(n,12387));(0,g.Te)(i);const l=[];if(e.layers&&Array.isArray(e.layers)){const t={context:{origin:r,url:o,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};l.push(a(this.layers,e.layers,t))}await Promise.allSettled(l)}};function I(e){return"elevation"===e.type||function(e){return e&&"createElevationSampler"in e}(e)}(0,t._)([(0,v.MZ)({json:{read:!1}})],x.prototype,"layers",null),(0,t._)([(0,w.K)("layers")],x.prototype,"writeLayers",null),(0,t._)([(0,v.MZ)({readOnly:!0})],x.prototype,"resourceInfo",void 0),(0,t._)([(0,v.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:_.jz,read:{reader:E.D,source:"transparency"},write:{writer:(e,t)=>{t.transparency=(0,E.p)(e)},target:"transparency"}}})],x.prototype,"opacity",void 0),(0,t._)([(0,v.MZ)({type:o.A,json:{type:[_.jz],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],x.prototype,"surfaceColor",void 0),(0,t._)([(0,v.MZ)({type:S,json:{write:!0}})],x.prototype,"navigationConstraint",void 0),x=A=(0,t._)([(0,b.$)("esri.Ground")],x);const C=x;var k=n(73783),N=n(53244),L=n(57888),O=n(77380),R=n(65452);function P(e){return!(!(e&&"object"==typeof e&&"loaded"in e&&e.loaded&&(0,R.BR)(e)?.operations?.supportsEditing&&"type"in e)||"editingEnabled"in e&&!(0,R.tk)(e))}var D=n(6183),F=n(80652);const j={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};var Z=n(18598),z=n(16115);let U=class extends((0,z.l)((0,Z.Q)(L.A.EventedMixin(k.A)))){constructor(e){super(e),this.allLayers=new N.A({getCollections:()=>[this.basemap?.baseLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:e=>"layers"in e?e.layers:null}),this.allTables=(0,F.Z)(this),this.basemap=null,this.editableLayers=new N.A({getCollections:()=>[this.allLayers],itemFilterFunction:P}),this.ground=new C,this._basemapCache=(0,D.VC)()}destroy(){(0,D.jj)(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=(0,m.pR)(this.basemap),(0,m.pR)(this.ground),this._set("ground",null)}castBasemap(e){return(0,D.dp)(e,this._basemapCache)}castGround(e){const t=function(e){let t=null;return"string"==typeof e?e in j?t=new C({resourceInfo:{data:{layers:[j[e]]}}}):y.A.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`):t=(0,_.dp)(C,e),t}(e);return t??this._get("ground")}findLayerById(e){return this.allLayers.find((t=>t.id===e))}findTableById(e){return this.allTables.find((t=>t.id===e))}};(0,t._)([(0,v.MZ)({readOnly:!0,dependsOn:[]})],U.prototype,"allLayers",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],U.prototype,"allTables",void 0),(0,t._)([(0,v.MZ)({type:r.default,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],U.prototype,"basemap",void 0),(0,t._)([(0,O.w)("basemap")],U.prototype,"castBasemap",null),(0,t._)([(0,v.MZ)({readOnly:!0})],U.prototype,"editableLayers",void 0),(0,t._)([(0,v.MZ)({type:C,nonNullable:!0})],U.prototype,"ground",void 0),(0,t._)([(0,O.w)("ground")],U.prototype,"castGround",null),(0,t._)([(0,v.MZ)()],U.prototype,"undoRedo",void 0),U=(0,t._)([(0,b.$)("esri.Map")],U);const V=U;var G=n(39702),B=n(3223),$=n(67214),H=n(71004),q=n(61985),W=n(19759),K=n(25376),Y=n(41446),J=n(44153),X=n(52442),Q=n(43305),ee=n(86074);let te=class extends u.oY{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};(0,t._)([(0,v.MZ)({type:String,json:{write:!0}})],te.prototype,"facilityIdField",void 0),(0,t._)([(0,v.MZ)({type:String,json:{write:!0}})],te.prototype,"layerId",void 0),(0,t._)([(0,v.MZ)({type:String,json:{write:!0}})],te.prototype,"nameField",void 0),(0,t._)([(0,v.MZ)({type:String,json:{write:!0}})],te.prototype,"siteIdField",void 0),(0,t._)([(0,v.MZ)({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],te.prototype,"sublayerId",void 0),te=(0,t._)([(0,b.$)("esri.layers.support.FacilityLayerInfo")],te);const ie=te;let re=class extends u.oY{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};(0,t._)([(0,v.MZ)({type:String,json:{write:!0}})],re.prototype,"facilityIdField",void 0),(0,t._)([(0,v.MZ)({type:String,json:{write:!0}})],re.prototype,"layerId",void 0),(0,t._)([(0,v.MZ)({type:String,json:{write:!0}})],re.prototype,"levelIdField",void 0),(0,t._)([(0,v.MZ)({type:String,json:{write:!0}})],re.prototype,"levelNumberField",void 0),(0,t._)([(0,v.MZ)({type:String,json:{write:!0}})],re.prototype,"longNameField",void 0),(0,t._)([(0,v.MZ)({type:String,json:{write:!0}})],re.prototype,"shortNameField",void 0),(0,t._)([(0,v.MZ)({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],re.prototype,"sublayerId",void 0),(0,t._)([(0,v.MZ)({type:String,json:{write:!0}})],re.prototype,"verticalOrderField",void 0),re=(0,t._)([(0,b.$)("esri.layers.support.LevelLayerInfo")],re);const ne=re;let se=class extends u.oY{constructor(e){super(e),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};(0,t._)([(0,v.MZ)({type:String,json:{write:!0}})],se.prototype,"layerId",void 0),(0,t._)([(0,v.MZ)({type:String,json:{write:!0}})],se.prototype,"nameField",void 0),(0,t._)([(0,v.MZ)({type:String,json:{write:!0}})],se.prototype,"siteIdField",void 0),(0,t._)([(0,v.MZ)({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],se.prototype,"sublayerId",void 0),se=(0,t._)([(0,b.$)("esri.layers.support.SiteLayerInfo")],se);const oe=se;let ae=class extends u.oY{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};(0,t._)([(0,v.MZ)({type:ne,json:{write:!0}})],ae.prototype,"levelLayer",void 0),(0,t._)([(0,v.MZ)({type:ie,json:{write:!0}})],ae.prototype,"facilityLayer",void 0),(0,t._)([(0,v.MZ)({type:oe,json:{write:!0}})],ae.prototype,"siteLayer",void 0),ae=(0,t._)([(0,b.$)("esri.support.MapFloorInfo")],ae);const le=ae;var ce=n(14755),he=n(1817);let ue=class extends((0,ce.O)(u.oY)){constructor(e){super(e),this.expression=null,this.returnType="string",this.title=null}};(0,t._)([(0,v.MZ)({type:String,json:{write:{isRequired:!0}}})],ue.prototype,"expression",void 0),(0,t._)([(0,v.MZ)({type:["number","string"],json:{write:!0}})],ue.prototype,"returnType",void 0),(0,t._)([(0,v.MZ)({type:String,json:{write:!0}})],ue.prototype,"title",void 0),ue=(0,t._)([(0,b.$)("esri.webdoc.geotriggersInfo.ExpressionInfo")],ue);const pe=ue,de=new he.J({deviceLocation:"device-location"});let fe=class extends((0,ce.O)(u.oY)){constructor(e){super(e),this.filterExpression=null,this.type="device-location"}};(0,t._)([(0,v.MZ)({type:pe,json:{write:!0}})],fe.prototype,"filterExpression",void 0),(0,t._)([(0,v.MZ)({type:de.apiValues,readOnly:!0,json:{type:de.jsonValues,read:de.read,write:de.write}})],fe.prototype,"type",void 0),fe=(0,t._)([(0,b.$)("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],fe);const ye=fe;var me=n(3313),ge=n(56053);let ve=class extends((0,ce.O)(u.oY)){constructor(e){super(e),this.geometry=null,this.where=null}};(0,t._)([(0,v.MZ)({types:me.yR,json:{read:ge.rS,write:!0}})],ve.prototype,"geometry",void 0),(0,t._)([(0,v.MZ)({type:String,json:{write:!0}})],ve.prototype,"where",void 0),ve=(0,t._)([(0,b.$)("esri.webdoc.geotriggersInfo.FeatureFilter")],ve);const _e=ve;let be=class extends((0,ce.O)(u.oY)){constructor(e){super(e),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};(0,t._)([(0,v.MZ)({type:String,json:{write:{overridePolicy(){return{isRequired:null===this.layerUrl}}}}})],be.prototype,"layerId",void 0),(0,t._)([(0,v.MZ)({type:String,json:{write:{overridePolicy(){return{isRequired:null===this.layerId}}}}})],be.prototype,"layerUrl",void 0),(0,t._)([(0,T.e)({featureLayer:"feature-layer"},{readOnly:!0})],be.prototype,"type",void 0),be=(0,t._)([(0,b.$)("esri.webdoc.geotriggersInfo.FeatureLayerSource")],be);const we=be;let Me=class extends((0,ce.O)(u.oY)){constructor(e){super(e),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};(0,t._)([(0,v.MZ)({type:we,json:{write:{isRequired:!0}}})],Me.prototype,"fenceSource",void 0),(0,t._)([(0,v.MZ)({type:_e,json:{write:!0}})],Me.prototype,"filter",void 0),(0,t._)([(0,v.MZ)({type:Number,json:{write:!0}})],Me.prototype,"bufferDistance",void 0),(0,t._)([(0,T.e)({features:"features"},{readOnly:!0})],Me.prototype,"type",void 0),Me=(0,t._)([(0,b.$)("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],Me);const Te=Me;let Se=class extends((0,ce.O)(u.oY)){constructor(e){super(e),this.type="fence"}};(0,t._)([(0,T.e)({fence:"fence"},{readOnly:!0})],Se.prototype,"type",void 0),Se=(0,t._)([(0,b.$)("esri.webdoc.geotriggersInfo.Geotrigger")],Se);const Ae=Se;let Ee=class extends((0,ce.O)(u.oY)){constructor(e){super(e),this.expressionInfo=null,this.requestedActions=null}};(0,t._)([(0,v.MZ)({type:pe,json:{write:!0}})],Ee.prototype,"expressionInfo",void 0),(0,t._)([(0,v.MZ)({type:[String],json:{write:!0}})],Ee.prototype,"requestedActions",void 0),Ee=(0,t._)([(0,b.$)("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],Ee);const xe=Ee,Ie=new he.J({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),Ce=new he.J({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),ke=new he.J({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});let Ne=class extends Ae{constructor(e){super(e),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};(0,t._)([(0,T.e)(Ie)],Ne.prototype,"enterExitRule",void 0),(0,t._)([(0,v.MZ)({type:ye,json:{write:{isRequired:!0}}})],Ne.prototype,"feed",void 0),(0,t._)([(0,T.e)(Ce)],Ne.prototype,"feedAccuracyMode",void 0),(0,t._)([(0,v.MZ)({type:ke.apiValues,json:{type:ke.jsonValues,read:ke.read,write:{writer:ke.write,isRequired:!0}}})],Ne.prototype,"fenceNotificationRule",void 0),(0,t._)([(0,v.MZ)({type:Te,json:{write:{isRequired:!0}}})],Ne.prototype,"fenceParameters",void 0),(0,t._)([(0,v.MZ)({type:String,json:{write:!0}})],Ne.prototype,"name",void 0),(0,t._)([(0,v.MZ)({type:xe,json:{write:!0}})],Ne.prototype,"notificationOptions",void 0),(0,t._)([(0,T.e)({fence:"fence"},{readOnly:!0})],Ne.prototype,"type",void 0),Ne=(0,t._)([(0,b.$)("esri.webdoc.geotriggersInfo.FenceGeotrigger")],Ne);const Le={base:Ae,key:"type",typeMap:{fence:Ne}};let Oe=class extends((0,ce.O)(u.oY)){constructor(e){super(e),this.geotriggers=null}};(0,t._)([(0,v.MZ)({types:[Le],json:{write:{isRequired:!0}}})],Oe.prototype,"geotriggers",void 0),Oe=(0,t._)([(0,b.$)("esri.webdoc.GeotriggersInfo")],Oe);const Re=Oe;var Pe,De=n(29759);let Fe=Pe=class extends u.oY{constructor(e){super(e),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new Pe((0,p.o8)({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};(0,t._)([(0,v.MZ)({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],Fe.prototype,"activeRange",void 0),(0,t._)([(0,v.MZ)({type:[Number],json:{write:!0}})],Fe.prototype,"currentRangeExtent",void 0),(0,t._)([(0,v.MZ)({type:[Number],json:{write:!0}})],Fe.prototype,"fullRangeExtent",void 0),Fe=Pe=(0,t._)([(0,b.$)("esri.webdoc.RangeInfo")],Fe);const je=Fe;var Ze;let ze=Ze=class extends u.oY{constructor(e){super(e),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new Ze((0,p.o8)({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};(0,t._)([(0,v.MZ)({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],ze.prototype,"enabled",void 0),(0,t._)([(0,v.MZ)({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],ze.prototype,"longNames",void 0),(0,t._)([(0,v.MZ)({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],ze.prototype,"minimized",void 0),(0,t._)([(0,v.MZ)({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],ze.prototype,"pinnedLevels",void 0),(0,t._)([(0,v.MZ)({type:String,json:{read:{source:"site"},write:{target:"site"}}})],ze.prototype,"site",void 0),(0,t._)([(0,v.MZ)({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],ze.prototype,"facility",void 0),(0,t._)([(0,v.MZ)({type:String,json:{read:{source:"level"},write:{target:"level"}}})],ze.prototype,"level",void 0),ze=Ze=(0,t._)([(0,b.$)("esri.webdoc.widgets.FloorFilter")],ze);const Ue=ze;var Ve;const Ge=new he.J({slider:"slider",picker:"picker"});let Be=Ve=class extends u.oY{constructor(e){super(e),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new Ve({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};(0,t._)([(0,v.MZ)({type:Ge.apiValues,nonNullable:!0,json:{type:Ge.jsonValues,default:null,read:{reader:Ge.read},write:{isRequired:!0,writer:Ge.write}}})],Be.prototype,"interactionMode",void 0),(0,t._)([(0,v.MZ)({type:Number,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const e=null!=this.stopInterval;return{enabled:!e,isRequired:!e}}}}})],Be.prototype,"numStops",void 0),(0,t._)([(0,v.MZ)({type:Number,json:{write:{overridePolicy(){return{isRequired:null==this.numStops}}}}})],Be.prototype,"stopInterval",void 0),Be=Ve=(0,t._)([(0,b.$)("esri.webdoc.widgets.Range")],Be);const $e=Be;var He,qe=n(54736),We=n(85101),Ke=n(21750);let Ye=He=class extends u.oY{constructor(e){super(e),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(e){if(!e)return;const t=null!=e[0]?new Date(e[0]):null,i=null!=e[1]?new Date(e[1]):null;return new qe.A({start:t,end:i})}writeCurrentTimeExtent(e,t,i){e&&(0,Ke.sM)(i,[null!=e.start?e.start.getTime():null,null!=e.end?e.end.getTime():null],t)}readFullTimeExtent(e,t){const i=t.properties;if(!i)return;const r=null!=i.endTime?new Date(i.endTime):null,n=null!=i.startTime?new Date(i.startTime):null;return new qe.A({start:n,end:r})}writeFullTimeExtent(e,t){if(!e)return;const i=t.properties=t.properties||{},r=e.end,n=e.start;r&&(i.endTime=null!=r?r.getTime():null),n&&(i.startTime=null!=n?n.getTime():null)}readStopInterval(e,t,i){return e?We.A.fromJSON({value:e.interval,unit:e.units},i):null}writeStopInterval(e,t,i,r){if(!e)return;const n=e.toJSON(r);(0,Ke.sM)(i,{interval:n.value,units:n.unit},t)}readStops(e){return e?.length?e.map((e=>new Date(e))):null}writeStops(e,t,i){e?.length&&(0,Ke.sM)(i,e.map((e=>e.getTime())),t)}clone(){return new He((0,p.o8)({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};(0,t._)([(0,v.MZ)({type:qe.A,json:{read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],Ye.prototype,"currentTimeExtent",void 0),(0,t._)([(0,K.w)("currentTimeExtent")],Ye.prototype,"readCurrentTimeExtent",null),(0,t._)([(0,w.K)("currentTimeExtent")],Ye.prototype,"writeCurrentTimeExtent",null),(0,t._)([(0,v.MZ)({type:qe.A,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],Ye.prototype,"fullTimeExtent",void 0),(0,t._)([(0,K.w)("fullTimeExtent")],Ye.prototype,"readFullTimeExtent",null),(0,t._)([(0,w.K)("fullTimeExtent")],Ye.prototype,"writeFullTimeExtent",null),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],Ye.prototype,"loop",void 0),(0,t._)([(0,v.MZ)({type:Number,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){const e=!!this.stopInterval,t=!!this.stops?.length,i=!(e||t);return{enabled:i,isRequired:i}}}}})],Ye.prototype,"numStops",void 0),(0,t._)([(0,v.MZ)({type:[1,2],nonNullable:!0,json:{read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],Ye.prototype,"numThumbs",void 0),(0,t._)([(0,v.MZ)({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],Ye.prototype,"stopDelay",void 0),(0,t._)([(0,v.MZ)({type:We.A,json:{read:{source:"properties.timeStopInterval"},write:{target:"properties.timeStopInterval",overridePolicy(){const e=null!=this.numStops,t=!!this.stops?.length;return{enabled:!t,isRequired:!(e||t)}}}}})],Ye.prototype,"stopInterval",void 0),(0,t._)([(0,K.w)("stopInterval")],Ye.prototype,"readStopInterval",null),(0,t._)([(0,w.K)("stopInterval")],Ye.prototype,"writeStopInterval",null),(0,t._)([(0,v.MZ)({type:[Date],json:{read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:null==this.numStops&&!this.stopInterval}}}}})],Ye.prototype,"stops",void 0),(0,t._)([(0,K.w)("stops")],Ye.prototype,"readStops",null),(0,t._)([(0,w.K)("stops")],Ye.prototype,"writeStops",null),Ye=He=(0,t._)([(0,b.$)("esri.webdoc.widgets.TimeSlider")],Ye);const Je=Ye;var Xe;let Qe=Xe=class extends u.oY{constructor(e){super(e),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new Xe((0,p.o8)({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};(0,t._)([(0,v.MZ)({type:$e,json:{write:!0}})],Qe.prototype,"range",void 0),(0,t._)([(0,v.MZ)({type:Je,json:{write:!0}})],Qe.prototype,"timeSlider",void 0),(0,t._)([(0,v.MZ)({type:Ue,json:{write:!0}})],Qe.prototype,"floorFilter",void 0),Qe=Xe=(0,t._)([(0,b.$)("esri.webdoc.Widgets")],Qe);const et=Qe,tt={width:600,height:400},it=1.5;var rt=n(64672),nt=n(83382),st=n(10069),ot=n(35497),at=n(15697);function lt(e,t,i){const r={context:{...i,layerContainerType:"operational-layers"}};return e.portalItem&&(r.context.portal=e.portalItem.portal||nt.A.getDefault()),n.e(2387).then(n.bind(n,12387)).then((({populateOperationalLayers:i})=>{const n=[],s=t.operationalLayers;s?.length&&n.push(i(e.layers,s,r));const o={...r,context:{...r.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},a=t.tables;return a?.length&&n.push(i(e.tables,a,o)),Promise.allSettled(n).then((()=>{}))}))}var ct=n(52380);function ht(e){return{enabled:!!e?.length}}var ut,pt=n(94832);let dt=ut=class extends u.oY{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new ut({exactMatch:this.exactMatch,type:this.type,name:this.name})}};(0,t._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],dt.prototype,"exactMatch",void 0),(0,t._)([(0,v.MZ)({type:String,json:{write:!0}})],dt.prototype,"name",void 0),(0,t._)([(0,T.e)(pt.m)],dt.prototype,"type",void 0),dt=ut=(0,t._)([(0,b.$)("esri.webdoc.applicationProperties.SearchLayerField")],dt);const ft=dt;var yt;let mt=yt=class extends u.oY{constructor(e){super(e),this.field=null,this.id=null,this.subLayer=null}clone(){return new yt((0,p.o8)({field:this.field,id:this.id,subLayer:this.subLayer}))}};(0,t._)([(0,v.MZ)({type:ft,json:{write:{isRequired:!0}}})],mt.prototype,"field",void 0),(0,t._)([(0,v.MZ)({type:String,json:{write:{isRequired:!0}}})],mt.prototype,"id",void 0),(0,t._)([(0,v.MZ)({type:_.jz,json:{write:!0}})],mt.prototype,"subLayer",void 0),mt=yt=(0,t._)([(0,b.$)("esri.webdoc.applicationProperties.SearchLayer")],mt);const gt=mt;var vt;let _t=vt=class extends u.oY{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new vt({exactMatch:this.exactMatch,type:this.type,name:this.name})}};(0,t._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],_t.prototype,"exactMatch",void 0),(0,t._)([(0,v.MZ)({type:String,json:{write:!0}})],_t.prototype,"name",void 0),(0,t._)([(0,T.e)(pt.m)],_t.prototype,"type",void 0),_t=vt=(0,t._)([(0,b.$)("esri.webdoc.applicationProperties.SearchTableField")],_t);const bt=_t;var wt;let Mt=wt=class extends u.oY{constructor(e){super(e),this.field=null,this.id=null}clone(){return new wt((0,p.o8)({field:this.field,id:this.id}))}};(0,t._)([(0,v.MZ)({type:bt,json:{write:{isRequired:!0}}})],Mt.prototype,"field",void 0),(0,t._)([(0,v.MZ)({type:String,json:{write:{isRequired:!0}}})],Mt.prototype,"id",void 0),Mt=wt=(0,t._)([(0,b.$)("esri.webdoc.applicationProperties.SearchTable")],Mt);const Tt=Mt;var St;const At=a.A.ofType(gt),Et=a.A.ofType(Tt);let xt=St=class extends u.oY{constructor(e){super(e),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new At,this.tables=new Et}readAddressSearchEnabled(e){return!e}writeAddressSearchEnabled(e,t,i){t[i]=!e}clone(){return new St((0,p.o8)({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],xt.prototype,"addressSearchEnabled",void 0),(0,t._)([(0,K.w)("addressSearchEnabled")],xt.prototype,"readAddressSearchEnabled",null),(0,t._)([(0,w.K)("addressSearchEnabled")],xt.prototype,"writeAddressSearchEnabled",null),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],xt.prototype,"enabled",void 0),(0,t._)([(0,v.MZ)({type:String,json:{write:!0}})],xt.prototype,"hintText",void 0),(0,t._)([(0,v.MZ)({type:At,json:{write:{overridePolicy:ht},origins:{"web-scene":{write:{isRequired:!0}}}}})],xt.prototype,"layers",void 0),(0,t._)([(0,v.MZ)({type:Et,json:{read:!0,write:{overridePolicy:ht}}})],xt.prototype,"tables",void 0),xt=St=(0,t._)([(0,b.$)("esri.webdoc.applicationProperties.Search")],xt);const It=xt;var Ct;let kt=Ct=class extends u.oY{constructor(e){super(e),this.search=null}clone(){return new Ct((0,p.o8)({search:this.search}))}};(0,t._)([(0,v.MZ)({type:It,json:{write:!0}})],kt.prototype,"search",void 0),kt=Ct=(0,t._)([(0,b.$)("esri.webdoc.applicationProperties.Viewing")],kt);const Nt=kt;var Lt;let Ot=Lt=class extends u.oY{constructor(e){super(e),this.editing=null,this.offline=null,this.viewing=null}clone(){return new Lt((0,p.o8)({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};(0,t._)([(0,v.MZ)({json:{write:!0}})],Ot.prototype,"editing",void 0),(0,t._)([(0,v.MZ)({json:{write:!0}})],Ot.prototype,"offline",void 0),(0,t._)([(0,v.MZ)({type:Nt,json:{write:!0}})],Ot.prototype,"viewing",void 0),Ot=Lt=(0,t._)([(0,b.$)("esri.webmap.ApplicationProperties")],Ot);const Rt=Ot;var Pt,Dt=n(23377);let Ft=Pt=class extends u.oY{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}get isSecureUrl(){return!!(e=this.url)&&/^https:\/\/.*/i.test(e);var e}get isDataURI(){return!!(e=this.url)&&/data:([-\w]+\/[-+\w.]+)?(;?\w+=[-\w]+)*(;base64)?,.*/gu.test(e);var e}clone(){return new Pt({url:this.url})}};var jt;(0,t._)([(0,v.MZ)({type:String,json:{write:{isRequired:!0}}})],Ft.prototype,"url",void 0),(0,t._)([(0,v.MZ)()],Ft.prototype,"isSecureUrl",null),(0,t._)([(0,v.MZ)()],Ft.prototype,"isDataURI",null),Ft=Pt=(0,t._)([(0,b.$)("esri.webdoc.support.SlideThumbnail")],Ft);let Zt=jt=class extends((0,Dt.sA)(u.oY)){constructor(e){super(e),this.name=null,this.thumbnail=new Ft,this.timeExtent=null}castThumbnail(e){return"string"==typeof e?new Ft({url:e}):(0,_.dp)(Ft,e)}set viewpoint(e){const{targetGeometry:t,scale:i}=e;null!=t&&"point"===t.type&&null==i&&y.A.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",e),this._set("viewpoint",e)}readViewpoint(e,t){const{extent:i,viewpoint:r}=t;return G.A.fromJSON(r||{targetGeometry:i})}writeViewpoint(e,t,i,r){if(!e)return;const{targetGeometry:n}=e;if(null==n||"extent"===n.type)null!=n&&(t.extent=n.toJSON()),t[i]=e.toJSON();else{const e="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";r?.messages?r.messages.push(new h.A("property:unsupported",e)):y.A.getLogger(this).error(e)}}clone(){return new jt((0,p.o8)({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};(0,t._)([(0,v.MZ)({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],Zt.prototype,"name",void 0),(0,t._)([(0,v.MZ)({type:Ft,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.url)})}}})],Zt.prototype,"thumbnail",void 0),(0,t._)([(0,O.w)("thumbnail")],Zt.prototype,"castThumbnail",null),(0,t._)([(0,v.MZ)({type:qe.A,json:{write:!0}})],Zt.prototype,"timeExtent",void 0),(0,t._)([(0,v.MZ)({type:G.A,nonNullable:!0,json:{write:!0}})],Zt.prototype,"viewpoint",null),(0,t._)([(0,K.w)("viewpoint",["extent","viewpoint"])],Zt.prototype,"readViewpoint",null),(0,t._)([(0,w.K)("viewpoint")],Zt.prototype,"writeViewpoint",null),Zt=jt=(0,t._)([(0,b.$)("esri.webmap.Bookmark")],Zt);const zt=Zt;var Ut,Vt=n(23375);let Gt=Ut=class extends u.oY{constructor(e){super(e),this.color=new o.A([0,0,0,1])}clone(){return new Ut((0,p.o8)({color:this.color}))}};(0,t._)([(0,v.MZ)({type:o.A,json:{write:!0}})],Gt.prototype,"color",void 0),Gt=Ut=(0,t._)([(0,b.$)("esri.webmap.background.ColorBackground")],Gt);const Bt=Gt;let $t=class extends((0,ce.O)(k.A)){constructor(e){super(e),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.timeZone=Vt.qU,this.viewpoint=null}};(0,t._)([(0,v.MZ)({type:Bt})],$t.prototype,"background",void 0),(0,t._)([(0,v.MZ)({type:je})],$t.prototype,"rangeInfo",void 0),(0,t._)([(0,v.MZ)({type:J.A})],$t.prototype,"spatialReference",void 0),(0,t._)([(0,v.MZ)({nonNullable:!0})],$t.prototype,"timeZone",void 0),(0,t._)([(0,v.MZ)({type:G.A})],$t.prototype,"viewpoint",void 0),$t=(0,t._)([(0,b.$)("esri.webmap.InitialViewProperties")],$t);const Ht=$t;var qt=n(27805);class Wt extends qt.R{constructor(e,t){super(e,t,"webmap")}}const Kt=new Wt(2,30),Yt="web-map",Jt=a.A.ofType(zt),Xt=a.A.ofType(X.default),Qt=new Map([["image/jpeg","jpeg"],["image/jpg","jpg"],["image/png","png"],["image/gif","gif"]]),ei=ee.mm.JSAPI,ti={currentVersion:Kt,createInitialViewProperties:()=>new Ht,parseVersion:Wt.parse,itemType:"Web Map",name:"webmap",origin:Yt};let ii=class extends((0,$.P)(d.A.LoadableMixin((0,H.g)(V)))){constructor(e){super(e),this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1,this._thumbnailFilename=null,this._updateFromPromise=null,this.resourceReferences={portalItem:null,paths:[]},this.applicationProperties=null,this.bookmarks=new Jt,this.floorInfo=null,this.geotriggersInfo=null,this.initialViewProperties=new Ht,this.ipsInfo=null,this.portalItem=null,this.presentation=null,this.sourceVersion=null,this.widgets=null,this.utilityNetworks=null,this._debouncedSaveOperations=(0,g.sg)((async(e,t,i)=>{const{save:r,saveAs:s}=await n.e(3320).then(n.bind(n,3320));switch(e){case De.X.SAVE:return r(ti,this,t);case De.X.SAVE_AS:return s(ti,this,i,t)}})),this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){if(this.portalItem=(0,m.pR)(this.portalItem),this.utilityNetworks){const e=this.utilityNetworks.removeAll();for(const t of e)t.destroy();this.utilityNetworks.destroy()}}initialize(){if(this.when().catch((e=>{y.A.getLogger(this).error("#load()","Failed to load web map",e)})),this.resourceInfo){let e;try{e=this._validateJSON(this.resourceInfo)}catch(e){return void this.addResolvingPromise(Promise.reject(e))}this.read(e)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,t){e&&this._isAuthoringAppSetByUser?t.authoringApp=e:t.authoringApp=ei}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,t){e&&this._isAuthoringAppVersionSetByUser?t.authoringAppVersion=e:t.authoringAppVersion=i.rE}readInitialViewProperties(e,t){const i=new Ht;t.background&&(i.background=Bt.fromJSON(t.background));const r=t.initialState?.viewpoint;return r&&(r.rotation&&Wt.parse(t.version||"","webmap").lessThan(2,20)&&"ArcGIS Pro"===t.authoringApp&&(r.rotation*=-1),i.viewpoint=G.A.fromJSON(r)),t.mapRangeInfo&&(i.rangeInfo=je.fromJSON(t.mapRangeInfo)),t.spatialReference&&(i.spatialReference=J.A.fromJSON(t.spatialReference)),t.timeZone&&(i.timeZone=t.timeZone),i}writeInitialViewProperties(e,t,i,r){e&&(e.background?.color&&(t.background=e.background.write({},r)),e.viewpoint&&(t.initialState={viewpoint:e.viewpoint.write({},r)}),e.rangeInfo&&(t.mapRangeInfo=e.rangeInfo.toJSON(r)),e.spatialReference&&(t.spatialReference=e.spatialReference.write({},r)),t.timeZone=e.timeZone)}writeLayers(e,t,i,r){t[i]=this._writeLayers(e,r,"operational-layers")}readSourceVersion(e,t){const[i,r]=t.version.split(".");return new Wt(parseInt(i,10),parseInt(r,10))}writeSourceVersion(e,t,i){t[i]=`${Kt.major}.${Kt.minor}`}writeTables(e,t,i,r){const n=this._writeLayers(e,r,"tables");n.length&&(t[i]=n)}get thumbnailUrl(){return this.portalItem?.thumbnailUrl||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}get updatingFromView(){return!!this._updateFromPromise}load(e){return this.addResolvingPromise(function(e,t){return t.resourceInfo?lt(t,t.resourceInfo,{origin:e.origin}):t.portalItem?.id?async function(e,t,i){if(await i.load().catch((t=>{throw new h.A(`${e.name}:load-portal-item`,"Failed to load portal item",{error:t})})),i.type!==e.itemType)throw new h.A(`${e.name}:invalid-portal-item`,`Invalid portal item type '${i.type}', expected '${e.itemType}'`,{type:i.type});const r=await i.fetchData();t.resourceInfo=r;const s=(0,st.v)(i,e.origin);await function(e,t,i,r){const n=function(e,t){const i=e.parseVersion(t.version||"",e.name);return e.currentVersion.validate(i),t.version=`${i.major}.${i.minor}`,t}(e,i);return t.read(n,r),lt(t,n,r)}(e,t,r,s),t.resourceReferences={portalItem:i,paths:s.readResourcePaths};const o=await async function(e,t,i){const r=e?.viewpoint?.targetGeometry;if(r)return null;const s=await async function(e,t,i){const r=e?.spatialReference,s=t?.extent;if(!r||!s)return null;if(r.isWGS84)return s.clone();if(r.isWebMercator)return(0,rt.Gh)(s);const{getGeometryServiceURL:o}=await n.e(7942).then(n.bind(n,57942));try{const e=await o(t),i=new at.A;return i.geometries=[s],i.outSpatialReference=r,(await(0,ot.C)(e,i))[0]}catch(e){i.error("Error projecting item's extent:",e)}return null}(e,t,i);return s?new G.A({targetGeometry:s}):null}(t.initialViewProperties,i,y.A.getLogger(t));if(o){const i=t.initialViewProperties?.clone()??e.createInitialViewProperties();i.viewpoint=o,t.initialViewProperties=i}}(e,t,t.portalItem):Promise.resolve()}(ti,this)),Promise.resolve(this)}loadAll(){return(0,f.g)(this,(e=>{e(this.ground,this.basemap,this.layers,this.tables)}))}read(e,t){t={...t,origin:Yt};const i=this._getAuthoringPropsState();(0,Y.t)(this,e,(t=>super.read(e,t)),t),this._restoreAuthoringPropsFromState(i)}write(e,t){if("loaded"!==this.loadStatus){const e=new h.A("webmap:not-loaded","Web map must be loaded before it can be serialized");throw y.A.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),e}return this._removeDanglingLayerRefs(),t={...t,origin:Yt,restrictedWebMapWriting:!0,webmap:this},super.write(e,t)}async save(e){return this._debouncedSaveOperations(De.X.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(De.X.SAVE_AS,t,e)}async updateFrom(e,t){const i=this._updateFromInternal(e,t);this._updateFromPromise=i,await i,i===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(e){const t=this.resourceInfo;return this._collectAllLayersJSON([...t?.baseMap?.baseMapLayers||[],...t?.operationalLayers||[],...this.basemap?.resourceInfo?.data?.baseMapLayers||[]]).find((t=>t.id===e.id))}async updateItemThumbnail(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await(this.portalItem?.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename})),this._clearThumbnailOverride())}getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:(0,W.rs)(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_collectAllLayersJSON(e){return e.reduce(((e,t)=>(e.push(t),"GroupLayer"===t.layerType&&(e=e.concat(this._collectAllLayersJSON(t.layers||[]))),e)),[])}_writeLayers(e,t,i){return t={...t,layerContainerType:i},e.map((e=>(0,ct.CJ)(e,"tables"===i?null:this.getLayerJSONFromResourceInfo(e),t))).filter(B.Ru).toArray()}_validateJSON(e){const t=Wt.parse(e.version||"","webmap");return Kt.validate(t),e.version=`${t.major}.${t.minor}`,e}_removeDanglingLayerRefs(){const e=this.applicationProperties,t=e?.viewing?.search,i=e=>this.allLayers.some((t=>t.id===e));if(t&&t.layers&&(t.layers=t.layers.filter((e=>i(e.id)))),t&&t.tables&&(t.tables=t.tables.filter((e=>this.tables.some((t=>t.id===e.id))))),e){const t=e.editing?.locationTracking;t?.info&&!i(t.info.layerId)&&(e.editing=null)}const r=this.presentation?.slides;r&&r.forEach((e=>{e.visibleLayers&&(e.visibleLayers=e.visibleLayers.filter((e=>i(e.id))))}))}async _updateFromInternal(e,t){if(t??={},await(0,q.C_)((()=>e.ready)),this._updateInitialViewProperties(e,t),e.map===this)for(const t of e.allLayerViews)"visible"in t&&"visible"in t.layer&&t._isOverridden("visible")&&(t.layer.visible=t.visible),"featureEffect"in t&&"featureEffect"in t.layer&&t._isOverridden("featureEffect")&&(t.layer.featureEffect=t.featureEffect);await this._updateThumbnailUrl(e,t)}_updateInitialViewProperties(e,t){if(t.backgroundExcluded||(this.initialViewProperties.background=e.background?.clone()),this.initialViewProperties.spatialReference=e.spatialReference?.clone(),this.initialViewProperties.timeZone=e.timeZone,t.viewpointExcluded||(this.initialViewProperties.viewpoint=new G.A({rotation:e.rotation,scale:t.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!t.widgetsExcluded)for(const t of e.persistableViewModels)t.updateWebDocument(this)}_getViewExtent(e){const t=e.center.clone().normalize(),i=e.extent.clone(),r=i.width/2;return i.xmin=t.x-r,i.xmax=t.x+r,i}async _updateThumbnailUrl(e,t){if(t.thumbnailExcluded)return;const i=function(e,t){t=t||tt;let{width:i,height:r}=t;const n=i/r;return n<it?r=i/it:n>it&&(i=r*it),i>e.width&&(r*=e.width/i,i=e.width),r>e.height&&(i*=e.height/r,r=e.height),{width:Math.round(i),height:Math.round(r)}}(e,t.thumbnailSize),r=await e.takeScreenshot({format:"png",width:i.width,height:i.height});this._setAutoGeneratedThumbnail(r.dataUrl)}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if((0,W.DB)(e)){const t=(0,W.r$)(e),i=t?.mediaType,r=i&&Qt.get(i.toLowerCase())||null,n=`thumbnail${Date.now()}`;return r?`${n}.${r}`:n}return null}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}static fromJSON(e){const t=e;if(!t)throw new h.A("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:t})}};ii.VERSION=Kt,(0,t._)([(0,v.MZ)()],ii.prototype,"_updateFromPromise",void 0),(0,t._)([(0,v.MZ)({type:Rt,json:{write:!0}})],ii.prototype,"applicationProperties",void 0),(0,t._)([(0,v.MZ)({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],ii.prototype,"authoringApp",null),(0,t._)([(0,w.K)("authoringApp")],ii.prototype,"writeAuthoringApp",null),(0,t._)([(0,v.MZ)({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],ii.prototype,"authoringAppVersion",null),(0,t._)([(0,w.K)("authoringAppVersion")],ii.prototype,"writeAuthoringAppVersion",null),(0,t._)([(0,v.MZ)({type:Jt,json:{write:{overridePolicy:e=>({enabled:!!(e&&e.length>0),ignoreOrigin:!0})}}})],ii.prototype,"bookmarks",void 0),(0,t._)([(0,v.MZ)({type:le,json:{name:"mapFloorInfo",write:!0}})],ii.prototype,"floorInfo",void 0),(0,t._)([(0,v.MZ)({type:Re,json:{write:!0}})],ii.prototype,"geotriggersInfo",void 0),(0,t._)([(0,v.MZ)({type:Ht,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference","timeZone"]},write:{ignoreOrigin:!0,target:{background:{type:Bt},"initialState.viewpoint":{type:G.A},mapRangeInfo:{type:je},spatialReference:{type:J.A},"timeZone:":{type:String}}}}})],ii.prototype,"initialViewProperties",void 0),(0,t._)([(0,K.w)("initialViewProperties")],ii.prototype,"readInitialViewProperties",null),(0,t._)([(0,w.K)("initialViewProperties")],ii.prototype,"writeInitialViewProperties",null),(0,t._)([(0,v.MZ)({json:{write:!0,name:"mapIPSInfo"}})],ii.prototype,"ipsInfo",void 0),(0,t._)([(0,v.MZ)({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],ii.prototype,"layers",void 0),(0,t._)([(0,w.K)("layers")],ii.prototype,"writeLayers",null),(0,t._)([(0,v.MZ)({type:Q.default})],ii.prototype,"portalItem",void 0),(0,t._)([(0,v.MZ)({json:{write:!0}})],ii.prototype,"presentation",void 0),(0,t._)([(0,v.MZ)()],ii.prototype,"resourceInfo",void 0),(0,t._)([(0,v.MZ)({readOnly:!0,type:Wt,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],ii.prototype,"sourceVersion",void 0),(0,t._)([(0,K.w)("sourceVersion")],ii.prototype,"readSourceVersion",null),(0,t._)([(0,w.K)("sourceVersion")],ii.prototype,"writeSourceVersion",null),(0,t._)([(0,v.MZ)({json:{read:!1,write:{ignoreOrigin:!0}}})],ii.prototype,"tables",void 0),(0,t._)([(0,w.K)("tables")],ii.prototype,"writeTables",null),(0,t._)([(0,v.MZ)()],ii.prototype,"thumbnailUrl",null),(0,t._)([(0,v.MZ)()],ii.prototype,"updatingFromView",null),(0,t._)([(0,v.MZ)({type:et,json:{write:!0}})],ii.prototype,"widgets",void 0),(0,t._)([(0,v.MZ)({type:Xt,json:{read:!0,write:!0}})],ii.prototype,"utilityNetworks",void 0),ii=(0,t._)([(0,b.$)("esri.WebMap")],ii);const ri=ii;var ni=n(32083),si=n(73462),oi=n(34561),ai=n(26574),li=n(50398);const ci={widthBreakpoint:{getValue(e){const t=e.viewSize[0],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,i=t[0],r=t[1],n=this.values;return r>=i?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},hi={xsmall:544,small:768,medium:992,large:1200};function ui(e,t){return t?ci[e].valueToClassName[t].split(" "):[]}const pi=e=>{let i=class extends e{constructor(...e){super(...e),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=hi}initialize(){this.addHandles((0,q.wB)((()=>[this.breakpoints,this.size]),(()=>this._updateClassNames()),q.Vh))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(e){if(e===this._get("breakpoints"))return;const t=function(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}(e);if(!t){const e=JSON.stringify(hi,null,2);console.warn("provided breakpoints are not valid, using defaults:"+e)}e=t?e:hi,this._set("breakpoints",{...e})}_updateClassNames(){if(!this.container)return;const e=li.A.acquire(),t=li.A.acquire();let i,r=!1;for(i in ci){const n=this[i],s=ci[i].getValue({viewSize:this.size,breakpoints:this.breakpoints});n!==s&&(r=!0,this[i]=s,ui(i,n).forEach((e=>t.push(e))),ui(i,s).forEach((t=>e.push(t))))}r&&(this._applyClassNameChanges(e,t),li.A.release(e),li.A.release(t))}_applyClassNameChanges(e,t){const i=this.container;i&&(t.forEach((e=>i.classList.remove(e))),e.forEach((e=>i.classList.add(e))))}_removeActiveClassNames(){const e=this.container;if(!e)return;let t;for(t in ci)ui(t,this[t]).forEach((t=>e.classList.remove(t)))}};return(0,t._)([(0,v.MZ)()],i.prototype,"breakpoints",null),(0,t._)([(0,v.MZ)()],i.prototype,"orientation",void 0),(0,t._)([(0,v.MZ)()],i.prototype,"widthBreakpoint",void 0),(0,t._)([(0,v.MZ)()],i.prototype,"heightBreakpoint",void 0),i=(0,t._)([(0,b.$)("esri.views.BreakpointsOwner")],i),i};n(39553);var di=n(28948),fi=n(92840),yi=n(9987),mi=n(68660),gi=(n(2980),n(58133));let vi=class extends k.A{constructor(){super(...arguments),this.items=new a.A,this._watchUpdatingTracking=new mi.U,this._callbacks=new Map,this._projector=(0,gi.F)(),this._hiddenProjector=(0,gi.F)()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange((()=>this.items),(e=>{for(const t of e.added){const e=()=>t.render();this._callbacks.set(t,e),this._projector.append(this.surface,e)}for(const t of e.removed){const e=this._projector.detach(this._callbacks.get(t));this.surface.removeChild(e.domNode),this._callbacks.delete(t)}}))}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach((e=>this._projector.detach(e))),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const t=this._hiddenSurface,i=this._hiddenProjector;let r;const n=()=>(r=e.render(),r);i.append(t,n),i.renderNow();const s={left:0,top:0,right:0,bottom:0};if(r?.domNode){const e=r.domNode.getBoundingClientRect();s.left=e.left,s.top=e.top,s.right=e.right,s.bottom=e.bottom}for(i.detach(n);t.firstChild;)t.removeChild(t.firstChild);return s}overlaps(e,t){const i=this.computeBoundingRect(e),r=this.computeBoundingRect(t);return Math.max(i.left,r.left)<=Math.min(i.right,r.right)&&Math.max(i.top,r.top)<=Math.min(i.bottom,r.bottom)}get hasVisibleItems(){return this.items.some((e=>e.visible))}async prepare(){await document.fonts.load(this._fontString()).catch((()=>{}))}renderCanvas(e,t){const i=!!t?.disableDecorations;if(!this.items.some((e=>e.visible&&!(i&&e.isDecoration))))return;const r=e.getContext("2d");r.save(),r.font=this._fontString(),this.items.forEach((e=>{i&&e.isDecoration||(r.save(),e.renderCanvas(r),r.restore())})),r.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};(0,t._)([(0,v.MZ)({readOnly:!0})],vi.prototype,"surface",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],vi.prototype,"items",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],vi.prototype,"needsRender",null),(0,t._)([(0,v.MZ)({readOnly:!0})],vi.prototype,"_watchUpdatingTracking",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],vi.prototype,"updating",null),vi=(0,t._)([(0,b.$)("esri.views.overlay.ViewOverlay")],vi);const _i=vi;var bi=n(4631),wi=n(10709);const Mi=[0,0];function Ti(e){e&&((0,di.Ie)(e),e.parentNode&&e.parentNode.removeChild(e))}const Si=750,Ai=e=>{let i=class extends e{constructor(...e){super(...e),this._freqInfo={freq:16,time:Si},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([(0,q.wB)((()=>this.cursor),(e=>{const{surface:t}=this;t&&t.setAttribute("data-cursor",e)})),(0,q.wB)((()=>this.navigating),(e=>{const{surface:t}=this;t&&t.setAttribute("data-navigating",e.toString())}))])}initialize(){const e=(0,M.A)("mac"),t=async()=>{e&&(await(0,q.C_)((()=>this.ready)),this.messagesCommon=await(0,wi.ud)("esri/t9n/common").catch((()=>{})))};t(),this.addHandles([(0,q.wB)((()=>this.ui),((e,t)=>this._handleUIChange(e,t)),q.Vh),this.on("focus",(()=>this.notifyChange("focused"))),this.on("blur",(()=>this.notifyChange("focused"))),(0,bi.oQ)(t),(0,q.wB)((()=>[this.surface,this.messagesCommon]),(()=>{e&&this.surface?.setAttribute("aria-label",this.messagesCommon?.ariaLabels?.navigationMacVoiceOver??"")}))])}destroy(){this.destroyed||(this.ui=(0,m.pR)(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(e){const t=this._get("container"),i=(0,di.$H)(e);if(i||"string"!=typeof e||y.A.getLogger(this).error("#container",`element with id '${e}' not found`),t===i)return;if(this._stopMeasuring(),t&&(t.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(Ti(this.root),this._set("root",null)),this.userContent&&((0,di.yC)(this.userContent,t),Ti(this.userContent),this._set("userContent",null))),!i)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);i.classList.add("esri-view");const r=document.createElement("div");r.className="esri-view-user-storage",(0,di.yC)(i,r),i.appendChild(r),this._set("userContent",r);const n=document.createElement("div");n.className="esri-view-root",i.insertBefore(n,i.firstChild),this._set("root",n);const s=document.createElement("div");s.className="esri-view-surface",s.setAttribute("role","application"),s.tabIndex=0,n.appendChild(s),this._set("surface",s);const o=new _i;n.appendChild(o.surface),this._set("overlay",o),this.addHandles((0,q.wB)((()=>o.needsRender),(e=>{e&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=(0,yi.mg)({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=(0,m.xt)(this._overlayRenderTaskHandle)}))),this.forceDOMReadyCycle(),this._set("container",i),this._startMeasuring()}get focused(){const e=document.activeElement===this.surface;return document.hasFocus()&&e}get size(){return[this.width,this.height]}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(e,t,i){const r=this.position;return e-=r?r[0]:0,t-=r?r[1]:0,i?(i[0]=e,i[1]=t):i=[e,t],i}containerToPage(e,t,i){const r=this.position;return e+=r?r[0]:0,t+=r?r[1]:0,i?(i[0]=e,i[1]=t):i=[e,t],i}_handleUIChange(e,t){this.removeHandles("ui"),t&&t!==e&&t.destroy(),e&&(e.view=this,this.addHandles((0,q.wB)((()=>this.root),(t=>{e.container=t?function(e){const t=document.createElement("div");return e.appendChild(t),t}(t):null}),q.Vh),"ui")),this._set("ui",e)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const e=this._freqInfo;e.freq=16,e.time=Si,this.addHandles([(0,fi.on)(window,"resize",(()=>{e.freq=16,e.time=Si})),(0,yi.mg)({prepare:e=>{const t=this._measure(),i=this._freqInfo;if(i.time+=e.deltaTime,t&&(i.freq=16,this._get("resizing")||this._set("resizing",!0)),i.time<i.freq)return;i.time=0;const r=this._position();i.freq=r||t?16:Math.min(Si,2*i.freq),!t&&i.freq>=512&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const e=this.container,t=e?e.clientWidth:0,i=e?e.clientHeight:0;if(0===t||0===i)return this.suspended||this._set("suspended",!0),!1;const r=this.width,n=this.height;return t===r&&i===n?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",t),this._set("height",i),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:r,oldHeight:n,width:t,height:i}),!0)}_position(){const e=this.container,t=this.position,i=e&&function(e){const t=(e.ownerDocument||window.document).defaultView,i=e.getBoundingClientRect();return Mi[0]=i.left+(t?.pageXOffset??0),Mi[1]=i.top+(t?.pageYOffset??0),Mi}(e);return!(!i||t&&i[0]===t[0]&&i[1]===t[1]||(this._set("position",[i[0],i[1]]),0))}forceDOMReadyCycle(){}};return(0,t._)([(0,v.MZ)()],i.prototype,"container",null),(0,t._)([(0,v.MZ)({readOnly:!0})],i.prototype,"focused",null),(0,t._)([(0,v.MZ)({readOnly:!0})],i.prototype,"height",void 0),(0,t._)([(0,v.MZ)()],i.prototype,"messagesCommon",void 0),(0,t._)([(0,v.MZ)({type:_i})],i.prototype,"overlay",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],i.prototype,"position",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],i.prototype,"resizing",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],i.prototype,"root",void 0),(0,t._)([(0,v.MZ)({value:null,readOnly:!0})],i.prototype,"size",null),(0,t._)([(0,v.MZ)({readOnly:!0})],i.prototype,"surface",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],i.prototype,"suspended",void 0),(0,t._)([(0,v.MZ)()],i.prototype,"ui",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],i.prototype,"userContent",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],i.prototype,"width",void 0),(0,t._)([(0,v.MZ)()],i.prototype,"widthBreakpoint",void 0),i=(0,t._)([(0,b.$)("esri.views.DOMContainer")],i),i};var Ei=n(3132),xi=n(61090),Ii=n(82795);function Ci(e){return null!=e&&"open"in e&&"declaredClass"in e}function ki(e){return null!=e&&"declaredClass"in e&&"dockOptions"in e}const Ni=e=>{let i=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([(0,q.wB)((()=>[this.ui,this.popup]),(([e,t],i)=>{const r="popup";if(i){const[e,t]=i;e&&Ci(t)&&(t.view=null,ki(t)&&e.remove(t,r))}e&&Ci(t)&&(t.view=this,ki(t)&&e.add(t,{key:r,position:"manual",internal:!0}))}),q.Vh),this.on("click",(e=>{this.popup&&this.popupEnabled&&("mouse"!==e.pointerType||0===e.button)&&(!Ci(this.popup)&&"autoOpenEnabled"in this.popup&&!1===this.popup.autoOpenEnabled||(Ci(this.popup)?this.popup.viewModel.handleViewClick(e):e.async((async()=>{await this.setupPopup(),Ci(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(e)}))))}),Ii.o.WIDGET)]),(0,q.C_)((()=>this.ready&&this.popupEnabled&&!this.updating)).then((()=>{Promise.all([n.e(500),n.e(9589)]).then(n.bind(n,65057))}))}destroy(){this.destroyed||this.closePopup()}async openPopup(e){if(Ci(this.popup))return this.popup.open(e);try{if(await this.setupPopup(),!this.popup)return void y.A.getLogger(this).error(new h.A("view:null-popup","Popup is null and can't be opened"));this.popup.open(e)}catch{}}closePopup(){this._popupSetupTask?.abort(),Ci(this.popup)&&this.popup.close()}async fetchPopupFeatures(e,t){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(e,t),t)}async setupPopup(){if(this._popupSetupTask?.abort(),this.popup&&!Ci(this.popup))return this._popupSetupTask=(0,Ei.UT)((async e=>{const{default:t}=await Promise.all([n.e(500),n.e(9589)]).then(n.bind(n,65057));if((0,g.Te)(e),!this.popup||Ci(this.popup))return;const i=this.popup;delete i.open,delete i.close,this.popup=new t(i)})),this._popupSetupTask.promise}async _popupHitsToFeatures({location:e,hits:t},i){const r=[],n=[];let s=!1;const o=(0,g.YL)(i,(0,M.A)("popup-view-fetch-timeout")??Oi),a=e=>{const t=n.at(-1);return t&&t.layerView===e&&!s?t:(e=>{const t=new Li(e);return n.push(t),r.push(t.promise),t})(e)};for(const e of t)"graphic"in e?(a(e.layerView).graphics.push(e.graphic),s=!1):(r.push(e.layerView.fetchPopupFeaturesAtLocation(e.mapPoint,o)),s=!0);n.map((e=>e.resolve(o)));const l=(0,g.nA)(r).then((e=>e.filter((e=>!!e)).flat()));return{pendingFeatures:r,allGraphicsPromise:l,location:e}}async _getPopupHits(e,t){const{hits:i,location:r}=await this.popupHitTest(e);(0,g.Te)(t);const n=[];for(const e of i)if("graphic"in e){if(this._isValidPopupGraphic(e.graphic,t)){const t=this._isValidPopupGraphicsLayerView(e.layerView)?e.layerView:void 0;n.push({graphic:e.graphic,layerView:t})}}else this._isValidPopupLocationLayerView(e.layerView)&&n.push({mapPoint:e.mapPoint,layerView:e.layerView});return{hits:n,location:r}}_isValidPopupGraphic(e,t){return e&&!!e.getEffectivePopupTemplate(null!=t&&t.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(e){return!e||(!("layer"in e)||!e.suspended)&&"fetchPopupFeaturesFromGraphics"in e}_isValidPopupLocationLayerView(e){return(!("layer"in e)||!e.suspended)&&"fetchPopupFeaturesAtLocation"in e}};return(0,t._)([(0,v.MZ)({cast(e){return!e||Ci(e)||"object"==typeof e&&(e.open=e=>((0,xi.io)(y.A.getLogger(this),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"}),this.openPopup(e)),e.close=()=>((0,xi.io)(y.A.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"}),this.closePopup())),e}})],i.prototype,"popup",void 0),(0,t._)([(0,v.MZ)()],i.prototype,"popupEnabled",void 0),i=(0,t._)([(0,b.$)("esri.views.PopupView")],i),i};class Li{constructor(e){this.layerView=e,this._resolver=(0,g.Tw)(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(e){const{layerView:t,graphics:i,_resolver:r}=this;if(!t)return r.resolve(i),r.promise;let n;return t.fetchPopupFeaturesFromGraphics(i,e).catch((e=>(n=e,null))).then((e=>{e?r.resolve(e):r.reject(n)})),r.promise}}const Oi=5e3;var Ri=n(56802),Pi=n(70214),Di=n(15909),Fi=n(8e3),ji=n(21570),Zi=n(67488);let zi=class extends Di.X{constructor(e){super(e),this.addHandles(this.on("before-add",(e=>{null!=e.item&&e.item.parent===this.owner&&(y.A.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),e.preventDefault())})))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};zi=(0,t._)([(0,b.$)("esri.support.AnalysesCollection")],zi);var Ui=n(52796);let Vi=class extends k.A{constructor(e){super(e),this.view=null,this.baseLayerViews=new a.A,this.referenceLayerViews=new a.A,this._loadingHandle=(0,q.wB)((()=>this.view?.map?.basemap),(e=>{e&&e.load().catch((()=>{}))}),q.Vh)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(const e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){if(this.view&&this.view.suspended)return!1;const e=this.view?.map?.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some((e=>e.updating))||this.referenceLayerViews.some((e=>e.updating)))}};(0,t._)([(0,v.MZ)({constructOnly:!0})],Vi.prototype,"view",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Vi.prototype,"baseLayerViews",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Vi.prototype,"referenceLayerViews",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Vi.prototype,"suspended",null),(0,t._)([(0,v.MZ)({type:Boolean,readOnly:!0})],Vi.prototype,"updating",null),Vi=(0,t._)([(0,b.$)("esri.views.BasemapView")],Vi);var Gi=n(80294),Bi=n(44212);class $i{constructor(e,t,i){this.layer=e,this.view=t,this.layerViewImporter=i,this._controller=new AbortController,this._deferred=(0,g.Tw)(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,(0,g.u7)(this._controller.signal,(()=>{const t=new h.A("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(t)}))}tryRecycle(e){if(!this.done||!this.layerView||!function(e){return"tryRecycleWith"in e}(this.layerView))return null;const t=this.layer.type,i=this._controller.signal;for(let r=0;r<e.length;r++){const n=e[r];if(n.type!==t)continue;const s=this.layerView.tryRecycleWith(n,{signal:i});if(s){e.splice(r,1),this.layer=n;const t=this.layerView,i=t.view;return this.promise=Promise.race([s.then((()=>((0,g.Te)(this._controller.signal),n.emit("layerview-destroy",{view:i,layerView:t}),i.emit("layerview-destroy",{view:i,layerView:t}),n.emit("layerview-create",{view:i,layerView:t}),i.emit("layerview-create",{view:i,layerView:t}),t))),new Promise(((e,t)=>(0,g.u7)(this._controller.signal,(()=>t((0,g.NK)())))))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:t,view:i}=this;t.emit("layerview-destroy",{view:i,layerView:e}),i.emit("layerview-destroy",{layer:t,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:t,view:i}=this;this._map=i.map;try{let r,n;if(await t.load({signal:e}),t.prefetchResources&&await t.prefetchResources({signal:e}),function(e){return"createLayerView"in e&&null!=e.createLayerView}(t))r=await t.createLayerView(i,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(t))throw new h.A("layer:view-not-supported","No layerview implementation was found");const n=await this.layerViewImporter.importLayerView(t);(0,g.Te)(e),r="default"in n?new n.default({layer:t,view:i}):new n({layer:t,view:i})}const s=()=>{n=(0,m.xt)(n),r.destroyed||r.destroy(),r.layer=null,r.parent=null,r.view=null,this.done=!0};n=(0,g.u7)(e,s),(0,g.Te)(e);try{await r.when()}catch(e){throw s(),e}const o=this._map?.allLayers?.includes(t);if(!o)return s(),void this._deferred.reject(new h.A("view:no-layerview-for-layer","The layer has been removed from the map",{layer:t}));this.layerView=r,t.emit("layerview-create",{view:i,layerView:r}),i.emit("layerview-create",{layer:t,layerView:r}),this.done=!0,this._deferred.resolve(r)}catch(e){t.emit("layerview-create-error",{view:i,error:e}),i.emit("layerview-create-error",{layer:t,error:e}),this.done=!0,this._deferred.reject(new h.A("layerview:create-error","layerview creation failed",{layer:t,error:e}))}}}let Hi=class extends k.A{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new mi.U,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const e=this.view.map?.allLayers;if(e)for(const t of e)this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t)},this._reschedule=()=>this.destroyed?Promise.reject():(null==this._workPromise&&(this._workPromise=(0,g.Tw)(),this._workPromise.promise.catch((()=>{}))),this.removeHandles("reschedule"),this.addHandles((0,yi._)(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{if(this.destroyed)return;const e=this.view.map;if(this._map!==e&&(this.clear(),this._map=e),null==this._workPromise)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const t=new Set,i=[],r=this.view.ready,n=e=>{if(null!=e)for(const s of e)if(s){t.add(s);const e=this._layerLayerViewInfoMap.get(s);e&&r?e.start():e||this._recyclingInfoMap.has(s)||i.push(s),"layers"in s&&s.layers&&n(s.layers)}};for(const e of this._rootCollectionNames)n((0,Bi.Jt)(this,e));for(const[e,r]of this._layerLayerViewInfoMap)if(!t.has(e)){this._layerLayerViewInfoMap.delete(r.layer);const e=r.tryRecycle(i);e?(this.notifyChange("updating"),this._recyclingInfoMap.set(r.layer,r),e.then((()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(r.layer),this._layerLayerViewInfoMap.set(r.layer,r),this._reschedule()})).catch((()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(r.layer),r.destroy(),this._reschedule()}))):r.destroy()}for(const[e,i]of this._recyclingInfoMap)t.has(e)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(i.layer),i.destroy());for(const e of i)this._createLayerView(e);this._refreshCollections();const s=[e?.ground?.layers,e?.basemap?.baseLayers,e?.basemap?.referenceLayers,e?.layers].filter((e=>!!e));t.forEach((e=>"layers"in e&&s.push(e.layers))),this.addHandles(s.map((e=>this._watchUpdatingTracking.addOnCollectionChange((()=>e),this._reschedule))),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([(0,q.on)((()=>this.view?.map?.allLayers),"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),(0,q.wB)((()=>{const e=this.view,t=e?.map;return[t?.basemap,t?.ground,t?.layers,e?.ready]}),(()=>this._reschedule()),q.pc)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),(0,F.X)(this._recyclingInfoMap),(0,F.X)(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,null!=this._workPromise&&(this._workPromise.reject((0,g.NK)()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return null!=this._workPromise||this._watchUpdatingTracking.updating||(0,Gi.Bs)(this._layerLayerViewInfoMap,(e=>!e.done))||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){this.destroyed||((0,F.X)(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new h.A("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners((0,Bi.Jt)(this,e),(0,Bi.Jt)(this,t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,i){if(!e||!t)return void(t&&t.removeAll());let r=0;for(const n of e){const e=this._layerLayerViewInfoMap.get(n);if(!e?.layerView)continue;const s=e.layerView;s.layer=n,s.parent=i,t.at(r)!==s&&t.splice(r,0,s),n.layers&&this._populateLayerViewsOwners(n.layers,s.layerViews,s),r+=1}r<t.length&&t.splice(r,t.length)}_createLayerView(e){e.load().catch((()=>{})),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const t=new $i(e,this.view,this.layerViewImporter);t.promise.then((()=>this._refreshCollections()),(t=>{t&&((0,g.zf)(t)||"cancelled:layerview-create"===t.name)||y.A.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:t}),this._refreshCollections()})),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};(0,t._)([(0,v.MZ)()],Hi.prototype,"_workPromise",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Hi.prototype,"_watchUpdatingTracking",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Hi.prototype,"_layersToLayerViews",null),(0,t._)([(0,v.MZ)({readOnly:!0})],Hi.prototype,"_rootCollectionNames",null),(0,t._)([(0,v.MZ)()],Hi.prototype,"layerViewImporter",void 0),(0,t._)([(0,v.MZ)()],Hi.prototype,"supportsGround",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Hi.prototype,"updating",null),(0,t._)([(0,v.MZ)({readOnly:!0})],Hi.prototype,"updatingRemaining",null),(0,t._)([(0,v.MZ)({constructOnly:!0})],Hi.prototype,"view",void 0),Hi=(0,t._)([(0,b.$)("esri.views.LayerViewManager")],Hi);const qi=Hi;var Wi=n(23572);let Ki=class extends k.A{constructor(e){super(e),this.factor=1.5,this.offset=(0,Wi.tc)(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};(0,t._)([(0,v.MZ)({type:Number})],Ki.prototype,"factor",void 0),(0,t._)([(0,v.MZ)({nonNullable:!0})],Ki.prototype,"offset",void 0),(0,t._)([(0,v.MZ)()],Ki.prototype,"position",void 0),(0,t._)([(0,v.MZ)({type:Number,range:{min:0}})],Ki.prototype,"size",void 0),(0,t._)([(0,v.MZ)()],Ki.prototype,"maskUrl",void 0),(0,t._)([(0,v.MZ)()],Ki.prototype,"maskEnabled",void 0),(0,t._)([(0,v.MZ)()],Ki.prototype,"overlayUrl",void 0),(0,t._)([(0,v.MZ)()],Ki.prototype,"overlayEnabled",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Ki.prototype,"version",null),(0,t._)([(0,v.MZ)({type:Boolean})],Ki.prototype,"visible",void 0),Ki=(0,t._)([(0,b.$)("esri.views.Magnifier")],Ki);const Yi=Ki;var Ji=n(51074),Xi=n(98592),Qi=n(10591);let er=class extends L.A.EventedAccessor{constructor(e){super(e),this._selectionMap=new Ji.A,this._trashCan=[],this._layerEditHandles=new a.A,this._vizTaskId=0,this.showHighlight=!0}initialize(){this.addHandles([(0,q.wB)((()=>[this.view,this.showHighlight]),(()=>this._refreshVisualization())),(0,q.on)((()=>this.sources),"change",(e=>{const t=this._selectionMap;for(const i of e.removed)t.delete(i);this._refreshListeners(),this._refreshVisualization()}),{onListenerAdd:()=>this._refreshListeners()})]);const e=new a.A;this.view.when().then((()=>{this.view.map.allLayers.flatten((e=>"sublayers"in e&&e.sublayers?e.sublayers:null)).forEach((t=>{(tr(t)&&!(0,R.F2)(t)||(0,R.Sv)(t))&&e.add(t)})),this._set("sources",e)}))}destroy(){this._layerEditHandles.drain(m.xt)}get selections(){return Array.from(this._selectionMap.entries()).map((e=>{const[t,i]=e;return{layer:t,selection:[...i.selection]}}))}get count(){let e=0;for(const t of this._selectionMap.values())e+=t.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._get("sources")}set sources(e){this._set("sources",e)}async getSelectedFeatures(e,t={},i="layerView"){const{view:r,selections:n}=this,s=(void 0!==e?n.filter((t=>e.includes(t.layer))):n).filter((e=>e.selection.length>0)).map((async e=>{const{layer:n,selection:s}=e,o=(0,R.Sv)(n)?n.parent:n;if(null==o||!ir(o))return null;if("layer"===i)return nr(o,s,t);const a=await r.whenLayerView(o);return nr(a,s,t)}));return(await Promise.all(s)).filter((e=>null!==e))}updateSelection(e){const t=new Map;for(const[e,i]of this._selectionMap)t.set(e,[...i.selection]);let i=!1;const r=e.current.concat(e.added);for(const e of r){const r=e.sourceLayer,n=e.getObjectId();if(this.sources.includes(r)&&(tr(r)||(0,R.Sv)(r))&&null!==n){const e=(0,Gi.tE)(t,r,(()=>[]));e.includes(n)||(e.push(n),i=!0)}}for(const r of e.removed){const e=r.sourceLayer,n=r.getObjectId();if(this.sources.includes(e)&&(tr(e)||(0,R.Sv)(e))&&null!==n){const r=t.get(e),s=r?.indexOf(n);void 0!==s&&s>=0&&(r?.splice(s,1),i=!0)}}if(i){const{_selectionMap:e,_trashCan:i}=this,r=[];for(const[n,s]of t){const t=e.get(n);void 0!==t&&i.push(t),e.set(n,{selection:s}),r.push({layer:n,selection:s,...(0,B.iv)(void 0!==t?t.selection:[],s)})}this._onSelectionChange(r)}}setSelection(e,t){this._setSelection(e,t)}getSelection(e){const t=this._selectionMap.get(e);return t?.selection}appendToSelection(e,t){const i=this._selectionMap.get(e),r=void 0!==i?[...i.selection]:[];for(const e of t)r.includes(e)||r.push(e);this._setSelection(e,r)}removeFromSelection(e,t){const i=this._selectionMap.get(e);if(!i)return;const r=[];for(const e of i.selection)t.includes(e)||r.push(e);this._setSelection(e,r)}toggleInSelection(e,t){const i=this._selectionMap.get(e);if(!i||0===i.selection.length)return void this._setSelection(e,t);const r=new Set(i.selection),n=new Set(t),s=(0,Xi.BT)(r,n);this._setSelection(e,Array.from(s))}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const t=[];for(const[e,i]of this._selectionMap.entries())t.push({layer:e,added:[],removed:[...i.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(t)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){if(null==this.view||null==this.sources)return;for(this._vizTaskId++;this._trashCan.length>0;){const e=this._trashCan.pop();e?.highlightHandle?.remove()}const{sources:e,view:t,_selectionMap:i,showHighlight:r}=this,n=this._vizTaskId;for(const s of e){const e=i.get(s),o=(0,R.Sv)(s)?s.parent:s;null!=o&&ir(o)&&t.whenLayerView(o).then((t=>{e?.highlightHandle?.remove(),void 0!==e&&r&&n===this._vizTaskId&&"highlight"in t&&"function"==typeof t.highlight&&e.selection.length>0&&(e.highlightHandle=t.highlight(e.selection,"selection"))}))}}_refreshListeners(){this._layerEditHandles.drain(m.xt);for(const e of this.sources){const t=(0,R.Sv)(e)?e.parent:e;if(null!=t&&tr(t)){const i=t.on("edits",(t=>{this._handleEditChanges(t,e)}));this._layerEditHandles.push(i)}}}_handleEditChanges(e,t){if(void 0!==e.deletedFeatures&&e.deletedFeatures.length>0&&this._selectionMap.has(t)){const i=e.deletedFeatures.filter((e=>null==e.error)).map((e=>e.objectId)).filter(B.Ru);this.removeFromSelection(t,i)}}_setSelection(e,t){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const i=this._selectionMap.get(e);if(void 0===i||!rr(i,{selection:t})){void 0!==i&&this._trashCan.push(i),this._selectionMap.set(e,{selection:[...t]});const r={layer:e,selection:[...t],...(0,B.iv)(void 0!==i?i.selection:[],t)};this._onSelectionChange([r])}}};(0,t._)([(0,v.MZ)({readOnly:!0,nonNullable:!0})],er.prototype,"selections",null),(0,t._)([(0,v.MZ)({readOnly:!0,nonNullable:!0})],er.prototype,"count",null),(0,t._)([(0,v.MZ)({constructOnly:!0,nonNullable:!0})],er.prototype,"view",void 0),(0,t._)([(0,v.MZ)({readOnly:!0,nonNullable:!0})],er.prototype,"hasSelection",null),(0,t._)([(0,v.MZ)()],er.prototype,"showHighlight",void 0),(0,t._)([(0,v.MZ)()],er.prototype,"sources",null),er=(0,t._)([(0,b.$)("esri.views.SelectionManager")],er);const tr=e=>void 0!==e.createQuery&&void 0!==e.on,ir=e=>void 0!==e?.when,rr=(e,t)=>{if(null==e&&null==t)return!0;if(null!=e&&null==t||null==e&&null!=t)return!1;if(null!=e&&null!=t&&null!=e.selection&&null!=t.selection){const i=[...e.selection],r=[...t.selection];if(i.length!==r.length)return!1;i.sort(),r.sort();for(let e=0;e<i.length;e++)if(i[e]!==r[e])return!1}return!0},nr=async(e,t,i={})=>{let r;if((e=>void 0!==e.layer)(e)){const n=e;r=void 0===n?null:await n.queryFeatures(new Qi.A({...i,objectIds:t})).then((t=>({data:t,layer:e.layer})))}else{const n=e;r=void 0===n?null:await n.queryFeatures(new Qi.A({...i,objectIds:t})).then((e=>({data:e,layer:n})))}return r},sr=er;let or=class extends((0,ce.O)(k.A)){constructor(e){super(e),this.accentColor=new o.A([255,127,0]),this.textColor=new o.A([255,255,255])}};(0,t._)([(0,v.MZ)({type:o.A,nonNullable:!0})],or.prototype,"accentColor",void 0),(0,t._)([(0,v.MZ)({type:o.A,nonNullable:!0})],or.prototype,"textColor",void 0),or=(0,t._)([(0,b.$)("esri.views.Theme")],or);const ar=or;var lr=n(84807),cr=n(4506),hr=n(85368);n(98596);const ur=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],pr={};function dr(e){return!!pr[e]}ur.forEach((e=>{pr[e]=!0}));class fr{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach((({handler:e,priority:t},i)=>this.inputManager?.installHandlers(i,[e],t)))}disconnect(){this.inputManager&&this._handlers.forEach(((e,t)=>this.inputManager?.uninstallHandlers(t))),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,t,i,r){const n=Array.isArray(e)?e:e.split(",");if(!function(e){for(const t of e)if(!dr(t))return!1;return!0}(n))return n.some(dr)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let s,o;Array.isArray(t)?o=t:(s=t,o=[]),"function"==typeof i?s=i:r=i,r=null!=r?r:Ii.o.DEFAULT;const a=this._createUniqueGroupName(),l=new yr(this.view,n,o,s);this._handlers.set(a,{handler:l,priority:r});for(const e of n){const t=this._handlerCounts.get(e)||0;this._handlerCounts.set(e,t+1)}return this.inputManager&&this.inputManager.installHandlers(a,[l],r),(0,Pi.hA)((()=>this._removeHandler(a,n)))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,t){if(this._handlers.has(e)){this._handlers.delete(e);for(const e of t){const t=this._handlerCounts.get(e);void 0===t?console.error("Trying to remove handler for event that has no handlers registered: ",e):1===t?this._handlerCounts.delete(e):this._handlerCounts.set(e,t-1)}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}}class yr extends hr.l{constructor(e,t,i,r){super(!0),this._latestDragStart=void 0,this.view=e;for(const e of t)switch(e){case"click":this.registerIncoming("click",i,(e=>r(this._wrapClick(e))));break;case"double-click":this.registerIncoming("double-click",i,(e=>r(this._wrapDoubleClick(e))));break;case"immediate-click":this.registerIncoming("immediate-click",i,(e=>r(this._wrapImmediateClick(e))));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,(e=>r(this._wrapImmediateDoubleClick(e))));break;case"hold":this.registerIncoming("hold",i,(e=>r(this._wrapHold(e))));break;case"drag":this.registerIncoming("drag",i,(e=>{const t=this._wrapDrag(e);t&&r(t)}));break;case"key-down":this.registerIncoming("key-down",i,(e=>r(this._wrapKeyDown(e))));break;case"key-up":this.registerIncoming("key-up",i,(e=>r(this._wrapKeyUp(e))));break;case"pointer-down":this.registerIncoming("pointer-down",i,(e=>r(this._wrapPointer(e,"pointer-down"))));break;case"pointer-move":this.registerIncoming("pointer-move",i,(e=>r(this._wrapPointer(e,"pointer-move"))));break;case"pointer-up":this.registerIncoming("pointer-up",i,(e=>r(this._wrapPointer(e,"pointer-up"))));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,(e=>r(this._wrapPointerDrag(e))));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,(e=>r(this._wrapMouseWheel(e))));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,(e=>r(this._wrapPointer(e,"pointer-enter"))));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,(e=>r(this._wrapPointer(e,"pointer-leave"))));break;case"gamepad":this.registerIncoming("gamepad",i,(e=>{r(this._wrapGamepad(e))}));break;case"focus":this.registerIncoming("focus",i,(e=>{r(this._wrapFocus(e))}));break;case"blur":this.registerIncoming("blur",i,(e=>{r(this._wrapBlur(e))}))}}_wrapFocus(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapBlur(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapClick(e){const{pointerType:t,button:i,buttons:r,x:n,y:s,native:o,eventId:a}=e.data,{cancelable:l,timestamp:c}=e;return{type:"click",pointerType:t,button:i,buttons:r,x:n,y:s,native:o,timestamp:c,screenPoint:(0,Wi.tc)(n,s),mapPoint:this._getMapPoint(n,s),eventId:a,cancelable:l,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapDoubleClick(e){const{pointerType:t,button:i,buttons:r,x:n,y:s,native:o,eventId:a}=e.data,{cancelable:l,timestamp:c}=e;return{type:"double-click",pointerType:t,button:i,buttons:r,x:n,y:s,native:o,timestamp:c,mapPoint:this._getMapPoint(n,s),eventId:a,cancelable:l,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapImmediateClick(e){const{pointerType:t,button:i,buttons:r,x:n,y:s,native:o,eventId:a}=e.data,l=o.pointerId,{cancelable:c,timestamp:h}=e;return{type:"immediate-click",pointerId:l,pointerType:t,button:i,buttons:r,x:n,y:s,native:o,timestamp:h,mapPoint:this._getMapPoint(n,s),eventId:a,cancelable:c,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapImmediateDoubleClick(e){const{pointerType:t,button:i,buttons:r,x:n,y:s,native:o,eventId:a}=e.data,l=o.pointerId,{cancelable:c,timestamp:h}=e;return{type:"immediate-double-click",pointerId:l,pointerType:t,button:i,buttons:r,x:n,y:s,native:o,timestamp:h,mapPoint:this._getMapPoint(n,s),eventId:a,cancelable:c,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapHold(e){const{pointerType:t,button:i,buttons:r,x:n,y:s,native:o}=e.data,{cancelable:a,timestamp:l}=e;return{type:"hold",pointerType:t,button:i,buttons:r,x:n,y:s,native:o,timestamp:l,mapPoint:this._getMapPoint(n,s),cancelable:a,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_getMapPoint(e,t){return this.view.toMap((0,Wi.tc)(e,t),{exclude:[]})}_wrapDrag(e){const t=e.data,{x:i,y:r}=t.center,{action:n,pointerType:s,button:o}=t;if("start"===n&&(this._latestDragStart=t),!this._latestDragStart)return;const a=t.pointer.native,l=t.buttons,{cancelable:c,timestamp:h}=e,u={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return"end"===n&&(this._latestDragStart=void 0),{type:"drag",action:n,x:i,y:r,origin:u,pointerType:s,button:o,buttons:l,radius:t.radius,angle:(0,cr.KJ)(t.angle),native:a,timestamp:h,cancelable:c,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapKeyDown(e){const{key:t,repeat:i,native:r}=e.data,{cancelable:n,timestamp:s}=e;return{type:"key-down",key:t,repeat:i,native:r,timestamp:s,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapKeyUp(e){const{key:t,native:i}=e.data,{cancelable:r,timestamp:n}=e;return{type:"key-up",key:t,native:i,timestamp:n,cancelable:r,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapPointer(e,t){const{x:i,y:r,button:n,buttons:s,native:o,eventId:a}=e.data,l=o.pointerId,c=o.pointerType,{cancelable:h,timestamp:u}=e;return{type:t,x:i,y:r,pointerId:l,pointerType:c,button:n,buttons:s,native:o,timestamp:u,eventId:a,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapPointerDrag(e){const{x:t,y:i,buttons:r,native:n,eventId:s}=e.data.currentEvent,{button:o}=e.data.startEvent,a=e.data.startEvent.native.pointerId,l=e.data.startEvent.native.pointerType,c=e.data.action,h={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:u,timestamp:p}=e;return{type:"pointer-drag",x:t,y:i,pointerId:a,pointerType:l,button:o,buttons:r,action:c,origin:h,native:n,timestamp:p,eventId:s,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapMouseWheel(e){const{cancelable:t,data:i,timestamp:r}=e,{x:n,y:s,deltaY:o,native:a}=i;return{type:"mouse-wheel",x:n,y:s,deltaY:o,native:a,timestamp:r,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapGamepad(e){const{action:t,state:i,device:r}=e.data,{cancelable:n,timestamp:s}=e,{buttons:o,axes:a}=i;return{type:"gamepad",device:r,timestamp:s,action:t,buttons:o,axes:a,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}}var mr=n(10715);function gr(e){return e.visible&&null!=e.getEditableFlag&&e.getEditableFlag(mr.PK.USER)&&e.getEditableFlag(mr.PK.MANAGER)}var vr=n(88938),_r=n(20405);class br{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,t){const i=()=>e.stopPropagation();switch(e.type){case"pointer-move":wr(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(i(),"end"===e.action&&(this._stopDrag=!1));break;case"pointer-down":{if(!Mr(e))break;const r=(0,_r.ZV)(e),n=this._intersect(r,e.pointerType,t.forEachTool);if(null==n)break;const s=n.manipulator,o=n.tool;null==s||null==o||!s.interactive||s.grabbable&&s.grabbableForEvent(e)||!s.grabbing||s.dragging||this._releaseManipulatorBeforeDragging(s,e,t),null!=s&&null!=o&&s.interactive&&s.grabbable&&s.grabbableForEvent(e)&&!s.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:s,tool:o,start:r,pointerType:e.pointerType}),1===this._grabbedManipulators.size&&null==t.activeTool&&(this._revertToNullActiveTool=!0,t.setActiveTool(n.tool)),s.grabbing=!0,s.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:r}),i());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,t);break;case"pointer-drag":{if(!Mr(e))break;const r=this._grabbedManipulators.get(e.pointerId),n=r?.manipulator,s=r?.tool;if(null==n||null==s)break;const o=(0,_r.ZV)(e);o.x=(0,cr.qE)(o.x,0,t.view.width),o.y=(0,cr.qE)(o.y,0,t.view.height);const a=r.start,l=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":"update"!==e.action&&1!==this._grabbedManipulators.size||(n.dragging=!0,l?n.events.emit("drag",{action:"update",start:a,screenPoint:o}):n.events.emit("drag",{action:"start",start:a,screenPoint:o,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:s,manipulator:n,start:a}));break;case"end":n.dragging=!1,l&&n.events.emit("drag",{action:"end",start:a,screenPoint:o}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,t)}i();break}case"immediate-click":{const r=(0,_r.ZV)(e),n=this._intersect(r,e.pointerType,t.forEachTool);if(function(e){return!!e.native.shiftKey}(e)||t.forEachTool((e=>{if((null==n||n.tool!==e||e.automaticManipulatorSelection)&&e.manipulators){let t=!1;e.manipulators.forEach((({manipulator:e})=>{e.selected&&(e.selected=!1,t=!0)})),t&&e.onManipulatorSelectionChanged&&e.onManipulatorSelectionChanged()}})),null==n)break;const{manipulator:s,tool:o}=n;if(!s.interactive)break;s.selectable&&o.automaticManipulatorSelection&&(s.selected=!s.selected,o.onManipulatorSelectionChanged&&o.onManipulatorSelectionChanged());const a=e.native.shiftKey;s.events.emit("immediate-click",{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:i}),Tr(s,i);break}case"click":{const r=(0,_r.ZV)(e),n=this._intersect(r,e.pointerType,t.forEachTool),s=n?.manipulator;if(null==s||!s.interactive)break;const o=e.native.shiftKey;s.events.emit(e.type,{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:o}),i();break}case"double-click":{const r=(0,_r.ZV)(e),n=this._intersect(r,e.pointerType,t.forEachTool),s=null!=n?n.manipulator:null;if(null==s||!s.interactive)break;const o=e.native.shiftKey;s.events.emit("double-click",{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:o,stopPropagation:i}),Tr(s,i);break}case"immediate-double-click":{const r=(0,_r.ZV)(e),n=this._intersect(r,e.pointerType,t.forEachTool),s=null!=n?n.manipulator:null;if(null==s||!s.interactive)break;const o=e.native.shiftKey;s.events.emit("immediate-double-click",{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:o,stopPropagation:i}),Tr(s,i);break}}this._onFocusChange(t.forEachTool)}_releaseManipulatorBeforeDragging(e,t,i){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:(0,_r.ZV)(t)}),this._grabbedManipulators.forEach((({manipulator:t},i)=>{t===e&&this._grabbedManipulators.delete(i)})),this._afterManipulatorRelease(i.setActiveTool)}_handlePointerEnd(e,t){const i=this._grabbedManipulators.get(e.pointerId)?.manipulator;null!=i&&i.grabbing&&(i.grabbing=!1,i.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:(0,_r.ZV)(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(t.setActiveTool))}_cursorFromMap(e){let t=null;return(0,Gi.Bs)(e,(({manipulator:e})=>!(null==e||!e.interactive||(e.grabbing&&e.grabCursor?(t=e.grabCursor,0):!e.cursor||(t=e.cursor,0))))),t}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const t=new Set,i=new Set;this._grabbedManipulators.forEach((({tool:e})=>{t.add(e)})),this._hoveredManipulators.forEach((({tool:e})=>{i.add(e)})),e((e=>{e.hasGrabbedManipulators=t.has(e),e.hasHoveredManipulators=i.has(e);const r=this._grabbedManipulators.values(),n=(0,vr.I6)(r,(({tool:t})=>t===e));e.firstGrabbedManipulator=null!=n?n.manipulator:null}))}clearPointers(e,{forEachTool:t,setActiveTool:i},r=!0,n){const s=(t,i)=>t===e&&(null==n||n===i);this._grabbedManipulators.forEach((({tool:e,manipulator:t,pointerType:i},r)=>{s(e,t)&&(this._grabbedManipulators.delete(r),t.grabbing=!1,t.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:i}))})),this._draggedManipulators.forEach((({tool:e,manipulator:t},i)=>{s(e,t)&&(this._draggedManipulators.delete(i),t.dragging=!1,t.events.emit("drag",{action:"cancel"}))})),r&&this._hoveredManipulators.forEach((({tool:e,manipulator:t},i)=>{s(e,t)&&(this._hoveredManipulators.delete(i),t.hovering=!1)})),this._afterManipulatorRelease(i),this._onFocusChange(t)}_intersect(e,t,i){let r=null;return i((i=>{if(null==i.manipulators||!gr(i))return!1;const n=i.manipulators.intersect(e,t);return null!=n&&(r={tool:i,manipulator:n},!0)})),r}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach(((t,i)=>{this._updateHoveredStateForPointerAtScreenPosition((0,Wi.tc)(t.x,t.y),i,t.pointerType,e)}))}handleHoverEvent(e,t){"pointer-up"!==e.type&&"immediate-click"!==e.type&&"pointer-move"!==e.type||!wr(e.pointerType)||this._updateHoveredStateForPointerAtScreenPosition((0,_r.ZV)(e),e.pointerId,e.pointerType,t)}_updateHoveredStateForPointerAtScreenPosition(e,t,i,r){let n=this._intersect(e,i,r);const s=this._hoveredManipulators.get(t)?.manipulator;null==n||n.manipulator.interactive||(n=null),null!=n&&s===n.manipulator||(null!=s&&(s.hovering=!1),null!=n?(n.manipulator.hovering=!0,this._hoveredManipulators.set(t,n)):this._hoveredManipulators.delete(t),this._onFocusChange(r))}_afterManipulatorRelease(e){0===this._grabbedManipulators.size&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}}function wr(e){return"mouse"===e}function Mr(e){return"mouse"!==e.pointerType||0===e.button}function Tr(e,t){e?.consumesClicks&&t()}const Sr="attached",Ar="tools";let Er=class extends k.A{constructor(e){super(e),this._updatingHandles=new mi.U,this._clock=lr.p,this._manipulatorState=new br,this.tools=new a.A,this.cursor=null,this._interacting=!1,this._interactingTimeout=1e3,this._interactingTimeoutHandle=null,this._forEachTool=e=>{for(const t of this.tools.items)if(e(t))return}}initialize(){var e;this.addHandles([this.view.on(ur,(e=>{this._handleInputEvent(e)}),Ii.o.TOOL),...(e=this.tools,[e.on("before-add",(t=>{const i=t.item;if(null==i||e.includes(i))return y.A.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();i.onAdd()})),e.on("after-remove",(e=>{const t=e.item;t.active&&(t.view.activeTool=null),t.destroy()}))]),this.tools.on("before-add",(({item:e})=>{this._updateToolEditableFlag(e)})),this.tools.on("before-remove",(({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()})),this.tools.on("change",(()=>{this._refreshToolWatchers()}))])}destroy(){this.activeTool=null,this.tools.drain((e=>e.destroy())),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(null!=e&&!this.view.ready)return void y.A.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const t=this.activeTool;this._set("activeTool",e),null!=t&&t.deactivate(),null!=e&&e.activate(),this._removeIncompleteTools(e);for(const e of this.tools){this._updateToolEditableFlag(e);const t=gr(e);null!=this.activeTool&&t||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!t)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some((e=>e.updating))}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=(0,m.xt)(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout((()=>this._interacting=!1),this._interactingTimeout)}attach(){"3d"===this.view.type?this.addHandles([(0,q.wB)((()=>{const{state:e}=this.view;return"camera"in e&&e.camera}),(()=>this._forEachManipulator((e=>e.onViewChange())))),this.view.elevationProvider?.on("elevation-change",(e=>this._forEachManipulator((t=>t.onElevationChange(e)))))],Sr):this.addHandles((0,q.wB)((()=>this.view.extent),(()=>this._forEachManipulator((e=>e.onViewChange())))))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(Sr),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool((t=>{t.manipulators&&t.manipulators.forEach((({manipulator:i})=>e(i,t)))}))}_handleInputEvent(e){let t=!1;const i={...e,stopPropagation:()=>{t=!0,e.stopPropagation()}};null!=this.activeTool?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool((e=>{!t&&e.visible&&e.handleInputEvent(i)})),!t&&"key-down"===e.type&&"Escape"===e.key&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,this._manipulatorStateEventArgs),t||null==this.activeTool||this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor(),"pointer-move"===e.type&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(Ar),this._forEachTool((e=>{if(e instanceof k.A){const t=(0,q.wB)((()=>[e.cursor,e.visible,e.editable]),(()=>{gr(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}));this.addHandles(t,Ar)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",(t=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,t.item.manipulator)})),e.manipulators.on("change",(()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}))],Ar)})),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){e.setEditableFlag?.(mr.PK.MANAGER,null==this.activeTool||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;null==e&&this._forEachTool((t=>!(null==t.cursor||!t.visible||(e=t.cursor,0)))),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter((t=>(null==e||t!==e)&&!t.created&&t.removeIncompleteOnCancel)).forEach((e=>{this.tools.remove(e)}))}get test(){const e=this;return{setClock:e=>this._clock=e,set interactingTimeoutEnabled(t){e._interactingTimeout=t?1e3:0},get interactingTimeoutEnabled(){return 0!==e._interactingTimeout}}}};(0,t._)([(0,v.MZ)({constructOnly:!0,nonNullable:!0})],Er.prototype,"view",void 0),(0,t._)([(0,v.MZ)({value:null})],Er.prototype,"activeTool",null),(0,t._)([(0,v.MZ)({readOnly:!0,type:a.A})],Er.prototype,"tools",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Er.prototype,"cursor",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Er.prototype,"updating",null),(0,t._)([(0,v.MZ)()],Er.prototype,"_interacting",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Er.prototype,"interacting",null),Er=(0,t._)([(0,b.$)("esri.views.ToolViewManager")],Er);let xr=class extends k.A{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown","standard"===e.mapping?this._detectedDeviceType="standard":Ir.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return null!=this.nativeIndex&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return Cr[this.deviceType]}};(0,t._)([(0,v.MZ)({nonNullable:!0,readOnly:!0})],xr.prototype,"nativeIndex",void 0),(0,t._)([(0,v.MZ)({type:String,readOnly:!0})],xr.prototype,"deviceType",null),(0,t._)([(0,v.MZ)({type:Number,readOnly:!0})],xr.prototype,"axisThreshold",null),xr=(0,t._)([(0,b.$)("esri.views.input.gamepad.GamepadInputDevice")],xr);const Ir=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),Cr={standard:.15,spacemouse:.025,unknown:0},kr=xr;let Nr=class extends k.A{constructor(...e){super(...e),this.devices=new a.A,this.enabledFocusMode="document"}};(0,t._)([(0,v.MZ)({type:a.A.ofType(kr),readOnly:!0})],Nr.prototype,"devices",void 0),(0,t._)([(0,v.MZ)({type:["document","view","none"]})],Nr.prototype,"enabledFocusMode",void 0),Nr=(0,t._)([(0,b.$)("esri.views.input.gamepad.GamepadSettings")],Nr);const Lr=Nr;let Or=class extends k.A{constructor(){super(...arguments),this.gamepad=new Lr}};(0,t._)([(0,v.MZ)({readOnly:!0})],Or.prototype,"gamepad",void 0),Or=(0,t._)([(0,b.$)("esri.views.input.Input")],Or);const Rr=Or;let Pr=class extends k.A{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],Pr.prototype,"enabled",void 0),(0,t._)([(0,v.MZ)({type:kr})],Pr.prototype,"device",void 0),(0,t._)([(0,v.MZ)({type:["pan","zoom"],nonNullable:!0})],Pr.prototype,"mode",void 0),(0,t._)([(0,v.MZ)({type:["forward-down","forward-up"],nonNullable:!0})],Pr.prototype,"tiltDirection",void 0),(0,t._)([(0,v.MZ)({type:Number,nonNullable:!0})],Pr.prototype,"velocityFactor",void 0),Pr=(0,t._)([(0,b.$)("esri.views.navigation.gamepad.GamepadSettings")],Pr);const Dr=Pr;let Fr=class extends k.A{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new Dr,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};(0,t._)([(0,v.MZ)({type:Boolean})],Fr.prototype,"browserTouchPanEnabled",void 0),(0,t._)([(0,v.MZ)({type:Dr,nonNullable:!0})],Fr.prototype,"gamepad",void 0),(0,t._)([(0,v.MZ)({type:Boolean})],Fr.prototype,"momentumEnabled",void 0),(0,t._)([(0,v.MZ)({type:Boolean})],Fr.prototype,"mouseWheelZoomEnabled",void 0),Fr=(0,t._)([(0,b.$)("esri.views.navigation.Navigation")],Fr);const jr=Fr;var Zr=n(4197),zr=n(84456);let Ur,Vr=null;async function Gr(e){Vr||(Vr=n.e(7942).then(n.bind(n,57942)).then((e=>Ur=e))),await Vr,(0,g.Te)(e)}async function Br(e,t,i,r){if(!e)return null;const n=e.spatialReference;return(0,oi.isLoaded)()||(0,oi.canProjectWithoutEngine)(n,t)?(0,oi.project)(e,t):Ur?Ur.projectGeometry(e,t,i,r):(await Promise.race([Gr(r),(0,oi.load)(r)]),Br(e,t,i,r))}let $r=class extends k.A{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=(0,m.DC)(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return null!=this.userSpatialReference?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return null==this.userSpatialReference||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){const e=this.map?.(),t=[];return null!=this.priorityCollection&&t.push(this.priorityCollection),t.push({parent:e?.basemap,layers:e?.basemap?.baseLayers},{layers:e?.layers},{parent:e?.ground,layers:e?.ground?.layers},{parent:e?.basemap,layers:e?.basemap?.referenceLayers}),t}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:e,updating:t}=this._allLayers;let i=null;for(const t of e){const e=this._getSupportedSpatialReferences(t);if(e.length>0){const t=this._narrowDownSpatialReferenceCandidates(i,e);null!=t&&(i=t)}if(null!=i&&1===i.length)break}if(t&&(null==i||1!==i.length))return{updating:!0};const r=this._pickSpatialReferenceCandidate(i);return{spatialReference:null!=r?r.spatialReference:null,viewingMode:null!=r?r.viewingMode:null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:t}=this._collectLayers([{parent:this.map?.()?.basemap,layers:this.map?.()?.basemap?.baseLayers},{layers:this.map?.()?.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const t=e[0].tileInfo;return{tileInfo:t&&t.spatialReference.equals(this.spatialReference)?t:null,updating:!1}}return{updating:t}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};const{layers:e,updating:t}=this._allLayers;for(const t of e)if((0,Zr.jI)(t)){const e=(0,Zr.zy)(t);if(e)return{heightModelInfo:e,vcsWkid:t.spatialReference?.vcsWkid,latestVcsWkid:t.spatialReference?.latestVcsWkid,updating:!1}}return{updating:t}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,t=e.updating,i=[];for(const t of e.layers){const e="fullExtents"in t&&t.fullExtents||(null!=t.fullExtent?[t.fullExtent]:[]),r=this.requiresExtentInSpatialReference?null:e[0],n=e.find((e=>e.spatialReference.equals(this.spatialReference)))??r;if(n)return{candidates:[{extent:n,layer:t}],updating:!1};if(this._getSupportedSpatialReferences(t).length>0)for(const r of e)i.push({extent:r,layer:t})}return{candidates:i,updating:t}}get _extentTask(){const{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(null==e||0===e.length)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(e),r=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&r.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:null!=this._projectExtentTask.task&&!this._projectExtentTask.task.finished}:(null!=this._projectExtentTask.task&&(this._projectExtentTask.task=(0,m.DC)(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:r.clone(),task:(0,Ei.UT)((async e=>{try{const t=await Br(i.extent,r,"portalItem"in i.layer?i.layer.portalItem:void 0,e);this._projectExtentTask={...this._projectExtentTask,task:null,output:t}}catch(t){if((0,g.G4)(e))return;this._projectExtentTask={...this._projectExtentTask,task:null}}}))},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if(null==e)return t;const i=[],r=(e,t)=>null!=e?null!=t?e===t&&e:e:t;for(const n of e)for(const e of t){if(!n.spatialReference.equals(e.spatialReference))continue;const t=r(n.viewingMode,e.viewingMode);if(!1!==t){i.push({spatialReference:n.spatialReference,viewingMode:t});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(e){const t=this.defaultSpatialReference;return null==e||e.length<1?null!=t?{spatialReference:t,viewingMode:null}:null:(null!=t&&e.length>1&&e.some((({spatialReference:e})=>e.equals(t)))&&(e=e.filter((({spatialReference:e})=>e.equals(t)))),e.length>1&&e.some((({viewingMode:e})=>e!==zr.RT.Local))&&(e=e.filter((({viewingMode:e})=>e!==zr.RT.Local))),e[0])}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(0===t.length)return[];const i=[];for(const r of t){const t=this.getSpatialReferenceSupport({spatialReference:r,layer:e});if(null!=t){const e=null!=t.constraints?t.constraints:[{spatialReference:r,viewingMode:null}];for(const{spatialReference:t,viewingMode:r}of e)this.requiresExtentInSpatialReference&&null!=this.userSpatialReference&&!t.equals(this.userSpatialReference)||i.push({spatialReference:t,viewingMode:r})}}return i}_pickExtentCandidate(e){const t=this.spatialReference;return e.find((({extent:e})=>t.equals(e.spatialReference)))||e[0]}_collectLayers(e){if("loaded"!==this._loadMaybe(this.map?.()))return{layers:[],updating:!0};const t=new Hr;for(const i of e)if(this._collectCollection(i,t),t.preloading===this.sourcePreloadCount)break;return{layers:t.layers,updating:t.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(const i of e.layers){switch(this._loadMaybe(i)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":t.updating||t.layers.push(i),"layers"in i&&this._collectCollection({layers:i.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&null!=e.loadStatus?"not-loaded"===e.loadStatus?(e.load().catch((e=>{(0,g.zf)(e)||console.log(e)})),"loading"):e.loadStatus:"loaded"}};(0,t._)([(0,v.MZ)()],$r.prototype,"required",void 0),(0,t._)([(0,v.MZ)({constructOnly:!0})],$r.prototype,"map",void 0),(0,t._)([(0,v.MZ)({constructOnly:!0})],$r.prototype,"getSpatialReferenceSupport",void 0),(0,t._)([(0,v.MZ)()],$r.prototype,"defaultSpatialReference",void 0),(0,t._)([(0,v.MZ)()],$r.prototype,"userSpatialReference",void 0),(0,t._)([(0,v.MZ)()],$r.prototype,"sourcePreloadCount",void 0),(0,t._)([(0,v.MZ)()],$r.prototype,"priorityCollection",void 0),(0,t._)([(0,v.MZ)()],$r.prototype,"requiresExtentInSpatialReference",void 0),(0,t._)([(0,v.MZ)()],$r.prototype,"suspended",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],$r.prototype,"ready",null),(0,t._)([(0,v.MZ)({readOnly:!0})],$r.prototype,"heightModelInfoReady",null),(0,t._)([(0,v.MZ)({readOnly:!0})],$r.prototype,"spatialReference",null),(0,t._)([(0,v.MZ)({readOnly:!0})],$r.prototype,"extent",null),(0,t._)([(0,v.MZ)({readOnly:!0})],$r.prototype,"heightModelInfo",null),(0,t._)([(0,v.MZ)({readOnly:!0})],$r.prototype,"vcsWkid",null),(0,t._)([(0,v.MZ)({readOnly:!0})],$r.prototype,"latestVcsWkid",null),(0,t._)([(0,v.MZ)({readOnly:!0})],$r.prototype,"viewingMode",null),(0,t._)([(0,v.MZ)({readOnly:!0})],$r.prototype,"tileInfo",null),(0,t._)([(0,v.MZ)({readOnly:!0})],$r.prototype,"mapCollections",null),(0,t._)([(0,v.MZ)({readOnly:!0})],$r.prototype,"_allLayers",null),(0,t._)([(0,v.MZ)({readOnly:!0})],$r.prototype,"_spatialReferenceTask",null),(0,t._)([(0,v.MZ)({readOnly:!0})],$r.prototype,"_tileInfoTask",null),(0,t._)([(0,v.MZ)({readOnly:!0})],$r.prototype,"_heightModelInfoTask",null),(0,t._)([(0,v.MZ)({readOnly:!0})],$r.prototype,"_extentCandidatesTask",null),(0,t._)([(0,v.MZ)()],$r.prototype,"_extentTask",null),(0,t._)([(0,v.MZ)()],$r.prototype,"_projectExtentTask",void 0),$r=(0,t._)([(0,b.$)("esri.views.support.DefaultsFromMap")],$r);class Hr{constructor(){this.layers=new Array,this.preloading=-1,this.updating=!1}}var qr;let Wr=qr=class extends(L.A.EventedMixin((0,H.g)(k.A))){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new Ri.A,this.updatingHandles=new mi.U,this.allLayerViews=new N.A({getCollections:()=>[this.basemapView?.baseLayerViews,this.groundView?.layerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:Yr}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new Ui.Y,this.analyses=new zi,this.typeSpecificPreconditionsReady=!0,this.layerViews=new a.A,this.magnifier=new Yi,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new Rr,this.navigation=new jr,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new fr(this),this.persistableViewModels=new a.A,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this.theme=null,this.handles.add((0,q.wB)((()=>this.preconditionsReady),(e=>{const t=this.ready;if(e?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,qr.views.add(this)):(this._lockedSpatialReference=null,qr.views.remove(this)),this.notifyChange("spatialReference"),!e&&t)this.toolViewManager?.detach(),null!=this.analysisViewManager&&this.analysisViewManager.detach(),this.layerViewManager?.clear(),this._teardown();else if(e&&!t){try{this._startup()}catch(e){return void queueMicrotask((()=>{console.error("View._startup failed",e),this.fatalError=new h.A("startup-error",null,e)}))}null!=this.analysisViewManager&&this.analysisViewManager.attach(),this.toolViewManager.attach()}}),q.OH))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then((()=>(this._isValid=!0,(0,q.C_)((()=>this.ready)))))),this.basemapView=new Vi({view:this}),this.layerViewManager=new qi({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new Er({view:this}),this._setupSpatialReferenceLogger(),this.selectionManager=new sr({view:this}),this.addHandles([(0,q.wB)((()=>this.initialExtentRequired),(e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e}),q.pc),(0,q.wB)((()=>this.ready),(e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)}),q.OH),(0,q.wB)((()=>this._userSpatialReference),(e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)}),q.pc)])}_setupSpatialReferenceLogger(){let e=null;this.addHandles([(0,q.wB)((()=>this.defaultsFromMap?.ready),(t=>{const i=this.map?.allLayers.length>0;if(t&&!this.spatialReference&&i){if(null!=e)return;const t=(0,Pi.hA)((()=>e=(0,m.DC)(e)));e=(0,Ei.UT)((async t=>{try{await(0,g.Pl)(this.spatialReferenceWarningDelay,null,t)}catch{return}finally{e=null}y.A.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")})),this.addHandles(t,"spatial-reference-logger-task")}else this.removeHandles("spatial-reference-logger-task")}),{sync:!0})])}destroy(){this.destroyed||(qr.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=(0,m.pR)(this.graphics),this.analyses=(0,m.pR)(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),(0,m.pR)(this.analysisViewManager),this.toolViewManager=(0,m.pR)(this.toolViewManager),this.layerViewManager=(0,m.pR)(this.layerViewManager),this.selectionManager=(0,m.pR)(this.selectionManager),this.basemapView=(0,m.pR)(this.basemapView),this.groundView?.destroy(),this.layerViews?.forEach((e=>e.destroy())),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=(0,m.pR)(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return y.A.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new $r({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:e=>this.getSpatialReferenceSupport(e),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||d.A.isLoadable(this.map)&&!this.map.loaded||0===this.width||0===this.height||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e?.destroyed&&(y.A.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),d.A.isLoadable(e)&&e.load().catch((()=>{})),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get spatialReference(){const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&this.defaultsFromMap?.required?.heightModelInfo){const t=e.clone();return t.vcsWkid=this.defaultsFromMap.vcsWkid,t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,t}return e}set spatialReference(e){const t=!(0,Zi.aI)(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??Vt.qU}set timeZone(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map((e=>e.toLowerCase())));this._userTimeZone=e,e===Vt.qU||e===Vt.L5||t.has(e.toLowerCase())||i.has(e.toLowerCase())||y.A.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new ar}whenLayerView(e){return this.layerViewManager?.whenLayerView(e)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}importLayerView(e){throw new h.A("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return null!=this.getSpatialReferenceSupport({spatialReference:e})}when(e,t){return this.isResolved()&&!this.ready&&y.A.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&((0,q.z7)((()=>this.destroyed||!1===this.preconditionsReady),(()=>this._readyCycleForced=!1),{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};Wr.views=new a.A,(0,t._)([(0,v.MZ)()],Wr.prototype,"_userSpatialReference",void 0),(0,t._)([(0,v.MZ)()],Wr.prototype,"activeTool",null),(0,t._)([(0,v.MZ)({readOnly:!0})],Wr.prototype,"allLayerViews",void 0),(0,t._)([(0,v.MZ)()],Wr.prototype,"groundView",void 0),(0,t._)([(0,v.MZ)()],Wr.prototype,"animation",null),(0,t._)([(0,v.MZ)()],Wr.prototype,"basemapView",void 0),(0,t._)([(0,v.MZ)()],Wr.prototype,"center",null),(0,t._)([(0,v.MZ)({readOnly:!0})],Wr.prototype,"_defaultsFromMapSettings",null),(0,t._)([(0,v.MZ)()],Wr.prototype,"defaultsFromMap",null),(0,t._)([(0,v.MZ)()],Wr.prototype,"fatalError",void 0),(0,t._)([(0,v.MZ)({type:Fi.A})],Wr.prototype,"extent",null),(0,t._)([(0,v.MZ)((0,Di.C)(Ui.Y,"graphics"))],Wr.prototype,"graphics",void 0),(0,t._)([(0,v.MZ)((0,Di.C)(zi,"analyses"))],Wr.prototype,"analyses",void 0),(0,t._)([(0,v.MZ)({readOnly:!0,type:ji.A})],Wr.prototype,"heightModelInfo",null),(0,t._)([(0,v.MZ)({readOnly:!0})],Wr.prototype,"interacting",null),(0,t._)([(0,v.MZ)({readOnly:!0})],Wr.prototype,"navigating",null),(0,t._)([(0,v.MZ)({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Wr.prototype,"preconditionsReady",null),(0,t._)([(0,v.MZ)({readOnly:!0})],Wr.prototype,"typeSpecificPreconditionsReady",void 0),(0,t._)([(0,v.MZ)({type:a.A,readOnly:!0})],Wr.prototype,"layerViews",void 0),(0,t._)([(0,v.MZ)()],Wr.prototype,"resolution",null),(0,t._)([(0,v.MZ)({type:Yi})],Wr.prototype,"magnifier",void 0),(0,t._)([(0,v.MZ)({value:null,type:V})],Wr.prototype,"map",null),(0,t._)([(0,v.MZ)()],Wr.prototype,"padding",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Wr.prototype,"ready",void 0),(0,t._)([(0,v.MZ)({type:J.A})],Wr.prototype,"spatialReference",null),(0,t._)([(0,v.MZ)()],Wr.prototype,"spatialReferenceWarningDelay",void 0),(0,t._)([(0,v.MZ)()],Wr.prototype,"stationary",null),(0,t._)([(0,v.MZ)({readOnly:!0})],Wr.prototype,"supportsGround",void 0),(0,t._)([(0,v.MZ)({type:qe.A})],Wr.prototype,"timeExtent",void 0),(0,t._)([(0,v.MZ)({type:String,nonNullable:!0})],Wr.prototype,"timeZone",null),(0,t._)([(0,v.MZ)()],Wr.prototype,"tools",null),(0,t._)([(0,v.MZ)()],Wr.prototype,"toolViewManager",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Wr.prototype,"type",void 0),(0,t._)([(0,v.MZ)({type:Number})],Wr.prototype,"scale",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Wr.prototype,"updating",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Wr.prototype,"initialExtentRequired",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Wr.prototype,"initialExtent",null),(0,t._)([(0,v.MZ)()],Wr.prototype,"cursor",null),(0,t._)([(0,v.MZ)({readOnly:!0})],Wr.prototype,"input",void 0),(0,t._)([(0,v.MZ)({type:jr,nonNullable:!0})],Wr.prototype,"navigation",void 0),(0,t._)([(0,v.MZ)()],Wr.prototype,"layerViewManager",void 0),(0,t._)([(0,v.MZ)()],Wr.prototype,"analysisViewManager",void 0),(0,t._)([(0,v.MZ)()],Wr.prototype,"selectionManager",void 0),(0,t._)([(0,v.MZ)()],Wr.prototype,"width",void 0),(0,t._)([(0,v.MZ)()],Wr.prototype,"height",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Wr.prototype,"resizing",void 0),(0,t._)([(0,v.MZ)({value:null,readOnly:!0})],Wr.prototype,"size",null),(0,t._)([(0,v.MZ)({readOnly:!0})],Wr.prototype,"suspended",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Wr.prototype,"viewEvents",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Wr.prototype,"persistableViewModels",void 0),(0,t._)([(0,v.MZ)()],Wr.prototype,"_isValid",void 0),(0,t._)([(0,v.MZ)()],Wr.prototype,"_readyCycleForced",void 0),(0,t._)([(0,v.MZ)()],Wr.prototype,"_lockedSpatialReference",void 0),(0,t._)([(0,v.MZ)()],Wr.prototype,"_userTimeZone",void 0),(0,t._)([(0,v.MZ)()],Wr.prototype,"_lockedTimeZone",void 0),(0,t._)([(0,v.MZ)({type:ar})],Wr.prototype,"theme",void 0),(0,t._)([(0,v.MZ)({readOnly:!0,type:ar})],Wr.prototype,"effectiveTheme",null),Wr=qr=(0,t._)([(0,b.$)("esri.views.View")],Wr);const Kr=Wr;function Yr(e){return e.layerViews}let Jr=class extends H.Z{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=(0,g.Tw)(),this.addResolvingPromise(this._resolver.promise)}get done(){return"finished"===this.state||"stopped"===this.state}stop(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","stopped"),this._resolver?.reject(new h.A("ViewAnimation stopped")))}finish(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","finished"),this._resolver?.resolve())}update(e,t){t||(t=(0,g.$X)(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};(0,t._)([(0,v.MZ)({readOnly:!0})],Jr.prototype,"done",null),(0,t._)([(0,v.MZ)({readOnly:!0,type:String})],Jr.prototype,"state",void 0),(0,t._)([(0,v.MZ)()],Jr.prototype,"target",void 0),Jr=(0,t._)([(0,b.$)("esri.views.ViewAnimation")],Jr),(Jr||(Jr={})).State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"};const Xr=Jr;var Qr=n(63486),en=n(86757),tn=n(8977);class rn{constructor(e,t,i,r){const n=e.targetGeometry,s=t.targetGeometry;r?"string"==typeof r&&(r=(0,Qr.qg)(r)||Qr.Z0.ease):r=Qr.Z0.ease,this.easing=r,this.duration=i,this.sCenterX=n.x,this.sCenterY=n.y,this.sScale=e.scale,this.sRotation=e.rotation,this.tCenterX=s.x,this.tCenterY=s.y,this.tScale=t.scale,this.tRotation=t.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(e,t){const i=this.easing(t);let r,n,s,o;t>=1?(r=this.tCenterX,n=this.tCenterY,s=this.tRotation,o=this.tScale):(r=this.sCenterX+i*this.dCenterX,n=this.sCenterY+i*this.dCenterY,s=this.sRotation+i*this.dRotation,o=this.sScale+i*this.dScale),e.targetGeometry.x=r,e.targetGeometry.y=n,e.scale=o,e.rotation=s}}let nn=class extends k.A{constructor(e){super(e),this._animation=null,this.updateFunction=null,this.duration=200,this.transition=null,this.easing=Qr.Z0.ease,this.view=null,this.viewpoint=new G.A({targetGeometry:new tn.A,scale:0,rotation:0}),this._updateTask=(0,yi.mg)({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=(0,m.xt)(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view&&(this.view.animation=e)}animate(e,t,i){this.stop();const r=this.viewpoint;(0,en.C)(r,t),this.transition=new rn(this.viewpoint,e.target,i?.duration||this.duration,i?.easing||this.easing);const n=()=>{this.animation===e&&this._updateTask&&("finished"===e.state&&(this.transition?.applyRatio(this.viewpoint,1),this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const i=new Xr({target:e.clone()}),r=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(r,r),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const t=this.animation;if(t&&t.state!==Xr.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const e=this.transition,t=(performance.now()-this._startTime)/e.duration,i=t>=1;e.applyRatio(this.viewpoint,t),i&&this.animation?.finish()}this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};(0,t._)([(0,v.MZ)()],nn.prototype,"duration",void 0),(0,t._)([(0,v.MZ)()],nn.prototype,"transition",void 0),(0,t._)([(0,v.MZ)()],nn.prototype,"easing",void 0),(0,t._)([(0,v.MZ)()],nn.prototype,"view",void 0),(0,t._)([(0,v.MZ)()],nn.prototype,"viewpoint",void 0),nn=(0,t._)([(0,b.$)("esri.views.2d.AnimationManager")],nn);const sn=nn;class on{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{if(this._updateRequested=!1,this.view?.destroyed)return;const{allLayerViews:e,graphicsView:t,labelManager:i,state:{id:r}}=this.view;e.forEach(this._updateLayerView,this),null!=i&&(i.lastUpdateId!==r&&(i.viewChange(),i.lastUpdateId=r),i.updateRequested&&i.processUpdate(this._updateParameters)),null!=t&&(t.lastUpdateId!==r&&(t.viewChange(),t.lastUpdateId=r),t.updateRequested&&t.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle?.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=(0,q.wB)((()=>e.stationary),(e=>{this.stationary=e,this.requestFrame()})),this._frameTaskHandle=(0,yi.mg)(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){if(!e.attached)return void this.requestUpdate();const t=this.view.state,i=e.lastUpdateId;null!=i&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),i!==t.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=t.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews?.forEach(this._updateLayerView,this)}}let an=class extends k.A{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,t){if(!e)return void y.A.getLogger(this).error("#goTo()","target cannot be null or undefined");const i=new Xr;this.view.animation=i,await(0,q.C_)((()=>this.view.ready),t);const r={animate:!0,...t},{extent:n,spatialReference:s,size:o,viewpoint:a,constraints:l,padding:c,allLayerViews:h}=this.view,u=(0,en.vt)(e,{extent:n,spatialReference:s,size:o,viewpoint:a,constraints:l,padding:c,allLayerViews:h,pickClosestTarget:t?.pickClosestTarget??!0});return i?.update(u),this._gotoTask={},r.animate?this._gotoAnimated(u,r):this._gotoImmediate(u,r)}_gotoImmediate(e,t){const i=this._gotoTask,r=this.view.animation,n=e.then((e=>{if((0,g.Te)(t),i!==this._gotoTask)throw new h.A("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=r.target=e,r.finish()}));return this._cancellableGoTo(i,r,n,t)}_gotoAnimated(e,t){const i=this._gotoTask,r=this.view.animation;if(!r)return Promise.resolve();const n=e.then((e=>{if((0,g.Te)(t),i!==this._gotoTask)throw new h.A("view:goto-interrupted","Goto was interrupted");return r.update(e),this.view.animationManager.animate(r,this.view.viewpoint,t),r.when().then((()=>{}),(()=>{}))}));return this._cancellableGoTo(i,r,n,t)}_cancellableGoTo(e,t,i,r){const n=()=>e===this._gotoTask;return(0,g.qr)(i,r).finally((()=>{n()&&(t.done||t.stop())}))}};function ln(){return Promise.all([Promise.all([n.e(9958),n.e(3849),n.e(9224)]).then(n.bind(n,69224)),Promise.all([n.e(9958),n.e(2921),n.e(3849),n.e(8764),n.e(7764),n.e(9018),n.e(2644),n.e(1924),n.e(5506),n.e(1839),n.e(1385),n.e(7692),n.e(1244),n.e(4555),n.e(3509)]).then(n.bind(n,3509))])}(0,t._)([(0,v.MZ)({constructOnly:!0})],an.prototype,"view",void 0),an=(0,t._)([(0,b.$)("esri.views.2d.GoToManager")],an);const cn=()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(3849),n.e(8764),n.e(7764),n.e(9018),n.e(2644),n.e(1924),n.e(5506),n.e(1839),n.e(1385),n.e(7692),n.e(1244),n.e(6227),n.e(3552),n.e(8076)]).then(n.bind(n,78076)))),hn=()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(3849),n.e(8764),n.e(7764),n.e(9018),n.e(2644),n.e(5506),n.e(1839),n.e(9427),n.e(2327)]).then(n.bind(n,62327)))),un={"base-dynamic":()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(3849),n.e(8764),n.e(7764),n.e(2884),n.e(9232)]).then(n.bind(n,99232)))),"base-tile":cn,"bing-maps":cn,catalog:()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(2071)]).then(n.bind(n,72071)))),"catalog-dynamic-group":()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(2395)]).then(n.bind(n,62395)))),"catalog-footprint":()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(3849),n.e(8764),n.e(7764),n.e(9018),n.e(2644),n.e(5506),n.e(1839),n.e(9427),n.e(2327),n.e(502)]).then(n.bind(n,90502)))),csv:hn,"geo-rss":()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(3849),n.e(8764),n.e(7764),n.e(9018),n.e(2644),n.e(1924),n.e(5506),n.e(1839),n.e(1385),n.e(7692),n.e(5585)]).then(n.bind(n,35585)))),feature:hn,geojson:hn,graphics:()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(3849),n.e(8764),n.e(7764),n.e(9018),n.e(2644),n.e(1924),n.e(5506),n.e(1839),n.e(1385),n.e(7692),n.e(9427),n.e(8543)]).then(n.bind(n,18543)))),group:()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(7115)]).then(n.bind(n,37115)))),imagery:()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(3849),n.e(8764),n.e(7764),n.e(9018),n.e(2644),n.e(1924),n.e(5506),n.e(1839),n.e(1385),n.e(7692),n.e(2672),n.e(2884),n.e(8939),n.e(1538)]).then(n.bind(n,91538)))),"imagery-tile":()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(3849),n.e(8764),n.e(7764),n.e(2672),n.e(8939),n.e(9526)]).then(n.bind(n,29526)))),kml:()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(3849),n.e(8764),n.e(7764),n.e(9018),n.e(2644),n.e(1924),n.e(5506),n.e(1839),n.e(1385),n.e(7692),n.e(4555),n.e(5910)]).then(n.bind(n,51665)))),"knowledge-graph":()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(7280)]).then(n.bind(n,47280)))),"link-chart":()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(7280)]).then(n.bind(n,47280)))),"knowledge-graph-sublayer":hn,"map-image":()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(3849),n.e(8764),n.e(7764),n.e(9018),n.e(2644),n.e(1924),n.e(5506),n.e(1839),n.e(1385),n.e(7692),n.e(2884),n.e(6227),n.e(7823)]).then(n.bind(n,97823)))),"map-notes":()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(3849),n.e(8764),n.e(7764),n.e(9018),n.e(2644),n.e(1924),n.e(5506),n.e(1839),n.e(1385),n.e(7692),n.e(4953)]).then(n.bind(n,24953)))),media:()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(3849),n.e(8764),n.e(7764),n.e(9018),n.e(2644),n.e(1924),n.e(5506),n.e(1839),n.e(1385),n.e(7692),n.e(1244),n.e(2793)]).then(n.bind(n,22793)))),"ogc-feature":()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(3849),n.e(8764),n.e(7764),n.e(9018),n.e(2644),n.e(5506),n.e(1839),n.e(9427),n.e(2327),n.e(3370)]).then(n.bind(n,13370)))),"open-street-map":cn,"oriented-imagery":hn,route:()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(3849),n.e(8764),n.e(7764),n.e(9018),n.e(2644),n.e(1924),n.e(5506),n.e(1839),n.e(1385),n.e(7692),n.e(392),n.e(6953)]).then(n.bind(n,6953)))),stream:()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(3849),n.e(8764),n.e(7764),n.e(9018),n.e(2644),n.e(5506),n.e(1839),n.e(9427),n.e(2327),n.e(8813)]).then(n.bind(n,78813)))),"subtype-group":()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(3849),n.e(8764),n.e(7764),n.e(9018),n.e(2644),n.e(5506),n.e(1839),n.e(9427),n.e(2327),n.e(8055)]).then(n.bind(n,38055)))),tile:cn,"vector-tile":()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(3849),n.e(8764),n.e(7764),n.e(114),n.e(8258)]).then(n.bind(n,8258)))),video:()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(3849),n.e(8764),n.e(7764),n.e(9018),n.e(2644),n.e(1924),n.e(5506),n.e(1839),n.e(1385),n.e(7692),n.e(9947)]).then(n.bind(n,69947)))),wcs:()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(3849),n.e(8764),n.e(7764),n.e(2672),n.e(8939),n.e(9526)]).then(n.bind(n,29526)))),"web-tile":cn,wfs:hn,wms:()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(3849),n.e(8764),n.e(7764),n.e(2884),n.e(6960)]).then(n.bind(n,6960)))),wmts:()=>ln().then((()=>Promise.all([n.e(9958),n.e(2921),n.e(3849),n.e(8764),n.e(7764),n.e(3552),n.e(4013)]).then(n.bind(n,41675)))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};var pn,dn=n(79083),fn=n(10805),yn=n(53334),mn=n(11021);let gn=pn=class extends((0,Dt.PH)(k.A)){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(null==this.geometry||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return(0,oi.project)(this.geometry,this.spatialReference)}catch(e){return y.A.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(null==this.normalizedGeometry)return e;const i=e.targetGeometry;if("extent"===this.normalizedGeometry.type?(0,fn.qz)(this.normalizedGeometry,i):(0,fn.m3)(this.normalizedGeometry,i))return e;const{coordinate:r}=function(e,t){const{spatialReference:i}=t,r=[t.x,t.y];let n=Number.POSITIVE_INFINITY,s=0,o=0;const a=[0,0],l="extent"===e.type?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const e of l)for(let t=0;t<e.length-1;t++){(0,mn.B1)(a,r,e,t);const i=(0,yn.Io)(r,a);i<n&&(n=i,s=a[0],o=a[1])}return{coordinate:new tn.A({x:s,y:o,spatialReference:i}),distance:n}}(this.normalizedGeometry,i);return r?(e.targetGeometry=r,e):e}clone(){return new pn({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};var vn;(0,t._)([(0,v.MZ)({constructOnly:!0})],gn.prototype,"geometry",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],gn.prototype,"normalizedGeometry",null),(0,t._)([(0,v.MZ)({constructOnly:!0})],gn.prototype,"spatialReference",void 0),gn=pn=(0,t._)([(0,b.$)("esri.views.2d.constraints.GeometryConstraint")],gn);let _n=vn=class extends((0,Dt.PH)(k.A)){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t?(this.rotationEnabled||(e.rotation=t.rotation),e):e}clone(){return new vn({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};(0,t._)([(0,v.MZ)()],_n.prototype,"enabled",void 0),(0,t._)([(0,v.MZ)()],_n.prototype,"rotationEnabled",void 0),_n=vn=(0,t._)([(0,b.$)("esri.views.2d.constraints.RotationConstraint")],_n);const bn=_n;var wn;let Mn=wn=class extends((0,Dt.PH)(k.A)){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:r,minZoom:n,maxZoom:s}=this,o=-1,a=-1,l=!1,c=!1;if(0!==i&&0!==r&&i<r&&([i,r]=[r,i]),!t?.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);t=t.map((e=>e.clone())),t.sort(((e,t)=>t.scale-e.scale)),t.forEach(((e,t)=>e.level=t));for(const n of t)!l&&i>0&&i>=n.scale&&(o=n.level,l=!0),!c&&r>0&&r>=n.scale&&(a=e?e.level:-1,c=!0),e=n;-1===n&&(n=0===i?0:o),-1===s&&(s=0===r?t.length-1:a),n=Math.max(n,0),n=Math.min(n,t.length-1),s=Math.max(s,0),s=Math.min(s,t.length-1),n>s&&([n,s]=[s,n]),i=t[n].scale,r=t[s].scale,t.splice(0,n),t.splice(s-n+1,t.length),t.forEach(((e,t)=>{this._lodByScale[e.scale]=e,this._scales[t]=e.scale})),this._set("effectiveLODs",t),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,r=this.effectiveMaxScale,n=e.targetGeometry,s=t&&t.targetGeometry,o=0!==r&&e.scale<r,a=0!==i&&e.scale>i;if(o||a){const o=a?i:r;if(t&&s){const i=(o-t.scale)/(e.scale-t.scale);n.x=s.x+(n.x-s.x)*i,n.y=s.y+(n.y-s.y)*i}e.scale=o}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.round(e-.5),r=Math.round(e);return t[r]+(r-e)*(t[i]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,r;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let n=0;n<t.length-1;n++){if(i=t[n],r=t[n+1],r===e)return n+this.effectiveMinZoom+1;if(i>e&&r<e)return n+this.effectiveMinZoom+1-(e-r)/(i-r)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new wn({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce(((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t),this._scales[0])),this._lodByScale[e].scale}};(0,t._)([(0,v.MZ)({readOnly:!0})],Mn.prototype,"effectiveLODs",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Mn.prototype,"effectiveMinZoom",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Mn.prototype,"effectiveMaxZoom",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Mn.prototype,"effectiveMinScale",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Mn.prototype,"effectiveMaxScale",void 0),(0,t._)([(0,v.MZ)()],Mn.prototype,"lods",void 0),(0,t._)([(0,v.MZ)()],Mn.prototype,"minZoom",void 0),(0,t._)([(0,v.MZ)()],Mn.prototype,"maxZoom",void 0),(0,t._)([(0,v.MZ)()],Mn.prototype,"minScale",void 0),(0,t._)([(0,v.MZ)()],Mn.prototype,"maxScale",void 0),(0,t._)([(0,v.MZ)()],Mn.prototype,"snapToZoom",void 0),Mn=wn=(0,t._)([(0,b.$)("esri.views.2d.constraints.ZoomConstraint")],Mn);const Tn=Mn;var Sn=n(65648);const An={base:null,key:"type",typeMap:{extent:Fi.A,polygon:Sn.A}};let En=class extends k.A{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new a.A}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const e=this._get("_geometry");return e&&this.geometry===e.geometry&&this.view?.constraintsInfo.spatialReference===e.spatialReference?e:new gn({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new bn({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),t=this.lods||this.view?.constraintsInfo.lods,i=this.minZoom,r=this.maxZoom,n=this.minScale,s=this.maxScale,o=this.snapToZoom;return e&&e.lods===t&&e.minZoom===i&&e.maxZoom===r&&e.minScale===n&&e.maxScale===s&&e.snapToZoom===o?e:new Tn({lods:t,minZoom:i,maxZoom:r,minScale:n,maxScale:s,snapToZoom:o})}canZoomInTo(e){const t=this.effectiveMaxScale;return 0===t||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return 0===t||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),this.customConstraints.forEach((i=>i.constrain(e,t))),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach((t=>t.applyPanConstraint?.(e))),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};(0,t._)([(0,v.MZ)({readOnly:!0})],En.prototype,"effectiveLODs",null),(0,t._)([(0,v.MZ)({readOnly:!0})],En.prototype,"effectiveMinScale",null),(0,t._)([(0,v.MZ)({readOnly:!0})],En.prototype,"effectiveMaxScale",null),(0,t._)([(0,v.MZ)({readOnly:!0})],En.prototype,"effectiveMinZoom",null),(0,t._)([(0,v.MZ)({readOnly:!0})],En.prototype,"effectiveMaxZoom",null),(0,t._)([(0,v.MZ)({types:An,value:null})],En.prototype,"geometry",null),(0,t._)([(0,v.MZ)({type:[dn.A]})],En.prototype,"lods",void 0),(0,t._)([(0,v.MZ)()],En.prototype,"minScale",void 0),(0,t._)([(0,v.MZ)()],En.prototype,"maxScale",void 0),(0,t._)([(0,v.MZ)()],En.prototype,"minZoom",void 0),(0,t._)([(0,v.MZ)()],En.prototype,"maxZoom",void 0),(0,t._)([(0,v.MZ)()],En.prototype,"rotationEnabled",void 0),(0,t._)([(0,v.MZ)()],En.prototype,"snapToZoom",void 0),(0,t._)([(0,v.MZ)({type:a.A})],En.prototype,"customConstraints",void 0),(0,t._)([(0,v.MZ)()],En.prototype,"view",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],En.prototype,"version",null),(0,t._)([(0,v.MZ)({type:gn,readOnly:!0})],En.prototype,"_geometry",null),(0,t._)([(0,v.MZ)({type:bn})],En.prototype,"_rotation",null),(0,t._)([(0,v.MZ)({readOnly:!0,type:Tn})],En.prototype,"_zoom",null),En=(0,t._)([(0,b.$)("esri.views.2d.MapViewConstraints")],En);const xn=En;var In=n(62516),Cn=n(39156),kn=(n(7836),n(11679),n(97629)),Nn=n(89349),Ln=n(56560),On=n(78115),Rn=n(94464),Pn=n(68749),Dn=n(92374),Fn=n(82541),jn=n(93446),Zn=n(14571);function zn(e){return(t=e)instanceof Float32Array&&t.length>=2||function(e){return Array.isArray(e)&&e.length>=2}(e);var t}var Un,Vn=n(87249);const Gn=[0,0];let Bn=Un=class extends u.oY{constructor(e){super(e),this._viewpoint2D={center:(0,Ln.vt)(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Fi.A,this.id=0,this.inverseTransform=(0,Dn.vt)(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=(0,Dn.vt)(),this.transformNoRotation=(0,Dn.vt)(),this.displayMat3=(0,jn.vt)(),this.displayViewMat3=(0,jn.vt)(),this.viewMat3=(0,jn.vt)(),this.viewMat2d=(0,Pn.vt)(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=(0,en.C)(i,e.viewpoint),this._set("size",(0,yn.C)(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new Un({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return zn(t)?(0,yn.l0)(e,t,this.inverseTransform):(Gn[0]=t,Gn[1]=i,(0,yn.l0)(e,Gn,this.inverseTransform))}toScreen(e,t,i){return zn(t)?(0,yn.l0)(e,t,this.transform):(Gn[0]=t,Gn[1]=i,(0,yn.l0)(e,Gn,this.transform))}toScreenNoRotation(e,t,i){return zn(t)?(0,yn.l0)(e,t,this.transformNoRotation):(Gn[0]=t,Gn[1]=i,(0,yn.l0)(e,Gn,this.transformNoRotation))}toScreenClosest(e,t,i){zn(t)?(Gn[0]=t[0],Gn[1]=t[1]):(Gn[0]=t,Gn[1]=i);const[r]=Gn,{center:n,extent:s,spatialReference:o,transform:a}=this;return(r<s.xmin||r>s.xmax)&&(Gn[0]=(0,Vn.O7)(r,n[0],o)),(0,yn.l0)(e,Gn,a)}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,n=this._get("size");return(0,en.GL)(e,i,n,t,0,r),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:r}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size"),o=new G.A({targetGeometry:new tn.A(e[0],e[1],t),scale:i,rotation:r});if(this._set("viewpoint",o),!s||!t||!i)return;this.resolution=(0,en.Hn)(o),this.rotation=r,this.scale=i,this.spatialReference=t,(0,yn.C)(this.center,e);const a=0!==s[0]?2/s[0]:0,l=0!==s[1]?-2/s[1]:0;(0,Fn.hZ)(this.displayMat3,a,0,0,0,l,0,-1,1,1);const c=(0,Fn.D_)(this.viewMat3),h=(0,Zn.fA)(s[0]/2,s[1]/2),u=(0,Zn.fA)(-s[0]/2,-s[1]/2),p=(0,On.DF)(r);(0,Fn.Tl)(c,c,h),(0,Fn.e$)(c,c,p),(0,Fn.Tl)(c,c,u),(0,Fn.lw)(this.displayViewMat3,this.displayMat3,c);const d=(0,Rn.kN)(this.viewMat2d,h);return(0,Rn.e$)(d,d,p),(0,Rn.Tl)(d,d,u),(0,en.Z7)(this.extent,o,s),(0,en.RG)(this.transform,o,s,n),(0,Rn.B8)(this.inverseTransform,this.transform),(0,en.cp)(this.transformNoRotation,o,s,n),this.worldScreenWidth=(0,en.hV)(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};(0,t._)([(0,v.MZ)({readOnly:!0})],Bn.prototype,"id",void 0),(0,t._)([(0,v.MZ)({value:1,json:{write:!0}})],Bn.prototype,"pixelRatio",null),(0,t._)([(0,v.MZ)({json:{write:!0}})],Bn.prototype,"size",null),(0,t._)([(0,v.MZ)()],Bn.prototype,"spatialReference",void 0),(0,t._)([(0,v.MZ)({type:G.A,json:{write:!0}})],Bn.prototype,"viewpoint",null),Bn=Un=(0,t._)([(0,b.$)("esri.views.2d.ViewState")],Bn);const $n=Bn;var Hn,qn;let Wn=Hn=class extends k.A{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new Hn({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};(0,t._)([(0,v.MZ)()],Wn.prototype,"left",void 0),(0,t._)([(0,v.MZ)()],Wn.prototype,"top",void 0),(0,t._)([(0,v.MZ)()],Wn.prototype,"right",void 0),(0,t._)([(0,v.MZ)()],Wn.prototype,"bottom",void 0),Wn=Hn=(0,t._)([(0,b.$)("esri.views.2d.PaddedViewState.Padding")],Wn);let Kn=qn=class extends $n{constructor(...e){super(...e),this.paddedViewState=new $n,this._updateContent=(()=>{const e=(0,Ln.vt)();return()=>{const t=this._get("size"),i=this._get("padding");if(!t||!i)return;const r=this.paddedViewState;(0,yn.hZ)(e,i.left+i.right,i.top+i.bottom),(0,yn.Re)(e,t,e),(0,yn.C)(r.size,e);const n=r.viewpoint;n&&(this.viewpoint=n)}})(),this.addHandles((0,q.wB)((()=>[this.size,this.padding]),(()=>this._updateContent()),q.OH)),this.padding=new Wn,this.size=[0,0]}set padding(e){this._set("padding",e||new Wn)}set viewpoint(e){if(e){const t=e.clone();this.paddedViewState.viewpoint=e,(0,en.nr)(t,e,this._get("size"),this._get("padding"));const i=this._viewpoint2D,r=t.targetGeometry;i.center[0]=r.x,i.center[1]=r.y,i.rotation=t.rotation,i.scale=t.scale,i.spatialReference=r.spatialReference,this._update()}}clone(){return new qn({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};(0,t._)([(0,v.MZ)()],Kn.prototype,"paddedViewState",void 0),(0,t._)([(0,v.MZ)({type:Wn})],Kn.prototype,"padding",null),(0,t._)([(0,v.MZ)()],Kn.prototype,"viewpoint",null),Kn=qn=(0,t._)([(0,b.$)("esri.views.2d.PaddedViewState")],Kn);const Yn=Kn;let Jn=class extends k.A{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([(0,q.wB)((()=>this.constraints?.version),(e=>{this.constraints&&e&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))}),q.OH)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:t}=this.state.paddedViewState;return this.state.commitProperty("id"),new tn.A({x:e[0],y:e[1],spatialReference:t})}set center(e){if(null==e)return;if(!this.ready)return void this._set("center",e);let t;try{t=this._project(e,this.state.spatialReference)}catch(t){return void y.A.getLogger(this).error(new h.A("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:t}))}const i=this.viewpoint;(0,en.Ji)(i,i,t),this.viewpoint=i}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(null==e)return;if(!e.width||!e.height)return void y.A.getLogger(this).error(new h.A("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let t;try{t=this._project(e,this.state.spatialReference)}catch(e){return void y.A.getLogger(this).error(new h.A("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:e}))}const i=this.viewpoint;(0,en.b)(i,i,t,this.state.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const t=this.viewpoint;(0,en.$0)(t,t,e),this.viewpoint=t}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const t=this._get("extent");return void(t&&(this._set("extent",void 0),this._set("center",t.center)))}const t=this.viewpoint;(0,en.UR)(t,t,e),this.viewpoint=t}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){if(null==e)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let t,i;try{t=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?i=new h.A("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):null==e.targetGeometry&&(i=new h.A("mapview:invalid-viewpoint","geometry not defined"))}catch(e){i=new h.A("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:e})}if(i)return void y.A.getLogger(this).error(i);this._scaleBeforeChangingSpatialReference=null;const r=new G.A({targetGeometry:new tn.A,scale:0,rotation:0});(0,en.C)(r,t),this.constraints?.constrain(r,this.state.paddedViewState.viewpoint),this.state.viewpoint=r,this._set("viewpoint",r)}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(e){if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const t=this._get("extent");return void(t&&(this._set("extent",void 0),this._set("center",t.center)))}const t=this.constraints?.zoomToScale(e)??0;if(!t)return void this._set("zoom",-1);const i=this.viewpoint;(0,en.UR)(i,i,t),this.viewpoint=i,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:t,constraints:i}=this,r=this._get("center"),n=this._get("extent"),s=this._get("scale"),o=this._get("rotation"),a=this._get("viewpoint"),l=this._get("zoom"),c=null!=l&&null!=i&&i.zoomToScale(l)||void 0;let h,u,p;const d=a?.rotation,f=a?.targetGeometry;"extent"===f?.type?h=f:"point"===f?.type&&(u=f,p=a?.scale);const y=n??h;return{center:r??u??y?.center,rotation:o??d,scale:(s??c??p??(y&&(0,en.AU)(y,[e[0]-t.left-t.right,e[1]-t.top-t.bottom])))||void 0}}startup(e,t,i,r){const n=e.targetGeometry;try{this._project(e,i)}catch(t){y.A.getLogger(this).warn(new kn.A("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:n.toJSON(),spatialReference:i,error:t})),e.targetGeometry=r||new tn.A({x:0,y:0,spatialReference:i})}this.constraints?.fit(e),this._set("state",new Yn({padding:this.padding,size:t,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,t],spatialReference:i,rotation:r,scale:n}=this.state.paddedViewState,s=new tn.A({x:e,y:t,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",s),this._set("zoom",-1),this._set("rotation",r),this._set("scale",n),this._set("state",null)}changeSpatialReference(e){const t=this.state.paddedViewState.clone();if(null==this._scaleBeforeChangingSpatialReference)this._scaleBeforeChangingSpatialReference=t.scale;else{const e=t.viewpoint.clone();e.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=e}const i=t.clone(),[r,n]=t.center;let s=null;try{s=this._project(new tn.A({x:r,y:n,spatialReference:t.spatialReference}),e)}catch(t){(0,Nn.i)()||y.A.getLogger(this).warn(new kn.A("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:s?.toJSON(),spatialReference:e,error:t}))}s||(s=new tn.A({x:0,y:0,spatialReference:e}));const o=(0,en.Ji)(new G.A({targetGeometry:new tn.A,scale:0,rotation:0}),t.viewpoint,s);i.viewpoint=o;try{const r=20,n=[t.size[0]/2,t.size[1]/2],s=[n[0]+r,n[1]],a=t.toMap([0,0],s),{x:l,y:c}=this._project(new tn.A({x:a[0],y:a[1],spatialReference:t.spatialReference}),e);a[0]=l,a[1]=c,i.toScreen(a,a);const h=(0,en.s5)(n,a,s),u=Math.hypot(a[0]-n[0],a[1]-n[1])/r;!Number.isFinite(u)||Math.abs(u)>4?(o.rotation=0,o.targetGeometry=new tn.A({x:0,y:0,spatialReference:e})):(o.scale*=u,o.scale>(0,M.A)("mapview-srswitch-adjust-rotation-scale-threshold")?o.rotation=0:o.rotation+=Number.isFinite(h)?h:0)}catch{}this._get("constraints")?.constrain(o,void 0),this._get("state").viewpoint=o}resize(e,t){if(!this.ready)return;const i=this.state;let r=this.state.paddedViewState.viewpoint;const n=this.state.paddedViewState.size.concat();i.size=[e,t],(0,en.XR)(r,r,n,this.state.paddedViewState.size,this.resizeAlign),r=this.constraints?.constrain(r,void 0)??r,this.state.viewpoint=r}toMap(e){if(!this.ready)return null;const[t,i]=this.state.toMap([0,0],[e.x,e.y]),r=this.state.spatialReference;return new tn.A({x:t,y:i,spatialReference:r})}toScreen(e,t){if(!this.ready)return null;const i=this._project(e,this.state.spatialReference),r=[i.x,i.y];return!1===t?.pickClosestTarget?this.state.toScreen(r,r):this.state.toScreenClosest(r,r),(0,Wi.tc)(r[0],r[1])}_project(e,t){const i=e?.targetGeometry||e;if(!t)return e;if(!i)return null;if(t.imageCoordinateSystem||i.spatialReference?.imageCoordinateSystem)return e;if((0,Zi.aI)(t,i.spatialReference))return e;const r=(0,oi.project)(i,t);if(!r)throw new h.A("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:t});return function(e){return"esri.Viewpoint"===e?.declaredClass}(e)?(e.targetGeometry=r,e):r}};function Xn(e,t){switch(t){case"primary":return"touch"===e.pointerType||0===e.button;case"secondary":return"touch"!==e.pointerType&&2===e.button;case"tertiary":return"touch"!==e.pointerType&&1===e.button}}(0,t._)([(0,v.MZ)({type:tn.A})],Jn.prototype,"center",null),(0,t._)([(0,v.MZ)()],Jn.prototype,"constraints",void 0),(0,t._)([(0,v.MZ)({type:Fi.A})],Jn.prototype,"extent",null),(0,t._)([(0,v.MZ)({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],Jn.prototype,"padding",null),(0,t._)([(0,v.MZ)()],Jn.prototype,"ready",void 0),(0,t._)([(0,v.MZ)()],Jn.prototype,"resizeAlign",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Jn.prototype,"resolution",null),(0,t._)([(0,v.MZ)({type:Number})],Jn.prototype,"rotation",null),(0,t._)([(0,v.MZ)({type:Number})],Jn.prototype,"scale",null),(0,t._)([(0,v.MZ)({readOnly:!0})],Jn.prototype,"state",void 0),(0,t._)([(0,v.MZ)({type:G.A})],Jn.prototype,"viewpoint",null),(0,t._)([(0,v.MZ)()],Jn.prototype,"zoom",null),Jn=(0,t._)([(0,b.$)("esri.views.2d.ViewStateManager")],Jn);class Qn extends hr.l{constructor(e,t){super(!0),this._view=e,this.registerIncoming("double-click",t,(e=>this._handleDoubleClick(e,t)))}_handleDoubleClick(e,t){Xn(e.data,"primary")&&(e.stopPropagation(),t?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}}class es extends hr.l{constructor(e,t,i){super(!0),this.view=e,this.pointerType=t,this.registerIncoming("double-tap-drag",i,(e=>this._handleDoubleTapDrag(e)))}_handleDoubleTapDrag(e){const{data:t}=e,{pointerType:i}=t;if(i!==this.pointerType)return;e.stopPropagation();const{action:r,delta:n}=t,{view:s}=this,{mapViewNavigation:o}=s;switch(r){case"begin":{const{scale:e}=s;this._startScale=e,this._currentScale=e,this._previousDelta=n,o.begin();break}case"update":{if(this._previousDelta.y===n.y)return;this._previousDelta=n;const e=1.015**n.y,t=this._startScale*e,i=t/this._currentScale;o.setViewpointImmediate(i),this._currentScale=t;break}case"end":{const{constraints:e}=s,{effectiveLODs:t,snapToZoom:i}=e;if(!i||!t)return void o.end();const r=e.snapScale(this._currentScale),a=(n.y>0?Math.max(r,e.snapToPreviousScale(this._startScale)):Math.min(r,e.snapToNextScale(this._startScale)))/this._currentScale;o.zoom(a);break}}}}class ts{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const t=e.data,i=t.pointers.size;switch(t.action){case"start":this._currentCount=i,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){this._startEvent=e,this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}}class is extends hr.l{constructor(e,t,i){super(!0),this.view=e,this.pointerAction=t,this.registerIncoming("drag",i,(e=>this._handleDrag(e))),this.registerIncoming("pointer-down",(()=>this.stopMomentumNavigation()))}onInstall(e){super.onInstall(e),this._dragEventSeparator=new ts({start:(e,t)=>{this.view.mapViewNavigation.pan.begin(this.view,t.data),t.stopPropagation()},update:(e,t)=>{this.view.mapViewNavigation.pan.update(this.view,t.data),t.stopPropagation()},end:(e,t)=>{this.view.mapViewNavigation.pan.end(this.view,t.data),t.stopPropagation()},condition:(e,t)=>1===e&&Xn(t.data,this.pointerAction)})}_handleDrag(e){const t=this.view.mapViewNavigation;t.pinch.zoomMomentum||t.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class rs extends hr.l{constructor(e,t,i){super(!0),this._view=e,this.pointerAction=t;const r=this._view.mapViewNavigation;this._dragEventSeparator=new ts({start:(e,t)=>{r.rotate.begin(this._view,t.data),t.stopPropagation()},update:(e,t)=>{r.rotate.update(this._view,t.data),t.stopPropagation()},end:(e,t)=>{r.rotate.end(),t.stopPropagation()},condition:(e,t)=>1===e&&Xn(t.data,this.pointerAction)}),this.registerIncoming("drag",i,(e=>this._dragEventSeparator.handle(e)))}}var ns=n(80347);function ss(e){let t=e*e;return e<0&&(t*=-1),t}class os extends hr.l{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new Ri.A,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",(e=>this._handleGamePadEvent(e))),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([(0,q.wB)((()=>this._view.navigation.gamepad?.enabled),(e=>{e?(this._handle.resume(),this._frameTask||(this._frameTask=(0,yi.mg)({update:e=>this._frameUpdate(e.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))}),q.Vh)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const t=this._view.navigation.gamepad.device;t&&e.data.device!==t||this._currentDevice&&this._currentDevice!==e.data.device||("end"===e.data.action?(this._currentDevice=null,function(e){e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0}(this._transformation)):(this._currentDevice=e.data.device,function(e,t,i){const r=i,n=e.state,s=e.device,o="forward-down"===t.tiltDirection?1:-1;"standard"===s.deviceType?(r.translation[0]=ss(n.axes[0]),r.translation[1]=ss(n.axes[1]),r.translation[2]=ss(n.buttons[7])-ss(n.buttons[6]),r.heading=ss(n.axes[2]),r.tilt=ss(n.axes[3])):"spacemouse"===s.deviceType&&(r.translation[0]=1.2*ss(n.axes[0]),r.translation[1]=1.2*ss(n.axes[1]),r.translation[2]=2*-ss(n.axes[2]),r.heading=1.2*ss(n.axes[5]),r.tilt=1.2*ss(n.axes[3])),r.tilt*=o,(0,ns.h)(r.translation,r.translation,1)}(e.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(e){const t=this._transformation;if(function(e){return 0===e.translation[0]&&0===e.translation[1]&&0===e.translation[2]&&0===e.heading&&0===e.tilt&&0===e.zoom}(t))return;const i=this._view.viewpoint.clone(),r=this._view.navigation.gamepad.velocityFactor,n=ls*r*e;(0,en.aA)(i,i,[t.translation[0]*n,-t.translation[1]*n]);const s=1+t.translation[2]*cs*e,o=this._view.constraints.rotationEnabled?-t.heading*as*e:0,a=this._view.size,l=[a[0]/2,a[1]];(0,en.WK)(i,i,s,o,l,a);const c=this._view.constraints.constrain(i,this._view.viewpoint);this._view.viewpoint=c}}const as=.06,ls=.7,cs=6e-4;function hs(e){const t=()=>e("visible"===document.visibilityState);return document.addEventListener("visibilitychange",t),{remove:()=>document.addEventListener("visibilitychange",t)}}class us extends hr.l{constructor(e,t,i){super(!0),this.view=e,this.keys=t,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=e=>{const t=this._keyMap[e.data.key];if(e.modifiers.has("Meta")||e.modifiers.has("Ctrl"))return void this._stopMovement();if(null==t)return;e.stopPropagation(),e.preventDefault();const i="key-down"===e.type;if(this._pressedKeys[i?"add":"delete"](t),i){if(this._direction===t)return;this._direction=t,this._isSticky=!1,this._setTimeout((()=>{this._isSticky&&this._handlePopKey()}))}else{const e=void 0===this._timeout,t=this._pressedKeys.size>0;e||t?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),null==this._direction&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[t.left]:"left",[t.right]:"right",[t.up]:"up",[t.down]:"down"},this.registerIncoming("key-down",i,this._handleKey),this.registerIncoming("key-up",i,this._handleKey),this.registerIncoming("blur",i,this._stopMovement),this._visibilityHandle=hs((e=>e?null:this._stopMovement()))}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(e){const t=null!=this._currentDirection;if(null!=e){if(t||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}}else t&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=void 0===e?void 0:setTimeout((()=>{this._timeout=void 0,e()}),this._stickyKeyDuration)}}class ps extends hr.l{constructor(e,t,i){super(!0),this.view=e,this.keys=t,this._pressed=!1,this._keyToDirection={[t.clockwiseOption1]:"clockwise",[t.clockwiseOption2]:"clockwise",[t.counterClockwiseOption1]:"counterClockwise",[t.counterClockwiseOption2]:"counterClockwise",[t.resetOption1]:"reset",[t.resetOption2]:"reset"},this.registerIncoming("key-down",i,(e=>this._handleKeyDown(e))),this.registerIncoming("key-up",i,(e=>this._handleKeyUp(e))),this.registerIncoming("blur",i,(()=>this._handleStop())),this._visibilityHandle=hs((e=>e?null:this._handleStop()))}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,t){const i=e.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const r=this._keyToDirection[e.data.key];if(this._pressed=null!=r,this._pressed){if(e.preventDefault(),t)switch(this.view.mapViewNavigation.begin(),r){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}}var ds,fs;(fs=ds||(ds={}))[fs.IN=0]="IN",fs[fs.OUT=1]="OUT";class ys extends hr.l{constructor(e,t,i){super(!0),this.view=e,this.keys=t,this._keysToZoomAction={},this.registerIncoming("key-down",i,(e=>this._handleKeyDown(e))),t.zoomIn.forEach((e=>this._keysToZoomAction[e]=ds.IN)),t.zoomOut.forEach((e=>this._keysToZoomAction[e]=ds.OUT))}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const t=e.modifiers;if(t.size>0&&!t.has("Shift"))return;const{key:i}=e.data;if(!(i in this._keysToZoomAction))return;const r=this._keysToZoomAction[i],{mapViewNavigation:n}=this.view;let s=null;switch(r){case ds.IN:s=n.zoomIn();break;case ds.OUT:s=n.zoomOut();break;default:return}n.begin(),s.then((()=>n.end())),e.stopPropagation()}}class ms extends hr.l{constructor(e,t){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",t,(e=>this._handleMouseWheel(e)))}_handleMouseWheel(e){if(!this._view.navigation.mouseWheelZoomEnabled)return;if(e.preventDefault(),e.stopPropagation(),!this._canZoom)return;const t=this._view.mapViewNavigation,{x:i,y:r,deltaY:n}=e.data,s=1/.6**(1/60*n),o=t.zoom(s,[i,r]);o&&(this._canZoom=!1,o.catch((()=>{})).then((()=>{this._canZoom=!0,t.end()})))}}class gs extends hr.l{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",(e=>this._handleDrag(e))),this.registerIncoming("pointer-down",(()=>this._stopMomentumNavigation()));const t=this.view.mapViewNavigation;this._dragEventSeparator=new ts({start:(e,i)=>{t.pinch.begin(this.view,i.data),i.stopPropagation()},update:(e,i)=>{t.pinch.update(this.view,i.data),i.stopPropagation()},end:(e,i)=>{t.pinch.end(this.view),i.stopPropagation()},condition:e=>e>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}function vs(e){const t=e.native;return t?{buttons:t.buttons.map((e=>e.pressed?e.value||1:0)),axes:t.axes.map((t=>function(e,t){const i=Math.abs(e);return i<t?0:Math.sign(e)*(i-t)/(1-t)}(t,e.axisThreshold)))}:{buttons:[],axes:[]}}class _s{constructor(e,t){this._element=e,this._input=t,this._hasEventListeners=!1,this._onConnectGamepad=e=>{this._connectGamepad(e.gamepad)},this._onDisconnectGamepad=e=>{const t=e.gamepad,i=t.index,r=this._inputDevices[i];r&&(this._emitGamepadEvent(t,vs(r),!1),this._inputDevices.splice(i,1),this._latestUpdate.splice(i,1),this._input.gamepad.devices.remove(r),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const i="getGamepads"in window.navigator,r=window.isSecureContext;this.supported=i&&r,this.supported&&(this._forEachGamepad((e=>this._connectGamepad(e))),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const t=new kr(e);"unknown"!==t.deviceType&&(this._inputDevices[e.index]=t,this._input.gamepad.devices.add(t)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){null==this._frameTask&&(this._frameTask=(0,yi.mg)({update:()=>this._readGamepadState()}))}_stopPolling(){null!=this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),t=this._element.contains(document.activeElement),i="document"===this._input.gamepad.enabledFocusMode&&!e||"view"===this._input.gamepad.enabledFocusMode&&!t;this._forEachGamepad((e=>{const t=this._inputDevices[e.index];if(!t)return;const r=this._latestUpdate[e.index],n=vs(t),s=i||function(e){for(let t=0;t<e.axes.length;t++)if(0!==e.axes[t])return!1;for(let t=0;t<e.buttons.length;t++)if(0!==e.buttons[t])return!1;return!0}(n);if(r){if(r.timestamp===e.timestamp)return;if(!r.active&&s)return;if(function(e,t){if(e.axes.length!==t.axes.length)return!1;if(e.buttons.length!==t.buttons.length)return!1;for(let i=0;i<e.axes.length;i++)if(e.axes[i]!==t.axes[i])return!1;for(let i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}(r.state,n))return}this._emitGamepadEvent(e,n,!s)}))}_forEachGamepad(e){const t=window.navigator.getGamepads();for(let i=0;i<t.length;i++){const r=t[i];this._validate(r)&&e(r)}}_emitGamepadEvent(e,t,i){const r=this._latestUpdate[e.index],n=r&&r.active;if(!n&&!i)return;const s=!n&&i?"start":n&&i?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:t,active:i},this._callback&&this._callback({device:this._inputDevices[e.index],state:t,action:s})}_validate(e){if(!e)return!1;if(!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}}const bs=(0,M.A)("edge"),ws=(0,M.A)("chrome"),Ms=(0,M.A)("ff"),Ts=(0,M.A)("safari"),Ss="esri-view-surface",As={touchNone:`${Ss}--touch-none`,touchPan:`${Ss}--touch-pan`};class Es{constructor(e,t){this._input=t,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new _s(e,this._input),this._gamepadSource.onEvent=e=>this._callback("gamepad",e)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach((e=>{this._releasePointerCaptureSafe(e)})),this._gamepadSource=(0,m.pR)(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const t in this._active)if(!e||!e.has(t)){const e=this._active[t];this._element.removeEventListener(xs[t],e),delete this._active[t]}e&&e.forEach((e=>{if(!this._active[e]&&xs[e]){const t=(this._eventHandlers[e]||this._handleDefault).bind(this,e);this._element.addEventListener(xs[e],t),this._active[e]=t}})),this._gamepadSource.hasEventListeners=e?.has("gamepad")??!1}setPointerCapture(e,t){t?this._setPointerCatpureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?As.touchNone:As.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?As.touchPan:As.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(As.touchNone),this._element.classList.remove(As.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch(e){}}_updateNormalizedPointerLikeEvent(e,t){const i=(0,_r.Uo)(this._element,e);return Es.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),t.x=i.x,t.y=i.y,t}_handleKey(e,t){const{key:i}=t;i&&"key-up"===e&&this._keyDownState.delete(i);const r={native:t,key:i,repeat:!!i&&this._keyDownState.has(i)};i&&"key-down"===e&&this._keyDownState.add(r.key),this._callback(e,r)}_handlePointer(e,t){const i=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});this._callback(e,i)}_handlePointerPreventDefault(e,t){const i=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});t.preventDefault(),this._callback(e,i)}_handleMouseWheel(e,t){let i=t.deltaY;switch(t.deltaMode){case 0:bs&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}bs?i*=.7:ws||Ts?i*=.6:Ms&&(i*=1.375);const r=Math.abs(i);if(r>100){const e=.02;i=i/r*200/(1+Math.exp(-e*(r-100)))}const n=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,deltaY:i});this._callback(e,n)}_handlePointerCaptureLost(e,t){this._activePointerCaptures.delete(t.pointerId),this._handleDefault(e,t)}_handleDefault(e,t){const i={native:t};t.preventDefault(),this._callback(e,i)}_preventAltKeyDefault(e){"Alt"===e.key&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}}Es.test={disableSubpixelCoordinates:!1};const xs={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class Is extends hr.l{constructor(){super(!0),this.registerIncoming("context-menu",(e=>{e.data.native.preventDefault()}))}}function Cs(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function ks(e){const{native:t}=e,{pointerId:i,button:r,pointerType:n}=t;return"mouse"===n?`${i}:${r}`:`${n}`}class Ns extends hr.l{constructor(e=250,t=10,i=350,r=35,n=lr.p){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=t,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=r,this._clock=n,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=(0,Wi.tc)(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new ts({start:(e,t)=>this._dragStart(e,t),update:(e,t)=>this._dragUpdate(t),end:(e,t)=>this._dragEnd(t)}),this.registerIncoming("drag",(e=>this._dragEventSeparator.handle(e))),this.registerIncoming("pointer-down",(e=>this._handlePointerDown(e))),this.registerIncoming("pointer-up",(()=>this._handlePointerUp()))}onUninstall(){this._pointerState.forEach((e=>{e.doubleTapTimeout=(0,m.xt)(e.doubleTapTimeout)}))}get hasPendingInputs(){return(0,Gi.Bs)(this._pointerState,(e=>null!=e.doubleTapTimeout))}_clearPointerDown(e){const t=this._pointerState.get(e);t&&(t.doubleTapTimeout=(0,m.xt)(t.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_createDoubleTapDragData(e,t,i){const{button:r,buttons:n,pointer:s,pointers:o,pointerType:a,timestamp:l}=i;return{action:e,delta:t,button:r,buttons:n,pointer:s,pointers:o,pointerType:a,timestamp:l}}_dragStart(e,t){if(!this._doubleTapDragReady||1!==e)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:r}=t,{center:n}=i;this._dragStartCenter=n;const s=this._createDoubleTapDragData("begin",(0,Wi.tc)(0,0),i);this._doubleTapDrag.emit(s,void 0,r),t.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:t,modifiers:i}=e,{center:r}=t,n=(0,Wi.tc)(r.x-this._dragStartCenter.x,r.y-this._dragStartCenter.y),s=this._createDoubleTapDragData("update",n,t);this._doubleTapDrag.emit(s,void 0,i),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:t,modifiers:i}=e,{center:r}=t,n=(0,Wi.tc)(r.x-this._dragStartCenter.x,r.y-this._dragStartCenter.y),s=this._createDoubleTapDragData("end",n,t);this._doubleTapDrag.emit(s,void 0,i),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:t}=e,i=ks(t),r=this._pointerState.get(i),{pointerType:n}=t.native;if(r){const s="touch"===n?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(i),Cs(r.event.data,t)>s?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:t}=e,{pointerType:i}=t.native,r=ks(t),n="touch"===i?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,s=this._clock.setTimeout((()=>this._clearPointerDown(r)),n);this._pointerState.set(r,{event:e,doubleTapTimeout:s}),this.refreshHasPendingInputs()}}var Ls,Os=n(67900);class Rs extends hr.l{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,t,i,r){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:t.buttons,timestamp:r,pointers:Fs(this._activePointerMap),pointer:t,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(e){const t=e.native.pointerId,i=Ds(this._activePointerMap).angle,r={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(t,r);const n=js(r,Ps(this._activePointerMap));r.initialAngle=n,r.lastAngle=n,this._updatePointerAngles(i)}_updatePointer(e){if(e&&null==e.x&&null==e.y)return;const t=e.native.pointerId,i=this._activePointerMap.get(t);i?i.event=e:this._addPointer(e)}_removePointer(e){const t=Ds(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(t)}_updatePointerAngles(e){const t=Ds(this._activePointerMap);this._activePointerMap.forEach((i=>{i.initialAngle=js(i,t)-e,i.lastAngle=js(i,t)-e}))}_emitEvent(e,t,i){const r=Ds(this._activePointerMap);this._drag.emit(this._createPayload(e,t,r,i),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const t=e.data.native.pointerId,i=(0,Os.l5)(e.timestamp);this._activePointerMap.get(t)&&(1===this._activePointerMap.size?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,i),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(t)):(this._removePointer(t),this._emitEvent("removed",e.data,(0,Os.l5)(e.timestamp))))}_handlePointerDrag(e){const t=e.data,i=t.currentEvent,r=(0,Os.l5)(e.timestamp);switch(t.action){case"start":case"update":this._isDragging?this._activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),!this._isCurrentDragSuppressed&&this._emitEvent("update",i,r)):(this._addPointer(i),this._emitEvent("added",i,r),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(i),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",i,r))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&"touch"===this._pointerType&&1===this._activePointerMap.size}}function Ps(e){const t=[];return e.forEach((e=>{t.push((0,Wi.tc)(e.event.x,e.event.y))})),function(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:(0,Wi.tc)()},0===e.length)return t;if(1===e.length)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(2===e.length){const[i,r]=e,[n,s]=[r.x-i.x,r.y-i.y];return t.radius=Math.sqrt(n*n+s*s)/2,t.center.x=(i.x+r.x)/2,t.center.y=(i.y+r.y)/2,t}let i=0,r=0;for(let t=0;t<e.length;t++)i+=e[t].x,r+=e[t].y;i/=e.length,r/=e.length;const n=e.map((e=>e.x-i)),s=e.map((e=>e.y-r));let o=0,a=0,l=0,c=0,h=0,u=0,p=0;for(let e=0;e<n.length;e++){const t=n[e],i=s[e],r=t*t,d=i*i;o+=r,a+=d,l+=t*i,c+=r*t,h+=d*i,u+=t*d,p+=i*r}const d=.5*(c+u),f=.5*(h+p),y=o*a-l*l,m=(d*a-f*l)/y,g=(o*f-l*d)/y,v=(0,Wi.tc)(m+i,g+r);return{radius:Math.sqrt(m*m+g*g+(o+a)/e.length),center:v}}(t)}function Ds(e){const t=Ps(e);let i=0;return e.forEach((e=>{let r=js(e,t),n=r-e.lastAngle;for(;n>Math.PI;)n-=2*Math.PI;for(;n<-Math.PI;)n+=2*Math.PI;r=e.lastAngle+n,e.lastAngle=r;const s=r-e.initialAngle;i+=s})),i/=e.size||1,{angle:i,radius:t.radius,center:t.center}}function Fs(e){const t=new Map;return e.forEach(((e,i)=>t.set(i,e.event))),t}function js(e,t){const i=e.event,r=i.x-t.center.x,n=i.y-t.center.y;return Math.atan2(n,r)}!function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"}(Ls||(Ls={}));class Zs extends hr.l{constructor(e=250,t=10,i=350,r=35,n=lr.p){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=t,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=r,this._clock=n,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach((e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()})),super.onUninstall()}_handlePointerDown(e){const t=e.data,i=ks(t);if(!this._pointerState.has(i)){const e={downButton:t.native.button,x:t.x,y:t.y,immediateDoubleClick:null};this._pointerState.set(i,e),this.startCapturingPointer(t.native)}}_handlePointerUp(e){const t=e.data,i=ks(t),r=this._pointerState.get(i);if(r&&r.downButton===t.native.button){const i=r.immediateDoubleClick,n="touch"===e.data.native.pointerType?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;i?(i.timeoutHandle.remove(),Cs(i,e.data)>n?this._startImmediateDoubleClick(e,r):(this._immediateDoubleClick.emit(e.data,void 0,i.modifiers),this._removeState(t))):Cs(r,e.data)>n?this._removeState(t):this._startImmediateDoubleClick(e,r)}}_startImmediateDoubleClick(e,t){const i="touch"===e.data.native.pointerType?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;t.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout((()=>this._removeState(e.data)),i)}}_removeState(e){const t=ks(e);this._pointerState.delete(t),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}}class zs extends hr.l{constructor(e=300,t=1.5,i=6,r=6,n=500,s=lr.p){super(!1),this._maximumClickDelay=e,this._movementUntilMouseDrag=t,this._movementUntilPenDrag=i,this._movementUntilTouchDrag=r,this._holdDelay=n,this._clock=s,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",(e=>{this._handlePointerLoss(e,"pointer-up")})),this.registerIncoming("pointer-capture-lost",(e=>{this._handlePointerLoss(e,"pointer-capture-lost")})),this.registerIncoming("pointer-cancel",(e=>{this._handlePointerLoss(e,"pointer-cancel")})),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach((e=>{e.holdTimeout=(0,m.xt)(e.holdTimeout)})),super.onUninstall()}_handlePointerDown(e){const t=e.data,i=t.native.pointerId;let r=null;0===this._pointerState.size&&(r=this._clock.setTimeout((()=>{const t=this._pointerState.get(i);if(t){if(!t.isDragging){const i=t.previousEvent;this._pointerHold.emit(i,void 0,e.modifiers),t.holdEmitted=!0}t.holdTimeout=null}}),this._holdDelay));const n={startEvent:t,previousEvent:t,startTimestamp:e.timestamp,isDragging:!1,downButton:t.native.button,holdTimeout:r,modifiers:new Set};this._pointerState.set(i,n),this.startCapturingPointer(t.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_createPointerDragData(e,t,i){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:i}}_handlePointerMove(e){const t=e.data,i=t.native.pointerId,r=this._pointerState.get(i);r&&(r.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",r,t),void 0,r.modifiers):function(e,t){const i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)}(t,r.startEvent)>this._getDragThreshold(t.native.pointerType)&&this._startDragging(e),r.previousEvent=t)}_getDragThreshold(e){switch(e){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(e){const t=e.data,i=t.native.pointerId;this._pointerState.forEach((r=>{null!=r.holdTimeout&&(r.holdTimeout.remove(),r.holdTimeout=null),r.isDragging||(r.modifiers=e.modifiers,r.isDragging=!0,i===r.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",r,t)):this._pointerDrag.emit(this._createPointerDragData("start",r,r.previousEvent),e.timestamp))}))}_handlePointerLoss(e,t){const i=e.data,r=i.native.pointerId,n=this._pointerState.get(r);n&&(null!=n.holdTimeout&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",n,"pointer-up"===t?i:n.previousEvent),void 0,n.modifiers):"pointer-up"===t&&n.downButton===i.native.button&&e.timestamp-n.startTimestamp<=this._maximumClickDelay&&!n.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(r),this.stopCapturingPointer(i.native),0===this._pointerState.size&&this._moveHandle.pause())}}class Us extends hr.l{constructor(e=250,t=10,i=350,r=35,n=lr.p){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=t,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=r,this._clock=n,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach((e=>e.doubleClickTimer=(0,m.xt)(e.doubleClickTimer)))}get hasPendingInputs(){return(0,Gi.Bs)(this._pointerState,(e=>null!=e.doubleClickTimer))}_clearDoubleClickTimer(e,t){const i=this._pointerState.get(e);i&&(i.doubleClickTimer=(0,m.xt)(i.doubleClickTimer),t&&this._click.emit(i.event.data,void 0,i.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const t=this._pointerState.get(e);1===t.pointerDownCount&&this._click.emit(t.event.data,void 0,t.event.modifiers),t.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_getPointerId(e){const{pointerId:t,pointerType:i,button:r}=e.native;return"mouse"===i?`${t}:${r}`:`${i}`}_handleImmediateClick(e){const t=e.data,{pointerType:i}=t.native,r=this._getPointerId(t);if(!this._pointerState.has(r))return void this._startClick(e);const n=this._pointerState.get(r),{data:s,modifiers:o}=n.event,a="touch"===i?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;Cs(s,t)>a?(this._clearDoubleClickTimer(r,!0),this._startClick(e)):(this._clearDoubleClickTimer(r,!1),2===n.pointerDownCount&&this._doubleClick.emit(s,void 0,o))}_handlePointerDown(e){const t=ks(e.data),i=this._pointerState.get(t);i&&(i.pointerDownCount+=1)}_startClick(e){const{data:t}=e,{native:{pointerType:i}}=t,r=ks(t),n="touch"===i?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,s=this._clock.setTimeout((()=>this._doubleClickTimeoutExceeded(r)),n);this._pointerState.set(r,{event:e,doubleClickTimer:s,pointerDownCount:1}),this.refreshHasPendingInputs()}}const Vs={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},Gs={zoomIn:["=","+"],zoomOut:["-","_"]},Bs={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};let $s=class extends k.A{initialize(){const e=()=>this.view?.ready;this.addHandles([(0,q.z7)((()=>!e()),(()=>this._disconnect())),(0,q.z7)(e,(()=>this._connect()))])}destroy(){this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}isModifierKeyDown(e){return this._inputManager?.isModifierKeyDown(e)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=(0,m.pR)(this._inputManager)}_connect(){const e=this.view.surface,t=new Es(e,this.view.input),i=[new Zs,new zs,new Us,new Rs(this.view.navigation),new Ns],r=new Ii.e({eventSource:t,recognizers:i});r.installHandlers("prevent-context-menu",[new Is],Ii.o.INTERNAL),r.installHandlers("navigation",[new gs(this.view),new os(this.view),new ms(this.view),new Qn(this.view),new Qn(this.view,["Ctrl"]),new is(this.view,"primary"),new us(this.view,Vs),new ys(this.view,Gs),new ps(this.view,Bs),new rs(this.view,"secondary"),new es(this.view,"touch")],Ii.o.INTERNAL),this.view.viewEvents.connect(r),this._source=t,this._inputManager=r,(0,q.wB)((()=>this.view?.navigation?.browserTouchPanEnabled),(e=>{this._source&&(this._source.browserTouchPanningEnabled=!e)}),q.Vh)}get test(){return{inputManager:this._inputManager}}};(0,t._)([(0,v.MZ)()],$s.prototype,"view",void 0),(0,t._)([(0,v.MZ)()],$s.prototype,"latestPointerType",null),(0,t._)([(0,v.MZ)()],$s.prototype,"latestPointerLocation",null),(0,t._)([(0,v.MZ)()],$s.prototype,"multiTouchActive",null),$s=(0,t._)([(0,b.$)("esri.views.2d.input.MapViewInputManager")],$s);const Hs=$s;var qs=n(52708),Ws=n(2532),Ks=n(17142),Ys=n(57021);const Js={added:[],removed:[]},Xs=new Set,Qs=new Cn.A(0,0,0,0);class eo extends L.A{constructor(e){super(),this._tiles=new Map,this._index=(0,qs.r)(9,(0,M.A)("esri-csp-restrictions")?e=>({minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||0===(0,Ws.VL)(e)||0===(0,Ws.uJ)(e))return[];const t=function(e,t){const i=(0,Zi.Vp)(t);if(!i)return null;const[r,n]=i.valid;return e[2]>n?[(0,Ws.vt)([e[0],e[1],n,e[3]]),(0,Ws.vt)([r,e[1],r+e[2]-n,e[3]])]:e[0]<r?[(0,Ws.vt)([r,e[1],e[2],e[3]]),(0,Ws.vt)([n-(r-e[0]),e[1],n,e[3]])]:null}(e,this.tileScheme.spatialReference);return null!=t?[...new Set([...this.boundsIntersections(t[0]),...this.boundsIntersections(t[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const t={added:[],removed:[]};for(const i of e.added)if(!this.has(i)){const e=new Ks.F(this.tileScheme,i);this._tiles.set(i,e),this._index.insert(e),t.added.push(e)}for(const i of e.removed)if(this.has(i)){const e=this.get(i);this._tiles.delete(i),this._index.remove(e),t.removed.push(e)}this.tiles.length=0,this._tiles.forEach((e=>this.tiles.push(e))),(t.added.length||t.removed.length)&&this.emit("update",t)}setViewState(e){const t=this.tileScheme.getTileCoverage(e,0);if(!t)return;const{spans:i,lodInfo:r}=t,{level:n}=r;if(i.length>0)for(const{row:e,colFrom:t,colTo:s}of i)for(let i=t;i<=s;i++){const t=Qs.set(n,e,r.normalizeCol(i),r.getWorldForColumn(i)).id;if(Xs.add(t),!this.has(t)){const e=new Ks.F(this.tileScheme,t);this._tiles.set(t,e),this._index.insert(e),this.tiles.push(e),Js.added.push(e)}}for(let e=this.tiles.length-1;e>=0;e--){const t=this.tiles[e];Xs.has(t.id)||(this._tiles.delete(t.id),this.tiles.splice(e,1),this._index.remove(t),Js.removed.push(t))}(Js.added.length||Js.removed.length)&&this.emit("update",Js),Ys.A.pool.release(t),Xs.clear(),Js.added.length=0,Js.removed.length=0}}var to=n(43621),io=n(20857);function ro(e,t,i,r,n,s){return o=>{if(o instanceof io.A){if(o.layer===e)s?.();else{const t=e.allLayerViews.find((e=>e.layer===o.layer));t&&n?.(t)}r(so(o))}else if("subtype-sublayer"===o.type){const t=e.allLayerViews.find((e=>e.layer===o.parent));t&&i(o,t)}else{const i=e.allLayerViews.find((e=>e.layer===o));i&&t(i)}}}function no(e,t){if(e)if((0,vr.xZ)(e))for(const i of e)if((0,vr.xZ)(i))for(const e of i)t(e);else t(i);else t(e)}function so(e){const t=e.getObjectId();return t?`${e.layer?.uid??e.sourceLayer?.uid??"MapView"}/${t}`:`"MapView/${e.uid}`}function oo({layer:e},t){"subtype-group"===e.type&&e.sublayers.forEach((e=>{t(e)}))}var ao=n(32549);const lo={flipY:!0,premultipliedAlpha:!0};function co(e,t){const i=function(e,t,i,r){e.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let n=null;null!=e.width&&null!=e.height?n=[e.width,e.height]:null==e.width&&null!=e.height?n=[e.height,e.height]:null!=e.width&&null==e.height?n=[e.width,e.width]:null==e.width&&null==e.height&&(n=null);const s=i[0]-(r.left+r.right),o=i[1]-(r.top+r.bottom);let a,l,c=e.area||{x:0,y:0,width:s,height:o};if(n){const e=s/o,t=n[0]/n[1];if(t>e){const e=c.width/t;c={x:c.x,y:Math.round(c.y+(c.height-e)/2),width:c.width,height:Math.round(e)}}else{const e=c.height*t;c={x:Math.round(c.x+(c.width-e)/2),y:c.y,width:Math.round(e),height:c.height}}}else n=[c.width,c.height];return n[0]>c.width?(a=Math.min(n[0]/c.width,t),l=n[0]/c.width/a):(a=1,l=n[0]/c.width),{cropArea:{x:Math.round((c.x+r.left)*a),y:Math.round((c.y+r.top)*a),width:Math.round(c.width*a),height:Math.round(c.height*a)},outputScale:l,resolutionScale:a}}(t||{},function(e,t){return Math.min(4,(0,ao.x2)(t,Math.min(4096,e.context.parameters.maxTextureSize)))}(e.stage,e.size),e.size,e.padding),r=function(e={},t){if(!e.layers)return;const i=[];return e.layers.forEach((e=>{const r=t.find((t=>t.layer.id===e.id));r?.container&&i.push(r.container)})),i}(t,e.allLayerViews);return e.stage.takeScreenshot(i,r,e.backgroundColor,t?.rotation)}let ho=class extends k.A{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),null==this._timer&&(this._timer=setInterval((()=>{performance.now()-this._timestamp>=160&&this.clear()}),160))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};(0,t._)([(0,v.MZ)()],ho.prototype,"_timer",void 0),(0,t._)([(0,v.MZ)()],ho.prototype,"stationary",null),ho=(0,t._)([(0,b.$)("esri.views.2d.support.StationaryManager")],ho);var uo=n(90436),po=n(89574);const fo="esri-component";let yo=class extends k.A{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(e){this._set("id",e)}set node(e){const t=this._get("node");e!==t&&(e&&e.classList.add(fo),t&&t.classList.remove(fo),this._set("node",e))}castNode(e){return this.widget?.destroy(),e?"string"==typeof e||function(e){return e&&"nodeType"in e}(e)?(this._set("widget",null),(0,di.$H)(e)):(function(e){return e&&"function"==typeof e.render}(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};(0,t._)([(0,v.MZ)()],yo.prototype,"id",null),(0,t._)([(0,v.MZ)()],yo.prototype,"node",null),(0,t._)([(0,O.w)("node")],yo.prototype,"castNode",null),(0,t._)([(0,v.MZ)({readOnly:!0})],yo.prototype,"widget",void 0),yo=(0,t._)([(0,b.$)("esri.views.ui.Component")],yo);const mo=yo;var go=n(56931),vo=n(33510);const _o={left:0,top:0,bottom:0,right:0},bo={bottom:30,top:15,right:15,left:15},wo="esri-ui",Mo={ui:wo,corner:`${wo}-corner`,innerContainer:`${wo}-inner-container`,manualContainer:`${wo}-manual-container`,cornerContainer:`${wo}-corner-container`,topLeft:`${wo}-top-left`,topRight:`${wo}-top-right`,bottomLeft:`${wo}-bottom-left`,bottomRight:`${wo}-bottom-right`};function To(e){return 0===e?"0":`${e}px`}function So(e){const t="object"==typeof e&&null!==e&&Object.getPrototypeOf(e);return null!==t&&t!==Object.prototype||!("component"in e||"index"in e||"position"in e)?null:e}function Ao(e,{top:t,bottom:i,left:r,right:n}){e.style.top=t,e.style.bottom=i,e.style.left=r,e.style.right=n}let Eo=class extends L.A.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._locale=(0,bi.JK)(),this.view=null,this._applyViewPadding=()=>{const e=this.container;e&&Ao(e,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const e=this._innerContainer;e&&Ao(e,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([(0,q.wB)((()=>[this.view?.padding,this.container]),this._applyViewPadding,q.Vh),(0,q.wB)((()=>this.padding),this._applyUIPadding,q.Vh),(0,q.wB)((()=>[this.container,this._locale]),(([e,t])=>{e&&e.setAttribute("lang",t)}),q.Vh),(0,bi.oQ)((e=>{this._locale=e}))])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(Mo.ui),(0,go.hY)(e),this._attachContainers(e)),t&&(t.classList.remove(Mo.ui),Ao(t,{top:"",bottom:"",left:"",right:""}),(0,di.Ie)(t)),this._set("container",e))}get height(){const e=this.view?.height??0;if(0===e)return e;const t=this._getViewPadding(),{top:i,bottom:r}=t;return Math.max(e-i-r,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return"number"==typeof e?{bottom:e,top:e,right:e,left:e}:{...bo,...e}}get width(){const e=this.view?.width??0;if(0===e)return e;const t=this._getViewPadding(),{left:i,right:r}=t;return Math.max(e-i-r,0)}add(e,t){let i,r,n;if(Array.isArray(e))return void e.forEach((e=>this.add(e,t)));const s=So(e);s&&({index:i,position:t,component:e,key:r}=s),t&&"object"==typeof t&&({index:i,key:r,position:t,internal:n}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,i,r,n)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map((e=>this.remove(e,t)));const i=this._find(e);if(i){if(this._componentMap.has(i)&&this._componentMap.get(i)?.key!==t)return;const e=this._components.indexOf(i),r=i.node.parentNode;return r?.removeChild(i.node),this._componentMap.delete(i),this._components.splice(e,1)[0]}}empty(e,t={removeInternal:!1}){if(Array.isArray(e)){for(const i of e)this.empty(i,t);return}const i=this._positionNameToContainerLookup[e??"manual"],r=Array.prototype.slice.call(i.children).map((e=>this._findByNode(e))).filter((e=>null!=e&&(!this._componentMap.get(e)?.internal||t.removeInternal)));for(const e of r)this.remove(e)}move(e,t){if(Array.isArray(e)&&e.forEach((e=>this.move(e,t))),!e)return;let i;const r=So(e)||So(t);if(r&&(i=r.index,t=r.position,e=r.component||e),t&&!this._isValidPosition(t))return;const n=this.remove(e);n&&this.add(n,{position:t,index:i})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getComponents(e,t={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap((e=>this._getComponentsAtPosition(e,t))):this._getComponentsAtPosition(e,t):this._components.filter((e=>t.includeInternal||!this._componentMap.get(e)?.internal)).map((({widget:e,node:t})=>e??t))}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,i,r,n){e instanceof mo||(e=new mo({node:e})),this._place({component:e,position:t,index:i}),this._components.push(e),this._componentMap.set(e,{key:r,internal:n})}_find(e){return e?e instanceof mo?this._findByComponent(e):"string"==typeof e?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.view?.padding??_o}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Mo.innerContainer,Mo.cornerContainer);const t=document.createElement("div");t.classList.add(Mo.innerContainer,Mo.manualContainer);const i=document.createElement("div");i.classList.add(Mo.topLeft,Mo.corner),e.appendChild(i);const r=document.createElement("div");r.classList.add(Mo.topRight,Mo.corner),e.appendChild(r);const n=document.createElement("div");n.classList.add(Mo.bottomLeft,Mo.corner),e.appendChild(n);const s=document.createElement("div");s.classList.add(Mo.bottomRight,Mo.corner),e.appendChild(s),this._innerContainer=e,this._manualContainer=t;const o=(0,vo.V8)();this._cornerNameToContainerLookup={"top-left":i,"top-right":r,"bottom-left":n,"bottom-right":s,"top-leading":o?r:i,"top-trailing":o?i:r,"bottom-leading":o?s:n,"bottom-trailing":o?n:s},this._positionNameToContainerLookup={manual:t,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.position??"manual",{component:i,index:r}=e,n=this._positionNameToContainerLookup[t],s=null!=r&&r>-1;if(function(e){return e&&!e._started&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}(i.widget)&&i.widget.startup(),!s)return void n.appendChild(i.node);const o=Array.from(n.children);0!==r?r>=o.length?n.appendChild(i.node):(0,di.nc)(i.node,o[r]):n.firstChild?(0,di.nc)(i.node,n.firstChild):n.appendChild(i.node)}_toPixelPosition(e){return{top:To(e.top),left:To(e.left),right:To(e.right),bottom:To(e.bottom)}}_findByComponent(e){return this._components.find((t=>t===e))??null}_findById(e){return this._components.find((({id:t})=>t===e))??null}_findByNode(e){return this._components.find((({node:t})=>t===e))??null}_getComponentsAtPosition(e,t){const i=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(i.children).map((e=>this._findByNode(e))).filter(B.Ru).filter((e=>t.includeInternal||!this._componentMap.get(e)?.internal)).map((({widget:e,node:t})=>e??t))}};(0,t._)([(0,v.MZ)()],Eo.prototype,"_locale",void 0),(0,t._)([(0,v.MZ)()],Eo.prototype,"container",null),(0,t._)([(0,v.MZ)()],Eo.prototype,"height",null),(0,t._)([(0,v.MZ)({value:bo})],Eo.prototype,"padding",null),(0,t._)([(0,O.w)("padding")],Eo.prototype,"castPadding",null),(0,t._)([(0,v.MZ)()],Eo.prototype,"view",void 0),(0,t._)([(0,v.MZ)()],Eo.prototype,"width",null),Eo=(0,t._)([(0,b.$)("esri.views.ui.UI")],Eo);const xo=Eo;var Io=n(52239);const Co=new Map;function ko(e,t){return e&&"copyright"in e&&(!t||"function"==typeof e.originOf&&"user"===e.originOf("copyright"))}function No(e,t,i){i&&t&&(e.find((e=>e.layerView===t&&e.text===i))||e.push({text:i,layerView:t}))}const Lo=[];let Oo=class extends k.A{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new a.A,this.view=null,this._allLayerViewsChange=e=>{this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const t=this.view?.allLayerViews;t&&(this.addHandles(t.map((e=>(0,q.wB)((()=>[e.suspended,e.layer?.attributionVisible]),(()=>this._updateAttributionItems())))).toArray(),"suspension"),t.forEach((e=>{"esri.views.3d.layers.Tiles3DLayerView3D"===e.declaredClass&&this.addHandles(e.on("visible-geometry-changed",(()=>this._updateAttributionItems())),"visible-geometry-changed")}))),e?.removed&&e.removed.forEach((e=>{this._pendingAttributions.delete(e),this._fetchedAttributionData.delete(e)})),this._updateAttributionItems()},this.addHandles([(0,q.on)((()=>this.view?.allLayerViews),"change",(e=>this._allLayerViewsChange(e)),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),(0,q.z7)((()=>!0===this.view?.stationary),(()=>this._updateAttributionItems()))])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.view?.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,t=e?.allLayerViews;if(Lo.length=0,!e||!t)return void this._clear();t.forEach((t=>{if(t.suspended||!t.layer?.attributionVisible)return;const i=t.layer;if(ko(i,"user"))return void No(Lo,t,i.copyright);if(i.hasAttributionData){if(this._fetchedAttributionData.has(t)){const r=this._fetchedAttributionData.get(t);return void(r?No(Lo,t,this._getDynamicAttribution(r,e,i)):ko(i)&&No(Lo,t,i.copyright))}return void this._fetchAttributionData(t)}const r="portalItem"in i?i.portalItem?.accessInformation:void 0;No(Lo,t,r||i.copyright)}));const i=t.find((e=>"integrated-mesh-3dtiles"===e.layer?.type));if(this.view&&i){const e=function(e){return Co.get(e)}(this.view);if(e){const t=e.getAttributionText();for(let e=0;e<t.length;++e)No(Lo,i,t[e])}}(function(e,t){return e.length!==t.length||e.some(((e,i)=>e.text!==t[i].text))})(this.items,Lo)&&(this.items.removeAll(),this.items.addMany(Lo)),Lo.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await(0,Ei.Ke)(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const i=t.ok?this._createContributionIndex(t.value,function(e){return"bing-maps"===e.type}(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,i)}this._updateAttributionItems()}_createContributionIndex(e,t){const i=e.contributors,r={};if(!i)return r;for(let e=0;e<i.length;e++){const n=i[e],s=n.coverageAreas;if(!s)return;for(const i of s){const s=i.bbox,o=i.zoomMin-(t&&i.zoomMin?1:0),a=i.zoomMax-(t&&i.zoomMax?1:0),l=new Fi.A({xmin:s[1],ymin:s[0],xmax:s[3],ymax:s[2],spatialReference:J.A.WGS84}),c={extent:(0,rt.Gh)(l),attribution:n.attribution||"",score:null!=i.score?i.score:100,id:e};for(let e=o;e<=a;e++)r[e]??=[],r[e].push(c)}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(e,t,i){const{extent:r,scale:n}=t;let s=i.tileInfo?.scaleToZoom(n)??0;if(s=Math.min(e.maxKey??0,Math.round(s)),!r||null==s||s<=-1)return"";const o=e[s],a=(0,rt.Cv)(r.center.clone().normalize(),t.spatialReference),l=new Set;return o?o.filter((e=>{const t=e.id,i=!l.has(t)&&a&&e.extent&&(0,fn.qz)(e.extent,a);return i&&l.add(t),i})).sort(((e,t)=>t.score-e.score||e.objectId-t.objectId)).map((e=>e.attribution)).join(", "):""}};(0,t._)([(0,v.MZ)({readOnly:!0,type:a.A})],Oo.prototype,"items",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Oo.prototype,"state",null),(0,t._)([(0,v.MZ)()],Oo.prototype,"view",void 0),Oo=(0,t._)([(0,b.$)("esri.widgets.Attribution.AttributionViewModel")],Oo);const Ro=Oo;var Po=n(533),Do=n(42929),Fo=n(97944),jo=n(2153),Zo=n(2110);const zo="esri-attribution",Uo={base:zo,poweredBy:`${zo}__powered-by`,sources:`${zo}__sources`,open:`${zo}--open`,sourcesOpen:`${zo}__sources--open`,link:`${zo}__link`,widgetIcon:Do.T.description};let Vo=class extends Io.A{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver((e=>e.forEach((({target:e})=>this._checkSourceTextOverflow(e))))),this.iconClass=Uo.widgetIcon,this.icon=null,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new Ro}initialize(){this.addHandles((0,q.on)((()=>this.viewModel?.items),"change",(()=>this.scheduleRender())))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce(((e,t)=>(e.includes(t.text)||e.push(t.text),e)),[]).join(this.itemDelimiter)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[Uo.open]:this._isOpen};return(0,Zo.K)("div",{bind:this,class:this.classes(Uo.base,Po.D.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return(0,Zo.K)("div",{class:Uo.poweredBy},"Powered by"," ",(0,Zo.K)("a",{class:Uo.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,i=t?0:void 0,{attributionText:r}=this,n={[Uo.sourcesOpen]:e,[Po.D.interactive]:t};return(0,Zo.K)("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Uo.sources,n),innerHTML:r,tabIndex:i})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let t=!1;const{clientHeight:i,clientWidth:r,scrollWidth:n}=e,s=n>r,o=this._attributionTextOverflowed!==s;if(this._attributionTextOverflowed=s,o&&(t=!0),this._isOpen){const e=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,e&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};(0,t._)([(0,v.MZ)()],Vo.prototype,"_isOpen",void 0),(0,t._)([(0,v.MZ)()],Vo.prototype,"_isInteractive",null),(0,t._)([(0,v.MZ)()],Vo.prototype,"_attributionTextOverflowed",void 0),(0,t._)([(0,v.MZ)()],Vo.prototype,"_prevSourceNodeHeight",void 0),(0,t._)([(0,v.MZ)({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Vo.prototype,"attributionText",null),(0,t._)([(0,v.MZ)()],Vo.prototype,"iconClass",void 0),(0,t._)([(0,v.MZ)()],Vo.prototype,"icon",void 0),(0,t._)([(0,v.MZ)()],Vo.prototype,"itemDelimiter",void 0),(0,t._)([(0,v.MZ)()],Vo.prototype,"label",null),(0,t._)([(0,v.MZ)(),(0,jo.G)("esri/widgets/Attribution/t9n/Attribution")],Vo.prototype,"messages",void 0),(0,t._)([(0,v.MZ)()],Vo.prototype,"view",null),(0,t._)([(0,v.MZ)({type:Ro})],Vo.prototype,"viewModel",void 0),(0,t._)([(0,Fo.$)()],Vo.prototype,"_toggleState",null),Vo=(0,t._)([(0,b.$)("esri.widgets.Attribution")],Vo);const Go=Vo;var Bo=n(75e3);let $o=class extends((0,Bo.R)(k.A)){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles((0,q.wB)((()=>this.view),this._updateRotationWatcher,q.Vh))}destroy(){this.view=null}get canShowNorth(){return e=this.view,e?.spatialReference?.isWebMercator||e?.spatialReference?.isGeographic||!1;var e}get state(){return!this.view?.ready||"2d"===this.view.type&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){if(!this.view?.ready)return;const e={};"2d"===this.view?.type?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){null!=e&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const t=-e.heading;this.orientation={x:0,y:0,z:t}}_updateRotationWatcher(e){this.removeAllHandles(),e&&this.addHandles("2d"===e.type?(0,q.wB)((()=>e?.rotation),this._updateForRotation,q.Vh):(0,q.wB)((()=>e?.camera),this._updateForCamera,q.Vh))}};(0,t._)([(0,v.MZ)({readOnly:!0})],$o.prototype,"canShowNorth",null),(0,t._)([(0,v.MZ)()],$o.prototype,"orientation",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],$o.prototype,"state",null),(0,t._)([(0,v.MZ)()],$o.prototype,"view",void 0),$o=(0,t._)([(0,b.$)("esri.widgets.CompassViewModel")],$o);const Ho=$o,qo="esri-compass",Wo={base:qo,widgetIcon:Do.T.locateCircled,iconContainer:`${qo}__icon-container`};var Ko=n(9737);let Yo=class extends Io.A{constructor(e,t){super(e,t),this.iconClass=Wo.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new Ho,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=e=>({transform:`rotateZ(${e.z}deg)`})}loadDependencies(){return(0,Ko.W)({button:()=>Promise.all([n.e(2006),n.e(7053),n.e(9091),n.e(5399)]).then(n.bind(n,45399)),icon:()=>Promise.all([n.e(2006),n.e(855)]).then(n.bind(n,50855))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:t}=this.viewModel,i="rotation"===t?"arrow-up":"compass-needle",r=this.icon??i,{messages:n}=this;return(0,Zo.K)("div",{class:this.classes(Wo.base,Po.D.widget)},(0,Zo.K)("calcite-button",{class:Po.D.widgetButton,disabled:"disabled"===t,kind:"neutral",label:n.reset,onclick:this._reset,round:!0,scale:"s",title:n.reset},(0,Zo.K)("div",{"aria-hidden":"true",class:Wo.iconContainer,title:n.reset},(0,Zo.K)("calcite-icon",{icon:r,scale:"m",styles:this._toRotationTransform(e)}))))}};(0,t._)([(0,v.MZ)()],Yo.prototype,"goToOverride",null),(0,t._)([(0,v.MZ)()],Yo.prototype,"iconClass",void 0),(0,t._)([(0,v.MZ)()],Yo.prototype,"icon",void 0),(0,t._)([(0,v.MZ)()],Yo.prototype,"label",null),(0,t._)([(0,v.MZ)(),(0,jo.G)("esri/widgets/Compass/t9n/Compass")],Yo.prototype,"messages",void 0),(0,t._)([(0,v.MZ)()],Yo.prototype,"view",null),(0,t._)([(0,v.MZ)({type:Ho})],Yo.prototype,"viewModel",void 0),Yo=(0,t._)([(0,b.$)("esri.widgets.Compass")],Yo);const Jo=Yo,Xo="esri-navigation-toggle",Qo={base:Xo,widgetIcon:Do.T.pan2,isLayoutHorizontal:`${Xo}--horizontal`};let ea=class extends k.A{constructor(e){super(e),this.navigationMode="pan",this.view=null}initialize(){this.addHandles((0,q.z7)((()=>this.view?.inputManager),(()=>this._setNavigationMode())))}destroy(){this.view=null}get state(){return this.view?.ready&&"3d"===this.view?.type?"ready":"disabled"}toggle(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){const e=this.view?.inputManager;e&&(e.primaryDragAction="pan"===this.navigationMode?"pan":"rotate")}};(0,t._)([(0,v.MZ)({readOnly:!0})],ea.prototype,"state",null),(0,t._)([(0,v.MZ)()],ea.prototype,"navigationMode",void 0),(0,t._)([(0,v.MZ)()],ea.prototype,"view",void 0),ea=(0,t._)([(0,b.$)("esri.widgets.NavigationToggleViewModel")],ea);const ta=ea;let ia=class extends Io.A{constructor(e,t){super(e,t),this.iconClass=Qo.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new ta,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{const e="pan"===this.viewModel?.navigationMode?this._rotateButton:this._panButton;e?.setFocus(),this.toggle()}}loadDependencies(){return(0,Ko.W)({button:()=>Promise.all([n.e(2006),n.e(7053),n.e(9091),n.e(5399)]).then(n.bind(n,45399))})}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){"horizontal"!==e&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e="disabled"===this.viewModel?.state,t="pan"===this.viewModel?.navigationMode,i=this.messages.toggle;return(0,Zo.K)("div",{class:this.classes(Qo.base,Po.D.widget,{[Qo.isLayoutHorizontal]:"horizontal"===this.layout})},(0,Zo.K)("calcite-button",{afterCreate:e=>{this._panButton=e},appearance:t?"outline-fill":"solid",class:Po.D.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:i,onclick:this._toggle,tabIndex:t?void 0:-1,title:i}),(0,Zo.K)("calcite-button",{afterCreate:e=>{this._rotateButton=e},appearance:t?"solid":"outline-fill",class:Po.D.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:i,onclick:this._toggle,tabIndex:t?-1:void 0,title:i}))}};(0,t._)([(0,v.MZ)()],ia.prototype,"iconClass",void 0),(0,t._)([(0,v.MZ)()],ia.prototype,"icon",void 0),(0,t._)([(0,v.MZ)()],ia.prototype,"label",null),(0,t._)([(0,v.MZ)({value:"vertical"})],ia.prototype,"layout",null),(0,t._)([(0,v.MZ)(),(0,jo.G)("esri/widgets/NavigationToggle/t9n/NavigationToggle")],ia.prototype,"messages",void 0),(0,t._)([(0,v.MZ)()],ia.prototype,"view",null),(0,t._)([(0,v.MZ)({type:ta})],ia.prototype,"viewModel",void 0),ia=(0,t._)([(0,b.$)("esri.widgets.NavigationToggle")],ia);const ra=ia;let na=class extends k.A{get canZoomIn(){const e=this.view?.ready;if(!e)return!1;const t=this.view?.constraints?.effectiveMaxScale;return 0===t||this._scale>t}get canZoomOut(){const{view:e}=this,t=e?.ready;if(!t)return!1;const i=e.constraints?.effectiveMinScale;return 0===i||this._scale<i}get _scale(){const e=this.view?.animation?.target;return(e&&"then"in e?void 0:e?.scale)??this.view?.scale??0}};(0,t._)([(0,v.MZ)({readOnly:!0})],na.prototype,"canZoomIn",null),(0,t._)([(0,v.MZ)({readOnly:!0})],na.prototype,"canZoomOut",null),(0,t._)([(0,v.MZ)()],na.prototype,"view",void 0),(0,t._)([(0,v.MZ)()],na.prototype,"_scale",null),na=(0,t._)([(0,b.$)("esri.widgets.Zoom.ZoomConditions2D")],na);const sa=na;let oa=class extends k.A{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};(0,t._)([(0,v.MZ)({readOnly:!0})],oa.prototype,"canZoomIn",null),(0,t._)([(0,v.MZ)({readOnly:!0})],oa.prototype,"canZoomOut",null),(0,t._)([(0,v.MZ)()],oa.prototype,"view",void 0),oa=(0,t._)([(0,b.$)("esri.widgets.Zoom.ZoomConditions3D")],oa);const aa=oa;let la=class extends k.A{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return null!=this._zoomConditions&&this._zoomConditions.canZoomIn}get canZoomOut(){return null!=this._zoomConditions&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(e){e?"2d"===e.type?this._zoomConditions=new sa({view:e}):"3d"===e.type&&(this._zoomConditions=new aa({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;"2d"===e.type?e.mapViewNavigation.zoomIn():(0,g.QZ)(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;"2d"===e.type?e.mapViewNavigation.zoomOut():(0,g.QZ)(e.goTo({zoomFactor:.5}))}};(0,t._)([(0,v.MZ)()],la.prototype,"_zoomConditions",void 0),(0,t._)([(0,v.MZ)()],la.prototype,"canZoomIn",null),(0,t._)([(0,v.MZ)()],la.prototype,"canZoomOut",null),(0,t._)([(0,v.MZ)({readOnly:!0})],la.prototype,"state",null),(0,t._)([(0,v.MZ)()],la.prototype,"view",null),la=(0,t._)([(0,b.$)("esri.widgets.Zoom.ZoomViewModel")],la);const ca=la,ha={base:"esri-zoom",widgetIcon:Do.T.zoomInMagnifyingGlass,horizontalLayout:"esri-zoom--horizontal"};let ua=class extends Io.A{constructor(e,t){super(e,t),this.iconClass=ha.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new ca,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return(0,Ko.W)({button:()=>Promise.all([n.e(2006),n.e(7053),n.e(9091),n.e(5399)]).then(n.bind(n,45399))})}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){"horizontal"!==e&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e={[ha.horizontalLayout]:"horizontal"===this.layout},{canZoomIn:t,canZoomOut:i}=this.viewModel,{zoomIn:r,zoomOut:n}=this.messages;return(0,Zo.K)("div",{class:this.classes(ha.base,Po.D.widget,e)},(0,Zo.K)("calcite-button",{class:Po.D.widgetButton,disabled:!t,iconStart:"plus",kind:"neutral",label:r,onclick:this.zoomIn,title:r}),(0,Zo.K)("calcite-button",{class:Po.D.widgetButton,disabled:!i,iconStart:"minus",kind:"neutral",label:n,onclick:this.zoomOut,title:n}))}};(0,t._)([(0,v.MZ)()],ua.prototype,"iconClass",void 0),(0,t._)([(0,v.MZ)()],ua.prototype,"icon",void 0),(0,t._)([(0,v.MZ)()],ua.prototype,"label",null),(0,t._)([(0,v.MZ)({value:"vertical"})],ua.prototype,"layout",null),(0,t._)([(0,v.MZ)(),(0,jo.G)("esri/widgets/Zoom/t9n/Zoom")],ua.prototype,"messages",void 0),(0,t._)([(0,v.MZ)()],ua.prototype,"view",null),(0,t._)([(0,v.MZ)({type:ca})],ua.prototype,"viewModel",void 0),ua=(0,t._)([(0,b.$)("esri.widgets.Zoom")],ua);const pa=ua;let da=class extends xo{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=e=>{this.components.forEach((t=>{const i=this._find(t),r=i?.widget;(function(e){return void 0!==e?.view})(r)&&(r.view=e)}))},this._componentsWatcher=(e,t)=>{this._removeComponents(t),this._addComponents(e),this._adjustPadding(e)}}initialize(){this.addHandles([(0,q.wB)((()=>this.components),this._componentsWatcher,q.Vh),(0,q.wB)((()=>this.view),this._updateViewAwareWidgets,q.Vh)])}_add(e,t,i,r,n){let s=e;if("string"==typeof e&&this._defaultPositionLookup[e]){if(this._find(e))return;s=this._createComponent(e)}super._add(s,t,i,r,n)}_removeComponents(e){e.forEach((e=>{const t=this._find(e);t&&(this.remove(t),t.destroy())}))}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:e}=this.padding;this.padding=e}}_addComponents(e){this.constructed&&e.forEach((e=>this.add(this._createComponent(e),this._defaultPositionLookup[e])))}_createComponent(e){const t=this._createWidget(e);return new mo({id:e,node:t})}_createWidget(e){const{view:t}=this;switch(e){case"attribution":return new Go({view:t});case"compass":return new Jo({view:t});case"navigation-toggle":return new ra({view:t});case"zoom":return new pa({view:t})}}};(0,t._)([(0,v.MZ)()],da.prototype,"components",void 0),da=(0,t._)([(0,b.$)("esri.views.ui.DefaultUI")],da);const fa=da;let ya=class extends fa{constructor(e){super(e),this.components=["attribution","zoom"]}};(0,t._)([(0,v.MZ)()],ya.prototype,"components",void 0),ya=(0,t._)([(0,b.$)("esri.views.ui.2d.DefaultUI2D")],ya);const ma=ya;var ga=n(50831);let va,_a,ba,wa,Ma,Ta,Sa=class extends(pi(Ni(Ai(Kr)))){constructor(e){super(e),this._magnifierView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new N.A({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.goToManager=new an({view:this}),this.graphicsView=null,this.stateManager=new Jn({constraints:new xn({view:this})}),this.stationaryManager=new ho,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.frameTask=new on(this),this.floors=new a.A,this.highlightOptions=new to.A,this.inputManager=new Hs({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new uo.K,this.type="2d",this.ui=new ma,this.test={takeScreenshot:async e=>async function(e,t){const i=await co(e,t);return(0,ao.Rt)(i,lo)}(this._getScreenshotView(e),e)},this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([(0,q.wB)((()=>this.viewpoint),(()=>this.stationaryManager.flip()),q.OH),this.on("resize",(e=>this.stateManager.resize(e.width,e.height)))]),(0,si.n_)()}destroy(){this._set("preconditionsReady",!1),this.frameTask=(0,m.pR)(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new eo(this.featuresTilingScheme)}get constraintsInfo(){const e=this.defaultsFromMap?.tileInfo,t=this.spatialReference;return{lods:e?.spatialReference?.equals(t)?e.lods:null,spatialReference:t}}get state(){return this.stateManager.state}get initialExtentRequired(){if(!this.stateManager)return!1;const{scale:e,constraints:t,center:i,viewpoint:r,extent:n}=this;let s=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint||n||(t?.effectiveLODs||(s=-1),i&&(0!==e||-1!==s)||null!=r?.targetGeometry&&("extent"===r.targetGeometry.type||r.scale)))}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=e.targetGeometry,i=this.spatialReference;return(0,oi.isLoadedOrLoadFor)(t.spatialReference,i)}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),e!==this.animationManager.animation&&this.animationManager.stop(),!e||e.isFulfilled())return this._set("animation",null),void(this.frameTask.animationInProgress=!1);this._set("animation",e),this.frameTask.animationInProgress=!0;const i=()=>{this.destroyed||(e===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame()),this.frameTask.animationInProgress=!1)};e.when(i,i)}get background(){return(0,ga.r)(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){return this.stateManager?.center??null}set center(e){this.stateManager.center=e}get constraints(){return this.stateManager?.constraints}set constraints(e){e.view=this;const t=this.stateManager.constraints;this.stateManager.constraints=e,t?.destroy()}get extent(){return this.stateManager?.extent??null}set extent(e){this.stateManager.extent=e}get padding(){return this.stateManager?.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){return this.stage?.renderRequested??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(e){this.stateManager.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(e){const{rotationEnabled:t}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=e,this.constraints.rotationEnabled=t}get scale(){return this.stateManager?.scale??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get updating(){const e=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||!0===this.layerViewManager.updating||!0===this.labelManager.updating||!0===this.graphicsView.updating||this.allLayerViews.some((e=>!e.destroyed&&!("layerViews"in e)&&!0===e.updating)));if((0,M.A)("esri-2d-log-updating")){const t=this.allLayerViews.reduce(((e,t)=>({...e,[`${t.layer.id}(${t.layer.type})`]:!t.destroyed&&!("layerViews"in t)&&t.updating})),{});console.log(`Updating MapView: ${e}\n-> Null LayerViewManager: ${!this.layerViewManager}\n-> Null LabelManager: ${!this.labelManager}\n-> Null GraphicsView: ${!this.graphicsView}\n-> layerViewManager.updating: ${this.layerViewManager?.updating}\n-> labelManager.updating: ${this.labelManager?.updating}\n-> graphicsView.updating: ${this.graphicsView?.updating}\n-> allLayerViews: ${JSON.stringify(t)}\n`)}return e}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(e){this.stateManager.viewpoint=e,this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return this.mapViewNavigation?.interacting??!1}goTo(e,t){return this.goToManager.goTo(e,t)}async hitTest(e,t){return async function(e,t,i){const r=(0,_r.FV)(t)?(0,_r.xB)(e,t):t;if(!e.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let n=new Set;const s=new Set;let o=!1,a=null,l=null;i?.include?no(i.include,ro(e,(e=>{n.add(e),oo(e,(e=>s.add(e)))}),((e,t)=>{s.add(e),n.add(t)}),(e=>{a||(a=new Set),a.add(e)}),(e=>n.add(e)),(()=>o=!0))):(o=!0,n=new Set(e.allLayerViews),n.forEach((e=>{oo(e,(e=>s.add(e)))}))),i?.exclude&&no(i.exclude,ro(e,(e=>{n.delete(e),oo(e,(e=>s.delete(e)))}),(e=>s.delete(e)),(e=>{l||(l=new Set),l.add(e)})));const c=e.allLayerViews.filter((e=>!e.suspended&&n.has(e))).reverse(),h=e.toMap(r);let u=[...o?e.graphicsView.hitTest(h).map((e=>({type:"graphic",graphic:e,layer:null,mapPoint:h}))):[],...await Promise.all(c.map((e=>e.hitTest(h,r))).toArray())].filter(B.Ru).flat().filter(B.Ru);return u=u.filter((e=>"graphic"!==e.type||"subtype-group"!==e.layer?.type||s.has(e.graphic.layer))),a&&(u=u.filter((e=>!("graphic"in e)||!e.graphic||a?.has(so(e.graphic))))),l&&(u=u.filter((e=>!("graphic"in e)||!e.graphic||!l?.has(so(e.graphic))))),{screenPoint:r,results:u}}(this,e,t)}async takeScreenshot(e){return async function(e,t){const i=await co(e,t),{format:r,quality:n}=(0,ao.Is)(t?.format,t?.quality);return(0,ao.lF)(i,{format:r,quality:n,rotation:0,disableDecorations:!1},lo)}(this._getScreenshotView(e),e)}toMap(e){if(!this.ready)return null;const t=(0,_r.FV)(e)?(0,_r.xB)(this,e):e;return this.stateManager.toMap(t)}toScreen(e,t){return this.stateManager.toScreen(e,t)}on(e,t,i,r){return this.inputManager&&this.viewEvents.on(e,t,i,r)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise((e=>{this.ready?e(this):this._resolveWhenReady.push(e)}))}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map?.initialViewProperties?.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return(0,ga.r)(this.map)?this.map.initialViewProperties.timeZone:null}hasLayerViewModule(e){return(e=>null!=un[e.type])(e)}importLayerView(e){return(e=>{const t=un[e.type];if(null==t)throw function(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new h.A(`${i}:view-not-supported`,`${t} is not supported in 2D`)}(e);return t(e)})(e)}pixelSizeAt(){return this.ready?this.resolution:(y.A.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){const t=this.toMap(e),i=await this.hitTest(e),r=this.allLayerViews.toArray().reverse(),n=new globalThis.Map(r.map((e=>[e.layer.uid,e]))),s=[];let o=0,a=0;for(;o<i.results.length||a<r.length;){const e=i.results.at(o);if(e&&"graphic"!==e.type){++o;continue}const l=n.get((e?.layer??e?.graphic.layer)?.uid);if((!e||l)&&a<r.length&&r.at(a)!==l){const e=r.at(a);"fetchPopupFeaturesAtLocation"in e&&s.push({mapPoint:t,layerView:e}),++a}else e&&(s.push({graphic:e.graphic,layerView:l}),++o)}return{hits:s,location:t}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=function(e){const t=(0,po.C)();return t.available?"3d"===e&&t.majorPerformanceCaveat?new h.A("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new h.A("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new h.A("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new h.A("webgl:required","WebGL2 is required but not supported.",(new Error).stack)}(this.type);if((0,M.A)("safari")&&(0,M.A)("safari")<9&&(e=new h.A("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:(0,M.A)("safari")})),null!=e)throw y.A.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return async function(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:r,MagnifierView2D:s,Stage:o}]=await Promise.all([Promise.all([n.e(9958),n.e(3849),n.e(9224)]).then(n.bind(n,69224)),Promise.all([n.e(9958),n.e(2921),n.e(3849),n.e(8764),n.e(7764),n.e(9018),n.e(2644),n.e(1924),n.e(5506),n.e(1839),n.e(1385),n.e(7692),n.e(1244),n.e(4555),n.e(3509)]).then(n.bind(n,3509))]);_a=e,ba=t,wa=i,Ma=r,Ta=s,va=o}()}_getDefaultViewpoint(){const{constraints:e,initialExtent:t,map:i,padding:r,size:n}=this;if(!e)return null;const s=i&&"initialViewProperties"in i?i.initialViewProperties:void 0,o=this.stateManager.getUserStartupOptions(this.size),a=s?.viewpoint,l=a?.targetGeometry?.extent??t,c=l?.center,h=a?.rotation??0,u=a?.scale||l&&(0,en.AU)(l,[n[0]-r.left-r.right,n[1]-r.top-r.bottom]),p=o.center??c,d=o.rotation??h,f=o.scale??u;return p&&f?new G.A({targetGeometry:p,scale:f,rotation:d}):null}_startup(){this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;const t=new va(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=t,this._magnifierView=new Ta,this._magnifierView.magnifier=this.magnifier;const i=new wa({view:this});this._set("labelManager",i);const r=new sn({view:this});this._set("animationManager",r);const n=new Ma({view:this,animationManager:r});this._set("mapViewNavigation",n),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",(()=>this._updateStageChildren())),t.on("webgl-error",(e=>this.fatalError=e.error)),(0,q.wB)((()=>this.stationary),(e=>t.stationary=e),q.pc),(0,q.wB)((()=>this.background),(e=>{t.backgroundColor=e?.color,this._magnifierView.backgroundColor=e?.color}),q.pc),(0,q.wB)((()=>this.magnifier),(e=>this._magnifierView.magnifier=e),q.pc),(0,q.wB)((()=>this.renderingOptions),(e=>t.renderingOptions=e),q.pc),(0,q.wB)((()=>this.highlightOptions),(e=>t.highlightOptions=e),q.pc),(0,q.wB)((()=>this.state.id),(()=>t.state=this.state),q.pc)],"map-view"),this._updateStageChildren();const s=this._resolveWhenReady;this._resolveWhenReady=[],s.forEach((e=>e(this))),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach((e=>{this.stage.addChild(e.container)}));const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new In.A(ai.A.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new _a({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new ba(e)});this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){const{allLayerViews:t,padding:i,size:r,stage:n}=this;return{allLayerViews:t,backgroundColor:e?.ignoreBackground?null:this.background?.color,padding:i,size:r,stage:n}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const e of this.allLayerViews)e.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const e of this.allLayerViews)e.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};Sa.type="2d",(0,t._)([(0,v.MZ)({readOnly:!0})],Sa.prototype,"animationManager",void 0),(0,t._)([(0,v.MZ)({constructOnly:!0})],Sa.prototype,"deactivatedWebGLExtensions",void 0),(0,t._)([(0,v.MZ)({constructOnly:!0})],Sa.prototype,"debugWebGLExtensions",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Sa.prototype,"featuresTilingScheme",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Sa.prototype,"fullOpacity",void 0),(0,t._)([(0,v.MZ)()],Sa.prototype,"goToManager",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Sa.prototype,"graphicsTileStore",null),(0,t._)([(0,v.MZ)()],Sa.prototype,"graphicsView",void 0),(0,t._)([(0,v.MZ)()],Sa.prototype,"stateManager",void 0),(0,t._)([(0,v.MZ)()],Sa.prototype,"constraintsInfo",null),(0,t._)([(0,v.MZ)({readOnly:!0})],Sa.prototype,"state",null),(0,t._)([(0,v.MZ)()],Sa.prototype,"initialExtentRequired",null),(0,t._)([(0,v.MZ)()],Sa.prototype,"labelManager",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Sa.prototype,"mapViewNavigation",void 0),(0,t._)([(0,v.MZ)({constructOnly:!0})],Sa.prototype,"renderCanvas",void 0),(0,t._)([(0,v.MZ)()],Sa.prototype,"renderingOptions",void 0),(0,t._)([(0,v.MZ)({constructOnly:!0})],Sa.prototype,"supersampleScreenshotsEnabled",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Sa.prototype,"supportsGround",void 0),(0,t._)([(0,v.MZ)()],Sa.prototype,"_defaultsFromMapSettings",null),(0,t._)([(0,v.MZ)({readOnly:!0})],Sa.prototype,"typeSpecificPreconditionsReady",null),(0,t._)([(0,v.MZ)()],Sa.prototype,"animation",null),(0,t._)([(0,v.MZ)({type:Bt})],Sa.prototype,"background",null),(0,t._)([(0,v.MZ)()],Sa.prototype,"center",null),(0,t._)([(0,v.MZ)({type:xn})],Sa.prototype,"constraints",null),(0,t._)([(0,v.MZ)()],Sa.prototype,"extent",null),(0,t._)([(0,v.MZ)()],Sa.prototype,"floors",void 0),(0,t._)([(0,v.MZ)({type:to.A})],Sa.prototype,"highlightOptions",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Sa.prototype,"inputManager",void 0),(0,t._)([(0,v.MZ)()],Sa.prototype,"map",void 0),(0,t._)([(0,v.MZ)()],Sa.prototype,"padding",null),(0,t._)([(0,v.MZ)({readOnly:!0})],Sa.prototype,"rendering",null),(0,t._)([(0,v.MZ)()],Sa.prototype,"resizeAlign",null),(0,t._)([(0,v.MZ)({readOnly:!0})],Sa.prototype,"resolution",null),(0,t._)([(0,v.MZ)()],Sa.prototype,"rotation",null),(0,t._)([(0,v.MZ)()],Sa.prototype,"scale",null),(0,t._)([(0,v.MZ)({constructOnly:!0})],Sa.prototype,"spatialReferenceLocked",void 0),(0,t._)([(0,v.MZ)()],Sa.prototype,"stationary",null),(0,t._)([(0,v.MZ)({type:uo.K,readOnly:!0})],Sa.prototype,"timeline",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Sa.prototype,"type",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Sa.prototype,"updating",null),(0,t._)([(0,v.MZ)()],Sa.prototype,"viewpoint",null),(0,t._)([(0,v.MZ)()],Sa.prototype,"zoom",null),(0,t._)([(0,v.MZ)({readOnly:!0})],Sa.prototype,"navigating",null),(0,t._)([(0,v.MZ)(),(0,O.w)((e=>e instanceof fa?e:(0,_.PZ)(ma,e)))],Sa.prototype,"ui",void 0),Sa=(0,t._)([(0,b.$)("esri.views.MapView")],Sa);const Aa=Sa;var Ea=n(83510),xa=n(96295),Ia=n(44764),Ca=n(38116),ka=n(26421);class Na{constructor(e){this.client=e,this._cancelled=!1,this.size=0,this.duration=0}}class La{constructor(e){this.typeWorkerQuota=e,this.tasks=new Array,this.numWorkers=0,this.statistics=new Oa}}class Oa{constructor(){this.requests=0,this.size=0,this.duration=0,this.speed=0}}class Ra{constructor(e,t,i,r){this._workerFunc=e,this._callbackFunc=t,this._maxTotalNumWorkers=i,this._totalNumWorkers=0,this._clients=r.map((e=>new La(e)))}destroy(){this._clients.length=0}hasQuota(e){const t=this._clients[e];return!!t&&(this._totalNumWorkers<this._maxTotalNumWorkers||t.numWorkers+t.tasks.length<t.typeWorkerQuota)}push(e){const t=this._clients[e.client];t&&(this._totalNumWorkers<this._maxTotalNumWorkers?(t.numWorkers++,this._totalNumWorkers++,this._workerFunc(e,((e,t)=>this._taskCallback(e,t)))):t.tasks.push(e))}cancel(e){this._taskFinished(e),e._cancelled=!0}_taskFinished(e){const t=this._clients[e.client];this._totalNumWorkers--,t&&(t.numWorkers--,t.statistics.requests++,t.statistics.size+=e.size||0,t.statistics.duration+=e.duration||0,t.statistics.speed=t.statistics.duration>0?t.statistics.size/t.statistics.duration:0,(0,ka.vA)(t.numWorkers>=0)),this._next()}_next(){for(const e of this._clients)if(e&&e.numWorkers<e.typeWorkerQuota&&this._processQueue(e))return;for(const e of this._clients)if(e&&this._processQueue(e))return}_processQueue(e){for(;e.tasks.length>0;)if(this._workerFunc(e.tasks.shift(),((e,t)=>this._taskCallback(e,t))))return e.numWorkers++,this._totalNumWorkers++,!0;return!1}_taskCallback(e,t){e._cancelled||(this._callbackFunc(e,t),this._taskFinished(e))}getStatsForType(e){const t=this._clients[e];return t?{quota:t.typeWorkerQuota,workers:t.numWorkers,queueSize:t.tasks.length,requestStats:t.statistics}:null}get test(){const e=this;return{set workerFunc(t){e._workerFunc=t}}}}var Pa=n(49437);let Da=class extends k.A{constructor(){super(...arguments),this._tasks=new Map,this._onLoadQueue=new Array,this._doneQueue=new Array,this.updating=!1}setup(e,t,i){this._loadQueue=new Ra(((e,t)=>this._startLoading(e,t)),((e,t)=>this._doneLoadingCB(e,t)),e,t),i&&(this._frameTask=i.registerTask(Pa.W6.STREAM_DATA_LOADER,this))}destroy(){this._frameTask=(0,m.xt)(this._frameTask),this._tasks.forEach((e=>(0,m.DC)(e.abortController))),this._loadQueue=(0,m.pR)(this._loadQueue),this._onLoadQueue=null,this._doneQueue=null,this._tasks=null}hasDownloadSlots(e){return this._loadQueue.hasQuota(e)}request(e,t,i,r={}){const n=(0,g.Tw)();n.__signal=null!=r?r.signal:null;const s=this._createOrUpdateTask(e,t,i,r,n);return(0,g.u7)(r,(()=>this._cancelRequest(s,n))),n.promise}_createTask(e,t,i,r,n,s){const o=new ja(e,t,i,r,n);return this._updateTask(o,s),this._tasks.set(n,o),1===this._tasks.size&&this._set("updating",!0),this._loadQueue.push(o),o}_cancelRequest(e,t){(0,B.Xy)(e.resolvers,t),t.reject((0,g.NK)()),0===e.resolvers.length&&(e.status===Za.DOWNLOADING&&(e.status=Za.CANCELLED,this._loadQueue.cancel(e),e.abortController?.abort(),e.request=null,e.abortController=null),e.status=Za.CANCELLED,this._tasks.delete(e.key),0===this._tasks.size&&this._set("updating",!1))}_updateTask(e,t){e.resolvers.push(t)}_createOrUpdateTask(e,t,i,r,n){const s=function(e,t,i){return`${e}:${t}:${i}`}(r?.uid||e,t,i),o=this._tasks.get(s);return o?(this._updateTask(o,n),o):this._createTask(e,r,t,i,s,n)}_doneLoadingCB(e,t){this._loadQueue&&((0,ka.vA)(e.status===Za.DOWNLOADING),e.status=Za.DOWNLOADED,this._frameTask?this._doneQueue.push({task:e,err:t}):this._doneLoading(e,t))}get running(){return this._doneQueue.length>0||this._onLoadQueue.length>0}runTask(e){for(;!e.done&&this._onLoadQueue.length>0;){const t=this._onLoadQueue.shift();(0,g.Te)(t.task.abortController),t.task.abortController=null,t.callback(t.task),e.madeProgress()}for(;!e.done&&this._doneQueue.length>0;){const t=this._doneQueue.shift();t.task.status!==Za.DOWNLOADED&&(t.err=t.err||(0,g.NK)()),this._doneLoading(t.task,t.err),e.madeProgress()}}_doneLoading(e,t){if(t&&!(0,g.zf)(t)&&e.numRetries>0)return--e.numRetries,void this._loadQueue.push(e);let i=e.result instanceof HTMLImageElement?0:e.resolvers.length;for(const r of e.resolvers)if(t)(0,g.zf)(t)?r.reject(t):r.reject(new h.A("stream-data-loader:request-error",`Failed to request resource at '${e.url}'. ${t}`,{url:e.url,error:t}));else{--i;const t=i>0?(0,p.o8)(e.result):e.result;r.resolve(t)}this._tasks.delete(e.key),0===this._tasks.size&&this._set("updating",!1)}_startLoading(e,t){if(e.status===Za.CANCELLED)return!1;let i,r;switch(e.startTime=performance.now(),e.status=Za.DOWNLOADING,e.docType){case"binary":r="array-buffer",i=0;break;case"image":r="image";break;case"image+type":r="array-buffer";break;default:r="json"}e.abortController=new AbortController;const n=e.abortController.signal;e.request=(0,Ca.A)(e.url,{...e.options,responseType:r,timeout:i,signal:n});let s=()=>{};const o=i=>{e.duration=performance.now()-e.startTime,e.size=i instanceof ArrayBuffer?i.byteLength:e.size||0,e.result=i,this._frameTask?this._onLoadQueue.push({callback:t,task:e}):(e.abortController=null,t(e))},a=i=>{e.status===Za.DOWNLOADING&&t(e,i),s()};return"image+type"!==e.docType?(e.request.then((e=>o(e.data)),a),!0):(e.request.then((t=>{const l=t.data,c=function(e){if(e.byteLength<2)return"unknown";const t=new Uint8Array(e,0,e.byteLength);return 137===t[0]&&80===t[1]?"image/png":71===t[0]&&73===t[1]?"image/gif":66===t[0]&&77===t[1]?"image/bmp":255===t[0]&&216===t[1]?"image/jpeg":"unknown"}(l);if(r="image",e.size=l.byteLength,"unknown"===c)return e.request=(0,Ca.A)(e.url,{responseType:r,timeout:i,signal:n}),void e.request.then((e=>o(e.data)),a);const h=new Blob([l],{type:c}),u=window.URL.createObjectURL(h);s=()=>window.URL.revokeObjectURL(u),e.request=(0,Ca.A)(u,{responseType:r,timeout:i,signal:n}),e.request.then((e=>o(new Fa(e.data,c,s))),a)}),a),!0)}get test(){return{loadQueue:this._loadQueue}}};(0,t._)([(0,v.MZ)({readOnly:!0})],Da.prototype,"updating",void 0),Da=(0,t._)([(0,b.$)("esri.views.3d.support.StreamDataLoader")],Da);class Fa{constructor(e,t,i){this.image=e,this.type=t,this.release=i}get isOpaque(){return"image/jpeg"===this.type}}class ja extends Na{constructor(e,t,i,r,n){super(r),this.url=e,this.options=t,this.docType=i,this.key=n,this.result=null,this.status=Za.QUEUED,this.request=null,this.abortController=null,this.resolvers=new Array,this.startTime=0,this.numRetries=0}}var Za,za,Ua,Va,Ga;(Ga=Za||(Za={}))[Ga.QUEUED=1]="QUEUED",Ga[Ga.DOWNLOADING=2]="DOWNLOADING",Ga[Ga.DOWNLOADED=3]="DOWNLOADED",Ga[Ga.CANCELLED=4]="CANCELLED",(Va=za||(za={}))[Va.INSIDE=0]="INSIDE",Va[Va.INTERSECTS=1]="INTERSECTS",Va[Va.OUTSIDE=2]="OUTSIDE",function(e){e[e.NORTH=0]="NORTH",e[e.NORTH_EAST=1]="NORTH_EAST",e[e.EAST=2]="EAST",e[e.SOUTH_EAST=3]="SOUTH_EAST",e[e.SOUTH=4]="SOUTH",e[e.SOUTH_WEST=5]="SOUTH_WEST",e[e.WEST=6]="WEST",e[e.NORTH_WEST=7]="NORTH_WEST"}(Ua||(Ua={}));var Ba=n(19913),$a=n(5262);class Ha{constructor(e){const t=Ha.checkUnsupported(e);if(null!=t)throw t;const i=e;this.spatialReference=i.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=(0,oi.canProjectToWGS84ComparableLonLat)(this.spatialReference)||(0,Zi.q8)(this.spatialReference)||(0,Zi.KQ)(this.spatialReference),this.origin=[i.origin.x,i.origin.y],this.pixelSize=i.size[0],this.dpi=i.dpi;const r=i.lods.reduce(((e,t,i)=>(t.level<e.min&&(e.min=t.level,e.minIndex=i),e.max=Math.max(e.max,t.level),e)),{min:1/0,minIndex:0,max:-1/0}),n=i.lods[r.minIndex],s=2**n.level;let o=n.resolution*s,a=n.scale*s;this.levels=new Array(r.max+1);for(let e=0;e<this.levels.length;e++)this.levels[e]={resolution:o,scale:a,tileSize:[o*i.size[0],o*i.size[1]]},o/=2,a/=2}clone(){return new Ha(this.toTileInfo())}toTileInfo(){return new ai.A({dpi:this.dpi,origin:new tn.A({x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference}),size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map(((e,t)=>new dn.A({level:t,scale:e.scale,resolution:e.resolution})))})}getExtent(e,t,i,r){const n=this.levels[e],s=n.tileSize[0],o=n.tileSize[1];r[0]=this.origin[0]+i*s,r[2]=this.origin[0]+(i+1)*s,r[3]=this.origin[1]-t*o,r[1]=this.origin[1]-(t+1)*o}convertExtentToRadians(e,t){this._isWebMercator?(t[0]=(0,rt.yw)(e[0]),t[1]=(0,rt.jg)(e[1]),t[2]=(0,rt.yw)(e[2]),t[3]=(0,rt.jg)(e[3])):this._isGCS&&(t[0]=(0,cr.kU)(e[0]),t[1]=(0,cr.kU)(e[1]),t[2]=(0,cr.kU)(e[2]),t[3]=(0,cr.kU)(e[3]))}getExtentGeometry(e,t,i,r=new Fi.A){return this.getExtent(e,t,i,Wa),r.spatialReference=this.spatialReference,r.xmin=Wa[0],r.ymin=Wa[1],r.xmax=Wa[2],r.ymax=Wa[3],r.zmin=void 0,r.zmax=void 0,r}ensureMaxLod(e){if(null==e)return!1;let t=!1;for(;this.levels.length<=e;){const e=this.levels[this.levels.length-1],i=e.resolution/2;this.levels.push({resolution:i,scale:e.scale/2,tileSize:[i*this.pixelSize,i*this.pixelSize]}),t=!0}return t}capMaxLod(e){this.levels.length>e+1&&(this.levels.length=e+1)}getMaxLod(){return this.levels.length-1}scaleAtLevel(e){return this.levels[0].scale/2**e}levelAtScale(e){const t=this.levels[0].scale;return e>=t?0:Math.log(t/e)*Math.LOG2E}resolutionAtLevel(e){return this.levels[0].resolution/2**e}compatibleWith(e){if(!(e instanceof Ha)){if(Ha.checkUnsupported(e))return!1;e=new Ha(e)}if(!e.spatialReference.equals(this.spatialReference))return!1;if(e.pixelSize!==this.pixelSize)return!1;const t=Math.min(this.levels.length,e.levels.length)-1,i=this.levels[t].resolution;let r=.5*i;return!(!(0,cr.Sp)(e.origin[0],this.origin[0],r)||!(0,cr.Sp)(e.origin[1],this.origin[1],r))&&(r=.5*i/2**t/this.pixelSize*12,(0,cr.Sp)(i,e.levels[t].resolution,r))}rootTilesInExtent(e,t=null,i=1/0){const r=new Array,n=this.levels[0].tileSize;if(null==e||0===n[0]||0===n[1])return r;Ha.computeRowColExtent(e,n,this.origin,Wa);let s=Wa[1],o=Wa[3],a=Wa[0],l=Wa[2];const c=l-a,h=o-s;if(c*h>i){const e=Math.floor(Math.sqrt(i));h>e&&(s=s+Math.floor(.5*h)-Math.floor(.5*e),o=s+e),c>e&&(a=a+Math.floor(.5*c)-Math.floor(.5*e),l=a+e)}for(let e=s;e<o;e++)for(let t=a;t<l;t++)r.push([0,e,t]);return null!=t&&(t[0]=this.origin[0]+a*n[0],t[1]=this.origin[1]-o*n[1],t[2]=this.origin[0]+l*n[0],t[3]=this.origin[1]-s*n[1]),r}static computeRowColExtent(e,t,i,r){const n=.001*(e[2]-e[0]+(e[3]-e[1]));r[0]=Math.max(0,Math.floor((e[0]+n-i[0])/t[0])),r[2]=Math.max(0,Math.ceil((e[2]-n-i[0])/t[0])),r[1]=Math.max(0,Math.floor((i[1]-e[3]+n)/t[1])),r[3]=Math.max(0,Math.ceil((i[1]-e[1]-n)/t[1]))}static isPowerOfTwo(e){const t=e.lods,i=t[0].resolution*2**t[0].level;return!t.some((e=>!(0,cr.b6)(e.resolution,i/2**e.level)))}static hasGapInLevels(e){const t=e.lods.map((e=>e.level));t.sort(((e,t)=>e-t));for(let e=1;e<t.length;e++)if(t[e]!==t[0]+e)return!0;return!1}static tileSizeSupported(e){const t=e.size[1];return t===e.size[0]&&!(t&t-1)&&t>=128&&t<=512}static hasOriginPerLODs(e){const t=e.origin;return e.lods.some((e=>null!=e.origin&&(e.origin[0]!==t.x||e.origin[1]!==t.y)))}static getMissingTileInfoError(){return new h.A("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}static checkUnsupported(e){return null==e?qa():e.lods.length<1?new h.A("tilingscheme:generic","Tiling scheme must have at least one level"):Ha.isPowerOfTwo(e)?Ha.hasGapInLevels(e)?new h.A("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):Ha.tileSizeSupported(e)?Ha.hasOriginPerLODs(e)?new h.A("tilingscheme:multiple-origin","Tiling scheme levels must not have their own origin"):null:new h.A("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new h.A("tilingscheme:power-of-two","Tiling scheme must be power of two")}static fromExtent(e,t){const i=e[2]-e[0],r=e[3]-e[1],n=(0,$a.GA)(t),s=1.2*Math.max(i,r),o=256,a=new Ha(new ai.A({size:[o,o],origin:new tn.A({x:e[0]-.5*(s-i),y:e[3]+.5*(s-r)}),lods:[new dn.A({level:0,resolution:s/o,scale:1/(o/96*.0254/(s*n))})],spatialReference:t}));return a.ensureMaxLod(20),a}static makeWebMercatorAuxiliarySphere(e){const t=new Ha(Ha.WebMercatorAuxiliarySphereTileInfo);return t.ensureMaxLod(e),t}static makeGCSWithTileSize(e,t=256,i=16){const r=256/t,n=new Ha(new ai.A({size:[t,t],origin:new tn.A({x:-180,y:90,spatialReference:e}),spatialReference:e,lods:[new dn.A({level:0,resolution:.703125*r,scale:295497598.570834*r})]}));return n.ensureMaxLod(i),n}get test(){return{isWebMercator:this._isWebMercator,isGCS:this._isGCS}}}function qa(){return new h.A("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}Ha.WebMercatorAuxiliarySphereTileInfo=new ai.A({size:[256,256],origin:new tn.A({x:-20037508.342787,y:20037508.342787,spatialReference:J.A.WebMercator}),spatialReference:J.A.WebMercator,lods:[new dn.A({level:0,resolution:156543.03392800014,scale:591657527.591555})]}),Ha.WebMercatorAuxiliarySphere=Ha.makeWebMercatorAuxiliarySphere(19);const Wa=(0,Ws.vt)(),Ka=((0,cr.$8)(cr.pq/10),(0,Ws.vt)());Ha.WebMercatorAuxiliarySphere.getExtent(0,0,0,Ka),(0,Ws.vt)([-180,-90,180,90]);const Ya=(0,Ba.vt)(),Ja=(0,Ba.vt)(),Xa=(0,Ba.vt)(),Qa=(0,Ba.vt)();function el(e,t,i,r){(0,ns.c)(Ya,i),Ya[r]=t[r];const n=(0,ns.f)(Ya,Ya,t),s=(0,ns.f)(Ja,e,t),o=(0,ns.k)(s,n),a=(0,ns.k)(n,n);let l;l=o<=0?t:a<=o?i:(0,ns.g)(Ya,t,(0,ns.h)(n,n,o/a));const c=(0,ns.f)(Ya,e,l);return Math.PI/2-Math.atan(c[2]/Math.sqrt(c[0]*c[0]+c[1]*c[1]))}const tl=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:function(e,t,i){if(null==e)return qa();if(e.spatialReference.isGeographic&&!(0,oi.canProjectToWGS84ComparableLonLat)(e.spatialReference))return new h.A("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");const r=Ha.checkUnsupported(e);if(null!=r)return r;if(null==i)return new h.A("tilingscheme:extent-not-exist","The layer does not provide a layer extent.");const n=function(e,t){const i=e.lods,r=i[0].resolution*2**i[0].level,n=[r*e.size[0],r*e.size[1]],s=[e.origin.x,e.origin.y],o=(0,Ws.VY)(t),a=(0,Ws.vt)();Ha.computeRowColExtent(o,n,s,a);const l=(a[2]-a[0])*(a[3]-a[1]);if(l>64){const t=i[0].scale*2**i[0].level;let n=Math.max((o[3]-o[1])/e.size[1],(o[2]-o[0])/e.size[0])*t/r;const s=Math.floor(Math.log(n)/Math.log(10));return n=Math.ceil(n/10**s)*10**s,new h.A("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(t).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+n.toLocaleString()+".",{level0Scale:t,suggestedLevel0Scale:n,requiredNumRootTiles:l,allowedNumRootTiles:64})}return null}(e,i);if(n)return n;const s=e.spatialReference;return null==t||s.equals(t)||t.isWGS84&&s.isWebMercator?null:new h.A("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene")},isInsideExtent:function(e,t,i=0){const r=e.extent;if(null==r)return!1;if(0===i)return(0,Ws.Uc)(r,t);const n=Math.min(r[2]-r[0],r[3]-r[1]);return(0,Ws.k$)(r,t,i*n)},tiltToExtentEdge:function(e,t,i){const r=e.extent;if(null==r)return 0;Xa[0]=r[0],Xa[1]=r[1],Xa[2]=i,Qa[0]=r[2],Qa[1]=r[3],Qa[2]=i;let n=1/0,s=1/0;return t[0]<Xa[0]?n=el(t,Xa,Qa,0):t[0]>Qa[0]&&(n=el(t,Qa,Xa,0)),t[1]<Xa[1]?s=el(t,Xa,Qa,1):t[1]>Qa[1]&&(s=el(t,Qa,Xa,1)),Math.min(n,s)}},Symbol.toStringTag,{value:"Module"})),il=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:function(e,t){if(null==e)return qa();const i=e.lods.length-1,r=e.spatialReference,n=(0,oi.canProjectToWGS84ComparableLonLat)(r)||(0,Zi.q8)(r)||(0,Zi.KQ)(r);if(r.isWebMercator){if(!Ha.makeWebMercatorAuxiliarySphere(i).compatibleWith(e))return new h.A("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!n)return new h.A("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!Ha.makeGCSWithTileSize(e.spatialReference,e.size[0],i).compatibleWith(e))return e.spatialReference.isWGS84?new h.A("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new h.A("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}return null==t||e.spatialReference.equals(t)?void 0:new h.A("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene")},isInsideExtent:function(){return!0},tiltToExtentEdge:function(){return 0}},Symbol.toStringTag,{value:"Module"})),rl={[zr.RT.Global]:il,[zr.RT.Local]:tl};function nl(e,t,i,r){return rl[r].checkIfTileInfoSupportedForViewSR(e,i,t)}Ua.NORTH,Ua.EAST,Ua.SOUTH,Ua.WEST,Ua.NORTH_EAST,Ua.SOUTH_EAST,Ua.SOUTH_WEST,Ua.NORTH_WEST;var sl=n(79509);async function ol(e,t={}){const{basemap:i,view:r}=e;await i.load(t),function(e){if(0===e.baseLayers.length&&0===e.referenceLayers.length)return;const t=e.baseLayers.concat(e.referenceLayers).toArray().filter((e=>!(0,R.ce)(e))).map((e=>function(e){return new h.A("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:e,operationalLayerType:e.operationalLayerType||"unknown"})}(e)));if(t.length)throw t[0]}(i),await async function(e,t,i){if(0===e.baseLayers.length)return;const r=e.baseLayers.at(0);if((0,R.r$)(r)){try{await r.load(i)}catch(e){const t="basemap-compatibility:unknown-error",i="Unknown basemap compatibility error",{name:r=t,message:n=i,details:s}=e;throw new h.A(r,n,s)}!function(e,t){const i=t.state.viewingMode;if(!i)return;let r,n;if("wmts"===e?.type){const s=function(e,t,i){const r=(0,R.r0)(e);if(null!=r){if(!a.A.isCollection(r))return{tileInfo:r.tileInfo,fullExtent:r.fullExtent};{const e=r.find((e=>null==nl(e.tileInfo,e.fullExtent,t,i)));if(e)return{tileInfo:e.tileInfo,fullExtent:e.fullExtent}}}return{tileInfo:null,fullExtent:null}}(e,t.spatialReference,i);if(null==s.tileInfo)throw new h.A("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view");r=s.tileInfo,n=s.fullExtent}else r=e.tileInfo,n=e.fullExtent;if(null==r)return;if(!function(e,t){return null!=e&&(null==t||(t===zr.RT.Local?!e.isGeographic||e.isWGS84||e.wkid===sl.Y.CGCS2000:e.isWebMercator||e.isWGS84||e.wkid===sl.Y.CGCS2000||e.wkid===sl.Y.GCSMARS2000||e.wkid===sl.Y.GCSMARS2000_SPHERE||e.wkid===sl.Y.GCSMOON2000))}(r.spatialReference,i))throw new h.A(`basemapgalleryitem:spatial-reference-unsupported-${(0,zr._s)(i)}`,`Basemap spatial reference is unsupported in ${(0,zr._s)(i)} mode`);const s=r.spatialReference.isGeographic,o="vector-tile"===e?.type?r.getOrCreateCompatible(256,s?1:2):null;if(i===zr.RT.Global){let t=nl(r,n,null,i);if(t&&"vector-tile"===e?.type&&null!=n&&o&&!nl(o,n,null,i)&&(t=null),t){const e=r.spatialReference.isWebMercator?"web-mercator":"wgs84";throw new h.A(`basemapgalleryitem:tiling-scheme-unsupported-${e}-global`,"Basemap tiling scheme is unsupported in global mode",{error:t})}}else if(Ha.checkUnsupported(r))throw new h.A("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");const l=t.basemapTerrain?.tilingScheme;if(l&&!l.compatibleWith(r)&&("vector-tile"!==e?.type||!o||!l.compatibleWith(o)))throw new h.A("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}(r,t)}}(i,r,t),(0,g.Te)(t)}async function al(e,t={}){const{basemap:i,view:r}=e;(0,g.Te)(t);const n=i.baseLayers.find((e=>"unknown"===e.type))?.loadError;if(null!=n)throw n;if(!r||"spatialReferenceLocked"in r&&!r.spatialReferenceLocked)return;if(await i.load(t),(0,g.Te)(t),0===i.baseLayers.length)return;const s=i.baseLayers.at(0);if(!(0,R.qK)(s))return;if(i.spatialReference){if(r.spatialReference.equals(i.spatialReference))return;ll()}await s.load(t),(0,g.Te)(t);const o=(("supportedSpatialReferences"in s?s.supportedSpatialReferences:null)||["tileInfo"in s?s.tileInfo?.spatialReference:null]).filter(B.Ru);0!==o.length&&o.every((e=>!r.spatialReference.equals(e)))&&ll()}function ll(){throw new h.A("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}let cl=class extends((0,Dt.sA)(k.A)){constructor(e){super(e),this.compatibilityFunction=null,this.error=null,this.state="loading",this.view=null}initialize(){const e=()=>this.refresh();this.addHandles([(0,q.wB)((()=>this.basemap?.loadStatus),e),(0,q.wB)((()=>this.compatibilityFunction),e),(0,q.wB)((()=>this.view&&"basemapTerrain"in this.view&&this.view.basemapTerrain?.tilingScheme),e),(0,q.wB)((()=>this.view?.ready),e),(0,q.wB)((()=>this.view?.spatialReference),e)]),this.refresh()}destroy(){this._cancelRefresh(),this.basemap=null,this.compatibilityFunction=null,this.view=null}get _spatialReferenceTask(){return(0,D.n8)(this.view,this.basemap)}set basemap(e){e&&e.load().catch((()=>{})),this._set("basemap",e)}get spatialReference(){return this._spatialReferenceTask.spatialReference}refresh(){this._cancelRefresh(),this._set("state","loading");const e=this.basemap?.loadStatus;if("loaded"!==e&&"failed"!==e)return;if(!this.compatibilityFunction)return void("loaded"===e?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError)));const t=new AbortController,{signal:i}=t;this.compatibilityFunction(this,{signal:i}).then((()=>(0,q.C_)((()=>!this._spatialReferenceTask.updating),i))).then((()=>{this._set("state","ready"),this._set("error",null)})).catch((e=>{(0,g.zf)(e)||(this._set("state","error"),this._set("error",e))})),this._refreshController=t}_cancelRefresh(){this._refreshController&&(this._refreshController.abort(),this._refreshController=null)}};(0,t._)([(0,v.MZ)({readOnly:!0})],cl.prototype,"_spatialReferenceTask",null),(0,t._)([(0,v.MZ)()],cl.prototype,"basemap",null),(0,t._)([(0,v.MZ)()],cl.prototype,"compatibilityFunction",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],cl.prototype,"error",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],cl.prototype,"spatialReference",null),(0,t._)([(0,v.MZ)({readOnly:!0})],cl.prototype,"state",void 0),(0,t._)([(0,v.MZ)()],cl.prototype,"view",void 0),cl=(0,t._)([(0,b.$)("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],cl);const hl=cl,ul=a.A.ofType(r.default);let pl=class extends k.A{constructor(e){super(e),this.basemaps=new ul}destroy(){this.basemaps.forEach((e=>e.destroy()))}get state(){return"ready"}refresh(){}};(0,t._)([(0,v.MZ)({type:ul})],pl.prototype,"basemaps",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],pl.prototype,"state",null),pl=(0,t._)([(0,b.$)("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],pl);const dl=pl,fl=a.A.ofType(r.default);let yl=class extends(d.A.LoadableMixin((0,H.g)(dl))){constructor(e){super(e),this._lastPortalBasemapFetchController=null,this.basemaps=new fl,this.filterFunction=null,this.portal=nt.A.getDefault(),this.query=null,this.updateBasemapsCallback=null,this.viewType=null}initialize(){this.addHandles((0,q.wB)((()=>[this.filterFunction,this.loadStatus,this.portal?.basemapGalleryGroupQuery,this.portal?.basemapGalleryGroupQuery3D,this.portal?.user,this.query,this.updateBasemapsCallback]),(()=>this.refresh()),q.Vh))}destroy(){this.filterFunction=null,this.portal=null,this.basemaps.forEach((e=>e.destroy()))}get state(){return"not-loaded"===this.loadStatus?"not-loaded":"loading"===this.loadStatus||this._lastPortalBasemapFetchController?"loading":"ready"}load(e){return this.addResolvingPromise(this.portal.load(e)),Promise.resolve(this)}async refresh(){if("loaded"!==this.loadStatus)return;this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null);const e=this.portal,t=new AbortController;this._lastPortalBasemapFetchController=t,this.notifyChange("state");try{const i=await e.fetchBasemaps(this._toQueryString(this.query),{signal:t.signal,include3d:"3d"===this.viewType||void 0});await this._updateBasemaps(i)}catch(e){if((0,g.zf)(e))throw e;y.A.getLogger(this).warn(new h.A("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:e})),await this._updateBasemaps()}this._lastPortalBasemapFetchController=null,this.notifyChange("state")}_toQueryString(e){return e&&"string"!=typeof e?Object.keys(e).map((t=>`${t}:${e[t]}`)).join(" AND "):e}async _updateBasemaps(e=[]){let t=await this._filterBasemaps(e);t=this.updateBasemapsCallback?await this.updateBasemapsCallback(t):t,this.basemaps.removeAll(),this.basemaps.addMany(t)}async _filterBasemaps(e){if(!this.filterFunction)return e;const t=e.map(this.filterFunction),i=await Promise.all(t);return e.filter(((e,t)=>i[t]))}};(0,t._)([(0,v.MZ)({readOnly:!0,type:fl})],yl.prototype,"basemaps",void 0),(0,t._)([(0,v.MZ)()],yl.prototype,"filterFunction",void 0),(0,t._)([(0,v.MZ)({type:nt.A})],yl.prototype,"portal",void 0),(0,t._)([(0,v.MZ)()],yl.prototype,"query",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],yl.prototype,"state",null),(0,t._)([(0,v.MZ)()],yl.prototype,"updateBasemapsCallback",void 0),(0,t._)([(0,v.MZ)()],yl.prototype,"viewType",void 0),yl=(0,t._)([(0,b.$)("esri.widgets.BasemapGallery.support.PortalBasemapsSource")],yl);const ml=yl,gl=a.A.ofType(hl);let vl=class extends d.A{constructor(e){super(e),this._loadingProjectionEngine=!1,this.items=new gl,this.source=new ml,this.view=null}initialize(){const e=()=>this._recreateItems();this.addHandles([(0,q.wB)((()=>"ready"===this.state?this.compatibilityFunction:null),(()=>this._updateItems())),(0,q.on)((()=>this.source?.basemaps),"change",e,{onListenerAdd:e}),(0,q.z7)((()=>this.view),(()=>{this.source instanceof ml&&(this.source.viewType=this.view?.type)}),{once:!0})])}destroy(){const e=this.source.basemaps.find((e=>e===this.activeBasemap));e&&this.source.basemaps.remove(e),this.source?.destroy()}get activeBasemap(){return this.view?.map?.basemap??null}set activeBasemap(e){const t=this.view;if(!t?.map)return;const i="string"==typeof e?r.default.fromId(e):e;if(!i||!t.ready)return t.map.basemap=i,void this._clearOverride("activeBasemap");const n=i.spatialReference||this.items?.find((e=>this.basemapEquals(i,e.basemap)))?.spatialReference;if(n&&"spatialReferenceLocked"in t&&!t.spatialReferenceLocked){const r=t.spatialReference;if(null!=n&&!(0,Zi.aI)(r,n)&&!(0,oi.canProjectWithoutEngine)(t.spatialReference,n)&&!(0,oi.isLoaded)())return this._override("activeBasemap",i),this._loadingProjectionEngine=!0,void(0,oi.load)().then((()=>{this._get("activeBasemap")===e&&(t.map.basemap=e,t.spatialReference=n,this._clearOverride("activeBasemap"))}),(()=>{})).then((()=>{this._loadingProjectionEngine=!1}));t.map.basemap=i,this._clearOverride("activeBasemap"),null==n||(0,Zi.aI)(t.spatialReference,n)||(t.spatialReference=n)}else t.map.basemap=i,this._clearOverride("activeBasemap")}get activeBasemapIndex(){const{state:e,activeBasemap:t}=this;return"ready"!==e?-1:this._findBasemapIndex(t)}get compatibilityFunction(){return"3d"===this.view?.type?ol:al}set compatibilityFunction(e){this._overrideIfSome("compatibilityFunction",e)}castSource(e){return Array.isArray(e)||a.A.isCollection(e)?new dl({basemaps:e}):function(e){return e&&"esri.portal.Portal"===e.declaredClass}(e)?new ml({portal:e}):function(e){return e&&!(e instanceof ml)&&(!!e.portal||!!e.query)}(e)?new ml(e):function(e){return e&&"basemaps"in e&&"state"in e&&"refresh"in e}(e)?e:null}get state(){return this.view?.ready&&this.source?this._loadingProjectionEngine?"loading":"ready":"disabled"}basemapEquals(e,t){return(0,D.jU)(e,t)}refresh(){this._recreateItems()}load(){return this.loadSource()}loadSource(e){return this.addResolvingPromise(d.A.isLoadable(this.source)?this.source.load(e):null),Promise.resolve(this)}_findBasemapIndex(e){const{items:t}=this,i=t.findIndex((t=>t.basemap===e));return-1===i?t.findIndex((t=>this.basemapEquals(t.basemap,e))):i}_recreateItems(){const e=this.source?.basemaps??[],{view:t,compatibilityFunction:i}=this,r=new Map(this.items.map((e=>[e.basemap,e]))),n=e.map((e=>{const n=r.get(e);return n?(r.delete(e),n):new hl({basemap:e,compatibilityFunction:i,view:t})}));this.items.removeAll(),this.items.addMany(n),r.forEach((e=>e.destroy()))}_updateItems(){for(const e of this.items)e.compatibilityFunction=this.compatibilityFunction,e.view=this.view}};(0,t._)([(0,v.MZ)()],vl.prototype,"_loadingProjectionEngine",void 0),(0,t._)([(0,v.MZ)()],vl.prototype,"activeBasemap",null),(0,t._)([(0,v.MZ)({readOnly:!0})],vl.prototype,"activeBasemapIndex",null),(0,t._)([(0,v.MZ)()],vl.prototype,"compatibilityFunction",null),(0,t._)([(0,v.MZ)({readOnly:!0,type:gl})],vl.prototype,"items",void 0),(0,t._)([(0,v.MZ)()],vl.prototype,"source",void 0),(0,t._)([(0,O.w)("source")],vl.prototype,"castSource",null),(0,t._)([(0,v.MZ)({readOnly:!0})],vl.prototype,"state",null),(0,t._)([(0,v.MZ)()],vl.prototype,"view",void 0),vl=(0,t._)([(0,b.$)("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],vl);const _l=vl,bl="esri-basemap-gallery",wl={base:bl,widgetIcon:Do.T.basemap,sourceLoading:`${bl}--source-loading`,layoutGrid:`${bl}--grid`,narrowItems:`${bl}--narrow-items`,loader:`${bl}__loader`,item:`${bl}__item`,itemContainer:`${bl}__item-container`,itemContent:`${bl}__item-content`,itemTitle:`${bl}__item-title`,itemTagsContainer:`${bl}__item-tags-container`,itemThumbnail:`${bl}__item-thumbnail`,selectedItem:`${bl}__item--selected`,itemError:`${bl}__item--error`};var Ml=n(34017);let Tl=class extends Io.A{constructor(e,t){super(e,t),this.disabled=!1,this.headingLevel=2,this.iconClass=wl.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new _l,this._focusBasemapItemEnabled=!1,this._container=null,this._width=0,this._onContainerCreated=e=>{this._container=e}}initialize(){this.addHandles([(0,vo.EV)((()=>this._container),(({contentRect:e})=>{this._width=e.width})),(0,q.z7)((()=>this.source),(()=>this.viewModel.loadSource()),{sync:!0,initial:!0})])}loadDependencies(){return(0,Ko.W)({scrim:()=>Promise.all([n.e(2006),n.e(7053),n.e(9274)]).then(n.bind(n,9274)),chip:()=>Promise.all([n.e(2006),n.e(7053),n.e(2678)]).then(n.bind(n,22678))})}get activeBasemap(){return this.viewModel.activeBasemap}set activeBasemap(e){this.viewModel.activeBasemap=e}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get source(){return this.viewModel.source}set source(e){this.viewModel.source=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e="loading"===this.source.state,t=this.disabled||"disabled"===this.viewModel.state,i=this.viewModel.items,r={[wl.sourceLoading]:e,[Po.D.disabled]:t},n=this._width;n<=200||n>=420?r[wl.layoutGrid]=!0:n<280&&(r[wl.narrowItems]=!0);const s=e?(0,Zo.K)("div",{class:wl.loader,key:"loader"}):null,o=e?null:i.length>0?(0,Zo.K)("ul",{"aria-disabled":this.disabled,"aria-label":this.label,bind:this,class:wl.itemContainer,key:"item-container",onkeydown:this._handleKeyDown,role:"radiogroup"},i.map(((e,t)=>this._renderBasemapGalleryItem(e,t))).toArray()):(0,Zo.K)("div",{class:Po.D.empty,key:"empty-message"},(0,Zo.K)(Ml.D,{level:this.headingLevel},this.messages.noBasemaps));return(0,Zo.K)("div",{afterCreate:this._onContainerCreated,class:this.classes(wl.base,Po.D.widget,Po.D.panelHeightOnly,r),key:"container"},0===this._width?null:[s,o])}_getRoundRobinIndex(e,t){return(e+t)%t}_handleKeyDown(e){const{key:t}=e;if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t))return;e.preventDefault();const{items:i,activeBasemapIndex:r}=this.viewModel,n="ArrowUp"===t||"ArrowLeft"===t?this._getRoundRobinIndex(Math.max(r-1,-1),i.length):this._getRoundRobinIndex(r+1,i.length),s=i.at(n);"ready"===s?.state&&(this.viewModel.activeBasemap=s.basemap),this._focusBasemapItemEnabled=!0}_focusBasemapItem(e){this._focusBasemapItemEnabled&&0===e.tabIndex&&(e.focus(),this._focusBasemapItemEnabled=!1)}_handleClick(e){const t=e.currentTarget["data-item"];"ready"===t.state&&(this.viewModel.activeBasemap=t.basemap)}_renderBasemapGalleryItem(e,t){const i=(0,D.hA)(e.basemap)||(0,Ia.s)("esri/themes/base/images/basemap-toggle-64.svg"),r=e.basemap.title,n=e.basemap.portalItem?.snippet,s=e.error?.message||n||r,{viewModel:{state:o,activeBasemapIndex:a}}=this,l=this.disabled||"disabled"===o,c=a===t,h=c||-1===a&&0===t?0:-1,u="loading"===o,p={[wl.selectedItem]:c,[wl.itemError]:"error"===e.state},d=`basemapgallery-item-${e.uid}`;return(0,Zo.K)("li",{afterUpdate:this._focusBasemapItem,"aria-checked":c.toString(),"aria-disabled":l.toString(),"aria-labelledby":d,bind:this,class:this.classes(wl.item,p),"data-item":e,key:e.uid,onclick:this._handleClick,onkeydown:this._handleClick,role:"radio",tabIndex:h,title:s},(0,Zo.K)("img",{alt:"",class:wl.itemThumbnail,src:i}),(0,Zo.K)("div",{class:wl.itemContent,key:"content"},(0,Zo.K)("div",{class:wl.itemTitle,key:"title"},(0,Zo.K)("span",{id:d},r)),(0,D.$P)(e.basemap)?this._renderTags(e.basemap):null),"loading"===e.state||c&&u?(0,Zo.K)("calcite-scrim",null,(0,Zo.K)("span",{"aria-hidden":"true",class:Po.D.loaderAnimation,key:"loader",role:"presentation"})):null)}_renderTags(e){return(0,Zo.K)("div",{class:wl.itemTagsContainer,key:"tag"},this._render3DTag(),(0,D.t5)(e)?this._renderBetaTag():null)}_render3DTag(){const{messages:e}=this;return(0,Zo.K)("calcite-chip",{key:"tag-3d",scale:"s",value:e.tag3D},this.messages.tag3D)}_renderBetaTag(){const{messages:e}=this;return(0,Zo.K)("calcite-chip",{appearance:"outline-fill",key:"tag-beta",scale:"s",value:e.tagBeta},this.messages.tagBeta)}};(0,t._)([(0,v.MZ)()],Tl.prototype,"activeBasemap",null),(0,t._)([(0,v.MZ)()],Tl.prototype,"disabled",void 0),(0,t._)([(0,v.MZ)()],Tl.prototype,"headingLevel",void 0),(0,t._)([(0,v.MZ)()],Tl.prototype,"iconClass",void 0),(0,t._)([(0,v.MZ)()],Tl.prototype,"icon",void 0),(0,t._)([(0,v.MZ)()],Tl.prototype,"label",null),(0,t._)([(0,v.MZ)(),(0,jo.G)("esri/widgets/BasemapGallery/t9n/BasemapGallery")],Tl.prototype,"messages",void 0),(0,t._)([(0,v.MZ)()],Tl.prototype,"source",null),(0,t._)([(0,v.MZ)()],Tl.prototype,"view",null),(0,t._)([(0,v.MZ)()],Tl.prototype,"viewModel",void 0),(0,t._)([(0,v.MZ)()],Tl.prototype,"_focusBasemapItemEnabled",void 0),(0,t._)([(0,v.MZ)()],Tl.prototype,"_container",void 0),(0,t._)([(0,v.MZ)()],Tl.prototype,"_width",void 0),(0,t._)([(0,Fo.$)()],Tl.prototype,"_handleClick",null),Tl=(0,t._)([(0,b.$)("esri.widgets.BasemapGallery")],Tl);const Sl=Tl;let Al=class extends k.A{constructor(e){super(e),this._viewpointHandle=null,this.group=null}initialize(){this.addHandles((0,q.on)((()=>this.view?.ui),"expand",(e=>{const{target:t}=e;t&&t!==this&&t.expanded&&t.group&&t.group===this.group&&this._collapse()})))}destroy(){this._viewpointHandle=null,this.view=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){const t=!!e;this._set("expanded",t);const i=this.view?.ui;i&&i.emit("expand",{target:this}),this._viewpointHandleChange(t)}get state(){return this.view?.ready?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&(0,q.z7)((()=>e.ready),(()=>{this.view===e&&this._watchViewpoint()}),{once:!0,initial:!0}))}_viewpointHandleChange(e){this._viewpointHandle&&(e?(0,q.z7)((()=>this.view?.stationary),(()=>this._viewpointHandle?.resume()),{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){const e="viewpoint";this.removeHandles(e),this._viewpointHandle=null;const{autoCollapse:t,view:i}=this;if(!i||!t)return;const r=(0,q.C1)((()=>"3d"===i.type?i.camera:i.viewpoint),(()=>this._collapse()));this.addHandles(r,e),this._viewpointHandle=r}_collapse(){this.expanded=!1}};(0,t._)([(0,v.MZ)({value:!1})],Al.prototype,"autoCollapse",null),(0,t._)([(0,v.MZ)({value:!1})],Al.prototype,"expanded",null),(0,t._)([(0,v.MZ)()],Al.prototype,"group",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Al.prototype,"state",null),(0,t._)([(0,v.MZ)({value:null})],Al.prototype,"view",null),Al=(0,t._)([(0,b.$)("esri.widgets.Expand.ExpandViewModel")],Al);const El=Al;var xl=n(3067);const Il="esri-expand",Cl={base:Il,modeAuto:`${Il}--auto`,modeDrawer:`${Il}--drawer`,modeFloating:`${Il}--floating`,container:`${Il}__container`,containerExpanded:`${Il}__container--expanded`,panel:`${Il}__panel`,icon:"esri-collapse__icon",iconFlip:"esri-collapse__icon-flip",iconExpanded:`${Il}__icon--expanded`,iconNumber:`${Il}__icon-number`,iconNumberExpanded:`${Il}__icon-number--expanded`,content:`${Il}__content`,contentExpanded:`${Il}__content--expanded`,expandMask:`${Il}__mask`,expandMaskExpanded:`${Il}__mask--expanded`};let kl=class extends Io.A{constructor(e,t){super(e,t),this.closeOnEsc=!0,this.collapseIcon=null,this.collapseTooltip="",this.content="",this.expandTooltip="",this.iconClass=null,this.icon=null,this.iconNumber=0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.viewModel=new El,this.toggle=()=>{this.viewModel.expanded=!this.viewModel.expanded},this._handleKeyDown=e=>{const{closeOnEsc:t,_toggleButtonEl:i,expanded:r}=this;r&&t&&e.target!==i&&"Escape"===e.key&&("function"==typeof t?t(e):t)&&(this.expanded=!1,i?.focus())}}loadDependencies(){return(0,Ko.W)({button:()=>Promise.all([n.e(2006),n.e(7053),n.e(9091),n.e(5399)]).then(n.bind(n,45399)),icon:()=>Promise.all([n.e(2006),n.e(855)]).then(n.bind(n,50855))})}get contentId(){return`${this.id}_controls_content`}get expandTitle(){const{expanded:e,messagesCommon:t,collapseTooltip:i,expandTooltip:r}=this;return(e?i||t?.collapse:r||t?.expand)??""}get autoCollapse(){return this.viewModel.autoCollapse}set autoCollapse(e){this.viewModel.autoCollapse=e}get collapseIconClass(){return Do.T.collapse}set collapseIconClass(e){this._overrideIfSome("collapseIconClass",e)}get expanded(){return this.viewModel.expanded}set expanded(e){this.viewModel.expanded=e}get expandIconClass(){return(0,xl.p4)(this.content)?this.content.iconClass:Do.T.expand}set expandIconClass(e){this._overrideIfSome("expandIconClass",e)}get expandIcon(){return(0,xl.p4)(this.content)?this.content.icon:void 0}set expandIcon(e){this._overrideIfSome("expandIcon",e)}get group(){return this.viewModel.group}set group(e){this.viewModel.group=e}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}render(){const{mode:e}=this,t={[Cl.modeAuto]:"auto"===e,[Cl.modeDrawer]:"drawer"===e,[Cl.modeFloating]:"floating"===e};return(0,Zo.K)("div",{class:this.classes(Cl.base,Po.D.widget,t),onkeydown:this._handleKeyDown},this._renderMask(),this._renderContainer())}_renderContainer(){const{expanded:e}=this,t={[Cl.containerExpanded]:e};return(0,Zo.K)("div",{class:this.classes(Cl.container,t)},this._renderPanel(),this._renderContent())}_renderMask(){const{expanded:e}=this,t={[Cl.expandMaskExpanded]:e};return(0,Zo.K)("div",{bind:this,class:this.classes(Cl.expandMask,t),onclick:this.toggle})}_renderBadgeNumber(){const{expanded:e,iconNumber:t}=this;return t&&!e?(0,Zo.K)("span",{class:Cl.iconNumber,key:"expand__icon-number"},t):null}_renderPanelNumber(){const{iconNumber:e,expanded:t}=this;return e&&t?(0,Zo.K)("span",{class:this.classes(Cl.iconNumber,Cl.iconNumberExpanded),key:"expand__expand-icon-number"},e):null}_renderLegacyIcon(){const{collapseIconClass:e,expandIconClass:t,expanded:i}=this,r={[Cl.iconExpanded]:i};return null!=t&&(r[t]=!i),null!=e&&(r[e]=e===t||i),(0,Zo.K)("span",{"aria-hidden":"true",class:this.classes(Cl.icon,r),key:"legacy-icon"})}_renderToggleButton(){const{expanded:e,expandTitle:t,expandIcon:i,collapseIcon:r,contentId:n,expandIconClass:s,collapseIconClass:o}=this,a=s===Do.T.expand?"chevrons-left":void 0,l=o===Do.T.collapse?"chevrons-right":void 0,c=e?r??l:i??a,h=c===a||c===l;return(0,Zo.K)("calcite-button",{afterCreate:this._storeToggleButtonEl,"aria-controls":n,"aria-expanded":e?"true":"false",class:Po.D.widgetButton,kind:"neutral",label:t,onclick:this.toggle,scale:"s",title:t},c?(0,Zo.K)("calcite-icon",{class:this.classes(Cl.icon,h&&Cl.iconFlip),icon:c,scale:"s"}):this._renderLegacyIcon())}_renderPanel(){return(0,Zo.K)("div",{class:Cl.panel},this._renderToggleButton(),this._renderBadgeNumber(),this._renderPanelNumber())}_renderContent(){const{expanded:e,contentId:t,content:i}=this,r={[Cl.contentExpanded]:e},n={id:t,role:"region",class:this.classes(Cl.content,r)};return"string"==typeof i?(0,Zo.K)("div",{innerHTML:i,key:"content__string",...n}):(0,xl.p4)(i)?(0,Zo.K)("div",{key:"content__widget",...n},i.render()):i instanceof HTMLElement?(0,Zo.K)("div",{afterCreate:this._attachToNode,bind:i,key:"content__html-element",...n}):(0,xl.xk)(i)?(0,Zo.K)("div",{afterCreate:this._attachToNode,bind:i.domNode,key:"content__node",...n}):null}_attachToNode(e){e.appendChild(this)}_storeToggleButtonEl(e){this._toggleButtonEl=e}};(0,t._)([(0,v.MZ)({readOnly:!0})],kl.prototype,"contentId",null),(0,t._)([(0,v.MZ)({readOnly:!0})],kl.prototype,"expandTitle",null),(0,t._)([(0,v.MZ)()],kl.prototype,"autoCollapse",null),(0,t._)([(0,v.MZ)()],kl.prototype,"closeOnEsc",void 0),(0,t._)([(0,v.MZ)()],kl.prototype,"collapseIconClass",null),(0,t._)([(0,v.MZ)()],kl.prototype,"collapseIcon",void 0),(0,t._)([(0,v.MZ)()],kl.prototype,"collapseTooltip",void 0),(0,t._)([(0,v.MZ)()],kl.prototype,"content",void 0),(0,t._)([(0,v.MZ)()],kl.prototype,"expanded",null),(0,t._)([(0,v.MZ)()],kl.prototype,"expandIconClass",null),(0,t._)([(0,v.MZ)()],kl.prototype,"expandIcon",null),(0,t._)([(0,v.MZ)()],kl.prototype,"expandTooltip",void 0),(0,t._)([(0,v.MZ)()],kl.prototype,"group",null),(0,t._)([(0,v.MZ)()],kl.prototype,"iconClass",void 0),(0,t._)([(0,v.MZ)()],kl.prototype,"icon",void 0),(0,t._)([(0,v.MZ)()],kl.prototype,"iconNumber",void 0),(0,t._)([(0,v.MZ)()],kl.prototype,"label",null),(0,t._)([(0,v.MZ)(),(0,jo.G)("esri/widgets/Expand/t9n/Expand")],kl.prototype,"messages",void 0),(0,t._)([(0,v.MZ)(),(0,jo.G)("esri/t9n/common")],kl.prototype,"messagesCommon",void 0),(0,t._)([(0,v.MZ)()],kl.prototype,"mode",void 0),(0,t._)([(0,v.MZ)()],kl.prototype,"view",null),(0,t._)([(0,v.MZ)({type:El})],kl.prototype,"viewModel",void 0),kl=(0,t._)([(0,b.$)("esri.widgets.Expand")],kl);const Nl=kl;let Ll=class extends((0,Bo.R)(L.A.EventedAccessor)){constructor(e){super(e),this._initialViewpoint=null,this._goingHomeController=null,this.go=this.go.bind(this)}destroy(){this._cancelGo(),this.view=null}get state(){return this.view?.ready?this._goingHomeController?"going-home":"ready":"disabled"}set view(e){this._initialViewpoint=null,this._set("view",e),e&&e.when().then((()=>{this.view===e&&(this._initialViewpoint=e.viewpoint.clone(),this.notifyChange("viewpoint"))}))}get viewpoint(){return this._get("viewpoint")||this._initialViewpoint}set viewpoint(e){this._set("viewpoint",e)}async go(){if(!this.view?.ready)throw new h.A("home:disabled-state","Cannot go when disabled.");this._cancelGo(),this.emit("go");const e=new AbortController;this._goingHomeController=e;try{await(this.view?.when()),await this.callGoTo({target:this.viewpoint,options:{signal:e.signal}})}catch(e){}this._goingHomeController=null}cancelGo(){this._cancelGo()}_cancelGo(){const{_goingHomeController:e}=this;e&&e.abort(),this._goingHomeController=null}};(0,t._)([(0,v.MZ)()],Ll.prototype,"_goingHomeController",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Ll.prototype,"state",null),(0,t._)([(0,v.MZ)()],Ll.prototype,"view",null),(0,t._)([(0,v.MZ)({type:G.A})],Ll.prototype,"viewpoint",null),(0,t._)([(0,v.MZ)()],Ll.prototype,"go",null),(0,t._)([(0,v.MZ)()],Ll.prototype,"cancelGo",null),Ll=(0,t._)([(0,b.$)("esri.widgets.Home.HomeViewModel")],Ll);const Ol=Ll;var Rl=n(35017);const Pl={base:"esri-home",widgetIcon:Do.T.home};let Dl=class extends Io.A{constructor(e,t){super(e,t),this.iconClass=Pl.widgetIcon,this.icon=null,this.messages=null,this.messagesCommon=null,this.uiStrings=void 0,this.viewModel=new Ol,this._go=()=>{const{viewModel:e}=this;"going-home"===e.state?e.cancelGo():e.go()}}loadDependencies(){return(0,Ko.W)({button:()=>Promise.all([n.e(2006),n.e(7053),n.e(9091),n.e(5399)]).then(n.bind(n,45399)),loader:()=>n.e(9101).then(n.bind(n,39101))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get viewpoint(){return this.viewModel.viewpoint}set viewpoint(e){this.viewModel.viewpoint=e}cancelGo(){this.viewModel.cancelGo()}go(){return this.viewModel.go()}render(){const{messagesCommon:e,messages:t,icon:i,iconClass:r}=this,n=this.viewModel?.state,s=r===Pl.widgetIcon?void 0:r,o=void 0===s?"home":void 0,a="going-home"===n,l=null==i&&s;return(0,Zo.K)("div",{class:this.classes(Pl.base,Po.D.widget)},(0,Zo.K)("calcite-button",{class:Po.D.widgetButton,disabled:"disabled"===n,iconStart:a?void 0:i??o,kind:"neutral",label:t.widgetLabel,onclick:this._go,scale:a||l?"s":"m",title:"going-home"===n?e.cancel:t.title},a?(0,Zo.K)("calcite-loader",{inline:!0,label:"",scale:"m"}):l?this._renderLegacyIcon(s):null))}_renderLegacyIcon(e){return(0,Zo.K)("span",{"aria-hidden":"true",class:this.classes(Do.T.icon,e),styles:{display:"flex"}})}};(0,t._)([(0,v.MZ)()],Dl.prototype,"goToOverride",null),(0,t._)([(0,v.MZ)()],Dl.prototype,"iconClass",void 0),(0,t._)([(0,v.MZ)()],Dl.prototype,"icon",void 0),(0,t._)([(0,v.MZ)()],Dl.prototype,"label",null),(0,t._)([(0,v.MZ)(),(0,jo.G)("esri/widgets/Home/t9n/Home")],Dl.prototype,"messages",void 0),(0,t._)([(0,v.MZ)(),(0,jo.G)("esri/t9n/common")],Dl.prototype,"messagesCommon",void 0),(0,t._)([(0,v.MZ)()],Dl.prototype,"uiStrings",void 0),(0,t._)([(0,v.MZ)()],Dl.prototype,"view",null),(0,t._)([(0,v.MZ)({type:Ol}),(0,Rl.U)("go")],Dl.prototype,"viewModel",void 0),(0,t._)([(0,v.MZ)()],Dl.prototype,"viewpoint",null),Dl=(0,t._)([(0,b.$)("esri.widgets.Home")],Dl);const Fl=Dl;var jl=n(61774);const Zl="esri-layer-list",zl=`${Zl}__item`,Ul={base:Zl,widgetIcon:Do.T.layers,filterNoResults:`${Zl}__filter-no-results`,item:zl,itemActive:`${zl}--active`,itemContent:`${zl}-content`,itemContentBottom:`${zl}-content-bottom`,itemMessage:`${zl}-message`,itemInvisibleAtScale:`${zl}--invisible-at-scale`,itemActionIcon:`${zl}-action-icon`,itemActionImage:`${zl}-action-image`,itemTemporaryIcon:`${zl}-temporary-icon`,statusIndicator:`${Zl}__status-indicator`,publishing:`${Zl}__publishing`,updating:`${Zl}__updating`,connectionStatus:`${Zl}__connection-status`,connectionStatusConnected:`${Zl}__connection-status--connected`,visibleToggle:`${Zl}__visible-toggle`,visibleIcon:`${Zl}__visible-icon`};var Vl,Gl=n(33262),Bl=n(56851);let $l=Vl=class extends Gl.A{constructor(e){super(e),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new Vl({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};(0,t._)([(0,v.MZ)()],$l.prototype,"displayValueEnabled",void 0),(0,t._)([(0,v.MZ)()],$l.prototype,"max",void 0),(0,t._)([(0,v.MZ)()],$l.prototype,"min",void 0),(0,t._)([(0,v.MZ)()],$l.prototype,"step",void 0),(0,t._)([(0,v.MZ)()],$l.prototype,"value",void 0),$l=Vl=(0,t._)([(0,b.$)("esri.support.Action.ActionSlider")],$l);const Hl=$l;var ql=n(46883);const Wl={hide:"hide",hideChildren:"hide-children"},Kl="root";function Yl({connectionStatus:e,publishing:t}){return e?"connected"===e?"beacon":"offline":t?"square":"bullet-point"}function Jl(e){return!!e&&e.listMode===Wl.hideChildren}function Xl(e){if(e)return null!=e.listMode?e.listMode:void 0}function Ql(e){if(!(!e||"type"in e&&"wmts"===e.type||Jl(e)))return"sublayers"in e?"sublayers":"layers"in e?"layers":void 0}function ec(e){const t=(e?.layer&&sc(e.layer)?e.layer.layer:void 0)??e?.layer;return!!t&&(function(e){const t=oc(e);return null!=t&&"supportsDynamicLayers"in t?t.supportsDynamicLayers:void 0}(t)??!0)}function tc(e){return Xl(e)!==Wl.hide}function ic(e,t){e?.sort(((e,i)=>{const r="uid"in e?t.indexOf(e.uid):-1,n="uid"in i?t.indexOf(i.uid):-1;return r>n?-1:r<n?1:0}))}function rc(e){const t=e?.layer;return t&&"layers"in t?t.layers:null}function nc(e){const t=sc(e)?e:null,i=e?.parent,r=null!=i&&"type"in i&&"map-image"===i.type?t?.source:null;return r&&i?{layer:i,title:"",sublayerIds:[r.mapLayerId]}:{layer:e,title:""}}function sc(e){return null!=e&&"layer"in e&&null!=e.layer}function oc(e){return e&&"capabilities"in e&&null!=e.capabilities&&"exportMap"in e.capabilities?e.capabilities.exportMap:void 0}function ac(e){return e?.["data-item"]}function lc(e){return e?.getAttribute("data-layer-type")}let cc=class extends((0,Dt.sA)(Io.A)){constructor(e,t){super(e,t),this._legend=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles((0,q.wB)((()=>this.content),(e=>this._createLegend(e)),q.Vh))}destroy(){this._legend=(0,m.pR)(this._legend)}get className(){const{image:e}=this,t=this._getFirstWidget();return this._get("className")||(!e&&t?t.iconClass??"":"")}set className(e){this._override("className",e)}get disabled(){const{listItem:e,_legend:t,content:i}=this;return!(e&&(Array.isArray(i)&&i.length>1||!t||t.activeLayerInfos?.length&&e.visibleAtCurrentScale&&e.visible))}set disabled(e){this._overrideIfSome("disabled",e)}get title(){return this._get("title")||(this._getFirstWidget()?.label??"")}set title(e){this._override("title",e)}render(){return(0,Zo.K)("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(e){const{_legend:t,disabled:i}=this;return!e||i?null:"legend"===e&&t?(0,Zo.K)("div",{key:"legend-widget"},t.render()):"string"==typeof e?(0,Zo.K)("div",{innerHTML:e,key:e}):(0,xl.p4)(e)?(0,Zo.K)("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?(0,Zo.K)("div",{afterCreate:this._attachToNode,bind:e,key:"content-element"}):null}_renderContents(){const{content:e}=this;return Array.isArray(e)?e.map((e=>this._renderContent(e))):this._renderContent(e)}_getLegendOptions(){const{listItem:e}=this;if(!e)return{};const{layer:t,view:i}=e;return t&&i&&"subtype-sublayer"!==t.type?{view:i,layerInfos:[nc(t)]}:{}}async _createLegend(e){if(!this._hasLegend(e)||this._legend)return;const{default:t}=await Promise.resolve().then(n.bind(n,21083)),{listItem:i}=this,r=new t(this._getLegendOptions());this._legend=r,this.notifyChange("className"),this.notifyChange("title");const s=(0,q.wB)((()=>[i?.view,i?.layer,i?.layer?.source,i?.layer?.parent]),(()=>this._updateLegend(r)),q.Vh);this.addHandles(s,"legends"),this.scheduleRender()}_hasLegend(e){const t="legend";return e===t||null!=e&&!!Array.isArray(e)&&e.includes(t)}_attachToNode(e){e.appendChild(this)}_updateLegend(e){e.set(this._getLegendOptions()),this.scheduleRender()}_getWidget(e){return"legend"===e?this._legend:(0,xl.p4)(e)?e:null}_getFirstWidget(){const{content:e}=this;return Array.isArray(e)?e.map((e=>this._getWidget(e))).find((e=>e)):this._getWidget(e)}};(0,t._)([(0,v.MZ)()],cc.prototype,"_legend",void 0),(0,t._)([(0,v.MZ)()],cc.prototype,"className",null),(0,t._)([(0,v.MZ)()],cc.prototype,"content",void 0),(0,t._)([(0,v.MZ)()],cc.prototype,"disabled",null),(0,t._)([(0,v.MZ)()],cc.prototype,"flowEnabled",void 0),(0,t._)([(0,v.MZ)()],cc.prototype,"image",void 0),(0,t._)([(0,v.MZ)()],cc.prototype,"listItem",void 0),(0,t._)([(0,v.MZ)()],cc.prototype,"open",void 0),(0,t._)([(0,v.MZ)()],cc.prototype,"title",null),(0,t._)([(0,v.MZ)()],cc.prototype,"visible",void 0),cc=(0,t._)([(0,b.$)("esri.widgets.LayerList.ListItemPanel")],cc);const hc=cc;var uc;const pc=a.A.ofType({key:"type",defaultKeyValue:"button",base:Gl.A,typeMap:{button:Bl.A,toggle:ql.A,slider:Hl}}),dc=a.A.ofType(pc),fc="layer",yc="child-list-mode";let mc=uc=class extends((0,Dt.sA)(k.A)){constructor(e){super(e),this.actionsSections=new dc,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(a.A.ofType(uc)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.layerView=null,this.listItemCreatedFunction=null,this.open=!1,this.panel=null,this.parent=null,this.sortable=!0,this.view=null}initialize(){if(this.addHandles([(0,q.wB)((()=>[this.layer,this.layer?.listMode]),(()=>this._watchLayerProperties(this.layer)),q.Vh),(0,q.wB)((()=>this.checkPublishStatusEnabled),(e=>this._updateChildrenPublishing(e)),q.Vh),(0,q.wB)((()=>this.view),(e=>this._updateChildrenView(e)),q.Vh),(0,q.wB)((()=>this.panel),(e=>this._setListItemOnPanel(e)),q.Vh),(0,q.wB)((()=>[this.layer,this.view]),(()=>this._getLayerView()),q.Vh)]),"function"==typeof this.listItemCreatedFunction){const e={item:this};this.listItemCreatedFunction.call(null,e)}}destroy(){this.view=null}get connectionStatus(){const{layerView:e,publishing:t}=this;if(!t&&e&&"connectionStatus"in e)return e.connectionStatus}get error(){return this.layer?.loadError}get incompatible(){const{layerView:e}=this;return!(!e||!("spatialReferenceSupported"in e)||e.spatialReferenceSupported)}castPanel(e){return this.panel?.open&&!e.hasOwnProperty("open")&&(e.open=!0),e?new hc(e):null}get title(){const e=(0,Bi.Jt)(this,"layer.layer");return(!e||e&&(0,Bi.Jt)(this,"layer.layer.loaded"))&&(0,Bi.Jt)(this,"layer.title")||(0,Bi.Jt)(this,"layer.attributes.title")||""}set title(e){this._override("title",e)}get publishing(){const{layer:e,checkPublishStatusEnabled:t}=this;return t&&e&&"publishingInfo"in e&&"publishing"===e.publishingInfo?.status}get updating(){const{layerView:e,connectionStatus:t,layer:i,publishing:r}=this;return!r&&!t&&(e?e.updating:"loading"===i?.loadStatus||!1)}get visible(){return this.layer?.visible}set visible(e){const t=this.layer;t&&(t.visible=e)}get visibleAtCurrentScale(){return!function(e,t){if(!e||null==t||isNaN(t))return!1;const i=function(e){return null!=e&&"minScale"in e&&null!=e.minScale?e.minScale:void 0}(e),r=function(e){return null!=e&&"maxScale"in e&&null!=e.maxScale?e.maxScale:void 0}(e),n=null!=i&&!isNaN(i)&&i>0&&t>i,s=null!=r&&!isNaN(r)&&r>0&&t<r;return n||s}(this.layer,this.view?.scale)}get visibilityMode(){return function(e){if(!e)return"inherited";const t=function(e){const t=oc(e);return null!=t&&"supportsSublayerVisibility"in t?t.supportsSublayerVisibility:void 0}(sc(e)?e.layer:e);return null!=t?t?"independent":"inherited":"visibilityMode"in e&&null!=e.visibilityMode?e.visibilityMode:"independent"}(this.layer)}clone(){return new uc({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(e){e&&(e.listItem=this)}_updateChildrenPublishing(e){const t=this.children;t&&t.forEach((t=>t.checkPublishStatusEnabled=e))}_updateChildrenView(e){const t=this.children;t&&t.forEach((t=>t.view=e))}_addChildren(e){if(this.removeHandles(yc),this.children.removeAll(),!e)return;e.forEach((t=>{this.addHandles((0,q.wB)((()=>t.listMode),(()=>this._addChildren(e))),yc)}));const t=e.filter((e=>"hide"!==Xl(e)));this.children.addMany(this._makeChildren(t))}_watchSublayerChanges(e){e&&this.addHandles(e.on("change",(()=>{this._addChildren(e)})),fc)}_initializeChildLayers(e){this._addChildren(e),this._watchSublayerChanges(e)}_makeChildren(e){return e.map((e=>tc(e)?new uc({layer:e,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,parent:this,view:this.view}):null)).filter(B.Ru).reverse()}_watchLayerProperties(e){if(this.removeHandles(fc),this.removeHandles(yc),!e)return;if("hide-children"===Xl(e))return void this.children.removeAll();const t=Ql(e);t&&this.addHandles((0,q.wB)((()=>e[t]),(i=>{e.hasOwnProperty(t)&&this._initializeChildLayers(i)}),q.Vh),fc)}async _getLayerView(){const{layer:e,view:t}=this;if(e&&t)try{const i="subtype-sublayer"===e.type?e.parent:e,r=i&&await t.whenLayerView(i);if(r?.layer!==i)return;this._set("layerView",r)}catch{}}};(0,t._)([(0,v.MZ)({type:dc})],mc.prototype,"actionsSections",void 0),(0,t._)([(0,v.MZ)()],mc.prototype,"actionsOpen",void 0),(0,t._)([(0,v.MZ)()],mc.prototype,"checkPublishStatusEnabled",void 0),(0,t._)([(0,v.MZ)({type:a.A})],mc.prototype,"children",void 0),(0,t._)([(0,v.MZ)()],mc.prototype,"childrenSortable",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],mc.prototype,"connectionStatus",null),(0,t._)([(0,v.MZ)({readOnly:!0})],mc.prototype,"error",null),(0,t._)([(0,v.MZ)()],mc.prototype,"hidden",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],mc.prototype,"incompatible",null),(0,t._)([(0,v.MZ)()],mc.prototype,"layer",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],mc.prototype,"layerView",void 0),(0,t._)([(0,v.MZ)()],mc.prototype,"listItemCreatedFunction",void 0),(0,t._)([(0,v.MZ)()],mc.prototype,"open",void 0),(0,t._)([(0,v.MZ)({type:hc})],mc.prototype,"panel",void 0),(0,t._)([(0,O.w)("panel")],mc.prototype,"castPanel",null),(0,t._)([(0,v.MZ)()],mc.prototype,"parent",void 0),(0,t._)([(0,v.MZ)()],mc.prototype,"sortable",void 0),(0,t._)([(0,v.MZ)()],mc.prototype,"title",null),(0,t._)([(0,v.MZ)({readOnly:!0})],mc.prototype,"publishing",null),(0,t._)([(0,v.MZ)({readOnly:!0})],mc.prototype,"updating",null),(0,t._)([(0,v.MZ)()],mc.prototype,"view",void 0),(0,t._)([(0,v.MZ)()],mc.prototype,"visible",null),(0,t._)([(0,v.MZ)({readOnly:!0})],mc.prototype,"visibleAtCurrentScale",null),(0,t._)([(0,v.MZ)({readOnly:!0})],mc.prototype,"visibilityMode",null),mc=uc=(0,t._)([(0,b.$)("esri.widgets.LayerList.ListItem")],mc);const gc=mc,vc="view-layers",_c="map-layers",bc="layer-views",wc="layer-list-mode",Mc=a.A.ofType(gc);let Tc=class extends L.A.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.operationalItems=new Mc,this.view=null}initialize(){this.addHandles([(0,q.wB)((()=>!0===this.view?.ready),(()=>this._viewHandles()),q.Vh),(0,q.wB)((()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled]),(()=>this._recompileList()))],"view")}destroy(){this.view=null,this.operationalItems.removeAll()}get state(){const{view:e}=this;return e?.ready?"ready":e?"loading":"disabled"}get totalItems(){return this.operationalItems.flatten((e=>e.children)).length}triggerAction(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}moveListItem(e,t,i,r){const n=e?.layer;if(!n||"subtype-sublayer"===n.type)return;const s=this.view?.map?.layers,o=t?rc(t):s,a=i?rc(i):s;if(!o||!a)return;const{operationalItems:l}=this,c=t?.children||l,h=i?.children||l,u=a.length-r;e.parent=i||null,c.remove(e),o.remove(n),h.includes(e)||h.add(e,u),a.includes(n)||a.add(n,u),this._compileList()}_createLayerViewHandles(e){this.removeHandles(bc),this._compileList(),e&&this.addHandles(e.on("change",(()=>this._compileList())),bc)}_createMapLayerHandles(e){this.removeHandles(_c),this._compileList(),e&&this.addHandles(e.on("change",(()=>this._compileList())),_c)}_createListItem(e){const{view:t,listItemCreatedFunction:i,checkPublishStatusEnabled:r}=this;return new gc({checkPublishStatusEnabled:r,layer:e,listItemCreatedFunction:i,view:t})}_removeAllItems(){this.operationalItems.removeAll()}_getViewableLayers(e){if(e)return e.filter((e=>"hide"!==Xl(e)))}_watchLayersListMode(e){this.removeHandles(wc),e&&e.forEach((e=>{"listMode"in e&&this.addHandles((0,q.wB)((()=>e.listMode),(()=>this._compileList())),wc)}))}_compileList(){const e=this.view?.map?.layers;this._watchLayersListMode(e);const t=this._getViewableLayers(e);t?.length?(this._createNewItems(t),this._removeItems(t),this._sortItems(t)):this._removeAllItems()}_createNewItems(e){const{operationalItems:t}=this;e.forEach((e=>{t.some((t=>t.layer===e))||t.add(this._createListItem(e))}))}_removeItems(e){const{operationalItems:t}=this,i=[];t.forEach((t=>{t&&e&&e.includes(t.layer)||i.push(t)})),t.removeMany(i)}_sortItems(e){const{operationalItems:t}=this;t.sort(((t,i)=>{const r=e.indexOf(t.layer),n=e.indexOf(i.layer);return r>n?-1:r<n?1:0}))}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([_c,bc,vc]),e?.ready?this.addHandles([(0,q.wB)((()=>this.view?.map?.allLayers),(e=>this._createMapLayerHandles(e)),q.Vh),(0,q.wB)((()=>this.view?.allLayerViews),(e=>this._createLayerViewHandles(e)),q.Vh)],vc):this._removeAllItems()}};(0,t._)([(0,v.MZ)()],Tc.prototype,"checkPublishStatusEnabled",void 0),(0,t._)([(0,v.MZ)()],Tc.prototype,"listItemCreatedFunction",void 0),(0,t._)([(0,v.MZ)({type:Mc})],Tc.prototype,"operationalItems",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Tc.prototype,"state",null),(0,t._)([(0,v.MZ)()],Tc.prototype,"totalItems",null),(0,t._)([(0,v.MZ)()],Tc.prototype,"view",void 0),Tc=(0,t._)([(0,b.$)("esri.widgets.LayerList.LayerListViewModel")],Tc);const Sc=Tc;let Ac=class extends k.A{constructor(){super(...arguments),this.closeButton=!1,this.collapseButton=!1,this.errors=!1,this.filter=!1,this.flow=!0,this.heading=!1,this.statusIndicators=!0,this.temporaryLayerIndicators=!1}};(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],Ac.prototype,"closeButton",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],Ac.prototype,"collapseButton",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],Ac.prototype,"errors",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],Ac.prototype,"filter",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],Ac.prototype,"flow",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],Ac.prototype,"heading",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],Ac.prototype,"statusIndicators",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],Ac.prototype,"temporaryLayerIndicators",void 0),Ac=(0,t._)([(0,b.$)("esri.widgets.LayerList.LayerListVisibleElements")],Ac);const Ec=Ac,xc=a.A.ofType(gc),Ic="operational";let Cc=class extends Io.A{constructor(e,t){super(e,t),this._activeItem=null,this._tooltipReferenceMap=new Ji.A,this._focusRootFlowItem=!1,this._focusPanelFlowItem=!1,this._lastDragDetail=null,this._selectedDragItemLayerUid=null,this.collapsed=!1,this.dragEnabled=!1,this.filterPlaceholder="",this.filterText="",this.headingLevel=2,this.icon=null,this.iconClass=Ul.widgetIcon,this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.messages=null,this.messagesCommon=null,this.minDragEnabledItems=2,this.minFilterItems=10,this.selectedItems=new xc,this.selectionMode="none",this.viewModel=new Sc,this.visibilityAppearance="default",this.visibleElements=new Ec,this._canMove=({dragEl:e,fromEl:t,toEl:i},r)=>{const n="pull"===r?this.listItemCanGiveFunction:this.listItemCanReceiveFunction,s=ac(e);if(!s?.sortable)return!1;const o=ac(t),a=lc(t),l=ac(i),c=lc(i),h=!!a&&!!c&&a===c,u={selected:s,from:o,to:l};return t.group&&i.group&&"function"==typeof n?n.call(null,u):h&&"sublayer"!==s?.layer?.type&&"map-image"!==o?.layer?.type&&"map-image"!==l?.layer?.type},this._clearActiveItem=()=>{this._activeItem=null},this._setActiveItem=e=>{if("default"!==this.visibilityAppearance)return;const t=Array.from(e.composedPath()).find((e=>e.classList?.contains(Ul.item)));this._activeItem=ac(t)},this._onCalciteListOrderChange=e=>{const{_lastDragDetail:t}=this,{toEl:i,fromEl:r,dragEl:n,newIndex:s}=e;if(r&&i&&(t?.newIndex!==s||t?.dragEl!==n||t?.toEl!==i||t?.fromEl!==r))if(this._lastDragDetail=e,r!==i)this._moveLayerFromChildList({toEl:i,fromEl:r,dragEl:n,newIndex:s});else{const e=Array.from(r.children).filter((e=>e?.matches("calcite-list-item"))).map((e=>e.value));this._sortLayers(r,e)}}}loadDependencies(){return(0,Ko.W)({action:()=>Promise.all([n.e(2006),n.e(7053),n.e(8718),n.e(1644)]).then(n.bind(n,31644)),"action-group":()=>Promise.all([n.e(2006),n.e(7053),n.e(9575),n.e(8718),n.e(5566),n.e(3668),n.e(4226)]).then(n.bind(n,84226)),"action-menu":()=>Promise.all([n.e(2006),n.e(7053),n.e(9575),n.e(8718),n.e(5566),n.e(3668),n.e(690)]).then(n.bind(n,60690)),button:()=>Promise.all([n.e(2006),n.e(7053),n.e(9091),n.e(5399)]).then(n.bind(n,45399)),flow:()=>n.e(814).then(n.bind(n,10814)),"flow-item":()=>Promise.all([n.e(2006),n.e(7053),n.e(9575),n.e(8718),n.e(5566),n.e(3668),n.e(2326)]).then(n.bind(n,12326)),icon:()=>Promise.all([n.e(2006),n.e(855)]).then(n.bind(n,50855)),list:()=>Promise.all([n.e(2006),n.e(7053),n.e(9091),n.e(9839),n.e(9989)]).then(n.bind(n,39989)),"list-item":()=>Promise.all([n.e(2006),n.e(7053),n.e(8718),n.e(6784)]).then(n.bind(n,36784)),notice:()=>Promise.all([n.e(2006),n.e(7053),n.e(710)]).then(n.bind(n,80710)),tooltip:()=>Promise.all([n.e(2006),n.e(9575),n.e(6903)]).then(n.bind(n,59284))})}destroy(){this._tooltipReferenceMap.clear()}get _dragEnabled(){return this.viewModel.totalItems>=this.minDragEnabledItems&&this.dragEnabled}get _filterEnabled(){return this.viewModel.totalItems>=this.minFilterItems&&this.visibleElements.filter}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(e){this.viewModel.listItemCreatedFunction=e}get multipleSelectionEnabled(){return(0,xi.Lx)(y.A.getLogger(this),"multipleSelectionEnabled",{replacement:"selectionMode",version:"4.29",warnOnce:!0}),"multiple"===this.selectionMode}set multipleSelectionEnabled(e){(0,xi.Lx)(y.A.getLogger(this),"multipleSelectionEnabled",{replacement:"selectionMode",version:"4.29",warnOnce:!0}),this.selectionMode=e?"multiple":this.selectionEnabled?"single":"none"}get operationalItems(){return this.viewModel.operationalItems}set operationalItems(e){this.viewModel.operationalItems=e}get selectionEnabled(){return(0,xi.Lx)(y.A.getLogger(this),"selectionEnabled",{replacement:"selectionMode, dragEnabled",version:"4.29",warnOnce:!0}),"none"!==this.selectionMode&&this.dragEnabled}set selectionEnabled(e){(0,xi.Lx)(y.A.getLogger(this),"selectionEnabled",{replacement:"selectionMode, dragEnabled",version:"4.29",warnOnce:!0}),this.dragEnabled=e,this.selectionMode=e?this.multipleSelectionEnabled?"multiple":"single":"none"}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}triggerAction(e,t){return this.viewModel.triggerAction(e,t)}render(){const e=this.viewModel?.state,t={[Po.D.hidden]:"loading"===e,[Po.D.disabled]:"disabled"===e},i=this.operationalItems?.filter((e=>!e.hidden&&(this.visibleElements.errors||!e.error)));return(0,Zo.K)("div",{class:this.classes(Ul.base,Po.D.widget,Po.D.panel,t)},i?.length?[this._renderItemTooltips(i),this._renderItems(i)]:this._renderNoItems())}_renderItemTooltip(e){const{_tooltipReferenceMap:t,messages:i}=this;return e?(0,Zo.K)("calcite-tooltip",{key:`tooltip-${e.layer.uid}`,referenceElement:t.get(e.layer.uid)},i.layerIncompatibleTooltip):null}_renderItemTooltipNodes(e){return e.incompatible?this._renderItemTooltip(e):e.children?.filter((e=>!e.hidden)).toArray().map((e=>this._renderItemTooltipNodes(e)))}_renderItemTooltips(e){return e?.toArray().map((e=>this._renderItemTooltipNodes(e)))}_renderNoItemsMessage(){return(0,Zo.K)("div",{slot:"message"},this.messages.noItemsToDisplay)}_renderNoItems(){return(0,Zo.K)("div",{class:Ul.itemMessage,key:"esri-layer-list__no-items"},(0,Zo.K)("calcite-notice",{icon:"information",kind:"info",open:!0,scale:"m",width:"full"},this._renderNoItemsMessage()))}_renderPanelFlowItems(e){return e?e.flatten((e=>e.children)).filter((e=>!e.hidden)).toArray().filter((({panel:e})=>e?.open&&!e.disabled&&e.flowEnabled)).map((({title:e,panel:t})=>{const i=()=>this._handlePanelFlowItemBack(t);return(0,Zo.K)("calcite-flow-item",{afterCreate:this._focusPanelFlowItemNode,afterUpdate:this._focusPanelFlowItemNode,bind:this,description:e,heading:t.title,headingLevel:this.headingLevel,key:`flow-panel-${t.uid}`,onCalciteFlowItemBack:e=>{e.preventDefault(),i()}},t.render(),(0,Zo.K)("calcite-button",{appearance:"transparent",onclick:i,slot:"footer-actions",width:"full"},this.messagesCommon.back))})):[]}_handlePanelFlowItemBack(e){e.open=!1,this._focusRootFlowItem=!0}_focusRootFlowItemNode(e){this._focusRootFlowItem&&(this._focusRootFlowItem=!1,requestAnimationFrame((()=>e?.setFocus())))}_focusPanelFlowItemNode(e){this._focusPanelFlowItem&&(this._focusPanelFlowItem=!1,requestAnimationFrame((()=>e?.setFocus())))}_renderItems(e){const{visible:t,collapsed:i,_filterEnabled:r,visibleElements:{closeButton:n,collapseButton:s,heading:o,flow:a},_dragEnabled:l,selectionMode:c,filterText:h,filterPlaceholder:u,messages:p}=this,d=[(0,Zo.K)("calcite-flow-item",{afterCreate:this._focusRootFlowItemNode,afterUpdate:this._focusRootFlowItemNode,bind:this,closable:n,closed:!t,collapsed:i,collapsible:s,heading:o?p.widgetLabel:void 0,headingLevel:this.headingLevel,key:"root-flow-item",onCalciteFlowItemClose:()=>this.visible=!1},(0,Zo.K)("calcite-list",{afterCreate:e=>{e.addEventListener("focusin",this._setActiveItem),e.addEventListener("focusout",this._clearActiveItem)},afterRemoved:e=>{e.removeEventListener("focusin",this._setActiveItem),e.removeEventListener("focusout",this._clearActiveItem)},canPull:e=>this._canMove(e,"pull"),canPut:e=>this._canMove(e,"put"),"data-layer-type":Ic,dragEnabled:l,filterEnabled:r,filterPlaceholder:u,filterText:r?h:"",group:Kl,key:"root-list",label:p.widgetLabel,onmouseleave:this._clearActiveItem,onmouseover:this._setActiveItem,selectionAppearance:"border",selectionMode:c,onCalciteListChange:e=>this._handleCalciteListChange(e),onCalciteListDragEnd:e=>this._handleCalciteListDragEnd(e.detail),onCalciteListFilter:e=>this.filterText=e.target?.filterText??"",onCalciteListOrderChange:e=>this._onCalciteListOrderChange(e.detail)},e?.toArray().map((e=>this._renderItem(e))),e?.length&&r?(0,Zo.K)("div",{class:Ul.filterNoResults,slot:"filter-no-results"},(0,Zo.K)("calcite-notice",{kind:"info",open:!0,scale:"m",width:"full"},this._renderNoItemsMessage())):null)),this._renderPanelFlowItems(e)];return t?a?(0,Zo.K)("calcite-flow",{key:"root-flow"},d):d:null}_renderChildList(e,t=[]){const{_dragEnabled:i}=this,{children:r}=e,n=function({children:e,error:t,incompatible:i}){return!!e?.filter((e=>!e.hidden)).length&&!t&&!i}(e),s=!Jl(e.layer)&&!n&&i&&"group"===e.layer?.type;return n||s?(0,Zo.K)("calcite-list",{canPull:e=>this._canMove(e,"pull"),canPut:e=>this._canMove(e,"put"),"data-item":e,"data-layer-type":Ic,dragEnabled:!!i&&e.childrenSortable&&ec(e),group:e.layer.uid},r?.filter((e=>!e.hidden)).toArray().map((i=>this._renderItem(i,e,[...t,e.title])))):null}_renderItemMessage(e){return e.error?(0,Zo.K)("div",{class:Ul.itemMessage,key:"esri-layer-list__error",slot:"content-bottom"},(0,Zo.K)("calcite-notice",{icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",width:"full"},(0,Zo.K)("div",{slot:"message"},this.messages.layerError))):e.incompatible?(0,Zo.K)("div",{class:Ul.itemMessage,key:"esri-layer-list__incompatible",slot:"content-bottom"},(0,Zo.K)("calcite-notice",{afterCreate:t=>this._setTooltipReference(t,e),afterRemoved:()=>this._removeTooltipReference(e),bind:this,icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",tabIndex:0,width:"full"},(0,Zo.K)("div",{slot:"message"},this.messages.layerIncompatible))):null}_renderItem(e,t,i){const{_activeItem:r,_selectedDragItemLayerUid:n,selectionMode:s,selectedItems:o,messages:a}=this,l=e.title||a.untitledLayer,c=e.visibleAtCurrentScale?l:`${l} (${a.layerInvisibleAtScale})`,h=this._filterActions(e.actionsSections),u=this._countActions(h);return(0,Zo.K)("calcite-list-item",{afterCreate:t=>this._focusSelectedDragEl(t,e),afterUpdate:t=>this._focusSelectedDragEl(t,e),class:this.classes(Ul.item,{[Ul.itemActive]:r===e}),"data-item":e,dragDisabled:!e.sortable,dragSelected:e.layer.uid===n,id:e.layer.uid,key:`list-item-${e.layer.uid}`,label:l,metadata:{parentTitles:i,title:l},open:e.open,selected:"none"!==s&&o.includes(e),title:c,value:e.layer.uid,onCalciteListItemDragHandleChange:t=>this._handleCalciteListItemDragHandleChange(t,e),onCalciteListItemSelect:i=>this._handleCalciteListItemSelect(i,e,t),onCalciteListItemToggle:t=>this._handleCalciteListItemToggle(t,e)},(0,Zo.K)("div",{class:this.classes({[Ul.itemContent]:!0,[Ul.itemInvisibleAtScale]:!e.visibleAtCurrentScale}),slot:"content"},l),this._renderItemStatus(e,t),this._renderItemToggle(e,t),this._renderItemTemporaryIcon(e),this._renderChildList(e,i),this._renderItemMessage(e),this._renderPanel(e.panel),this._renderPanelAction(e.panel),u>1?this._renderActionsSections(e,h):1===u?this._renderAction({item:e,action:this._getSingleActionButton(h),textEnabled:!1}):null)}_renderItemStatus(e,t){const{visibleElements:i}=this;if(!i.statusIndicators)return null;const{connectionStatus:r,publishing:n,updating:s}=e,o=s&&!t,a=!!r;return(0,Zo.K)("calcite-icon",{class:this.classes({[Ul.statusIndicator]:!0,[Ul.publishing]:n,[Ul.updating]:o,[Ul.connectionStatus]:a,[Ul.connectionStatusConnected]:a&&"connected"===r}),icon:Yl({connectionStatus:r,publishing:n}),key:"layer-item-status",scale:"s",slot:"actions-end"})}_renderItemTemporaryIcon(e){return this.visibleElements.temporaryLayerIndicators&&"persistenceEnabled"in e.layer&&!e.layer.persistenceEnabled?(0,Zo.K)("calcite-icon",{class:Ul.itemTemporaryIcon,icon:"temporary",key:"temporary-icon",scale:"s",slot:"actions-start",title:this.messages.temporary}):null}_renderItemToggle(e,t){const{messages:i,visibilityAppearance:r}=this,{visible:n}=e,s=t?.visibilityMode;if("inherited"===s)return null;const o=function({exclusive:e,visible:t,visibilityAppearance:i}){const r="checkbox"===i;return t?e?"circle-f":r?"check-square-f":"view-visible":e?"circle":r?"square":"view-hide"}({visible:n,exclusive:"exclusive"===s,visibilityAppearance:r}),a="checkbox"===r;return(0,Zo.K)("calcite-action",{appearance:"transparent",class:Ul.visibleToggle,icon:a?o:void 0,key:"visibility-toggle",onclick:()=>this._toggleVisibility(e,t),scale:"s",slot:a?"actions-start":"actions-end",text:i.layerVisibility,title:i.layerVisibility},a?null:(0,Zo.K)("calcite-icon",{class:this.classes({[Ul.visibleIcon]:"exclusive"!==s&&n}),icon:o,scale:"s"}))}_renderPanel(e){return!e?.open||e.disabled||e.flowEnabled?null:(0,Zo.K)("div",{class:Ul.itemContentBottom,key:`content-panel-${e.uid}`,slot:"content-bottom"},e.render())}_renderPanelAction(e){if(!e?.visible)return null;const{open:t,title:i,disabled:r}=e;return(0,Zo.K)("calcite-action",{active:t,appearance:"transparent",disabled:r,icon:(0,jl.Yb)(e),key:`action-${e.uid}`,onclick:()=>this._togglePanel(e),scale:"s",slot:"actions-end",text:i??"",title:i??void 0},this._renderFallbackIcon(e))}_renderActionsSections(e,t){return(0,Zo.K)("calcite-action-menu",{appearance:"transparent",key:"item-action-menu",label:this.messagesCommon.menu,open:e.actionsOpen,overlayPositioning:"fixed",placement:"bottom-end",scale:"s",slot:"actions-end",onCalciteActionMenuOpen:t=>e.actionsOpen=t.target.open},(0,Zo.K)("calcite-action",{appearance:"transparent",icon:"ellipsis",scale:"s",slot:"trigger",text:this.messagesCommon.options,title:this.messagesCommon.options}),t.toArray().map(((t,i)=>this._renderActionSection(e,t,i))))}_renderActionSection(e,t,i){return(0,Zo.K)("calcite-action-group",{key:`action-section-${i}`},t.toArray().map((t=>this._renderAction({item:e,action:t,textEnabled:!0}))))}_renderFallbackIcon(e){const{className:t,icon:i}=e;if(i)return null;const r="image"in e?e.image:void 0,n={[Ul.itemActionIcon]:!!t,[Ul.itemActionImage]:!!r};return t&&(n[t]=!0),r||t?(0,Zo.K)("span",{"aria-hidden":"true",class:this.classes(Ul.itemActionIcon,n),key:"icon",styles:(0,jl.p5)(r)}):null}_renderAction(e){const{item:t,action:i,textEnabled:r}=e,{active:n,disabled:s,title:o,type:a,indicator:l}=i;return(0,Zo.K)("calcite-action",{active:"toggle"===a&&i.value,appearance:"transparent",disabled:s,icon:(0,jl.Yb)(i),indicator:l,key:`action-${i.uid}`,loading:n,onclick:()=>this._triggerAction(t,i),scale:"s",slot:r?void 0:"actions-end",text:o??"",textEnabled:r,title:o??void 0},this._renderFallbackIcon(i))}_setTooltipReference(e,t){this._tooltipReferenceMap.set(t.layer.uid,e)}_removeTooltipReference(e){this._tooltipReferenceMap.delete(e.layer.uid)}_moveLayerFromChildList({toEl:e,fromEl:t,dragEl:i,newIndex:r}){const n=ac(i),s=ac(e),o=ac(t);this.viewModel.moveListItem(n,o,s,r)}_handleCalciteListDragEnd(e){const{fromEl:t,dragEl:i,oldIndex:r}=e;t.insertBefore(i,t.children[r])}_sortLayers(e,t){if(e)if(e.group===Kl)ic(this.view?.map?.layers,t);else{const i=ac(e);if(!i)return;!function(e,t){const i=e?.layer;if(!i)return;const r=Ql(i);if(!r)return;let n;"layers"===r&&"layers"in i?n=i.layers:"sublayers"===r&&"sublayers"in i&&(n=i.sublayers),ic(n,t)}(i,t)}}_getSingleActionButton(e){return e.reduce((e=>e)).filter((e=>e&&"button"===e.type)).at(0)}_filterActions(e){return e.map((e=>e.filter((e=>e.visible))))}_countActions(e){return e.reduce(((e,t)=>e+t.length),0)}_triggerAction(e,t){t&&e&&("toggle"===t.type&&(t.value=!t.value),this.triggerAction(t,e))}_handleCalciteListChange(e){const{selectionMode:t,selectedItems:i}=this;if("none"===t)return;const r=e.target.selectedItems.map((e=>ac(e))).filter(Boolean);i.removeAll(),i.addMany(r)}_handleCalciteListItemToggle(e,t){e.stopPropagation(),t.open=e.target.open}_focusSelectedDragEl(e,t){this._selectedDragItemLayerUid===t.layer.uid&&requestAnimationFrame((()=>e?.setFocus()))}_handleCalciteListItemDragHandleChange(e,t){e.stopPropagation();const i=e.target.dragSelected;this._selectedDragItemLayerUid=i?t.layer.uid:null}_handleCalciteListItemSelect(e,t,i){ac(e.target)===t&&"none"===this.selectionMode&&"inherited"!==i?.visibilityMode&&this._toggleVisibility(t,i)}_togglePanel(e){e.open=!e.open,e.open&&(this._focusPanelFlowItem=!0)}_toggleVisibility(e,t){if(!e)return;const i=t?.visibilityMode;"exclusive"===i&&e.visible||(e.visible=!e.visible)}};(0,t._)([(0,v.MZ)()],Cc.prototype,"_activeItem",void 0),(0,t._)([(0,v.MZ)()],Cc.prototype,"_tooltipReferenceMap",void 0),(0,t._)([(0,v.MZ)()],Cc.prototype,"_focusRootFlowItem",void 0),(0,t._)([(0,v.MZ)()],Cc.prototype,"_focusPanelFlowItem",void 0),(0,t._)([(0,v.MZ)()],Cc.prototype,"_dragEnabled",null),(0,t._)([(0,v.MZ)()],Cc.prototype,"_filterEnabled",null),(0,t._)([(0,v.MZ)()],Cc.prototype,"collapsed",void 0),(0,t._)([(0,v.MZ)()],Cc.prototype,"dragEnabled",void 0),(0,t._)([(0,v.MZ)()],Cc.prototype,"filterPlaceholder",void 0),(0,t._)([(0,v.MZ)()],Cc.prototype,"filterText",void 0),(0,t._)([(0,v.MZ)()],Cc.prototype,"headingLevel",void 0),(0,t._)([(0,v.MZ)()],Cc.prototype,"icon",void 0),(0,t._)([(0,v.MZ)()],Cc.prototype,"iconClass",void 0),(0,t._)([(0,v.MZ)()],Cc.prototype,"label",null),(0,t._)([(0,v.MZ)()],Cc.prototype,"listItemCanGiveFunction",void 0),(0,t._)([(0,v.MZ)()],Cc.prototype,"listItemCanReceiveFunction",void 0),(0,t._)([(0,v.MZ)()],Cc.prototype,"listItemCreatedFunction",null),(0,t._)([(0,v.MZ)(),(0,jo.G)("esri/widgets/LayerList/t9n/LayerList")],Cc.prototype,"messages",void 0),(0,t._)([(0,v.MZ)(),(0,jo.G)("esri/t9n/common")],Cc.prototype,"messagesCommon",void 0),(0,t._)([(0,v.MZ)()],Cc.prototype,"minDragEnabledItems",void 0),(0,t._)([(0,v.MZ)()],Cc.prototype,"minFilterItems",void 0),(0,t._)([(0,v.MZ)()],Cc.prototype,"multipleSelectionEnabled",null),(0,t._)([(0,v.MZ)()],Cc.prototype,"operationalItems",null),(0,t._)([(0,v.MZ)()],Cc.prototype,"selectionEnabled",null),(0,t._)([(0,v.MZ)()],Cc.prototype,"selectedItems",void 0),(0,t._)([(0,v.MZ)()],Cc.prototype,"selectionMode",void 0),(0,t._)([(0,v.MZ)()],Cc.prototype,"view",null),(0,t._)([(0,Rl.U)("trigger-action"),(0,v.MZ)({type:Sc})],Cc.prototype,"viewModel",void 0),(0,t._)([(0,v.MZ)()],Cc.prototype,"visibilityAppearance",void 0),(0,t._)([(0,v.MZ)({type:Ec,nonNullable:!0})],Cc.prototype,"visibleElements",void 0),Cc=(0,t._)([(0,b.$)("esri.widgets.LayerList")],Cc);const kc=Cc;var Nc=n(21083),Lc=n(94622),Oc=n(87743),Rc=n(3438),Pc=n(34670),Dc=n(11682),Fc=n(78978),jc=n(87327),Zc=n(2252),zc=n(19541),Uc=n(1277),Vc=n(92750),Gc=n(29458),Bc=n(3130),$c=n(80507),Hc=n(93617),qc=n(51879),Wc=n(49982),Kc=n(46984),Yc=n(80189),Jc=n(51216),Xc=n(57179),Qc=n(53981),eh=n(96383);let th=class extends k.A{get layerView(){return this.view?.allLayerViews?.find((e=>e.layer===this.layer))}get valid(){return this._valid}get subtypeFilter(){const{layer:e,snappingSource:t}=this;if(!(0,R.F2)(e)||!e.subtypes?.length)return{mode:"not-in-use",filter:null};const i=t.layerSource.sublayerSources.filter((e=>e.enabled&&e.layer.visible&&(0,eh.JU)(this.view?.scale,e.layer.effectiveScaleRange.minScale,e.layer.effectiveScaleRange.maxScale))).map((e=>e.layer.subtypeCode));if(!i.length)return{mode:"none-visible",filter:null};if(i.length===e.subtypes.length)return{mode:"all-visible",filter:null};const r=e.fieldsIndex.get(e.subtypeField)?.name??e.subtypeField;return 1===i.length?{mode:"in-use",filter:`${r} = ${i.getItemAt(0)}`}:{mode:"in-use",filter:`${r} IN (${i.join(", ")})`}}get floorFilter(){const{view:e,layer:t}=this;return e&&t?(0,Xc.E)({view:e,layer:t}):null}constructor(e){super(e),this.rulesTable=null,this._valid=!1}initialize(){if(!this.snappingSource||!this.layer)return;const{layer:e,snappingSource:t}=this;if("refresh"in e){const i=e;this.addHandles(i.on("refresh",(()=>t.refresh())))}this.loadRules(),this.addHandles([(0,q.wB)((()=>t.updating),(e=>t.layerSource.updating=e),q.pc),(0,q.wB)((()=>t.availability),(e=>t.layerSource.availability=e),q.pc)])}getFetchCandidatesParameters(e,t,i){if(!this.valid)return[];const{layer:r,layerView:n,floorFilter:s,rulesTable:o,subtypeFilter:a}=this,l={distance:i,mode:this.view?.type??"2d",point:e,coordinateHelper:t.coordinateHelper,...this._types,filter:n&&"filter"in n?n.filter:null};if(s&&(l.filter=ih(l.filter,s)),"not-in-use"!==a.mode&&"all-visible"!==a.mode){if("none-visible"===a.mode)return[];l.filter?l.filter.where=(0,Yc.m)(l.filter.where,a.mode):l.filter=new Jc.A({where:a.filter})}const c=t.feature,h="subtype-sublayer"===c?.sourceLayer?.type?c.sourceLayer.parent:c?.sourceLayer;if(o&&c&&(0,Qc.Tu)(this.view?.map)&&((0,R.yZ)(r)||(0,R.F2)(r))&&r.layerId&&((0,R.yZ)(h)||(0,R.F2)(h))&&this.view.map.utilityNetworks?.find((e=>e.isUtilityLayer(h)))){if("loaded"!==o.loadStatus)return[];const e=[],t=r.layerId,i=o.getFeatureSQL(h,c)?.[t];if(!i)return[];const n=i.anyVertex;let s=i.endVertex;return s&&n&&s===n&&(s=""),s&&e.push({...l,returnEdge:!1,vertexMode:"ends",filter:ih(l.filter,s)}),n&&e.push({...l,returnEdge:!1,vertexMode:"all",filter:ih(l.filter,n)}),e}return[l]}async loadRules(){const{layer:e,view:t}=this;if(e&&t&&(0,Qc.Tu)(t?.map)&&((0,R.yZ)(e)||(0,R.F2)(e))){const i=t.map.utilityNetworks?.find((t=>t.isUtilityLayer(e)));if(i)try{this.rulesTable=await i.getRulesTable(),await(this.rulesTable?.load())}catch(t){return void y.A.getLogger("esri.views.interactive.snapping.FeatureSnappingSourceInfo").error("Failed to load rules table for snapping source",e.title)}}this._valid=!0}get _types(){return{returnEdge:!0,vertexMode:"all"}}remove(){this.destroy()}destroy(){this.snappingSource?.destroy()}};function ih(e,t){return null==e?new Jc.A({where:t}):e.where?new Jc.A({where:(0,Yc.m)(e.where,t)}):new Jc.A({where:t})}(0,t._)([(0,v.MZ)({constructOnly:!0})],th.prototype,"layer",void 0),(0,t._)([(0,v.MZ)({constructOnly:!0})],th.prototype,"snappingSource",void 0),(0,t._)([(0,v.MZ)({constructOnly:!0})],th.prototype,"view",void 0),(0,t._)([(0,v.MZ)()],th.prototype,"layerView",null),(0,t._)([(0,v.MZ)()],th.prototype,"rulesTable",void 0),(0,t._)([(0,v.MZ)()],th.prototype,"valid",null),(0,t._)([(0,v.MZ)()],th.prototype,"subtypeFilter",null),(0,t._)([(0,v.MZ)()],th.prototype,"floorFilter",null),(0,t._)([(0,v.MZ)()],th.prototype,"_valid",void 0),th=(0,t._)([(0,b.$)("esri.views.interactive.snapping.FeatureSnappingSourceInfo")],th);var rh,nh=n(88515),sh=n(62453),oh=n(86876),ah=n(15462),lh=n(56142),ch=n(43457);class hh extends ah.C{constructor({targetPoint:e,constraint:t,previousVertex:i,otherVertex:r,otherVertexType:n,objectId:s,isDraped:o}){super(e,t,o,Wc.n.SELF),this.previousVertex=i,this.otherVertex=r,this.otherVertexType=n,this.objectId=s}get hints(){const e=this.previousVertex,t=this.otherVertexType===rh.CENTER?this.otherVertex:this.targetPoint,i=this.otherVertexType===rh.CENTER?this.targetPoint:this.otherVertex;return[new lh.c(Qc.H3.TARGET,t,i,this.isDraped,this.domain),new lh.c(Qc.H3.REFERENCE,e,t,this.isDraped,this.domain),new ch.l(this.previousVertex,t,i,this.isDraped,this.domain)]}}!function(e){e[e.NEXT=0]="NEXT",e[e.CENTER=1]="CENTER"}(rh||(rh={}));var uh=n(5073);let ph=class extends k.A{get updating(){return this._snappingSources.some((e=>null==e||e.valid&&e.snappingSource.updating))||this._updatingHandles.updating}constructor(e){super(e),this.options=null,this._domain=Wc.n.FEATURE,this._updatingHandles=new mi.U,this._sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null},notes:{module:null,loader:null},scene:{module:null,loader:null}}}initialize(){const e=(0,q.lZ)((()=>this.options?._effectiveFeatureSources),((e,t)=>this._createSourceInfo(e,t)));this._snappingSources=e,this.addHandles((0,Pi.DQ)(e))}destroy(){this._set("options",null),this._updatingHandles.destroy()}async fetchCandidates(e,t,i,r){if(!(t&this._domain&&null!=this.options&&this.options.effectiveFeatureEnabled))return[];const n=[],s=this._computeScreenSizeDistanceParameters(e,i);for(const t of this._snappingSources){if(null==t||!t.valid||!t.snappingSource.layerSource.enabled||t.layerView?.suspended)continue;const o=t.getFetchCandidatesParameters(e,i,s);for(const e of o)n.push(t.snappingSource.fetchCandidates(e,r).then((e=>e.filter((e=>!this._candidateIsExcluded(t.snappingSource,e,i.excludeFeature))))))}const o=(await(0,g.nA)(n)).flat();return this._addRightAngleCandidates(o,e,s,i),(0,g.Te)(r),(0,Qc.xX)(e,o),o}_addRightAngleCandidates(e,t,i,r){const n=null!=r.vertexHandle?r.vertexHandle.rightEdge?.rightVertex?.pos:null!=r.editGeometryOperations&&"polygon"===r.editGeometryOperations.data.type?r.editGeometryOperations.data.components[0]?.getFirstVertex()?.pos:null,s=null!=r.vertexHandle?r.vertexHandle.leftEdge?.leftVertex?.pos:null!=r.editGeometryOperations?r.editGeometryOperations.data.components[0]?.getLastVertex()?.pos:null,{view:o}=this,a=(0,Hc.Lp)(n,o,r),l=(0,Hc.Lp)(s,o,r),c=e.length;for(let r=0;r<c;r++)this._addRightAngleCandidate(e[r],l,t,i,e),this._addRightAngleCandidate(e[r],a,t,i,e)}_addRightAngleCandidate(e,t,i,r,n){if(null==t||!function(e){return(e instanceof sh.z||e instanceof nh.X)&&!function({constraint:{start:e,end:t}}){const i=(0,ns.a)(e,t),r=(0,yn.hG)((0,Hc.Xz)(e),(0,Hc.Xz)(t));return i<(0,On.FD)()||r/i<mh}(e)}(e))return;const s=e.constraint.closestTo(t),o=(s[0]-i[0])/r.x,a=(s[1]-i[1])/r.y,{start:l,end:c}=e.constraint;if(o*o+a*a<=1){const i=new hh({targetPoint:s,otherVertex:t,otherVertexType:rh.NEXT,previousVertex:(0,yn.hG)((0,Hc.Xz)(s),(0,Hc.Xz)(l))>(0,yn.hG)((0,Hc.Xz)(s),(0,Hc.Xz)(c))?l:c,constraint:new Kc.FX(t,s),objectId:e.objectId,isDraped:e.isDraped});n.push(i)}}_computeScreenSizeDistanceParameters(e,t){let i=null!=this.options?this.options.distance*("touch"===t.pointer?this.options.touchSensitivityMultiplier:1):0;return null==this.view?{x:i,y:i,z:i,distance:i}:"2d"===this.view.type?(i*=this.view.resolution,{x:i,y:i,z:i,distance:i}):this._computeScreenSizeDistanceParameters3D(e,i,this.view,t)}_computeScreenSizeDistanceParameters3D(e,t,i,r){const{spatialReference:n}=r;i.renderCoordsHelper.toRenderCoords(e,n,fh);const s=i.state.camera.computeScreenPixelSizeAt(fh),o=s*i.renderCoordsHelper.unitInMeters,a=o/(0,$a.GA)(n),l=o/(0,$a.G9)(n),c=t*a,h=t*l,u=(0,uh.jq)(e,n,zc.qt,i),p=u?dh(u,e,a,0,0,i,r):0,d=u?dh(u,e,0,a,0,i,r):0,f=u?dh(u,e,0,0,l,i,r):0;return{x:0===p?0:c/p,y:0===d?0:c/d,z:0===f?0:h/f,distance:s*t}}_candidateIsExcluded(e,t,i){if(null==i)return!1;const r=this._getCandidateObjectId(t);if(null==r)return!1;const n=e.layerSource.layer;return"graphics"===n.type?i.uid===r:i.sourceLayer===n&&!(!i.attributes||!("objectIdField"in n))&&i.attributes[n.objectIdField]===r}_getCandidateObjectId(e){return e instanceof oh.w?e.objectId:null}async _createSourceInfo(e,t){const i=e.layer;i.loaded||(await i.load(),(0,g.Te)(t));const{view:r}=this,n=await this._createFeatureSnappingSourceType(e);return(0,g.Te)(t),new th(null==n?{}:{snappingSource:n,view:r,layer:i})}async _createFeatureSnappingSourceType(e){switch(e.layer.type){case"feature":case"geojson":case"csv":case"oriented-imagery":case"subtype-group":case"wfs":return this._createFeatureSnappingSourceFeatureLayer(e);case"graphics":return this._createFeatureSnappingSourceGraphicsLayer(e);case"map-notes":return this._createFeatureSnappingSourceMapNotesLayer(e);case"scene":case"building-scene":return this._createFeatureSnappingSourceSceneLayer(e)}return null}async _createFeatureSnappingSourceSceneLayer(e){const{view:t}=this;return null==t||"3d"!==t.type?null:new((await this._getSourceModule("scene")).SceneLayerSnappingSource)({layerSource:e,view:t})}async _createFeatureSnappingSourceFeatureLayer(e){switch(e.layer.source?.type){case"feature-layer":case"oriented-imagery":return new((await this._getSourceModule("featureService")).FeatureServiceSnappingSource)({spatialReference:this.spatialReference,view:this.view,layerSource:e});case"memory":case"csv":case"geojson":case"wfs":return"mesh"===e.layer.geometryType?null:new((await this._getSourceModule("featureCollection")).FeatureCollectionSnappingSource)({layerSource:e,view:this.view})}return null}async _createFeatureSnappingSourceGraphicsLayer(e){return new((await this._getSourceModule("graphics")).GraphicsSnappingSource)({getGraphicsLayers:()=>[e.layer],spatialReference:this.spatialReference,view:this.view,layerSource:e})}async _createFeatureSnappingSourceMapNotesLayer(e){return new((await this._getSourceModule("notes")).GraphicsSnappingSource)({getGraphicsLayers:()=>e.layer.sublayers?.toArray()??[],spatialReference:this.spatialReference,view:this.view,layerSource:e})}async _getSourceModule(e){const t=this._sourceModules[e];if(null==t.loader){const t=this._loadSourceModule(e),i={module:null,loader:t};this._sourceModules[e]=i;const r=await t,n={module:r,loader:t};return this._sourceModules[e]=n,r}return null==t.module?t.loader:t.module}_loadSourceModule(e){const t=this._updatingHandles;switch(e){case"featureService":return t.addPromise(n.e(911).then(n.bind(n,70911)));case"featureCollection":return t.addPromise(n.e(6250).then(n.bind(n,16250)));case"graphics":case"notes":return t.addPromise(Promise.all([n.e(1924),n.e(6984),n.e(8310),n.e(2446),n.e(1582),n.e(6529)]).then(n.bind(n,86529)));case"scene":return t.addPromise(Promise.all([n.e(4197),n.e(3651),n.e(9545)]).then(n.bind(n,79545)))}}get test(){return{snappingSources:this._snappingSources}}};function dh(e,t,i,r,n,s,{spatialReference:o}){const a=(0,ns.c)(yh,t);a[0]+=i,a[1]+=r,a[2]+=n;const l=(0,uh.jq)(a,o,zc.qt,s);return l?(0,Qc.Mo)(l,e):1/0}(0,t._)([(0,v.MZ)({constructOnly:!0})],ph.prototype,"spatialReference",void 0),(0,t._)([(0,v.MZ)({constructOnly:!0})],ph.prototype,"view",void 0),(0,t._)([(0,v.MZ)()],ph.prototype,"options",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],ph.prototype,"updating",null),(0,t._)([(0,v.MZ)()],ph.prototype,"_snappingSources",void 0),ph=(0,t._)([(0,b.$)("esri.views.interactive.snapping.FeatureSnappingEngine")],ph);const fh=(0,Ba.vt)(),yh=(0,Ba.vt)(),mh=1e-4;var gh=n(80575),vh=n(7743);class _h{constructor(e,t){this.view=e,this.options=t,this.squaredShortLineThreshold=qc.N.shortLineThreshold*qc.N.shortLineThreshold}snap(e,t){return null!=t.vertexHandle?"vertex"!==t.vertexHandle.type?[]:this.snapExistingVertex(e,t):this.snapNewVertex(e,t)}edgeExceedsShortLineThreshold(e,t){return this.exceedsShortLineThreshold((0,Hc.Lp)(e.leftVertex.pos,this.view,t),(0,Hc.Lp)(e.rightVertex.pos,this.view,t),t)}exceedsShortLineThreshold(e,t,{spatialReference:i}){return 0===this.squaredShortLineThreshold||(0,Qc.pM)((0,uh.jq)(t,i,zc.qt,this.view),(0,uh.jq)(e,i,zc.qt,this.view))>this.squaredShortLineThreshold}isVertical(e,t,{spatialReference:i}){const r=(0,$a.GA)(i);return(0,yn.Io)((0,Hc.Xz)(e),(0,Hc.Xz)(t))*r<qc.N.verticalLineThresholdMeters}squaredProximityThreshold(e){return"touch"===e?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:t}=this.options,i=e*t;return i*i}}class bh extends ah.C{constructor({lineStart:e,lineEnd:t,targetPoint:i,isDraped:r}){super(i,new Kc.WG(e,t),r,Wc.n.SELF),this._referenceLineHint=new lh.c(Qc.H3.REFERENCE_EXTENSION,e,t,r,this.domain)}get hints(){return[this._referenceLineHint,new lh.c(Qc.H3.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.isDraped,this.domain)]}_lineEndClosestToTarget(){return this.constraint.closestEndTo(this.targetPoint)}}var wh=n(96871),Mh=n(1186),Th=n(95376),Sh=n(4215);class Ah extends _h{snapNewVertex(e,t){const i=t.editGeometryOperations.data.components[0],r=i.edges.length,n=[];if(r<1)return n;const{spatialReference:s}=t,o=(0,uh.jq)(e,s,zc.qt,this.view),{view:a}=this,l=i.edges[r-1];let c=l;do{if(this.edgeExceedsShortLineThreshold(c,t)){const i=(0,Qc.is)(c,a,t);this._processCandidateProposal(i.left,i.right,e,o,t,n)}c=c.leftVertex.leftEdge}while(c&&c!==l);return n}snapExistingVertex(e,t){const i=[],r=t.vertexHandle,n=r.component;if(n.edges.length<2)return i;const{view:s}=this,{spatialReference:o}=t,a=(0,uh.jq)(e,o,zc.qt,s),l=r.leftEdge,c=r.rightEdge;l&&c&&this.edgeExceedsShortLineThreshold(l,t)&&this.edgeExceedsShortLineThreshold(c,t)&&this._processCandidateProposal((0,Hc.Lp)(l.leftVertex.pos,s,t),(0,Hc.Lp)(c.rightVertex.pos,s,t),e,a,t,i);const h=n.edges[0];let u=h;do{if(u!==r.leftEdge&&u!==r.rightEdge&&this.edgeExceedsShortLineThreshold(u,t)){const r=(0,Qc.is)(u,s,t);this._processCandidateProposal(r.left,r.right,e,a,t,i)}u=u.rightVertex.rightEdge}while(u&&u!==h);return i}_processCandidateProposal(e,t,i,r,n,s){const{spatialReference:o,pointer:a}=n,l=(0,Ba.vt)();this._projectedLine(l,e,t,i,n);const c=(0,Hc._7)(l);(0,Qc.pM)(r,(0,uh.jq)(c,o,zc.qt,this.view))<this.squaredProximityThreshold(a)&&s.push(new bh({lineStart:e,lineEnd:t,targetPoint:c,isDraped:"on-the-ground"===n.elevationInfo?.mode}))}_projectedLine(e,t,i,r,n){this._projectToLineGeodesic(e,t,i,r,n)||this._projectToLinePlanar(e,r,t,i)}_projectToLineGeodesic(e,t,i,r,{spatialReference:n}){const s=(0,wh.IP)(t,i,n,n);if(null==s)return!1;const o=(0,wh.IP)(i,r,n,n);if(null==o)return!1;const a=(0,Mh.n3)(i,r,n);if(null==a)return!1;const l=Math.abs(gh.wf.shortestSignedDiff(s,o))>Math.PI/2?gh.uC.normalize(s+Math.PI):s;return(0,wh.rT)(e,i,n,(0,vh.l3)(a,"meters"),(0,vh.Wq)(l,"radians","geographic"),"geodesic"),e[2]=r[2],!0}_projectToLinePlanar(e,t,i,r){(0,Th.Yv)(t,{start:i,end:r,type:Sh.Vv.LINE},e),e[2]=t[2]}}var Eh=n(27411);class xh extends ah.C{constructor({referenceLine:e,lineStart:t,targetPoint:i,isDraped:r}){const n=(0,Ba.o8)(t),{left:s,right:o}=e;(0,ns.f)(n,(0,ns.g)(n,n,o),s),super(i,new Kc.WG(t,(0,Hc._7)(n)),r,Wc.n.SELF),this._referenceLines=[{edge:e,fadeLeft:!0,fadeRight:!0}]}get hints(){return[new lh.c(Qc.H3.TARGET,this.constraint.start,this.targetPoint,this.isDraped,this.domain),new Eh.r(this.constraint.start,this.targetPoint,this.isDraped,this.domain),...this._referenceLines.map((e=>new lh.c(Qc.H3.REFERENCE,e.edge.left,e.edge.right,this.isDraped,this.domain,e.fadeLeft,e.fadeRight)))]}addReferenceLine(e){const t={edge:e,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach((i=>{(0,ns.j)(e.right,i.edge.left)&&(i.fadeLeft=!1,t.fadeRight=!1),(0,ns.j)(e.right,i.edge.right)&&(i.fadeRight=!1,t.fadeRight=!1),(0,ns.j)(e.left,i.edge.right)&&(i.fadeRight=!1,t.fadeLeft=!1),(0,ns.j)(e.left,i.edge.left)&&(i.fadeLeft=!1,t.fadeLeft=!1)})),this._referenceLines.push(t)}}class Ih extends _h{snapNewVertex(e,t){const i=t.editGeometryOperations.data.components[0],r=i.edges.length,n=i.vertices.length,s=[];if(r<2)return s;const{view:o}=this,a=(0,uh.jq)(e,t.spatialReference,zc.qt,o),l=(0,Hc.Lp)(i.vertices[n-1].pos,o,t),c=(0,Hc.Lp)(i.vertices[0].pos,o,t),h=i.edges[r-1];let u=h;do{if(this.edgeExceedsShortLineThreshold(u,t)){const i=(0,Qc.is)(u,o,t);this._checkEdgeForParallelLines(i,l,e,a,t,s),this._checkEdgeForParallelLines(i,c,e,a,t,s)}u=u.leftVertex.leftEdge}while(u&&u!==h);return s}snapExistingVertex(e,t){const i=[],r=t.vertexHandle,n=r.component;if(n.edges.length<3)return i;const{view:s}=this,o=(0,uh.jq)(e,t.spatialReference,zc.qt,s),a=r.leftEdge,l=r.rightEdge,c=n.vertices[0],h=(0,Hc.Lp)(c.pos,s,t),u=n.vertices.length,p=n.vertices[u-1],d=(0,Hc.Lp)(p.pos,s,t),f=n.edges[0];let y=f;do{if(y!==a&&y!==l&&this.edgeExceedsShortLineThreshold(y,t)){const n=(0,Qc.is)(y,s,t);a&&this._checkEdgeForParallelLines(n,(0,Hc.Lp)(a.leftVertex.pos,s,t),e,o,t,i),l&&this._checkEdgeForParallelLines(n,(0,Hc.Lp)(l.rightVertex.pos,s,t),e,o,t,i),r===c?this._checkEdgeForParallelLines(n,d,e,o,t,i):r===p&&this._checkEdgeForParallelLines(n,h,e,o,t,i)}y=y.rightVertex.rightEdge}while(y&&y!==f);return i}_checkEdgeForParallelLines(e,t,i,r,n,s){const o=e.left,a=e.right;if((0,Sh.fg)(Ch,(0,Hc.Xz)(t),(0,Hc.Xz)(o),(0,Hc.Xz)(a)),(0,yn.hG)(Ch,(0,Hc.Xz)(t))<qc.N.parallelLineThreshold)return;(0,Sh.fg)(Ch,(0,Hc.Xz)(i),(0,Hc.Xz)(o),(0,Hc.Xz)(a),(0,Hc.Xz)(t));const{spatialReference:l,pointer:c}=n,h=(0,Hc.fA)(Ch[0],Ch[1],i[2]);if((0,Qc.pM)(r,(0,uh.jq)(h,l,zc.qt,this.view))<this.squaredProximityThreshold(c)){if(this.isVertical(h,t,n)||this.isVertical(o,a,n))return;if(this._parallelToPreviousCandidate(e,s))return;s.push(new xh({referenceLine:e,lineStart:t,targetPoint:h,isDraped:"on-the-ground"===n.elevationInfo?.mode}))}}_parallelToPreviousCandidate(e,t){const i=e.left,r=e.right;for(const n of t)if((0,Sh.fg)(Ch,(0,Hc.Xz)(r),(0,Hc.Xz)(n.constraint.start),(0,Hc.Xz)(n.constraint.end),(0,Hc.Xz)(i)),(0,yn.hG)(Ch,(0,Hc.Xz)(r))<qc.N.parallelLineThreshold)return n.addReferenceLine(e),!0;return!1}}const Ch=(0,Ln.vt)();class kh extends _h{snapNewVertex(e,t){const i=t.editGeometryOperations.data.components[0],r=[];if(i.vertices.length<2)return r;const{view:n}=this,s=(0,uh.jq)(e,t.spatialReference,zc.qt,n),o=i.vertices.at(-1);this._checkForSnappingCandidate(r,o.leftEdge,o,o.leftEdge.leftVertex,e,s,t);const a=i.vertices[0];return this._checkForSnappingCandidate(r,a.rightEdge,a,a.rightEdge.rightVertex,e,s,t),r}snapExistingVertex(e,t){const i=[],r=t.vertexHandle;if(r.component.vertices.length<3)return i;const{view:n}=this,s=(0,uh.jq)(e,t.spatialReference,zc.qt,n),o=r.leftEdge,a=r.rightEdge;if(o?.leftVertex.leftEdge){const r=o.leftVertex.leftEdge;this._checkForSnappingCandidate(i,r,r.rightVertex,r.leftVertex,e,s,t)}if(a?.rightVertex.rightEdge){const r=a.rightVertex.rightEdge;this._checkForSnappingCandidate(i,r,r.leftVertex,r.rightVertex,e,s,t)}return i}_checkForSnappingCandidate(e,t,i,r,n,s,o){if(!this.edgeExceedsShortLineThreshold(t,o))return;const a=this.view,l=(0,Hc.Lp)(i.pos,a,o),c=(0,Hc.Lp)(r.pos,a,o);this._checkForSnappingCandidateNormalized(e,c,l,n,s,o)}_checkForSnappingCandidateNormalized(e,t,i,r,n,s){this._projectionRay(Lh,t,i,r,s),this._checkForSnappingCandidateAlongProjectedRay(e,t,i,Lh,r,n,s)}_projectionRay(e,t,i,r,n){this._projectionRayGeodesic(e,t,i,r,n)||this._projectionRayPlanar(e,t,i)}_projectionRayGeodesic(e,t,i,r,{spatialReference:n}){const s=(0,wh.IP)(t,i,n,n);if(null==s)return!1;const o=(0,wh.IP)(i,r,n,n);if(null==o)return!1;const a=Math.sign(gh.uC.shortestSignedDiff(s,o))*Math.PI*.5,l=(0,vh.Wq)(s+a,"radians","geographic"),c=(0,Ba.vt)(),h=(0,Mh.n3)(i,r,n);return null!=h&&((0,wh.rT)(c,i,n,(0,vh.l3)(h,"meters"),l,"geodesic"),(0,ns.f)(e,c,i),!0)}_projectionRayPlanar(e,t,i){const r=(0,yn.Re)(Nh,(0,Hc.Xz)(i),(0,Hc.Xz)(t));(0,ns.s)(e,r[1],-r[0],0)}_checkForSnappingCandidateAlongProjectedRay(e,t,i,r,n,s,o){const{spatialReference:a,pointer:l}=o,c=(0,yn.Re)(Nh,(0,Hc.Xz)(n),(0,Hc.Xz)(i)),h=(0,yn.Om)(r,c)/(0,yn.m3)(r),u=(0,yn.Ln)(Nh,(0,Hc.Xz)(i),r,h),p=(0,Hc.fA)(u[0],u[1],n[2]);if((0,Qc.pM)(s,(0,uh.jq)(p,a,zc.qt,this.view))>this.squaredProximityThreshold(l)||this.isVertical(p,i,o)||this.isVertical(i,t,o))return;const d=(0,ns.r)((0,Ba.vt)(),i,r,Math.sign(h));e.push(new hh({targetPoint:p,constraint:new Kc.FX(i,(0,Hc._7)(d)),previousVertex:t,otherVertex:i,otherVertexType:rh.CENTER,isDraped:"on-the-ground"===o.elevationInfo?.mode}))}}const Nh=(0,Ln.vt)(),Lh=(0,Ba.vt)();class Oh extends ah.C{constructor({targetPoint:e,point1:t,point2:i,isDraped:r}){super(e,new Kc.ej((0,Hc._7)((0,ns.m)((0,Ba.vt)(),t,i,.5)),.5*(0,yn.Io)((0,Hc.Xz)(t),(0,Hc.Xz)(i))),r,Wc.n.SELF),this._p1=t,this._p2=i}get hints(){return[new lh.c(Qc.H3.REFERENCE,this.targetPoint,this._p1,this.isDraped,this.domain),new lh.c(Qc.H3.REFERENCE,this.targetPoint,this._p2,this.isDraped,this.domain),new ch.l(this._p1,this.targetPoint,this._p2,this.isDraped,this.domain)]}}class Rh extends _h{snapNewVertex(e,t){const i=t.editGeometryOperations.data.components[0],r=[],n=i.vertices.length;if("polygon"!==t.editGeometryOperations.data.type||n<2)return r;const{view:s}=this,o=i.vertices[0],a=i.vertices[n-1],l=(0,Hc.Lp)(o.pos,s,t),c=(0,Hc.Lp)(a.pos,s,t);return this._processCandidateProposal(l,c,e,t,r),r}snapExistingVertex(e,t){const i=[],r=t.vertexHandle,n=r.component;if(n.edges.length<2)return i;if("polyline"===t.editGeometryOperations.data.type&&(0===r.index||r.index===n.vertices.length-1))return i;const{view:s}=this,o=(0,Hc.Lp)(r.leftEdge.leftVertex.pos,s,t),a=(0,Hc.Lp)(r.rightEdge.rightVertex.pos,s,t);return this._processCandidateProposal(o,a,e,t,i),i}_processCandidateProposal(e,t,i,r,n){if(!this.exceedsShortLineThreshold(e,t,r))return;const s=(0,yn.Cc)(Ph,(0,Hc.Xz)(e),(0,Hc.Xz)(t),.5),o=.5*(0,yn.Io)((0,Hc.Xz)(e),(0,Hc.Xz)(t)),a=(0,Sh.Dh)(Ph,(0,Hc.Xz)(i),s,o),l=(0,Hc.fA)(a[0],a[1],i[2]),{spatialReference:c,pointer:h}=r,u=(0,uh.jq)(i,c,zc.qt,this.view);if((0,Qc.pM)(u,(0,uh.jq)(l,c,zc.qt,this.view))<this.squaredProximityThreshold(h)){if(this.isVertical(e,l,r)||this.isVertical(l,t,r))return;n.push(new Oh({targetPoint:l,point1:e,point2:t,isDraped:"on-the-ground"===r.elevationInfo?.mode}))}}}const Ph=(0,Ln.vt)();let Dh=class extends k.A{constructor(e){super(e),this.updating=!1,this._snappers=new a.A,this._domain=Wc.n.SELF}initialize(){this._snappers.push(new Ih(this.view,this.options),new Ah(this.view,this.options),new kh(this.view,this.options),new Rh(this.view,this.options))}set options(e){this._set("options",e);for(const t of this._snappers)t.options=e}async fetchCandidates(e,t,i){if(!(t&this._domain&&this.options.effectiveSelfEnabled))return[];const r=[];for(const t of this._snappers.items)for(const n of t.snap(e,i))r.push(n);return(0,Qc.xX)(e,r),r}};function Fh(e,t){return[new Dh({view:e,options:t}),new ph({view:e,options:t,spatialReference:e.spatialReference})]}(0,t._)([(0,v.MZ)({readOnly:!0})],Dh.prototype,"updating",void 0),(0,t._)([(0,v.MZ)({constructOnly:!0})],Dh.prototype,"view",void 0),(0,t._)([(0,v.MZ)()],Dh.prototype,"options",null),Dh=(0,t._)([(0,b.$)("esri.views.interactive.snapping.SelfSnappingEngine")],Dh);let jh=class extends k.A{constructor(e){super(e),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1,this.sublayerSources=new a.A}};(0,t._)([(0,v.MZ)({constructOnly:!0})],jh.prototype,"layer",void 0),(0,t._)([(0,v.MZ)()],jh.prototype,"enabled",void 0),(0,t._)([(0,v.MZ)()],jh.prototype,"updating",void 0),(0,t._)([(0,v.MZ)()],jh.prototype,"availability",void 0),(0,t._)([(0,v.MZ)()],jh.prototype,"sublayerSources",void 0),jh=(0,t._)([(0,b.$)("esri.views.interactive.snapping.FeatureSnappingLayerSource")],jh);const Zh=jh;let zh=class extends k.A{constructor(e){super(e),this.enabled=!1,this.enabledToggled=!1,this.forceDisabled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.featureSources=new a.A,this.distance=qc.N.distance,this.touchSensitivityMultiplier=qc.N.touchSensitivityMultiplier,this.constraintsActive=!1}get effectiveEnabled(){return!this.forceDisabled&&(this.enabledToggled?!this.enabled:this.enabled)}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}get _effectiveFeatureSources(){const e=this.featureSources;e.some(Vh)&&y.A.getLogger(this).warnOnce("Do not configure SubtypeGroupLayer sources in SnappingOptions.featureSources directly. Create a FeatureSnappingLayerSource for each SubtypeSublayer.");const t=e.filter(Bh),i=this._get("_effectiveFeatureSources")?.filter(Vh)??new a.A;for(const e of t){const t=i.find((t=>t.layer===e.layer.parent));if(t)t.sublayerSources.includes(e)||t.sublayerSources.add(e);else if(e.layer.parent){const t=new Zh({layer:e.layer.parent});t.sublayerSources.add(e),i.add(t)}}for(const e of i){const i=e.sublayerSources.filter((e=>!t.includes(e)));e.sublayerSources.removeMany(i)}i.removeMany(i.filter((e=>0===e.sublayerSources.length)));const r=e.filter(Gh),n=this._get("_effectiveFeatureSources")??new a.A,{added:s,removed:o}=(0,B.iv)(n.toArray(),[...r,...i]);return n.removeMany(o),n.addMany(s),n}};(0,t._)([(0,v.MZ)()],zh.prototype,"enabled",void 0),(0,t._)([(0,v.MZ)()],zh.prototype,"enabledToggled",void 0),(0,t._)([(0,v.MZ)()],zh.prototype,"forceDisabled",void 0),(0,t._)([(0,v.MZ)()],zh.prototype,"selfEnabled",void 0),(0,t._)([(0,v.MZ)()],zh.prototype,"featureEnabled",void 0),(0,t._)([(0,v.MZ)({type:a.A.ofType(Zh)})],zh.prototype,"featureSources",void 0),(0,t._)([(0,v.MZ)()],zh.prototype,"distance",void 0),(0,t._)([(0,v.MZ)()],zh.prototype,"touchSensitivityMultiplier",void 0),(0,t._)([(0,v.MZ)()],zh.prototype,"constraintsActive",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],zh.prototype,"effectiveEnabled",null),(0,t._)([(0,v.MZ)({readOnly:!0})],zh.prototype,"effectiveSelfEnabled",null),(0,t._)([(0,v.MZ)({readOnly:!0})],zh.prototype,"effectiveFeatureEnabled",null),(0,t._)([(0,v.MZ)({readOnly:!0})],zh.prototype,"_effectiveFeatureSources",null),zh=(0,t._)([(0,b.$)("esri.views.interactive.snapping.SnappingOptions")],zh);const Uh=zh;function Vh(e){return"subtype-group"===e.layer.type}function Gh(e){return"subtype-group"!==e.layer.type}function Bh(e){return"subtype-sublayer"===e.layer.type}var $h=n(46997);class Hh extends ah.C{constructor(e,t,i,r){super(e,new Kc.i7(e),r,Wc.n.ALL),this.first=t,this.second=i}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new $h.v(this.targetPoint,this.isDraped,this.domain)]}}let qh=class extends(L.A.EventedMixin(k.A)){constructor(e){super(e),this.options=new Uh,this.snappingEnginesFactory=Fh,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=Wh.MAIN}initialize(){this.addHandles([(0,q.wB)((()=>{const{effectiveFeatureEnabled:e,effectiveSelfEnabled:t,touchSensitivityMultiplier:i,distance:r,constraintsActive:n}=this.options;return{effectiveFeatureEnabled:e,effectiveSelfEnabled:t,touchSensitivityMultiplier:i,distance:r,constraintsActive:n}}),(()=>{this.doneSnapping(),this.emit("changed")}),q.OH),(0,q.wB)((()=>this.options),(e=>{for(const t of this._engines)t.options=e}),q.OH),(0,q.wB)((()=>({viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,snappingEnginesFactory:this.snappingEnginesFactory})),(({viewReady:e,snappingEnginesFactory:t})=>this._recreateEngines(e,t)),q.pc)])}destroy(){this._destroyEngines()}get updating(){return this._engines.some((e=>e.updating))}_recreateEngines(e,t){if(this._destroyEngines(),!e)return;const{view:i,options:r}=this;this._engines=t(i,r)}_destroyEngines(){for(const e of this._engines)e.destroy();this._engines=[]}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:t}=this.options,i=e*t;return i*i}get _squaredSatisfiesConstraintThreshold(){return qc.N.satisfiesConstraintScreenThreshold*qc.N.satisfiesConstraintScreenThreshold}snap(e){return function(e){return null!=e.scenePoint}(e)?this._snapMultiPoint(e):this._snapSinglePoint(e)}update(e){const{point:t,context:i}=e;this._removeVisualization();const r=this._currentMainCandidate;if(null==r)return t;const n=this._selectUpdateInput(e);if(null==n)return t;const{spatialReference:s}=i,o=(0,oi.project)(n,s);if(null==o)return t;const{view:a}=this,{elevationInfo:l,visualizer:c}=i,h=[],u=(0,Hc.vf)(o,a,l),p=r.constraint.closestTo(u);if(!this._arePointsWithinScreenThreshold(u,p,i))return this._resetSnappingState(),t;r.targetPoint=p,h.push(...r.hints);for(const e of this._currentOtherActiveCandidates)e.targetPoint=p,h.push(...e.hints);return null!=c&&this.addHandles(c.draw(h,{spatialReference:s,elevationInfo:Yh(i),view:a,selfSnappingZ:i.selfSnappingZ}),Kh),(0,Hc.xF)(p,a,t,i)}doneSnapping(){this._removeVisualization(),this._resetSnappingState()}_selectUpdateInput({point:e,scenePoint:t}){switch(this._currentSnappedType){case Wh.MAIN:return e;case Wh.SCENE:return t}}_resetSnappingState(){this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=Wh.MAIN}_removeVisualization(){this.removeHandles(Kh)}async _snapSinglePoint({point:e,context:t,signal:i}){const{view:r}=this,{elevationInfo:n}=t,s=(0,Hc.vf)(e,r,n),o=await this._fetchCandidates(s,Wc.n.ALL,t,i);return this._createSnapResult(s,Wh.MAIN,o,r,e,t,i)}async _snapMultiPoint({point:e,scenePoint:t,context:i,signal:r}){const{view:n}=this,{coordinateHelper:s,elevationInfo:o,spatialReference:a}=i;await(0,oi.initializeProjection)(t.spatialReference,a);const l=(0,oi.project)(t,a),c=(0,Hc.vf)(l,n,o),h=await this._fetchCandidates(c,Wc.n.FEATURE,i,r);if(h.length>0){const e=await this._fetchCandidates(c,Wc.n.SELF,i,r);return this._createSnapResult(c,Wh.SCENE,[...h,...e],n,l,i,r)}const u=(0,Hc.vf)(e,n,o),p=await this._fetchCandidates(u,Wc.n.SELF,i,r);return this._createSnapResult(u,Wh.MAIN,p,n,{z:s.hasZ()&&e.hasZ?e.z??0:void 0,m:s.hasM()&&e.hasM?e.m??0:void 0},i,r)}async _fetchCandidates(e,t,i,r){return(await Promise.all(this._engines.map((n=>n.fetchCandidates(e,t,i,r))))).flat()}_createSnapResult(e,t,i,r,n,s,o){return{get valid(){return!(0,g.G4)(o)},apply:()=>{const{spatialReference:o}=s,{snappedPoint:a,hints:l}=this._processCandidates(e,t,i,s);return this._removeVisualization(),null!=s.visualizer&&this.addHandles(s.visualizer.draw(l,{spatialReference:o,elevationInfo:zc.qt,view:r,selfSnappingZ:s.selfSnappingZ}),Kh),(0,Hc.xF)(a,r,n,s)}}}_processCandidates(e,t,i,r){if(i.length<1)return this.doneSnapping(),{snappedPoint:e,hints:[]};this._currentSnappedType!==t&&this._resetSnappingState(),(0,Qc.xX)(e,i);const n=this._currentMainCandidate;if(null!=n){const s=this._findOldConstraintInNewCandidates(n,i);if(s>=0){if(!(i[s]instanceof Hh))return this._intersectWithOtherCandidates(s,i,e,t,r);if(this._arePointsWithinScreenThreshold(e,n.targetPoint,r))return this._updateSnappingCandidate(n,t,i,r)}}return this._intersectWithOtherCandidates(0,i,e,t,r)}_findOldConstraintInNewCandidates(e,t){return e instanceof Hh?this._findOldCandidateIndex(t,e.first)>=0&&this._findOldCandidateIndex(t,e.second)>=0?0:-1:this._findOldCandidateIndex(t,e)}_intersectWithOtherCandidates(e,t,i,r,n){const{coordinateHelper:s}=n,o=t[e],a=[];for(let r=0;r<t.length;++r){if(r===e)continue;const n=t[r],l=o.constraint.intersect(n.constraint);if(l)for(const e of l.closestPoints(o.targetPoint))a.push([new Hh(e,o,n,n.isDraped),this._squaredScreenDistance(i,e,s)])}return a.length>0&&(a.sort(((e,t)=>e[1]-t[1])),a[0][1]<this._squaredPointProximityThreshold(n.pointer))?this._updateSnappingCandidate(a[0][0],r,t,n):this.options.constraintsActive&&(o instanceof bh||o instanceof sh.z||o instanceof hh||o instanceof xh)?{snappedPoint:i,hints:[]}:this._updateSnappingCandidate(o,r,t,n)}_updateSnappingCandidate(e,t,i,r){this.doneSnapping(),this._currentMainCandidate=e,this._currentSnappedType=t;const n=this._currentMainCandidate.targetPoint,s=[];s.push(...e.hints);for(const t of i){if(e instanceof Hh){if(t.constraint.equals(e.first.constraint)||t.constraint.equals(e.second.constraint))continue}else if(t.constraint.equals(e.constraint))continue;const i=t.constraint.closestTo(n);this._squaredScreenDistance(i,n,r.coordinateHelper)<this._squaredSatisfiesConstraintThreshold&&(t.targetPoint=n,this._currentOtherActiveCandidates.push(t),s.push(...t.hints))}return{snappedPoint:n,hints:s}}_squaredPointProximityThreshold(e){return"touch"===e?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}_arePointsWithinScreenThreshold(e,t,i){return this._squaredScreenDistance(e,t,i.coordinateHelper)<this._squaredPointProximityThreshold(i.pointer)}_squaredScreenDistance(e,t,i){return(0,Qc.pM)(this._toScreen(e,i),this._toScreen(t,i))}_toScreen(e,t){return(0,uh.jq)(e,t.spatialReference,zc.qt,this.view)}_findOldCandidateIndex(e,t){let i=-1;for(let r=0;r<e.length;++r)if(t.constraint.equals(e[r].constraint)){i=r;break}return i}get test(){return{visualizationsActive:this.hasHandles(Kh),engines:this._engines}}};var Wh;(0,t._)([(0,v.MZ)({constructOnly:!0})],qh.prototype,"view",void 0),(0,t._)([(0,v.MZ)()],qh.prototype,"options",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],qh.prototype,"updating",null),(0,t._)([(0,v.MZ)()],qh.prototype,"snappingEnginesFactory",void 0),(0,t._)([(0,v.MZ)()],qh.prototype,"_engines",void 0),(0,t._)([(0,v.MZ)()],qh.prototype,"_squaredMouseProximityThreshold",null),(0,t._)([(0,v.MZ)()],qh.prototype,"_squaredTouchProximityThreshold",null),(0,t._)([(0,v.MZ)()],qh.prototype,"_squaredSatisfiesConstraintThreshold",null),qh=(0,t._)([(0,b.$)("esri.views.interactive.snapping.SnappingManager")],qh),function(e){e[e.MAIN=0]="MAIN",e[e.SCENE=1]="SCENE"}(Wh||(Wh={}));const Kh="visualization-handle";function Yh({coordinateHelper:e,elevationInfo:t}){return e.hasZ()?zc.qt:t}var Jh=n(17780);let Xh=class extends L.A.EventedAccessor{constructor(e){super(e),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":case"draw-3d":return this.activeComponent.geometryType;default:(0,c.Xb)(this.activeComponent)}return null}addToHistory(e){this.history.redo=[],this.history.undo.push(e)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this._reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}_reset(){this.activeComponent?.reset()}refreshComponent(){const e=this.activeComponent;e&&("box"!==e.type&&"reshape"!==e.type&&"graphic-mover"!==e.type||e.refresh())}set undo(e){this._set("undo",(()=>{this.canUndo()&&e()}))}set redo(e){this._set("redo",(()=>{this.canRedo()&&e()}))}};(0,t._)([(0,v.MZ)()],Xh.prototype,"activeComponent",void 0),(0,t._)([(0,v.MZ)()],Xh.prototype,"cancelled",void 0),(0,t._)([(0,v.MZ)()],Xh.prototype,"history",void 0),(0,t._)([(0,v.MZ)()],Xh.prototype,"tool",null),(0,t._)([(0,v.MZ)()],Xh.prototype,"type",void 0),(0,t._)([(0,v.MZ)()],Xh.prototype,"canUndo",null),(0,t._)([(0,v.MZ)()],Xh.prototype,"canRedo",null),(0,t._)([(0,v.MZ)()],Xh.prototype,"onEnd",void 0),(0,t._)([(0,v.MZ)()],Xh.prototype,"undo",null),(0,t._)([(0,v.MZ)()],Xh.prototype,"redo",null),(0,t._)([(0,v.MZ)()],Xh.prototype,"toggleTool",void 0),(0,t._)([(0,v.MZ)()],Xh.prototype,"addToSelection",void 0),(0,t._)([(0,v.MZ)()],Xh.prototype,"removeFromSelection",void 0),Xh=(0,t._)([(0,b.$)("esri.widgets.Sketch.support.OperationHandle")],Xh);let Qh=class extends Xh{};(0,t._)([(0,v.MZ)()],Qh.prototype,"activeComponent",void 0),Qh=(0,t._)([(0,b.$)("esri.widgets.Sketch.support.CreateOperationHandle")],Qh);let eu=class extends Xh{};(0,t._)([(0,v.MZ)()],eu.prototype,"activeComponent",void 0),eu=(0,t._)([(0,b.$)("esri.widgets.Sketch.support.UpdateOperationHandle")],eu);var tu=n(68231),iu=n(55736),ru=n(24826),nu=n(56173),su=n(58720);const ou={defaultZ:0},au={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,highlightOptions:{enabled:!0},tool:"transform"};let lu=class extends L.A.EventedAccessor{constructor(e){super(e),this._numUpdating=0,this._defaultSnappingManager=null,this._internalGraphicsLayer=new Dc.A({listMode:"hide",internal:!0,title:"SVM Internal"}),this._operationHandle=null,this._viewHandlesKey="viewHandles",this.activeFillSymbol=null,this.activeLineSymbol=null,this.activeVertexSymbol=null,this.allowDeleteKey=!0,this.layer=null,this.pointSymbol=new tu.A({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new iu.A({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new ru.A({color:[130,130,130,1],width:2}),this.meshSymbol=new nu.A({symbolLayers:new a.A([new su.A])}),this.updateGraphics=new a.A,this.updateOnGraphicClick=!0,this.vertexSymbol=new tu.A({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.sketchOptions=new Bc.A,this._moduleLoaderAbortController=null,this._viewReadyAbortController=null,this._originalPopupEnabled=null,this.defaultCreateOptions=ou,this.defaultUpdateOptions=au,this.snappingOptions=e?.snappingManager?.options??e?.snappingOptions??new Uh}initialize(){this.addHandles([(0,q.on)((()=>this.view?.map?.layers),"change",(e=>{e.removed.includes(this.layer)&&this.cancel()})),(0,q.on)((()=>this.layer?.graphics),"change",(e=>{if(null!=this._operationHandle)for(const t of e.removed)this.updateGraphics.includes(t)&&(this.updateGraphics.length>1?this._operationHandle.removeFromSelection(t):this._operationHandle.cancel())})),(0,q.wB)((()=>this.layer?.elevationInfo??null),(e=>{e!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=e)}),q.pc),(0,q.wB)((()=>this.view),(e=>{this._defaultSnappingManager=(0,m.pR)(this._defaultSnappingManager),e&&(this.snappingManager||(this._defaultSnappingManager=new qh({view:e,options:this.snappingOptions})),"2d"===e.type?Promise.all([n.e(9175),n.e(8295),n.e(4158),n.e(8954)]).then(n.bind(n,98954)):"3d"===e.type&&(Promise.all([n.e(9958),n.e(4197),n.e(9175),n.e(6152),n.e(9728),n.e(8609),n.e(8295),n.e(5596)]).then(n.bind(n,52799)),Promise.all([n.e(9958),n.e(9018),n.e(2644),n.e(4197),n.e(8842),n.e(6152),n.e(9728),n.e(4767),n.e(4010),n.e(8609),n.e(6741),n.e(8083),n.e(679)]).then(n.bind(n,92138))))}),q.pc),(0,q.wB)((()=>this.view?.spatialReference),((e,t)=>{e&&t&&!e.equals(t)&&this.cancel()}))]),(0,Qc.BY)(this)}destroy(){this.cancel(),this._removeDefaultLayer(),this._defaultSnappingManager=(0,m.pR)(this._defaultSnappingManager),this._set("snappingManager",null),this._set("view",null),this.emit("destroy")}get _defaultUpdateTool(){return"3d"===this.view?.type?"move":"transform"}get updating(){return this._numUpdating>0||null!=this.snappingManager&&this.snappingManager.updating}get activeTool(){return this._operationHandle?.tool??null}get activeComponent(){return this._operationHandle?.activeComponent??null}get createGraphic(){return null==this.activeComponent||"draw-3d"!==this.activeComponent.type&&"draw-2d"!==this.activeComponent.type?this._get("createGraphic"):this.activeComponent.graphic}get defaultCreateOptions(){return this._get("defaultCreateOptions")}set defaultCreateOptions(e){this._set("defaultCreateOptions",{...ou,...e})}get defaultUpdateOptions(){return this._get("defaultUpdateOptions")}set defaultUpdateOptions(e){this._set("defaultUpdateOptions",{...au,...e,reshapeOptions:{...au.reshapeOptions,...e?.reshapeOptions},highlightOptions:{...au.highlightOptions,...e?.highlightOptions}})}get labelOptions(){return this.sketchOptions.labels}set labelOptions(e){this.sketchOptions.labels=e}get snappingOptions(){return this.snappingManager?.options??this._get("snappingOptions")}set snappingOptions(e){null!=this._defaultSnappingManager&&(this._defaultSnappingManager.options=e),this._set("snappingOptions",e)}get snappingManager(){return this._isOverridden("snappingManager")&&this._get("snappingManager"),this._defaultSnappingManager}set snappingManager(e){if(e)this._isOverridden("snappingManager")||(this._defaultSnappingManager=(0,m.pR)(this._defaultSnappingManager)),this._override("snappingManager",e);else{const{view:e}=this;!this._defaultSnappingManager&&e&&(this._defaultSnappingManager=new qh({options:this.snappingOptions,view:e})),this._clearOverride("snappingManager")}}get state(){const e=!(!this.view?.ready||!this.layer),t=this._operationHandle;return e&&t?"active":e?"ready":"disabled"}get tooltipOptions(){return this.sketchOptions.tooltips}set tooltipOptions(e){this.sketchOptions.tooltips=e}get valueOptions(){return this.sketchOptions.values}set valueOptions(e){this.sketchOptions.values=e}get view(){return this._get("view")}set view(e){const t=this._get("view");if(t){const{container:e,map:i}=t;e&&(t.cursor=null),i?.remove(this._internalGraphicsLayer),this.removeHandles(this._viewHandlesKey),this.cancel()}const i="view-ready";this.removeHandles(i),e&&this.addHandles((0,q.z7)((()=>e.ready),(t=>{this.removeHandles(this._viewHandlesKey),t&&this.addHandles(this._generateViewHandles(e),this._viewHandlesKey)}),q.pc),i),this._set("view",e)}cancel(){this._moduleLoaderAbortController=(0,m.DC)(this._moduleLoaderAbortController),this._viewReadyAbortController=(0,m.DC)(this._viewReadyAbortController),this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&this._operationHandle.complete()}delete(){const{state:e,updateGraphics:t}=this;if("active"===e&&t.length){const{activeTool:e,layer:i}=this,r=t.toArray();i.removeMany(r),this.cancel(),this._emitDeleteEvent({graphics:r,tool:e})}}duplicate(){if("active"===this.state&&this.updateGraphics.length){const e=this.updateGraphics.map((e=>e.clone())).toArray();return this.layer.addMany(e),this.emit("duplicate",{graphics:e,type:"duplicate"}),e}return[]}async create(e,t){this.cancel(),await this._waitViewReady();const{view:i,layer:r}=this;if(!i||"disabled"===this.state)throw r||this._logMissingLayer(),(0,g.NK)();if(null!=i.activeTool&&(i.activeTool=null),!e)return void this._logError("sketch:missing-parameter","Missing parameter 'tool'.");(0,Uc.Y)(i,this._internalGraphicsLayer);const n=await this._setupCreateOperation(e,t);null==n||this.destroyed?i.map.remove(this._internalGraphicsLayer):(n.on("complete",(()=>{if(n===this._operationHandle){const t=this.createGraphic,i=this._operationHandle.cancelled;this._operationHandle.destroy(),this._operationHandle=null,this._set("createGraphic",null),this.view?.map&&this.view.map.remove(this._internalGraphicsLayer),n.cancelled||null==t||r.add(t),this.emit("create",{graphic:t,state:i?"cancel":"complete",tool:e,toolEventInfo:null,type:"create"})}})),this._operationHandle=n,i.ready&&i.focus())}async place(e,t){return this.create("mesh",{mode:"click",hasZ:e.hasZ,geometryToPlace:e,...t})}async update(e,t){this.cancel(),await this._waitViewReady();const{layer:i,view:r,state:n}=this;if(!r||"disabled"===n)throw i||this._logMissingLayer(),(0,g.NK)();null!=r.activeTool&&(r.activeTool=null);const s=Array.isArray(e)?e:[e];if(null==e||!s?.length)return void this._logError("sketch:missing-parameter","Missing parameter 'graphics'.");if(s.some((e=>e.layer!==i?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):null==e.geometry&&(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0))))return;const o=await this._setupUpdateOperation(s,t);this.destroyed||null==o||mu(o)||((0,Uc.Y)(r,this._internalGraphicsLayer),this._setUpdateOperationHandle(o,t),this.emit("update",{graphics:s,state:"start",aborted:!1,tool:o.tool,toolEventInfo:null,type:"update"}))}async _updateSpatialReference(e){const t=this.view;if(t){this._beginAsyncOperation(),e=Array.isArray(e)?e:[e];for(const i of e)null==i.geometry||"mesh"===i.geometry.type||(0,Zi.aI)(i.geometry.spatialReference,t.spatialReference)||((0,oi.canProjectWithoutEngine)(i.geometry.spatialReference,t.spatialReference)||(0,oi.isLoaded)()||await(0,oi.load)(),i.geometry=(0,oi.project)(i.geometry,t.spatialReference));this._endAsyncOperation()}else this._logMissingView()}undo(){this.canUndo()&&this._operationHandle?.undo()}redo(){this.canRedo()&&this._operationHandle?.redo()}canUndo(){return!(!this._operationHandle||!this._operationHandle.canUndo())}canRedo(){return!(!this._operationHandle||!this._operationHandle.canRedo())}toggleUpdateTool(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()}async _getFirstHit(e){const t=this.view;if(!t)return this._logMissingView(),null;if("2d"===t.type){const i=[];t.map.allLayers.forEach((e=>{"vector-tile"!==e.type&&"imagery"!==e.type||i.push(e)}));const r=await t.hitTest(e,{exclude:i});return(0,Jh.zF)(r.results)}const i=[t.map.ground];t.map.allLayers.forEach((e=>{(0,R.Eq)(e.type)&&i.push(e)}));const r=await t.hitTest(e,{exclude:i});if(r.results.length>0){const e=r.results[0];if(null!=e&&"graphic"===e.type&&e.graphic&&(!r.ground.mapPoint||t.map.ground.opacity<1||r.ground.distance-(e.distance??0)>-Math.min(3*r.ground.distance,"global"===t.viewingMode?(0,Pc.tO)(t.renderCoordsHelper.spatialReference).radius/t.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return e}return null}_generateViewHandles(e){return[e.on("immediate-click",(async t=>{const i="active"===this.state&&"create"===this._operationHandle?.type;if("disabled"===this.state||i||!this.updateOnGraphicClick)return;this._beginAsyncOperation();const r=await t.async((()=>this._getFirstHit((0,_r.ZV)(t))));let n=null;if(null!=r){const i=r.graphic;this.updateGraphics.includes(i)||i.layer===this.layer?(t.stopPropagation(),n=i):"2d"!==e.type||this._isComponentGraphic(i)||"active"!==this.state||this.cancel()}else"active"===this.state&&this.cancel();null==n||this.updateGraphics.includes(n)||await this.update([n],{...this.defaultUpdateOptions,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions}}),this._endAsyncOperation()}),Ii.o.WIDGET)]}async _setupCreateOperation(e,t){const i=this.view;if(!i)return this._logMissingView(),null;const r={hasZ:"3d"===i.type,...this.defaultCreateOptions,...t},n=await this._setupDrawGraphicTool(e,i,r);return null==n?null:(i.tools.add(n),i.activeTool=n,this._setupCreateOperationHandle(n))}async _setupDrawGraphicTool(e,t,i){if("multipoint"===e&&"3d"===t.type)return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;if(!t)return this._logMissingView(),null;const{cursor:r,defaultZ:n,hasZ:s,geometryToPlace:o,graphicProperties:a,mode:l,preserveAspectRatio:c}=i,h="rectangle"===e||"circle"===e?"hybrid":"click",u=c??"rectangle"!==e,p={centered:"rectangle"!==e&&!("circle"===e&&!u),cursor:r,defaultZ:n,forceUniformSize:u,graphicProperties:a,geometryToPlace:o,geometryType:e,graphicSymbol:this._getGraphicSymbolFromTool(e),hasZ:s,mode:l??h,snappingManager:this.snappingManager,snapToScene:!1,view:t};return"2d"===t.type?this._makeDrawGraphicTool2D(p):this._makeDrawGraphicTool3D(p)}async _makeDrawGraphicTool2D(e){const t=await this._requireModule(Promise.all([n.e(9175),n.e(8295),n.e(4158),n.e(8954)]).then(n.bind(n,98954)));return mu(t)||this.destroyed?null:new t.module.DrawGraphicTool2D({...e,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:uu(e.geometryType)?this.activeFillSymbol:null,sketchOptions:this.sketchOptions})}async _makeDrawGraphicTool3D(e){const t=await this._requireModule(Promise.all([n.e(9958),n.e(4197),n.e(9175),n.e(6152),n.e(9728),n.e(8609),n.e(8295),n.e(5596)]).then(n.bind(n,52799)));if(mu(t)||this.destroyed)return null;const{elevationInfo:i}=this.layer;return new t.module.DrawGraphicTool3D({...e,elevationInfo:i,snapToScene:!0,sketchOptions:this.sketchOptions})}_setupCreateOperationHandle(e){const t=this.view;if(!t)return this._logMissingView(),null;let i=null;const r=e.forceUniformSize,n=e.centered,s=[t.on("key-down",(t=>{if(t.key===Vc.NE.pan)t.stopPropagation(),t.repeat||(e.enabled=!1);else if(t.key===Vc.NE.complete)t.stopPropagation(),e.completeCreateOperation();else if(t.key!==Vc.NE.vertexAdd||t.repeat)t.key===Vc.NE.undo?(t.stopPropagation(),o.undo()):t.key===Vc.NE.redo?(t.stopPropagation(),o.redo()):t.key!==Vc.NE.constraint||"rectangle"!==e.geometryType&&"circle"!==e.geometryType||t.repeat?t.key===Vc.NE.center&&(t.repeat||(e.centered=!n,t.stopPropagation())):(e.forceUniformSize=!r,t.stopPropagation());else{const i=e.drawOperation.geometryType;"polyline"!==i&&"polygon"!==i&&"multipoint"!==i||(t.stopPropagation(),e.drawOperation.commitStagedVertex())}}),Ii.o.WIDGET),t.on("key-up",(t=>{t.key===Vc.NE.pan?e.enabled=!0:t.key!==Vc.NE.constraint||"rectangle"!==e.geometryType&&"circle"!==e.geometryType?t.key===Vc.NE.center&&(e.centered=n,t.stopPropagation()):(e.forceUniformSize=r,t.stopPropagation())}),Ii.o.WIDGET),e.on("vertex-add",(t=>{switch(i=null==i?"start":"active",t.operation){case"apply":this.emit("create",{graphic:e.graphic,state:i,tool:this.activeTool,toolEventInfo:t,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}})),e.on("cursor-update",(t=>{e.drawOperation.numCommittedVertices>0&&this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:{coordinates:t.vertices[0].coordinates,type:"cursor-update"},type:"create"})})),e.on("vertex-remove",(t=>{switch(t.operation){case"apply":this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:t,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}})),e.on("complete",(e=>{this._set("createGraphic",e.graphic),i="complete",e.aborted?o&&o.cancel():o&&o.complete()})),(0,q.wB)((()=>this._getGraphicSymbolFromTool(e.geometryType)),(t=>{e.graphicSymbol=t}))],o=new Qh({activeComponent:e,tool:e.geometryType,type:"create",onEnd:()=>{s.forEach((e=>e.remove())),s.length=0,t.tools?.remove(e)},undo:()=>{e.canUndo&&e.undo()},redo:()=>{e.canRedo&&e.redo()},canUndo:()=>e.canUndo,canRedo:()=>e.canRedo});return o}_getGraphicSymbolFromTool(e){switch(e){case"point":case"multipoint":return this.pointSymbol;case"polyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":return this.polygonSymbol;case"mesh":return this.meshSymbol}}async _setupUpdateOperation(e,t){const{layer:i,view:r}=this;if(!r)return this._logMissingView(),null;const n={tool:this._defaultUpdateTool,...this.defaultUpdateOptions,...t,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,...t?.reshapeOptions},highlightOptions:{...this.defaultUpdateOptions.highlightOptions,...t?.highlightOptions}};let s=n.tool;for(const t of e)i.remove(t),i.add(t);if("3d"===r.type){if(0===e.length)return null;switch(s){case"move":return this._setupMove3DOperation(e,n,r,s);case"reshape":{if(e.length>1)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;const t=(0,Zc.N)(e[0]);return t===Fc.e.SUPPORTED?this._setupReshape3DOperation(e[0],n,r):(this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${(0,Fc.d)(t)}).`),null)}case"transform":return this._setupGraphicTransform3DOperation(e,n,r)}}switch(s){case"move":return this._setupMove2DOperation(e,n,r);case"reshape":{if(e.length>1)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;const t=(0,Zc.N)(e[0]);return t===Fc.e.SUPPORTED?this._setupTransformOrReshape2DOperation(e,s,n,r):(this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${(0,Fc.d)(t)}).`),null)}case"transform":if(1===e.length){const t=e[0].geometry?.type;"point"!==t&&"multipoint"!==t||(s="reshape")}return this._setupTransformOrReshape2DOperation(e,s,n,r)}}async _setupMove3DOperation(e,t,i,r,s=!1){for(const t of e){const e=(0,jc.N)(t);if(e!==Fc.e.SUPPORTED)return this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${(0,Fc.d)(e)}).`),null}const o=await this._requireModule(Promise.all([n.e(9958),n.e(4197),n.e(9175),n.e(6152),n.e(9728),n.e(8609),n.e(8295),n.e(5596)]).then(n.bind(n,52799)));if(mu(o))return o;const a=new o.module.GraphicMoveTool({view:i,enableZ:t.enableZ,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});i.tools.add(a),a.graphics.addMany(e),s||this.updateGraphics.addMany(e);const l=[],c=new eu({activeComponent:a,tool:r,type:"update",onEnd:()=>{l.forEach((e=>e.remove())),l.length=0,i.tools?.remove(a),a.destroyed||a.destroy()},undo:()=>{pu(c,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r})},redo:()=>{du(c,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r})},addToSelection:e=>{this.updateGraphics.push(e),a.graphics.push(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:e=>{const t=this.updateGraphics.indexOf(e);c.history.undo.forEach((e=>e.updates.splice(t,1))),c.history.redo.forEach((e=>e.updates.splice(t,1))),this.updateGraphics.remove(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==this.updateGraphics.length?a.graphics.remove(e):c.complete()},toggleTool:async()=>{if(1!==this.updateGraphics.length||!1===t.toggleToolOnClick)return;if("transform"!==r)return;const e=this.updateGraphics.at(0);if((0,Zc.N)(e)!==Fc.e.SUPPORTED)return;c.onEnd(),c.destroy();const n=await this._setupReshape3DOperation(e,t,i,!0);mu(n)||this._setUpdateOperationHandle(n,t)}});return l.push(...this._getHandlesForComponent(c,t),i.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(c,e,t)),Ii.o.WIDGET),i.on("key-down",(e=>{this._getCommonUpdateOperationKeyDownHandlers(c,e)}),Ii.o.WIDGET)),c}_setupGraphicTransform3DOperation(e,t,i,r=!1){if(1===e.length&&function(e){if("graphics"!==e.layer?.type)return Fc.e.GRAPHICS_LAYER_MISSING;if(null==e.geometry)return Fc.e.GEOMETRY_MISSING;switch(e.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return Fc.e.SUPPORTED;default:return Fc.e.GEOMETRY_TYPE_UNSUPPORTED}const t=null!=e.symbol&&"point-3d"===e.symbol.type&&e.symbol.symbolLayers;return t&&t.some((e=>"object"===e.type))?"on-the-ground"!==(0,zc.ky)(e)&&(0,zc.NN)(e)?Fc.e.ELEVATION_MODE_UNSUPPORTED:Fc.e.SUPPORTED:Fc.e.SYMBOL_TYPE_UNSUPPORTED}(e[0])===Fc.e.SUPPORTED){const n=e[0],s=n.geometry;if(null!=s&&("point"===s.type||"mesh"===s.type))return this._setupPointTransform3DOperation(n,t,i);if(null!=s&&("polygon"===s.type||"polyline"===s.type))return this._setupPolyTransform3DOperation(n,t,i,r)}return this._setupMove3DOperation(e,t,i,"transform",r)}async _setupPointTransform3DOperation(e,t,i){const r="transform",{enableRotation:s,enableScaling:o,enableZ:a}=t,l=await this._requireModule(Promise.all([n.e(9958),n.e(4197),n.e(9175),n.e(6152),n.e(9728),n.e(8609),n.e(8295),n.e(5596)]).then(n.bind(n,52799)));if(mu(l))return l;const c=new l.module.GraphicTransformTool({graphic:e,view:i,enableRotation:s,enableScaling:o,enableZ:a,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});i.tools.add(c),this.updateGraphics.add(e);const h=[],u=new eu({activeComponent:c,tool:r,type:"update",onEnd:()=>{h.forEach((e=>e.remove())),h.length=0,i.tools?.remove(c),c.destroyed||c.destroy()},undo:()=>{pu(u,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r})},redo:()=>{du(u,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r})},addToSelection:async e=>{this.updateGraphics.add(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"}),u.onEnd(),u.destroy();const r=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,i,"transform",!0);mu(r)||this._setUpdateOperationHandle(r,t)},removeFromSelection:e=>{this.updateGraphics.remove(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),u.complete()},toggleTool:()=>{}});return h.push(...this._getHandlesForComponent(u,t),i.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(u,e,t)),Ii.o.WIDGET),i.on("key-down",(e=>{this._getCommonUpdateOperationKeyDownHandlers(u,e)}),Ii.o.WIDGET)),u}async _setupPolyTransform3DOperation(e,t,i,r=!1){const s="transform",{enableRotation:o,enableScaling:a,enableZ:l,preserveAspectRatio:c}=t,h=await this._requireModule(Promise.all([n.e(9958),n.e(4197),n.e(9175),n.e(6152),n.e(9728),n.e(8609),n.e(8295),n.e(5596)]).then(n.bind(n,52799)));if(mu(h))return h;const u=this.view?.inputManager?.isModifierKeyDown(Vc.NE.constraint),p=new h.module.ExtentTransformTool({graphic:e,view:i,enableRotation:o,enableScaling:a,enableZ:l,preserveAspectRatio:!!c!=!!u,sketchOptions:this.sketchOptions});i.tools.add(p),r||this.updateGraphics.add(e);const d=[],f=new eu({activeComponent:p,tool:s,type:"update",onEnd:()=>{d.forEach((e=>e.remove())),d.length=0,i.tools?.remove(p),p.destroyed||p.destroy()},canUndo:()=>p.canUndo,undo:()=>{p.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s})},canRedo:()=>p.canRedo,redo:()=>{p.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s})},addToSelection:async e=>{this.updateGraphics.add(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"}),f.onEnd(),f.destroy();const r=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,i,"transform",!0);mu(r)||this._setUpdateOperationHandle(r,t)},removeFromSelection:e=>{this.updateGraphics.remove(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),f.complete()},toggleTool:async()=>{if(1!==this.updateGraphics.length||!1===t.toggleToolOnClick)return;const e=this.updateGraphics.at(0);if((0,Zc.N)(e)!==Fc.e.SUPPORTED)return;f.onEnd(),f.destroy();const r=await this._setupReshape3DOperation(e,t,i,!0);mu(r)||this._setUpdateOperationHandle(r,t)}});return d.push(...this._getHandlesForComponent(f,t),i.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(f,e,t)),Ii.o.WIDGET),i.on("key-down",(e=>this._getCommonUpdateOperationKeyDownHandlers(f,e)),Ii.o.WIDGET),i.on("key-down",(e=>{e.key!==Vc.NE.constraint||e.repeat||(p.preserveAspectRatio=!p.preserveAspectRatio,e.stopPropagation())}),Ii.o.WIDGET),i.on("key-up",(e=>{e.key===Vc.NE.constraint&&(p.preserveAspectRatio=!p.preserveAspectRatio,e.stopPropagation())}),Ii.o.WIDGET)),f}async _setupMove2DOperation(e,t,i){const r="move";this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const n=await this._getGraphicMover(e,t,i);if(mu(n))return n;const s=new eu({activeComponent:n,tool:r,type:"update",onEnd:()=>{this._displayDefaultCursor(),l.forEach((e=>e.remove())),a.forEach((e=>e.remove())),l=[],a=[],n.destroy(),this._internalGraphicsLayer?.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const e=this.updateGraphics.toArray();pu(s,e),s.refreshComponent(),this._emitUndoEvent({graphics:e,tool:r})},redo:()=>{const e=this.updateGraphics.toArray();du(s,e),s.refreshComponent(),this._emitRedoEvent({graphics:e,tool:r})},addToSelection:async e=>{await this._updateSpatialReference(e),this.updateGraphics.push(e),n.graphics=this.updateGraphics.toArray(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:e=>{const t=this.updateGraphics.indexOf(e);s.history.undo.forEach((e=>e.updates.splice(t,1))),s.history.redo.forEach((e=>e.updates.splice(t,1))),this.updateGraphics.remove(e);const i=this.updateGraphics.toArray();this.emit("update",{graphics:i,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==this.updateGraphics.length?n.graphics=i:s.complete()}});let o=!1,a=[i.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(s,e,t)),Ii.o.WIDGET),i.on("key-down",(e=>{this._getCommonUpdateOperationKeyDownHandlers(s,e),e.key!==Vc.NE.constraint||e.repeat||(o=!0,n.enableMoveAllGraphics=!n.enableMoveAllGraphics)}),Ii.o.WIDGET),i.on("key-up",(e=>{e.key===Vc.NE.constraint&&o&&(o=!1,n.enableMoveAllGraphics=!n.enableMoveAllGraphics)}),Ii.o.WIDGET)],l=this._getHandlesForComponent(s,t);return s}async _setupReshape3DOperation(e,t,i,r=!1){const s="reshape",o=await this._requireModule(Promise.all([n.e(9958),n.e(4197),n.e(9175),n.e(6152),n.e(9728),n.e(8609),n.e(8295),n.e(5596)]).then(n.bind(n,52799)));if(mu(o))return o;const a=t.reshapeOptions,l=new o.module.GraphicReshapeTool({view:i,graphic:e,enableZVertex:t.enableZ&&"move"===a?.vertexOperation,enableZShape:t.enableZ&&"move"===a?.shapeOperation,enableMoveGraphic:"move"===a?.shapeOperation||"move-xy"===a?.shapeOperation,enableMidpoints:"split"===a?.edgeOperation,enableEdgeOffset:"offset"===a?.edgeOperation,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});i.tools.add(l),r||this.updateGraphics.add(e);const c=[],h=new eu({activeComponent:l,tool:s,type:"update",onEnd:()=>{c.forEach((e=>e.remove())),c.length=0,i.tools?.remove(l),l.destroyed||l.destroy()},canUndo:()=>l.canUndo,undo:()=>{l.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s})},canRedo:()=>l.canRedo,redo:()=>{l.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s})},addToSelection:async e=>{this.updateGraphics.add(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"}),h.onEnd(),h.destroy();const r=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,i,"transform",!0);mu(r)||this._setUpdateOperationHandle(r,t)},removeFromSelection:e=>{this.updateGraphics.remove(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),h.complete()},toggleTool:async()=>{if(!1===t.toggleToolOnClick)return;h.onEnd(),h.destroy();const e=await this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),t,i,!0);mu(e)||this._setUpdateOperationHandle(e,t)}});return c.push(...this._getHandlesForComponent(h,t),i.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(h,e,t)),Ii.o.WIDGET),i.on("key-down",(e=>{this._getCommonUpdateOperationKeyDownHandlers(h,e)}),Ii.o.WIDGET)),h}async _setupTransformOrReshape2DOperation(e,t,i,r){this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const n="transform"===t?await this._getBox(e,i,r):await this._getReshape(e,i,r);if(mu(n))return n;const s=new eu({activeComponent:n,type:"update",onEnd:()=>{a.forEach((e=>e.remove())),o.forEach((e=>e.remove())),a=[],o=[],s.activeComponent&&!s.activeComponent.destroyed&&s.activeComponent.destroy(),this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{pu(s,this.updateGraphics.toArray()),s.refreshComponent(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s.tool})},redo:()=>{du(s,this.updateGraphics.toArray()),s.refreshComponent(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s.tool})},addToSelection:async e=>{let t=s.activeComponent;if("reshape"===t?.type){const t=[...this.updateGraphics,e];this.updateGraphics.removeAll(),s.onEnd(),s.destroy();const n=await this._setupTransformOrReshape2DOperation(t,"transform",i,r);if(mu(n))return;this._setUpdateOperationHandle(n,i)}else this.updateGraphics.add(e),t.graphics=this.updateGraphics.toArray(),t.refresh(),s.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:async e=>{const t=this.updateGraphics.indexOf(e);s.history.undo.forEach((e=>e.updates.splice(t,1))),s.history.redo.forEach((e=>e.updates.splice(t,1))),this.updateGraphics.remove(e);const i=this.updateGraphics.toArray();if(0===i.length)s.complete();else{const e=i[0].geometry;1!==i.length||null==e||"point"!==e.type&&"multipoint"!==e.type?s.activeComponent.graphics=i:s.toggleTool()}this.emit("update",{graphics:i,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"})},toggleTool:async()=>{if(this.updateGraphics.length>1)return;const e=this.updateGraphics.at(0),t=e.geometry;if(null!=t&&("reshape"===s.tool&&("point"===t.type||"multipoint"===t.type)||"transform"===s.tool&&"extent"===t.type))return;let n=null;"transform"===s.tool?n=await this._getReshape([e],i,r):"reshape"===s.tool&&(n=await this._getBox([e],i,r)),mu(n)||(s.activeComponent?.destroy(),s.activeComponent=n,s.activeComponent&&(a.forEach((e=>e.remove())),a=this._getHandlesForComponent(s,i)))}});let o=[r.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(s,e,i)),Ii.o.WIDGET),r.on("key-down",(e=>{if(this._getCommonUpdateOperationKeyDownHandlers(s,e),e.key===Vc.NE.constraint&&!e.repeat&&s){const e=s.activeComponent;e&&"box"===e.type&&(e.preserveAspectRatio=!e.preserveAspectRatio)}}),Ii.o.WIDGET),r.on("key-up",(e=>{if(e.key===Vc.NE.constraint&&s){const e=s.activeComponent;e&&"box"===e.type&&(e.preserveAspectRatio=!e.preserveAspectRatio)}}),Ii.o.WIDGET)],a=this._getHandlesForComponent(s,i);return s}async _getGraphicMover(e,t,i){const{enableMoveAllGraphics:r,highlightOptions:s}=t,o=await this._requireModule(Promise.all([n.e(7263),n.e(3423)]).then(n.bind(n,27263)));return mu(o)?o:new o.module.default({enableMoveAllGraphics:r,highlightsEnabled:!!s?.enabled,indicatorsEnabled:!1,graphics:e,view:i,callbacks:{onGraphicMoveStart:({dx:e,dy:t,graphic:i})=>{this._displayGrabbingCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e,dy:t,mover:i,type:"move-start"},type:"update"})},onGraphicMove:({dx:e,dy:t,graphic:i})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e,dy:t,mover:i,type:"move"},type:"update"}),onGraphicMoveStop:({dx:e,dy:t,graphic:i})=>{this._displayPointerCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e,dy:t,mover:i,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})}async _getBox(e,t,i){const{enableRotation:r,enableScaling:s,highlightOptions:o,preserveAspectRatio:a}=t,l=await this._requireModule(Promise.all([n.e(9175),n.e(7263),n.e(4168)]).then(n.bind(n,4168)));if(mu(l))return l;const c=this.view?.inputManager?.isModifierKeyDown(Vc.NE.constraint);return new l.module.default({graphics:e,enableRotation:r,enableScaling:s,highlightsEnabled:!!o?.enabled,preserveAspectRatio:!!a!=!!c,layer:this._internalGraphicsLayer,view:i,sketchOptions:this.sketchOptions,callbacks:{onMoveStart:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onMove:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onMoveStop:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onScaleStart:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onScale:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onScaleStop:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onRotateStart:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onRotate:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onRotateStop:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"})}})}async _getReshape(e,t,i){const r="split"===t.reshapeOptions?.edgeOperation,s="move"===t.reshapeOptions?.shapeOperation,o=!!t.highlightOptions?.enabled,a=await this._requireModule(Promise.all([n.e(9175),n.e(7263),n.e(4158),n.e(5990)]).then(n.bind(n,39329)));return mu(a)?a:new a.module.default({enableMidpoints:r,enableMovement:s,graphic:e[0],highlightsEnabled:o,layer:this._internalGraphicsLayer,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions,view:i,callbacks:{onReshapeStart:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onReshape:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onReshapeStop:({mover:e,type:t})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e,type:t},type:"update"}),onMoveStart:({dx:e,dy:t,mover:i,type:r})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e,dy:t,mover:i,type:r},type:"update"}),onMove:({dx:e,dy:t,mover:i,type:r})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e,dy:t,mover:i,type:r},type:"update"}),onMoveStop:({dx:e,dy:t,mover:i,type:r})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e,dy:t,mover:i,type:r},type:"update"}),onVertexAdd:({added:e,type:t,vertices:i})=>{const r=e.map((e=>(0,mn.$K)(e.geometry)));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:r,vertices:i,type:t},type:"update"})},onVertexRemove:({removed:e,type:t,vertices:i})=>{const r=e.map((e=>(0,mn.$K)(e.geometry)));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:r,vertices:i,type:t},type:"update"})}}})}_getHandlesForComponent(e,t){const i=e.activeComponent;if(!i)return[];switch(i.type){case"graphic-mover":return[i.on("graphic-click",(({graphic:t,viewEvent:i})=>{i.native?.shiftKey&&(i.stopPropagation(),e.removeFromSelection(t))})),i.on("graphic-move-start",(t=>e.addToHistory(yu(t.allGraphics))))];case"box":return[i.on("graphic-click",(i=>this._onTransformOrReshape2DGraphicClick(e,t,i))),i.on("move-start",(t=>e.addToHistory(yu(t.graphics)))),i.on("rotate-start",(t=>e.addToHistory(yu(t.graphics)))),i.on("scale-start",(t=>e.addToHistory(yu(t.graphics))))];case"reshape":return[i.on("graphic-click",(i=>this._onTransformOrReshape2DGraphicClick(e,t,i))),i.on("move-start",(t=>e.addToHistory(yu([t.mover])))),i.on("reshape-start",(t=>e.addToHistory(yu([t.graphic])))),i.on("vertex-add",(t=>e.addToHistory(yu([t.oldGraphic])))),i.on("vertex-remove",(t=>e.addToHistory(yu([t.oldGraphic]))))];case"move-3d":return[i.on("graphic-move-start",(t=>{e.addToHistory(yu(t.allGraphics)),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:t.allGraphics.length>0?t.allGraphics[0]:null,type:"move-start"},type:"update"})})),i.on("graphic-move",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e.dx,dy:e.dy,mover:e.allGraphics.length>0?e.allGraphics[0]:null,type:"move"},type:"update"})})),i.on("graphic-move-stop",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:e.allGraphics.length>0?e.allGraphics[0]:null,type:"move-stop"},type:"update"})})),i.on("immediate-click",(i=>{i.shiftKey?this._toggleSelection([i.graphic],e,t):e.toggleTool()}))];case"transform-3d":return[i.on("record-undo",(({record:t})=>{e.addToHistory({updates:[t]})})),i.on("graphic-translate-start",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move-start"},type:"update"})})),i.on("graphic-translate-stop",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move-stop"},type:"update"})})),i.on("graphic-rotate-start",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,angle:e.angle,type:"rotate-start"},type:"update"})})),i.on("graphic-rotate-stop",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,angle:e.angle,type:"rotate-stop"},type:"update"})})),i.on("graphic-scale-start",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale-start"},type:"update"})})),i.on("graphic-scale-stop",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale-stop"},type:"update"})})),i.on("graphic-translate",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move"},type:"update"})})),i.on("graphic-rotate",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,angle:e.angle,type:"rotate"},type:"update"})})),i.on("graphic-scale",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale"},type:"update"})})),i.on("immediate-click",(i=>{i.shiftKey?this._toggleSelection([i.graphic],e,t):e.toggleTool()}))];case"reshape-3d":return[i.on("reshape",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:e,type:"update"})})),i.on("move",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:e,type:"update"})})),i.on("vertex-add",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:e,type:"update"})})),i.on("vertex-remove",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:e,type:"update"})})),i.on("immediate-click",(i=>{i.shiftKey?this._toggleSelection([i.graphic],e,t):e.toggleTool()}))]}}_onTransformOrReshape2DGraphicClick(e,t,i){const{graphic:r,viewEvent:n}=i;return n.native?.shiftKey&&r.layer===this.layer?(n.stopPropagation(),e.removeFromSelection(r)):t.toggleToolOnClick?(n.stopPropagation(),e.toggleTool()):void 0}_setUpdateOperationHandle(e,t){this._operationHandle=e;const i=this.view?.map;this._disablePopup(t),e.on("complete",(()=>{if(e===this._operationHandle){const r=this.updateGraphics.toArray(),n=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),i&&i.remove(this._internalGraphicsLayer),this._restorePopup(t),this.emit("update",{graphics:r,state:"complete",aborted:e.cancelled,tool:n,toolEventInfo:null,type:"update"})}}))}async _getCommonUpdateOperationClickHandlers(e,t,i){const r=(0,_r.ZV)(t),n=await t.async((()=>this._getFirstHit(r)));null!=n&&(t.native.shiftKey&&this._toggleSelection([n.graphic],e,i)||this.updateGraphics.includes(n.graphic))?t.stopPropagation():e.complete()}_toggleSelection(e,t,i){const r=!!i.multipleSelectionEnabled;return e.some((e=>!(null==e||!r||e.layer!==this.layer||(this.updateGraphics.includes(e)?t.removeFromSelection(e):t.addToSelection(e),0))))}_getCommonUpdateOperationKeyDownHandlers(e,t){if(!e)return;const i=t.key;i===Vc.NE.undo&&e.canUndo()?(t.stopPropagation(),e.undo()):i===Vc.NE.redo&&e.canRedo()?(t.stopPropagation(),e.redo()):i===Vc.NE.cancel?(t.stopPropagation(),e.cancel()):this.allowDeleteKey&&Vc.NE.delete.includes(i)&&this._onDeleteKey(t)}_onDeleteKey(e){if(!this._operationHandle||"update"!==this._operationHandle.type)return;const t=this.activeComponent,i=this.updateGraphics.toArray();null!=t&&"reshape-3d"!==t.type&&("reshape"!==t.type||1===i.length&&"point"===i[0].geometry?.type)&&(e.stopPropagation(),this.delete())}_removeDefaultLayer(){this._internalGraphicsLayer&&(this.view?.map?.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=(0,m.pR)(this._internalGraphicsLayer))}_isComponentGraphic(e){const{activeComponent:t}=this;return!(!e||null==t)&&(e.attributes?.esriSketchTool||"draw-2d"===t.type&&t.graphic===e||("box"===t.type||"reshape"===t.type)&&t.isUIGraphic(e))}_displayPointerCursor(){this.view?.container&&"pointer"!==this.view.cursor&&(this.view.cursor="pointer")}_displayGrabbingCursor(){this.view?.container&&"grabbing"!==this.view.cursor&&(this.view.cursor="grabbing")}_displayDefaultCursor(){this.view?.container&&null!==this.view.cursor&&(this.view.cursor=null)}_logError(e,t,i){y.A.getLogger(this).error(new h.A(e,t,i))}async _requireModule(e){const t=new AbortController;this._moduleLoaderAbortController=t;const i=await e;return this._moduleLoaderAbortController!==t||t.signal.aborted?{requireError:"aborted"}:{module:i}}_emitUndoEvent(e){this.emit("undo",{...e,type:"undo"})}_emitRedoEvent(e){this.emit("redo",{...e,type:"redo"})}_emitDeleteEvent(e){this.emit("delete",{...e,type:"delete"})}get test(){return{operationHandle:this._operationHandle,snappingManager:this.snappingManager,defaultUpdateOptions:au}}wait(){return(0,q.C_)((()=>!this.updating))}_beginAsyncOperation(){this._numUpdating+=1,this.notifyChange("updating")}_endAsyncOperation(){this._numUpdating-=1,this.notifyChange("updating")}_disablePopupEnabled(e){return"3d"!==this.view?.type||this.updateOnGraphicClick||(e?.toggleToolOnClick??!1)}_disablePopup(e){this._disablePopupEnabled(e)&&this.view&&null==this._originalPopupEnabled&&(this._originalPopupEnabled=this.view.popupEnabled,this.view.popupEnabled=!1)}_restorePopup(e){this._disablePopupEnabled(e)&&this.view&&null!=this._originalPopupEnabled&&(this.view.popupEnabled=this._originalPopupEnabled,this._originalPopupEnabled=null)}async _waitViewReady(){const e=this.view;e?((0,m.DC)(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,await(0,g.qr)((0,q.C_)((()=>e?.ready)),this._viewReadyAbortController.signal)):this._logMissingView()}_logMissingView(){this._logError("sketch:missing-property",hu("view"))}_logMissingLayer(){this._logError(cu,hu("layer"))}};(0,t._)([(0,v.MZ)()],lu.prototype,"_defaultSnappingManager",void 0),(0,t._)([(0,v.MZ)()],lu.prototype,"updating",null),(0,t._)([(0,v.MZ)()],lu.prototype,"_operationHandle",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],lu.prototype,"activeTool",null),(0,t._)([(0,v.MZ)()],lu.prototype,"activeFillSymbol",void 0),(0,t._)([(0,v.MZ)()],lu.prototype,"activeLineSymbol",void 0),(0,t._)([(0,v.MZ)()],lu.prototype,"activeVertexSymbol",void 0),(0,t._)([(0,v.MZ)()],lu.prototype,"allowDeleteKey",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],lu.prototype,"createGraphic",null),(0,t._)([(0,v.MZ)()],lu.prototype,"defaultCreateOptions",null),(0,t._)([(0,v.MZ)()],lu.prototype,"defaultUpdateOptions",null),(0,t._)([(0,v.MZ)({type:Gc.A,nonNullable:!0})],lu.prototype,"labelOptions",null),(0,t._)([(0,v.MZ)()],lu.prototype,"layer",void 0),(0,t._)([(0,v.MZ)({types:Rc.Es})],lu.prototype,"pointSymbol",void 0),(0,t._)([(0,v.MZ)({types:Rc.Es})],lu.prototype,"polygonSymbol",void 0),(0,t._)([(0,v.MZ)({types:Rc.Es})],lu.prototype,"polylineSymbol",void 0),(0,t._)([(0,v.MZ)()],lu.prototype,"meshSymbol",void 0),(0,t._)([(0,v.MZ)({type:Uh,nonNullable:!0})],lu.prototype,"snappingOptions",null),(0,t._)([(0,v.MZ)()],lu.prototype,"snappingManager",null),(0,t._)([(0,v.MZ)({readOnly:!0})],lu.prototype,"state",null),(0,t._)([(0,v.MZ)({type:$c.A,nonNullable:!0})],lu.prototype,"tooltipOptions",null),(0,t._)([(0,v.MZ)({readOnly:!0})],lu.prototype,"updateGraphics",void 0),(0,t._)([(0,v.MZ)()],lu.prototype,"updateOnGraphicClick",void 0),(0,t._)([(0,v.MZ)({type:Oc.A,nonNullable:!0})],lu.prototype,"valueOptions",null),(0,t._)([(0,v.MZ)({types:Rc.Es})],lu.prototype,"vertexSymbol",void 0),(0,t._)([(0,v.MZ)({value:null})],lu.prototype,"view",null),(0,t._)([(0,v.MZ)({constructOnly:!0,type:Bc.A})],lu.prototype,"sketchOptions",void 0),lu=(0,t._)([(0,b.$)("esri.widgets.Sketch.SketchViewModel")],lu);const cu="sketch:missing-property",hu=e=>`Property '${e}' is missing on SketchViewModel.`;function uu(e){return"polygon"===e||"rectangle"===e||"circle"===e}function pu(e,t){fu("undo",e.history.undo,e.history.redo,t)}function du(e,t){fu("redo",e.history.redo,e.history.undo,t)}function fu(e,t,i,r){const n=t.pop();if(!n)return;const s=n.updates,o=[];r.forEach(((t,i)=>{const r=s[i];null!=r&&("geometry"in r&&null!=r.geometry&&(o.push({geometry:t.geometry}),t.geometry=r.geometry),"symbol"in r&&null!=r.symbol&&(o.push({symbol:t.symbol}),t.symbol=r.symbol),"undo"in r&&(o.push(r),r[e](t)))})),i.push({updates:o})}function yu(e){return{updates:e.map((e=>({geometry:e.geometry})))}}function mu(e){return"requireError"in e&&"aborted"===e.requireError}const gu=lu;let vu=class extends k.A{constructor(e){super(e),this.enabledToggle=!0,this.featureEnabledToggle=!0,this.header=!1,this.layerList=!0,this.layerListToggleLayersButton=!0,this.selfEnabledToggle=!0}};(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],vu.prototype,"enabledToggle",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],vu.prototype,"featureEnabledToggle",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],vu.prototype,"header",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],vu.prototype,"layerList",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],vu.prototype,"layerListToggleLayersButton",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],vu.prototype,"selfEnabledToggle",void 0),vu=(0,t._)([(0,b.$)("esri.widgets.support.SnappingControls.VisibleElements")],vu);const _u=vu;let bu=class extends k.A{constructor(e){super(e),this.point=!0,this.polyline=!0,this.polygon=!0,this.rectangle=!0,this.circle=!0,this.multipoint=!0,this.mesh=!0}};(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],bu.prototype,"point",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],bu.prototype,"polyline",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],bu.prototype,"polygon",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],bu.prototype,"rectangle",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],bu.prototype,"circle",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],bu.prototype,"multipoint",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],bu.prototype,"mesh",void 0),bu=(0,t._)([(0,b.$)("esri.widgets.Sketch.VisibleElements.CreateToolVisibilityMap")],bu);let wu=class extends k.A{constructor(e){super(e),this["rectangle-selection"]=!0,this["lasso-selection"]=!0,this["custom-selection"]=!0}};(0,t._)([(0,v.MZ)({nonNullable:!0})],wu.prototype,"rectangle-selection",void 0),(0,t._)([(0,v.MZ)({nonNullable:!0})],wu.prototype,"lasso-selection",void 0),(0,t._)([(0,v.MZ)({nonNullable:!0})],wu.prototype,"custom-selection",void 0),wu=(0,t._)([(0,b.$)("esri.widgets.Sketch.VisibleElements.SelectionToolVisibilityMap")],wu);let Mu=class extends k.A{constructor(e){super(e),this.createTools=new bu,this.directionModePicker=!1,this.duplicateButton=!0,this.labelsToggle=!0,this.selectionTools=new wu,this.settingsMenu=!0,this.snappingControls=!0,this.snappingControlsElements=new _u,this.tooltipsToggle=!0,this.undoRedoMenu=!0}};(0,t._)([(0,v.MZ)({type:bu,nonNullable:!0})],Mu.prototype,"createTools",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],Mu.prototype,"directionModePicker",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],Mu.prototype,"duplicateButton",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],Mu.prototype,"labelsToggle",void 0),(0,t._)([(0,v.MZ)({type:wu,nonNullable:!0})],Mu.prototype,"selectionTools",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],Mu.prototype,"settingsMenu",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],Mu.prototype,"snappingControls",void 0),(0,t._)([(0,v.MZ)({type:_u,nonNullable:!0})],Mu.prototype,"snappingControlsElements",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],Mu.prototype,"tooltipsToggle",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],Mu.prototype,"undoRedoMenu",void 0),Mu=(0,t._)([(0,b.$)("esri.widgets.Sketch.VisibleElements")],Mu);const Tu=Mu;var Su=n(50889),Au=n(99517),Eu=n(73902),xu=n(56122),Iu=n(77671);let Cu=class extends k.A{constructor(e){super(e),this.coordinates=void 0,this.strokeDash=[],this.strokeWidth=1,this.strokeColor=[0,0,0,1],this.strokeDashColor=[255,255,255,1],this.fillColor=[0,0,0,0],this.visible=!0,this.isDecoration=!0}get _strokeStyle(){const e=this.strokeColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _strokeBackgroundStyle(){const e=this.strokeDashColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _fillStyle(){const e=this.fillColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _renderCoordinates(){const e=[];if(!this.coordinates)return{coordinates:e,rect:Ws.qv};const t=(0,Ws.eV)((0,Ws.Jf)((0,Ws.vt)(Ws.qv),this.coordinates),2*this.strokeWidth);t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]+.5),t[3]=Math.ceil(t[3]+.5);for(const i of this.coordinates)e.push([Math.floor(i[0]-t[0])+.5,Math.floor(i[1]-t[1])+.5]);return e.reverse(),{coordinates:e,rect:t}}render(){const{coordinates:e,rect:t}=this._renderCoordinates,i=(0,Ws.VL)(t),r=(0,Ws.uJ)(t);return(0,Zo.K)("div",{classes:{"esri-outline-overlay-item":!0},styles:{left:t[0]+"px",top:t[1]+"px",width:i+"px",height:r+"px",visibility:this.visible?"visible":"hidden"}},(0,Zo.K)("svg",{height:r,styles:{display:"block"},width:i},(0,Zo.K)("polygon",{fill:this._fillStyle,points:e.map((([e,t])=>`${e},${t}`)).join(" "),stroke:this._strokeBackgroundStyle,"stroke-width":this.strokeWidth}),(0,Zo.K)("polygon",{fill:"transparent",points:e.map((([e,t])=>`${e},${t}`)).join(" "),stroke:this._strokeStyle,"stroke-dasharray":this.strokeDash.length?this.strokeDash.join(" "):void 0,"stroke-width":this.strokeWidth})))}renderCanvas(){}};(0,t._)([(0,v.MZ)()],Cu.prototype,"coordinates",void 0),(0,t._)([(0,v.MZ)()],Cu.prototype,"strokeDash",void 0),(0,t._)([(0,v.MZ)()],Cu.prototype,"strokeWidth",void 0),(0,t._)([(0,v.MZ)()],Cu.prototype,"strokeColor",void 0),(0,t._)([(0,v.MZ)()],Cu.prototype,"strokeDashColor",void 0),(0,t._)([(0,v.MZ)()],Cu.prototype,"fillColor",void 0),(0,t._)([(0,v.MZ)()],Cu.prototype,"visible",void 0),(0,t._)([(0,v.MZ)()],Cu.prototype,"isDecoration",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Cu.prototype,"_strokeStyle",null),(0,t._)([(0,v.MZ)({readOnly:!0})],Cu.prototype,"_strokeBackgroundStyle",null),(0,t._)([(0,v.MZ)({readOnly:!0})],Cu.prototype,"_fillStyle",null),(0,t._)([(0,v.MZ)({readOnly:!0})],Cu.prototype,"_renderCoordinates",null),Cu=(0,t._)([(0,b.$)("esri.views.overlay.OutlineOverlayItem")],Cu);const ku=Cu;let Nu=class extends(L.A.EventedMixin(Iu.g)){constructor(e){super(e),this._overlayItem=void 0,this.geometryType=null,this.mode=null,this.type="draw-screen"}initialize(){this.drawOperation=this._makeDrawOperation();const e=e=>this.drawOperation.on(e,(t=>{this._updateVisuals(),this.emit(e,t)}));this.addHandles([e("vertex-add"),e("vertex-remove"),e("vertex-update"),e("cursor-update"),e("complete")]),this.finishToolCreation()}destroy(){this.drawOperation=(0,m.pR)(this.drawOperation),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centeredToggled(e){this._set("centeredToggled",e),this._updateVisuals()}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}set uniformSizeToggled(e){this._set("uniformSizeToggled",e),this._updateVisuals()}get updating(){return this.drawOperation?.updating??!1}get cursor(){return"point"===this.geometryType?"default":"crosshair"}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(e){this.destroyed||this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}undo(){this.drawOperation.undo()}reset(){}_makeDrawOperation(){const{view:e}=this;return new Su.O0({view:e,manipulators:this.manipulators,geometryType:Lu(this.geometryType),drawingMode:this.mode,hasZ:!1,defaultZ:0,snapToSceneEnabled:!1,drawSurface:new Au.Sl,hasM:!1,snappingManager:null,snappingVisualizer:null,graphic:null,cursor:this.cursor})}get coordinates(){const{drawOperation:e}=this;if(!e?.geometryIncludingUncommittedVertices.length)return[];const{coordinateHelper:t}=e,i=e.committableVertex,r=e.committedVertices.slice();null!=i&&r.push(t.pointToArray(i));const n=r.length;switch(this.geometryType){case"circle":case"rectangle":{const t=new xu.vz(Dn.zK,Au.Sl.spatialReference),i="circle"===this.geometryType?Eu.zV:Eu.GF,s="circle"===this.geometryType?Eu.zd:Eu._T;if(1===n&&e.isCompleted){const e=r[0],n=t.makeMapPoint(e[0]+Ou,e[1]);return i([e,n],t,!0)?.geometry.rings[0]??[]}if(2===n){const e="rectangle"!==this.geometryType,n=this.centeredToggled!==e,o="rectangle"!==this.geometryType;return(this.uniformSizeToggled!==o?i(r,t,n)?.geometry.rings[0]:s(r,t,n)?.geometry.rings[0])??[]}return[]}}return r}_updateVisuals(){if(!this._overlayItem){const e=new ku({strokeDash:[5],strokeDashColor:[255,255,255,255]});this.view.overlay?.addItem(e),this.addHandles((0,Pi.hA)((()=>{this.view.overlay?.removeItem(e),e?.destroy(),this._overlayItem=void 0}))),this._overlayItem=e}this._overlayItem.coordinates=this.coordinates}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}};function Lu(e){switch(e){case"polygon":case"point":return e;case"circle":case"rectangle":return"segment"}}(0,t._)([(0,v.MZ)({value:!1})],Nu.prototype,"centeredToggled",null),(0,t._)([(0,v.MZ)()],Nu.prototype,"drawOperation",void 0),(0,t._)([(0,v.MZ)({value:!0})],Nu.prototype,"enabled",null),(0,t._)([(0,v.MZ)({value:!1})],Nu.prototype,"uniformSizeToggled",null),(0,t._)([(0,v.MZ)({constructOnly:!0})],Nu.prototype,"geometryType",void 0),(0,t._)([(0,v.MZ)({constructOnly:!0})],Nu.prototype,"mode",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Nu.prototype,"type",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Nu.prototype,"updating",null),(0,t._)([(0,v.MZ)({constructOnly:!0,nonNullable:!0})],Nu.prototype,"view",void 0),(0,t._)([(0,v.MZ)()],Nu.prototype,"cursor",null),Nu=(0,t._)([(0,b.$)("esri.views.draw.DrawScreenTool")],Nu);const Ou=48;var Ru=n(46227),Pu=n(39990),Du=n(17467);const Fu=async(e,t,i)=>async function(e){const{selector:t,candidates:i,view:r}=e;if(!i?.length||!t)return[];const{spatialReference:s}=r,o=t,a=await async function(){return async function(){return n.e(7963).then(n.bind(n,30344))}().then((({contains:e,intersects:t,overlaps:i,simplify:r})=>({contains:e,intersects:t,overlaps:i,simplify:r})))}();return i.filter((e=>a.intersects(s,o,e.geometry)))}({candidates:t.flatMap((e=>e.graphics.toArray()))??[],selector:e,view:i}),ju=async(e,t,i,r)=>{const n=await(0,g.QZ)(async function(e){const{layers:t,selector:i,signal:r,view:n}=e;return(0,g.qr)(Promise.allSettled(t.map((async e=>e.queryFeatures(function(e,t,i,r){const{outFields:n,geometry:s}=Vu(t,i,r);return e.outFields=n,e.geometry=s,e.returnGeometry=!0,e.outSpatialReference=r.spatialReference,e}(e.createQuery(),i,e,n),{signal:r}).then((({features:e})=>e))))),r)}({selector:e,signal:r,layers:t,view:i}));return n?zu(n):[]},Zu=async(e,t,i,r)=>{const n=await(0,g.QZ)(async function(e){const{layerViews:t,selector:i,signal:r,view:n}=e;return(0,g.qr)(Promise.allSettled(t.map((async e=>{const t=e.createQuery(),{geometry:s}=Vu(i,e.layer,n);return t.outFields=["*"],t.geometry=s,t.returnGeometry=!0,t.outSpatialReference=n.spatialReference,e.queryFeatures(t,{signal:r}).then((({features:e})=>e))}))),r)}({selector:e,signal:r,layerViews:t,view:i}));return n?zu(n):[]};function zu(e){const t=[];for(let i=0;i<e.length;i++){const r=e[i];"fulfilled"===r.status&&t.push(...r.value)}return t}function Uu(e,t){if(e.includes(t))return!0;const i=t.getObjectId(),r=null!=i,{layer:n,uid:s}=t;return r?e.some((e=>{if(n===e.layer)return i===e.getObjectId()})):e.some((e=>{if(n===e.layer)return s===e.uid}))}function Vu(e,t,i){const r="displayField"in t?t.displayField:null,n=(0,Ru.mB)({displayField:r,fields:t.fields}),s=[t.objectIdField];null!=n&&t.fieldsIndex.has(n)&&s.push(n);const o="renderer"in t?(0,Pu.o)({renderer:t.renderer}):0;return{geometry:"point"===e.type?(0,Du.V)(e,o,i):e,outFields:s}}let Gu=class extends L.A.EventedAccessor{constructor(e){super(e),this._processTask=null,this.options=null,this.selection=new a.A,this.sources=null,this._process=(0,g.sg)((async(e,t)=>{const{callback:i,selector:r,completed:n}=e,s=(0,Ei.UT)((async e=>{const{sources:t,selection:s,view:o}=this;if((t?.length||o?.selectionManager.sources.length)&&o){if(r&&null!=t){const i=await async function(e){const{currentSelection:t,selector:i,signal:r,sources:n,view:s}=e;if(!n?.length)return{added:[],removed:[]};const{layers:o,layerViews:a,graphicsLayers:l}=function(e){const t=[],i=[],r=[];return e.forEach((e=>{(0,R.yZ)(e)?t.push(e):((0,R.cM)(e)||(0,R.Qz)(e))&&e.layers?.length?t.push(...e.layers.toArray()):(0,R.Rv)(e)&&e.sublayers?.length?r.push(...e.sublayers.toArray()):(0,R.V0)(e)?r.push(e):(0,eh.lO)(e)&&i.push(e)})),{layers:t,layerViews:i,graphicsLayers:r}}(n),c=(await(0,g.qr)(Promise.all([ju(i,o,s,r),Zu(i,a,s,r),Fu(i,l,s)]),r)).flat();if(!t)return{added:c,removed:[]};const h=t.toArray(),u=c.filter((e=>!Uu(h,e))),p=h.filter((e=>!Uu(c,e)));return t.removeMany(p),t.addMany(u),{added:u,removed:p}}({currentSelection:s,selector:r,signal:e,sources:t,view:o});n&&o.selectionManager?.updateSelection({current:s.toArray(),...i})}i&&i()}else s.removeAll()}));return(0,g.u7)(t,(()=>s.abort())),this._processTask=s,s.promise}),100)}initialize(){this._setup()}cancel(){this.removeAllHandles(),this._processTask?.abort()}async _setup(){const{view:e}=this;if(await e.whenReady(),this.destroyed)return;const t=this.options,i=t?.createTool??"rectangle",r=t?.mode??("polygon"===i?"click":"hybrid"),n=Symbol();this._tool=new Nu({view:e,mode:r,geometryType:i}),t?.selectOnComplete||this.addHandles(this._tool.on(["cursor-update","vertex-add","vertex-remove"],(()=>(0,g.QZ)(this._process({selector:this._selectionArea})))),n),this.addHandles([e.on("key-down",(e=>{if(!e.repeat)switch(e.key){case Vc.NE.constraint:this._tool.uniformSizeToggled=!0,e.stopPropagation();break;case Vc.NE.center:this._tool.centeredToggled=!0,e.stopPropagation()}})),e.on("key-up",(e=>{switch(e.key){case Vc.NE.constraint:this._tool.uniformSizeToggled=!1,e.stopPropagation();break;case Vc.NE.center:this._tool.centeredToggled=!1,e.stopPropagation()}})),this._tool.on("complete",(async e=>{this.removeHandles(n);const t=()=>{this.removeAllHandles(),this.emit("complete",{aborted:e.aborted,selection:this.selection.toArray()})};e.aborted?(this.cancel(),this.selection.removeAll(),t()):await this._process({selector:this._selectionArea,callback:t,completed:!0})}))],n),this.addHandles((0,Pi.hA)((()=>e.tools.remove(this._tool)))),e.addAndActivateTool(this._tool)}get _selectionArea(){const e=(0,Wi.tc)(),t=this._tool.coordinates,i=this.view.spatialReference,r=t=>{e.x=t[0],e.y=t[1];const{x:i,y:r}=this.view.toMap(e);return[i,r]};if(1===t.length){const[e,n]=r(t[0]);return new tn.A({x:e,y:n,spatialReference:i})}const n=this._tool.coordinates.map(r);if(0!==n.length)return(0,mn.$3)(n)||n.reverse(),new Sn.A({spatialReference:i,rings:[n]})}};(0,t._)([(0,v.MZ)()],Gu.prototype,"options",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Gu.prototype,"selection",void 0),(0,t._)([(0,v.MZ)()],Gu.prototype,"sources",void 0),(0,t._)([(0,v.MZ)({constructOnly:!0})],Gu.prototype,"view",void 0),Gu=(0,t._)([(0,b.$)("esri.widgets.support.Selector2D.SelectionOperation2D")],Gu);const Bu=Gu;let $u=class extends L.A.EventedAccessor{constructor(e){super(e),this._operationHandlesGroup=null,this.activeOperation=null,this.sources=null}initialize(){this.addHandles([(0,q.wB)((()=>this._sources),(e=>{this.activeOperation&&(this.activeOperation.sources=e)}))])}destroy(){this._operationHandlesGroup=(0,m.xt)(this._operationHandlesGroup)}get _sources(){const{sources:e,view:t}=this;return t&&e?.length?e.flatMap((e=>{if((0,eh.lO)(e))return e;if((0,R.cM)(e)||(0,R.Qz)(e)){const i=e.layers||[],r=i.map((e=>{const i=(0,Uc.i)(t,e)||void 0;return(0,eh.lO)(i)?i:e}));return r.length?r.toArray():i.length?i.toArray():e}const i=(0,Uc.i)(t,e)||void 0;return(0,eh.lO)(i)?i:e})):[]}get layers(){return(0,xi.Lx)(y.A.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources}set layers(e){(0,xi.Lx)(y.A.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources=e}get state(){const{_sources:e,view:t}=this,i=!e?.length&&!t?.selectionManager.sources.length;return this.activeOperation?"active":t?.ready&&!i?"ready":"disabled"}cancel(){"active"===this.state&&(this.activeOperation?.cancel(),this._set("activeOperation",null))}activate(e){const{_sources:t,state:i,view:r}=this,n=!t?.length&&!r?.selectionManager.sources.length;if("disabled"===i||n||!this.view)return;"active"===i&&this.cancel();const s=new Bu({view:this.view,sources:t,options:e});return this._operationHandlesGroup=(0,Pi.vE)([s.selection.on("change",(e=>this.emit("selection-change",e))),s.once("complete",(e=>this._onOperationComplete(e)))]),this._set("activeOperation",s),s}_onOperationComplete(e){this._operationHandlesGroup=(0,m.xt)(this._operationHandlesGroup),this._set("activeOperation",null),this.emit("complete",e)}};(0,t._)([(0,v.MZ)()],$u.prototype,"_sources",null),(0,t._)([(0,v.MZ)({readOnly:!0})],$u.prototype,"activeOperation",void 0),(0,t._)([(0,v.MZ)()],$u.prototype,"layers",null),(0,t._)([(0,v.MZ)()],$u.prototype,"sources",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],$u.prototype,"state",null),(0,t._)([(0,v.MZ)()],$u.prototype,"view",void 0),$u=(0,t._)([(0,b.$)("esri.widgets.support.SelectionToolbar.SelectionToolbarViewModel")],$u);const Hu=$u,qu={lassoTool:!0,rectangleTool:!0},Wu={createTool:"polygon",mode:"freehand"},Ku={createTool:"rectangle"},Yu="esri-selection-toolbar",Ju={base:Yu,widgetIcon:Do.T.vertexGps,container:`${Yu}__container`,toolButton:`${Yu}__tool-button`};let Xu=class extends Io.A{constructor(e,t){super(e,t),this._viewModelHandlesGroup=null,this.activeToolInfo=null,this.messages=null,this.toolConfigs=[],this.viewModel=new Hu,this.visibleElements={...qu},this._viewModelHandlesGroup=(0,Pi.vE)([this.viewModel.on("complete",(e=>{this._set("activeToolInfo",null),this.emit("complete",e)}))])}destroy(){this._viewModelHandlesGroup=(0,m.xt)(this._viewModelHandlesGroup)}loadDependencies(){return(0,Ko.W)({action:()=>Promise.all([n.e(2006),n.e(7053),n.e(8718),n.e(1644)]).then(n.bind(n,31644)),icon:()=>Promise.all([n.e(2006),n.e(855)]).then(n.bind(n,50855))})}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get layers(){return(0,xi.Lx)(y.A.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources}set layers(e){(0,xi.Lx)(y.A.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources=e}get sources(){return this.viewModel.sources}set sources(e){this.viewModel.sources=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...qu,...e}}get visibleToolCount(){const{view:e,toolConfigs:t,visibleElements:i}=this;return(t?.length??0)+("2d"===e?.type?(i.lassoTool?1:0)+(i.rectangleTool?1:0):0)}activate(e){if(this.cancel(),"disabled"!==this.viewModel.state)switch(e){case"lasso":this._activateTool("lasso");break;case"rectangle":this._activateTool("rectangle");break;default:this._activateTool(e)}}cancel(){this.viewModel.cancel(),this._set("activeToolInfo",null)}render(){return(0,Zo.K)("div",{"aria-label":this.label,class:this.classes(Ju.base,Po.D.widget)},(0,Zo.K)("div",{class:Ju.container},this._renderDefaultTools(),this._renderCustomTools()))}_renderDefaultTools(){if("2d"===this.view?.type)return[this._renderRectangleTool(),this._renderLassoTool()]}_renderCustomTools(){if(this.toolConfigs?.length)return this.toolConfigs.map((e=>(0,Zo.K)("calcite-action",{active:this.activeToolInfo?.toolName===e.toolName,bind:this,class:Ju.toolButton,disabled:"disabled"===this.viewModel.state,label:e.toolName,onclick:()=>this._onCustomToolClick(e.toolName),scale:"s",text:e.toolName,title:e.toolName},(0,Zo.K)("calcite-icon",{icon:e.icon||"selection",scale:"s"}))))}_renderLassoTool(){const{activeToolInfo:e,messages:t,visibleElements:i}=this;if(i.lassoTool)return(0,Zo.K)("calcite-action",{active:"lasso"===e?.toolName,bind:this,disabled:"disabled"===this.viewModel.state,label:t.selectByLasso,onclick:this._onLassoToolClick,scale:"s",text:t.selectByLasso,title:t.selectByLasso},(0,Zo.K)("calcite-icon",{icon:"lasso-select",scale:"s"}))}_renderRectangleTool(){const{activeToolInfo:e,messages:t,visibleElements:i}=this;if(i.rectangleTool)return(0,Zo.K)("calcite-action",{active:"rectangle"===e?.toolName,bind:this,disabled:"disabled"===this.viewModel.state,label:t.selectByRectangle,onclick:this._onRectangleToolClick,scale:"s",text:t.selectByRectangle,title:t.selectByRectangle},(0,Zo.K)("calcite-icon",{icon:"cursor-marquee",scale:"s"}))}_onCustomToolClick(e){this._toggleTool(e)}_onLassoToolClick(){this._toggleTool("lasso")}_onRectangleToolClick(){this._toggleTool("rectangle")}_activateTool(e){const t=this._getToolOptions(e);if(!t)return;const i=this.viewModel.activate(t);i&&this._set("activeToolInfo",{toolName:e,operation:i})}_toggleTool(e){if(this.activeToolInfo){const t=this.activeToolInfo.toolName;if(this.cancel(),t===e)return}this._activateTool(e)}_getToolOptions(e){return"lasso"===e?Wu:"rectangle"===e?Ku:this.toolConfigs.find((t=>t.toolName===e))}};(0,t._)([(0,v.MZ)({readOnly:!0})],Xu.prototype,"activeToolInfo",void 0),(0,t._)([(0,v.MZ)()],Xu.prototype,"label",null),(0,t._)([(0,v.MZ)()],Xu.prototype,"layers",null),(0,t._)([(0,v.MZ)(),(0,jo.G)("esri/widgets/support/SelectionToolbar/t9n/SelectionToolbar")],Xu.prototype,"messages",void 0),(0,t._)([(0,v.MZ)()],Xu.prototype,"sources",null),(0,t._)([(0,v.MZ)()],Xu.prototype,"toolConfigs",void 0),(0,t._)([(0,v.MZ)()],Xu.prototype,"view",null),(0,t._)([(0,v.MZ)()],Xu.prototype,"viewModel",void 0),(0,t._)([(0,v.MZ)()],Xu.prototype,"visibleElements",void 0),(0,t._)([(0,O.w)("visibleElements")],Xu.prototype,"castVisibleElements",null),(0,t._)([(0,v.MZ)()],Xu.prototype,"visibleToolCount",null),Xu=(0,t._)([(0,b.$)("esri.widgets.support.SelectionToolbar")],Xu);const Qu=Xu;var ep=n(58042);const tp=()=>Promise.all([(0,Ko.W)({icon:()=>Promise.all([n.e(2006),n.e(855)]).then(n.bind(n,50855)),label:()=>Promise.all([n.e(2006),n.e(3448)]).then(n.bind(n,43448)),switch:()=>Promise.all([n.e(2006),n.e(9091),n.e(11)]).then(n.bind(n,40011)),tooltip:()=>Promise.all([n.e(2006),n.e(9575),n.e(6903)]).then(n.bind(n,59284))})]),ip="esri-labeled-switch",rp={label:`${ip}__label`,labelContent:`${ip}__label-content`,icon:`${ip}__icon`,tooltip:`${ip}__tooltip`};function np({checked:e,disabled:t,hint:i,key:r,label:n,onChange:s}){return(0,Zo.K)("calcite-label",{class:rp.label,disabled:t,key:r,layout:"inline-space-between",scale:"s"},(0,Zo.K)("div",{class:rp.labelContent,key:"label-content"},i?(0,Zo.K)(Zo.w,null,(0,Zo.K)("div",null,n),(0,Zo.K)("calcite-icon",{class:rp.icon,icon:"information",id:r,scale:"s"}),(0,Zo.K)("calcite-tooltip",{class:rp.tooltip,referenceElement:r},i)):n),(0,Zo.K)("calcite-switch",{checked:e,disabled:t,scale:"s",onCalciteSwitchChange:e=>s(e.target.checked)}))}let sp=class extends k.A{constructor(e){super(e),this.directionModePicker=!1,this.header=!1,this.labelsToggle=!0,this.tooltipsToggle=!0}};(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],sp.prototype,"directionModePicker",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],sp.prototype,"header",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],sp.prototype,"labelsToggle",void 0),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],sp.prototype,"tooltipsToggle",void 0),sp=(0,t._)([(0,b.$)("esri.widgets.support.SketchTooltipControls.VisibleElements")],sp);const op=sp,ap="esri-sketch-tooltip-controls",lp={base:ap,block:`${ap}__block`,blockContent:`${ap}__block-content`,hintIcon:`${ap}__hint-icon`,radioButtonLabelWrapper:`${ap}__radio-button-label-wrapper`};let cp=class extends Io.A{constructor(e,t){super(e,t),this.viewModel=null,this.visibleElements=new op,this.sketchOptions=new Bc.A,this.viewType=void 0,this._onTooltipsEnabledChange=e=>{this.sketchOptions.tooltips.enabled=e},this._onLabelsEnabledChange=e=>{this.sketchOptions.labels.enabled=e},this._onDirectionModeChange=e=>{this.sketchOptions.values.directionMode=e.target.selectedItem.value}}loadDependencies(){return Promise.all([(0,Ko.W)({block:()=>Promise.all([n.e(2006),n.e(7053),n.e(9575),n.e(8718),n.e(5566),n.e(3668),n.e(9525)]).then(n.bind(n,79525)),label:()=>Promise.all([n.e(2006),n.e(3448)]).then(n.bind(n,43448)),icon:()=>Promise.all([n.e(2006),n.e(855)]).then(n.bind(n,50855)),"radio-button":()=>Promise.all([n.e(2006),n.e(9091),n.e(5335)]).then(n.bind(n,45335)),"radio-button-group":()=>Promise.all([n.e(2006),n.e(4246)]).then(n.bind(n,84246))}),tp()])}render(){const{label:e,visibleElements:t}=this,i=this._renderContent();return(0,Zo.K)("div",{"aria-label":e,class:this.classes(lp.base,Po.D.widget)},i?(0,Zo.K)("calcite-block",{class:lp.block,heading:t.header?this.label:"",key:"content-block",open:!0},(0,Zo.K)("div",{class:lp.blockContent,key:"content"},i)):void 0)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}_renderContent(){const{visibleElements:e,viewType:t}=this,i=[e.tooltipsToggle?this._renderTooltipsToggle():null,e.labelsToggle&&"2d"!==t?this._renderLabelsToggle():null,e.directionModePicker?this._renderDirectionModePicker():null].filter(B.Ru);return 0===i.length?null:i}_renderTooltipsToggle(){const{messages:e,sketchOptions:t}=this;return(0,Zo.K)(np,{checked:t.tooltips.effectiveEnabled,hint:e.tooltipsToggleHint,key:`${this.id}__tooltips`,label:e.tooltipsToggle,onChange:this._onTooltipsEnabledChange})}_renderLabelsToggle(){const{messages:e,sketchOptions:t}=this;return(0,Zo.K)(np,{checked:t.labels.enabled,hint:e.labelsToggleHint,key:`${this.id}__labels`,label:e.labelsToggle,onChange:this._onLabelsEnabledChange})}_renderDirectionModePicker(){const{messages:e,sketchOptions:t}=this,{directionMode:i}=t.values;return(0,Zo.K)("calcite-label",{key:"direction-mode",layout:"default",scale:"s"},e.directionModePicker,(0,Zo.K)("calcite-radio-button-group",{key:"radio-button-group",layout:"horizontal",name:this.id,scale:"s",value:i,onCalciteRadioButtonGroupChange:this._onDirectionModeChange},this._renderDirectionModeOption("relative",i,e.directionModeRelative),this._renderDirectionModeOption("absolute",i,e.directionModeAbsolute)))}_renderDirectionModeOption(e,t,i){return(0,Zo.K)("calcite-label",{key:e,layout:"inline",scale:"s"},(0,Zo.K)("calcite-radio-button",{checked:e===t,scale:"s",value:e}),(0,Zo.K)("div",{class:lp.radioButtonLabelWrapper,key:"label-wrapper"},(0,Zo.K)("calcite-icon",{icon:ep.N[e],scale:"s"}),i))}};(0,t._)([(0,v.MZ)()],cp.prototype,"label",null),(0,t._)([(0,v.MZ)({type:op,nonNullable:!0})],cp.prototype,"visibleElements",void 0),(0,t._)([(0,v.MZ)(),(0,jo.G)("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],cp.prototype,"messages",void 0),(0,t._)([(0,v.MZ)({nonNullable:!0,type:Bc.A})],cp.prototype,"sketchOptions",void 0),(0,t._)([(0,v.MZ)({type:String})],cp.prototype,"viewType",void 0),cp=(0,t._)([(0,b.$)("esri.widgets.support.SketchTooltipControls")],cp);const hp=cp;var up=n(78851);const pp=e=>dp(e)||fp(e),dp=e=>{if(!("type"in e))return!1;switch(e.type){case"feature":case"geojson":case"csv":case"graphics":case"wfs":case"map-notes":case"oriented-imagery":case"scene":case"building-scene":case"subtype-sublayer":return!0;default:return!1}},fp=e=>{const t=Ql(e);if(null!=t&&e.hasOwnProperty(t)&&null!=e[t])for(const i of e[t])if(pp(i))return!0;return!1};var yp;let mp=yp=class extends gc{constructor(e){super(e),this.children=new a.A,this.parent=null}get allChildrenEnabled(){return this.children.every((e=>e.enabled))??!1}get childLayerIds(){return this.children.map((e=>e.layer.id)).toArray()}get enabled(){return null!=this.featureSource&&this.featureSource.enabled}get featureSource(){const{layer:e,getFeatureSnappingSources:t}=this;return t().find((t=>t.layer===e))}get hasChildrenEnabled(){return this.children.some((e=>e.enabled))}_initializeChildLayers(e){if(!e)return;const t=e.filter(pp);super._initializeChildLayers(t)}_makeChildren(e){return e.map((e=>tc(e)?new yp({layer:e,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null)).filter(B.Ru).reverse()}};(0,t._)([(0,v.MZ)()],mp.prototype,"allChildrenEnabled",null),(0,t._)([(0,v.MZ)()],mp.prototype,"children",void 0),(0,t._)([(0,v.MZ)()],mp.prototype,"childLayerIds",null),(0,t._)([(0,v.MZ)()],mp.prototype,"enabled",null),(0,t._)([(0,v.MZ)()],mp.prototype,"featureSource",null),(0,t._)([(0,v.MZ)({constructOnly:!0})],mp.prototype,"getFeatureSnappingSources",void 0),(0,t._)([(0,v.MZ)()],mp.prototype,"hasChildrenEnabled",null),(0,t._)([(0,v.MZ)()],mp.prototype,"parent",void 0),mp=yp=(0,t._)([(0,b.$)("esri.widgets.support.SnappingControls.SnappingListItem")],mp);let gp=class extends Sc{constructor(){super(...arguments),this.featureSnappingSources=new a.A}get operationalItemsFlat(){return this.operationalItems.flatten((e=>e.children))}get selectableItems(){return this.operationalItemsFlat.filter((e=>!e.children?.length))}_compileList(){const e=this.view?.map?.layers;if(!e)return;const t=e.filter(pp);this._watchLayersListMode(t);const i=this._getViewableLayers(t);i?.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createListItem(e){return new mp({layer:e,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};(0,t._)([(0,v.MZ)()],gp.prototype,"featureSnappingSources",void 0),(0,t._)([(0,v.MZ)()],gp.prototype,"operationalItems",void 0),(0,t._)([(0,v.MZ)()],gp.prototype,"operationalItemsFlat",null),(0,t._)([(0,v.MZ)()],gp.prototype,"selectableItems",null),gp=(0,t._)([(0,b.$)("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],gp);let vp=class extends k.A{constructor(e){super(e),this.layerListViewModel=new gp,this.snappingOptions=new Uh,this.view=null}initialize(){this.addHandles([(0,q.wB)((()=>({viewModel:this.layerListViewModel,view:this.view})),(({viewModel:e,view:t})=>{e.view=t}),q.Vh),(0,q.wB)((()=>({viewModel:this.layerListViewModel,sources:this.snappingOptions?.featureSources})),(({viewModel:e,sources:t})=>{e.featureSnappingSources=t}),q.Vh)])}get allLayersEnabled(){return(this.layerListViewModel?.selectableItems??[]).every((e=>e.enabled))}get allLayersDisabled(){return(this.layerListViewModel?.selectableItems??[]).every((e=>!e.enabled))}get layersEnabledCount(){return this.layerListViewModel?.selectableItems?.filter((e=>e.enabled)).length??0}get state(){return this.snappingOptions?"ready":"disabled"}toggleSnappingForLayers(e,t){e?.forEach((e=>t?this.enableSnappingForLayer(e):this.disableSnappingForLayer(e)))}toggleSnappingForAllLayers(e){this.layerListViewModel.selectableItems.forEach((({layer:{id:t}})=>{e?this.enableSnappingForLayer(t):this.disableSnappingForLayer(t)}))}enableSnappingForLayer(e){(this._findSnappingSourceForLayer(e)??this._makeSnappingSourceForLayer(e)).enabled=!0}disableSnappingForLayer(e){const t=this._findSnappingSourceForLayer(e);t&&(t.enabled=!1)}updateEnabledFeatureSources(e){for(const t of this.snappingOptions.featureSources)tc(t.layer)&&(t.enabled=e.includes(t.layer.id))}_findSnappingSourceForLayer(e){return this.snappingOptions.featureSources.find((t=>t.layer.id===e))}_makeSnappingSourceForLayer(e){const t=this.layerListViewModel.operationalItemsFlat.find((t=>t.layer.id===e))?.layer;if(!t)throw new h.A("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${e} because no such layer was found in the view`);const i=new Zh({layer:t});return this.snappingOptions.featureSources.add(i),i}};(0,t._)([(0,v.MZ)()],vp.prototype,"allLayersEnabled",null),(0,t._)([(0,v.MZ)()],vp.prototype,"allLayersDisabled",null),(0,t._)([(0,v.MZ)({constructOnly:!0})],vp.prototype,"layerListViewModel",void 0),(0,t._)([(0,v.MZ)()],vp.prototype,"layersEnabledCount",null),(0,t._)([(0,v.MZ)({type:Uh,nonNullable:!0})],vp.prototype,"snappingOptions",void 0),(0,t._)([(0,v.MZ)()],vp.prototype,"state",null),(0,t._)([(0,v.MZ)()],vp.prototype,"view",void 0),vp=(0,t._)([(0,b.$)("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],vp);const _p=vp,bp="esri-snapping-controls",wp={base:bp,widgetIcon:Do.T.vertexGps,container:`${bp}__container`,item:`${bp}__item`,toggleBlock:`${bp}__toggle-block`,layerListBlock:`${bp}__layer-list-block`,layerList:`${bp}__layer-list`,layerListFilter:`${bp}__layer-list__filter`,layerListButton:`${bp}__layer-list__button`,layerListItem:`${bp}__layer-list__item`,layerListGroup:`${bp}__layer-list__group`,nestedContainer:`${bp}__nested-container`},Mp="check-square-f",Tp="square";let Sp=class extends Io.A{constructor(e,t){super(e,t),this._defaultViewModel=null,this._layerListFilter=null,this.iconClass=wp.widgetIcon,this.icon=null,this.layerListOpen=!0,this.messages=null,this.visibleElements=new _u,this._enableSnappingSwitchChange=e=>{this.snappingOptions.enabled=e},this._featureEnabledSwitchChange=e=>{this.snappingOptions.featureEnabled=e},this._selfEnabledSwitchChange=e=>{this.snappingOptions.selfEnabled=e},this._onToggleLayersButtonClick=e=>{this.viewModel.toggleSnappingForAllLayers(!this.viewModel.allLayersEnabled),requestAnimationFrame((()=>e.target.setFocus()))};const{snappingOptions:i,view:r,viewModel:n}=e;this.viewModel=n??(this._defaultViewModel=new _p({snappingOptions:i,view:r}))}normalizeCtorArgs(e){const{snappingOptions:t,view:i,viewModel:r,...n}=e;return n}destroy(){this.viewModel!==this._defaultViewModel&&(this._defaultViewModel=(0,m.pR)(this._defaultViewModel))}loadDependencies(){return Promise.all([(0,Ko.W)({accordion:()=>n.e(9666).then(n.bind(n,99666)),"accordion-item":()=>Promise.all([n.e(2006),n.e(2771)]).then(n.bind(n,55152)),action:()=>Promise.all([n.e(2006),n.e(7053),n.e(8718),n.e(1644)]).then(n.bind(n,31644)),block:()=>Promise.all([n.e(2006),n.e(7053),n.e(9575),n.e(8718),n.e(5566),n.e(3668),n.e(9525)]).then(n.bind(n,79525)),button:()=>Promise.all([n.e(2006),n.e(7053),n.e(9091),n.e(5399)]).then(n.bind(n,45399)),icon:()=>Promise.all([n.e(2006),n.e(855)]).then(n.bind(n,50855)),input:()=>Promise.all([n.e(2006),n.e(7053),n.e(9091),n.e(9839),n.e(1512)]).then(n.bind(n,21512)),list:()=>Promise.all([n.e(2006),n.e(7053),n.e(9091),n.e(9839),n.e(9989)]).then(n.bind(n,39989)),"list-item":()=>Promise.all([n.e(2006),n.e(7053),n.e(8718),n.e(6784)]).then(n.bind(n,36784))}),tp()])}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){e!==this._get("viewModel")&&(null!=this._defaultViewModel&&this._defaultViewModel===e||(this._defaultViewModel=(0,m.pR)(this._defaultViewModel)),this._set("viewModel",e))}render(){const{label:e}=this;return(0,Zo.K)("div",{"aria-label":e,class:this.classes(wp.base,Po.D.widget)},(0,Zo.K)("div",{class:wp.container},this._renderContent()))}_renderContent(){return[this._renderToggles(),this._renderLayerList()]}_renderToggles(){const{visibleElements:e}=this,t=[e.selfEnabledToggle?this._renderSelfEnabledToggle():null,e.featureEnabledToggle?this._renderFeatureEnabledToggle():null].filter(B.Ru),i=[e.enabledToggle?this._renderEnabledToggle():null,t.length>0?(0,Zo.K)("div",{class:wp.nestedContainer},t):null].filter(B.Ru);return 0===i.length?null:(0,Zo.K)("calcite-block",{class:wp.toggleBlock,heading:e.header?this.label:"",key:"toggle-block",open:!0},i)}_renderEnabledToggle(){const{messages:e,viewModel:t}=this,{snappingOptions:i}=t;return(0,Zo.K)(np,{checked:i.enabled,disabled:this._enabledToggleDisabled,key:`${this.id}__enabled-toggle`,label:e.enableSnapping,onChange:this._enableSnappingSwitchChange})}_renderSelfEnabledToggle(){const{messages:e,viewModel:t}=this,{snappingOptions:i}=t,r=i.enabled&&i.selfEnabled;return(0,Zo.K)(np,{checked:r,disabled:this._secondaryElementsDisabled,key:`${this.id}__self-enabled-toggle`,label:e.geometryGuides,onChange:this._selfEnabledSwitchChange})}_renderFeatureEnabledToggle(){const{messages:e,viewModel:t}=this,{snappingOptions:i}=t,r=i.enabled&&i.featureEnabled;return(0,Zo.K)(np,{checked:r,disabled:this._secondaryElementsDisabled,key:`${this.id}__feature-enabled-toggle`,label:e.featureToFeature,onChange:this._featureEnabledSwitchChange})}_renderLayerList(){if(!this.visibleElements.layerList)return null;const{messages:e,viewModel:t}=this,i=t.layerListViewModel.operationalItems.length>9?(0,Zo.K)("calcite-input",{class:wp.layerListFilter,clearable:!0,placeholder:e?.searchLayers,onCalciteInputInput:({target:{value:e}})=>{this._layerListFilter=""===e?null:new RegExp(e,"i")}}):null,r=this._secondaryElementsDisabled,n=this.layerListOpen&&!r;return(0,Zo.K)("calcite-block",{class:wp.layerListBlock,collapsible:!0,disabled:this._secondaryElementsDisabled,heading:e.snappingLayers,key:"list-block",open:n,onCalciteBlockToggle:e=>this.layerListOpen=e.target.open},i,this._renderToggleLayersButton(),(0,Zo.K)("calcite-list",{class:wp.layerList},this._renderLayerListItemCollection(t.layerListViewModel.operationalItems,this._layerListFilter)))}_renderLayerListItemCollection(e,t){return e.map((e=>{if(!t||this._itemTitleMatchesFilter(e,t))return e.children.length>0?this._renderLayerListItemGroup(e):this._renderLayerListItem(e);const i=e.children.filter((e=>this._itemTitleMatchesFilter(e,t)));return i.length>0?this._renderLayerListItemGroup(e,i):null})).toArray().filter(B.Ru)}_renderToggleLayersButton(){if(!this.visibleElements.layerListToggleLayersButton)return null;const{viewModel:{allLayersEnabled:e},messages:t}=this,i=e?t.disableAllLayers:t.enableAllLayers;return(0,Zo.K)("calcite-button",{appearance:"transparent",class:wp.layerListButton,label:i,name:"layer-toggle",onclick:this._onToggleLayersButtonClick,scale:"m"},i)}_renderLayerListItem(e){const{messages:{untitledLayer:t}}=this,i=e.title||t,r=e.enabled;return(0,Zo.K)("calcite-list-item",{class:wp.layerListItem,key:`${this.id}-list-item-${e.uid}`,label:i,onCalciteListItemSelect:()=>{this._handleLayerListItemChange({checked:!r,value:e.layer.id})}},(0,Zo.K)("calcite-icon",{icon:r?Mp:Tp,scale:"s",slot:"content-start"}))}_renderLayerListItemGroup(e,t){const{allChildrenEnabled:i,children:r,hasChildrenEnabled:n,title:s}=e,o=this.messages,a=s||o.untitledLayer,l=s&&""!==s?s:(0,up.c)(),c=!!t,h=t??r,u=i?Mp:n?"minus-square":Tp,p=i?o.disableAllLayers:o.enableAllLayers;return(0,Zo.K)("calcite-list-item",{class:wp.layerListItem,key:l},(0,Zo.K)("calcite-accordion",{appearance:"transparent",class:wp.layerListGroup},(0,Zo.K)("calcite-accordion-item",{expanded:c,heading:a,key:e.uid},(0,Zo.K)("calcite-action",{onclick:()=>{this.viewModel.toggleSnappingForLayers(e.childLayerIds,!i)},scale:"m",slot:"actions-start",text:p,textEnabled:!1},(0,Zo.K)("calcite-icon",{icon:u,scale:"s"})),(0,Zo.K)("calcite-list",null,this._renderLayerListItemCollection(h)))))}_itemTitleMatchesFilter(e,t){return null!=t&&t.test(e.title)}async _handleLayerListItemChange(e){e.checked?this.viewModel.enableSnappingForLayer(e.value):this.viewModel.disableSnappingForLayer(e.value)}get _enabledToggleDisabled(){const e=this.snappingOptions;return e.enabledToggled||e.forceDisabled}get _secondaryElementsDisabled(){return this._enabledToggleDisabled||!this.snappingOptions.enabled}};(0,t._)([(0,v.MZ)()],Sp.prototype,"_defaultViewModel",void 0),(0,t._)([(0,v.MZ)()],Sp.prototype,"_layerListFilter",void 0),(0,t._)([(0,v.MZ)()],Sp.prototype,"iconClass",void 0),(0,t._)([(0,v.MZ)()],Sp.prototype,"icon",void 0),(0,t._)([(0,v.MZ)()],Sp.prototype,"label",null),(0,t._)([(0,v.MZ)({type:Boolean,nonNullable:!0})],Sp.prototype,"layerListOpen",void 0),(0,t._)([(0,v.MZ)(),(0,jo.G)("esri/widgets/support/SnappingControls/t9n/SnappingControls")],Sp.prototype,"messages",void 0),(0,t._)([(0,v.MZ)()],Sp.prototype,"snappingOptions",null),(0,t._)([(0,v.MZ)()],Sp.prototype,"view",null),(0,t._)([(0,v.MZ)()],Sp.prototype,"viewModel",null),(0,t._)([(0,v.MZ)({type:_u,nonNullable:!0})],Sp.prototype,"visibleElements",void 0),(0,t._)([(0,v.MZ)()],Sp.prototype,"_enabledToggleDisabled",null),(0,t._)([(0,v.MZ)()],Sp.prototype,"_secondaryElementsDisabled",null),Sp=(0,t._)([(0,b.$)("esri.widgets.support.SnappingControls")],Sp);const Ap=Sp;var Ep=n(13033);const xp="esri-sketch",Ip={base:xp,widgetIcon:Do.T.edit,verticalLayout:`${xp}--vertical`,panel:`${xp}__panel`,infoPanel:`${xp}__info-panel`,section:`${xp}__section`,toolSection:`${xp}__tool-section`,infoSection:`${xp}__info-section`,infoCountSection:`${xp}__info-count-section`,menuContainer:`${xp}__menu-container`,menuHeader:`${xp}__menu-header`,menuTitle:`${xp}__menu-title`,featureCountBadge:`${xp}__feature-count-badge`,featureCountText:`${xp}__feature-count-text`,featureCountNumber:`${xp}__feature-count-number`,actionToggle:`${xp}__action-toggle`,actionToggleOn:`${xp}__action-toggle--on`,actionTitle:`${xp}__item-action-title`,actionIcon:`${xp}__item-action-icon`};let Cp=class extends Io.A{constructor(e,t){super(e,t),this._activeCreateOptions=null,this._menuOpen=!1,this._selectionToolbar=null,this._viewModelHandlesGroup=null,this.availableCreateTools=["point","polyline","polygon","rectangle","circle"],this.creationMode="continuous",this.iconClass=Ip.widgetIcon,this.icon=null,this.layout="horizontal",this.messages=null,this.messagesCommon=null,this.visibleElements=new Tu,this._activateCreateTool=this._activateCreateTool.bind(this),this.viewModel=e?.viewModel||new gu}initialize(){const{layer:e,view:t}=this,i=new Qu({view:"2d"===t?.type?t:null,sources:e?[e]:null});this.addHandles([(0,q.wB)((()=>this.viewModel),(e=>{this._viewModelHandlesGroup=(0,m.xt)(this._viewModelHandlesGroup),e&&(this._viewModelHandlesGroup=(0,Pi.vE)([e.on("create",(e=>{this.scheduleRender(),this._onCreateOperation(e)})),e.on("update",(()=>this.scheduleRender())),e.on("delete",(e=>this.emit("delete",e))),e.on("undo",(()=>this.scheduleRender())),e.on("redo",(()=>this.scheduleRender())),(0,q.wB)((()=>e.layer),(e=>{this._selectionToolbar&&(this._selectionToolbar.sources=e?[e]:null)})),(0,q.wB)((()=>e.view),(e=>{this._selectionToolbar&&(this._selectionToolbar.view="2d"===e?.type?e:null)})),(0,q.wB)((()=>e.state),(()=>this.notifyChange("state")))]))}),q.pc),(0,q.z7)((()=>i.activeToolInfo),(()=>this.viewModel.cancel())),i.on("complete",(e=>this._onSelectionOperationComplete(e))),(0,q.wB)((()=>{const{selectionTools:e}=this.visibleElements;return{lassoTool:!!e?.["lasso-selection"],rectangleTool:!!e?.["rectangle-selection"]}}),(e=>{Object.assign(i.visibleElements,e)}),q.pc)]),this._selectionToolbar=i}loadDependencies(){return(0,Ko.W)({action:()=>Promise.all([n.e(2006),n.e(7053),n.e(8718),n.e(1644)]).then(n.bind(n,31644)),icon:()=>Promise.all([n.e(2006),n.e(855)]).then(n.bind(n,50855))})}destroy(){this._selectionToolbar?.destroy(),this._viewModelHandlesGroup=(0,m.xt)(this._viewModelHandlesGroup)}get activeTool(){const e=this._selectionToolbar?.activeToolInfo;if(e)switch(e.toolName){case"lasso":return"lasso-selection";case"rectangle":return"rectangle-selection";case"default":return"custom-selection"}return this.viewModel.activeTool}get createGraphic(){return this.viewModel.createGraphic}get defaultCreateOptions(){return this.viewModel.defaultCreateOptions}set defaultCreateOptions(e){this.viewModel.defaultCreateOptions=e}get defaultUpdateOptions(){return this.viewModel.defaultUpdateOptions}set defaultUpdateOptions(e){this.viewModel.defaultUpdateOptions=e}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(e){this.viewModel.labelOptions=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get state(){return this._selectionToolbar?.activeToolInfo?"active":this.viewModel.state}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(e){this.viewModel.tooltipOptions=e}get updateGraphics(){return this.viewModel.updateGraphics}get valueOptions(){return this.viewModel.valueOptions}set valueOptions(e){this.viewModel.valueOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){const t=this._get("viewModel");e!==t&&(t&&(0,m.pR)(t),this._set("viewModel",e))}get _effectiveAvailableCreateTools(){const{availableCreateTools:e,visibleElements:t}=this;return e?.filter((e=>!!t.createTools?.[e]))}create(e,t){this._activeCreateOptions=t||null,this.viewModel.create(e,t)}update(e,t){return this.viewModel.update(e,t)}complete(){this.viewModel.complete()}cancel(){this._selectionToolbar?.cancel(),this.viewModel.cancel()}undo(){this.viewModel.undo(),this.view?.focus()}redo(){this.viewModel.redo(),this.view?.focus()}delete(){this.viewModel.delete()}duplicate(){return this.viewModel.duplicate()}render(){const{label:e,layout:t,viewModel:{state:i}}=this;return(0,Zo.K)("div",{"aria-label":e,class:this.classes(Ip.base,Po.D.widget,{[Po.D.disabled]:"disabled"===i,[Ip.verticalLayout]:"vertical"===t})},(0,Zo.K)("div",{class:Ip.panel,role:"toolbar"},this._renderTopPanelContents()),(0,Zo.K)("div",{class:this.classes(Ip.panel,Ip.infoPanel)},this._renderInfoPanelContents()))}_renderTopPanelContents(){const e=this.classes(Ip.section,Ip.toolSection),{_effectiveAvailableCreateTools:t,visibleElements:i,viewModel:r}=this;return[r.updateOnGraphicClick||this._selectionToolbar?.visibleToolCount?(0,Zo.K)("div",{class:e,key:"selection-button-container",role:"menu"},this._renderDefaultSelectionButton(),this._renderSelectionToolbar()):null,t?.length?(0,Zo.K)("div",{class:e,role:"menu"},this._renderDrawActions()):null,i.undoRedoMenu?(0,Zo.K)("div",{class:e,key:"undo-redo-menu-button-container",role:"menu"},this._renderUndoRedoMenuButtons()):null,i.settingsMenu?(0,Zo.K)("div",{class:Ip.section,key:"settings-menu-button-container"},this._renderSettingsMenuButton()):null]}_renderInfoPanelContents(){return this._menuOpen?this._renderSettingsMenu():this.updateGraphics.length?[(0,Zo.K)("div",{class:this.classes(Ip.section,Ip.infoSection,Ip.infoCountSection),key:"feature-count-container"},this._renderFeatureCount()),(0,Zo.K)("div",{class:this.classes(Ip.section,Ip.infoSection),key:"delete-button-container"},this._renderDuplicateButton(),this._renderDeleteButton())]:void 0}_renderSettingsMenu(){const{messagesCommon:e,snappingOptions:t,view:i,viewModel:r,visibleElements:n}=this,s={directionModePicker:n.directionModePicker,labelsToggle:n.labelsToggle,tooltipsToggle:n.tooltipsToggle};return(0,Zo.K)("div",{class:Ip.menuContainer,"data-testid":"menu",key:"settings-menu-container",role:"menu"},(0,Zo.K)("header",{class:Ip.menuHeader,key:"settings-menu-header"},(0,Zo.K)("span",{class:Ip.menuTitle},e.settings)),(0,vo.Mb)(s)?(0,Zo.K)(hp,{sketchOptions:r.sketchOptions,viewType:i?.type,visibleElements:s}):void 0,n.snappingControls&&i&&t?(0,Zo.K)(Ap,{snappingOptions:t,view:i,visibleElements:n.snappingControlsElements}):void 0)}_renderFeatureCount(){const{layout:e,messages:t,updateGraphics:{length:i}}=this,r=(0,Ep.V)(t.selectedCount,{count:i});return(0,Zo.K)("div",{"aria-label":r,class:Ip.featureCountBadge},(0,Zo.K)("span",{class:Ip.featureCountNumber},"vertical"===e?i:r))}_renderDuplicateButton(){if(!this.visibleElements.duplicateButton)return;const e=this.messages,t=this.updateGraphics.length>1?e.duplicateFeatures:e.duplicateFeature;return(0,Zo.K)("calcite-action",{bind:this,onclick:this._onDuplicateSelect,scale:"s",text:t,title:t},(0,Zo.K)("calcite-icon",{icon:"copy",scale:"s"}))}_renderDeleteButton(){const e=this.messages,t=this.updateGraphics.length>1?e.deleteFeatures:e.deleteFeature;return(0,Zo.K)("calcite-action",{bind:this,onclick:this.delete,scale:"s",text:t,title:t},(0,Zo.K)("calcite-icon",{icon:"trash",scale:"s"}))}_renderDefaultSelectionButton(){if(!this.viewModel.updateOnGraphicClick)return;const{messages:{selectFeature:e},state:t}=this;return(0,Zo.K)("calcite-action",{active:"ready"===t,bind:this,disabled:"disabled"===t,onclick:this._activateDefaultSelectTool,scale:"s",text:e,title:e},(0,Zo.K)("calcite-icon",{icon:"cursor",scale:"s"}))}_renderSelectionToolbar(){if("2d"===this.view?.type&&this._selectionToolbar)return this._selectionToolbar.render()}_renderDrawActions(){const{messages:e}=this;return this._effectiveAvailableCreateTools?.map((t=>{switch(t){case"point":return this._renderAction(t,e.drawPoint,"pin");case"polyline":return this._renderAction(t,e.drawPolyline,"line");case"polygon":return this._renderAction(t,e.drawPolygon,"polygon");case"rectangle":return this._renderAction(t,e.drawRectangle,"rectangle");case"circle":return this._renderAction(t,e.drawCircle,"circle");default:return}}))}_renderAction(e,t,i){return(0,Zo.K)("calcite-action",{active:this.activeTool===e,bind:this,disabled:"disabled"===this.state,onclick:()=>this._activateCreateTool(e),scale:"s",text:t,title:t},(0,Zo.K)("calcite-icon",{icon:i,scale:"s"}))}_renderUndoRedoMenuButtons(){return[this._renderUndoButton(),this._renderRedoButton()]}_renderUndoButton(){const e=this.messages.undo;return(0,Zo.K)("calcite-action",{bind:this,disabled:!this.viewModel.canUndo()||"disabled"===this.state,onclick:this.undo,scale:"s",text:e,title:e},(0,Zo.K)("calcite-icon",{icon:(0,vo.V8)(this.container)?"redo":"undo",scale:"s"}))}_renderRedoButton(){const e=this.messages.redo;return(0,Zo.K)("calcite-action",{bind:this,disabled:!this.viewModel.canRedo()||"disabled"===this.state,onclick:this.redo,scale:"s",text:e,title:e},(0,Zo.K)("calcite-icon",{icon:(0,vo.V8)(this.container)?"undo":"redo",scale:"s"}))}_renderSettingsMenuButton(){const e=this.messagesCommon.settings;return(0,Zo.K)("calcite-action",{active:this._menuOpen,bind:this,"data-testid":"settings-menu-action",disabled:"disabled"===this.state,onclick:this._toggleMenu,scale:"s",text:e,title:e},(0,Zo.K)("calcite-icon",{icon:"gear",scale:"s"}))}_activateCreateTool(e){this.activeTool!==e?(this._selectionToolbar?.cancel(),this.create(e)):this.cancel()}_onCreateOperation(e){if("complete"!==e.state)return;const{creationMode:t}=this,{type:i}=e;if("create"===i){const{tool:i,graphic:r}=e,n=this._activeCreateOptions;this._activeCreateOptions=null,"continuous"===t?this.create(i,n):"update"===t&&this.update([r])}}_toggleMenu(){this._menuOpen=!this._menuOpen,this.scheduleRender()}_onDuplicateSelect(){const e=this.duplicate(),t=this.viewModel.activeTool;"transform"!==t&&"reshape"!==t||this.update(e,{tool:t})}_onSelectionOperationComplete(e){const{viewModel:{defaultUpdateOptions:t}}=this,{selection:i}=e;if(!e.aborted&&i.length){const e=t.tool,r=i.length>1&&"reshape"===e?"transform":e;this.update(i,{...t,tool:r})}this.notifyChange("state")}_activateDefaultSelectTool(){this.cancel(),this.view?.focus()}};(0,t._)([(0,v.MZ)()],Cp.prototype,"activeTool",null),(0,t._)([(0,v.MZ)({cast:e=>{if(!e?.length)return null;const t=new Set(["point","polyline","polygon","rectangle","circle"]);return e.filter((e=>t.has(e)))}})],Cp.prototype,"availableCreateTools",void 0),(0,t._)([(0,v.MZ)({readOnly:!0})],Cp.prototype,"createGraphic",null),(0,t._)([(0,v.MZ)()],Cp.prototype,"creationMode",void 0),(0,t._)([(0,v.MZ)()],Cp.prototype,"defaultCreateOptions",null),(0,t._)([(0,v.MZ)()],Cp.prototype,"defaultUpdateOptions",null),(0,t._)([(0,v.MZ)()],Cp.prototype,"iconClass",void 0),(0,t._)([(0,v.MZ)()],Cp.prototype,"icon",void 0),(0,t._)([(0,v.MZ)()],Cp.prototype,"label",null),(0,t._)([(0,v.MZ)()],Cp.prototype,"labelOptions",null),(0,t._)([(0,v.MZ)()],Cp.prototype,"layer",null),(0,t._)([(0,v.MZ)({type:["horizontal","vertical"]})],Cp.prototype,"layout",void 0),(0,t._)([(0,v.MZ)(),(0,jo.G)("esri/widgets/Sketch/t9n/Sketch")],Cp.prototype,"messages",void 0),(0,t._)([(0,v.MZ)(),(0,jo.G)("esri/t9n/common")],Cp.prototype,"messagesCommon",void 0),(0,t._)([(0,v.MZ)()],Cp.prototype,"snappingOptions",null),(0,t._)([(0,v.MZ)()],Cp.prototype,"state",null),(0,t._)([(0,v.MZ)()],Cp.prototype,"tooltipOptions",null),(0,t._)([(0,v.MZ)({readOnly:!0})],Cp.prototype,"updateGraphics",null),(0,t._)([(0,v.MZ)({type:Oc.A,nonNullable:!0})],Cp.prototype,"valueOptions",null),(0,t._)([(0,v.MZ)()],Cp.prototype,"view",null),(0,t._)([(0,v.MZ)(),(0,Rl.U)(["create","update","undo","redo"])],Cp.prototype,"viewModel",null),(0,t._)([(0,v.MZ)({type:Tu,nonNullable:!0})],Cp.prototype,"visibleElements",void 0),(0,t._)([(0,v.MZ)()],Cp.prototype,"_effectiveAvailableCreateTools",null),Cp=(0,t._)([(0,b.$)("esri.widgets.Sketch")],Cp);const kp=Cp;function Np(e){return Np="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Np(e)}function Lp(){Lp=function(){return t};var e,t={},i=Object.prototype,r=i.hasOwnProperty,n=Object.defineProperty||function(e,t,i){e[t]=i.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,i){return e[t]=i}}function h(e,t,i,r){var s=t&&t.prototype instanceof g?t:g,o=Object.create(s.prototype),a=new k(r||[]);return n(o,"_invoke",{value:E(e,i,a)}),o}function u(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var p="suspendedStart",d="suspendedYield",f="executing",y="completed",m={};function g(){}function v(){}function _(){}var b={};c(b,o,(function(){return this}));var w=Object.getPrototypeOf,M=w&&w(w(N([])));M&&M!==i&&r.call(M,o)&&(b=M);var T=_.prototype=g.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function i(n,s,o,a){var l=u(e[n],e,s);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==Np(h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,a)}),(function(e){i("throw",e,o,a)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,a)}))}a(l.arg)}var s;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return s=s?s.then(n,n):n()}})}function E(t,i,r){var n=p;return function(s,o){if(n===f)throw Error("Generator is already running");if(n===y){if("throw"===s)throw o;return{value:e,done:!0}}for(r.method=s,r.arg=o;;){var a=r.delegate;if(a){var l=x(a,r);if(l){if(l===m)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===p)throw n=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var c=u(t,i,r);if("normal"===c.type){if(n=r.done?y:d,c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=y,r.method="throw",r.arg=c.arg)}}}function x(t,i){var r=i.method,n=t.iterator[r];if(n===e)return i.delegate=null,"throw"===r&&t.iterator.return&&(i.method="return",i.arg=e,x(t,i),"throw"===i.method)||"return"!==r&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var s=u(n,t.iterator,i.arg);if("throw"===s.type)return i.method="throw",i.arg=s.arg,i.delegate=null,m;var o=s.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,m):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,m)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function N(t){if(t||""===t){var i=t[o];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,s=function i(){for(;++n<t.length;)if(r.call(t,n))return i.value=t[n],i.done=!1,i;return i.value=e,i.done=!0,i};return s.next=s}}throw new TypeError(Np(t)+" is not iterable")}return v.prototype=_,n(T,"constructor",{value:_,configurable:!0}),n(_,"constructor",{value:v,configurable:!0}),v.displayName=c(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,l,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},S(A.prototype),c(A.prototype,a,(function(){return this})),t.AsyncIterator=A,t.async=function(e,i,r,n,s){void 0===s&&(s=Promise);var o=new A(h(e,i,r,n),s);return t.isGeneratorFunction(i)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(T),c(T,l,"Generator"),c(T,o,(function(){return this})),c(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),i=[];for(var r in t)i.push(r);return i.reverse(),function e(){for(;i.length;){var r=i.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function n(r,n){return a.type="throw",a.arg=t,i.next=r,n&&(i.method="next",i.arg=e),!!n}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),C(i),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var r=i.completion;if("throw"===r.type){var n=r.arg;C(i)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,i,r){return this.delegate={iterator:N(t),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function Op(e,t,i,r,n,s,o){try{var a=e[s](o),l=a.value}catch(e){return void i(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function Rp(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dp(r.key),r)}}function Pp(e,t,i){return(t=Dp(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Dp(e){var t=function(e,t){if("object"!=Np(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,"string");if("object"!=Np(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Np(t)?t:t+""}var Fp,jp=function(){return e=function e(t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Pp(this,"graphicLayer",new Dc.A),Pp(this,"extraGraphicLayer",new Dc.A),Pp(this,"clearSelection",(function(){i.highlightSelect&&i.highlightSelect.remove()})),this.mapComponentObject=t,this.highlightSelect=new Ri.A},t=[{key:"launch",value:function(){ni.A.portalUrl=Lc.config.portalUrl,Ea.default.registerOAuthInfos([new xa.A({appId:"QyqchtFNno2EWfat",portalUrl:Lc.config.portalUrl,popup:!1})]),this.view=this.createMapView(),this.addDefaultWidget()}},{key:"createMapView",value:function(){var e=this.mapComponentObject.container,t=(new ri({portalItem:{id:Lc.config.webmapId}}),new V({basemap:"streets",layers:[this.graphicLayer,this.extraGraphicLayer]}));return new Aa({map:t,container:e})}},{key:"addDefaultWidget",value:function(){var e=this,t=this.view,i=new Fl({view:t}),r=new Nl({view:t,content:new Sl({view:t})});this.setDefaultExpandTooltip(r);var n=new Nl({view:t,content:new kc({view:t})});this.setDefaultExpandTooltip(n);var s=new Nl({view:t,content:new Nc.default({view:t})});this.setDefaultExpandTooltip(s);var o=new kp({view:t,layer:this.graphicLayer,snappingOptions:{enabled:!0,featureEnabled:!0,selfEnabled:!0}});o.on("update",function(){var t,i=(t=Lp().mark((function t(i){var r,n,s,a,l;return Lp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("evt: ",i,"sketchWidget.updateGraphics.length: ",o.updateGraphics.length),o.updateGraphics.length>1&&"transform"===i.tool&&"start"===i.state?(r=o.updateGraphics.toArray(),n=r.shift(),e.toRemberGraphic=r,o.update(n,{tool:"reshape"})):"reshape"===i.tool&&e.toRemberGraphic.length>0&&i.toolEventInfo&&"reshape"===i.toolEventInfo.type?(console.log("Need to modify: ",e.toRemberGraphic),(s=e.toRemberGraphic[0].clone()).geometry=i.toolEventInfo.mover.geometry,console.log("newGraphic: ",s),e.graphicLayer.remove(e.toRemberGraphic[0]),e.graphicLayer.add(s),e.toRemberGraphic[0]=s):"reshape"===i.tool&&e.toRemberGraphic.length>0&&i.toolEventInfo&&"move"===i.toolEventInfo.type&&(console.log("Need to modify: ",e.toRemberGraphic),a=e.toRemberGraphic[0].clone(),console.log("paths: ",a.geometry.paths),l=i.toolEventInfo.mover.geometry,a.geometry.paths[0][a.geometry.paths[0].length-1]=[l.x,l.y],e.graphicLayer.remove(e.toRemberGraphic[0]),e.graphicLayer.add(a),e.toRemberGraphic[0]=a);case 2:case"end":return t.stop()}}),t)})),function(){var e=this,i=arguments;return new Promise((function(r,n){var s=t.apply(e,i);function o(e){Op(s,r,n,o,a,"next",e)}function a(e){Op(s,r,n,o,a,"throw",e)}o(void 0)}))});return function(e){return i.apply(this,arguments)}}()),t.ui.add([{component:n,position:"top-left",index:0},{component:s,position:"top-left",index:1},{component:r,position:"top-left",index:2},{component:i,position:"top-left",index:3},{component:o,position:"top-right",index:4}],"top-left")}},{key:"setDefaultExpandTooltip",value:function(e){e.when((function(){e.content&&e.content instanceof Io.A&&(e.expandTooltip=e.content.label)}))}}],t&&Rp(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),Zp=document.getElementById("root");if(Zp&&Zp instanceof HTMLDivElement){var zp=((Fp=new jp({container:Zp})).launch(),Fp);console.log("MainApp output:",zp)}})(),s})()));