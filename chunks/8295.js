"use strict";(self.webpackChunkarcgis_typescript_template=self.webpackChunkarcgis_typescript_template||[]).push([[8295],{30984:(t,e,i)=>{i.d(e,{Nt:()=>P,ld:()=>F});var o=i(82392),n=i(20857),r=i(57888),s=i(70214),a=i(57725),l=i(7743),c=i(61985),p=i(5262),u=i(81482),h=(i(6273),i(80861),i(67498),i(26325)),d=i(11682),y=i(92801),v=i(19541),g=i(73902);function f(t,e){switch(t){case"point":case"multipoint":return"point";case"polyline":return function(t){return(null!=t&&"polyline"===t.type&&t.paths.length?t.paths[0].length:0)<2?"polylineZeroVertices":"polylineOneVertex"}(e);case"polygon":return function(t){const e=null!=t&&"polygon"===t.type&&t.rings.length?t.rings[0].length:0;return e<3?"polylineZeroVertices":e<4?"polygonOneVertex":"polygonTwoVertices"}(e);default:return}}var m=i(56122),_=i(77671),w=i(92750),O=i(3130),M=i(4119),Z=i(27920),I=i(43399);let k=class extends Z.w{constructor(t){super(t),this.type="draw-point",this.elevation=(0,I.S3)()}get allFields(){return[this.elevation]}};(0,o._)([(0,u.MZ)()],k.prototype,"type",void 0),(0,o._)([(0,u.MZ)()],k.prototype,"elevation",void 0),(0,o._)([(0,u.MZ)()],k.prototype,"allFields",null),(0,o._)([(0,u.MZ)()],k.prototype,"helpMessage",void 0),k=(0,o._)([(0,h.$)("esri.views.interactive.tooltip.DrawPointTooltipInfo")],k);let b=class extends Z.w{constructor(t){super(t),this.type="draw-polyline",this.direction=(0,I.Gk)(),this.distance=(0,I.R0)({title:t=>t.messages.sketch.distance}),this.elevation=(0,I.S3)(),this.totalLength=(0,I.R0)({format:(t,e)=>e.formatters.totalLength(t),title:t=>t.messages.sketch.totalLength,readOnly:!0})}get allFields(){return[this.direction,this.distance,this.elevation,this.totalLength]}};(0,o._)([(0,u.MZ)()],b.prototype,"type",void 0),(0,o._)([(0,u.MZ)()],b.prototype,"direction",void 0),(0,o._)([(0,u.MZ)()],b.prototype,"distance",void 0),(0,o._)([(0,u.MZ)()],b.prototype,"elevation",void 0),(0,o._)([(0,u.MZ)()],b.prototype,"totalLength",void 0),(0,o._)([(0,u.MZ)()],b.prototype,"allFields",null),(0,o._)([(0,u.MZ)()],b.prototype,"helpMessage",void 0),b=(0,o._)([(0,h.$)("esri.views.interactive.tooltip.DrawPolylineTooltipInfo")],b);let x=class extends Z.w{constructor(t){super(t),this.type="draw-polygon",this.direction=(0,I.Gk)(),this.distance=(0,I.R0)({title:t=>t.messages.sketch.distance}),this.elevation=(0,I.S3)(),this.area=(0,I.Am)({readOnly:!0})}get allFields(){return[this.direction,this.distance,this.elevation,this.area]}};(0,o._)([(0,u.MZ)()],x.prototype,"type",void 0),(0,o._)([(0,u.MZ)()],x.prototype,"distance",void 0),(0,o._)([(0,u.MZ)()],x.prototype,"elevation",void 0),(0,o._)([(0,u.MZ)()],x.prototype,"area",void 0),(0,o._)([(0,u.MZ)()],x.prototype,"allFields",null),(0,o._)([(0,u.MZ)()],x.prototype,"helpMessage",void 0),x=(0,o._)([(0,h.$)("esri.views.interactive.tooltip.DrawPolygonTooltipInfo")],x);let T=class extends Z.w{constructor(t){super(t),this.type="draw-mesh",this.elevation=(0,I.S3)()}get allFields(){return[this.elevation]}};(0,o._)([(0,u.MZ)()],T.prototype,"type",void 0),(0,o._)([(0,u.MZ)()],T.prototype,"elevation",void 0),(0,o._)([(0,u.MZ)()],T.prototype,"allFields",null),(0,o._)([(0,u.MZ)()],T.prototype,"helpMessage",void 0),T=(0,o._)([(0,h.$)("esri.views.interactive.tooltip.DrawMeshTooltipInfo")],T);let V=class extends Z.w{constructor(t){super(t),this.type="draw-rectangle",this.xSize=l.r7,this.ySize=l.r7,this.area=l.iT}get allFields(){return[]}};(0,o._)([(0,u.MZ)()],V.prototype,"type",void 0),(0,o._)([(0,u.MZ)()],V.prototype,"xSize",void 0),(0,o._)([(0,u.MZ)()],V.prototype,"ySize",void 0),(0,o._)([(0,u.MZ)()],V.prototype,"area",void 0),(0,o._)([(0,u.MZ)()],V.prototype,"allFields",null),V=(0,o._)([(0,h.$)("esri.views.interactive.tooltip.DrawRectangleTooltipInfo")],V);let G=class extends Z.w{constructor(t){super(t),this.type="draw-circle",this.radius=null,this.xSize=null,this.ySize=null,this.area=l.iT}get allFields(){return[]}};(0,o._)([(0,u.MZ)()],G.prototype,"type",void 0),(0,o._)([(0,u.MZ)()],G.prototype,"radius",void 0),(0,o._)([(0,u.MZ)()],G.prototype,"xSize",void 0),(0,o._)([(0,u.MZ)()],G.prototype,"ySize",void 0),(0,o._)([(0,u.MZ)()],G.prototype,"area",void 0),(0,o._)([(0,u.MZ)()],G.prototype,"allFields",null),G=(0,o._)([(0,h.$)("esri.views.interactive.tooltip.DrawCircleTooltipInfo")],G);var C=i(16761),z=i(96871),S=i(65334),E=i(49970),A=i(68489),R=i(89370);class U{constructor(){this.committedVertices=null,this.cursorVertex=null,this.full=null,this.outline=null,this.cursorEdge=null,this.circle=null,this.rectangle=null}}let P=class extends(r.A.EventedMixin(_.g)){constructor(t){super(t),this._graphic=null,this._createOperationGeometry=null,this.defaultZ=0,this.directionOptions=null,this.geometryType=null,this.hasZ=!0,this.geometryToPlace=null,this.mode=null,this.snappingManager=null,this.snapToScene=!1,this.sketchOptions=new O.A}initialize(){this.internalGraphicsLayer=new d.A({listMode:"hide",internal:!0}),this.view.map.layers.add(this.internalGraphicsLayer);const t=this.drawOperation=this.makeDrawOperation(),{sketchOptions:e}=this,i=this.view.type;this.tooltipInfos={point:new k({sketchOptions:e,viewType:i}),polyline:new b({sketchOptions:e,viewType:i}),polygon:new x({sketchOptions:e,viewType:i}),mesh:new T({sketchOptions:e,viewType:i}),rectangle:new V({sketchOptions:e}),circle:new G({sketchOptions:e})},this.tooltip=new C.m({view:this.view}),this._initializeConstraints(),this.addHandles([t.on("vertex-add",(t=>this.onVertexAdd(t))),t.on("vertex-remove",(t=>this.onVertexRemove(t))),t.on("vertex-update",(t=>this.onVertexUpdate(t))),t.on("cursor-update",(t=>this.onCursorUpdate(t))),t.on("cursor-remove",(()=>this._updateGraphic())),t.on("complete",(t=>this.onComplete(t))),(0,c.wB)((()=>this.cursor),(e=>t.cursor=e),c.pc),(0,R.fm)((()=>this._updateTooltipInfo())),(0,R.fm)((()=>{t.constraintZ=this._constraintZ}))]),this.finishToolCreation()}destroy(){this.drawOperation=(0,a.pR)(this.drawOperation),this.tooltip=(0,a.pR)(this.tooltip),this._destroyAllVisualizations(),this.view.map.remove(this.internalGraphicsLayer),this.internalGraphicsLayer=(0,a.pR)(this.internalGraphicsLayer),this._set("view",null)}get _defaultElevation(){const t=(0,p.G9)(this.drawOperation.coordinateHelper.spatialReference);return(0,l.d_)(this.defaultZ*t,"meters")}get _inputModeAvailable(){const{inputEnabled:t,visibleElements:e}=this.sketchOptions.tooltips;return t&&!0===this.activeTooltipInfo?.editableFields.some((t=>!0===e[t.name]))}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centered(t){this._set("centered",t),this._updateGraphic()}get cursor(){return this._get("cursor")}set cursor(t){this._set("cursor",t)}set enabled(t){this.drawOperation.interactive=t,this._set("enabled",t)}set forceUniformSize(t){this._set("forceUniformSize",t),this._updateGraphic()}get graphic(){return this._graphic}set graphicSymbol(t){this._set("graphicSymbol",t),null!=this._graphic&&(this._graphic.symbol=t)}get updating(){return this.drawOperation?.updating??!1}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(t){if(!this.destroyed)return"key-down"===t.type&&t.key===w.ac.enterInputMode&&this._inputModeAvailable?(this.tooltip.enterInputMode(),void t.stopPropagation()):void this.drawOperation.onInputEvent(t)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo(),0===this.drawOperation.numCommittedVertices&&this._initializeConstraints()}_destroyAllVisualizations(){this.removeHandles(H.outline),this.removeHandles(H.regularVertices),this.removeHandles(H.activeVertex),this.removeHandles(H.activeEdge),this.removeHandles(D)}_createOrUpdateGraphic(t){if(null!=this._graphic)return this.updateGraphicGeometry(t),this._graphic;const e=new n.A({...this.graphicProperties,symbol:this.graphicSymbol});return this._graphic=e,this.updateGraphicGeometry(t),this.internalGraphicsLayer.add(e),this.addHandles(this.initializeGraphic(e)),this.notifyChange("graphic"),this.addHandles((0,s.hA)((()=>{this.internalGraphicsLayer.remove(e),this._graphic===e&&(this._graphic=null)})),D),e}updateGraphicGeometry(t){this._graphic.geometry=t}_getCreateOperationGeometry(t={operationComplete:!1}){if(null==this.drawOperation)return;const{coordinateHelper:e,view:i,visualizationCursorVertex:o,lastVertex:n,committedVertices:r,geometryIncludingUncommittedVertices:s,numCommittedVertices:a}=this.drawOperation;if(!(a>0||null!=o))return;const l=t.operationComplete?r:s,c=l.length,p=null!=o?e.pointToArray(o):null,u=i.spatialReference,h="3d"===i.type&&"global"===i.viewingMode,d=new U;d.committedVertices=r,d.cursorVertex=p;const{geometryType:v}=this;switch(v){case"point":case"mesh":d.full=e.arrayToPoint(l[0]);break;case"multipoint":d.full=c>0?(0,g.eq)(l,u):null;break;case"polyline":case"polygon":c>0&&(d.full="polygon"===v?(0,g.N6)([l],u,h,!0):(0,g.LZ)([l],u,h),d.cursorEdge=null!=p&&n&&!(0,y.CI)(o,n)?(0,g.LZ)([[p,e.pointToArray(n)]],u,h):null,d.outline=c>1?d.full:null);break;case"circle":case"rectangle":{if(d.committedVertices=d.cursorVertex=null,!c)break;const e=(0,m.ZP)(i,l[0]),o=l[0],n=e.makeMapPoint(o[0]+L*i.resolution,o[1]);"circle"===v?1===c&&t.operationComplete?d.circle=(0,g.zV)([o,n],e,!0):2===c&&(this.forceUniformSize?d.circle=(0,g.zV)(l,e,this.centered):d.rectangle=(0,g.zd)(l,e,this.centered)):1===c&&t.operationComplete?d.rectangle=(0,g.GF)([o,n],e,!0):2===c&&(d.rectangle=this.forceUniformSize?(0,g.GF)(l,e,this.centered):(0,g._T)(l,e,this.centered)),d.full=null!=d.circle?d.circle.geometry:d.rectangle?.geometry,d.outline="polygon"===d.full?.type?d.full:null;break}default:return null}return d}initializeGraphic(t){return(0,s.hA)()}onComplete(t){if(!this.drawOperation)return;this._updateGraphic();let e=null;if(this.drawOperation.isCompleted){const t=this._getCreateOperationGeometry({operationComplete:!0});null!=t&&(e=this._createOrUpdateGraphic(t.full))}this._createOperationGeometry=null,this.emit("complete",{graphic:e,...t})}onCursorUpdate(t){this._updateGraphic(),this.emit("cursor-update",t)}onDeactivate(){const{drawOperation:t}=this;t&&(t.isCompleted||t.cancel())}onOutlineChanged(t){return(0,s.hA)()}onCursorEdgeChanged(t){return(0,s.hA)()}onVertexAdd(t){this._updateGraphic(),this._unlockConstraintsOnVertexAddOrRemove(),this._lockElevationOnVertexAdd(t.vertices.at(0)?.coordinates),this.emit("vertex-add",t)}onVertexRemove(t){this._updateGraphic(),this._unlockConstraintsOnVertexAddOrRemove(),this.emit("vertex-remove",t)}onVertexUpdate(t){this._updateGraphic(),this.emit("vertex-update",t)}_updateGraphic(){const t=this._getCreateOperationGeometry();this._createOperationGeometry=t,null!=t?(null!=t.cursorEdge?this.addHandles(this.onCursorEdgeChanged(t.cursorEdge),H.activeEdge):this.removeHandles(H.activeEdge),null!=t.outline?this.addHandles(this.onOutlineChanged(t.outline),H.outline):this.removeHandles(H.outline),null!=t.committedVertices?this.addHandles(this.onRegularVerticesChanged(t.committedVertices),H.regularVertices):this.removeHandles(H.regularVertices),null!=t.cursorVertex?this.addHandles(this.onActiveVertexChanged(t.cursorVertex),H.activeVertex):this.removeHandles(H.activeVertex),null!=t.full?this._createOrUpdateGraphic(t.full):this.removeHandles(D)):this._destroyAllVisualizations()}get activeTooltipInfo(){const{drawOperation:t,graphic:e,view:i}=this;if(!t)return null;const o=this.tooltipInfos,n=e?.geometry?.type;switch(this.geometryType){case"point":return"2d"===i.type&&0===this.defaultZ?null:"point"===n?o.point:null;case"polyline":return"polyline"===n?o.polyline:null;case"polygon":return"polygon"===n?o.polygon:null;case"rectangle":return"polygon"===n?o.rectangle:null;case"circle":return"polygon"===n?o.circle:null;case"mesh":return"mesh"===n?o.mesh:null;default:return null}}_updateTooltipInfo(){const{activeTooltipInfo:t,tooltip:e,sketchOptions:i}=this;switch(t?.type){case"draw-point":this._updateDrawPointTooltipInfo(t);break;case"draw-polyline":this._updateDrawPolylineTooltipInfo(t);break;case"draw-polygon":this._updateDrawPolygonTooltipInfo(t);break;case"draw-rectangle":this._updateDrawRectangleTooltipInfo(t);break;case"draw-circle":this._updateDrawCircleTooltipInfo(t);break;case"draw-mesh":this.updateDrawMeshTooltipInfo(t)}e.view=this.view,e.info=i.tooltips.effectiveEnabled?t:null}_updateDrawPointTooltipInfo(t){const{drawOperation:e,graphic:i,view:o,sketchOptions:n}=this,{coordinateHelper:r,cursorVertex:s}=e;if(t.sketchOptions=n,t.viewType=o.type,t.helpMessage=f("point",i?.geometry),this.updateElevation(t.elevation),!s)return void(e.constraintInfo=void 0);const a=(0,M.hj)(s,o,r.spatialReference,this._constraintElevationInfo,r.hasZ(),n.values.effectiveDirectionMode);e.constraintInfo={context:a,distance:null,direction:null,elevation:t.elevation.committed}}_updateDrawPolylineTooltipInfo(t){const e=this._createOperationGeometry,i=null!=e?e.full:null;if("polyline"!==i?.type)return;this._updatePolylineOrPolygonCommon(t);const o=(0,E.ob)(i);t.totalLength.actual=o??l.r7,t.sketchOptions=this.sketchOptions,t.viewType=this.view.type,t.helpMessage=f("polyline",i)}_updateDrawPolygonTooltipInfo(t){const e=this._createOperationGeometry,i=null!=e?e.full:null;if("polygon"!==i?.type)return;this._updatePolylineOrPolygonCommon(t);const o=(0,S.n)(i);t.area.actual=o??l.iT,t.sketchOptions=this.sketchOptions,t.viewType=this.view.type,t.helpMessage=f("polygon",i)}_updatePolylineOrPolygonCommon(t){const{view:e,drawOperation:i,sketchOptions:o}=this,{coordinateHelper:n,cursorVertex:r,lastVertex:s,secondToLastVertex:a}=i,c=o.values.effectiveDirectionMode,p=s&&r?(0,E.Kt)(s,r):null;if(t.distance.actual=p??l.r7,t.distance.readOnly=null==s,t.direction.actual=null,t.direction.readOnly=!0,s&&r&&("absolute"===c||a)){const e=(0,z.uR)(a,s,r,c);t.direction.actual=e??l.n0,t.direction.readOnly=!1}this.updateElevation(t.elevation);const u=r??s;if(u){const o=(0,M.hj)(u,e,n.spatialReference,this._constraintElevationInfo,n.hasZ(),c);i.constraintInfo={context:o,distance:t.distance.committed,direction:t.direction.committed,elevation:t.elevation.committed}}else i.constraintInfo=void 0}updateDrawMeshTooltipInfo(t){}_updateDrawRectangleTooltipInfo(t){t.sketchOptions=this.sketchOptions,t.xSize=this._xSize??l.r7,t.ySize=this._ySize??l.r7,t.area=this._fullGeometryArea??l.iT}_updateDrawCircleTooltipInfo(t){const{forceUniformSize:e}=this;t.sketchOptions=this.sketchOptions,t.radius=e?this._circleRadius??l.r7:null,t.xSize=e?null:this._xSize??l.r7,t.ySize=e?null:this._ySize??l.r7,t.area=this._fullGeometryArea??l.iT}get _circleRadius(){const t=this._createOperationGeometry;return null!=t?.circle?.center&&null!=t.circle.edge?(0,E.Kt)(t.circle.center,t.circle.edge):null}get _xSize(){const t=this._createOperationGeometry?.rectangle?.midpoints;return null!=t?(0,E.Kt)(t.left,t.right):null}get _ySize(){const t=this._createOperationGeometry?.rectangle?.midpoints;return null!=t?(0,E.Kt)(t.top,t.bottom):null}get _fullGeometryArea(){const t=this._createOperationGeometry?.full;return"polygon"!==t?.type?null:(0,S.n)(t)}updateElevation(t){const{drawOperation:e}=this,i=e?.cursorVertex??e?.lastVertex;t.actual=(0,A.Of)(i)??this._defaultElevation,t.visible="3d"===this.view.type&&this.hasZ,t.readOnly=!1}get _constraintElevationInfo(){return this.drawOperation?.elevationInfo??v.qt}get _constraintZ(){const{geometryType:t}=this;switch(t){case"point":case"mesh":case"polyline":case"polygon":{const e=this.tooltipInfos[t].elevation.committed;if(!e)return;const i=this.drawOperation.coordinateHelper.spatialReference;return(0,l.l3)(e,"meters")/(0,p.G9)(i)}default:return}}_initializeConstraints(){const{directionOptions:t,drawOperation:e,geometryType:i,tooltipInfos:o,sketchOptions:n}=this,r=t=>{const i=e.elevationInfo?.mode,n=o[t].elevation;"relative-to-ground"===i||"relative-to-scene"===i||"on-the-ground"===i?n.lock(this._defaultElevation):n.unlock()};switch(i){case"polygon":case"polyline":r(i),(e=>{if(t){const i=o[e].direction;i.committed=t.angle,i.unlockOnVertexPlacement=!1,n.values.directionMode=t.mode}})(i);break;case"point":case"mesh":r(i)}}_lockElevationOnVertexAdd(t){const{activeTooltipInfo:e,drawOperation:i,view:o}=this,n=this._constraintElevationInfo;if("2d"===o.type||!t||"absolute-height"!==n.mode||1!==i?.numCommittedVertices||!e||"draw-polyline"!==e.type&&"draw-polygon"!==e.type||e.elevation.locked)return;const[r,s,a]=t,l=this._getConvertedVertexElevation(r,s,a,n);null!=l&&e.elevation.lock(l)}_unlockConstraintsOnVertexAddOrRemove(){this.activeTooltipInfo?.allFields.forEach((t=>{t.unlockOnVertexPlacement&&t.unlock()}))}_getConvertedVertexElevation(t,e,i,o){const{view:n,drawOperation:r}=this;if("3d"!==n.type||!r)return;const{spatialReference:s}=r.coordinateHelper;i??=0;const a=r.elevationInfo,l=(0,v.Fo)(n,t,e,i,s,a,o);return(0,A.Qc)(l,s)??this._defaultElevation}};(0,o._)([(0,u.MZ)()],P.prototype,"_createOperationGeometry",void 0),(0,o._)([(0,u.MZ)()],P.prototype,"_defaultElevation",null),(0,o._)([(0,u.MZ)()],P.prototype,"_inputModeAvailable",null),(0,o._)([(0,u.MZ)({value:!0})],P.prototype,"centered",null),(0,o._)([(0,u.MZ)()],P.prototype,"cursor",null),(0,o._)([(0,u.MZ)({nonNullable:!0})],P.prototype,"defaultZ",void 0),(0,o._)([(0,u.MZ)({constructOnly:!0})],P.prototype,"directionOptions",void 0),(0,o._)([(0,u.MZ)()],P.prototype,"drawOperation",void 0),(0,o._)([(0,u.MZ)({value:!0})],P.prototype,"enabled",null),(0,o._)([(0,u.MZ)({value:!0})],P.prototype,"forceUniformSize",null),(0,o._)([(0,u.MZ)({constructOnly:!0})],P.prototype,"geometryType",void 0),(0,o._)([(0,u.MZ)()],P.prototype,"graphic",null),(0,o._)([(0,u.MZ)({constructOnly:!0})],P.prototype,"graphicProperties",void 0),(0,o._)([(0,u.MZ)()],P.prototype,"graphicSymbol",null),(0,o._)([(0,u.MZ)({constructOnly:!0})],P.prototype,"hasZ",void 0),(0,o._)([(0,u.MZ)({constructOnly:!0})],P.prototype,"geometryToPlace",void 0),(0,o._)([(0,u.MZ)({constructOnly:!0})],P.prototype,"mode",void 0),(0,o._)([(0,u.MZ)()],P.prototype,"snappingManager",void 0),(0,o._)([(0,u.MZ)()],P.prototype,"snapToScene",void 0),(0,o._)([(0,u.MZ)()],P.prototype,"tooltip",void 0),(0,o._)([(0,u.MZ)()],P.prototype,"tooltipInfos",void 0),(0,o._)([(0,u.MZ)({constructOnly:!0,type:O.A})],P.prototype,"sketchOptions",void 0),(0,o._)([(0,u.MZ)({readOnly:!0})],P.prototype,"updating",null),(0,o._)([(0,u.MZ)({constructOnly:!0,nonNullable:!0})],P.prototype,"view",void 0),(0,o._)([(0,u.MZ)()],P.prototype,"activeTooltipInfo",null),(0,o._)([(0,u.MZ)()],P.prototype,"_circleRadius",null),(0,o._)([(0,u.MZ)()],P.prototype,"_xSize",null),(0,o._)([(0,u.MZ)()],P.prototype,"_ySize",null),(0,o._)([(0,u.MZ)()],P.prototype,"_fullGeometryArea",null),(0,o._)([(0,u.MZ)()],P.prototype,"_constraintElevationInfo",null),(0,o._)([(0,u.MZ)()],P.prototype,"_constraintZ",null),P=(0,o._)([(0,h.$)("esri.views.draw.DrawGraphicTool")],P);const D=Symbol("create-operation-graphic"),H={outline:Symbol("outline-visual"),regularVertices:Symbol("regular-vertices-visual"),activeVertex:Symbol("active-vertex-visual"),activeEdge:Symbol("active-edge-visual")};function F(t){switch(t){case"point":case"polyline":case"polygon":case"multipoint":return t;case"circle":case"rectangle":return"segment";case"mesh":return"point"}}const L=48},96165:(t,e,i)=>{i.d(e,{Bb:()=>h,G3:()=>v,fJ:()=>d});var o=i(53334),n=i(80347),r=i(19913),s=i(7775),a=i(11631),l=i(91604),c=i(68514),p=i(98543),u=i(62853);function h(t,e){return y(t,e,!1)}function d(t,e){return y(t,e,!0)}function y(t,e,i){if(t instanceof u.D){if(t.operation instanceof l.a)return function(t,e,i=!1){const o=i?-1:1,a=(0,r.fA)(o*t.dx,o*t.dy,o*t.dz);(0,n.g)(e.origin,e.origin,a),(0,s.u)(e)}(t.operation,e,i),!0;if(t.operation instanceof c.m)return function(t,e,i=!1){const o=i?-t.angle:t.angle;(0,n.K)(e.basis1,e.basis1,r.uY,o),(0,n.K)(e.basis2,e.basis2,r.uY,o),(0,s.u)(e)}(t.operation,e,i),!0;if(t.operation instanceof p.j)return function(t,e,i=!1){const r=i?1/t.factor1:t.factor1,a=i?1/t.factor2:t.factor2;(0,n.h)(e.basis1,e.basis1,r),(0,n.h)(e.basis2,e.basis2,a),(0,o.Vj)(e.origin,e.origin,t.origin,t.axis1,r),(0,o.Vj)(e.origin,e.origin,t.origin,t.axis2,a),(0,s.u)(e)}(t.operation,e,i),!0}return!1}function v(t,e,i,n){n||(n=(0,s.a)());const r=(0,o.hZ)(a.oG.get(),t[1],-t[0]),l=(0,o.hZ)(a.oG.get(),Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),c=(0,o.hZ)(a.oG.get(),Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),p=a.oG.get();e.components.forEach((e=>e.vertices.forEach((({pos:e})=>{(0,o.hZ)(p,(0,o.Om)(t,e),(0,o.Om)(r,e)),(0,o.jk)(l,l,p),(0,o.T9)(c,c,p)}))));const u=1e-6,h=(0,o.hZ)(a.oG.get(),c[0]-l[0]<u?i/2:0,c[1]-l[1]<u?i/2:0);return(0,o.Re)(l,l,h),(0,o.WQ)(c,c,h),(0,o.hs)(n.basis1,t,(c[0]-l[0])/2),(0,o.hs)(n.basis2,r,(c[1]-l[1])/2),(0,o.hZ)(n.origin,l[0]*t[0]+l[1]*r[0],l[0]*t[1]+l[1]*r[1]),(0,o.WQ)(n.origin,n.origin,n.basis1),(0,o.WQ)(n.origin,n.origin,n.basis2),(0,s.u)(n),n}},36598:(t,e,i)=>{i.d(e,{b:()=>c});var o=i(70214),n=i(46997),r=i(56142),s=i(27411),a=i(25674),l=i(43457);class c{draw(t,e){const i=this._getUniqueHints(t),c=this.sortUniqueHints(i),p=[];for(const t of c)t instanceof n.v&&p.push(this.visualizeIntersectionPoint(t,e)),t instanceof r.c&&p.push(this.visualizeLine(t,e)),t instanceof s.r&&p.push(this.visualizeParallelSign(t,e)),t instanceof l.l&&p.push(this.visualizeRightAngleQuad(t,e)),t instanceof a._&&p.push(this.visualizePoint(t,e));return(0,o.vE)(p)}sortUniqueHints(t){return t}_getUniqueHints(t){const e=[];for(const i of t){let t=!0;for(const o of e)if(i.equals(o)){t=!1;break}t&&e.push(i)}return e}}},25674:(t,e,i)=>{i.d(e,{_:()=>r});var o=i(80347),n=i(12288);class r extends n.m{constructor(t,e,i){super(e,i),this.point=t}equals(t){return t instanceof r&&(0,o.j)(this.point,t.point)}}},43399:(t,e,i)=>{i.d(e,{Am:()=>g,Gk:()=>d,S3:()=>v,R0:()=>y});var o=i(7743),n=i(5262),r=i(82392),s=i(73783),a=i(1874),l=i(81482),c=(i(6273),i(80861),i(67498),i(26325));let p=class extends s.A{constructor(t){super(t),this.actual=null,this.committed=null,this.id=(0,a.lk)(),this.inputValue=null,this.readOnly=!1,this.unlockOnVertexPlacement=!0,this.visible=!0}get dirty(){return null!=this.inputValue}get locked(){return null!=this.committed}lock(t){this.inputValue=null,this.committed=t??this.actual}unlock(){this.committed=null,this.inputValue=null}};(0,r._)([(0,l.MZ)()],p.prototype,"actual",void 0),(0,r._)([(0,l.MZ)()],p.prototype,"committed",void 0),(0,r._)([(0,l.MZ)()],p.prototype,"createQuantity",void 0),(0,r._)([(0,l.MZ)()],p.prototype,"dirty",null),(0,r._)([(0,l.MZ)()],p.prototype,"format",void 0),(0,r._)([(0,l.MZ)()],p.prototype,"id",void 0),(0,r._)([(0,l.MZ)()],p.prototype,"inputValue",void 0),(0,r._)([(0,l.MZ)()],p.prototype,"locked",null),(0,r._)([(0,l.MZ)()],p.prototype,"name",void 0),(0,r._)([(0,l.MZ)()],p.prototype,"readOnly",void 0),(0,r._)([(0,l.MZ)()],p.prototype,"suffix",void 0),(0,r._)([(0,l.MZ)()],p.prototype,"title",void 0),(0,r._)([(0,l.MZ)()],p.prototype,"toInputUnits",void 0),(0,r._)([(0,l.MZ)()],p.prototype,"unlockOnVertexPlacement",void 0),(0,r._)([(0,l.MZ)()],p.prototype,"visible",void 0),p=(0,r._)([(0,c.$)("esri.views.interactive.tooltip.fields.TooltipField")],p);let u=class extends p{constructor(t){super(t),this.mode="absolute-height"}normalizeCtorArgs(t){const e=t=>t.inputUnitInfos.verticalLength.unit;return{name:"elevation",actual:o.r7,createQuantity:(t,i)=>(0,o.d_)(t,e(i)),toInputUnits:(t,i)=>(0,o.kM)(t,e(i)),format:(t,e)=>e.formatters.verticalLength(t),suffix:t=>t.inputUnitInfos.verticalLength.abbreviation,title:t=>t.messages.sketch.elevation,unlockOnVertexPlacement:!1,...t}}};(0,r._)([(0,l.MZ)()],u.prototype,"mode",void 0),u=(0,r._)([(0,c.$)("esri.views.interactive.tooltip.fields.TooltipFieldElevation")],u);var h=i(96871);const d=t=>{const e=t=>t.inputUnitInfos.direction.unit;return new p({name:"direction",actual:o.IV,createQuantity:(t,i)=>(0,o.Wq)(t,e(i),"geographic"),toInputUnits:({value:t,unit:i,rotationType:r},s)=>{const a=(0,h.jQ)((0,o.Wq)(t,i,r),s.sketchOptions.values.effectiveDirectionMode),l=e(s),c=(0,n.oU)(a.value,"degrees",l);return(0,o.Wq)(c,l,"geographic")},format:(t,{formatters:e,sketchOptions:i})=>{const o=i.values.effectiveDirectionMode,n=(0,h.jQ)(t,o);switch(o){case h.rZ.Absolute:return e.direction(n);case h.rZ.Relative:return e.directionRelative(n);case h.rZ.RelativeBilateral:return e.directionRelativeBilateral(n)}},suffix:t=>t.inputUnitInfos.direction.abbreviation,title:({messages:t,sketchOptions:e})=>{switch(e.values.effectiveDirectionMode){case h.rZ.Absolute:return t.sketch.direction.absolute;case h.rZ.Relative:case h.rZ.RelativeBilateral:return t.sketch.direction.relative}},...t})},y=t=>{const e=t=>t.inputUnitInfos.length.unit;return new p({name:"distance",actual:o.r7,createQuantity:(t,i)=>{const n=Math.max(t,0);return(0,o.d_)(n,e(i))},toInputUnits:(t,i)=>(0,o.kM)(t,e(i)),format:(t,e)=>e.formatters.length(t),suffix:t=>t.inputUnitInfos.length.abbreviation,title:t=>t.messages.sketch.distance,...t})},v=t=>new u(t),g=t=>{const e=t=>t.inputUnitInfos.area.unit;return new p({name:"area",actual:o.iT,createQuantity:(t,i)=>(0,o.gT)(t,e(i)),toInputUnits:(t,i)=>(0,o.kM)(t,e(i)),format:(t,e)=>e.formatters.area(t),suffix:t=>t.inputUnitInfos.area.abbreviation,title:t=>t.messages.sketch.area,...t})}},65334:(t,e,i)=>{i.d(e,{n:()=>b});var o=i(7743),n=i(5262),r=i(91814),s=i(80347),a=i(19913),l=i(42722),c=i(87368),p=i(45660),u=i(21403);function h(t,e,i=t.hasZ){const r=(0,u.l)(t.spatialReference),h=(0,n.B5)(r);if(null==h)return null;const g=(t,e)=>!(e.length<2||((0,s.s)(t,e[0],e[1],i&&e[2]||0),0));let f=0;for(const i of t.rings){const o=i.length;if(o<3)continue;const{positionsWorldCoords:n}=e;for(;n.length<o;)n.push((0,a.vt)());const u=d,h=(0,s.s)(y,0,0,0),m=1/o;for(let e=0;e<o;e++){if(!g(u,i[e]))return null;if(!(0,l.F)(u,t.spatialReference,n[e],r))return null;(0,s.r)(h,h,n[e],m)}const _=(0,c.Cr)(n[0],n[1],h,(0,c.LV)());if(0===(0,s.p)((0,c.Qj)(_)))continue;for(let t=0;t<o;t++)(0,c.Z1)(_,h,n[t],n[t]);const w=v(n);for(let t=0;t<w.length;t+=3)f+=(0,p.Fm)(n[w[t]],n[w[t+1]],n[w[t+2]])}return(0,o.gT)(f,h)}const d=(0,a.vt)(),y=(0,a.vt)();function v(t){return(0,r.e)(function(t){const e=new Float64Array(2*t.length);for(let i=0;i<t.length;++i){const o=t[i],n=2*i;e[n]=o[0],e[n+1]=o[1]}return e}(t),[],2)}i(3313);var g=i(65670),f=i(99269);const m=(0,a.vt)();var _=i(22538),w=i(7540),O=i(44153);function M(t){const{spatialReference:e}=t;return(0,w.M)(e,Z,I,k,t)}function Z(t){return(0,o.gT)(Math.abs((0,_.qy)([t],"square-meters")[0]),"square-meters")}function I(t){try{return(0,o.gT)(Math.abs((0,g.geodesicArea)(t,"square-meters")),"square-meters")}catch(t){return null}}function k(t){const e=[];return function({hasZ:t,spatialReference:e,rings:i},o,n=0){const r=(0,f.Yz)(e);if(null==r)return!1;const a=t?t=>t:t=>(0,s.s)(m,t[0],t[1],n);for(const t of i){const e=[];for(const i of t){const t=[0,0,n];r(a(i),0,t,0),e.push(t)}o.push(e)}return!0}(t,e)?(0,o.gT)(Math.abs((0,_.qy)([{type:"polygon",rings:e,spatialReference:O.A.WGS84}],"square-meters")[0]),"square-meters"):null}function b(t,e={positionsWorldCoords:[]}){return function(t,e,i={positionsWorldCoords:[]}){if("on-the-ground"===e){const e=M(t);return null!=e?e:function(t,e={positionsWorldCoords:[]}){return h(t,e,!1)}(t,i)}return function(t,e={positionsWorldCoords:[]}){return h(t,e)}(t,i)}(t,"on-the-ground",e)}}}]);