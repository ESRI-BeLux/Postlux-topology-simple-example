"use strict";(self.webpackChunkarcgis_typescript_template=self.webpackChunkarcgis_typescript_template||[]).push([[757],{6590:(t,e,r)=>{function n(){return new Float32Array(3)}function o(t){const e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function i(t,e,r){const n=new Float32Array(3);return n[0]=t,n[1]=e,n[2]=r,n}function s(){return n()}function a(){return i(1,1,1)}function l(){return i(1,0,0)}function u(){return i(0,1,0)}function c(){return i(0,0,1)}r.d(e,{fA:()=>i,o8:()=>o,vt:()=>n});const d=s(),f=a(),h=l(),p=u(),b=c();Object.freeze(Object.defineProperty({__proto__:null,ONES:f,UNIT_X:h,UNIT_Y:p,UNIT_Z:b,ZEROS:d,clone:o,create:n,createView:function(t,e){return new Float32Array(t,e,3)},fromValues:i,ones:a,unitX:l,unitY:u,unitZ:c,zeros:s},Symbol.toStringTag,{value:"Module"}))},63540:(t,e,r)=>{r.d(e,{l:()=>u});var n=r(4506),o=r(25336),i=r(19913),s=r(31262),a=r(99269),l=r(67488);function u(t,e,r,n){if(null==t||null==n)return!1;const i=(0,a.Qk)(t,a.Wv),u=(0,a.Qk)(n,a.zp);if(i===u&&!c(u)&&(i!==a.rz.UNKNOWN||(0,l.aI)(t,n)))return(0,o.kN)(r,e),!0;if(c(u)){const t=a.w5[i][a.rz.LON_LAT],n=a.w5[a.rz.LON_LAT][u];return null!=t&&null!=n&&(t(e,0,f,0),n(f,0,h,0),(0,s.y)(d*f[0],d*f[1],r),r[12]=h[0],r[13]=h[1],r[14]=h[2],!0)}if((u===a.rz.WEB_MERCATOR||u===a.rz.PLATE_CARREE||u===a.rz.WGS84)&&(i===a.rz.WGS84||i===a.rz.CGCS2000&&u===a.rz.PLATE_CARREE||i===a.rz.SPHERICAL_ECEF||i===a.rz.WEB_MERCATOR)){const t=a.w5[i][a.rz.LON_LAT],n=a.w5[a.rz.LON_LAT][u];return null!=t&&null!=n&&(t(e,0,f,0),n(f,0,h,0),i===a.rz.SPHERICAL_ECEF?(0,s.C)(d*f[0],d*f[1],r):(0,o.D_)(r),r[12]=h[0],r[13]=h[1],r[14]=h[2],!0)}return!1}function c(t){return t===a.rz.SPHERICAL_ECEF||t===a.rz.SPHERICAL_MARS_PCPF||t===a.rz.SPHERICAL_MOON_PCPF}const d=(0,n.kU)(1),f=(0,i.vt)(),h=(0,i.vt)()},31262:(t,e,r)=>{r.d(e,{C:()=>i,y:()=>o});var n=r(25336);function o(t,e,r){const n=Math.sin(t),o=Math.cos(t),i=Math.sin(e),s=Math.cos(e),a=r;return a[0]=-n,a[4]=-i*o,a[8]=s*o,a[12]=0,a[1]=o,a[5]=-i*n,a[9]=s*n,a[13]=0,a[2]=0,a[6]=s,a[10]=i,a[14]=0,a[3]=0,a[7]=0,a[11]=0,a[15]=1,a}function i(t,e,r){return o(t,e,r),(0,n.mg)(r,r),r}},32159:(t,e,r)=>{r.d(e,{GD:()=>s,Y0:()=>u,lO:()=>c});var n=r(34670),o=r(44153),i=r(67488);const s=new o.A(n.fv),a=new o.A(n.FY),l=new o.A(n.LJ),u=new o.A(n.Ro);function c(t){const e=d.get(t);if(e)return e;let r=s;if(t)if(t===a)r=a;else if(t===l)r=l;else{const e=t.wkid,n=t.latestWkid;if(null!=e||null!=n)(0,i.tl)(e)||(0,i.tl)(n)?r=a:((0,i.ZL)(e)||(0,i.ZL)(n))&&(r=l);else{const e=t.wkt2??t.wkt;if(e){const t=e.toUpperCase();t===f?r=a:t===h&&(r=l)}}}return d.set(t,r),r}const d=new Map,f=a.wkt.toUpperCase(),h=l.wkt.toUpperCase()},40854:(t,e,r)=>{r.d(e,{A:()=>g});var n,o=r(82392),i=r(15565),s=r(81482),a=(r(6273),r(80861),r(85716)),l=r(26325),u=r(14682),c=r(77299),d=r(93814),f=r(84977),h=r(8636);let p=n=class extends f.oY{constructor(){super(...arguments),this.description=null,this.label=null,this.minValue=0,this.maxValue=0,this.color=null}clone(){return new n({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:(0,i.o8)(this.color)})}};(0,o._)([(0,s.MZ)({type:String,json:{write:!0}})],p.prototype,"description",void 0),(0,o._)([(0,s.MZ)({type:String,json:{write:!0}})],p.prototype,"label",void 0),(0,o._)([(0,s.MZ)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],p.prototype,"minValue",void 0),(0,o._)([(0,s.MZ)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],p.prototype,"maxValue",void 0),(0,o._)([(0,s.MZ)({type:d.A,json:{type:[h.jz],write:!0}})],p.prototype,"color",void 0),p=n=(0,o._)([(0,l.$)("esri.renderers.support.pointCloud.ColorClassBreakInfo")],p);const b=p;var y;let m=y=class extends u.A{constructor(t){super(t),this.type="point-cloud-class-breaks",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.colorClassBreakInfos=null}clone(){return new y({...this.cloneProperties(),field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:(0,i.o8)(this.colorClassBreakInfos),legendOptions:(0,i.o8)(this.legendOptions)})}};(0,o._)([(0,a.e)({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],m.prototype,"type",void 0),(0,o._)([(0,s.MZ)({json:{write:!0},type:String})],m.prototype,"field",void 0),(0,o._)([(0,s.MZ)({type:c.q,json:{write:!0}})],m.prototype,"legendOptions",void 0),(0,o._)([(0,s.MZ)({type:u.A.fieldTransformTypeKebabDict.apiValues,json:{type:u.A.fieldTransformTypeKebabDict.jsonValues,read:u.A.fieldTransformTypeKebabDict.read,write:u.A.fieldTransformTypeKebabDict.write}})],m.prototype,"fieldTransformType",void 0),(0,o._)([(0,s.MZ)({type:[b],json:{write:!0}})],m.prototype,"colorClassBreakInfos",void 0),m=y=(0,o._)([(0,l.$)("esri.renderers.PointCloudClassBreaksRenderer")],m);const g=m},14682:(t,e,r)=>{r.d(e,{A:()=>T});var n,o=r(82392),i=r(1817),s=r(84977),a=r(15565),l=r(81482),u=(r(6273),r(80861),r(26325));r(67498);let c=n=class extends s.oY{constructor(){super(...arguments),this.field=null,this.minValue=0,this.maxValue=255}clone(){return new n({field:this.field,minValue:this.minValue,maxValue:this.maxValue})}};(0,o._)([(0,l.MZ)({type:String,json:{write:!0}})],c.prototype,"field",void 0),(0,o._)([(0,l.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],c.prototype,"minValue",void 0),(0,o._)([(0,l.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],c.prototype,"maxValue",void 0),c=n=(0,o._)([(0,u.$)("esri.renderers.support.pointCloud.ColorModulation")],c);const d=c,f=new i.J({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});let h=class extends s.oY{};(0,o._)([(0,l.MZ)({type:f.apiValues,readOnly:!0,nonNullable:!0,json:{type:f.jsonValues,read:!1,write:f.write}})],h.prototype,"type",void 0),h=(0,o._)([(0,u.$)("esri.renderers.support.pointCloud.PointSizeAlgorithm")],h);const p=h;var b,y=r(85716);let m=b=class extends p{constructor(){super(...arguments),this.type="fixed-size",this.size=0,this.useRealWorldSymbolSizes=null}clone(){return new b({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})}};(0,o._)([(0,y.e)({pointCloudFixedSizeAlgorithm:"fixed-size"})],m.prototype,"type",void 0),(0,o._)([(0,l.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],m.prototype,"size",void 0),(0,o._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],m.prototype,"useRealWorldSymbolSizes",void 0),m=b=(0,o._)([(0,u.$)("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],m);const g=m;var A;let w=A=class extends p{constructor(){super(...arguments),this.type="splat",this.scaleFactor=1}clone(){return new A({scaleFactor:this.scaleFactor})}};(0,o._)([(0,y.e)({pointCloudSplatAlgorithm:"splat"})],w.prototype,"type",void 0),(0,o._)([(0,l.MZ)({type:Number,value:1,nonNullable:!0,json:{write:!0}})],w.prototype,"scaleFactor",void 0),w=A=(0,o._)([(0,u.$)("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],w);const v={key:"type",base:p,typeMap:{"fixed-size":g,splat:w}},C=(0,i.O)()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"});let _=class extends s.oY{constructor(t){super(t),this.type=void 0,this.pointSizeAlgorithm=null,this.colorModulation=null,this.pointsPerInch=10}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}cloneProperties(){return{pointSizeAlgorithm:(0,a.o8)(this.pointSizeAlgorithm),colorModulation:(0,a.o8)(this.colorModulation),pointsPerInch:(0,a.o8)(this.pointsPerInch)}}};(0,o._)([(0,l.MZ)({type:C.apiValues,readOnly:!0,nonNullable:!0,json:{type:C.jsonValues,read:!1,write:C.write}})],_.prototype,"type",void 0),(0,o._)([(0,l.MZ)({types:v,json:{write:!0}})],_.prototype,"pointSizeAlgorithm",void 0),(0,o._)([(0,l.MZ)({type:d,json:{write:!0}})],_.prototype,"colorModulation",void 0),(0,o._)([(0,l.MZ)({json:{write:!0},nonNullable:!0,type:Number})],_.prototype,"pointsPerInch",void 0),_=(0,o._)([(0,u.$)("esri.renderers.PointCloudRenderer")],_),(_||(_={})).fieldTransformTypeKebabDict=new i.J({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"});const T=_},35753:(t,e,r)=>{r.d(e,{A:()=>h});var n,o=r(82392),i=r(15565),s=r(81482),a=(r(6273),r(80861),r(85716)),l=r(26325),u=r(14682),c=r(77299),d=r(36903);let f=n=class extends u.A{constructor(t){super(t),this.type="point-cloud-stretch",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.stops=null}clone(){return new n({...this.cloneProperties(),field:(0,i.o8)(this.field),fieldTransformType:(0,i.o8)(this.fieldTransformType),stops:(0,i.o8)(this.stops),legendOptions:(0,i.o8)(this.legendOptions)})}};(0,o._)([(0,a.e)({pointCloudStretchRenderer:"point-cloud-stretch"})],f.prototype,"type",void 0),(0,o._)([(0,s.MZ)({json:{write:!0},type:String})],f.prototype,"field",void 0),(0,o._)([(0,s.MZ)({type:c.q,json:{write:!0}})],f.prototype,"legendOptions",void 0),(0,o._)([(0,s.MZ)({type:u.A.fieldTransformTypeKebabDict.apiValues,json:{type:u.A.fieldTransformTypeKebabDict.jsonValues,read:u.A.fieldTransformTypeKebabDict.read,write:u.A.fieldTransformTypeKebabDict.write}})],f.prototype,"fieldTransformType",void 0),(0,o._)([(0,s.MZ)({type:[d.A],json:{write:!0}})],f.prototype,"stops",void 0),f=n=(0,o._)([(0,l.$)("esri.renderers.PointCloudStretchRenderer")],f);const h=f},44372:(t,e,r)=>{r.d(e,{A:()=>g});var n,o=r(82392),i=r(15565),s=r(81482),a=(r(6273),r(80861),r(85716)),l=r(26325),u=r(14682),c=r(77299),d=r(93814),f=r(84977),h=r(8636);let p=n=class extends f.oY{constructor(){super(...arguments),this.description=null,this.label=null,this.values=null,this.color=null}clone(){return new n({description:this.description,label:this.label,values:(0,i.o8)(this.values),color:(0,i.o8)(this.color)})}};(0,o._)([(0,s.MZ)({type:String,json:{write:!0}})],p.prototype,"description",void 0),(0,o._)([(0,s.MZ)({type:String,json:{write:!0}})],p.prototype,"label",void 0),(0,o._)([(0,s.MZ)({type:[String],json:{write:!0}})],p.prototype,"values",void 0),(0,o._)([(0,s.MZ)({type:d.A,json:{type:[h.jz],write:!0}})],p.prototype,"color",void 0),p=n=(0,o._)([(0,l.$)("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],p);const b=p;var y;let m=y=class extends u.A{constructor(t){super(t),this.type="point-cloud-unique-value",this.field=null,this.fieldTransformType=null,this.colorUniqueValueInfos=null,this.legendOptions=null}clone(){return new y({...this.cloneProperties(),field:(0,i.o8)(this.field),fieldTransformType:(0,i.o8)(this.fieldTransformType),colorUniqueValueInfos:(0,i.o8)(this.colorUniqueValueInfos),legendOptions:(0,i.o8)(this.legendOptions)})}};(0,o._)([(0,a.e)({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],m.prototype,"type",void 0),(0,o._)([(0,s.MZ)({json:{write:!0},type:String})],m.prototype,"field",void 0),(0,o._)([(0,s.MZ)({type:u.A.fieldTransformTypeKebabDict.apiValues,json:{type:u.A.fieldTransformTypeKebabDict.jsonValues,read:u.A.fieldTransformTypeKebabDict.read,write:u.A.fieldTransformTypeKebabDict.write}})],m.prototype,"fieldTransformType",void 0),(0,o._)([(0,s.MZ)({type:[b],json:{write:!0}})],m.prototype,"colorUniqueValueInfos",void 0),(0,o._)([(0,s.MZ)({type:c.q,json:{write:!0}})],m.prototype,"legendOptions",void 0),m=y=(0,o._)([(0,l.$)("esri.renderers.PointCloudUniqueValueRenderer")],m);const g=m},40757:(t,e,r)=>{r.r(e),r.d(e,{default:()=>C});var n=r(3223),o=r(62088),i=r(31753),s=r(19165),a=r(80347),l=r(6590),u=r(44153),c=r(88133),d=(r(6273),r(40854)),f=r(35753),h=r(44372),p=r(16504),b=r(70564);function y(t,e,r){return t?.attributeInfo.useElevation?e?function(t,e){const r=new Float64Array(e);for(let n=0;n<e;n++)r[n]=t[3*n+2];return r}(e,r):null:t?.attributeInfo.storageInfo?(0,p.m0)(t.attributeInfo.storageInfo,t.buffer,r):null}function m(t){switch(t){default:case null:case"none":return t=>t;case"low-four-bit":return t=>15&t;case"high-four-bit":return t=>(240&t)>>4;case"absolute-value":return t=>Math.abs(t);case"modulo-ten":return t=>t%10}}function g(t){let e=0;for(const r of t||[])e|=1<<r;return e}var A=r(45506);class w{transform(t){const e=this._transform(t),r=[e.points.buffer,e.rgb.buffer];null!=e.pointIdFilterMap&&r.push(e.pointIdFilterMap.buffer);for(const t of e.attributes)"buffer"in t.values&&(0,o.mw)(t.values.buffer)&&t.values.buffer!==e.rgb.buffer&&r.push(t.values.buffer);return Promise.resolve({result:e,transferList:r})}_transform(t){const e=function(t,e){if(null==t.encoding||""===t.encoding){const r=(0,p.wH)(e,t);if(null==r.vertexAttributes.position)return;const n=(0,p.MA)(e,r.vertexAttributes.position),o=r.header.fields,i=[o.offsetX,o.offsetY,o.offsetZ],s=[o.scaleX,o.scaleY,o.scaleZ],a=n.length/3,l=new Float64Array(3*a);for(let t=0;t<a;t++)l[3*t]=n[3*t]*s[0]+i[0],l[3*t+1]=n[3*t+1]*s[1]+i[1],l[3*t+2]=n[3*t+2]*s[2]+i[2];return l}if("lepcc-xyz"===t.encoding)return(0,b.Me)(e).result}(t.schema,t.geometryBuffer);let r=e.length/3,o=null;const i=new Array,s=y(t.primaryAttributeData,e,r);null!=t.primaryAttributeData&&s&&i.push({attributeInfo:t.primaryAttributeData.attributeInfo,values:s});const a=y(t.modulationAttributeData,e,r);null!=t.modulationAttributeData&&a&&i.push({attributeInfo:t.modulationAttributeData.attributeInfo,values:a});let l=function(t,e,r,n){const{rendererJSON:o,isRGBRenderer:i}=t;let s=null,a=null;if(e&&i)s=e;else if(e&&"pointCloudUniqueValueRenderer"===o?.type){a=h.A.fromJSON(o);const t=a.colorUniqueValueInfos;s=new Uint8Array(3*n);const r=m(a.fieldTransformType);for(let o=0;o<n;o++){const n=(r?r(e[o]):e[o])+"";for(let e=0;e<t.length;e++)if(t[e].values.includes(n)){s[3*o]=t[e].color.r,s[3*o+1]=t[e].color.g,s[3*o+2]=t[e].color.b;break}}}else if(e&&"pointCloudStretchRenderer"===o?.type){a=f.A.fromJSON(o);const t=a.stops;s=new Uint8Array(3*n);const r=m(a.fieldTransformType);for(let o=0;o<n;o++){const n=r?r(e[o]):e[o],i=t.length-1;if(n<t[0].value)s[3*o]=t[0].color.r,s[3*o+1]=t[0].color.g,s[3*o+2]=t[0].color.b;else if(n>=t[i].value)s[3*o]=t[i].color.r,s[3*o+1]=t[i].color.g,s[3*o+2]=t[i].color.b;else for(let e=1;e<t.length;e++)if(n<t[e].value){const r=(n-t[e-1].value)/(t[e].value-t[e-1].value);s[3*o]=t[e].color.r*r+t[e-1].color.r*(1-r),s[3*o+1]=t[e].color.g*r+t[e-1].color.g*(1-r),s[3*o+2]=t[e].color.b*r+t[e-1].color.b*(1-r);break}}}else if(e&&"pointCloudClassBreaksRenderer"===o?.type){a=d.A.fromJSON(o);const t=a.colorClassBreakInfos;s=new Uint8Array(3*n);const r=m(a.fieldTransformType);for(let o=0;o<n;o++){const n=r?r(e[o]):e[o];for(let e=0;e<t.length;e++)if(n>=t[e].minValue&&n<=t[e].maxValue){s[3*o]=t[e].color.r,s[3*o+1]=t[e].color.g,s[3*o+2]=t[e].color.b;break}}}else s=new Uint8Array(3*n).fill(255);if(r&&a?.colorModulation){const t=a.colorModulation.minValue,e=a.colorModulation.maxValue,o=.3;for(let i=0;i<n;i++){const n=r[i],a=n>=e?1:n<=t?o:o+(1-o)*(n-t)/(e-t);s[3*i]=a*s[3*i],s[3*i+1]=a*s[3*i+1],s[3*i+2]=a*s[3*i+2]}}return s}(t.rendererInfo,s,a,r);if(t.filterInfo&&t.filterInfo.length>0&&null!=t.filterAttributesData){const s=t.filterAttributesData.filter(n.Ru).map((t=>{const n=y(t,e,r),o={attributeInfo:t.attributeInfo,values:n};return i.push(o),o}));o=new Uint32Array(r),r=function(t,e,r,n,o){const i=t.length/3;let s=0;for(let a=0;a<i;a++){let i=!0;for(let t=0;t<n.length&&i;t++){const{filterJSON:e}=n[t],r=o[t].values[a];switch(e.type){case"pointCloudValueFilter":{const t="exclude"===e.mode;e.values.includes(r)===t&&(i=!1);break}case"pointCloudBitfieldFilter":{const t=g(e.requiredSetBits),n=g(e.requiredClearBits);(r&t)===t&&!(r&n)||(i=!1);break}case"pointCloudReturnFilter":{const t=15&r,n=r>>>4&15,o=n>1,s=1===t,a=t===n;let l=!1;for(const t of e.includedReturns)if("last"===t&&a||"firstOfMany"===t&&s&&o||"lastOfMany"===t&&a&&o||"single"===t&&!o){l=!0;break}l||(i=!1);break}}}i&&(r[s]=a,t[3*s]=t[3*a],t[3*s+1]=t[3*a+1],t[3*s+2]=t[3*a+2],e[3*s]=e[3*a],e[3*s+1]=e[3*a+1],e[3*s+2]=e[3*a+2],s++)}return s}(e,l,o,t.filterInfo,s)}for(const n of t.userAttributesData){const t=y(n,e,r);i.push({attributeInfo:n.attributeInfo,values:t})}3*r<l.length&&(l=new Uint8Array(l.buffer.slice(0,3*r))),this._applyElevationOffsetInPlace(e,r,t.elevationOffset);const c=this._transformCoordinates(e,r,A.ab.fromData(t.obbData),u.A.fromJSON(t.inSR),u.A.fromJSON(t.outSR));return{obbData:t.obbData,points:c,rgb:l,attributes:i,pointIdFilterMap:o}}_transformCoordinates(t,e,r,n,o){if(!(0,c.projectBuffer)(t,n,0,t,o,0,e))throw new Error("Can't reproject");const s=(0,l.o8)(r.center),u=(0,l.vt)(),d=(0,l.vt)(),f=(0,l.o8)(r.halfSize);(0,i.Xr)(v,r.quaternion);const h=new Float32Array(3*e);for(let r=0;r<e;r++){let e=3*r;u[0]=t[e]-s[0],u[1]=t[e+1]-s[1],u[2]=t[e+2]-s[2],(0,a.u)(d,u,v),f[0]=Math.max(f[0],Math.abs(d[0])),f[1]=Math.max(f[1],Math.abs(d[1])),f[2]=Math.max(f[2],Math.abs(d[2])),h[e++]=u[0],h[e++]=u[1],h[e]=u[2]}return r.halfSize=f,h}_applyElevationOffsetInPlace(t,e,r){if(0!==r)for(let n=0;n<e;n++)t[3*n+2]+=r}}const v=(0,s.vt)();function C(){return new w}},16504:(t,e,r)=>{r.d(e,{MA:()=>f,m0:()=>m,wH:()=>b});var n=r(62991),o=r(15565),i=r(80861),s=r(70564),a=r(33763);const l=()=>i.A.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");function u(t,e,r){let o="",i=0;for(;i<r;){const s=t[e+i];if(s<128)o+=String.fromCharCode(s),i++;else if(s>=192&&s<224){if(i+1>=r)throw new n.A("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");const a=(31&s)<<6|63&t[e+i+1];o+=String.fromCharCode(a),i+=2}else if(s>=224&&s<240){if(i+2>=r)throw new n.A("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const a=(15&s)<<12|(63&t[e+i+1])<<6|63&t[e+i+2];o+=String.fromCharCode(a),i+=3}else{if(!(s>=240&&s<248))throw new n.A("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");{if(i+3>=r)throw new n.A("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const a=(7&s)<<18|(63&t[e+i+1])<<12|(63&t[e+i+2])<<6|63&t[e+i+3];if(a>=65536){const t=55296+(a-65536>>10),e=56320+(1023&a);o+=String.fromCharCode(t,e)}else o+=String.fromCharCode(a);i+=4}}}return o}function c(t,e){const r={byteOffset:0,byteCount:0,fields:Object.create(null)};let n=0;for(let o=0;o<e.length;o++){const i=e[o],s=i.valueType||i.type,a=A[s];r.fields[i.property]=a(t,n),n+=g[s].BYTES_PER_ELEMENT}return r.byteCount=n,r}function d(t,e,r){const o=[];let i,s,a=0;for(s=0;s<t;s+=1){if(i=e[s],i>0){if(o.push(u(r,a,i-1)),0!==r[a+i-1])throw new n.A("string-array-error","Invalid string array: missing null termination.")}else o.push(null);a+=i}return o}function f(t,e){return new(0,g[e.valueType])(t,e.byteOffset,e.count*e.valuesPerElement)}function h(t,e,r){const i=null!=e.header?c(t,e.header):{byteOffset:0,byteCount:0,fields:{count:r}},s={header:i,byteOffset:i.byteCount,byteCount:0,entries:Object.create(null)};let a=i.byteCount;for(let t=0;t<e.ordering.length;t++){const r=e.ordering[t],l=(0,o.o8)(e[r]);if(l.count=i.fields.count??0,"String"===l.valueType){if(l.byteOffset=a,l.byteCount=i.fields[r+"ByteCount"],"UTF-8"!==l.encoding)throw new n.A("unsupported-encoding","Unsupported String encoding.",{encoding:l.encoding});if(l.timeEncoding&&"ECMA_ISO8601"!==l.timeEncoding)throw new n.A("unsupported-time-encoding","Unsupported time encoding.",{timeEncoding:l.timeEncoding})}else{if(!w(l.valueType))throw new n.A("unsupported-value-type","Unsupported binary valueType",{valueType:l.valueType});{const t=v(l.valueType);a+=a%t!=0?t-a%t:0,l.byteOffset=a,l.byteCount=t*l.valuesPerElement*l.count}}a+=l.byteCount??0,s.entries[r]=l}return s.byteCount=a-s.byteOffset,s}function p(t,e,r){if(e!==t&&l().error(`Invalid ${r} buffer size\n expected: ${t}, actual: ${e})`),e<t)throw new n.A("buffer-too-small","Binary buffer is too small",{expectedSize:t,actualSize:e})}function b(t,e){const r=c(t,e&&e.header);let n=r.byteCount;const o={isDraco:!1,header:r,byteOffset:r.byteCount,byteCount:0,vertexAttributes:{}},i=r.fields,s=null!=i.vertexCount?i.vertexCount:i.count;for(const t of e.ordering){if(!e.vertexAttributes[t])continue;const r={...e.vertexAttributes[t],byteOffset:n,count:s},i=y[t]||"_"+t;o.vertexAttributes[i]=r,n+=v(r.valueType)*r.valuesPerElement*s}const a=i.faceCount;if(e.faces&&a){o.faces={};for(const t of e.ordering){if(!e.faces[t])continue;const r={...e.faces[t],byteOffset:n,count:a};o.faces[t]=r,n+=v(r.valueType)*r.valuesPerElement*a}}const l=i.featureCount;if(e.featureAttributes&&e.featureAttributeOrder&&l){o.featureAttributes={};for(const t of e.featureAttributeOrder){if(!e.featureAttributes[t])continue;const r={...e.featureAttributes[t],byteOffset:n,count:l};o.featureAttributes[t]=r,n+=("UInt64"===r.valueType?8:v(r.valueType))*r.valuesPerElement*l}}return p(n,t.byteLength,"geometry"),o.byteCount=n-o.byteOffset,o}const y={position:a.r.POSITION,normal:a.r.NORMAL,color:a.r.COLOR,uv0:a.r.UV0,region:a.r.UVREGION};function m(t,e,r){if("lepcc-rgb"===t.encoding)return(0,s.mb)(e);if("lepcc-intensity"===t.encoding)return(0,s.Ax)(e);if(null!=t.encoding&&""!==t.encoding)throw new n.A("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");t["attributeByteCounts "]&&!t.attributeByteCounts&&(l().warn("Warning: Trailing space in 'attributeByteCounts '."),t.attributeByteCounts=t["attributeByteCounts "]),"ObjectIds"===t.ordering[0]&&t.hasOwnProperty("objectIds")&&(l().warn("Warning: Case error in objectIds"),t.ordering[0]="objectIds");const o=h(e,t,r);p(o.byteOffset+o.byteCount,e.byteLength,"attribute");const i=o.entries.attributeValues||o.entries.objectIds;if(i){if("String"===i.valueType){const t=o.entries.attributeByteCounts,r=f(e,t),n=function(t,e){return new Uint8Array(t,e.byteOffset,e.byteCount)}(e,i);return i.timeEncoding?function(t,e,r){return d(t,e,r).map((t=>{const e=t?Date.parse(t):null;return e&&!Number.isNaN(e)?e:null}))}(t.count,r,n):d(t.count,r,n)}return f(e,i)}throw new n.A("bad-attribute-storage-info","Bad attributeStorageInfo specification.")}const g={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},A={Float32:(t,e)=>new DataView(t,0).getFloat32(e,!0),Float64:(t,e)=>new DataView(t,0).getFloat64(e,!0),UInt8:(t,e)=>new DataView(t,0).getUint8(e),Int8:(t,e)=>new DataView(t,0).getInt8(e),UInt16:(t,e)=>new DataView(t,0).getUint16(e,!0),Int16:(t,e)=>new DataView(t,0).getInt16(e,!0),UInt32:(t,e)=>new DataView(t,0).getUint32(e,!0),Int32:(t,e)=>new DataView(t,0).getInt32(e,!0)};function w(t){return g.hasOwnProperty(t)}function v(t){return w(t)?g[t].BYTES_PER_ELEMENT:0}},70564:(t,e,r)=>{r.d(e,{Ax:()=>m,Me:()=>u,mb:()=>p});var n=r(62991);const o=!0,i={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16};function s(t,e,r){return{identifier:String.fromCharCode.apply(null,new Uint8Array(t,r+i.identifierOffset,i.identifierLength)),version:e.getUint16(r+i.versionOffset,o),checksum:e.getUint32(r+i.checksumOffset,o)}}const a={sizeLo:0,sizeHi:4,minX:8,minY:16,minZ:24,maxX:32,maxY:40,maxZ:48,errorX:56,errorY:64,errorZ:72,count:80,reserved:84,byteCount:88};function l(t,e){return{sizeLo:t.getUint32(e+a.sizeLo,o),sizeHi:t.getUint32(e+a.sizeHi,o),minX:t.getFloat64(e+a.minX,o),minY:t.getFloat64(e+a.minY,o),minZ:t.getFloat64(e+a.minZ,o),maxX:t.getFloat64(e+a.maxX,o),maxY:t.getFloat64(e+a.maxY,o),maxZ:t.getFloat64(e+a.maxZ,o),errorX:t.getFloat64(e+a.errorX,o),errorY:t.getFloat64(e+a.errorY,o),errorZ:t.getFloat64(e+a.errorZ,o),count:t.getUint32(e+a.count,o),reserved:t.getUint32(e+a.reserved,o)}}function u(t){const e=new DataView(t,0);let r=0;const{identifier:o,version:u}=s(t,e,r);if(r+=i.byteCount,"LEPCC     "!==o)throw new n.A("lepcc-decode-error","Bad identifier");if(u>1)throw new n.A("lepcc-decode-error","Unknown version");const d=l(e,r);if(r+=a.byteCount,d.sizeHi*2**32+d.sizeLo!==t.byteLength)throw new n.A("lepcc-decode-error","Bad size");const f=new Float64Array(3*d.count),h=[],p=[],b=[],y=[];if(r=c(t,r,h),r=c(t,r,p),r=c(t,r,b),r=c(t,r,y),r!==t.byteLength)throw new n.A("lepcc-decode-error","Bad length");let m=0,g=0;for(let t=0;t<h.length;t++){g+=h[t];let e=0;for(let r=0;r<p[t];r++){e+=b[m];const t=y[m];f[3*m]=Math.min(d.maxX,d.minX+2*d.errorX*e),f[3*m+1]=Math.min(d.maxY,d.minY+2*d.errorY*g),f[3*m+2]=Math.min(d.maxZ,d.minZ+2*d.errorZ*t),m++}}return{errorX:d.errorX,errorY:d.errorY,errorZ:d.errorZ,result:f}}function c(t,e,r){const n=[];e=d(t,e,n);const o=[];for(let i=0;i<n.length;i++){o.length=0,e=d(t,e,o);for(let t=0;t<o.length;t++)r.push(o[t]+n[i])}return e}function d(t,e,r){const i=new DataView(t,e),s=i.getUint8(0),a=31&s,l=!!(32&s),u=(192&s)>>6;let c=0;if(0===u)c=i.getUint32(1,o),e+=5;else if(1===u)c=i.getUint16(1,o),e+=3;else{if(2!==u)throw new n.A("lepcc-decode-error","Bad count type");c=i.getUint8(1),e+=2}if(l)throw new n.A("lepcc-decode-error","LUT not implemented");const d=Math.ceil(c*a/8),f=new Uint8Array(t,e,d);let h=0,p=0,b=0;const y=-1>>>32-a;for(let t=0;t<c;t++){for(;p<a;)h|=f[b]<<p,p+=8,b+=1;r[t]=h&y,h>>>=a,p-=a,p+a>32&&(h|=f[b-1]>>8-p)}return e+b}const f={sizeLo:0,sizeHi:4,count:8,colorMapCount:12,lookupMethod:14,compressionMethod:15,byteCount:16};function h(t,e){return{sizeLo:t.getUint32(e+f.sizeLo,o),sizeHi:t.getUint32(e+f.sizeHi,o),count:t.getUint32(e+f.count,o),colorMapCount:t.getUint16(e+f.colorMapCount,o),lookupMethod:t.getUint8(e+f.lookupMethod),compressionMethod:t.getUint8(e+f.compressionMethod)}}function p(t){const e=new DataView(t,0);let r=0;const{identifier:o,version:a}=s(t,e,r);if(r+=i.byteCount,"ClusterRGB"!==o)throw new n.A("lepcc-decode-error","Bad identifier");if(a>1)throw new n.A("lepcc-decode-error","Unknown version");const l=h(e,r);if(r+=f.byteCount,l.sizeHi*2**32+l.sizeLo!==t.byteLength)throw new n.A("lepcc-decode-error","Bad size");if((2===l.lookupMethod||1===l.lookupMethod)&&0===l.compressionMethod){if(3*l.colorMapCount+l.count+r!==t.byteLength||l.colorMapCount>256)throw new n.A("lepcc-decode-error","Bad count");const e=new Uint8Array(t,r,3*l.colorMapCount),o=new Uint8Array(t,r+3*l.colorMapCount,l.count),i=new Uint8Array(3*l.count);for(let t=0;t<l.count;t++){const r=o[t];i[3*t]=e[3*r],i[3*t+1]=e[3*r+1],i[3*t+2]=e[3*r+2]}return i}if(0===l.lookupMethod&&0===l.compressionMethod){if(3*l.count+r!==t.byteLength||0!==l.colorMapCount)throw new n.A("lepcc-decode-error","Bad count");return new Uint8Array(t,r).slice()}if(l.lookupMethod<=2&&1===l.compressionMethod){if(r+3!==t.byteLength||1!==l.colorMapCount)throw new n.A("lepcc-decode-error","Bad count");const o=e.getUint8(r),i=e.getUint8(r+1),s=e.getUint8(r+2),a=new Uint8Array(3*l.count);for(let t=0;t<l.count;t++)a[3*t]=o,a[3*t+1]=i,a[3*t+2]=s;return a}throw new n.A("lepcc-decode-error","Bad method "+l.lookupMethod+","+l.compressionMethod)}const b={sizeLo:0,sizeHi:4,count:8,scaleFactor:12,bitsPerPoint:14,reserved:15,byteCount:16};function y(t,e){return{sizeLo:t.getUint32(e+b.sizeLo,o),sizeHi:t.getUint32(e+b.sizeHi,o),count:t.getUint32(e+b.count,o),scaleFactor:t.getUint16(e+b.scaleFactor,o),bitsPerPoint:t.getUint8(e+b.bitsPerPoint),reserved:t.getUint8(e+b.reserved)}}function m(t){const e=new DataView(t,0);let r=0;const{identifier:o,version:a}=s(t,e,r);if(r+=i.byteCount,"Intensity "!==o)throw new n.A("lepcc-decode-error","Bad identifier");if(a>1)throw new n.A("lepcc-decode-error","Unknown version");const l=y(e,r);if(r+=b.byteCount,l.sizeHi*2**32+l.sizeLo!==t.byteLength)throw new n.A("lepcc-decode-error","Bad size");const u=new Uint16Array(l.count);if(8===l.bitsPerPoint){if(l.count+r!==t.byteLength)throw new n.A("lepcc-decode-error","Bad size");const e=new Uint8Array(t,r,l.count);for(let t=0;t<l.count;t++)u[t]=e[t]*l.scaleFactor}else if(16===l.bitsPerPoint){if(2*l.count+r!==t.byteLength)throw new n.A("lepcc-decode-error","Bad size");const e=new Uint16Array(t,r,l.count);for(let t=0;t<l.count;t++)u[t]=e[t]*l.scaleFactor}else{const e=[];if(d(t,r,e)!==t.byteLength)throw new n.A("lepcc-decode-error","Bad size");for(let t=0;t<l.count;t++)u[t]=e[t]*l.scaleFactor}return u}},45506:(t,e,r)=>{r.d(e,{ab:()=>wt,gm:()=>Pt});var n=r(82541),o=r(79441),i=r(26110),s=r(31753),a=r(19165),l=r(80347),u=r(19913),c=r(74772),d=r(76982),f=r(34670),h=r(32159),p=r(63540),b=r(88133),y=r(99269),m=r(87368),g=r(67488),A=r(11631),w=r(84456),v=r(56560),C=r(10941);const _=1e-6,T=(0,u.vt)(),M=(0,u.vt)();function I(t,e,r,n,o,i,s,a,l,u){return function(t,e,r){let n=gt(t.maxVert[0],t.minVert[0]),o=0;for(let e=1;e<7;++e){const r=gt(t.maxVert[e],t.minVert[e]);r>n&&(n=r,o=e)}pt(e,t.minVert[o]),pt(r,t.maxVert[o])}(t,n,o),gt(n,o)<_?1:(ft(s,n,o),yt(s,s),function(t,e,r,n){const{data:o,size:i}=t;let s=Number.NEGATIVE_INFINITY,a=0;for(let t=0;t<o.length;t+=i){x[0]=o[t]-e[0],x[1]=o[t+1]-e[1],x[2]=o[t+2]-e[2];const n=r[0]*x[0]+r[1]*x[1]+r[2]*x[2],i=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],l=x[0]*x[0]+x[1]*x[1]+x[2]*x[2]-n*n/i;l>s&&(s=l,a=t)}return pt(n,o,a),s}(e,n,s,i)<_?2:(ft(a,o,i),yt(a,a),ft(l,i,n),yt(l,l),bt(r,a,s),yt(r,r),q(e,r,s,a,l,u),0))}const O=(0,u.vt)(),S=(0,u.vt)(),E=(0,u.vt)(),P=(0,u.vt)(),N=(0,u.vt)(),z=(0,u.vt)(),R=(0,u.vt)(),U=(0,u.vt)();function j(t,e,r,n,o,i,s,a,l){(function(t,e,r,n,o){!function(t,e,r,n,o){const{data:i,size:s}=t;pt(n,i),pt(o,n),r[0]=At(Y,e),r[1]=r[0];for(let t=s;t<i.length;t+=s){const s=i[t]*e[0]+i[t+1]*e[1]+i[t+2]*e[2];s<r[0]&&(r[0]=s,pt(n,i,t)),s>r[1]&&(r[1]=s,pt(o,i,t))}}(t,e,V,o,n);const i=At(r,e);V[1]-_<=i&&(n[0]=void 0),V[0]+_>=i&&(o[0]=void 0)})(t,e,r,O,S),void 0!==O[0]&&(ft(E,O,r),yt(E,E),ft(P,O,n),yt(P,P),ft(N,O,o),yt(N,N),bt(z,P,i),yt(z,z),bt(R,N,s),yt(R,R),bt(U,E,a),yt(U,U),q(t,z,i,P,E,l),q(t,R,s,N,P,l),q(t,U,a,E,N,l)),void 0!==S[0]&&(ft(E,S,r),yt(E,E),ft(P,S,n),yt(P,P),ft(N,S,o),yt(N,N),bt(z,P,i),yt(z,z),bt(R,N,s),yt(R,R),bt(U,E,a),yt(U,U),q(t,z,i,P,E,l),q(t,R,s,N,P,l),q(t,U,a,E,N,l))}const x=[0,0,0],V=(0,v.vt)(),F=(0,u.vt)(),L=(0,u.vt)(),D=(0,u.vt)(),B=(0,u.vt)(),Z=(0,u.vt)(),k=(0,u.vt)();function q(t,e,r,n,o,i){if(mt(e)<_)return;bt(F,r,e),bt(L,n,e),bt(D,o,e),X(t,e,V),Z[1]=V[0],B[1]=V[1],k[1]=B[1]-Z[1];const s=[r,n,o],a=[F,L,D];for(let r=0;r<3;++r){X(t,s[r],V),Z[0]=V[0],B[0]=V[1],X(t,a[r],V),Z[2]=V[0],B[2]=V[1],k[0]=B[0]-Z[0],k[2]=B[2]-Z[2];const n=ct(k);n<i.quality&&(pt(i.b0,s[r]),pt(i.b1,e),pt(i.b2,a[r]),i.quality=n)}}const Y=(0,u.vt)();function X(t,e,r){const{data:n,size:o}=t;r[0]=Number.POSITIVE_INFINITY,r[1]=Number.NEGATIVE_INFINITY;for(let t=0;t<n.length;t+=o){const o=n[t]*e[0]+n[t+1]*e[1]+n[t+2]*e[2];r[0]=Math.min(r[0],o),r[1]=Math.max(r[1],o)}}function H(t,e,r){r.center=t,r.halfSize=(0,l.h)(e,e,.5),r.quaternion=a.zK}const G=(0,u.vt)(),K=(0,u.vt)(),W=(0,u.vt)(),Q=(0,u.vt)(),J=(0,u.vt)(),$=(0,u.vt)();function tt(t,e,r){pt(G,e),Math.abs(e[0])>Math.abs(e[1])&&Math.abs(e[0])>Math.abs(e[2])?G[0]=0:Math.abs(e[1])>Math.abs(e[2])?G[1]=0:G[2]=0,mt(G)<_&&(G[0]=G[1]=G[2]=1),bt(K,e,G),yt(K,K),bt(W,e,K),yt(W,W),et(t,e,K,W,Q,J),ft($,J,Q),at(e,K,W,Q,J,$,r)}function et(t,e,r,n,o,i){X(t,e,V),o[0]=V[0],i[0]=V[1],X(t,r,V),o[1]=V[0],i[1]=V[1],X(t,n,V),o[2]=V[0],i[2]=V[1]}const rt=(0,u.vt)(),nt=(0,u.vt)(),ot=(0,u.vt)(),it=(0,o.fA)(1,0,0,0,1,0,0,0,1),st=(0,a.vt)();function at(t,e,r,n,o,i,s){it[0]=t[0],it[1]=t[1],it[2]=t[2],it[3]=e[0],it[4]=e[1],it[5]=e[2],it[6]=r[0],it[7]=r[1],it[8]=r[2],s.quaternion=function(t,e){const r=e[0]+e[4]+e[8];if(r>0){let n=Math.sqrt(r+1);t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n}else{let r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);const n=(r+1)%3,o=(r+2)%3;let i=Math.sqrt(e[3*r+r]-e[3*n+n]-e[3*o+o]+1);t[r]=.5*i,i=.5/i,t[3]=(e[3*n+o]-e[3*o+n])*i,t[n]=(e[3*n+r]+e[3*r+n])*i,t[o]=(e[3*o+r]+e[3*r+o])*i}return t}(st,it),dt(rt,n,o),ht(rt,rt,.5),ht(nt,t,rt[0]),ht(ot,e,rt[1]),dt(nt,nt,ot),ht(ot,r,rt[2]),s.center=(0,l.g)(nt,nt,ot),s.halfSize=(0,l.h)(rt,i,.5)}class lt{constructor(t){this.minVert=new Array(7),this.maxVert=new Array(7),this.buffer=new ArrayBuffer(448);let e=0;this.minProj=new Float64Array(this.buffer,e,7),e+=56,this.maxProj=new Float64Array(this.buffer,e,7),e+=56;for(let t=0;t<7;++t)this.minVert[t]=new Float64Array(this.buffer,e,3),e+=24;for(let t=0;t<7;++t)this.maxVert[t]=new Float64Array(this.buffer,e,3),e+=24;for(let t=0;t<7;++t)this.minProj[t]=Number.POSITIVE_INFINITY,this.maxProj[t]=Number.NEGATIVE_INFINITY;const r=new Array(7),n=new Array(7),{data:o,size:i}=t;for(let t=0;t<o.length;t+=i){let e=o[t];e<this.minProj[0]&&(this.minProj[0]=e,r[0]=t),e>this.maxProj[0]&&(this.maxProj[0]=e,n[0]=t),e=o[t+1],e<this.minProj[1]&&(this.minProj[1]=e,r[1]=t),e>this.maxProj[1]&&(this.maxProj[1]=e,n[1]=t),e=o[t+2],e<this.minProj[2]&&(this.minProj[2]=e,r[2]=t),e>this.maxProj[2]&&(this.maxProj[2]=e,n[2]=t),e=o[t]+o[t+1]+o[t+2],e<this.minProj[3]&&(this.minProj[3]=e,r[3]=t),e>this.maxProj[3]&&(this.maxProj[3]=e,n[3]=t),e=o[t]+o[t+1]-o[t+2],e<this.minProj[4]&&(this.minProj[4]=e,r[4]=t),e>this.maxProj[4]&&(this.maxProj[4]=e,n[4]=t),e=o[t]-o[t+1]+o[t+2],e<this.minProj[5]&&(this.minProj[5]=e,r[5]=t),e>this.maxProj[5]&&(this.maxProj[5]=e,n[5]=t),e=o[t]-o[t+1]-o[t+2],e<this.minProj[6]&&(this.minProj[6]=e,r[6]=t),e>this.maxProj[6]&&(this.maxProj[6]=e,n[6]=t)}for(let t=0;t<7;++t){let e=r[t];pt(this.minVert[t],o,e),e=n[t],pt(this.maxVert[t],o,e)}}}class ut{constructor(){this.b0=(0,u.fA)(1,0,0),this.b1=(0,u.fA)(0,1,0),this.b2=(0,u.fA)(0,0,1),this.quality=0}}function ct(t){return t[0]*t[1]+t[0]*t[2]+t[1]*t[2]}function dt(t,e,r){t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2]}function ft(t,e,r){t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2]}function ht(t,e,r){t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r}function pt(t,e,r=0){t[0]=e[r],t[1]=e[r+1],t[2]=e[r+2]}function bt(t,e,r){const n=e[0],o=e[1],i=e[2],s=r[0],a=r[1],l=r[2];t[0]=o*l-i*a,t[1]=i*s-n*l,t[2]=n*a-o*s}function yt(t,e){const r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];if(r>0){const n=1/Math.sqrt(r);t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n}}function mt(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function gt(t,e){const r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2];return r*r+n*n+o*o}function At(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}class wt{constructor(t=u.uY,e=qt,r=a.zK){this._data=[t[0],t[1],t[2],e[0],e[1],e[2],r[0],r[1],r[2],r[3]]}clone(){const t=new wt;return t._data=this._data.slice(),t}invalidate(){this._data[3]=-1}get isValid(){return this._data[3]>=0}static fromData(t){const e=new wt;return e._data=t.slice(),e}static fromJSON(t){return new wt(t.center,t.halfSize,t.quaternion)}copy(t){this._data=t.data.slice()}get center(){return(0,l.s)(A.rq.get(),this._data[0],this._data[1],this._data[2])}get centerX(){return this._data[0]}get centerY(){return this._data[1]}get centerZ(){return this._data[2]}getCenter(t){return t[0]=this._data[0],t[1]=this._data[1],t[2]=this._data[2],t}set center(t){this._data[0]=t[0],this._data[1]=t[1],this._data[2]=t[2]}setCenter(t,e,r){this._data[0]=t,this._data[1]=e,this._data[2]=r}get halfSize(){return(0,l.s)(A.rq.get(),this._data[3],this._data[4],this._data[5])}get halfSizeX(){return this._data[3]}get halfSizeY(){return this._data[4]}get halfSizeZ(){return this._data[5]}getHalfSize(t){return t[0]=this._data[3],t[1]=this._data[4],t[2]=this._data[5],t}set halfSize(t){this._data[3]=t[0],this._data[4]=t[1],this._data[5]=t[2]}get quaternion(){return(0,s.hZ)(A.J8.get(),this._data[6],this._data[7],this._data[8],this._data[9])}getQuaternion(t){return t[0]=this._data[6],t[1]=this._data[7],t[2]=this._data[8],t[3]=this._data[9],t}set quaternion(t){this._data[6]=t[0],this._data[7]=t[1],this._data[8]=t[2],this._data[9]=t[3]}get data(){return this._data}getCorners(t){const e=vt,r=this._data;e[0]=r[6],e[1]=r[7],e[2]=r[8],e[3]=r[9];for(let n=0;n<8;++n){const o=t[n];o[0]=(1&n?-1:1)*r[3],o[1]=(2&n?-1:1)*r[4],o[2]=(4&n?-1:1)*r[5],(0,l.u)(o,o,e),o[0]+=r[0],o[1]+=r[1],o[2]+=r[2]}}isVisible(t){return this.intersectPlane(t[0])<=0&&this.intersectPlane(t[1])<=0&&this.intersectPlane(t[2])<=0&&this.intersectPlane(t[3])<=0&&this.intersectPlane(t[4])<=0&&this.intersectPlane(t[5])<=0}get radius(){const t=this._data[3],e=this._data[4],r=this._data[5];return Math.sqrt(t*t+e*e+r*r)}intersectSphere(t){Tt[0]=this._data[0]-t[0],Tt[1]=this._data[1]-t[1],Tt[2]=this._data[2]-t[2];const e=this.getQuaternion(Ct);return(0,s.Xr)(vt,e),(0,l.u)(Tt,Tt,vt),(0,l.v)(Tt,Tt),Mt[0]=Math.min(Tt[0],this._data[3]),Mt[1]=Math.min(Tt[1],this._data[4]),Mt[2]=Math.min(Tt[2],this._data[5]),(0,l.w)(Mt,Tt)<t[3]*t[3]}intersectSphereWithMBS(t,e=this.radius){const r=this._data;Tt[0]=r[0]-t[0],Tt[1]=r[1]-t[1],Tt[2]=r[2]-t[2];const n=t[3],o=n+e;return!((0,l.x)(Tt)>o*o)&&(vt[0]=-r[6],vt[1]=-r[7],vt[2]=-r[8],vt[3]=r[9],(0,l.u)(Tt,Tt,vt),(0,l.v)(Tt,Tt),Mt[0]=Math.min(Tt[0],r[3]),Mt[1]=Math.min(Tt[1],r[4]),Mt[2]=Math.min(Tt[2],r[5]),(0,l.w)(Mt,Tt)<n*n)}intersectPlane(t){const e=t[0]*this._data[0]+t[1]*this._data[1]+t[2]*this._data[2]+t[3],r=this.projectedRadius((0,m.Qj)(t));return e>r?1:e<-r?-1:0}intersectRay(t,e,r=0){const n=this._data,o=vt;o[0]=-n[6],o[1]=-n[7],o[2]=-n[8],o[3]=n[9],Tt[0]=t[0]-n[0],Tt[1]=t[1]-n[1],Tt[2]=t[2]-n[2];const i=(0,l.u)(Tt,Tt,vt),s=(0,l.u)(Mt,e,vt);let a=-1/0,u=1/0;const c=this.getHalfSize(Vt);for(let t=0;t<3;t++){const e=i[t],n=s[t],o=c[t]+r;if(Math.abs(n)>1e-6){const t=(o-e)/n,r=(-o-e)/n;a=Math.max(a,Math.min(t,r)),u=Math.min(u,Math.max(t,r))}else if(e>o||e<-o)return!1}return a<=u}projectedArea(t,e,r,o){const i=this.getQuaternion(Ct);(0,s.Xr)(vt,i),Tt[0]=t[0]-this._data[0],Tt[1]=t[1]-this._data[1],Tt[2]=t[2]-this._data[2],(0,l.u)(Tt,Tt,vt);const a=this.getHalfSize(Vt),u=Tt[0]<-a[0]?-1:Tt[0]>a[0]?1:0,d=Tt[1]<-a[1]?-1:Tt[1]>a[1]?1:0,f=Tt[2]<-a[2]?-1:Tt[2]>a[2]?1:0,h=Math.abs(u)+Math.abs(d)+Math.abs(f);if(0===h)return 1/0;const p=1===h?4:6,b=6*(u+3*d+9*f+13);(0,n.I0)(Ft,i),(0,n.hs)(Ft,Ft,a);const y=this.getCenter(jt);for(let t=0;t<p;t++){const r=Et[b+t];(0,l.s)(Tt,((1&r)<<1)-1,(2&r)-1,((4&r)>>1)-1),(0,l.t)(Tt,Tt,Ft),(0,l.g)(It,y,Tt),It[3]=1,(0,c.t)(It,It,e);const n=1/Math.max(1e-6,It[3]);St[2*t]=It[0]*n,St[2*t+1]=It[1]*n}const m=2*p-2;let g=St[0]*(St[3]-St[m+1])+St[m]*(St[1]-St[m-1]);for(let t=2;t<m;t+=2)g+=St[t]*(St[t+3]-St[t-1]);return Math.abs(g)*r*o*.125}projectedRadius(t){const e=this.getQuaternion(Ct);return(0,s.Xr)(vt,e),(0,l.u)(Tt,t,vt),Math.abs(Tt[0]*this._data[3])+Math.abs(Tt[1]*this._data[4])+Math.abs(Tt[2]*this._data[5])}minimumDistancePlane(t){return t[0]*this._data[0]+t[1]*this._data[1]+t[2]*this._data[2]+t[3]-this.projectedRadius((0,m.Qj)(t))}maximumDistancePlane(t){return t[0]*this._data[0]+t[1]*this._data[1]+t[2]*this._data[2]+t[3]+this.projectedRadius((0,m.Qj)(t))}toAaBoundingBox(t){const e=this.getQuaternion(Ct),r=(0,n.I0)(Ft,e),o=this._data[3]*Math.abs(r[0])+this._data[4]*Math.abs(r[3])+this._data[5]*Math.abs(r[6]),i=this._data[3]*Math.abs(r[1])+this._data[4]*Math.abs(r[4])+this._data[5]*Math.abs(r[7]),s=this._data[3]*Math.abs(r[2])+this._data[4]*Math.abs(r[5])+this._data[5]*Math.abs(r[8]);t[0]=this._data[0]-o,t[1]=this._data[1]-i,t[2]=this._data[2]-s,t[3]=this._data[0]+o,t[4]=this._data[1]+i,t[5]=this._data[2]+s}transform(t,e,r,n=0,o=(0,h.lO)(r),i=(0,h.lO)(e),a=(0,y.jd)(e,i)){if(r===o)e.isGeographic?function(t,e,r,n,o=(0,h.lO)(r)){const i=(0,f.tO)(r),a=1+Math.max(0,n)/(i.radius+t.centerZ);t.getCenter(Ut),Ut[2]+=n,(0,b.projectBuffer)(Ut,r,0,Ut,o,0,1),e.center=Ut;const u=t.getQuaternion(Ct);e.quaternion=u,(0,s.Xr)(vt,u),(0,l.s)(Bt,0,0,1),(0,l.u)(Bt,Bt,vt);const c=t.getHalfSize(Vt);(0,l.s)(Bt,c[0]*Math.abs(Bt[0]),c[1]*Math.abs(Bt[1]),c[2]*Math.abs(Bt[2])),(0,l.h)(Bt,Bt,i.inverseFlattening),(0,l.g)(Bt,c,Bt),e.halfSize=(0,l.h)(Bt,Bt,a)}(this,t,e,n,i):function(t,e,r,n,o=(0,h.lO)(r),i=(0,y.jd)(r,o)){t.getCorners(Dt),t.getCenter(Ut),Ut[2]+=n,(0,p.l)(r,Ut,Lt,o),e.setCenter(Lt[12],Lt[13],Lt[14]);const a=2*Math.sqrt(1+Lt[0]+Lt[5]+Lt[10]);vt[0]=(Lt[6]-Lt[9])/a,vt[1]=(Lt[8]-Lt[2])/a,vt[2]=(Lt[1]-Lt[4])/a,vt[3]=.25*a;const u=t.getQuaternion(Ct);e.quaternion=(0,s.lw)(vt,vt,u),(0,s.Xr)(vt,vt),(0,l.s)(Zt,0,0,0);const c=e.getCenter(xt);for(const t of Dt)t[2]+=n,i(t,0,t,0),(0,l.z)(Bt,t,c),(0,l.u)(Bt,Bt,vt),(0,l.v)(Bt,Bt),(0,l.C)(Zt,Zt,Bt);e.halfSize=Zt}(this,t,e,n,i,a);else if(e.isWGS84&&(r.isWebMercator||(0,g.r1)(r)))!function(t,e,r,n,o){e.getCenter(jt),jt[2]+=o;const i=(0,h.lO)(r);(0,b.projectBuffer)(jt,t,0,jt,i,0,1),Nt(i,e,jt,r,n)}(e,this,r,t,n);else if(e.isWebMercator&&(0,g.r1)(r))!function(t,e,r,n,o){e.getCenter(jt),jt[2]+=o,Nt(t,e,jt,r,n)}(e,this,r,t,n);else{const o=this.getCenter(jt);o[2]+=n,(0,b.projectBuffer)(o,e,0,o,r,0,1),t.center=o,this!==t&&(t.quaternion=this.getQuaternion(Ct),t.halfSize=this.getHalfSize(Vt))}}}const vt=(0,a.vt)(),Ct=(0,a.vt)(),_t=(0,a.vt)(),Tt=(0,u.vt)(),Mt=(0,u.vt)(),It=(0,d.vt)();function Ot(t,e=new wt){return function(t,e){const{data:r,size:n}=t,o=r.length/n;if(o<=0)return;const i=new lt(t);dt(T,i.minProj,i.maxProj),ht(T,T,.5),ft(M,i.maxProj,i.minProj);const s=ct(M),a=new ut;a.quality=s,o<14&&(t=new C.K(new Float64Array(i.buffer,112,42),3));const l=(0,u.vt)(),c=(0,u.vt)(),d=(0,u.vt)(),f=(0,u.vt)(),h=(0,u.vt)(),p=(0,u.vt)(),b=(0,u.vt)();switch(I(i,t,b,l,c,d,f,h,p,a)){case 1:return void H(T,M,e);case 2:return void tt(t,f,e)}j(t,b,l,c,d,f,h,p,a),et(t,a.b0,a.b1,a.b2,Q,J);const y=(0,u.vt)();ft(y,J,Q),a.quality=ct(y),a.quality<s?at(a.b0,a.b1,a.b2,Q,J,y,e):H(T,M,e)}(t,e),e}const St=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2],Et=(()=>{const t=new Int8Array(162);let e=0;const r=r=>{for(let n=0;n<r.length;n++)t[e+n]=r[n];e+=6};return r([6,2,3,1,5,4]),r([0,2,3,1,5,4]),r([0,2,3,7,5,4]),r([0,1,3,2,6,4]),r([0,1,3,2,0,0]),r([0,1,5,7,3,2]),r([0,1,3,7,6,4]),r([0,1,3,7,6,2]),r([0,1,5,7,6,2]),r([0,1,5,4,6,2]),r([0,1,5,4,0,0]),r([0,1,3,7,5,4]),r([0,2,6,4,0,0]),r([0,0,0,0,0,0]),r([1,3,7,5,0,0]),r([2,3,7,6,4,0]),r([2,3,7,6,0,0]),r([2,3,1,5,7,6]),r([0,1,5,7,6,2]),r([0,1,5,7,6,4]),r([0,1,3,7,6,4]),r([4,5,7,6,2,0]),r([4,5,7,6,0,0]),r([4,5,1,3,7,6]),r([0,2,3,7,5,4]),r([6,2,3,7,5,4]),r([6,2,3,1,5,4]),t})();function Pt(t,e,r,n,o){const i=t.getQuaternion(Ct);o.quaternion=i,(0,s.Xr)(vt,i);const a=t.getCenter(jt),c=t.getHalfSize(Vt);if(n===w.RT.Global){(0,l.u)(Bt,a,vt),(0,l.v)(Zt,Bt),(0,l.y)(kt,Zt,c),(0,l.z)(kt,Zt,kt);const n=(0,l.l)(kt);(0,l.g)(kt,Zt,c);const i=(0,l.l)(kt);if(n<r)o.center=a,(0,l.s)(Bt,r,r,r),o.halfSize=(0,l.g)(Bt,c,Bt);else{const s=i>0?1+e/i:1,a=n>0?1+r/n:1,u=(a+s)/2,d=(a-s)/2;(0,l.h)(kt,Zt,d),o.halfSize=(0,l.r)(kt,kt,c,u),(0,l.h)(kt,Zt,u),(0,l.r)(kt,kt,c,d),(0,l.A)(Bt,Bt),(0,l.B)(Bt,kt,Bt);const f=t.getQuaternion(_t);o.center=(0,l.u)(Bt,Bt,f)}}else{o.center=(0,l.r)(Bt,a,u.Cb,(r+e)/2);const t=(0,l.u)(Bt,u.Cb,vt);(0,l.v)(t,t),o.halfSize=(0,l.r)(Zt,c,t,(r-e)/2)}return o}function Nt(t,e,r,o,i){const s=e.getQuaternion(Ct),a=(0,n.I0)(Ft,s),l=e.getHalfSize(Vt);for(let t=0;t<8;++t){for(let e=0;e<3;++e)Ut[e]=l[e]*(t&1<<e?-1:1);for(let e=0;e<3;++e){let n=r[e];for(let t=0;t<3;++t)n+=Ut[t]*a[3*t+e];zt[3*t+e]=n}}(0,b.projectBuffer)(zt,t,0,zt,o,0,8),Ot(Rt,i)}const zt=new Array(24),Rt=new C.K(zt,3),Ut=(0,u.vt)(),jt=(0,u.vt)(),xt=(0,u.vt)(),Vt=(0,u.vt)(),Ft=(0,o.vt)(),Lt=(0,i.vt)(),Dt=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],Bt=(0,u.vt)(),Zt=(0,u.vt)(),kt=(0,u.vt)(),qt=(0,u.fA)(-1,-1,-1)},10941:(t,e,r)=>{r.d(e,{K:()=>n,n:()=>o});class n{constructor(t,e,r=e){this.data=t,this.size=e,this.stride=r}}class o extends n{constructor(t,e,r,n=!1,o=r){super(t,r,o),this.indices=e,this.exclusive=n}}},33763:(t,e,r)=>{var n;function o(t){return t===n.POSITION}r.d(e,{b:()=>o,r:()=>n}),function(t){t.POSITION="position",t.NORMAL="normal",t.NORMALCOMPRESSED="normalCompressed",t.UV0="uv0",t.COLOR="color",t.SYMBOLCOLOR="symbolColor",t.SIZE="size",t.TANGENT="tangent",t.OFFSET="offset",t.PERSPECTIVEDIVIDE="perspectiveDivide",t.CENTEROFFSETANDDISTANCE="centerOffsetAndDistance",t.LENGTH="length",t.PREVPOSITION="prevPosition",t.NEXTPOSITION="nextPosition",t.SUBDIVISIONFACTOR="subdivisionFactor",t.COLORFEATUREATTRIBUTE="colorFeatureAttribute",t.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",t.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",t.DISTANCETOSTART="distanceToStart",t.UVMAPSPACE="uvMapSpace",t.BOUNDINGRECT="boundingRect",t.UVREGION="uvRegion",t.PROFILERIGHT="profileRight",t.PROFILEUP="profileUp",t.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",t.FEATUREVALUE="featureValue",t.INSTANCEMODELORIGINHI="instanceModelOriginHi",t.INSTANCEMODELORIGINLO="instanceModelOriginLo",t.INSTANCEMODEL="instanceModel",t.INSTANCEMODELNORMAL="instanceModelNormal",t.INSTANCECOLOR="instanceColor",t.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",t.LOCALTRANSFORM="localTransform",t.GLOBALTRANSFORM="globalTransform",t.BOUNDINGSPHERE="boundingSphere",t.MODELORIGIN="modelOrigin",t.MODELSCALEFACTORS="modelScaleFactors",t.FEATUREATTRIBUTE="featureAttribute",t.STATE="state",t.LODLEVEL="lodLevel",t.POSITION0="position0",t.POSITION1="position1",t.NORMAL2COMPRESSED="normal2Compressed",t.COMPONENTINDEX="componentIndex",t.VARIANTOFFSET="variantOffset",t.VARIANTSTROKE="variantStroke",t.VARIANTEXTENSION="variantExtension",t.SIDENESS="sideness",t.START="start",t.END="end",t.UP="up",t.EXTRUDE="extrude",t.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor",t.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"}(n||(n={}))}}]);